{"version":3,"sources":["/home/circleci/src/utils/eulerFromQuaternion.js","/home/circleci/src/utils/commandUtils.js","/home/circleci/src/commands/Cubes.js","/home/circleci/src/commands/DrawPolygon/index.js","/home/circleci/src/commands/FilledPolygons.js","/home/circleci/src/commands/GLText.js","/home/circleci/src/commands/GLTFScene.js","/home/circleci/src/commands/Points.js","/home/circleci/src/utils/getOrthographicBounds.js","/home/circleci/src/camera/cameraProject.js","/home/circleci/src/camera/cameraStateSelectors.js","/home/circleci/src/camera/CameraStore.js","/home/circleci/src/camera/camera.js","/home/circleci/src/camera/CameraListener.js","/home/circleci/src/utils/common.js","/home/circleci/src/utils/Raycast.js","/home/circleci/src/WorldviewReactContext.js","/home/circleci/src/commands/Command.js","/home/circleci/src/utils/HitmapObjectIdManager.js","/home/circleci/src/utils/queuePromise.js","/home/circleci/src/utils/signal.js","/home/circleci/src/WorldviewContext.js","/home/circleci/src/Worldview.js","/home/circleci/src/utils/aggregate.js","/home/circleci/src/utils/Bounds.js","/home/circleci/src/utils/fromGeometry.js","/home/circleci/src/utils/parseGLB.js","/home/circleci/src/utils/getChildrenForHitmapDefaults.js","/home/circleci/src/commands/Cylinders.js","/home/circleci/src/commands/Cones.js","/home/circleci/src/commands/Arrows.js","/home/circleci/src/commands/Lines.js","/home/circleci/src/commands/Axes.js","/home/circleci/src/commands/Spheres.js","/home/circleci/src/commands/DrawPolygon/PolygonBuilder.js","/home/circleci/src/commands/Triangles.js","/home/circleci/src/commands/Text.js","/home/circleci/src/commands/Grid.js","/home/circleci/src/commands/Overlay.js","/home/circleci/project/packages/webviz-core/src/hooksImporter.js","/home/circleci/project/packages/webviz-core/src/components/Panel.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/index.js","/home/circleci/project/packages/webviz-core/src/hooks/useGlobalVariables.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/useLinkedGlobalVariables.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Transforms.js","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/parseRosPath.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder.js","webpack:///./packages/webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss?2d0e","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/isTypicalFilterName.js","/home/circleci/project/packages/webviz-core/src/components/Autocomplete.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/interactionUtils.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/index.js","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/util.js","/home/circleci/project/packages/webviz-core/src/panels/Plot/index.js","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems.js","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/MessagePathInput.js","/home/circleci/project/packages/webviz-core/src/components/MessageHistoryDEPRECATED/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/common.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicViewModeSelector.js","/home/circleci/project/packages/webviz-core/src/components/ValidatedInput.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TreeNodeRow.js","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/messagePathsForDatatype.js","/home/circleci/project/packages/webviz-core/src/components/TimeBasedChart/index.js","/home/circleci/project/packages/webviz-core/src/util/plotColors.js","/home/circleci/project/packages/webviz-core/shared/panelToolbarStyles.js","/home/circleci/project/packages/webviz-core/src/panels/StateTransitions/index.js","/home/circleci/project/packages/webviz-core/src/components/TopicToRenderMenu.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/Interactions.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/getDiff.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/buffers.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/decodeMarker.js","/home/circleci/project/packages/webviz-core/src/components/ExpandingToolbar.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/util.js","/home/circleci/project/packages/webviz-core/src/panels/Tab/TabDndContext.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/threeDimensionalVizUtils.js","/home/circleci/project/packages/webviz-core/src/util/Pose.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/useTopicTree.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/TopicSettingsEditor.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/topicGroupsMigrations.js","/home/circleci/project/packages/webviz-core/src/components/validators.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/DrawingTools/MeasuringTool.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/SearchText.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicTree.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/VisibilityToggle.js","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticsHistory.js","/home/circleci/project/packages/webviz-core/src/components/ReactChartjs/index.js","/home/circleci/project/packages/webviz-core/src/components/ReactChartjs/zoomAndPanHelpers.js","/home/circleci/project/packages/webviz-core/src/util/supportsOffscreenCanvas.js","/home/circleci/project/packages/webviz-core/src/util/WebWorkerManager.js","/home/circleci/project/packages/webviz-core/src/panels/Plot/internalTypes.js","/home/circleci/project/packages/webviz-core/src/util/toolsColorScheme.js","/home/circleci/project/packages/webviz-core/src/util/toggle.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/UnlinkGlobalVariables.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/UnlinkWrapper.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/index.js","webpack:///./packages/webviz-core/src/panels/RawMessages/index.module.scss?af85","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/useLatestMessageDataItem.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/Readers.js","/home/circleci/project/packages/webviz-core/src/components/Checkbox.js","/home/circleci/project/packages/webviz-core/src/components/Select/index.js","/home/circleci/project/packages/webviz-core/src/components/ColorPicker.js","webpack:///./packages/webviz-core/src/panels/ImageView/ImageCanvas.module.scss?5d90","/home/circleci/project/packages/webviz-core/src/panels/ImageView/CameraModel.js","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/projectConfig.js","/home/circleci/project/packages/webviz-core/src/panels/Rosout/LevelToString.js","webpack:///./packages/webviz-core/src/panels/Rosout/LogMessage.module.scss?a579","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/constants.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/topicGroupsUtils.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/DrawingTools/index.js","/home/circleci/project/packages/webviz-core/src/util/yaml.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/NodeName.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TreeNodeDotMenu.js","/home/circleci/project/packages/webviz-core/src/components/KeyboardShortcut.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/utils/index.js","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticStatusPanel.js","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticStatus.js","webpack:///./packages/webviz-core/src/panels/diagnostics/DiagnosticStatus.module.scss?5b1f","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticStatus.module.scss","/home/circleci/project/packages/webviz-core/src/panels/Plot/index.help.md","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/grammar.ne","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/constants.js","webpack:///./packages/webviz-core/src/components/Panel.module.scss?4cd7","/home/circleci/project/packages/webviz-core/src/components/Panel.module.scss","/home/circleci/project/packages/webviz-core/src/components/TimeBasedChart/TimeBasedChartTooltip.js","webpack:///./packages/webviz-core/src/components/TimeBasedChart/TimeBasedChartTooltip.module.scss?d62c","/home/circleci/project/packages/webviz-core/src/components/TimeBasedChart/TimeBasedChartTooltip.module.scss","/home/circleci/project/packages/webviz-core/src/components/createSyncingComponent.js","/home/circleci/project/packages/webviz-core/src/components/ReactChartjs/ChartJSWorker.js","/home/circleci/project/packages/webviz-core/src/components/ReactChartjs/ChartJSManager.js","/home/circleci/project/packages/webviz-core/src/components/ReactChartjs/ChartJSWorker.worker.js","/home/circleci/project/packages/webviz-core/src/util/FakeRpc.js","/home/circleci/project/packages/webviz-core/src/components/TimeBasedChart/TimeBasedChartLegend.js","/home/circleci/project/packages/webviz-core/src/components/TimeBasedChart/constants.js","/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotChart.js","webpack:///./packages/webviz-core/src/panels/Plot/PlotChart.module.scss?7749","/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotChart.module.scss","/home/circleci/project/packages/webviz-core/src/panels/Plot/derivative.js","/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotLegend.js","webpack:///./packages/webviz-core/src/panels/Plot/PlotLegend.module.scss?7c0a","/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotLegend.module.scss","webpack:///./packages/webviz-core/src/components/MessagePathSyntax/MessagePathInput.module.scss?b3b7","/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/MessagePathInput.module.scss","webpack:///./packages/webviz-core/src/components/Autocomplete.module.scss?43e7","/home/circleci/project/packages/webviz-core/src/components/Autocomplete.module.scss","/home/circleci/project/packages/webviz-core/src/util/fuzzyFilter.js","/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotMenu.js","webpack:///./packages/webviz-core/src/panels/Plot/PlotMenu.module.scss?44fc","/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotMenu.module.scss","/home/circleci/project/packages/webviz-core/src/panels/StateTransitions/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticStatusPanel.help.md","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticSummary.js","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticSummary.help.md","webpack:///./packages/webviz-core/src/panels/diagnostics/DiagnosticSummary.module.scss?8c10","/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticSummary.module.scss","/home/circleci/project/packages/webviz-core/src/panels/GlobalVariables/index.js","/home/circleci/project/packages/webviz-core/src/panels/GlobalVariables/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GeneralInfo.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableName.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/LinkToGlobalVariable.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/GlobalVariableLink/UnlinkGlobalVariable.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/TopicLink.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/Diff.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/getValueActionForValue.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/index.module.scss","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/Metadata.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/RawMessagesIcons.js","/home/circleci/project/packages/webviz-core/src/panels/RawMessages/utils.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/LinkedGlobalVariableList.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/ObjectDetails.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/PointCloudDetails.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/selection.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/logger.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/LaserScanSettingsEditor.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/MarkerSettingsEditor.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PoseSettingsEditor.js","webpack:///./packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/TopicSettingsEditor.module.scss?15e1","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/TopicSettingsEditor.module.scss","/home/circleci/project/packages/webviz-core/src/components/Select/Option.js","webpack:///./packages/webviz-core/src/components/Select/Option.module.scss?2a3e","/home/circleci/project/packages/webviz-core/src/components/Select/Option.module.scss","/home/circleci/project/packages/webviz-core/src/components/Select/Select.js","webpack:///./packages/webviz-core/src/components/Select/Select.module.scss?9452","/home/circleci/project/packages/webviz-core/src/components/Select/Select.module.scss","/home/circleci/project/packages/webviz-core/src/components/GradientPicker.js","webpack:///./packages/webviz-core/src/components/ExpandingToolbar.module.scss?f213","/home/circleci/project/packages/webviz-core/src/components/ExpandingToolbar.module.scss","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Interactions/InteractionContextMenu.js","/home/circleci/project/packages/webviz-core/src/panels/GlobalVariableSlider/index.js","/home/circleci/project/packages/webviz-core/src/components/GlobalVariableSlider.js","/home/circleci/project/packages/webviz-core/src/components/SliderWithTicks.js","/home/circleci/project/packages/webviz-core/src/components/TextField.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/index.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/ImageCanvas.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/ImageCanvas.module.scss","/home/circleci/project/packages/webviz-core/src/panels/ImageView/ImageCanvas.worker.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/renderImage.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/decodings.js","/home/circleci/project/packages/webviz-core/src/components/ContextMenu/index.js","/home/circleci/project/packages/webviz-core/src/panels/ImageView/index.help.md","webpack:///./packages/webviz-core/src/panels/ImageView/index.module.scss?9402","/home/circleci/project/packages/webviz-core/src/panels/ImageView/index.module.scss","/home/circleci/project/packages/webviz-core/src/util/synchronizeMessages.js","/home/circleci/project/packages/webviz-core/src/panels/Internals.js","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/index.js","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/BottomBar/index.js","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/BottomBar/DiagnosticsSection.js","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/BottomBar/LogsSection.js","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/playground-icon.svg","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/Sidebar.js","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/assets/file-document-edit.svg","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/assets/hammer-wrench.svg","/home/circleci/project/packages/webviz-core/src/panels/NodePlayground/index.help.md","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/lib.js","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/DEPRECATED_ros.js","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/index.js","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/pointClouds.ts","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/readers.ts","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/time.ts","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/types.ts","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/vectors.ts","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/templates/index.js","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/templates/twoDimensionalPlot.template.ts","/home/circleci/project/packages/webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/README.md","/home/circleci/project/packages/webviz-core/src/panels/Note/index.js","/home/circleci/project/packages/webviz-core/src/panels/Note/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/NumberOfRenders.js","/home/circleci/project/packages/webviz-core/src/panels/PlaybackPerformance.js","/home/circleci/project/packages/webviz-core/src/components/Sparkline.js","/home/circleci/project/packages/webviz-core/src/panels/Publish/index.js","/home/circleci/project/packages/webviz-core/src/panels/Publish/buildSampleMessage.js","/home/circleci/project/packages/webviz-core/src/components/Publisher.js","/home/circleci/project/packages/webviz-core/src/panels/Rosout/index.js","/home/circleci/project/packages/webviz-core/src/panels/Rosout/index.help.md","webpack:///./packages/webviz-core/src/panels/Rosout/index.module.scss?c0d1","/home/circleci/project/packages/webviz-core/src/panels/Rosout/index.module.scss","/home/circleci/project/packages/webviz-core/src/panels/Rosout/LogMessage.js","/home/circleci/project/packages/webviz-core/src/panels/Rosout/LogMessage.module.scss","/home/circleci/project/packages/webviz-core/src/components/LogList.js","/home/circleci/project/packages/webviz-core/src/panels/SourceInfo/index.js","/home/circleci/project/packages/webviz-core/src/panels/SubscribeToList.js","/home/circleci/project/packages/webviz-core/src/panels/Tab/index.js","/home/circleci/project/packages/webviz-core/src/panels/Tab/EmptyDropTarget.js","/home/circleci/project/packages/webviz-core/src/assets/emptyBox.svg","/home/circleci/project/packages/webviz-core/src/panels/Tab/TabbedToolbar.js","/home/circleci/project/packages/webviz-core/src/panels/Tab/DraggableToolbarTab.js","/home/circleci/project/packages/webviz-core/src/panels/Tab/ToolbarTab.js","webpack:///./packages/webviz-core/src/panels/Tab/Tab.module.scss?3271","/home/circleci/project/packages/webviz-core/src/panels/Tab/Tab.module.scss","/home/circleci/project/packages/webviz-core/src/panels/Tab/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/TwoDimensionalPlot/index.js","/home/circleci/project/packages/webviz-core/src/panels/TwoDimensionalPlot/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/FrameCompatibility.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/index.help.md","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/Layout.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/DebugStats.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/DrawingTools/Polygons.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/utils/drawToolUtils.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/LayoutToolbar.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/CameraInfo/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Crosshair.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/FollowTFControl.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/MainToolbar.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/MeasureMarker.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/SceneBuilder/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/SceneBuilder/MessageCollector.js","/home/circleci/project/packages/webviz-core/src/util/Bounds.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicSettingsModal.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/noMatches.svg","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/renderTreeNodes.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/renderNamespaceNodes.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TextHighlight.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TextMiddleTruncate.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicTreeSwitcher.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicTree/useSceneBuilderAndTransformsData.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TransformsBuilder.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/World.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/utils/groupingUtils.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/PoseMarkers.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/CarModel/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/CarModel/carModel.glb","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/LaserScans.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/OccupancyGrids.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/index.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/memoization.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/VertexBufferCache.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/commands/LinedConvexHulls.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/withTransforms.js","/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/LaserScanVert.js","/home/circleci/project/packages/webviz-core/src/util/installChartjs.js","/home/circleci/project/packages/webviz-core/src/util/multicolorLineChart.js"],"names":["out","m","mat3","m11","m12","m13","m22","m23","m32","m33","Math","rgb","r","g","b","props","React.createElement","getChildrenForHitmap","reglCommand","cubes","children","polygons","React","rest","triangles","poly","points","shouldConvert","pose","earcutPoints","flattenedPoints","array","Float32Array","i","x","y","z","flatten3D","indices","earcut","newPoints","originalIndex","getEarcutPoints","scale","originalMarker","getChildrenForHitmapWithOriginalMarker","command","useState","alphabet","charSet","Set","memoizedBuildAtlas","memoizeOne","tinySDF","ctx","memoizedCreateCanvas","resolution","textureWidth","rowHeight","charInfo","width","dx","textureHeight","textureData","Uint8Array","data","j","atlasTexture","height","format","wrap","mag","min","regl","drawText","depth","enable","defaultDepth","mask","blend","primitive","uniforms","atlas","atlasSize","fontSize","cutoff","scaleInvariant","scaleInvariantSize","isHitmap","viewportHeight","viewportWidth","isPerspective","cameraFovY","instances","count","attributes","position","texCoord","srcOffset","buffer","divisor","destOffset","srcWidth","alignmentOffset","billboard","foregroundColor","backgroundColor","highlightColor","enableBackground","enableHighlight","posePosition","poseOrientation","estimatedInstances","text","Error","maxAtlasWidth","destOffsets","srcWidths","srcOffsets","totalInstances","yOffsets","totalWidth","getMarkerYOffset","markerInstances","lineCount","fgColor","toColor","marker","outline","bgColor","isColorDark","hlColor","a","char","info","index","totalHeight","setMarkerYOffset","makeTextCommand","createInstancedGetChildrenForHitmap","model","context","useContext","loadedModel","useDebugValue","value","setValue","useEffect","useCallback","unloaded","fn","result","deps","useAsyncValue","async","response","fetch","status","parseGLB","useModel","BoundingBox","constructor","left","getOrthographicBounds","zDistance","aspect","distanceToGround","tmp4","DEFAULT_TEXT_COLOR","pointToVec3","orientationToVec4","w","vec3ToPoint","vec4ToOrientation","pointToVec3Array","toRGBA","val","vec4ToRGBA","color","Array","getCSSColor","toRGBAArray","colors","defaultReglBlend","func","src","dst","srcAlpha","dstAlpha","equation","alpha","defaultReglDepth","defaultBlend","withPose","newVert","vert","newUniforms","_position","_rotation","orientation","getVertexColors","constantRGBAArray","colorBuffer","usage","arr","isNaN","intToRGB","getIdFromPixel","fromSpherical","rSinPhi","UNIT_X_VECTOR","Object","TEMP_VEC3","TEMP_MAT","TEMP_QUAT","stateSelector","state","perspectiveSelector","createSelector","perspective","distanceSelector","distance","phiSelector","phi","thetaOffsetSelector","thetaOffset","targetOrientationSelector","targetOrientation","targetHeadingSelector","vec3","orientationSelector","quat","positionSelector","targetHeading","view","mat4","billboardRotation","UNIT_Z_VECTOR","DEFAULT_CAMERA_STATE","target","targetOffset","fovy","near","far","CameraStore","handler","initialCameraState","key","this","offset","zoomPercent","newDistance","startingDistance","distanceAfterZoom","projection","selectors","cameraState","getProjection","bounds","top","getView","toScreenCoord","viewport","combinedProjView","vX","vY","vWidth","vHeight","vec4","vec","project","point","diffY","DEFAULT_KEYMAP","KeyA","KeyD","KeyE","KeyF","KeyQ","KeyR","KeyS","KeyW","KeyX","KeyZ","CameraListener","mouse","clientY","clientX","e","_el","_getMouseOnScreen","_buttons","cameraStore","document","moveX","_rect","moveY","_initialMouse","magnitude","_getMagnitude","cameraRotate","cameraMove","code","moveSpeed","zoomSpeed","spinSpeed","shiftKeys","action","keyMap","_shiftKey","zoom","yaw","tilt","console","_keys","has","_getKeyMotion","pixelY","normalizeWheel","wheelAmount","dir","amount","percentage","zoomPercentage","componentDidMount","listen","window","passive","componentWillUnmount","listener","_isLeftMouseDown","_isRightMouseDown","base","_getMoveMagnitude","startDragging","_endDragging","_moveKeyboard","dt","motion","cameraZoom","_startKeyTimer","lastStamp","requestAnimationFrame","stamp","_stopKeyTimer","cancelAnimationFrame","render","tabIndex","style","draggable","ref","el","onMouseDown","onMouseUp","onBlur","onContextMenu","onKeyDown","onKeyUp","_onKeyUp","getNodeEnv","process","tempVec","tempMat","Ray","origin","distanceToPoint","planeIntersection","planeCoordinate","d","cosine","getRayFromClick","camera","projectionMatrix","viewMatrix","vp","invVp","mouseX","mouseY","rayPoint","rayOrigin","rayDir","Command","nextProps","componentDidUpdate","_updateContext","instance","handleMouseEvent","mouseHandler","objects","WorldviewReactContext","HitmapObjectIdManager","ids","start","fill","map","_","last","id","objectHitmapId","object","_objectsByObjectHitmapIdMap","instanceIndex","_instanceIndexByObjectHitmapIdMap","_commandsByObjectMap","get","queuePromise","calling","nextCalls","returnPromise","promise","Promise","res","rej","resolve","reject","signal","queuedFn","args","nextArgs","nextPromise","error","compile","cmd","WorldviewContext","onCameraStateChange","Map","undefined","canvasX","initializedData","canvasY","enableStackedObjectEvents","cachedReadHitmapCall","shallowequal","mouseEventObject","_fbo","framebuffer","currentObjectId","excludedObjects","mouseEventsWithCommands","counter","maxStackedObjectCount","pixel","_hitmapObjectIdManager","getObjectByObjectHitmapId","getCommandForObject","arguments","_drawCalls","drawCalls","drawInput","_compiled","hitmapProps","assignNextColors","initialize","canvas","_instrumentCommands","createREGL","extensions","profile","uncompiledCommand","compiledCommand","compiledCameraCommand","fbo","dimension","destroy","onMount","_commands","onUnmount","unregisterPaintCallback","paintFn","registerDrawCall","registerPaintCallback","setDimension","paint","_paint","Date","paintCall","Proxy","apply","thisArg","DEFAULT_BACKGROUND_COLOR","handleWorldviewMouseInteraction","err","WorldviewBase","_dragStartPos","deltaX","deltaY","worldviewContext","worldviewHandler","clientLeft","ray","disableHitmapForEvents","hitmapOnMouseMove","mouseEventsByCommand","aggregationMap","item","existingItems","aggregate","canvasBackgroundColor","_canvas","_renderDebug","mem","reglCommandObjects","mapValues","total","pickBy","rows","border","paddingRight","bottom","right","fontFamily","isFixedCamera","canvasHtml","maxWidth","maxHeight","onDoubleClick","onMouseMove","_onMouseMove","showDebug","overflow","Worldview","Bound","Number","update","scratch","positions","vertexArray","concat","elements","face","elementsArray","Uint16Array","buff","colorBuff","frag","arrayBuffer","DataView","magic","readUint32","version","totalLength","byteLength","chunkLength","chunkData","jsonData","findNextChunkOfType","json","JSON","TextDecoder","decode","binary","accessors","accessorInfo","WebGLRenderingContext","arrayType","componentType","numComponents","type","bufferView","images","imgInfo","self","Blob","mimeType","nonInstancedGetChildrenForHitmapFromSingleProp","useOriginalMarkerProp","eventCallbackMarker","prop","hitmapProp","hitmapColor","nonInstancedGetChildrenForHitmap","instancedGetChildrenForHitmapFromSingleProp","matchedExcludedObjects","filteredIndices","instanceCount","idColors","startColor","allColors","idx","pointCountPerInstance","createCylinderGeometry","numSegments","sideFaces","endCapFaces","theta","bottomLeftPt","topRightPt","cone","bottomRightPt","topLeftPt","cylinders","fromGeometry","Cylinders","cones","Cones","memo","passedProps","omit","end","basePosition","tipPosition","length","headWidthX","headWidthY","headLength","shaftWidthX","shaftWidthY","shaftLength","shaftPosition","headPosition","FLOAT_BYTES","POINT_BYTES","DEFAULT_MONOCHROME_COLOR","POINT_TYPES","BL","TR","BR","TL","VERTICES_PER_INSTANCE","k","lines","pointTypeBuffer","debugColorBuffer","defaultPosePositionBuffer","flatten","defaultPoseRotationBuffer","positionBuffer1","positionBuffer2","posePositionBuffer","poseRotationBuffer","thickness","joined","pointType","colorB","debug","stride","monochrome","colorC","positionA","positionB","positionC","positionD","hasInstancedPoses","poseRotation","colorArray","pointArray","allocatedPoints","positionArray","rotationArray","numInputPoints","alreadyClosed","ax","ay","az","bx","by","bz","pointsEqual","shouldClose","numTotalPoints","off","n","fillPointArray","monochromeColor","convertedMonochromeColor","convertColors","convertedColors","lastIndex","fillColorArray","effectiveNumPoints","poses","positionOffset","rotationOffset","convertedPosition","convertedRotation","fillPoseArrays","commands","inProps","renderLine","Lines","p","xAxis","yAxis","zAxis","Axes","faces","prevMeridianPt","pt","prevPt","spheres","Spheres","multiplyScale","factor","DEFAULT_COLOR","ACTIVE_POLYGON_COLOR","ACTIVE_POINT_COLOR","DRAW_SCALE","DRAW_POINT_SCALE","HITMAP_SCALE","HITMAP_POINT_SCALE","POSE","PolygonPoint","Polygon","name","polygonLinesGetChildrenForHitmap","PolygonLines","polygonPointsGetChildrenForHitmap","PolygonPoints","originalMarkers","convertedPoint","sphereList","areEqual","point1","x1","y1","z1","x2","y2","z2","point2","isClosed","polygon","activePolygon","pointX","pointY","dX","dY","uniquePoints","acc","shortestDistance","shortestIndex","px","py","dist","newPoint","isFirstClick","isCtrlClick","clickObject","isActivePolygonClosed","addPolygon","pushPoint","floatingPoint","updateActivePoint","closeActivePolygon","deletePolygon","filter","deletePoint","selectObject","isActive","defaultSingleColorDepth","defaultVetexColorDepth","single","vertex","items","singleColorItems","vertexColorItems","Triangles","NO_POSE","DEFAULT_SCALE","DEFAULT_BG_COLOR","cssHasBeenInserted","isColorEqual","TextElement","insertGlobalCss","hasBgColor","textColor","autoBackgroundColor","_prevBgColor","hexBgColor","_text","textContent","Text","textComponents","current","textContainer","componentsToRemove","coord","_textContainerRef","BG_COLOR_LIGHT","BG_COLOR_DARK","font","hashMarkerPosition","offsets","glConstantToRegl","drawModel","globalAlpha","poseMatrix","baseColorTexture","baseColorFactor","nodeMatrix","normal","singleTexCoord","whiteTexture","getDrawCalls","memoizeWeak","textures","textureInfo","sampler","bitmap","wrapS","wrapT","node","mesh","material","texInfo","normals","texCoords","drawMesh","drawNode","rootTransform","withContext","DEFAULT_GRID_COLOR","grid","bound","Grid","Overlay","coordinates","renderItem","max","pointSize","size","hooks","getGlobalHooks","panelsByCategory","perPanelHooks","areHooksImported","DiagnosticStatusPanel","require","default","DiagnosticSummary","GlobalVariables","GlobalVariableSlider","ImageViewPanel","Internals","NodePlayground","Note","NumberOfRenders","PlaybackPerformance","Plot","Publish","RawMessages","Rosout","SourceInfo","StateTransitions","SubscribeToList","Tab","TwoDimensionalPlot","ThreeDimensionalViz","ndash","ros","title","component","utilities","debugging","BlurIcon","GridIcon","HexagonIcon","HexagonMultipleIcon","PentagonOutlineIcon","RadarIcon","RobotIcon","LaserScanVert","defaultMapPalette","POINT_CLOUD_DATATYPE","POSE_STAMPED_DATATYPE","SUPPORTED_MARKER_DATATYPES","VISUALIZATION_MSGS_MARKER_DATATYPE","VISUALIZATION_MSGS_MARKER_ARRAY_DATATYPE","SENSOR_MSGS_LASER_SCAN_DATATYPE","NAV_MSGS_OCCUPANCY_GRID_DATATYPE","GEOMETRY_MSGS_POLYGON_STAMPED_DATATYPE","defaultConfig","pinnedIds","hardwareIdFilter","topicToRender","DIAGNOSTIC_TOPIC","ImageView","cameraTopic","enabledMarkerTopics","customMarkerTopicOptions","transformMarkers","synchronize","mode","imageMarkerDatatypes","canTransformMarkersByTopic","topic","includes","getVariableSpecificOutput","paths","customStateTransitionColors","checkedKeys","expandedKeys","followTf","modifiedNamespaceTopics","pinTopics","topicSettings","autoSyncCameraState","allSupportedMarkers","renderAdditionalMarkers","topics","iconsByDatatype","icons","AdditionalToolbarItems","setGlobalVariablesInSceneBuilder","globalVariables","selectionState","topicsToRender","consumeMessage","msg","consumeMethods","errors","topicsWithError","set","datatype","getMessagePose","message","addMarkerToCollector","add","setTopicError","getSyntheticArrowMarkerColor","getFlattenedPose","getOccupancyGridValues","getMapPalette","consumePose","getMarkerColor","markerColor","hasBlacklistTopics","ungroupedNodesCategory","rootTransformFrame","defaultFollowTransformFrame","skipTransformFrame","docLinkFunction","installChartJs","PanelComponent","ConnectedPanel","childId","config","originalConfig","saveConfig","tabId","mosaicActions","MosaicContext","mosaicWindowActions","MosaicWindowContext","layout","useSelector","panels","savedProps","selectedPanelIds","mosaic","isSelected","validSelectedPanelIds","useMemo","panelId","getPanelTypeFromId","TAB_PANEL_TYPE","isOnlyPanel","isParent","datatypes","capabilities","PanelAPI","useDataSourceInfo","dispatch","useDispatch","actions","bindActionCreators","savePanelConfigs","saveFullPanelConfig","changePanelLayout","addSelectedPanelId","removeSelectedPanelId","setSelectedPanelIds","quickActionsKeyPressed","setQuickActionsKeyPressed","shiftKeyPressed","setShiftKeyPressed","cmdKeyPressed","setCmdKeyPressed","fullScreen","setFullScreen","isHovered","setIsHovered","fullScreenLocked","setFullScreenLocked","showTabPanelSelectionWarning","setShowTabPanelSelectionWarning","panelsByType","getPanelsByType","panelType","panelComponentConfig","isTabPanel","saveCompleteConfig","configToSave","options","silent","keepLayoutInUrl","configs","historyOptions","updatePanelConfig","perPanelFunc","openSiblingPanel","siblingConfigCreator","siblingComponent","PanelList","getComponentForType","siblingDefaultConfig","ownPath","getPath","siblingPathEnd","getOtherBranch","siblingPath","slice","siblingId","getNodeAtPath","getRoot","siblingConfig","newPanelPath","split","then","newPanelId","onOverlayClick","metaKey","createTabPanel","tabPanelId","changePanelPayload","saveConfigsPayload","groupPanels","groupPanelsOutput","createTabs","createTabsOutput","closePanel","splitPanel","remove","newId","getPanelIdForType","activeTabLayout","tabs","activeTabIdx","pathToPanelInTab","getPathFromNode","newTabLayout","updateTree","path","spec","$set","first","second","direction","newTabConfig","updateTabPanelLayout","onMouseEnter","onMouseLeave","enterFullscreen","exitFullScreen","onReleaseQuickActionsKey","keyUpHandlers","keyDownHandlers","Shift","Meta","preventDefault","getLeaves","Escape","Provider","enabled","global","onClick","BLUE","className","styles","root","rootFullScreen","col","dataTest","clip","notClickable","data-tab-options","tabActionsOverlay","small","marginBottom","data-tab-options-no-op","prohibitedSelection","quickActionsOverlay","data-panel-overlay","disabled","data-panel-overlay-exit","displayName","MemoizedConnectedPanel","addLinkTooltip","hasNestedValue","highlight","label","linkedGlobalVariable","markerKeyPath","nestedValueStyle","marginLeft","onlyRenderAddLink","unlinkTooltip","variableValue","linkedGlobalVariables","linkedGlobalVariableLocal","getLinkedGlobalVariable","isArrayBuffer","ArrayBuffer","isView","renderUnlink","addToLinkedGlobalVariable","renderAddLink","wrapperStyle","cursor","SWrapper","SValue","SGlobalVariableLink","tooltip","setIsOpen","linkedVar","styled","span","SPath","SP","SGlobalVariableForm","form","toolbar","setGlobalVariables","overwriteGlobalVariables","setLinkedGlobalVariables","tempPos","tempScale","tempOrient","stripLeadingSlash","startsWith","Transform","create","reset","identity","matrix","valid","fromRotationTranslation","isChildOfTransform","rootId","parent","output","input","multiply","getTranslation","getScaling","determinant","inverse","getRotation","TfStore","values","storage","consume","tfMessage","child_frame_id","parentId","header","frame_id","tf","rotation","translation","transform","original","frameId","rootOfTransform","transformID","uniq","rosPath","parseRosPath","topicName","grammarObj","Grammar","fromCompiled","grammar","memoize","parser","Parser","feed","results","Interactions","maybeFullyDecodedMarker","fields","allPoints","clickedPoint","baseIdx","push","baseColorR","baseColorG","baseColorB","clickedPointColor","additionalField","getAdditionalFieldNames","additionalFieldValues","reduce","fieldName","row_step","point_step","getFieldOffsetsAndReaders","pointCount","otherFieldsValues","row","dataOffset","dataStart","reader","fieldValue","read","EMPTY_ARRAY","REQUIRED_FLOAT32_FIELDS","DATATYPE","uint8","uint16","int16","int32","float32","getReader","Float32Reader","Uint8Reader","Uint16Reader","Int16Reader","Int32Reader","log","parseHexColor","assert","parseInt","mapMarker","decodeAllFields","settings","is_bigendian","offsetsAndReaders","float32Field","xOffset","yOffset","zOffset","rgbOffset","colorMode","flatColor","DEFAULT_FLAT_COLOR","autoMinValue","autoMaxValue","minColorFieldValue","Infinity","maxColorFieldValue","minValue","maxValue","useRGB","useFlatColor","parsedFlatColor","flatColorR","flatColorG","flatColorB","colorFieldReader","colorField","warn","colorFieldValues","Float64Array","pointDataStart","x3","x4","pointStart","colorStart","colorFieldValue","colorFieldRange","parsedMinColor","minColor","parsedMaxColor","maxColor","pct","minR","minG","minB","maxR","maxG","maxB","lerp","setRainbowColor","allFields","field","difference","h","floor","f","memoizedMapMarker","isEqual","maxSize","content","module","locals","exports","test","measureText","family","defaultGetText","Autocomplete","PureComponent","super","_ignoreFocus","clearOnFocus","_autocomplete","refs","activeElement","setState","focused","event","disableAutoSelect","removeEventListener","selectionStart","selectionEnd","select","stopPropagation","addEventListener","_ignoreBlur","onChange","focus","onSelect","currentTarget","scrollTop","showAllItems","blur","createRef","menu","scrollHeight","clientHeight","setSelectionRange","autocompleteKey","autoSize","getItemValue","getItemText","placeholder","selectedItem","filterText","sortWhenFiltering","minWidth","menuStyle","inputStyle","autocompleteItems","hasError","open","selectedItemValue","isHighlighted","itemValue","data-highlighted","data-test-auto-item","autocompleteItem","highlighted","selected","_onChange","_onSelect","inputProps","inputError","autoCorrect","autoCapitalize","spellCheck","onFocus","_onFocus","_onBlur","_onMouseDown","_onKeyDown","renderMenu","menuItems","maxNumberOfItems","ceil","innerHeight","menuItemsToShow","maxBy","innerWidth","onScroll","_onScroll","renderMenuWrapper","body","createPortal","flex","linkedGlobalVariablesKeyByTopicWithPath","memoizedGetLinkedVariablesKeyByTopicWithPath","topicWithPath","getTopicWithPath","reverse","join","getLinkedGlobalVariableKeyByTopicWithPath","keyBy","memoizedGetLinkedGlobalVariablesKeyByName","onFieldChange","onSettingsChange","onColorModeChange","newValue","newSettings","hasRGB","some","defaultColorField","find","CommonPointSettings","defaultPointSize","CommonDecaySettings","SLabel","justifyContent","selectedId","newColorMode","margin","alignItems","Select","Option","marginRight","SValueRangeInput","RainbowText","SInput","attrs","defaultPointShape","pointSizeVal","pointShape","pointShapeVal","pointShapeOpts","upperFirst","data-test","toString","step","isInputValid","parseFloat","decayTime","decayTimeValue","SDescription","topicSettingsEditorForDatatype","PointCloudSettingsEditor","PoseSettingsEditor","LASER_SCAN_DATATYPE","LaserScanSettingsEditor","MarkerSettingsEditor","topicSettingsEditors","TopicSettingsEditor","Editor","container","hot","getDisplayName","hardware_id","kv","truncate","getDiagnosticId","level","from","diagnosticsByLevel","nodeArray","forEach","OK","WARN","ERROR","STALE","LEVEL_NAMES","substring","hardwareId","indexOf","timestampMethod","getPlotDataByPath","itemsByPath","ret","keys","getTooltipItemForMessageHistoryItem","getMessagePathItemsForBlock","decodeMessagePathsForMessagesByTopic","binaryBlock","messageReadersByTopic","parsedBlock","readMessage","Buffer","yAxisPaths","minYValue","maxYValue","showLegend","xAxisVal","xAxisPath","currentMinY","useRef","currentMaxY","saveCurrentYs","minY","maxY","setMinMax","historySize","allPaths","compact","memoizedPaths","useShallowMemo","subscribeTopics","getTopicsFromPaths","messagesByTopic","useMessagesByTopic","useDecodeMessagePathsForMessagesByTopic","streamedItemsByPath","blocks","useBlocksByTopic","blockItemsByPath","block","messagePathItemsForBlock","getBlockItemsByPath","startTime","datasets","tooltips","getDatasetsAndTooltips","sec","nsec","center","helpContent","floating","menuContent","useCachedGetMessagePathDataItems","providerTopics","unmemoizedFilledInPaths","filledInPaths","fillInGlobalVariablesInPath","memoizedFilledInPaths","useDeepMemo","cachesByPath","useChangeDetector","filledInPath","weakMap","WeakMap","messagePathDataItems","getMessagePathDataItems","filterMatches","currentValue","messagePath","messagePathPart","variableName","variable","structures","messagePathStructures","topicsByTopicName","queriedData","traverse","pathIndex","structureItem","pathItem","nextPathItem","structureType","nextByName","startIdx","endIdx","newPath","isTypicalFilterName","next","repr","constantName","prevPathItem","enumMap","enumValuesByDatatypeAndField","cachedGetMessagePathDataItems","obj","getExamplePrimitive","primitiveType","MessagePathInputUnconnected","nativeEvent","newCursorPosition","setImmediate","onTimestampMethodChange","autocomplete","autocompleteType","autocompleteRange","keepGoingAfterTopicName","validTypes","substr","prioritizedDatatype","noMultiSlices","disableAutocomplete","structureTraversalResult","traverseStructure","validTerminatingStructureItem","autocompleteFilterText","getTopicNames","msgPathPart","nameLoc","messagePathsForDatatype","msgPath","endsWith","initialFilterLength","replace","invalidGlobalVariablesVariable","globalVars","loc","startLoc","valueLoc","Boolean","getFirstInvalidVariableFromRosPath","noHeaderStamp","topicHasNoHeaderStamp","orderedAutocompleteItems","partition","display","timestampMethodDropdownContainer","_onTimestampMethodChange","toggleComponent","contents","placement","timestampMethodDropdown","timestampMethodDropdownError","lineHeight","timestampItemError","ZERO_TIME","freeze","strikethrough","isXSWidth","topicDisplayMode","topicDisplayModeProp","TOPIC_DISPLAY_MODES","DEFAULT_DISPLAY_MODE","STopicViewModeSelector","btnStyle","dropdownOptions","SHOW_ALL","SHOW_AVAILABLE","SHOW_SELECTED","div","EDIT_FORMAT","YAML","editFormat","setEditFormat","ValidatedInput","onSelectFormat","newFormat","useLayoutEffect","SEditBox","STransparentDropdownButton","StyledTextarea","textarea","SError","red","ValidatedInputBase","dataValidator","onError","parse","stringify","setError","inputStr","setInputStr","prevIncomingVal","inputRef","isEditing","setIsEditing","memorizedInputValidation","newInputVal","onChangeFcn","newVal","newError","trim","isArray","validationResult","validationErrorToString","handleChange","inputElem","JsonInput","YamlInput","InputComponent","toUpperCase","checkedKeysSet","hasChildren","hasFeatureColumn","availableByColumn","providerAvailable","featureKey","nodeVisibleInScene","visibleByColumn","toggleCheckAllAncestors","toggleCheckAllDescendants","toggleNodeChecked","toggleNodeExpanded","sceneErrors","setCurrentEditingTopic","derivedCustomSettings","isDefaultSettings","showTopicSettings","canEditDatatype","showTopicSettingsChanged","showTopicError","showGroupError","rowWidth","TREE_SPACING","togglesWidth","TOGGLE_WRAPPER_SIZE","rightActionWidth","DOT_MENU_WIDTH","maxNodeNameWidth","errorTooltip","SErrorList","errStr","SErrorItem","STreeNodeRow","visibleInScene","SLeft","searchText","padding","HIGHLIGHT","fade","SErrorCount","SIconWrapper","RED","tooltipProps","SRightActions","SToggles","available","columnIdx","overrideColor","overrideColorByColumn","checked","onToggle","onShiftToggle","onAltToggle","unavailableTooltip","disableBaseColumn","disableFeatureColumn","nodeKey","TEXT_MUTED","TOPIC_ROW_PADDING","ul","li","SDotMenuPlaceholder","messagePaths","builtString","typicalFilterName","sort","lastDatatypes","lastStructures","structureFor","rosDatatype","msgField","isConstant","rosPrimitives","currentItem","SyncTimeAxis","dataItems","minX","maxX","receiveTime","headerStamp","SRoot","SResetZoom","SBar","SLegend","MemoizedTooltips","Fragment","delay","chartComponent","hasUnmounted","bar","hasUserPanOrZoomed","setHasUserPannedOrZoomed","forceUpdate","onVisibilityChange","visibilityState","pauseFrame","useMessagePipeline","messagePipeline","onChartUpdate","resumeFrame","yAxes","yAxisScaleId","onScaleBoundsUpdate","scales","firstYScale","onPanZoom","onResetZoom","resetZoom","hasVerticalExclusiveZoom","setHasVerticalExclusiveZoom","hasHorizontalExclusiveZoom","setHasHorizontalExclusiveZoom","zoomMode","v","keyUphandlers","removeTooltip","ReactDOM","unmountComponentAtNode","parentNode","removeChild","updateTooltip","currentChartComponent","tooltipItem","tooltipData","_tooltip","String","createElement","appendChild","canvasRect","getBoundingClientRect","pageX","pageY","xMousePosition","tooltipElement","getElementAtXAxis","getChartjsOptions","xAxes","plugins","annotations","defaultXTicksSettings","mixins","monospaceFont","fontColor","maxRotation","defaultYTicksSettings","defaultXAxis","ticks","gridLines","zeroLineColor","maintainAspectRatio","animation","duration","responsiveAnimationDuration","legend","line","tension","hover","intersect","annotation","datasetId","drawLegend","canToggleLines","toggleLine","isSynced","linesToHide","scaleOptions","xVals","pts","chartProps","dataset","zoomOptions","ChartComponent","defaultProps","hasData","syncedMinMax","syncedMinX","syncedMaxX","capture","lineColors","toolsColorScheme","blue","medium","orange","yellow","purple","dark","cyan","green","paleGreen","lightColor","brighten","darkColor","darken","PanelToolbarLabel","PanelToolbarInput","transitionableRosTypes","SAddButton","show","SChartContainerOuter","SChartContainerInner","inputColor","setAlpha","toHexString","inputColorBright","lighten","SInputContainer","shrink","css","SInputDelete","datalabels","anchor","align","weight","multicolorLineYOffset","yAxisTicks","newPaths","onlyTopicsHeight","heightPerTopic","yLabels","_path","dataItem","borderWidth","pointBackgroundColor","pointBorderColor","pointHoverRadius","pointRadius","pointStyle","showLine","baseColors","grey","previousValue","previousTimestamp","timestamp","toSec","subtractTimes","valueForColor","round","positiveModulo","unshift","dataPoint","showDatalabel","labelColor","splice","_onInputChange","_onInputTimestampMethodChange","topicsGroups","singleTopicDatatype","defaultTopicToRender","availableTopics","topicGroup","suffix","parentTopic","renderTopics","group","LIGHT1","ORANGE","icon","SDiv","SSpan","topicDiv","fontStyle","parentTopicSpan","SIconSpan","disableAutoOpenClickedObject","PanelContext","InteractionsBaseComponent","SRow","SEmptyState","selectedObject","interactionData","isDrawing","onClearSelectedObject","defaultSelectedTab","selectedTab","setSelectedTab","selectedObjectChanged","isPointCloud","maybeFullyDecodedObject","decodeAdditionalFields","buttons","onSelectTab","newSelectedTab","ToolGroup","ToolGroupFixedSizePane","getDiff","before","after","idLabel","showFullMessageForDiff","idToCompareWith","allItems","candidateIdsToCompareWith","every","idKey","beforeItem","afterItem","candidateIdBefore","candidateIdAfter","unmatchedAfterById","diff","innerDiff","isEmpty","isDeleted","diffLabels","DELETED","labelText","ID","allKeys","afterIsNotObj","ADDED","idLabelObj","beforeIsNotObj","CHANGED","DARK6","indicator","jsonTreeTheme","base0B","diffLabelsByLabelText","FLOAT_SIZE","hasValidStride","reinterpretBufferToFloat","extractValues","readers","expandBufferToFloat","BYTES_PER_ELEMENT","NaN","hitmapColors","positionBuffer","createPositionBuffer","createColorBuffer","minColorValue","POSITIVE_INFINITY","maxColorValue","NEGATIVE_INFINITY","hasMinValue","hasMaxValue","getVertexCount","pos","getVertexValue","SToolGroupFixedSizePane","PANE_WIDTH","selectedTabLocal","Children","child","selectedChild","expanded","tabBar","tab","spaceSeparator","tabBody","imageTopic","allCameraNamespaces","cameraNamespace","getCameraNamespace","availableMarkerTopics","enabledTopic","pop","imageTopicsByNamespace","vals","outsideWidth","outsideHeight","insideWidth","insideHeight","rightX","bottomY","rawMarkerData","markers","cameraInfo","cameraModel","originalHeight","originalWidth","CameraModel","splitTopic","topicPart","TabDndContext","createContext","preventTabDrop","currentCameraState","followOrientation","transforms","newCameraState","targetPose","getTargetPose","lastTargetPoseRef","lastTargetPose","params","URLSearchParams","location","search","getZoomDistanceFromURLParam","mergeWith","objVal","srcVal","objectTopic","newGlobalVariables","objectForPath","prevCameraState","prevTargetPose","prevFollowTf","prevFollowOrientation","newFollowTf","newFollowOrientation","heading","cameraStateSelectors","rotateZ","assign","getEquivalentOffsetsWithoutTarget","emptyPose","pz","ox","oy","oz","ow","PoseClass","PointClass","empty","OrientationClass","availableNamespacesByTopic","defaultTopicSettings","sceneErrorsByTopicKey","topicTreeConfig","topicTreeTopics","flattenNode","namespace","SECOND_SOURCE_PREFIX","rootTreeNode","allTopicNames","nonPrefixedTopicNames","availableTopicsNamesSet","uncategorizedTopicNames","datatypesByTopic","newChildren","generateTreeNode","parentKey","nodesByKey","flattenNodes","selections","isSelectedMemo","baseKey","isFeatureColumn","selectedTopicNamesSet","getBaseKey","selectedNamespacesByTopic","selectedTopicNames","getIsTreeNodeVisibleInScene","columnIndex","prefixedTopicName","prefixedNamespaceKey","generateNodeKey","memoizedSelectedTopicNames","derivedCustomSettingsByKey","entries","isFeatureTopic","rgba","parseColorSetting","tinyColor","fromRatio","toRgbString","checkedNamespacesByTopicName","checkedNamespaces","getIsNamespaceCheckedByDefault","toggleNamespaceChecked","newCheckedKeys","allNsKeys","ns","otherNamespaceKeys","xor","keyWithPrefix","isNowChecked","nodeAndChildren","nodeAndChildrenKeys","topicNames","namespaceChildrenKeys","newModififiedNamespaceTopics","nodeKeysToToggle","namespaceParentTopicName","prevChecked","nodeAndAncestorKeys","keyToToggle","filterTextRef","sceneErrorsByKey","collectGroupErrors","groupKey","topicKey","errorsWithTopicName","topicNode","debouncedFilterText","useDebounce","getIsTreeNodeVisibleInTree","showVisible","showAvailable","hasCalculatedVisibility","isVisibleByKey","toLowerCase","calculateIsVisible","isAncestorVisible","unavailable","invisibleInScene","isAncestorOrCurrentVisible","getIfTextMatches","isChildVisible","namespaces","thisNamespacesMatches","isVisible","shouldExpandAllKeys","description","childrenNodes","subNode","objectPath","onTopicGroupsChange","sceneCollectorMsgForTopicSetting","topicGroups","dataTestDefaultTabKey","topicItem","derivedFields","prefixByColumn","STopicSettingsEditor","STitle","SDatatype","Tabs","defaultActiveKey","prefix","TabPane","STabWrapper","MainEditor","TOOLBAR","TEXT","h3","settingsByColumn","newSettingsToSave","marginTop","defaultSettings","getSettingsByColumnWithDefaults","topicGroupDisplayName","DEFAULT_IMPORTED_GROUP_NAME","visibilityByColumn","migratedCheckedKeys","migrateLegacyIds","selectedExtensions","selectedTopics","selectedNamesSet","getSelectionsFromCheckedKeys","parentNamesByTopic","getParentNamesByTopic","TOPIC_CONFIG","removeTopicPrefixes","selectedNamespacesByColumn","dataSourcePrefix","ALL_DATA_SOURCE_PREFIXES","dataSourcePrefixToColumnIndex","parentName","selectedMetadataNamespaces","selectedTfNamespaces","extension","sortBy","getGroupVisibilityByColumn","getTopicVisibilityByColumn","visibilityBySource","namespacesBySource","baseNamespaces","BASE_DATA_SOURCE_PREFIXES","featureNamespaces","FEATURE_DATA_SOURCE_PREFIXES","getTopicSelectedNamespacesByColumn","selectedNamespacesBySource","settingsBySource","baseSettings","featureSettings","getTopicSettingsByColumn","topicConfig","generateParentNamesByTopic","parentNames","childrenItems","subItem","getLegacyIdItems","generateLegacyIdItems","legacyIds","legacyId","legacyIdItems","newCheckedNameOrTopicByOldNames","defaultTopicSettingsByColumn","startupPerPanelHooks","getDefaultTopicSettingsByColumn","newSettingsByColumn","isRequired","isNumber","isBoolean","isNumberArray","expectArrLen","isOrientation","isNumberArrayErr","quaternionSum","abs","minLength","maxLength","len","RegExp","createValidator","rules","rule","validator","isXYPointArray","isPolygons","MeasuringTool","Component","newMeasureState","measureState","onMeasureInfoChange","measurePoints","clickInfo","mouseDownCoords","mouseUpCoords","arrayToPoint","measureActive","_canvasMouseMoveHandler","_canvasMouseUpHandler","_canvasMouseDownHandler","dist_string","hypot","toFixed","YELLOW","getHighlightedIndices","highlightedIndicesSet","match","startingIndex","lowerCaseSearchText","lowerCaseText","range","searchTextOpen","selectedMatchIndex","setSearchTextMatches","searchTextMatches","glText","numMatches","highlightedIndices","throttledSetSearchTextMatches","throttle","trailing","matches","toggleSearchTextOpen","setSearchText","setSelectedMatchIndex","searchInputRef","useSearchMatches","currentMatch","rootTf","hasCurrentMatchChanged","useDeepChangeDetector","subtract","onFollowChange","iterateCurrentIndex","iterator","newIndex","flexDirection","borderRadius","autoFocus","shiftKey","MAX_DATA_SOURCE_TOGGLES_WIDTH","TopicTreeContainer","MAX_CONTAINER_WIDTH_RATIO","SWITCHER_WIDTH","ROW_HEIGHT","DARK4","STopicTree","TEXTL1","STopicTreeHeader","DARK5","SFilter","SSwitcherIcon","ROW_CONTENT_HEIGHT","SNoMatches","SNoMatchesText","containerHeight","containerWidth","setFilterText","setShowTopicTree","showTopicTree","renderTopicTree","scrollContainerRef","treeHeight","CONTAINER_SPACING","SWITCHER_HEIGHT","maxAvailableContainerWidth","treeWidth","filterTextFieldRef","expandedKeysRef","hasRootNodeChanged","topLevelNodesCollapsed","showNoMatchesState","headerRightIconStyle","showErrorBadge","Tree","treeData","itemHeight","selectable","onExpand","newExpandedKeys","autoExpandParent","switcherIcon","altKey","clickable","SToggle","getStyles","DISABLED_COLOR","TOGGLE_SIZE_CONFIG","NORMAL","SMALL","sizeInNumber","enabledColor","disabledColor","background","diagnostics","useDiagnostics","addMessage","statusArray","computeDiagnosticInfo","oldInfo","diagnosticsById","delete","newEntry","sortKey","sortedIndexBy","sortedAutocompleteEntries","defaultDiagnosticsBuffer","LEVELS","useMessageReducer","restore","devicePixelRatio","webWorkerManager","WebWorkerManager","ChartJSWorker","uuid","v4","_chartRpc","forceDisableWorkerRendering","registerWorkerListener","_id","_usingWebWorker","mainThreadRpc","workerRpc","getFakeRpcs","MainThreadChartJSWorker","element","boundingRect","newEvent","native","_getRpc","send","scaleBoundsUpdate","_onUpdateScaleBounds","percentZoomX","percentZoomY","focalPoint","wheelZoomHandler","whichAxesParam","_onPanZoom","_panning","rect","persist","transferControlToOffscreen","_setupPanAndPinchHandlers","_node","chartUpdateId","onEndChartUpdate","_onEndChartUpdateCallbacks","finally","callback","unregisterWorkerListener","threshold","panOptions","hammerManager","Hammer","Manager","Pinch","Pan","hammerPanHandler","_currentDeltaX","_currentDeltaY","on","setTimeout","handlePinch","_currentPinchScaling","pointers","xy","_ref","onWheel","_onWheel","_onClick","sensitivity","speed","chartId","chartInstance","ca","chartArea","storeOriginalOptions","whichAxes","scaleKey","isHorizontal","directionEnabled","zoomScale","zoomCumulativeDeltaByChartId","panMode","panScale","panCumulativeDeltaByChartId","originalOptions","originalOptionsByChartId","timeOptions","time","tickOptions","offsetX","offsetY","speedPercent","cancelable","zoomNumericalScale","newDiff","centerPoint","minPercent","getValueForPixel","minDelta","maxDelta","zoomFunctions","category","labels","chart","minIndex","lastLabelIndex","maxIndex","chartCenter","centerPointer","linear","logarithmic","panNumericalScale","delta","tickOpts","prevStart","prevEnd","newMin","getPixelForValue","newMax","valueOf","panFunctions","offsetAmt","panSpeed","classType","maxWorkerCount","_classType","_maxWorkerCount","_workerStates","_allListeners","testing_getWorkerState","workerState","listenerIds","worker","rpc","Rpc","setupReceiveReportErrorHandler","emptyIndex","workerStateIndex","terminate","light","predicate","newArray","showList","links","listStyle","listHtml","SList","linkedGlobalVariableName","SListItem","danger","flexShrink","newLinkedGlobalVariables","STopicWithPath","SExistingLinks","GlobalVariableName","SForm","isOpen","SUnlinkWrapper","leftPadding","isSingleElemArray","dataWithoutWrappingArray","topicPath","diffMethod","diffTopicPath","diffEnabled","topicRosPath","rootStructureItem","expandAll","setExpandAll","expandedFields","setExpandedFields","consecutiveMsgs","prevTickMsg","prevTickObj","currTickObj","useLatestMessageDataItem","diffTopicObj","inTimetickDiffMode","baseItem","diffItem","onTopicPathChange","newTopicPath","onDiffTopicPathChange","newDiffTopicPath","onToggleDiff","onToggleExpandAll","onLabelClick","keypath","expandedFieldsCopy","valueRenderer","keyPath","iconWrapper","isHovering","lastKeyPath","valueAction","getValueActionForValue","childStructureItem","getStructureItemForPath","enumMapping","basePath","itemLabel","smallNumberArrayStr","DATA_ARRAY_PREVIEW_LIMIT","HighlightedValue","iconBox","renderSingleTopicOrDiffOutput","shouldExpandNode","hideWrappingArray","link","getMessageDocumentationLink","shouldDisplaySingleVal","singleVal","diffData","diffLabelTexts","CheckboxComponent","CheckboxMarkedIcon","CheckboxBlankOutlineIcon","scroll","diffMessage","verticalAlign","labelRenderer","raw","SDiffSpan","hideRoot","invertTheme","getItemString","getItemStringForDiff","postprocessValue","theme","tree","nestedNode","nodeType","baseStyle","textDecoration","nestedObj","nestedObjKey","nestedNodeLabel","nestedNodeChildren","active","topicInputs","newDiffMethod","noPortal","prevMessageAndData","messageAndData","setUint8","getFloat32","getInt32","getUint16","getInt16","labelStyle","labelDirection","styledLabel","SCheckbox","GRAY","SColorPicker","LIGHT2","forwardRef","pickr","useImperativeHandle","getPickrForTesting","onChangeRef","colorRef","Pickr","useAsButton","comparison","lockOpacity","components","preview","hue","interaction","setColor","newColor","toHEXA","destroyAndRemove","DISTORTION_STATE","binning_x","binning_y","roi","distortion_model","D","K","P","R","_distortionState","adjustBinning","adjustRoi","x_offset","y_offset","unrectifyPoint","rectX","rectY","fx","fy","cx","cy","X","Y","W","xp","yp","r2","r4","r6","a1","k1","k2","p1","p2","barrel_correction","ypp","declarations","fileName","lib_filename","filePath","sourceCode","lib_es6_dts","DEPRECATED__ros_lib_filename","DEPRECATED__ros_lib_dts","defaultLibFileName","rosLib","ros_lib_filename","ros_lib_dts","utilityFiles","userUtilities","utility","DEFAULT_WEBVIZ_NODE_PREFIX","BaseRenderer","cleared","frame","setSubscriptions","currentTime","playerState","activeData","isPlaying","useComputedCameraState","onSetSubscriptions","subscriptions","TRANSFORM_TOPIC","TRANSFORM_STATIC_TOPIC","callbackInputsRef","configCameraState","configFollowOrientation","configFollowTf","getNewCameraStateOnFollowChange","onAlignXYAxis","newCameraStateObj","oldConfig","Renderer","FrameCompatibilityDEPRECATED","ICON_PADDING","ICON_TOTAL_SIZE","GROUP","NEW_GROUP","TOPIC","NEW_TOPIC","NAMESPACE","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Backspace","t","groupsConfig","displayNameByTopic","errorsByTopic","namespacesByTopic","filteredKeysSet","availableTopicNamesSet","datatypeKeyByTopicName","groupVisibilityByColumn","DEFAULT_VISIBILITY_BY_COLUMN","isGroupExpanded","isAnyTopicFiltered","topicItems","topicItemConfig","idx1","getPrefixByColumn","topicHasFeatureColumn","BASE_COLUMN_ONLY_TOPICS","topicDisplayVisibilityByColumn","availableNamespacesByColumn","namespaceDisplayVisibilityByNamespace","columnVisible","errorSource","badgeText","getBadgeTextByTopicName","isParentVisible","visible","isNamespaceParentVisible","displayNameWithFallback","sortedNamespaceDisplayVisibilityByColumn","nsName","keyboardFocusIndex","displayVisibilityByColumn","isTopicShownInList","isShownInList","isGroupShownInList","addTopicKeyboardFocusIndex","prefixesByColumn","focusData","newTopicGroups","newGroup","groupFocusIndex","focusType","KEYBOARD_FOCUS_TYPES","shouldAssignFocusIndexesToTopics","newItem","topicExpanded","topicIsShownInList","nsItem","nsItemIdx","focusIndex","isKeyboardFocused","allNamespaces","transformIds","displayNameByTopicOrExtension","buildItemDisplayNameByTopicOrExtension","topicGroupsConfig","selectedTopicSettingsByTopic","topicVisibilityByColumn","isTopicVisible","settingsColIdx","topicsMissingFrameIds","rootTransformID","topicsMissingTransforms","transformTopicTree","oldTree","newTree","oldChildren","inputText","topicTreeTopLevelGroups","getTopLevelGroupsFromTopicTree","getDefaultTopicTree","categorizedTopicNames","selectedTopicNamesInGroup","getDefaultNewGroupItemConfig","DEFAULT_GROUP_PREFIXES_BY_COLUMN","DEFAULT_METADATA_NAMESPACES","getDefaultTopicItemConfig","defaultMetadataNamespaces","topicNameWithoutPrefix","nonPrefixedNames","getFlattenedTreeNodes","enableShortDisplayNames","flattenItem","subItemName","flattenedTopicNodes","topicTree","groupTopics","DrawingTools","onSetDrawingTabType","onSetPolygons","polygonBuilder","selectedPolygonEditFormat","accent","str","yaml","safeLoad","safeDump","noCompatMode","targetStr","topicNameToShow","xsWidthElem","SName","STopicNameDisplay","SDisplayName","endTextLength","DEFAULT_END_TEXT_LENGTH","ev","prevIsOpen","Item","DISABLED_STYLE","SItemContent","clipboard","copy","descriptionMaxWidth","SKeyboardShortcut","SKeyWrapper","SKey","DARK9","rounded","textSize","kbd","COLORS","BLACK","PINK","LIME","CYAN","WHITE","AQUA","MAGENTA","DARKGRAY","PURPLE","setRgba","rgba255","toRgb","tinycolor","toTypedArray","Int8Array","byteOffset","TextureCacheEntry","texture","mipmap","getTexture","store","entry","selectedHardwareId","selectedName","newTopicToRender","splitFraction","selectedDisplayName","hasSelection","scrollX","additionalIcons","renderTopicToRenderMenu","onChangeSplitFraction","newSplitFraction","ResizeHandle","divider","KeyValueTable","table","allowedTags","sanitize","__html","allowedAttributes","td","th","HAS_ANY_HTML","getFormattedKeyValues","keyHtml","valueHtml","DiagnosticStatus","collapsedSections","_resizeMouseMove","_resizeMouseUp","_tableRef","clamp","inCollapsedSection","ellipsisShown","keyIsSection","valIsSection","section","onClickSection","colSpan","collapsedSection","valuePath","openPlotPanelIconElem","stateTransitionsIcon","openSiblingStateTransitionsPanel","plotIcon","openSiblingPlotPanel","_renderKeyValueCell","keyCell","valueCell","cls","html","dangerouslySetInnerHTML","statusClass","data-test-resizehandle","_resizeMouseDown","borderRight","borderLeft","_renderKeyValueSections","Lexer","ParserRules","modifier","ParserStart","bool","int8","uint32","int64","uint64","float64","string","TimeBasedChartTooltip","formatTimeRaw","formatTime","defaultShown","reducer","dataById","componentsById","reducedData","hasRenderedIds","leading","_recompute","shouldComponentUpdate","newReducedData","_throttledForceUpdate","inWorkerEnvironment","postMessage","onmessage","_managersById","_rpc","setupWorker","receive","manager","ChartJSManager","getScaleBounds","doZoom","resetZoomDelta","doPan","resetPanDelta","getDatalabelAtEvent","hideAllTicksScaleCallback","hideFirstAndLastTicksScaleCallback","displayTicksInSecondsCallback","mapChartElementToEventElement","_datasetIndex","_index","_view","datasetKeyProvider","Chart","_addFunctionsToConfig","_chartInstance","helpers","configMerge","currentDatasets","_getCurrentDatasets","nextDatasets","_checkDatasets","currentDatasetsIndexed","pid","otherDatasetProps","otherDataProps","pointElements","getElementsAtEventForMode","xAxisElements","nearestXAxisElement","item2","chartDatalabel","$datalabels","getLabelAtEvent","$context","dataIndex","formatter","staticColor","fixedYAxisWidth","afterFit","scaleInstance","displayXAxesTicksInSeconds","Worker","FakeRpc","proxiedWorker","transfer","handlers","checkboxStyle","TimeBasedChartLegend","borderDash","pointSvg","PLOT_DOT_DASHED_STYLE","stroke","strokeWidth","strokeDasharray","PLOT_DASHED_STYLE","fontWeight","whiteSpace","_toggleLine","datasetsAndTooltips","isReferenceLinePlotPathType","datasetKey","outerIdx","elapsedTime","innerIdx","queriedPath","valueNum","getXForPoint","isTime","timeValue","derivativePoints","derivativeTooltips","borderColor","getDatasetAndTooltipsFromMessagePlotPath","getAnnotations","drawTime","scaleID","getAnnotationFromReferenceLine","scaleId","precision","newTooltips","secondsDifference","previousTooltip","lastPath","onInputChange","onInputTimestampMethodChange","toggleToHideLegend","toggleToShowLegend","legendToggle","itemIconContainer","zIndex","newXAxisVal","itemInput","itemInputDisabled","plotableRosTypes","isReferenceLinePlotPath","itemIcon","itemRemove","addLine","getText","needle","option","haystack","charPos","score","isValidInput","csv","getCSVData","blob","downloadFiles","downloadCsvFile","combinedLines","formatData","LevelClasses","ok","stale","NodeRow","onClickPin","isPinned","nodeRow","data-test-diagnostic-row","pinIcon","pinned","getSortedNodes","nodes","showDetails","togglePinned","renderHardwareFilter","opacity","panel","pinnedNodes","getNodesByLevel","AutoSizer","List","rowRenderer","rowProps","renderRow","rowCount","overscanRowCount","SDeleteIcon","SGlobalVariables","parseJson","keyValMap","JSONInput","internalValue","setInternalValue","lastPropsValue","parsedValue","isValid","newParsedValue","ValidatedResizingInput","invalidInputs","changeGlobalKey","newKey","oldKey","pick","btnMessage","setBtnMessage","globalVariableNames","linkedGlobalVariablesKeyByName","linked","unlinked","url","queryParams","GLOBAL_VARIABLES_QUERY_KEY","host","UnlinkGlobalVariables","without","readOnly","queryCommandSupported","SGlobalVariableName","_setIsOpen","setName","getInitialName","addLink","highlightIconStyle","onSubmit","primary","usePanelContext","openRawMessages","STopicLink","splitItemLabel","diffArrow","beforeText","afterText","rootValue","singleSlicePath","multiSlicePath","pivotPath","keyPathJoined","part","onClickCopy","dataToCopy","dataWithoutLargeArrays","cloneDeepWith","SMetadata","rel","href","CopyMessageButton","openPlotPanel","pathSuffix","openStateTransitionsPanel","onPivot","itemType","itemString","formatDuration","sqrt","getArrow","filterKeys","parts","pkg","filename","ROS_COMMON_MSGS","atan2","counts","getChangeCounts","startingCounts","possibleLabelTexts","float","GREEN","STable","wordBreak","showInstance","setShowInstance","instanceObject","getInstanceObj","dropdownText","full","ObjectDetails","objectToDisplay","SObjectDetails","metadataByIndex","originalObject","gpuPointCloudsEnabled","useExperimentalFeature","getClickedInfo","additionalFieldNames","hasAdditionalFieldNames","onCopy","getAllPoints","dataRows","rowData","dataStr","colorStyle","charAt","pointIndex","getVertexValues","temp","overrideCommand","LINED_CONVEX_HULL_RENDERING_SETTING","alphaField","currentShaftWidth","shaftWidth","currentHeadWidth","headWidth","currentHeadLength","colorInputFields","useCarModel","renderRightIcon","rightIcon","SEmpty","textMuted","close","renderOpen","mappedChildren","cloneElement","box","minColorRefForTesting","maxColorRefForTesting","drawGradient","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","SPickerWrapper","SBarWrapper","SLine","draw","GRADIENT_BAR_INSET","COLOR_PICKER_SIZE","GRADIENT_BAR_HEIGHT","selectedObjects","clickedPosition","onSelectObject","SInteractionContextMenu","SMenu","menuText","SId","SMenuItem","STopic","STooltip","PURPLE1","YELLOW1","minMaxValidatorFn","stepValidatorFn","SliderSettingsMenu","updateConfig","sliderProps","globalVariableName","updateSliderProps","partial","onChangeVariableName","newGlobalVariableName","onChangeMin","onChangeMax","onChangeStep","validateOnBlur","GlobalVariableSliderPanel","globalVariableValue","saveSliderProps","updatedConfig","additionalOutput","SliderWithTicks","SSliderContainer","drawTicks","TICK_FONT","getNonOverlappingLabels","measuredLabels","stepLabels","sumBy","tickWidth","futureTime","sliderConfig","steps","clearRect","fillText","STextField","STextFieldLabel","TextField","defaultValue","focusOnMount","hideInlineError","validate","handleBlur","errorStyle","TopicTimestampSpan","TopicTimestamp","styleObj","BottomBar","containsOpen","imageCanvasStyles","inScreenshotTests","ToggleComponent","dropDownStyles","imageTopicsByNamespaceSelector","imageTopics","AddTopic","onSelectTopic","s","panelHooks","defaultAvailableMarkerTopics","getMarkerOptions","availableAndEnabledMarkerTopics","onToggleMarkerName","markerTopic","onChangeCameraTopic","newCameraTopic","newAvailableMarkerTopics","newEnabledMarkerTopics","getRelatedMarkerTopics","onChangeScale","newScale","onToggleSynchronize","SubMenu","cameraInfoTopic","getCameraInfoTopic","shouldSynchronize","imageAndMarkerTopics","imageScale","synchronizedMessages","memoizedTopics","reducers","getSynchronizingReducers","request","newMessage","useOptionallySynchronizedMessages","imageMessage","markersToRender","renderedMarkerTimestamps","stamps","onStartRenderImage","renderToolbar","controls","renderImageTopicDropdown","missingRequiredCameraInfo","closeOnChange","dropdownItem","topicOption","renderMarkerDropdown","markerTopics","renderEmptyState","image","ContainsOpen","canTransformMarkers","topicTimestamp","textBright","SErrorMessage","ImageCanvasWorker","ImageCanvas","openZoomChart","canvasRenderer","_canvasRenderer","loadZoomFromConfig","_getRpcWorker","transferableCanvas","_canvasRef","panZoomCanvas","getTransform","updatedPercentage","checkOutOfBounds","bitmapDimensions","moveTo","_divRef","maxZoom","minZoom","smoothScroll","filterKey","dy","dz","fitPercent","goToTargetPercentage","keepInBounds","imageViewportWidth","offsetWidth","imageViewportHeight","offsetHeight","getImageViewport","createPanZoom","applyPanZoom","renderCurrentImage","toBlob","ContextMenu","downloadImage","zoomAbs","moveToCenter","fillPercent","targetPercentage","onFinishImageRender","dimensions","renderImage","zoomChart","data-zoom-menu","menuItem","notInteractive","borderBottom","onZoomMinus","data-panel-minus-zoom","onZoomPlus","data-panel-add-zoom","onZoomFit","onZoomFill","useMainThreadRenderingForTesting","_onVisibilityChange","prevProps","innerA","innerB","innerKey","handleWidth","handleHeight","onResize","onCanvasRightClick","_setCanvasRef","onOutsideClick","renderZoomChart","magnify","clickMagnify","data-magnify-icon","clearCanvas","markerData","buildMarkerData","hasLoggedCameraModelError","rawData","encoding","ImageData","decodeYUV","decodeRGB8","decodeBGR8","decodeFloat1c","decodeBayerRGGB8","decodeBayerBGGR8","decodeBayerGBRG8","decodeBayerGRBG8","decodeMono8","decodeMono16","createImageBitmap","decodeMessageToBitmap","getContext","resizeCanvas","drawImage","save","messages","paintMarker","paintMarkers","paintBitmap","maybeUnrectifyPoint","beginPath","arc","PI","outline_color","lineWidth","strokeStyle","lineTo","maybeUnrectifiedPoint","closePath","outline_colors","fill_color","textBaseline","filled","metrics","makeSpecializedDecodeBayer","tl","tr","bl","br","Function","yuv","c","u","inIdx","outIdx","bgr","gray","mono8","ch","mono16","hide","Tooltip","getHeaderStamp","TimeUtil","compare","allItemStampsNewestFirst","synchronizedItemsByPath","itemsMatchingStamp","getSynchronizedState","found","thisStamp","areSame","getSynchronizedMessages","matchingMessage","newMessagesByTopic","newSynchronizedMessages","allMessageStampsNewestFirst","syncedMsgs","msgsByTopic","isLessThan","Container","getSubscriptionGroup","requester","getPublisherGroup","advertiser","pipelineSubscriptions","publishers","pipelinePublishers","groupedSubscriptions","subscriptionGroups","grouped","groupBy","renderedSubscriptions","topicsByName","sub","originalTopic","renderedPublishers","groupedPublishers","recordGroup","setRecordGroup","recordingTopics","setRecordingTopics","recordedData","historyRecorder","isPrimary","recordSubs","downloadTextFile","lazy","skeletonBody","UnsavedDot","isSaved","NodePlaygroundSettings","vimMode","SecurityBarWrapper","REDL1","TrustButton","button","SecurityBar","SWelcomeScreen","WelcomeScreen","addNewNode","updateExplorer","selectedNodeId","editorForStorybook","explorer","userNodes","userNodeDiagnostics","needsUserTrust","trusted","setUserNodes","payload","selectedNodeDiagnostics","selectedNode","scriptBackStack","setScriptBackStack","currentScript","isCurrentScriptSelectedNode","isNodeSaved","selectedNodeLogs","logs","inputTitle","DARK2","testItems","additionalBackStackItems","newNodeId","trustUserNode","trustSelectedNode","saveNode","script","setScriptOverride","maxDepth","goBack","setScriptCode","backStack","selectNode","nodeId","deleteNode","flexGrow","DARK1","large","newNodeName","data-nativeundoredo","Suspense","fallback","resizeKey","SHeaderItem","HeaderItem","numItems","paddingBottom","bottomBarDisplay","setBottomBarDisplay","autoScroll","setAutoScroll","clearLogs","clearUserNodeLogs","scrollContainer","scrolledUp","overflowY","severityColors","Hint","YELLOWL1","Info","BLUEL1","Warning","ORANGEL1","severityIcons","severity","source","startColumn","startLineNumber","severityLabel","invert","DiagnosticSeverity","errorLoc","valueColorMap","number","base09","boolean","base08","renderTreeObj","LIGHT","_extends","prototype","hasOwnProperty","call","_objectWithoutProperties","viewBox","xmlns","strokeLinecap","strokeLinejoin","MenuWrapper","ExplorerWrapper","GRAY2","ListItem","TemplateItem","SFlex","NodesList","collapse","SidebarTitle","RedDot","getNodeProjectConfig","textTransform","otherMarkdownDocsForTest","nodesSelected","docsSelected","utilsSelected","templatesSelected","gotoUtils","monacoApi","monacoFilePath","Uri","requestedModel","editor","getModel","uri","getValue","selection","explorers","docs","linkTarget","nodePlaygroundDocs","userUtilsReadMe","utils","bind","templates","template","lib_es2015_symbol_dts","pointClouds","types","vectors","twoDimensionalPlot","STextArea","onChangeText","noteText","panelRenderCount","messageHistoryRenderCount","useMessageReducerRenderCount","messagePipelineRenderCount","HooksComponent","MessagePipelineRendersComponent","textAlign","getNumberOfRendersCountsForTests","PlaybackPerformanceItem","Sparkline","maximum","timeRange","decimalPlaces","now","playbackInfo","lastPlaybackInfo","perfPoints","framerate","bagTimeMs","lastSeekTime","renderTimeMs","shift","nowStamp","STextAreaContainer","SErrorText","getTopicName","cachedProps","datatypeNames","parsedObject","_publisher","publish","newState","parsedAny","parseInput","changed","sampleMessage","stringifiedSampleMessage","_renderMenuContent","advancedView","buttonText","buttonTooltip","buttonColor","canPublish","PlayerCapabilities","advertise","buttonRowStyle","_onChangeTopic","_onSelectTopic","_onSelectDatatype","_publish","buildSampleMessage","builtin","builtinSampleValues","sample","arrayLength","Publisher","_getContext","_context","_setPublishers","setPublishers","MessagePipelineConsumer","Creatable","LOG_LEVEL_OPTIONS","KNOWN_LOG_LEVELS","stringsToOptions","strs","getShouldDisplayMsg","minLogLevel","searchTerms","searchTermsInLowerCase","term","searchTerm","RosoutPanel","selectedOptions","seenNodeNames","msgs","nodeNameOptions","filtersBar","severityFilter","clearable","searchable","optionHeight","optionRenderer","styleProp","selectValue","focusedOption","logStyle","VirtualizedSelectFocusedOption","_onLogLevelChange","valueComponent","nodeFilter","multi","closeOnSelect","_onNodeFilterChange","selectComponent","promptTextCreator","itemsCountField","_getFilteredMessages","_filterFn","_renderRow","paddingTop","topicToRenderMenu","ROSOUT_TOPIC","_renderFiltersBar","PadStart","padStart","Stamp","altStr","file","strLevel","levelClassName","toLocaleLowerCase","listId","cache","CellMeasurerCache","fixedWidth","lastWidth","lastItems","lastRenderTime","clearAll","containerEl","getElementById","newAutoScroll","onResetView","deferredMeasurementCache","CellMeasurer","rowIndex","containerProps","scrollToIndex","STableContainer","SCell","SHeader","endTime","pausePlayback","seekPlayback","messagesSeen","seenBefore","SPanelCover","mosaicId","savePanelConfigsFn","activeTab","activeLayout","draggingTabState","setDraggingTabState","isOver","selectTab","setTabTitle","newTabs","removeTab","lastIdx","addTab","newTab","onChangeLayout","draggingTab","TabbedToolbar","UnconnectedPanelLayout","importHooks","setMosaicId","removeRootDropTarget","EmptyDropTarget","DEFAULT_TAB_PANEL_CONFIG","SDropTarget","cssColors","textDisabled","SEmptyStateText","SPickAPanelText","showPanelList","setShowPanelList","toggleShowPanelList","drop","useDrop","accept","MosaicDragType","WINDOW","monitor","getItem","collect","onPanelSelect","relatedConfigs","selectPanelOutput","ga","rx","ry","dropRef","TAB_DRAG_TYPE","canDrop","sourceItem","didDrop","getSaveConfigsPayloadForMoveTab","STabbedToolbar","showHiddenControlsOnHover","STabs","DraggableToolbarTab","tabCount","tabTitle","transition","isDragging","dragRef","useDrag","tabProps","innerRef","hidden","ToolbarTab","setTitle","editingTitle","setEditingTitle","onChangeTitleInput","onClickTab","inputEl","endTitleEditing","confirmNewTitle","resetTitle","STab","readonly","editable","clearBgStyle","boxShadow","colorsModule","panelBackground","pointerEvents","SContainer","VALID_TYPES","keysToPick","isValidMinMaxVal","minXVal","maxXVal","minYVal","maxYVal","getBufferedMinMax","allVals","minVal","maxVal","yAxisLabel","xAxisLabel","lineTension","order","allXs","allYs","scaleLabel","labelString","pan","isTargetingCanvas","tooltipDatapoint","tooltipLabel","dataPoints","datapoint","_datapoint","currentTooltip","tooltipStyles","emptyMessage","ChildComponent","baseTopics","FrameCompatibilityComponent","forwardedRef","childProps","setTopics","componentSetSubscriptions","newTopics","lastClearTime","latestFrame","autoTextBackgroundColor","flattenMarkers","showCrosshair","containerRef","setDebug","setPolygonBuilder","PolygonBuilder","measureInfo","setMeasureInfo","currentEditingTopic","searchTextProps","useSearchText","useReducer","measuringElRef","drawingTabType","setDrawingTabType","selectedObjectState","setSelectedObjectState","getUpdatedGlobalVariablesBySelectedObject","sceneBuilder","transformsBuilder","SceneBuilder","TransformsBuilder","setOnForceUpdate","staticallyAvailableNamespacesByTopic","supportedMarkerDatatypesSet","getStaticallyAvailableNamespacesByTopic","getDefaultSettings","playerId","clear","rootTfID","setPlayerId","setTransforms","setFlattenMarkers","setSelectedNamespacesByTopic","setTopicSettings","setFrame","setCurrentTime","setSelectedTransforms","handleDrawPolygons","eventName","POLYGON_TAB_TYPE","handleEvent","currentDrawingTabType","currentHandleDrawPolygons","measuringHandler","onControlsOverlayClick","onExitTopicTreeFocus","toggleCameraMode","toggleDebug","contains","selectedObj","currentSaveConfig","ctrlKey","markerProviders","cursorType","MapComponent","videoRecordingStyle","visibility","videoRecordingMode","memoizedScene","getScene","mapNamespaces","mapElement","scene","clientWidth","sceneBuilderMessage","collectors","getMessages","world","DrawPolygons","onToggleCameraMode","onToggleDebug","InteractionContextMenu","renderCount","stats","bufferCount","elementsCount","textureCount","shaderCount","textureSize","getTotalTextureSize","bufferSize","getTotalBufferSize","polygonPoints","setPolygonPoints","polygonsToPoints","selectedFormat","newPolygonPoints","pointsToPolygons","polygonPointsValidator","getFormattedString","getPolygonLineDistances","pointsPerPolygon","pointsToJson","pointsToYaml","polyPoints","additionalToolbarItemsElem","cartographer","tfToFollow","measuringTool","measureDistance","edit","setEdit","camPos2DTrimmed","ZERO_VEC3","num","UncontrolledValidatedInput","cameraStateValidator","CameraStateInfo","paddingLeft","newPos","newTargetOffset","point2DValidator","crosshairPoint","crosshair","extraThickness","treeNodeToTfId","buildTfTree","roots","allNodes","setDepth","getDescendants","padEnd","defaultFollowTfFrame","forceShowFrameList","setForceShowFrameList","hovering","setHovering","lastSelectedFrame","setLastSelectedFrame","tfTree","nodesWithoutDefaultFollowTfFrame","newFollowTfFrame","getDefaultFollowTransformFrame","getFollowButtonTooltip","onClickFollowButton","onSelectFrame","autocompleteNode","openFrameList","onMouseLeaveDebounced","debounce","cancel","followingCustomFrame","showFrameList","selectedFrameId","cameraModeTip","toggleMeasureState","startPoint","defaultSphere","defaultPose","endPoint","buildSyntheticArrowMarker","flattenedZHeightPose","POSE_MARKER_SCALE","topicsWithBadFrameIds","Bounds","_updateErrorsByTopic","_addError","_reportBadFrameId","badFrameError","frameIds","topicMissingError","_consumeMarker","mappedMessage","originalInfo","originalPosition","sourcePose","decayTimeInSec","_topicSettings","lifetime","fromSec","_clock","setClock","_consumeMarkerArray","_consumeOccupancyGrid","_consumeNonMarkerMessage","closed","lastSeenMessages","consumeMarkerArray","consumeNonMarkerMessage","MessageCollector","flush","_consumeMessage","collector","_playerId","reportedErrorTopics","topicsToFlush","other","setEnabledNamespaces","enabledNamespaces","hasErrors","_onForceUpdate","getSceneErrorsByTopic","_consumeNamespace","namespaceIsEnabled","_setTopicError","deleteMarker","deleteAll","_transformMarkerPose","minZ","MAX_SAFE_INTEGER","addMarker","_consumeTopic","renderMarkers","topicMarkers","_addMarkerToCollector","arrow","cube","sphere","cylinder","linedConvexHull","lineStrip","lineList","cubeList","triangleList","pointcloud","poseMarker","laserScan","filledPolygon","instancedLineList","MessageWithLifetime","isExpired","getLifetime","expiresAt","isGreaterThan","hasLifetime","clock","_addItem","existing","MIN_SAFE_INTEGER","SEditorWrapper","collectorMessage","defaultSettingsByColumn","nonPrefixedTopic","editorElem","RenderToBodyComponent","onRequestClose","contentStyle","activeKey","newEditingTopicName","renderTreeNodes","titleWidth","nodeAvailable","itemChildren","namespaceNodes","getNamespaceNodes","TooltipRow","TooltipTable","TooltipDescription","baseNamespacesSet","featureNamespacesSet","uniqueNamespaces","columns","namespaceKey","namespaceNode","checkedByColumn","visibleInSceneByColumn","topicNodeAvailable","maxNodeNameLen","ICON_SIZE","INNER_LEFT_MARGIN","STextHighlight","autoEscape","highlightClassName","searchWords","textToHighlight","testShowTooltip","startTextLen","startText","endText","elem","STextMiddleTruncate","SStart","SEnd","STopicTreeSwitcher","SErrorsBadge","hasChangedPlayerId","newAvailableTfs","availableTfsRef","tfsNotYetAdded","availableTfs","mapKeys","sceneErrorsByKeyMemo","originPosition","originOrientation","defaultArrowMarker","defaultArrowScale","unitXVector","fromValues","originAxes","unitVector","tempOrientation","getAxesArrowMarkers","axis","axisId","rotationTo","getTransformedAxisArrowMarker","getAxisTextMarker","textPose","MARKER_MSG_TYPES","TEXT_VIEW_FACING","tempTranslation","throwawayQuat","getArrowToParentMarkers","childPose","parentPose","addMarkersForTransform","markersForTransform","o","provider","getMarkers","additionalMarkers","textMarkers","useGLText","PointCloudsComponent","GPUPointClouds","PointClouds","groupLines","groupedLines","nonGroupedLines","groupLinesIntoInstancedLineLists","hideDebug","OccupancyGrids","layerIndex","Arrows","Points","Cubes","PoseMarkers","LaserScans","GLText","ALPHABET","scaleInvariantFontSize","FilledPolygons","LinedConvexHulls","fromCodePoint","resultMarkers","groups","messageList","toPairs","baseMessage","lineListPoints","LINE_STRIP","pair","validateLineList","extend","fillExtend","INSTANCED_LINE_LIST","arr1","arr2","numberOfPairs","models","transformQuat","tipPoint","scaleAndAdd","tailPoint","GLTFScene","loadCarModel","carModelURL","samplers","minFilter","LINEAR","isCircle","angle_min","angle_increment","range_min","range_max","ranges","intensity","intensities","occupancyGrids","TextureCache","paletteTextures","palette","decodedMarkers","instancedGetChildrenForHitmap","pointCloud","pointCloudCommand","markerCache","updateMarkerCache","decoded","positionBufferCache","VertexBufferCache","colorBufferCache","getCachedBuffer","vertexBuffer","memoized","minGradientColor","maxGradientColor","onPreRender","onPostRender","decodeMarker","_previous","_current","_deleteBuffer","cached","getTriangleChildrenForHitmap","onlyRenderInHitmap","faceIndices","trianglePoints","index1","index2","index3","convertedColor","Transforms","prevState","tfs","skipTranformFrame","tfs_static","PropTypes","any","ChartJSChart","annotationPlugin","datalabelPlugin","register","defaults","multicolorLine","scatter","controllers","ease","startIndex","meta","getMeta","getDataset","area","_children","originalY","originalDatasets"],"mappings":";6NAgBe,SAA6BA,IAA7B,G,MACPC,EAAIC,gCAAV,GACMC,IAAMF,EAAZ,GAAkBG,IAAMH,EAAxB,GAA8BI,IAAMJ,EAFoC,GAGtDK,IAAML,EAAxB,GAA8BM,IAAMN,EAHoC,GAItDO,IAAMP,EAAxB,GAA8BQ,IAAMR,EAJoC,GAMxED,OAASU,UAAUL,UAAgBA,QAAnCL,KACIU,cAAJ,QACEV,OAASU,gBAATV,KACAA,OAASU,gBAATV,OAEAA,OAASU,eAATV,KACAA,U,OAEF,K,iPCsLK,SAAwBW,K,MACvBC,EAAN,IAAUD,OACJE,EAAN,IAAUF,O,OACV,IAAUA,OACEE,GAALC,EAAgBF,GAAvB,I,oJCrKa,SAAeG,O,OACrBC,uDAASC,qBAAsBA,wBAA/BD,OAAgEE,YAAaC,U,iDCwHvE,UAAwBC,SAAUC,SAAW,K,GAC1D,IAAIA,gB,OACF,K,OAIAC,0DACEA,+CADFA,UAEEA,gDAHJ,Y,uBC/HF,SAAwB,M,IAAEF,SAAUC,SAAW,IAAsB,KAAfE,MAAe,wD,MAC7DC,UAAYH,SAAA,IAAcI,O,MAExBC,OAAiBC,cAAcF,KAAdE,QAA6BF,gBAA7BE,aAA4DF,KAAnF,OACMG,KAAOH,UAAYA,KAAZA,KAAb,QACMI,aArBV,SAAyBH,Q,MACjBI,gBAZR,SAAmBJ,Q,MACXK,MAAQ,IAAIC,aAAlB,EAA+BN,e,IAC1B,IAAIO,EAAT,EAAgBA,EAAIP,OAApB,OAAmCO,IAAK,C,MAC/BC,EAAGC,EAAGC,GAAKV,OAAlB,GACAK,QAAME,GAANF,EACAA,MAAME,IAANF,KACAA,MAAME,IAANF,K,OAEF,MAIwBM,CAAxB,QACMC,SAAUC,mBAAM,qBAAtB,GACMC,UAAN,G,IACK,IAAIP,EAAT,EAAgBA,EAAIK,QAApB,OAAoCL,IAAK,C,MACjCQ,cAAgBH,QAAtB,GACAE,eAAed,OAAfc,gB,OAEF,UAauBE,CAArB,Q,oCACA,MAEEhB,OAFF,uBAIEiB,MAJF,cAKEC,eAAgBnB,S,OAOlBH,8DAAWL,qBAAsB4B,wCAAjCvB,MADF,Y,eCyda,SAAgBP,O,gCACtB+B,UAAWC,mBAAS,IApO7B,SAAyBC,U,MAEjBC,QAAU,IAAIC,IAAIF,UAAxB,IACMG,oBAnONC,uBAEE,CAAC,QAAD,kD,MAOQC,QAAU,IAAI,SAAJ,mBArCtB,GAFA,EACA,IAsCsB,aAAhB,UACMC,IAAMC,qBAAwBC,WAAF,iB,IAE9BC,aAAJ,E,MACMC,UAAYF,WAAa,GACzBG,SANiB,G,IASnBzB,EAAJ,EACIC,EAAJ,E,IACK,MAAL,gBAA4B,C,MACpByB,MAAQN,sBAAd,MACMO,GAAKnD,iBAAmB,GAC1BwB,KAAJ,gBACEA,IACAC,cAEFwB,eAAiB,SAAQC,aACzB1B,MACAuB,aAAe/C,sBAAf+C,G,MAGIK,cAAgB3B,EAAtB,UACM4B,YAAc,IAAIC,WAAWP,aAxBZ,e,IA2BlB,MAAL,gBAA4B,C,MACpB,MAAKtB,GAAMwB,SAAjB,MACMM,KAAOZ,aAAb,M,IACK,IAAIpB,EAAT,EAAgBA,EAAIoB,QAApB,KAAkCpB,I,IAC3B,IAAIiC,EAAT,EAAgBA,EAAIb,QAApB,KAAkCa,IAE5BhC,IAAJ,eACE6B,YAAYN,cAAgBtB,EAAhBsB,KAAZM,GAA8CE,KAAKhC,EAAIoB,QAAJpB,KAAnD8B,I,OAMRI,aAAa,CACXF,KADW,YAEXL,MAFW,aAGXQ,OAHW,cAIXC,OAJW,QAKXC,KALW,QAMXC,IANW,SAOXC,IAAK,WAEP,WA4KE1B,QAAW2B,O,MACTN,aAAeM,KAArB,UAEMC,SAAWD,KAAK,CAKpBE,MAAO,CACLC,OAAQ,CAACtB,IAAKvC,SAAWA,sBAA+B8D,wBADnD,OAELC,KAAM,CAACxB,IAAKvC,SAAWA,sBAA+B8D,8BAExDE,MAToB,aAUpBC,UAVoB,iB,KA3KZ,qxH,KA4GA,y/DA4ERC,SAAU,CACRC,MADQ,aAERC,UAAW,IAAM,CAAChB,aAAD,MAAqBA,aAF9B,QAGRiB,SAAUX,UAHF,cAIRY,OAtRR,IAuRQC,eAAgBb,UALR,kBAMRc,mBAAoBd,UANZ,sBAORe,SAAUf,UAPF,YAQRgB,eAAgBhB,aARR,kBASRiB,cAAejB,aATP,iBAURkB,cAAelB,aAVP,iBAWRmB,WAAYnB,sBAEdoB,UAAWpB,UA1BS,aA2BpBqB,MA3BoB,EA4BpBC,WAAY,CACVC,SAAU,CAAC,CAAC,EAAF,GAAS,CAAC,GAAV,GAAkB,CAAC,EAAnB,GAA0B,CAAC,GAD3B,IAEVC,SAAU,CAAC,CAAC,EAAF,GAAS,CAAC,EAAV,GAAiB,CAAC,EAAlB,GAAyB,CAAC,EAF1B,IAGVC,UAAW,CAAC5C,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,WAA4BqF,QAAS,IACjEC,WAAY,CAAC/C,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,YAA6BqF,QAAS,IACnEE,SAAU,CAAChD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,UAA2BqF,QAAS,IAC/DzD,MAAO,CAACW,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,MAAuBqF,QAAS,IACxDG,gBAAiB,CAACjD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,gBAAiCqF,QAAS,IAC5EI,UAAW,CAAClD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,UAA2BqF,QAAS,IAChEK,gBAAiB,CAACnD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,gBAAiCqF,QAAS,IAC5EM,gBAAiB,CAACpD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,gBAAiCqF,QAAS,IAC5EO,eAAgB,CAACrD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,eAAgCqF,QAAS,IAC1EQ,iBAAkB,CAACtD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,iBAAkCqF,QAAS,IAC9ES,gBAAiB,CAACvD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,gBAAiCqF,QAAS,IAC5EU,aAAc,CAACxD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,aAA8BqF,QAAS,IACtEW,gBAAiB,CAACzD,IAAKvC,SAAU,CAAGoF,OAAQpF,MAAV,gBAAiCqF,QAAS,O,MAIzE,CAACrF,MAAD,Y,IACDiG,mBAAJ,E,kBACA,MAA8B,C,MAAnB,KAAEC,MAAiB,K,GAC5B,iBAAWA,K,MACH,IAAIC,MAAO,+DAA8DD,kB,IAG5E,MAAL,eACE,mBACAhE,kB,MAKEkE,cAAwB1C,4BAA9B,KACMd,SAAWR,mBAAmBF,QAASA,QAAV,KAAwBH,QAAxB,wBAAnC,eAEMsE,YAAc,IAAIpF,aAAxB,EAAqCgF,oBAC/BK,UAAY,IAAIrF,aAAtB,oBACMsF,WAAa,IAAItF,aAnB6C,EAmBhCgF,oBAG9BT,gBAAkB,IAAIvE,aAA5B,EAAyCgF,oBACnCrE,MAAQ,IAAIX,aAAlB,EAA+BgF,oBACzBP,gBAAkB,IAAIzE,aAA5B,EAAyCgF,oBACnCN,gBAAkB,IAAI1E,aAA5B,EAAyCgF,oBACnCL,eAAiB,IAAI3E,aAA3B,EAAwCgF,oBAClCJ,iBAAmB,IAAI5E,aAA7B,oBACMwE,UAAY,IAAIxE,aAAtB,oBACM8E,aAAe,IAAI9E,aAAzB,EAAsCgF,oBAChCD,gBAAkB,IAAI/E,aAA5B,EAAyCgF,oBACnCH,gBAAkB,IAAI7E,aAA5B,oB,IAEIuF,eAjCgE,E,MAwC9DC,SAAW,IAAjB,I,IAEK,MAAL,gBAA4B,C,uDACtBC,WAAJ,EACIvF,EAAJ,EACIC,EAAIuF,iBAAiBF,SAAzB,QACIG,gBAAJ,EACIC,UALsB,E,MAUpBC,QAAUC,QACdtC,SAAWuC,cAAgB,CAAC,EAAG,EAAG,EAA1B,IAAkC,uBAAAA,OAAA,4DAAsBA,OAAtB,OAD5C,kBAGMC,QAAU,+BAAAD,OAAA,8DAA8BjF,QAA9C,oBACMmF,QAAUH,SACd,wBAAAC,OAAA,+DAAuBjF,6BAA+BoF,YAA/BpF,0BADzB,kBAGMqF,SAAUJ,kBAAA,EAAAA,OAAA,iBAA0B,CAAEnH,EAAF,EAAQE,EAAR,EAAcD,EAAd,EAAoBuH,EAAG,G,IAE5D,IAAInG,EAAT,EAAgBA,EAAI8F,YAApB,OAAwC9F,IAAK,C,4BACrCoG,KAAON,YAAb,G,GACA,OAAIM,KAAe,CACjBnG,EADiB,EAGjBC,GAAKW,QAALX,WACAyF,Y,eAGIU,KAAO3E,SAAb,MACM4E,MAAQhB,eAV6B,gBAa3CH,YAAY,EAAImB,MAAhBnB,KACAA,YAAY,EAAImB,MAAhBnB,MACAE,WAAW,EAAIiB,MAAfjB,GAA4BgB,OA/XtC,GAmYUhB,WAAW,EAAIiB,MAAfjB,GAA4BgB,OAnYtC,GAmYwD,IAAOxF,QAArDwE,WACAD,iBAAmBiB,KAAnBjB,MAEAnF,GAAKoG,KAALpG,MACAuF,WAAa/G,oBAvB8B,GA4B3C8F,iBAAmB,0BAAAuB,OAAA,4DAAnBvB,EAEA7D,MAAM,EAAI4F,MAAV5F,GAAuBoF,aAAvBpF,EACAA,MAAM,EAAI4F,MAAV5F,GAAuBoF,aAAvBpF,EACAA,MAAM,EAAI4F,MAAV5F,GAAuBoF,aAAvBpF,EAEAmE,aAAa,EAAIyB,MAAjBzB,GAA8BiB,qBAA9BjB,EACAA,aAAa,EAAIyB,MAAjBzB,GAA8BiB,qBAA9BjB,EACAA,aAAa,EAAIyB,MAAjBzB,GAA8BiB,qBAA9BjB,EAEAC,gBAAgB,EAAIwB,MAApBxB,GAAiCgB,wBAAjChB,EACAA,gBAAgB,EAAIwB,MAApBxB,GAAiCgB,wBAAjChB,EACAA,gBAAgB,EAAIwB,MAApBxB,GAAiCgB,wBAAjChB,EACAA,gBAAgB,EAAIwB,MAApBxB,GAAiCgB,wBAAjChB,EAEAN,gBAAgB,EAAI8B,MAApB9B,GAAiCoB,QAAjCpB,EACAA,gBAAgB,EAAI8B,MAApB9B,GAAiCoB,QAAjCpB,EACAA,gBAAgB,EAAI8B,MAApB9B,GAAiCoB,QAAjCpB,EACAA,gBAAgB,EAAI8B,MAApB9B,GAAiCoB,QAAjCpB,EAEAC,gBAAgB,EAAI6B,MAApB7B,GAAiCuB,QAAjCvB,EACAA,gBAAgB,EAAI6B,MAApB7B,GAAiCuB,QAAjCvB,EACAA,gBAAgB,EAAI6B,MAApB7B,GAAiCuB,QAAjCvB,EACAA,gBAAgB,EAAI6B,MAApB7B,GAAiCuB,QAAjCvB,EAEAC,eAAe,EAAI4B,MAAnB5B,GAAgCwB,QAAhCxB,EACAA,eAAe,EAAI4B,MAAnB5B,GAAgCwB,QAAhCxB,EACAA,eAAe,EAAI4B,MAAnB5B,GAAgCwB,QAAhCxB,EACAA,eAAe,EAAI4B,MAAnB5B,GAAgCwB,QAAhCxB,EAEAE,uBAAyBkB,2BAA6BA,mCAA7BA,KAAzBlB,EAEAD,wBAA0BoB,QAAU,EAApCpB,IAEA,gB,MAGI4B,YAAcrG,EAAIW,QAAxB,W,IACK,IAAIb,EAAT,EAAgBA,EAAhB,gBAAqCA,IACnCsE,gBAAgB,GAAKgB,eAAL,GAAhBhB,IAAiDkB,WAAjDlB,EACAA,gBAAgB,GAAKgB,eAAL,GAAhBhB,GAAgDiC,YAAhDjC,EAOFkC,iBAAiBjB,SAAUO,OAAQS,YAAcZ,UAAY9E,QAA7D2F,YAEAlB,gCAGF7C,SAAS,CACPmB,UADO,eAGPL,WAHO,SAIPF,eAAgBxC,QAJT,eAKPU,WAAYV,QALL,WAMPyC,mBAAoBzC,QANb,mWAuBPH,gB,OAING,+BACA,QAIiC4F,CAAgB3H,MADN,WAI3C+B,4BAA8B/B,MAA9B+B,oBACAA,mBAAqBpC,SAxevB,GAwegDK,kBAvehD,KAweE+B,6BAAyB/B,6BACzB+B,yDAA6B/B,MAA7B+B,gF,MACM7B,qBAAuB0H,oCAA7B,G,OAEOrH,4DAASL,qBAATK,qBAAqDJ,YAAa4B,SAAzE,S,kBCvRa,SAAmB/B,O,MAC1B,wBAAY6H,OAAlB,MAA4BrH,MAA5B,iEAEMsH,SAAUC,qBAAhB,uBACMC,YA1BR,SAAkBH,O,OAChBI,+BArBF,kB,MACSC,MAAOC,WAAd,qB,OACAC,qBACEC,sBAAY,K,IACNC,UAAJ,E,OACAC,UAAWC,SACT,UACEL,mBAGG,KACLG,YACAH,mBAEDM,MAAQ,CAZJ,KAaPA,MAAQ,CAbVL,KAeA,MAKOM,CACLC,U,GACE,mBAAWd,M,OACFA,Q,GAET,iBAAWA,MAAoB,C,MACvBe,eAAiBC,MAAvB,O,IACKD,SAAL,G,MACQ,IAAIzC,MAAO,+BAA8ByC,SAASE,Q,OAEnDC,eAAeH,SAAtB,e,MAII,IAAIzC,MAAO,kCAAiC0B,QAEpD,CAhBF,QAwBoBmB,CAApB,O,IACAZ,oBACE,KACE,SACEN,mBAGJ,CAACA,QANHM,eASA,Y,OACE,K,OAIA7H,oEAAmBJ,YAAnBI,UAA2CL,qBAAsB4B,0C,6BAAjEvB,UACkBsH,MADlBtH,YACsCsB,eAAgBxB,a,qDCjO3C,SAAgBL,O,OACtBC,uDAASC,qBAAsBA,wBAA/BD,OAAgEE,YAAaQ,a,u7EC3DtF,MAAMsI,YAQJC,YAAYC,KAAD,M,+SACT,U,KACA,Q,KACA,Y,KACA,Y,KACA,QAAaxJ,e,KACb,SAAcA,eAIH,SAASyJ,sBAAsBC,UAA/B,c,MACPC,OAASzG,MAD4F,OAGrG0G,iBAAmB5J,SAAzB,W,OAGO,IAAIsJ,aAFIM,iBAAF,EAAb,OACYA,iBAAZ,GChBF,MAEMC,KAAO,CAAC,EAAG,EAAG,EAApB,GRPA,MAgBMC,mBAAqB,CAAE5J,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBsH,EAAG,GAErCqC,YAAc,EAAC,QAAQrI,OAC3B,CAACF,EAAGC,EAAX,G,gCAEF,MAAauI,kBAAoB,EAAC,YAAWC,OACpC,CAACzI,EAAGC,EAAGC,EAAd,G,4CAGF,MAAawI,YAAc,EAAE1I,EAAGC,EAAL,OAA6B,QAAQC,M,gCAEhE,MAAayI,kBAAoB,EAAE3I,EAAGC,EAAGC,EAAR,OAAsC,YAAWuI,M,4CAElF,MAAaG,iBAAoBpJ,S,MACzB6H,OAAS,IAAIvH,aAAnB,EAAgCN,e,IAC5BO,EAAJ,E,kBACA,OAAkC,C,MAAvB,UAAQG,GAAe,KAChCmH,OAAOtH,KAAPsH,EACAA,OAAOtH,KAAPsH,EACAA,OAAOtH,KAAPsH,E,OAEF,Q,0CAGF,MAAawB,OAAUC,KACd,CAACA,IAAD,EAAQA,IAAR,EAAeA,IAAf,EAAsBA,IAA7B,G,sBAGF,MAAaC,WAAcC,QAAD,CAA2BtK,EAAGsK,MAAL,GAAerK,EAAGqK,MAAlB,GAA4BpK,EAAGoK,MAA/B,GAAyC9C,EAAG8C,MAAM,K,8BAErG,MAAapD,QAAWkD,KAA8BG,mBAAqBF,WAArBE,KAA/C,IAEA,SAASC,YAAYF,MAArB,oB,MACC,cAAW9C,GAAjB,MACQ,eAAO,IAACxH,GAAD,eAAwB,IAACC,GAAD,eAAwB,IAACC,GAAD,cAAwBsH,gB,wBAGzF,MAAMiD,YAAeC,S,MACb/B,OAAS,IAAIvH,aAAnB,EAAgCsJ,e,IAC5BrJ,EAAJ,E,mBACA,OAAqC,C,MAA1B,cAAWmG,GAAe,MACnCmB,OAAOtH,KAAPsH,EACAA,OAAOtH,KAAPsH,EACAA,OAAOtH,KAAPsH,EACAA,OAAOtH,KAAPsH,E,OAEF,QAeWgC,iBAAmB,CAC9B3G,QAD8B,EAG9B4G,KAAM,CACJC,IADI,YAEJC,IAFI,sBAGJC,SAHI,EAIJC,SAAU,uBAEZC,SAAU,CACRlL,IADQ,MAERmL,MAAO,Q,0CAIX,MAAaC,iBAAmB,CAC9BnH,QAD8B,EAE9BE,MAAM,G,0CAGR,MAAaD,aAAe,CAC1BD,OAAQ,CAACiE,QAAD,QAA+B9H,aAAeA,YAAhB,QAAuCgL,iBADnD,OAE1BjH,KAAM,CAAC+D,QAAD,QAA+B9H,aAAeA,YAAhB,MAAqCgL,iBAAiBjH,M,kCAG5F,MAAakH,cAAe,EAAH,6CAEvBpH,OAAQ,CAACiE,QAAD,QAA+B9H,aAAeA,YAAhB,QAAuCwK,iBAFtD,OAGvBC,KAAM,CAAC3C,QAAD,QAA+B9H,aAAeA,YAAhB,MAAqCwK,iBAAiBC,O,kCAI5F,MAAazG,MAAN,aAKA,SAASkH,SAASnJ,S,MACjB,mBAAQmC,UAAd,QACMiH,QAAUC,0BApHE,yYAqHZC,aAAc,EAAH,qCAEfC,UAAW,CAACxD,QAAS9H,S,MACb,SAAEiF,UAAajF,MAArB,K,OACOoK,iCAAqCV,YAA5C,WAEF6B,UAAW,CAACzD,QAAS9H,S,MACXwL,YAAa3L,GAAMG,MAA3B,K,OACOoK,mBAAuB,CAACvK,EAAD,EAAMA,EAAN,EAAWA,EAAX,EAAgBA,EAA9C,M,oCAGJ,SAEEuL,KAFF,QAGElH,SAAUmH,cAIP,SAASI,iBAAgB,iCAG9B9K,S,OAMM4J,QAAWA,OAAb,SAAJ,MAGA,OAES3J,sBAAwB0J,YAAxB1J,QAAP,OAEF,GAtFwB,EAACmE,OAAe,YAAWsC,Q,MAC7CmB,OAAS,IAAIvH,aAAnB,EAAgC8D,O,IAC3B,IAAI7D,EAAT,EAAgBA,EAAhB,MAA2BA,IACzBsH,OAAO,EAAItH,EAAXsH,KACAA,OAAO,EAAItH,EAAXsH,KACAA,OAAO,EAAItH,EAAXsH,KACAA,OAAO,EAAItH,EAAXsH,K,OAEF,QAwESkD,CAAkB/K,OAAD,OAAxB,OAiBG,SAASgL,YAAYjI,M,MACpB0B,OAAS1B,KAAA,OAAY,CACzBkI,MADyB,UAEzB1I,KAAM,K,OAGD,8B,IACL,a,OACKqH,QAAWA,OAAhB,QAIErH,KAAOtC,sBAAwB0J,YAAxB1J,QAAPsC,OACAmC,YAJAnC,KAAOtC,qBAAuBoJ,OAAvBpJ,OAAPsC,MACAmC,gBAKK,CACLD,OAAQA,OAAO,CACbwG,MADa,UAEb1I,YAEFmC,kBAMC,SAASzE,cAAcZ,O,SACvBA,QAnCkB6L,IAmCnB,MAlCGA,YAAczB,cAAcyB,IAAnC,OAkCyCC,MAAM9L,MAA/C,KAnCF,IAAyB6L,IAyClB,SAASE,SAAS7K,EAAlB,G,MAIE,EAHKA,GAAD,GAAD,KAAV,KACYA,GAAD,EAAD,KAAV,KACU,IAACA,GAAX,IACA,GAUK,SAAS8K,eAAepM,K,MACvBC,EAAID,IAAV,GACME,EAAIF,IAAV,G,OACUA,IAAV,GACYE,GAALC,EAAgBF,GAAvB,GAMK,SAASoM,cAAchN,IAAvB,a,MACCiN,QAAUrM,EAAIF,SAApB,K,OACAV,OAASiN,QAAUvM,SAAnBV,OACAA,OAASY,EAAIF,SAAbV,KACAA,OAASiN,QAAUvM,SAAnBV,OACA,I,oBS5NF,MAAMkN,cAAgBC,cAAc,CAAC,EAAG,EAAxC,IAGMC,UAAY,CAAC,EAAG,EAAtB,GACMC,SAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAA5D,GACMC,UAAY,CAAC,EAAG,EAAG,EAAzB,GAEMC,cAAiBC,OAAvB,MAEMC,qBAAsBC,4BAAc,cAExC,EAAGC,2BAFL,aAIMC,kBAAmBF,4BAAc,cAErC,E,SAAGG,eAFL,aAIMC,aAAcJ,4BAAc,cAEhC,EAAGK,WAFL,KAIMC,qBAAsBN,4BAAc,cAExC,EAAGO,2BAFL,aAIMC,2BAA4BR,4BAAc,cAE9C,EAAGS,uCAFL,mBAMMC,uBAAiDV,4BAAc,0BAElES,oB,MACOnO,IAAMqO,qDAAZ,mB,OACiB3N,WAAWV,IAAXU,GAAmBV,IAApC,MAMEsO,qBAA6CZ,4BAAc,oDAI/D,CAACC,YAAaI,IAAKE,e,MACX1E,OAASgF,wBAAc,CAAC,EAAG,EAAG,EAApC,I,OACAA,sCAFiC,aAKjC,aACEA,0CAEF,SAKEC,kBAA0Cd,4BAAc,iDAI5D,CAACO,YAAaF,IAAK,e,MACX/H,SAAWgH,cAAc,GAAI,YAAL,YADA,MAIvB9K,EAAGC,EAAGC,GAAb,S,OACA4D,eACAA,eACAA,cAEA,WAqHJ,cAAe,CACbuG,YADa,oBAEbvG,SAFa,iBAGbyI,cAHa,sBAIbC,MApD0ChB,4BAAc,yEAKxD,EAAC,wCAAwBC,yBAAzB,sC,MACQ1N,EAAI0O,wBAAc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EADY,I,OAM/EA,4BAAoBA,iCAAwBJ,gCANmC,eAS/E,aACEI,6BAAqBN,gCAArBM,WAIFA,6BAAqBN,gCAd0D,eAiB/EM,2BAjB+E,eAoB/EN,wCACA,cAGEjB,oBAEFuB,wCAEA,IAoBFC,mBAhB+ClB,4BAAc,0CAG7D,CAACnB,YAAakC,iB,MACNxO,EAAI0O,wBAAcA,eAAxB,U,OACAA,2CACAA,4BAAoBA,iCAApBA,cACA,K,uCC3KJ,MAAME,cAAgB1B,cAAc,CAAC,EAAG,EAAxC,IAEMG,YAAY,CAAC,EAAG,EAAG,EAAzB,GAEawB,qBAAoC,CAC/CjB,SAD+C,GAE/CF,aAF+C,EAG/CI,IAAKrN,QAH0C,EAI/CqO,OAAQ,CAAC,EAAG,EAJmC,GAK/CC,aAAc,CAAC,EAAG,EAL6B,GAM/Cb,kBAAmB,CAAC,EAAG,EAAG,EANqB,GAO/CF,YAP+C,EAQ/CgB,KAAMvO,QARyC,EAS/CwO,KAT+C,IAU/CC,IAAK,K,kDAQQ,MAAMC,YAKnBnF,YACEoF,QAAiC,SACjCC,mBAFS,uB,0JAQO9B,Q,IAKX,MAAO+B,IAAZ,SAA2BpC,eAA3B,sBACE,MAAIK,aACFA,kB,KAKJ,e,gDAGa,EAAEtL,EAAF,M,GAETA,OAAJ,IAAeC,E,aAGT,4BAAe4L,KAAQyB,KAA7B,M,KACA,6CACKA,KADL,OAEEvB,YAAaA,YAFf,EAGEF,IAAKrN,WAAYA,SAASqN,IAATrN,EAAkBA,KAA9BA,Q,KAEP,UAAe8O,KAAf,U,8CAIW,EAAEtN,EAAF,M,GAEPA,OAAJ,IAAeC,E,aAIT,sCAAgB8L,aAAgBuB,KANT,MASvBjG,OAAS,CAACrH,EAAGC,EAAnB,GACMsN,OAASpB,2CAAmCE,uDAAlD,c,KAEA,6CACKiB,KADL,OAEER,aAAcX,kD,KAEhB,UAAemB,KAAf,U,8CAGYE,c,eACJ7B,aAAa2B,KAArB,MACMG,YArEV,SAA2BC,iBAA3B,a,OAESlP,cAAgBkP,kBAAoB,EAAIF,YAA/C,MAmE8BG,CAAkB,YAA9C,aACIhC,cAAJ,c,KAIA,6CACK2B,KADL,OAEE3B,SAAU8B,e,KAEZ,UAAeH,KAAf,U,KAhEA,kB,KACA,oC,gCC5CJ,MAAMnC,WAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAA5D,GAIA,WAAgB5I,MACP,M,gEAAsC,I,kDAAA,I,+CAAA,uB,wCAqCpCA,KAAK,CAEVoE,QAAS,CAGPiH,WAAWjH,QAAS9H,O,MACZ,2CAAiB0E,gBADE,Q,YAIzB,4B,KACA,8B,KACA,kBACO+J,KAAP,iBAGFd,KAAK7F,QAAS9H,O,OACLyO,KAAP,WAIFZ,kBAAkB/F,QAAS9H,O,OAClBgP,4BAA4BP,KAAnC,cAGF7J,cAAckD,QAAS9H,O,OACdyO,KAAKQ,YAAZ,aAGFf,KAAKpG,QAAS9H,O,OACLyO,KAAKQ,YAAZ,OAMJ/K,SAAU,CACRyJ,KAAMjK,aADE,QAERmK,kBAAmBnK,aAFX,qBAGRqL,WAAYrL,+BAtEhBwL,gB,MACQ,kB,SAAA,iBAAuBhB,MAASO,KAAtC,Y,IACKA,KAAKQ,YAAV,YAAmC,C,MAC3BE,OAAS/F,sBAAsB,YAAUqF,KAAX,cAA+BA,KAAnE,iBACM,wCAAuBW,KAA7B,O,OACOxB,qBAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAtDA,8BAAP,K,MAEItE,OAASmF,KAAK9J,cAAgB8J,KAApC,e,OACOb,2BAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAA5DA,oBAAP,KAGFyB,U,OACSL,eAAeP,KAAtB,aAIFa,cAAcC,SAAD,O,MACLR,WAAaN,KAAnB,gBACMd,KAAOqB,eAAeP,KAA5B,aACMe,iBAAmB5B,8CAAzB,OACOzM,EAAGC,EAAGC,EAAGuI,GH1BP,SAAuB3K,IAAvB,+B,MACPwQ,GAAKF,SAAX,GACEG,GAAKH,SADP,GAEEI,OAASJ,SAFX,GAGEK,QAAUL,SAHZ,GASAM,wBAAeC,IAAfD,GAAuBC,IAAvBD,GAA+BC,IAA/BD,GAVuG,GAavGA,uCAbuG,kB,MAgBjGjG,EAAIJ,KAAV,G,OACA,IAAII,IAEFJ,QAAUA,QAAVA,EACAA,QAAUA,QAAVA,EACAA,QAAUA,QAAVA,GAMFvK,OAASwQ,GAAME,OAAD,EAAenG,KAApBiG,IAA+B,EAAIE,OAA5C1Q,GACAA,OAASyQ,GAAME,QAAD,EAAgBpG,KAArBkG,IAAgC,EAAIE,QAA7C3Q,GACAA,OAAU,GAAeuK,KAAhB,GAA0B,GACnCvK,OAAS2K,QAAc,EAAvB3K,EACA,IGLyB8Q,CAAQ,GAAIC,MAAOT,SAAxC,kB,GACIlO,KAASA,EAATA,GAAkBuI,EAAtB,E,aAIMqG,MAAQV,YAAcA,SAA5B,G,MAIO,CAACpO,EAHMoO,SAV+B,GAa1BU,MAAZ,EAAP,KCvCN,MAMMC,eAA+B,CACnCC,KADmC,WAEnCC,KAFmC,YAGnCC,KAHmC,cAInCC,KAJmC,SAKnCC,KALmC,aAMnCC,KANmC,WAOnCC,KAPmC,WAQnCC,KARmC,SASnCC,KATmC,UAUnCC,KAAM,UAaO,MAAMC,uBAAuB,OAA7B,U,oIAEQ,IAF4C,M,4CAGzC,IAHyC,M,8CAAA,K,8CAAA,I,6CAAA,I,6CAAA,I,iNAyC5CC,Q,MACb,wBAAWC,SAAjB,OACM,qCAAoB1N,QAAWoL,KAArC,M,MAGO,EAFIuC,QAAD,MAAV,OACWD,QAAD,KAAV,W,gDAIcE,I,MACR,IAAEC,KAAR,KACA,MAIAD,mB,KACA,aAAkBA,EAAlB,QACAC,Y,KACA,MAAaA,IAAb,wB,KACA,cAAqBzC,KAAK0C,kBAA1B,G,KACA,qB,sDAsCoBF,I,IACfxC,KAAK2C,SAAV,K,YAGA,UAAiBH,EAAjB,S,MAEEI,aAAa,gDAGX5E,OAAO,YAAEG,eAET6B,KAXkC,M,IActC,Y,MACMqC,MAAQrC,KAAK0C,kBAfmB,G,GAmBjCG,SAAD,qBAAuCL,aAAeA,EAA1D,YACEM,OAASN,EAAD,UAAexC,KAAK+C,MAA5BD,MACAE,OAASR,EAAD,UAAexC,KAAK+C,MAA5BC,SAEAF,MAAQ9C,KAAKiD,cAAc,GAAKZ,MAAhCS,GACAE,MAAQhD,KAAKiD,cAAc,GAAKZ,MAAhCW,I,KAEF,oBAEIhD,KAAJ,oBAA8B,C,MACtBkD,UAAYlD,KAAKmD,cA5J7B,GAiKMC,aAAa,EAHFjF,YAAc2E,OAAf,OAHkB,UAKlB3E,YAAc6E,MAAH,UAArB,I,GAIEhD,KAAJ,mBAA6B,C,MACrB,MAAKrN,GAAMqN,KAAjB,oBACAqD,WAAW,CAACrD,KAAKmD,cAAcL,MAApB,GAAgC9C,KAAKmD,eAAeH,MAA/DK,S,8CAIUb,I,KACZ,gBAAqBA,EAArB,Q,KACA,kB,oDAGkBA,I,MACZ,IAAEC,KAAR,KACA,MAKIA,aAAcD,EAAdC,SAAiCD,WAArC,M,KAMA,iB,KACA,oB,iDAiBec,O,MACTC,UAAYvD,KAAKmD,cA7M3B,IA8MUK,UAAYxD,KAAKmD,cA7M3B,KA8MUM,UAAYzD,KAAKmD,cA7M3B,MA8MU,wBAAUO,WAAc1D,KAA9B,MACM2D,OAAgCC,QAAUA,OAAX,OAA4BnC,eAA5B,QAArC,E,GAEIzB,KAAK6D,YAAT,U,OACE,K,OAGF,Q,IACE,Y,MACS,CAAEnR,EAAG6Q,W,IACd,W,MACS,CAAE7Q,GAAI6Q,W,IACf,S,MACS,CAAE5Q,EAAG4Q,W,IACd,W,MACS,CAAE5Q,GAAI4Q,W,IACf,S,MACS,CAAEO,KAAMN,W,IACjB,U,MACS,CAAEM,MAAON,W,IAClB,a,MACS,CAAEO,KAAMN,W,IACjB,c,MACS,CAAEM,IAAKN,W,IAChB,S,MACS,CAAEO,MAAOP,W,IAClB,W,MACS,CAAEO,KAAMP,W,KACjB,E,OACE,K,eAGAQ,gDACA,S,8CA8DQzB,I,MACN,OAAEoB,QAAW5D,KAAnB,M,KACA,UAAiBwC,EAAjB,S,KACA,SAAgBA,EAAhB,Q,KACA,SAAgBA,EAAhB,Q,MACMc,KAASd,EAAF,YAL6C,K,OAQtDA,UAAYxC,KAAKkE,MAAMC,IAA3B,OACE3B,yBACAA,oBAIEA,UAAYA,EAAZA,SAAyBA,EAA7B,a,IAMIoB,QAAUN,QAAVM,SAA6BA,OAAjC,aAKI5D,KAAKoE,cAAT,Q,KACE,gB,KACA,iBACA5B,oBACAA,wB,4CAIQA,I,KACV,UAAiBA,EAAjB,S,KACA,SAAgBA,EAAhB,Q,KACA,SAAgBA,EAAhB,Q,KAEA,aAAoBA,EAAF,YAAlB,S,4CAGUA,IAGVA,mBACAA,oB,KACA,UAAiBA,EALW,S,MAStB,qBAAU6B,SAAWC,2BATC,GAYtBC,YAAcF,QAZQ,OAgBtBG,KAAN,EAAYtT,uBACNuT,OAASvT,SAjBa,aAmBtBwT,WAAaxT,WAAYA,gBAnBH,KAsBtByT,eAAiB3E,KAAKmD,cAAcuB,eA/W9C,I,KAgXI,gD,2CAMSlC,I,KACT,MAAa,IAAb,I,KACA,Y,KACA,a,KACA,Y,KACA,mB,kDAGgBA,IAChBA,mBACAA,sBAvVFoC,oB,MACQ,IAAEnC,KAAR,K,IACA,I,YAIA,MAAaA,IAAb,wB,MACMoC,OAAS,CAACtF,OAAD,WACbA,iC,KACA,gBAAqB,yBAAgBzF,SAEvC+K,OAAOhC,SAAU,OAAQ7C,KAAzB6E,SACAA,OAAOC,OAAQ,UAAW9E,KAA1B6E,kBACApC,6BAA8BzC,KAA9ByC,SAA6C,CAAEsC,SAAS,IAG1DC,uB,KACE,mBAAyBC,WACvBA,oCAAoCA,SAApCA,KAAmDA,SAAnDA,M,KAEF,e,MACM,IAAExC,KAAR,KACA,KAGAA,gCAAiCzC,KAAjCyC,SAAgD,CAAEsC,SAAS,IAyB7DG,mB,OACSlF,KAAK2C,SAASwB,IAArB,GAGFgB,oB,OACSnF,KAAK2C,SAASwB,IAArB,GAGFhB,cAAciC,KAAD,G,OACJpF,KAAK6D,UAAYuB,KAAjB,GAAP,KAGFC,oB,GAEMrF,KAAJ,S,MACS,CAAEtN,EAAF,EAAQC,EAAG,G,MAIlBiQ,aACE5E,O,SAAO,wBAAYG,eAEnB6B,KAJJ,M,GAKA,Y,MAGS,CAAEtN,EAAF,YAAeC,EAAG0L,a,MAIrB,mBAASzJ,QAAWoL,KAA1B,MACMU,OAAS/F,sBAAsB,YAAD,MAApC,Q,MACO,CAAEjI,EAAGgO,OAAL,MAAmB/N,EAAG+N,OAAO9L,QAoEtC0Q,cAAc9C,GACRA,cAAkBxC,KAAlBwC,KAAJ,mBAAyCxC,KAAKyC,IAAZ,oB,KAChC,yBAEFqC,oCAAqC9E,KAArC8E,oBAGFS,eACET,uCAAwC9E,KAAxC8E,oBACA,mBAAYjC,SAAR,iBACDA,SAAD,kBA6CJ2C,cAAcC,I,MACNC,OAAS,CAAEhT,EAAF,EAAQC,EAAR,EAAcmR,KAAd,EAAuBC,IAAvB,EAA+BC,KAAM,G,KACpD,cAAoBV,O,MACZ,EAAE5Q,EAAF,IAASC,EAAT,OAAgBmR,KAAhB,MAA0BC,IAA1B,OAAmCC,KAAO,GAAMhE,KAAKoE,cAAcd,OAAzE,GACAoC,YACAA,YACAA,kBACAA,gBACAA,oB,MAIA9C,aAAa,sEAIX5E,OAAO,YAAEG,eAET6B,KAPJ,M,GASI0F,UAAYA,OAAhB,EAA0B,C,MAClB,MAAK/S,GAAMqN,KAAjB,oBACAqD,WAAW,CAACqC,WAAD,GAAoBA,WAA/BrC,MAEEqC,YAAevH,aAAeuH,OAAlC,OACEtC,aAAa,CAACsC,WAAD,GAAkBvH,YAAcuH,YAAH,GAA1CtC,IAEEsC,OAAJ,MACEC,WAAWD,YAAXC,IAIJC,eAAeC,WACT7F,KAAJ,Y,KAGA,UAAiB8F,sBAAuBC,Q,KACtC,eAAoBF,UAAYE,MAAH,UAAV,GAAnB,K,KACA,eAFgD,EAS5C/F,KAAKkE,MAAT,M,KACE,yBAKN8B,gBACMhG,KAAJ,WACEiG,qBAAqBjG,KAArBiG,W,KAEF,iBAsFFC,S,MACQ,SAAEtU,UAAaoO,KAArB,M,OAEE,+BACEmG,SADF,EAEEC,MAAO,CAAE5N,QAAS,QAClB6N,WAHF,EAIEC,IAAMC,IAAQvG,KAAKyC,IAJrB,GAKE+D,YAAaxG,KALf,aAMEyG,UAAWzG,KANb,WAOE0G,OAAQ1G,KAPV,QAQE2G,cAAe3G,KARjB,eASE4G,UAAW5G,KATb,WAUE6G,QAAS7G,KAAK8G,UAXlB,WC7YG,SAASC,a,OACPC,SAAWA,QAAXA,KAA0BA,aCKnC,MAAMC,QAAU,CAAC,EAAG,EAApB,GACMC,QAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAA3D,GAEO,MAAMC,IAKX1M,YAAY2M,OAAD,Y,yJACT,c,KACA,Q,KACA,YAGFC,gBAAgB9F,O,OACP1C,wBAAcmB,KAAdnB,OAAP,OAIFyI,kBAAkBC,gBAAD,a,MACTC,EAAI3I,+BAAV,iBACM4I,OAAS5I,+BAAsBmB,KAArC,K,GAEA,IAAIyH,O,OACF,K,MAGI/U,GAAK8U,EAAI3I,+BAAsBmB,KAA3B,SAAV,O,OACgBnB,mBAAS,CAAC,EAAG,EAAbA,GAAoBmB,KAApBnB,OAAiCA,6BAAoBmB,KAApBnB,IAAjD,KAMG,SAAS6I,gBAAgBC,QAAuB,mDAA2B/S,S,MAC1EgT,iBAAmBD,OAAzB,gBACME,WAAaF,OAAnB,UAEMG,GAAK3I,iDAAX,YACM4I,MAAQ5I,8BAAd,IAEM6I,OAAU,EAAD,cAAf,EACMC,QAAW,EAAF,eARsF,EAU/FC,SAAWrJ,6BAAmB,CAAC,EAAG,EAAvBA,GAA8B,CAACmJ,OAAQC,OAAvCpJ,GAVoF,OAa/FsJ,UAAYtJ,6BAAmB,CAAC,EAAG,EAAvBA,GAA8B,CAAC,EAAG,EAAlCA,GAAyCM,8BAA3D,aACMiJ,OAASvJ,yBAAe,CAAC,EAAG,EAAnBA,GAA0BA,yCAAzC,Y,OAEO,IAAIsI,IAAIgB,UAAWC,OAA1B,U,gBCnDF,0BAAetW,kCAAf,G,mFCUsC,CAAC,UAAW,YAAa,cAAe,cAAvE,iBAyBQ,MAAMuW,gBAAN,iBAIb5N,YAAYlJ,O,MAAiB,Q,mDAI3B,eAAIwV,e,KAEF,sBAA8BuB,YACxBA,wBAA0BtI,KAAKzO,MAAnC,aACE0S,oFAEF,IAKNW,oB,MACQvL,QAAU2G,KAAhB,QACA,UAGA3G,qBAAsB2G,KAAKzO,MAA3B8H,a,KACA,kBAGFkP,qB,KACE,iBAGFvD,uB,MACQ3L,QAAU2G,KAAhB,QACA,SAGA3G,wBAGFmP,iB,MACQnP,QAAU2G,KAAhB,Q,IACA,Q,aAIM,mEAA2BvO,sBAAyBuO,KAA1D,MACMpO,SAAWoO,KAAKzO,MAAMK,UAAYoO,KAAKzO,MAA7C,UACA,MAAIK,UAGJyH,yBAAyB,CACvBoP,SADuB,qEAKvBhX,4CAIJiX,iBAAiB,QAAD,sB,MAMRC,aAAe3I,KAAKzO,MAA1B,gBACKoX,cAAiBC,QAAtB,QAGAD,aAAanG,EAAG,SAAOoG,kBAGzB1C,S,OAEI,wBAAC2C,sBAAD,cACI/U,MACA,M,KACE,aAEF,Q,qDAhFWuU,sBAEE,WC1BR,MAAMS,sB,8EAAsB,K,wDAEQ,IAFR,M,uDAAA,I,qEAAA,K,oDAMtB,CAACxV,QAAD,gB,GACbgD,MAAJ,E,MACQ,IAAIoB,MAAV,0B,MAGIqR,KArBSC,MAqByBhJ,KAAD,oBApBlC,IAAIrE,MAoBT,OApBuBsN,KAAK,GAAGC,IAAI,CAACC,EAAGpQ,QAAUiQ,MAAnD,QADF,IAAmBA,M,KAsBf,qBAA2BI,sBANuD,EAS9E9S,MAAJ,GACEyS,YAAY,CAACM,GAAItQ,S,KACf,8C,IAKC,MAAL,U,KACE,uC,YAEF,gCAnBkF,SAsBnEgQ,QAASM,IAAO/L,SAA/B,Q,6DAI2BgM,iBACpB,CACLC,OAAQvJ,KAAKwJ,4BADR,gBAELC,cAAezJ,KAAK0J,kCAAkCJ,oB,uDAInCC,QACdvJ,KAAK2J,qBAAqBC,IAAjC,UCnDW,SAASC,aAAa/P,I,IAE/BgQ,SAF+E,E,MAI7EC,UAAN,G,SAEA,kB,GACE,QAAa,C,MACLC,cCRL,W,IACL,QACA,O,MACMC,QAAe,IAAIC,QAAQ,CAACC,IAAKC,OACrCC,YACAC,a,OAEFL,wBACAA,sBACA,QDD0BM,G,OACtBR,eAAe,WAAQE,QAASD,gBAChC,c,gBAKJ,eACEF,W,MAEMG,QAAUnQ,MAAA,cAAoB,K,GAClCgQ,WACAU,+BACIT,UAAJ,OAAsB,C,MACZE,QAAF,YAAwBQ,KAAMC,UAAaX,UAAjD,QACAf,wBACSjP,QAAW4Q,oBADpB3B,eAEU4B,OAAUD,mBAFpB3B,W,OAKJwB,gCAEA,QAlBOxB,IAAP,M,OAqBF,SEyBF,SAAS6B,QAAT,U,MACQ5O,IAAM6O,IAAZ,M,MACsB,mBAAR7O,IAAqBA,IAAMhH,KAAzC,KAOK,MAAM8V,iBAqBXtQ,aAAY,4GAAiDuQ,uB,6CApB3B,IAAItX,M,6CACe,IAAIuX,M,8CACN,IAAIA,M,kGAElB,IAAIA,M,0DACO,IAAInC,wB,8DAIhDoC,I,sDAEiD,K,4CACL,K,2NAIlB,CAAC,EAAG,EAAG,EAAG,K,uGAmG9B,CAACC,QAAD,W,IACHnL,KAAL,gB,aAIM,mBAASpL,QAAWoL,KAA1B,U,OACO0H,gBAAgB1H,KAAKoL,gBAAN,OAA8B,CAClD7I,QADkD,QAElDD,QAFkD,oBAIlD1N,mB,2CAwCM,UACJsW,IAAclL,KAAlB,S,KACE,OAAc8F,sBAAsB,IAAM9F,KAA1C,a,8CAIS6J,aACX,CAAC,QAAD,2D,IAMO7J,KAAL,gB,OACSkK,eAAe,IAAIxS,MAA1B,kC,MAEI+S,KAAO,CAACU,QAASE,QAASC,0BAAhC,uBAEMC,qBAAuBvL,KAA7B,sB,GACA,qBAA0B,C,IACpBwL,yBAAaD,qBAAD,UAAhB,MAAwD,C,MAGhDxR,OAASwR,gCAAgC,EAAEE,iBAAF,WAAiC,EAAC,EAAD,6CAAhF,U,OAIOvB,gBAAP,Q,KAEF,6B,MAGI,U,OAAA,eAAgBwB,MAAS1L,KAA/B,iBACM,mBAASpL,QAAWoL,KAA1B,UAEMtN,EAvB+C,QAyB/CC,EAAIiC,OAzB2C,Q,OA6BrD8W,YAAYxa,WAAZwa,OAA+Bxa,WAA/Bwa,SAEO,IAAIxB,QAASG,UAElBpV,KAAK,CAAE0W,YAAaD,MAApBzW,CAA4B,KAE1BA,WAAW,CAAEyG,MAAO4B,SAAT,GAAsBnI,MAAO,I,IACpCyW,gBAAJ,E,MACMC,gBAAN,GACMC,wBAAN,G,IACIC,QAAJ,EAEApE,eAAY3H,KAAK4C,YAAjB+E,MAAoC,K,EAK/B,C,GACGoE,SAAJ,sBAAsC,CAEpC9H,cACG,OAAM+H,4H,SAIXD,UACA9W,WAAW,CAAEyG,MAAO4B,SAAT,GAAsBnI,MAAO,I,KACxC,cAVC,iBAiBGzC,EAAIxB,WAAJwB,QAAyBC,EAAIzB,WAA7BwB,SAAmDA,GAAnDA,GAA6DC,GAAjE,EAAyE,C,MACjEsZ,MAAQ,IAAIzX,WADqD,GAIvES,UAAU,SAGRb,MAHQ,EAIRQ,OAJQ,EAKRH,KAAMwX,QAGRL,gBAAkBrO,eAAlBqO,O,MACMH,iBAAmBzL,KAAKkM,uBAAuBC,0BAbkB,iB,GAiBnEP,oBAAJ,kBACE3H,cACG,wCAAuC2H,qGAM1CC,qBACE,EAAC,cAAUpC,+BACTF,SAAWkC,iBAAXlC,QAAsCE,gBAAkBgC,iBAH9D,eAKE,CACAxH,+H,SAOE2H,mBAAuBH,iBAA3B,OAAoD,C,MAC5CnY,QAAU0M,KAAKkM,uBAAuBE,oBAAoBX,iBAAhE,QACAI,uCACA,SACEC,6BAA6B,CAACL,iBAA9BK,kBAMCF,qBAhET,2B,KAkEA,sBAA6B,CAC3BS,UAD2B,KAE3BtS,OAAQ+R,yBAEVzB,2C,8CAOG,CAACrU,SAAD,mBACX,W,KACE,uBAA8B,IAA9B,uBAGgB2F,WAAWqE,KAAKsM,WAAhB3Q,eAA0C,CAAC/C,EAAGtH,KAAOsH,cAAD,IAAuBtH,cAA7F,IACAib,QAAmBC,Y,MACX,iFAAmC/a,sBAAzC,U,IACA,S,OACSwS,eAAiBjO,SAAW,SAAW,IAAxB,iCAAtB,W,MAEI8U,IAAM9K,KAAKyM,UAAU7C,IAA3B,a,IACA,I,OACS3F,+CAAgDwE,SAAWA,qBAAH,YAA/D,W,GAGEzS,UAAJ,qBAAsC,C,MAI9B0W,YAAcjb,qBAAqBG,SAHM,WACtCoO,KAAKkM,uBAAuBS,iBAAiBlE,YAApD,MAEqEoD,iBAAvE,IACA,aACEf,IAAI4B,aAAJ5B,QAEG,UACLA,IAAIlZ,UAAJkZ,Q,gDAKU7V,OAGdA,YACAA,WAAW,CACTyG,MAAOsE,KADE,sBAET7K,MAAO,M,KA1TT,oB,KACA,4C,KACA,YAAmB,IAAIyK,YAAaY,cAClC,oBACEwK,iC,KAGA,SALJ,aAUF4B,WAAWC,Q,GACL7M,KAAJ,gB,MACQ,IAAItI,MAAV,iC,MAGIzC,KAAO+K,KAAK8M,qBAChBC,iBAAW,eAETC,WAAY,CAAC,yBAAD,6CAFH,4BAQTC,QAA0B,eAAjBlG,gB,KAIb,kBAAwBmG,oB,MAChBC,gBAAkBtC,QAAQ5V,KAAhC,mB,KACA,mD,MAIImY,sBAAwB,IADfvC,QAAQ5V,KAAvB,SAGMoY,IAAMpY,KAAA,YAAiB,CAC3Bb,MAAOlD,WAAW8O,KAAKsN,UADI,OAE3B1Y,OAAQ1D,WAAW8O,KAAKsN,UAAhBpc,U,KAGV,gBAAuB,CACrBwa,KADqB,IAErB/D,OAFqB,sBAGrB1S,WAIJsY,UACMvN,KAAJ,iB,KACE,+BAEEA,KAAJ,QACEiG,qBAAqBjG,KAArBiG,QAKJuH,QAAQ/E,SAAD,S,MACC,gBAAE2C,iBADwD,KAG3DA,kBAAmBpL,KAAKyN,UAAUtJ,IAAvC,W,KAGA,cANgE,S,KAShE,sBAA4B0G,QAAQO,gBAAD,KAAnC,WAIFsC,UAAUjF,U,KACR,4BAGFkF,wBAAwBC,S,KACtB,4BAGFC,iBAAiBrB,W,KACf,eAAoBA,UAApB,oBAGFsB,sBAAsBF,S,KACpB,iCAGFG,aAAaT,W,KACX,oBAiBFU,Q,SAEI,SACA,MAAOpD,O,GAGP,wBAAIA,c,MAGF,MAFA3G,qBAONgK,S,MACQjF,MAAQkF,KAAd,M,QACA,2BAAiCpD,KAASA,gBAA1C,IACK9K,KAAL,gB,YAGA,sBANO,K,MAOD,U,OAAQ2H,WAAW3H,KAAzB,gB,KACA,mBACA2H,eAAY3H,KAAK4C,YAAjB+E,MAAoC,K,MAC5BjV,EAAIwb,KAAV,M,KACA,a,KACA,eAAsBA,WAAtB,I,KAGF,oBAA0BC,YACxBA,c,KAEF,gBAAuBD,WAAvB,M,KACA,cAkLFpB,oBAAoB7X,M,MAClB,eAAI8R,aACF,KAEK,IAAIqH,MAAMnZ,KAAM,CACrBoZ,MAAO,CAAC9O,OAAQ+O,QAAS7D,Q,MACjBnX,QAAUiM,UAAhB,M,MACA,iBAAWjM,QAAP,O,KACF,iCAEF,YCjZR,MAAMib,yBAA2B,CAAC,EAAG,EAAG,EAAxC,GAqCA,SAASC,gCAAgC,QAAzC,e,MAMQ/D,KAAO,SAAO7B,iB,IAGlB/I,QAAQ2C,EAAR3C,MACA,MAAO4O,KACPxK,iDAMG,MAAMyK,sBAAsB,OAA5B,UAYLjU,YAAYlJ,O,MACV,Q,4CAZ+CO,wB,mGAEN,O,kDAiGzB0Q,I,KAChB,0C,gDAGcA,I,KACd,cAAqB,CAAE9P,EAAG8P,EAAL,QAAgB7P,EAAG6P,EAAEF,S,KAC1C,wC,gDAGcE,I,KACd,wC,8CAGYA,I,KACZ,mC,MACM,cAAEmM,eAAR,K,GACA,cAAmB,C,MACXC,OAASpM,UAAYmM,cAA3B,EACME,OAASrM,UAAYmM,cAA3B,EACiBzd,UAAU0d,cAAkBC,OAA7C,QA5KC,G,KA8KC,iC,KAEF,uB,uDAIkB,CAACrM,EAAD,kB,MACd,iBAAEsM,kBAAqB9O,KAA7B,MACM+O,iBAAmB/O,KAAKzO,MAA9B,gB,KAEMiR,oBAAoBsC,OAAtB,cAAJ,IAAiDtC,S,aAIzC7B,IAAF,UAAkBjG,KAAMsU,YAAexM,SAA7C,yBACM,wBAAWF,SAAjB,EAEM6I,QAAU5I,QAAhB,WACM8I,QAAU/I,QAAhB,UACM2M,IAAMH,iCAAZ,S,IACA,I,aAOM,2DAAqBI,wBAAyBC,kBAAoB,GAAK,CAAC,iBAAmBnP,KAAjG,M,GACIkP,gCAAJ,gB,OACE,iBACSV,gCAAgC,GAAIS,IAAKzM,EAAhD,uB,EAMHA,EAAD,UACAsM,8CACkC9O,KAAKzO,MADvCud,0BACwE9O,KAAKzO,MAD7Eud,4BAEShD,0B,MACCsD,qBC3OC,gB,MACPC,eAAiB,IAAvB,I,OACA9c,cAAc,EAAE+c,KAAF,Q,MACNC,cAAgBF,yBAAtB,GACAE,yBACKF,mBAAL,MACEA,wCAGJ,eDkO+EG,CAAzE,yB,IACK,MAAOlc,QAAZ,eAAqC8b,qBAArC,U,GACE9b,2DACIkP,EAAJ,uB,SAIEuM,mBAAqBvM,EAAzB,uBAAmD,CAEjDgM,gCADoB1C,4BAA4B,sBAAhD,kBAC6CmD,IAAKzM,EAAlDgM,qBAZNM,MAeUtM,IACNyB,qB,MAhKE,kLASJkL,kBATI,mBAUJD,gDAVF,M,GAYA,qBACE,aACEjL,2MAIEzD,aAAJ,oBACEyD,iHAGF,aACEA,0NAMJ,mBAAuB,C,GACrB,wB,MACQ,IAAIvM,MAAV,kHAIAuM,mH,KAMJ,MAAa,CACX6K,iBAAkB,IAAI/D,iBAAiB,CACrCuC,UAAW,mCAAsB5S,WACjC+U,sBAAuBvY,iBAFc,yBAIrCsJ,YAAajP,mBAAqBA,MAArBA,oBAJwB,qBAKrCyZ,oBAAqBzZ,gCAA6B2Z,K,iCAKxB,uCAAsBxQ,OAAmB,iBAAEoU,mB,OACzEA,8BAA8B,mCAAsBpU,YACpD,KAGFkK,oB,IACO5E,KAAK0P,QAAV,Q,OACSzL,aAAP,0B,MAEI,iBAAE6K,kBAAqB9O,KAA7B,MACA8O,4BAA4B9O,KAAK0P,QALf,S,KAOlB,SAPkB,IAUlBZ,yBAGF9J,uBACMhF,KAAJ,OACEiG,qBAAqBjG,KAArBiG,O,KAEF,iCAGFsC,qB,MACQ,iBAAEuG,kBAAqB9O,KADV,MAGfA,KAAKzO,MAAT,aACEud,4CAA4C9O,KAAKzO,MAAjDud,aAEFA,2BAiFFa,e,MACQ,iBAAEb,kBAAqB9O,KAA7B,MACMoL,gBAAkB0D,iBAAxB,gB,GAEI/H,8BAAJ,gB,OACE,K,MAEI,KAAE9R,MAAR,gBACM2a,IAAM9K,mBAAZ,QAWM,qCAAY+K,oBAAlB,iBACMpb,MAAOqb,sBAAS,SAAYtU,KAAWA,IAAF,O,GAC3C/G,mBAAqBob,0BAA0B,CAACE,MAAOjF,MAAQiF,MAAQjF,UAAlD+E,MAArBpb,GACA,MACEA,mBAAyBmb,mBAAqBA,IAAtB,gBAAD,gBAAF,KAGvBjS,oBAAoBqS,mBAAO/a,KAAD,MAAcuG,KAAuB,iBAARA,KAAvDmC,IAA2EnC,MACvEvG,uBAAJ,I,MACQ,IAAIyC,MAAV,qC,MAGIuY,KAAOtS,OAAA,eAAuBoC,MAEhCvO,8BAAIuO,IAAJvO,IAAc4U,MAAO,CAAElP,gBAAF,cAAkCgZ,OAAQ,UAC7D1e,8BAAI4U,MAAO,CAAE+J,aAAF,GAAoBD,OAAQ,SADzC1e,MAEEA,8BAAI4U,MAAO,CAAEhS,MAAF,OAAiB8b,OAAQ,SAAWzb,KAHnD,Q,OAQAjD,iCAAO4U,MA/BK,CACZgK,OADY,EAEZC,MAFY,GAGZjc,MAHY,IAIZoC,SAJY,WAKZU,gBALY,qBAMZwE,MANY,QAOZ4U,WAPY,YAQZ1a,SAAU,MAwBRpE,qCAFJ,OAOF0U,S,MACQ,wIAAmE8E,qBAAwBhL,KAAjG,OACM,iBAAE8O,kBAAqB9O,KAFtB,MAKDuQ,cAAgB/P,cAAtB,oBACMgQ,YACJ,8CACE,kCACEpK,MAAO,2BAAiBqK,SAAjB,OAAmCC,UAAW,QACrDtc,MAFF,MAGEQ,OAHF,OAIE0R,IAAKtG,KAJP,QAKEyG,UAAWzG,KALb,WAMEwG,YAAaxG,KANf,aAOE2Q,cAAe3Q,KAPjB,eAQE4Q,YAAa5Q,KAAK6Q,eAEnBC,WAAa9Q,KAZlB,gB,OAiBExO,+BAAK4U,OAAK,2BAAI5P,SAAJ,WAA0Bua,SAAU,UAApC,QAEPR,cAAgB,YAGf,wCAAgB3N,YAAakM,iBAA7B,YAA2DlL,OAA3D,OAA2EF,UAAWA,WAL1FlS,YASGsd,mCACC,wBAACjG,sBAAD,UAAgCpP,MAAOqV,kBACpC9O,KAAKzO,MAZd,a,4BAtPSmd,6BAKW,CACpB1C,sBA1DJ,IA2DI9U,gBAFoB,yBAGpBwM,WAHoB,EAIpB0C,MAAO,KAmQX,MAAM4K,UAAazf,QACjB,+DACG,EAAC,oCAAuBoP,YAAUnP,6DAAe4C,MAAf5C,MAA6BoD,OAA7BpD,OAA6CkJ,KAA7ClJ,KAAyDmP,IAAKA,KAFrG,S,4BAMAqQ,kCE3VA,MAAMC,MAIJxW,e,oGACE,IAAWyW,OAAX,iB,KACA,IAAWA,OAAX,iBAGFC,OAAO1X,O,KACL,IAAWvI,SAAS8O,KAAT9O,IAAX,O,KACA,IAAWA,SAAS8O,KAAT9O,IAAX,Q,eAKW,MAKbuJ,e,8IACE,EAAS,IAAT,M,KACA,EAAS,IAAT,M,KACA,EAAS,IAAT,MAIF0W,OAAO5P,O,KACL,SAAcA,MAAd,G,KACA,SAAcA,MAAd,G,KACA,SAAcA,MAAd,KxB9BJ,MAAM6P,QAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAtC,GyBCA,iBAAe,CAACC,UAAD,WAA0Cpc,O,MACjDqc,YAAc9e,kBAAkB,GAAG+e,UAAzC,Y,GAEIC,cAAeC,MAASA,UAAWhf,GAAMA,KAASA,GAAK,Q,MACnD,IAAIiF,MAAV,0C,MAEIga,cAAgBC,iBAAiB,GAAGJ,UAA1C,WAEMK,KAAO3c,KAAA,OAAY,CAEvBkI,MAFuB,UAGvB1I,KAAM,KAEFod,UAAY3U,YAAlB,M,OAEOT,SAAS,CACdE,KAAO,8XAiBPmV,KAAO,oHAOPvb,WAAY,CACVgL,MADU,YAEV7F,MAAO,CAACrC,QAAS9H,QACRsgB,UAAUtgB,MAAD,MAAcA,MAAd,OAA4BA,aAAeA,aAAfA,OAA5C,GAGF0O,OAAQ,CAAC5G,QAAS9H,S,MACVW,OAASC,cAAcZ,MAAdY,QAA8BZ,iBAA9BY,aAA8DZ,cAAgB,CAAC,EAAG,EAAjG,G,MACO,CACLoF,OAAQib,KAAK,CACXzU,MADW,UAEX1I,KAAMvC,SAER0E,QAAS,KAKf4a,SA3Cc,cA6Cdrc,MA7Cc,aA8CdI,MA9Cc,aAgDdE,SAAU,CACRtC,MAAO,CAACkG,QAAS9H,QAAWY,cAAcZ,MAAdY,OAA6B8I,YAAY1J,MAAzCY,OAAwDZ,MAAM4B,OAG5FmD,MAAOob,cApDO,OAsDdrb,UAAW,CAACgD,QAAS9H,QAAWA,aAAeA,aAAfA,OAAqC,KC9D1D2I,eAAeI,SAASyX,a,MAC/Btd,KAAO,IAAIud,SAAjB,a,IACI/R,OAAJ,E,SAEA,a,MACQxG,MAAQhF,uBAAd,G,OACAwL,UACA,M,MAIIgS,MAAQC,a,GACd,aAAID,M,MACI,IAAIva,MAAO,2BAA0Bua,oB,MAIvCE,QAAUD,a,GAChB,IAAIC,Q,MACI,IAAIza,MAAO,qBAAoBya,S,MAIjCC,YAAcF,a,GAChBE,cAAgB3d,KAApB,W,MACQ,IAAIiD,MAAO,UAAS0a,6CAA6C3d,KAAK4d,c,SAG9E,0B,EACK,C,MACKC,YAAcJ,a,GACFA,eAClB,KAAwB,C,MAChBK,UAAY,IAAIP,SAASvd,KAAb,cAAlB,a,OACAwL,oBACA,UAEFA,0BACOA,OATT,a,MAYIuS,SAAWC,oBAAjB,Y,IACA,S,MACQ,IAAI/a,MAAV,uB,MAGIgb,KAAOC,YAAW,IAAIC,aAAcC,OAA1C,WAEMC,OAASL,oBAAf,S,IACA,O,MACS,CAAEC,W,QAGX,IAAIA,oB,MACI,IAAIhb,MAAV,8B,MAIIqb,UAAYL,KAAA,cAAoBM,e,IAAiB,wB,OAG7CA,aAAR,e,KACOC,sBAAL,KAAiCC,oB,WAC5BD,sBAAL,cAA0CC,qB,WACrCD,sBAAL,MAAkCC,qB,WAC7BD,sBAAL,eAA2CC,sB,WACtCD,sBAAL,aAAyCC,sB,WACpCD,sBAAL,MAAkCC,uB,oBAE1B,IAAIxb,MAAO,8BAA6Bsb,aAAaG,e,OAIvDH,aAAR,M,IACE,SAAeI,gB,UACf,OAAaA,gB,UACb,OAAaA,gB,UACb,O,IACA,OAAaA,gB,UACb,OAAaA,gB,UACb,OAAaA,iB,oBAEL,IAAI1b,MAAO,qBAAoBsb,aAAaK,M,MAEhDC,WAAaZ,iBAAiBM,aAApC,Y,GACA,IAAIM,kB,MACI,IAAI5b,MAAV,yC,GAEE4b,sBAAwBJ,UAAxBI,mBAAJ,E,MACQ,IAAI5b,MAAV,kC,OAEK,IAAIwb,UACTJ,OADK,OAELA,mBAAqBQ,uBAArBR,IAAoDE,yBAF/C,GAGLA,mBAHF,iBAQIO,OACJb,KAAA,cACOxI,QAAA,IACLwI,KAAA,WAAiBc,U,MACTF,WAAaZ,iBAAiBc,QAApC,YACM/e,KAAO,IAAIud,SAASc,OAAb,OAA4BA,kBAAoBQ,WAAhD,WAAuEA,WAApF,Y,OACOG,KAAA,kBAAuB,IAAIC,KAAK,CAAT,MAAiB,CAAEL,KAAMG,QAAQG,e,MAI9D,+BAAmBJ,eCvH5B,SAASK,+CAAT,sCAIEC,uBAJF,G,MAOQC,oBAAsBD,sBAAwBE,KAAH,eAAjD,K,GACIlI,qBAAqB,EAAGtC,iBAAaA,SAAzC,qB,OACE,K,MAEIyK,YAAa,EAAH,2BAAhB,OACOC,aAAetH,iBAAiBmH,oBAAvC,G,OACAE,6BACIA,mBAAqBA,WAArBA,QAA0CA,kBAA9C,SACEA,kBAAoB,IAAIrY,MAAMqY,kBAAV,aAApBA,cAEF,W,kCAGF,MAAaE,iCAAmC,0CAK1CvY,cAAJ,OACSpK,UACCwiB,MAASH,+CAA+CG,KAAMpH,iBAD/Dpb,yBAAP,SAIKqiB,+CAA+CriB,MAAOob,iBAA7D,iB,0EAKF,MAAatZ,uCAAyC,0CAKhDsI,cAAJ,OACSpK,UACCwiB,MAASH,+CAA+CG,KAAMpH,iBAAkBd,iBADjFta,WAAP,SAIKqiB,+CAA+CriB,MAAOob,iBAAkBd,iBAA/E,GAGF,SAASsI,4CAAT,6D,MAMQC,uBAAyBvI,gBAAA,OAAuB,EAAC,cAAUpC,+BAAoBF,SAArF,MACM8K,gBAAkBD,uBAAA,IACjB,EAAC,cAAU3K,+BADM,sBAEbA,eAFX,iBAEoCA,eAC9BuK,YAAa,EAAH,2BAAhB,MACMM,cAAiBN,mBAAqB9iB,UAAU8iB,yBAAhC,wBANlB,EAQEO,SAAW5H,iBAAiBoH,KAAlC,eACMS,WAAaD,SATf,G,GAWAP,mBAAqBA,kBAAzB,OAAmD,C,MAC3CS,UAAY,IAAI9Y,MAAMqY,kBAAV,mBAA+C,IAAjE,Y,IACK,IAAIvhB,EAAT,EAAgBA,EAAhB,cAAmCA,I,IAC5B,IAAIiC,EAAT,EAAgBA,EAAhB,sBAA2CA,IAAK,C,MACxCggB,IAAMjiB,wBAAZ,EACIiiB,IAAMD,UAAV,SACEA,eAAiBF,SAAjBE,I,GAINT,4BACIK,gBAAJ,OACEL,kBAAoBA,yBAClB,CAAC7K,EAAGpQ,SAAWsb,yBAAyBnjB,WAAW6H,MADrDib,yBAGAA,kBAAoBA,yBAClB,CAAC7K,EAAGpQ,SAAWsb,yBAAyBnjB,WAAW6H,MADrDib,8BAGK,GAAII,uBAAJ,O,OAEL,U,GAGFJ,4BACII,uBAAJ,O,OACE,K,OAGJ,W,sFAGF,MAAajb,oCAAuCwb,uBAAkC,0CAKhFhZ,cAAJ,OACSpK,UACCwiB,MACJI,4CAA4CJ,KAAMpH,iBAAkBd,gBAFjEta,+BAAP,SAMK4iB,4CAA4C5iB,MAAOob,iBAAkBd,gBAA5E,uBCtGK,SAAS+I,uBAAuBC,YAAhC,M,MAKC3iB,OAAS,CAHG,CAAC,EAAG,EAAtB,IACkB,CAAC,EAAG,GAAtB,KAMM4iB,UAAN,GACMC,YAAN,G,IAEK,IAAItiB,EAAT,EAAgBA,EAAhB,YAAiCA,IAAK,C,MAC9BuiB,MAAS,EAAI9jB,KAAJ,GAAD,EAAd,YACMwB,EAAI,GAAMxB,SAAhB,OACMyB,EAAI,GAAMzB,SAAhB,OACAgB,YAAY,CAACQ,EAAGC,EAAhBT,IAAyB,CAACQ,EAAGC,GAA7BT,K,MAEM+iB,aAAe/iB,cAArB,EACMgjB,WAAaC,KAAO,EAAI1iB,oBAA4BP,OAA1D,OACMkjB,cAAgB3iB,oBAA4BP,cAAlD,E,GACA4iB,eAAe,CAACG,aAAcC,WAA9BJ,gBACAC,iBAAiB,CAACE,aAAcG,cAAhCL,KACA,KAAW,C,MACHM,UAAYnjB,cAAlB,EACA4iB,eAAe,CAACO,UAAWJ,aAA3BH,aACAC,iBAAiB,CAACM,UAAWH,WAA7BH,K,MAGG,mCAAqBA,yB,gFAG9B,MAAM,8CAAqBA,aAAgBH,uBAAuB,IAAlE,GAEMU,UAAYC,aAAarjB,OAAQ4iB,iBAAvC,cAEMrjB,qBAAuB0H,oCAA7B,GACe,SAASqc,UAAUjkB,O,OACzBC,uDAASC,qBAAsBA,sBAA/BD,OAAgEE,YAAa4jB,aCrCtF,M,OAAM,S,UAAA,Y,YAAqBP,eAAgBH,uBAAuB,IAAlE,GAEMa,MAAQF,aAAa,SAAQT,mBAAnC,gBAEMrjB,uBAAuB0H,oCAA7B,GACe,SAASuc,MAAMnkB,O,OACrBC,uDAASC,qBAAsBA,wBAA/BD,OAAgEE,YAAa+jB,SCHtF,MAAM/X,gBAAgBC,cAAc,CAAC,EAAG,EAAxC,IA0FA,cAAegY,gBAnFf,SAAgBpkB,O,MACRqkB,aAAcC,iBAAI,MAAxB,YACMP,UAAN,GACMG,MAAN,G,IACK,MAAL,UAAqBlkB,MAArB,SAAqC,C,IACnC,YACA,YACA,YACA,WACA,WACA,WAEA,aACA,YACA,I,GACIgH,eAAJ,IAAqBA,qBAA4B,C,MACxCyQ,MAAO8M,KAAOvd,OAArB,OACAwd,aAAe,CAAC/M,MAAD,EAAUA,MAAV,EAAmBA,MAAlC+M,G,MACMC,YAAc,CAACF,IAAD,EAAQA,IAAR,EAAeA,IAAnC,GACMG,OAASpX,qCAAf,aAEA2F,IAAM3F,wBAAc,CAAC,EAAG,EAAlBA,eAAN2F,cACA3F,kCACA9B,YAAcgC,0BAAgB,CAAC,EAAG,EAAG,EAAvBA,mBAAdhC,KAEAmZ,WAAaC,WAAa5d,aAA1B2d,EACAE,WAAa7d,gBAAb6d,GAA+BH,OAC/BI,YAAcC,YAAc/d,aAA5B8d,EACAE,YAAcN,OAAdM,gBAEAR,aAAe9a,YAAY1C,YAA3Bwd,UACAhZ,YAAc7B,kBAAkB3C,YAAhCwE,aACAgC,+CAAuC7N,QAAvC6N,GACAyF,IAAM3F,6BAAmB,CAAC,EAAG,EAAvBA,mBAAN2F,aAEA6R,YAAc9d,gBAAd8d,EACAC,YAAc/d,gBAAd+d,EACAJ,WAAa,EAAbA,YACAC,WAAa,EATR,YAaLC,WAAa,KAAQ7d,gBAArB6d,GACAG,YAAc,KAAQhe,gBAAtBge,G,MAGIC,cAAgB3X,2BAAiB,CAAC,EAAG,EAArBA,oBAA+C0X,YAArE,GACME,aAAe5X,2BAAiB,CAAC,EAAG,EAArBA,oBAA+C0X,YAAcH,WAAlF,GAEAd,eAAe,CAEbliB,eAFa,OAGbD,MAAO,CAAET,EAAF,YAAkBC,EAAlB,YAAkCC,EAAG2jB,aAC5C7a,MAAOnD,OAJM,MAKbnG,KAAM,CACJoE,SAAU4E,YADN,eAEJ2B,YAAa1B,kBAAkB0B,gBAGnC0Y,WAAW,CAETriB,eAFS,OAGTD,MAAO,CAAET,EAAF,WAAiBC,EAAjB,WAAgCC,EAAGwjB,YAC1C1a,MAAOnD,OAJE,MAKTnG,KAAM,CACJoE,SAAU4E,YADN,cAEJ2B,YAAa1B,kBAAkB0B,gB,OAMnCjL,kDACE,8DAAWL,qBAAsB4B,wCAAjC,aADFvB,WAIE,0DAAOL,qBAAsB4B,wCAA7B,aALJ,W,wBC5BF,MAAMqjB,YAAclkB,aAApB,kBACMmkB,YAAc,EAApB,YACMC,yBAA2B,CAAC,EAAG,EAAG,EAAxC,IAIMC,YAAc,CAAEC,GAAF,EAASC,GAAT,EAAgBC,GAAhB,EAAuBC,GAAI,GACzCC,sBAAwBvZ,yBAA9B,OAEMhB,KAAQ,ijBA0BZgB,6BACMwZ,GAAO,qBAAoBA,OAAON,YAAYM,SADpDxZ,moIAmIF,MAAMyZ,MAASniB,O,MAEPoiB,gBAAkBpiB,KAAA,OAAY,CAClCoe,KADkC,SAElClW,MAFkC,SAGlC1I,KAAM,CAACoiB,YAAD,GAAiBA,YAAjB,GAAiCA,YAAjC,GAAiDA,YAAjD,MAEFS,iBAAmBriB,KAAA,OAAY,CACnCoe,KADmC,QAEnClW,MAFmC,SAGnC1I,KAAM,CACJ,CAAC,EAAG,EAAG,EADH,G,CAEJ,MAFI,G,CAGJ,MAHI,G,CAIJ,MAJI,MASF8iB,0BAA4BtiB,KAAA,OAAY,CAC5Coe,KAD4C,QAE5ClW,MAF4C,SAG5C1I,MAAM+iB,oBAAQ,IAAI7b,MAAMub,uBAAuBjO,KAAK,CAAC,EAAG,EAA3C,OAETwO,0BAA4BxiB,KAAA,OAAY,CAC5Coe,KAD4C,QAE5ClW,MAF4C,SAI5C1I,MAAM+iB,oBAAQ,IAAI7b,MAAMub,uBAAuBjO,KAAK,CAAC,EAAG,EAAG,EAA9C,OAIT/L,eAAcjI,KAAA,OAAY,CAAEoe,KAAM,UAMlCqE,gBAAkBziB,KAAA,OAAY,CAAEoe,KAAM,UACtCsE,gBAAkB1iB,KAAA,OAAY,CAAEoe,KAAM,UAEtCuE,mBAAqB3iB,KAAA,OAAY,CAAEoe,KAAM,UACzCwE,mBAAqB5iB,KAAA,OAAY,CAAEoe,KAAM,UAEzC/f,QAAU2B,KACdwH,SAAS,gBA3DC,kGA8DRlH,MAHO,aAIPE,SAAU,CACRqiB,UAAW7iB,UADH,WAERiB,cAAejB,aAFP,iBAGRgB,eAAgBhB,aAHR,kBAIRqH,MAAOrH,UAJC,SAKR8iB,OAAQ9iB,UALA,UAMRa,eAAgBb,6BAElBsB,WAAY,CACVyhB,UADU,gBAEVC,OAAQ,CAAC5e,SAAS,oCAAsB6e,gBAAhC,CACNvhB,OAAQuhB,MAAQZ,iBADmC,eAEnDrX,OAFmD,EAGnDkY,OAAQ,GAACJ,4BAAD,GAH2C,YAInDnhB,QAASwhB,oBAA0B,IAErCC,OAAQ,CAAChf,SAAS,oCAAsB6e,gBAAhC,CACNvhB,OAAQuhB,MAAQZ,iBADmC,eAEnDrX,OAAQmY,oBAA0B,EAFiB,YAGnDD,OAAQ,GAACJ,4BAAD,GAH2C,YAInDnhB,QAASwhB,oBAA0B,IAErCE,UAAW,CAACjf,SAAW0e,kBAAZ,CACTphB,OADmC,gBAEnCsJ,OAFmC,EAGnCkY,QAASJ,OAAS,EAAV,GAH2B,YAInCnhB,QAAS,IAEX2hB,UAAW,CAAClf,SAAW0e,kBAAZ,CACTphB,OADmC,gBAEnCsJ,OAFmC,YAGnCkY,QAASJ,OAAS,EAAV,GAH2B,YAInCnhB,QAAS,IAEX4hB,UAAW,CAACnf,SAAW0e,kBAAZ,CACTphB,OADmC,gBAEnCsJ,OAAQ,EAF2B,YAGnCkY,QAASJ,OAAS,EAAV,GAH2B,YAInCnhB,QAAS,IAEX6hB,UAAW,CAACpf,SAAW0e,kBAAZ,CACTphB,OADmC,gBAEnCsJ,OAAQ,EAF2B,YAGnCkY,QAASJ,OAAS,EAAV,GAH2B,YAInCnhB,QAAS,IAEXU,aAAc,CAAC+B,SAAWqf,wCAAZ,CACZ/hB,OAAQ+hB,kBAAoBd,mBADqB,0BAEjDhhB,QAAS8hB,kBAAoB,EAAI,IAEnCC,aAAc,CAACtf,SAAWqf,wCAAZ,CACZ/hB,OAAQ+hB,kBAAoBb,mBADqB,0BAEjDjhB,QAAS8hB,kBAAoB,EAAI,KAGrCpiB,MA3DO,sBA4DPD,UAAWpB,UA5DJ,aA6DPO,UAAWP,0B,IAIX2jB,WAAa,IAAIpmB,aAArB,EAAkC0kB,uBAC9B2B,WAAa,IAAIrmB,aAArB,GACIsmB,gBAAJ,EACIC,cAAgB,IAAIvmB,aAAxB,GACIwmB,cAAgB,IAAIxmB,aAAxB,G,SA0DA,sB,OACSL,sBAAwB2J,WAAxB3J,QAAP,O,SA2DF,kB,MACQ,sBAASqD,UAAT,uBAA8BM,gBAAiB,GAArD,MACMmjB,eAAiB1nB,aAAvB,O,GAEI0nB,eAAJ,E,aAIMC,cAAgBD,kBAtP1B,SAAqBrgB,EAAGtH,G,MACf6nB,GAAIC,GAAIC,IAAMlnB,iBAAmB8I,YAAnB9I,GAArB,GACOmnB,GAAIC,GAAIC,IAAMrnB,iBAAmB8I,YAAnB9I,GAArB,E,OACOgnB,SAAaC,KAAbD,IAA0BE,KAAjC,GAmP8CI,CAAYloB,aAAD,GAAkBA,aAAa0nB,eAR7D,IAUnBS,aAAeR,eAAiB3nB,MAAtC,Q,SA9HF,kC,MACQooB,eAAiBznB,eAAiBwnB,YAAc,EAAtD,GACIZ,gBAAJ,iBACED,WAAa,IAAIrmB,aAAjBqmB,EAA8Bc,gBAC9Bb,gCAEF5mB,eAAe,CAACqP,MAAO9O,K,MACdC,EAAGC,EAAGC,GAAKT,qBAAuB8I,YAAvB9I,OAAlB,MACMynB,IAAM,EAAZ,EAAgBnnB,EAChBomB,WAAWe,IAAXf,KACAA,WAAWe,IAAXf,KACAA,WAAWe,IAAXf,O,MAMIgB,EAAN,EAAUF,eACV,eAGEd,wBAAyBgB,EAAzBhB,EAAgCgB,EAAhChB,GACAA,sBAAsBgB,EAAtBhB,QACSa,aAETb,wBAAyBgB,EAAzBhB,EAAgCgB,EAAhChB,GACAA,sBAAsBgB,EAAtBhB,SAGAA,6BACAA,sBAAsBgB,EAAtBhB,EAA6BgB,EAA7BhB,EAAoCgB,EAApChB,IAkGFiB,CAAevoB,MAAD,qBAAduoB,aACApC,gBAAgB,CAAEjjB,KAAF,WAAoB0I,MAAO,YAC3Cwa,gBAAgB,CAAEljB,KAAF,WAAoB0I,MAAO,Y,MAErCib,aAAe7mB,cAAgBA,aAArC,S,SAxEF,qC,GAME,WAAgB,CACVqnB,kBAAJ,EAAwB1B,wBACtB0B,WAAa,IAAIpmB,aAAjBomB,EAA8B1B,wB,MAE1B6C,gBAAkBre,OAAxB,0BACOse,0BAA4BC,cAAc,CAAjD,mBACO7oB,EAAGC,EAAGC,EAAGsH,GAAhB,yB,IACK,IAAIG,MAAT,EAAoBA,MAApB,sBAAmDA,QAAS,C,MACpDkH,OAAN,EAAelH,MACf6f,WAAW3Y,OAAX2Y,KACAA,WAAW3Y,OAAX2Y,KACAA,WAAW3Y,OAAX2Y,KACAA,WAAW3Y,OAAX2Y,WAEG,GAAI9c,OAAQ,C,MACXma,OAASyD,YAAc5d,cAAH,EAAuBA,OAAjD,OACI8c,kBAAJ,EAAwB3C,SACtB2C,WAAa,IAAIpmB,aAAjBomB,EAA8B3C,S,MAE1BiE,gBAAkBD,cAAxB,Q,IACK,IAAIlhB,MAAT,EAAoBA,MAAQmhB,gBAA5B,OAAoDnhB,QAAS,C,MACrDkH,OAAN,EAAelH,OACR3H,EAAGC,EAAGC,EAAGsH,GAAKshB,gBAArB,OACAtB,WAAW3Y,OAAX2Y,KACAA,WAAW3Y,OAAX2Y,KACAA,WAAW3Y,OAAX2Y,KACAA,WAAW3Y,OAAX2Y,K,GAGF,YAAiB,C,MACRxnB,EAAGC,EAAGC,EAAGsH,GAAKshB,gBAArB,GACMC,UAAYlE,OAAlB,EACA2C,WAAWuB,YAAXvB,KACAA,WAAWuB,YAAXvB,KACAA,WAAWuB,YAAXvB,KACAA,WAAWuB,YAAXvB,OAgCJwB,CAAe7oB,MAAD,MAAcA,MAAd,kBAAd6oB,aACAld,eAAY,CAAEzI,KAAF,WAAoB0I,MAAO,Y,MAEjC4a,OAAN,eAAeviB,UACT6kB,mBAAqBpB,gBAAkBS,YAAc,EAA3D,GACMrjB,UAAY0hB,OAASsC,mBAAH,EAA4BnpB,WAAWmpB,mBAtBtC,IAyBnB,MAAEC,OAAR,MACM5B,oBAAoB,OAAW4B,aAArC,E,GACI5B,mBAAJ,MAAgC,C,GAC1BriB,YAAcikB,MAAlB,O,YACErW,cAAe,YAAW5N,6BAA6BikB,MAAMrE,8C,SA/GnE,iBACM8C,qBAAJ,EAA2B1iB,YACzB0iB,cAAgB,IAAIvmB,aAApBumB,EAAiC1iB,WACjC2iB,cAAgB,IAAIxmB,aAApBwmB,EAAiC3iB,Y,IAE9B,IAAI0C,MAAT,EAAoBA,MAAQuhB,MAA5B,OAA0CvhB,QAAS,C,MAC3CwhB,eAAN,EAAuBxhB,MACjByhB,eAAN,EAAuBzhB,OACjB,kBAAYgE,YAAa3L,GAAMkpB,MAArC,OACMG,kBAAoB9e,iCAAqCV,YAA/D,UACA8d,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,GACAA,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,GACAA,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,G,MAEM2B,kBAAoB/e,mBAAuB,CAACvK,EAAD,EAAMA,EAAN,EAAWA,EAAX,EAAgBA,EAAjE,GACA4nB,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,GACAA,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,GACAA,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,GACAA,cAAcwB,eAAdxB,GAAoC0B,kBAApC1B,IAgGA2B,CAAetkB,UAAfskB,OACA/C,mBAAmB,CAAEnjB,KAAF,cAAuB0I,MAAO,YACjD0a,mBAAmB,CAAEpjB,KAAF,cAAuB0I,MAAO,YA3CtC,EAAC+a,MAAO0C,YACrB,MACE3lB,KAAK,CAAEE,MAAO,CAAEC,QAAQ,IAAxBH,WAEA2lB,YA0CF1U,CAAOgS,MAAO,KAEZ5kB,QACEqK,OAAA,gBAAyB,eAEvBnI,UAFuB,iBAGvB8G,MAAO4b,MAAQ,GAHQ,0EAOvBQ,uCAGJ,OACEplB,QACEqK,OAAA,gBAAyB,eAEvBnI,UAFuB,aAGvB8G,MAHuB,0EAOvBoc,yC,OAOFmC,UACFlf,cAAJ,SACEkf,4BAEAC,sBAKS,SAASC,MAAMxpB,O,OACrBC,uDAASC,qBAAsByiB,kCAA/B1iB,OAA4EE,YAAa0lB,SClhBlG,MAAMnc,cAAe+f,IAAD,CAClBtoB,EAAGsoB,EADoC,GAEvCroB,EAAGqoB,EAFoC,GAGvCpoB,EAAGooB,EAAE,KAIDtoB,EAAI,IAIJN,KAAO,CACX2K,YAAa,CAAErK,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBuI,EAAG,GACpC3E,SAAU,CAAE9D,EAAF,EAAQC,EAAR,EAAcC,EAAG,IAEvBqoB,MAAQ,WAEZ/oB,OATkB,CAAC,MAAD,GAAa,CAACQ,EAAG,EAAjB,QAApB,eAUES,MAAO,CAAET,EAAF,GAAUC,EAAV,GAAkBC,EAAG,IAC5B8I,MAAO,CAAEtK,EAAF,IAAWC,EAAX,IAAoBC,EAApB,GAA4BsH,EAAG,IAElCsiB,MAAQ,WAEZhpB,OAdkB,CAAC,CAAC,GAAD,IAAD,GAAe,CAAC,EAAG,IAAnB,QAApB,eAeEiB,MAAO,CAAET,EAAF,GAAUC,EAAV,GAAkBC,EAAG,IAC5B8I,MAAO,CAAEtK,EAAF,IAAWC,EAAX,IAAoBC,EAApB,IAA6BsH,EAAG,IAEnCuiB,MAAQ,WAEZjpB,OAnBkB,CAAC,CAAC,EAAG,GAAL,KAAe,CAAC,EAAG,EAAnB,UAApB,eAoBEiB,MAAO,CAAET,EAAF,GAAUC,EAAV,GAAkBC,EAAG,IAC5B8I,MAAO,CAAEtK,EAAF,IAAWC,EAAX,IAAoBC,EAApB,IAA6BsH,EAAG,IAU1B,MAAMwiB,aAAatpB,eAAnB,UAKboU,S,OACSpU,wCAAQkO,KAAKzO,MAApB,W,+CANiB6pB,oBACU,CAC3BxpB,SAAU,CAACqpB,MAAOC,MAAOC,S9BzC7B,MAAMxpB,MAAQ4jB,aACZ,CAEE,UAFF,IAGE,SAHF,IAIE,CAAC,IAAD,IAJF,IAKE,CAAC,GAAK,IALR,IAOE,SAPF,IAQE,QARF,IASE,CAAC,IAAD,GATF,IAUE,CAAC,GAAK,GAXgB,KAaxB,CAEE,CAAC,EAAG,EAFN,GAGE,CAAC,EAAG,EAHN,GAKE,CAAC,EAAG,EALN,GAME,CAAC,EAAG,EANN,GAQE,CAAC,EAAG,EARN,GASE,CAAC,EAAG,EATN,GAWE,CAAC,EAAG,EAXN,GAYE,CAAC,EAAG,EAZN,GAcE,CAAC,EAAG,EAdN,GAeE,CAAC,EAAG,EAfN,GAiBE,CAAC,EAAG,EAjBN,GAkBE,CAAC,EAAG,EA/BR,KAmCM9jB,uBAAuB0H,oCAA7B,G+BnCA,MAMMjH,SAAS,CAFG,CAAC,EAAG,EAFtB,IAGkB,CAAC,EAAG,GAHtB,KAKMmpB,MAAN,GAEA,IAAK,IAAI5oB,EAAT,EAAgBA,EAThB,GASmCA,IAAK,C,IACjC,IAAIiC,EAAT,EAAgBA,EATlB,GASqCA,IAAK,C,MAChC6J,KAAQ9L,EAAD,MAAiCvB,KAA9C,GACM0B,EAVV,GAUuB1B,SAAnB,KACMkD,MAXV,GAW2BlD,SAAvB,KACM8jB,MAAStgB,IAAQxD,KAAT,GAblB,GAcUwB,EAAI0B,MAAQlD,SAAlB,OACMyB,EAAIyB,MAAQlD,SAAlB,O,GACAgB,cAAY,CAACQ,EAAGC,EAAhBT,IACIwC,EAAJ,EAAW,C,MAEH4mB,eAAiB7oB,QAAcP,kBAnB3C,GAoBMmpB,WAAW,CAACnpB,gBAAD,EAAoBA,gBAApB,EAAXmpB,iBACI5oB,EAAJ,GACE4oB,WAAW,CAACnpB,gBAAD,EAAoBopB,eAApB,EAAXD,kB,MAKAC,eAAiB7oB,QAAcP,gBAAgB,GACrDmpB,WAAW,CAACnpB,gBAAD,EAAoBA,gBA5BjC,GA4BEmpB,iBACI5oB,EAAJ,GACE4oB,WAAW,CAACnpB,gBAAD,EAAoBA,gBA9BnC,GA8Be,EAAXmpB,iBAIJ,IAAK,IAAI3mB,EAAT,EAAgBA,EAlChB,GAkCmCA,IAAK,C,MAChC6mB,GAAKrpB,gBAnCb,GAmCE,EACMspB,OAAS9mB,MAAUxC,gBAAVwC,EAA8B6mB,GAA7C,EACAF,WAAW,CAACE,GAAIC,OAAhBH,IAGF,MAAMI,QAAUlG,aAAa,SAA7B,OAEM9jB,uBAAuB0H,oCAA7B,GACe,SAASuiB,QAAQnqB,O,OACvBC,uDAASC,qBAAsBA,wBAA/BD,OAAgEE,YAAa+pB,W9B7C/E,SAASE,cAAcxoB,MAAvB,Q,MACE,CAAET,EAAGS,QAAL,OAAuBR,EAAGQ,QAA1B,OAA4CP,EAAGO,QAAUyoB,QAG3D,MAAMC,cAAgB,CAAC,EAAG,EAAG,EAA7B,GACMC,qBAAuB,CAAC,GAAK,EAAG,GAAtC,GACMC,mBAAqB,CAAC,EAAG,GAAK,EAApC,GAGMC,WAAa,CAAEtpB,EAAF,GAAUC,EAAV,GAAkBC,EAAG,IAClCqpB,iBAAmBN,cAAcK,WAF9C,KAGaE,aAAe,CAAExpB,EAAF,GAAUC,EAAV,GAAkBC,EAAG,IACpCupB,mBAAqBR,cAAcO,aAJhD,KAKaE,KAAO,CAClB5lB,SAAU,CAAE9D,EAAF,EAAQC,EAAR,EAAcC,EAAG,GAC3BmK,YAAa,CAAErK,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBuI,EAAG,IAGtC,IAAI7E,MAAJ,EAEO,MAAM+lB,aAKX5hB,YAAYvI,S,4IAFM,G,KAGhB,GAAUoE,Q,KACV,c,kCAIG,MAAMgmB,QAMX7hB,YAAY8hB,KAAD,K,0IAHc,K,2CACP,G,KAGhB,U,KACA,GAAUjmB,S,wBAUd,MAAMkmB,iCAAyD,0CAMtDjrB,MAAA,IACCwiB,O,GACAlI,qBAAqB,EAAGtC,iBAAaA,SAAzC,M,OACE,K,MAEIyK,YAAa,EAAH,2BAJH,OAMNC,aAAetH,iBAAiBoH,KAAD,eANzB,G,OAQbC,8BAEAA,6BACIA,mBAAqBA,WAArBA,QAA0CA,kBAA9C,SACEA,kBAAoB,IAAIrY,MAAMqY,kBAAV,aAApBA,cAEF,aAfG,OAAP,SAuBF,MAAMyI,qBAAqB3qB,eAA3B,UACEoU,S,MACQrU,SAAWmO,KAAKzO,MAAtB,SACM6lB,MAAN,G,IACK,MAAL,iBAA6B,C,MACrB1b,MAAQzJ,iCAAd,cACMC,OAA2BD,gBAAgB,EAAGsP,eAAYnG,YAAhE,QAEAgc,WAAW,CACT5hB,UAhFD,aAiFCpD,KAFS,mBAITe,MAJS,WAKTuI,MAAOD,WALE,OAMTrI,eAAgBnB,O,OAIbH,oCAAOL,qBAAsB+qB,kCAApC,QAIJ,MAAME,kCAA0D,0CAMvDnrB,MAAA,IACCwiB,O,GACAlI,qBAAqB,EAAGtC,iBAAaA,SAAzC,M,OACE,K,MAEIyK,YAAa,EAAH,2BAJH,M,OAQbA,kBAAoBA,WAAA,WAAsB,CAACtY,MAAO3C,QACzC4T,iBAAiBoH,qBAAD,OAAvB,IAGFC,oCACA,aAdG,OAAP,SAsBF,MAAM2I,sBAAsB7qB,eAA5B,UACEoU,S,MACQrU,SAAWmO,KAAKzO,MAAtB,SACMW,OAAN,GACM4J,OAAN,GACM8gB,gBAAN,G,IAEK,MAAL,iBAA6B,C,MACrBlhB,MAAQzJ,iCAAd,c,IACK,MAAL,SAAoBA,KAApB,OAAiC,C,MACzB4qB,eAAiBzhB,YAAYmG,MAAnC,OACArP,4BACA4J,YAAYyF,gCAAZzF,OACA8gB,6B,MAIEE,WAAyB,6BAG7B1qB,KAH6B,KAI7Be,MAJ6B,iBAK7BypB,iC,OAGK9qB,sCAASL,qBAAsBirB,mCAAoC,CAA1E,c+BhJJ,SAASK,SAASC,OAAlB,Q,MACSC,GAAIC,GAAIC,IAAMH,OAArB,OACOI,GAAIC,GAAIC,IAAMC,OAArB,M,OACON,SAAaC,KAAbD,IAA0BE,KAAjC,GAGF,SAASK,SAASC,S,MACV,OAAEvrB,QAAR,Q,IACK,IAAIO,EAAT,EAAgBA,EAAIP,cAApB,EAAuCO,I,GACjCsqB,SAAS7qB,OAAD,GAAYA,OAAOO,EAA/B,I,OACE,E,OAKGsqB,SAFY7qB,OAAnB,GACkBA,OAAOA,cAAzB,I,uBAUa,MAQbuI,YAAY5I,SAAD,K,8CAPU,I,iGAEE,S,4NAmFK,CAAC2Q,EAAGiI,Q,GAG1BzK,KAAJ,gBACEwC,mBACAA,sBAKGxC,KAAL,U,WAGA,K,WAKKA,KAAD,cAAsBA,KAA1B,c,aAIM,IAAEiP,KAAR,KACM1N,MAAQ0N,sBAAsB,CAAC,EAAG,EAA1BA,GAAiC,CAAC,EAAG,EAvBZ,I,IAyBvC,M,aAKM,cAAEyO,eAAR,K,GAEI1d,KAAJ,Y,KACE,8BACK,GAAI0d,eAAiB1d,KAArB,eAA0C,C,MAExC2d,OAAQC,QAAf,OACO5V,OAAQC,QAAUjI,KAHsB,eAKzC6d,GAAKF,OAAX,OACMG,GAAKF,OANoC,O,KAS/C,eAT+C,M,MAYzCG,aAAeL,cAAA,cAA4B,CAACM,IAAKzc,SAChDyc,aAAL,QACEA,gBAEF,KAhB6C,I,IAoB1C,MAAL,6BAAyC,C,MACjC,MAAEzc,OAAR,aACAA,SAAWA,SAAXA,GACAA,SAAWA,SAAXA,G,KAGF,e,6CAgCSiB,I,MAEL,cAAEkb,eAAR,K,GACA,c,OAIQlb,EAAR,K,IACE,S,IACA,YACMxC,KAAJ,Y,KACE,YAAiBA,KAAjB,a,KAEA,6B,KAEF,e,6CAuCoB,CAACwC,EAAGiI,QACvBjI,EAAL,U,KACE,iB,iDAK0B,CAACA,EAAGiI,Q,IAEhC,K,WAGKA,aAAL,O,eAIA,aAAkBA,gBATuB,QAYrCzK,KAAJ,Y,iBACE,YAAiBA,KAAjB,a,MAKI,cAAE0d,eAlBiC,K,IAqBzC,c,WAIIO,iBAAmB/M,OAAvB,iBACIgN,eAAJ,E,MACM,IAAEjP,KAAR,KACM1N,MAAQ0N,sBAAsB,CAAC,EAAG,EAA1BA,GAAiC,CAAC,EAAG,EAAnD,I,IACA,M,aAGOkP,GAAIC,IAhC8B,OAmCnC,OAAElsB,QAAR,c,IACK,IAAIO,EAAT,EAAgBA,EAAIP,cAApB,EAAuCO,IAAK,C,MACpCuqB,OAAS9qB,OAAf,GACMqrB,OAASrrB,OAAOO,EAAtB,IACOwqB,GAAIC,IAAMF,OAAjB,OACOI,GAAIC,IAAME,OAJyB,MAQpCc,KAAOhgB,sDAAb,IACIggB,KAAJ,mBACEJ,sBACAC,iB,GAKAA,eAAJ,EAAwB,C,MAChBI,SAAW,IAAIjC,aAArB,OACAqB,4BAA4BQ,cAA5BR,c,KACA,qB,KAEF,c,+CAI0B,CAAClb,EAAGiI,Q,IAC9B,K,aAGM,IAAEwE,KAAR,KAEM1N,MAAQ0N,sBAAsB,CAAC,EAAG,EAA1BA,GAAiC,CAAC,EAAG,EANZ,I,IASvC,M,aAIMsP,cAAgBve,KAAtB,U,KACA,a,KACA,qB,MACMwe,YAAchc,EAhBmB,Q,GAmBnC+b,eAAJ,YAAkC,C,MAC1BE,YAAchU,aAApB,G,YACA,aAAkBgU,aAAeA,YAAjC,QACOze,KAAP,W,OAIF,a,KACE,iBACOA,KAAP,a,KAIF,qBACOA,KAAP,c,KApUA,kBAGF0e,wB,QACW1e,KAAF,eAAwBwd,SAASxd,KAAxC,eAIF2e,WAAW7T,K,MACH,mBAAUyR,MAAhB,I,GACIrqB,cAAJ,E,YAIA,e,MAEMurB,QAAU,IAAInB,QAApB,MACAmB,eAAiBvrB,WAAY8oB,GAAM,IAAIqB,aAAa,CAACrB,EAAD,EAAMA,EAAN,EAAWA,KAA/DyC,KACKD,SAAL,UACEC,oBAAoBA,eAApBA,I,KAEF,uBAKFmB,UAAUrd,O,MACF,cAAEmc,eAAR,K,GACA,gBAEOF,SAAL,eAA8B,C,MACtBc,SAAW,IAAIjC,aAArB,O,OACAqB,yC,KACA,uB,MAKED,QAAU,IAAhB,QACAA,oBAAoB,IAAIpB,aAAxBoB,Q,MACMoB,cAAgB,IAAIxC,aAA1B,OACAoB,mC,KACA,uB,KACA,4B,KACA,WAIFqB,kBAAkBvd,OACZvB,KAAJ,c,KACE,wB,KACA,YAUJ+e,qB,MACQtB,QAAUzd,KAAhB,cACA,UAKA,IAAIyd,sB,KACF,uBAEAA,oBAAoBA,eAApBA,I,KAEF,YAqEFuB,cAAcvB,S,KACZ,SAAgBzd,KAAKnO,SAASotB,OAAQhtB,MAASA,OAA/C,S,KACA,mBAMFitB,YAAY3d,O,MACJ,cAAEmc,eAAR,K,IACA,c,aAGM1qB,UAAY0qB,4BAA6B1C,GAAMA,OAASzZ,MALzB,IAOjCvO,mBAAqB0qB,4BAAzB,GACE1qB,eAAeA,UAAfA,IAEF0qB,+B,KACA,iBACIA,4BAAJ,G,KACE,6B,KAEF,WA2BFyB,aAAa5V,Q,KAEX,mBACIvJ,KAAJ,c,KACE,uB,KAEF,iB,IAEK,MAAL,WAAsBA,KAAtB,SAAqC,C,IAC/Bof,SAAW3B,UAAf,OACAA,wBACA,W,KACE,uB,IAEG,MAAL,SAAoBA,QAApB,OACMlc,QAAJ,S,KAGE,kBACAA,gBACAkc,kB,KACA,sBACA2B,a,KAKN,aC7PJ,MAAMC,gCAA0B,EAA1BA,8BAAgD,EAChDC,+BAAyB,EAAzBA,6BAAyB,EA4HzBttB,UAAaiD,O,MACXsqB,OAAStqB,KAtHfwH,SAAS,CACPjH,UADO,YAEPmH,KAAO,kOAcPmV,KAAO,4GAOPvb,WAAY,CACVgL,MAAO,CAAClI,QAAS9H,QACXY,cAAcZ,MAAlB,QACS+J,iBAAiB/J,MAAxB,QAEKA,MAAP,OAEFmK,MAAO,CAACrC,QAAS9H,QACXY,cAAcZ,MAAdY,SAA+BA,cAAcZ,MAAjD,OACSyL,gBAAP,OAEKzL,aAAeA,MAAtB,QAGJkE,SAAU,CACRiG,MAAO,CAACrC,QAAS9H,QACXY,cAAcZ,MAAlB,OACSgK,OAAOhK,MAAd,OAEKA,MAAP,OAKJ4D,MAAO,CACLC,OAAQ,CAACiE,QAAS9H,QACRA,aAAeA,YAAhB,QAAuC8tB,+BAEhD/pB,KAAM,CAAC+D,QAAS9H,QACNA,aAAeA,YAAhB,MAAqC8tB,8BAGhD9pB,MAvDO,aAyDPe,MAAO,CAAC+C,QAAS9H,QAAUA,aAAa0kB,UA8DpCuJ,OAASvqB,KA1DfwH,SAAS,CACPjH,UADO,YAEPmH,KAAO,0SAkBPmV,KAAO,8GAOPvb,WAAY,CACVgL,MAAO,CAAClI,QAAS9H,QACXY,cAAcZ,MAAlB,QACS+J,iBAAiB/J,MAAxB,QAEKA,MAAP,OAEFmK,MAAO,CAACrC,QAAS9H,QACXY,cAAcZ,MAAdY,SAA+BA,cAAcZ,MAAjD,OACSyL,gBAAP,OAEKzL,aAAeA,MAAtB,QAIJ4D,MAAO,CACLC,OAAQ,CAACiE,QAAS9H,QACRA,aAAeA,YAAhB,QAAuC+tB,8BAEhDhqB,KAAM,CAAC+D,QAAS9H,QACNA,aAAeA,YAAhB,MAAqC+tB,6BAGhD/pB,MAlDO,aAoDPe,MAAO,CAAC+C,QAAS9H,QAAUA,aAAa0kB,U,MAOnC,CAAC1kB,MAAD,Y,MACCkuB,MAAwB9jB,2BAA+B,CAA7D,OACM+jB,iBAAN,GACMC,iBAAN,GACAF,cAAenQ,QAETtZ,UAAasZ,KAAjB,qBACMA,aAAeA,YAAnB,OACEqQ,4BAEAD,+BAKNH,yBACAC,2BAIE/tB,uBAAuB0H,oCAA7B,GACe,SAASymB,UAAUruB,O,OACzBC,uDAASC,qBAAsBA,wBAA/BD,OAAgEE,YAAaM,a/B7JtF,MAAM6tB,QAAU,CACdrpB,SAAU,CAAE9D,EAAF,EAAQC,EAAR,EAAcC,EAAG,GAC3BmK,YAAa,CAAErK,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBuI,EAAG,IAGhC2kB,cAAgB,CAAEptB,EAAF,EAAQC,EAAR,EAAcC,EAAG,GgCNvC,MAGMoI,qBAAqB,CAAE5J,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBsH,EAAG,GAC5CmnB,iBAAmB,CAAE3uB,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBsH,EAAG,IAWhD,IAAIonB,oBAAJ,EA6BO,SAAStnB,aAAY,UAAQpH,I,OAGrB,OAASF,EAAI,QAAb,EAA2B,OAAxC,EA7CF,IAiDA,SAAS6uB,aAAarnB,EAAtB,G,OACSA,MAAQtH,EAARsH,GAAeA,MAAQtH,EAAvBsH,GAA8BA,MAAQtH,EAAtCsH,GAA6CA,MAAQtH,EAA5D,EAGF,MAAM4uB,YASJzlB,e,2CARUoI,iC,0CACDA,iC,yCACDA,8B,kDAEgB7H,uB,gDACD+kB,mB,4DACc,MA9CvC,W,GACE,mB,aAGM3Z,MAAQvD,uBAAd,SACAuD,gBAAmB,kWAiBfvD,SAAJ,MACEA,iCAEFmd,sBAwBEG,G,KACA,gD,KACA,6C,KACA,oBAAyBngB,KAAzB,Q,KACA,mBAAwBA,KAAxB,O,KACA,oBAA2BpE,YAA3B,sBAGFuV,OAAO5Y,OAAD,8B,KACJ,wBAAgC,aAAYmC,oBAAoBiG,mB,MAC1D,mBAAS7E,OAAS,IAAxB,OACMskB,WAAatkB,eAAnB,EACMukB,UAAY/nB,QAAQ8nB,WAAatkB,OAAH,GAAeJ,OAAS,CAAC,EAAG,EAAG,EAAnE,I,GAEA,UAAe,C,MACPxE,gBAAkBoB,QAAQwD,OAAhC,I,GACKmkB,aAAajgB,KAAD,eAAjB,a,KACE,yB,KACA,oBAA2BpE,YAA3B,YAGG0kB,qBAAuBA,sBAAwBtgB,KAApD,yB,GAMIsgB,uBACEtgB,KAAD,cAAuBA,KAAKugB,eAAiBN,aAAaI,UAAWrgB,KAFxE,eAGE,C,KAEA,uB,MAEMwgB,WADkB9nB,YAAxB,WAjGV,UACA,kB,KAkGU,wCACS0nB,YAAcpgB,KAAdogB,eAAoCH,aAAa/oB,gBAAiB8I,KAAtE,gB,KAEL,6B,KACA,wBAA+BpE,YAA/B,uB,KAfF,sC,KACA,kB,KAkBJ,6CAEIoE,KAAKygB,MAAMC,cAAgBnoB,OAA/B,O,KACE,kBAAyBA,aAAzB,KAYS,MAAMooB,aAAa7uB,eAAnB,U,6IAE4C,IAFF,M,qDAGCA,eAHD,c,wDAehC,KACjBkO,KAAJ,U,KACE,iCAAsCA,KAAtC,U,yCAII,K,MACA3G,QAAU2G,KAAhB,SACM4gB,eAAiB5gB,KAAvB,iBACQpO,SAAF,4BAAqB0uB,qBAAwBtgB,KAAnD,OACQ6gB,QAASC,eAAkB9gB,KAAnC,kBACMoL,gBAAkB/R,SAAWA,QAAnC,gB,IAEKynB,gBAAD,UAAJ,gB,aAGM,oBAEJxT,WAAW,mBAAS1Y,SAFtB,SAIM,OAAE+S,QAAR,gBAEMoZ,mBAAqB,IAAIrtB,IAAIktB,eAAnC,Q,IAEK,MAAL,kBAA8B,C,MACtB,eAAQrE,MAAd,QACM,SAAE/lB,UAAR,KACMwqB,MAAQhhB,KAAKsB,QAAQ9K,SAAUmR,OAArC,W,IACA,M,eAIOjN,KAAMiG,KAAb,M,GACIjG,UAAciG,KAAdjG,IAA2BA,KAAOtG,MAAlCsG,IAAgDiG,IAAM/L,OAA1D,G,aAII2R,GAAKqa,mBAAmBrE,MAA5B,QACA,GACEwE,0BAA0BxE,MAA1BwE,SAEAxa,GAAK,IAALA,YACAqa,mBAAmBrE,MAAnBqE,WACAE,0BAA0Bva,GAA1Bua,UAGFva,+C,IAGG,MAAL,0BAAsC,C,MAC9BA,GAAKqa,mBAAX,KACA,KAGAra,oBACAqa,gC,2CAIM,CAACrf,MAAD,oB,MACFF,IAAM,CAACE,MAAD,EAAUA,MAAV,EAAmBA,MAA/B,IACM,qCAAoB3M,QAA1B,UACMkM,SAAW,CAACpG,KAAMiG,IAAKvM,MAA7B,Q,OACOuT,8BAAP,OArEF/C,oBACM5E,KAAJ,U,KACE,+BAAoCA,KAApC,OAsEJkG,S,OAEI,0DACEpU,oCAAKwU,IAAKtG,KAAKihB,oBACf,6BAACpY,sBAAD,cACI/U,MACA,M,KACE,cAEF,S,+CA1FS6sB,oBAKG,CACpB/uB,SAAU,K/BtFd,MAMMsvB,iBAAiBvjB,OAAA,OAAc,CAAEvM,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBsH,EAAG,IACtDuoB,gBAAgBxjB,OAAA,OAAc,CAAEvM,EAAF,EAAQC,EAAR,EAAcC,EAAd,EAAoBsH,EAAG,IAErD7E,sBAAuBH,uBAAYwtB,O,MAEjCttB,IADS+O,uBAAf,UACYgK,WAAZ,M,OACA/Y,cACA,MAGIutB,mBAAsB9oB,S,MACpB,UAAQ3F,GAAM2F,YADqC,SAGjD,UAAG7F,KAAKC,KAAKC,KAGjBsF,iBAAmB,CAACopB,QAAD,SAChBA,YAAYD,mBAAZC,UAAP,EAGIroB,iBAAmB,CAACqoB,QAAD,kBACvBA,YAAYD,mBAAZC,kBCjEF,SAASC,iBAAiB9nB,O,QACxB,IAAIA,M,QAIJ,O,KAEOwZ,sBAAL,Q,MAAoC,U,KAC/BA,sBAAL,O,MAAmC,S,KAC9BA,sBAAL,uB,MAAmD,yB,KAC9CA,sBAAL,sB,MAAkD,wB,KAC7CA,sBAAL,sB,MAAkD,wB,KAC7CA,sBAAL,qB,MAAiD,uB,KAE5CA,sBAAL,O,MAAmC,S,KAC9BA,sBAAL,c,MAA0C,Q,KACrCA,sBAAL,gB,MAA4C,S,MAExC,IAAIvb,MAAO,4BAA2Bib,wBAG9C,MAAM6O,UAAavsB,O,MACX3B,QAAU2B,KAAK,CACnBO,UADmB,YAEnBD,MAFmB,aAGnBE,SAAU,CACRgsB,YAAaxsB,aADL,eAERysB,WAAYzsB,aAFJ,cAIR0sB,iBAAkB1sB,UAJV,oBAKR2sB,gBAAiB3sB,UALT,mBAMR4sB,WAAY5sB,UANJ,c,kBAOW,CAAC,EAAG,GAPf,G,yBAAA,G,yBAAA,GAURgf,YAAahf,aAVL,eAWRe,SAAUf,0BAEZsB,WAAY,CACVC,SAAUvB,UADA,aAEV6sB,OAAQ7sB,UAFE,WAGVwB,SAAUxB,wBAEZuc,SAAUvc,UArBS,WAsBnB0H,KAAO,2fAiBPmV,KAAO,y1BA4BHiQ,eAAiB9sB,YAAY,CAAC,EAApC,IACM+sB,aAAe/sB,KAAA,QAAa,CAChCR,KAAM,CAAC,IAAK,IAAK,IADe,KAEhCL,MAFgC,EAGhCQ,OAAQ,IAIJqtB,cAAeC,wBAAa9oB,Q,MAE1B,UAAE2Z,WAAR,MACMoP,SACJ/oB,qBACAA,MAAA,kBAAyBgpB,c,MACjBC,QAAUjpB,oBAAoBgpB,YAApC,SACME,OAASlpB,cAAgBA,aAAagpB,YAA5C,Q,OACgBntB,KAAA,QAAa,CAC3BR,KAD2B,OAE3BO,IAAKusB,iBAAiBc,QAFK,WAG3BttB,IAAKwsB,iBAAiBc,QAHK,WAI3BE,MAAOhB,iBAAiBc,QAJG,OAK3BG,MAAOjB,iBAAiBc,QAAD,WAIzBjpB,MAAJ,QACEA,qBAAsBkpB,QAAwBA,OAA9ClpB,S,MAGImT,UArB8C,G,SA6CpD,4B,MACQsV,WAAaY,YACftjB,qBAAWsjB,KADIA,QAEftjB,4CACEA,eADFA,SAEEsjB,eAAiB,CAAC,EAAG,EAAG,EAF1BtjB,GAGEsjB,kBAAoB,CAAC,EAAG,EAH1BtjB,GAIEsjB,YAAc,CAAC,EAAG,EANxB,I,GAQAtjB,uDACA,MAAIsjB,W,SAhCN,iB,IACO,MAAL,aAAwBC,KAAxB,WAAyC,C,MACjCC,SAAWvpB,qBAAqB5D,UAAtC,UACMotB,QAAUD,8BAAhB,iB,IACA,U,MACQ,IAAIjrB,MAAV,8DAEF6U,eAAe,CACbzZ,QAASigB,UAAUvd,UADN,SAEb6b,UAAW0B,UAAUvd,qBAFR,UAGbqtB,QAAS9P,UAAUvd,qBAHN,QAIbstB,UAAWF,QACP7P,UAAUvd,qBAAsB,aAAWotB,kBAAoB,KAC/D,CAAEhsB,QAAF,EAAcD,OAAQorB,gBAC1BJ,iBAAkBiB,QAAUT,SAASS,QAAZ,OAPZ,aAQbhB,gBAAiBe,+CAAiD,CAAC,EAAG,EAAG,EAR5D,GASbd,yBAiBFkB,CAAS3pB,kBAAkBqpB,KAAnB,MAARM,YAEEN,KAAJ,S,IACO,MAAL,YAAuBA,KAAvB,SACEO,SAAS5pB,iBAAD,UAAR4pB,Y,IAMD,MAAL,WAAsB5pB,kBAAkBA,WAAlBA,OAAtB,MAAiE,C,MACzD6pB,cAAgB9jB,eAAtB,SACAA,mDAA2CjO,QAA3CiO,GACAA,mDAA2CjO,QAA3CiO,GACA6jB,SAAS5pB,iBAAD,SAAR4pB,e,OAEF,YAIIE,YAAcjuB,KAAK,CACvBoE,QAAS,CACPqoB,WAAY,CAACroB,QAAS9H,QACpB4N,4CACEA,eADFA,SAEEjE,kBAAkB3J,WAFpB4N,aAGElE,YAAY1J,WAHd4N,UAIE5N,YAAc0J,YAAY1J,MAA1BA,OAAyC,CAAC,EAAG,EAN1C,IAQPkwB,YAAa,CAACpoB,QAAS9H,QAAWA,oBAA0BA,MARrD,MASP0iB,YAAa,CAAC5a,QAAS9H,QAAUA,aAAe,CAAC,EAAG,EAAG,EAThD,GAUPyE,SAAU,CAACqD,QAAS9H,UAAYA,MAAMyE,Y,MAInC,CAACzE,MAAOyE,Y,MACPuW,UAAY0V,aAAa1wB,MAA/B,OACA2xB,YAAYltB,UAAW,EAAH,kCAAeA,oBAAxB,MAA4C,KACrD1C,uB+BpMN,MAAM6vB,mBAAqB,CAAC,GAAK,GAAK,GAAtC,GAEO,SAASC,O,OACP3mB,SAAS,CACdE,KAAO,mSAcPmV,KAAO,0IAOPtc,UAtBc,QAuBde,WAAY,CACVgL,MAAO,CAAClI,QAAS9H,S,MACTW,OAAN,GACMmxB,MAAQ9xB,MAAd,M,IACK,IAAIkB,GAAKlB,MAAd,MAA2BkB,EAAIlB,MAA/B,MAA4CkB,IAC1CP,YAAY,UAAZA,IACAA,YAAY,CAACmxB,MAAO5wB,EAApBP,IACAA,YAAY,CAACO,GAAD,MAAZP,IACAA,YAAY,CAACO,EAAG4wB,MAAhBnxB,I,OAEF,QAEFwJ,MAAO,CAACrC,QAAS9H,S,MACTmK,MAAQnK,aAAd,mB,OACO,IAAIoK,MAAMpK,cAAV,QAAP,SAGJ+E,MAAO,CAAC+C,QAAS9H,QAEDA,cAAd,IAaS,SAAS+xB,KAAK,M,IAAA,MAAEhtB,OAAyB,KAAfvE,MAAe,qD,MAChDH,SAAW,CAAE0E,a,OAEjBxE,4DAASL,qBAAsByiB,kCAA/BpiB,MAA2EJ,YAAa0xB,OAD1F,UAOFE,kBAAoB,CAAEhtB,MAAO,GChDd,MAAMitB,gBAAN,iB,mIAEL,CAAE9D,MAAO,M,wDAQM,KACjBzf,KAAJ,U,KACE,iCAAsCA,KAAtC,U,yCAII,K,MACA3G,QAAU2G,KAAhB,SACMsN,UAAYjU,SAAWA,QAA7B,WACM,+BAAczH,UAAaoO,KAAjC,M,IACK3G,UAAL,U,aAGMomB,MAAQ7tB,SAAA,IAAa,CAAC0d,KAAMvW,S,MAC1ByqB,YAAcxjB,KAAKsB,QAAQgO,UAAb,SAApB,S,OACOmU,WAAW,+CAA4BnW,wB,KAEhD,SAAc,CAAEmS,iB,2CAGR,CAACle,MAAD,W,IACHlI,UAAYA,QAAjB,gB,aAGM,UAAEiU,WAAR,SACM,OAAE3F,QAAWtO,QAAnB,gBAEMgI,IAAM,CAACE,MAAD,EAAUA,MAAV,EAAmBA,MAA/B,IACM,qCAAoB3M,QAA1B,UACMkM,SAAW,CAACpG,KAAMiG,IAAKvM,MAA7B,Q,OACOuT,8BAAP,OApCF/C,oBACM5E,KAAJ,U,KACE,+BAAoCA,KAApC,OAqCJkG,S,OAEI,8CACE,wBAAC2C,sBAAD,cACI/U,MACA,M,KACE,cAEKkM,KAAKhC,MAAZ,U,wB/BrEZ,MAAM9L,SAAU+C,O,MACPD,IAAK0uB,KAAOzuB,YAAnB,c,OACOwH,SAAS,CACdjH,UADc,SAEdmH,KAAO,mYAkBPmV,KAAO,qKAOPvb,WAAY,CACVgL,MAAO,CAAClI,QAAS9H,QACRA,iBAAkBgQ,OAAW5F,2BAA+BV,YAAnE,QAEFS,MAAO,CAACrC,QAAS9H,QACAyL,gBAAf,QAKJvH,SAAU,CACRkuB,UAAW,CAACtqB,QAAS9H,S,MACbqyB,KAAOryB,eAAb,E,OACOL,aAAcA,aAArB,SAIJoF,MAAOrB,8BAILxD,uBAAuB0H,oCAA7B,G,4SgC0IO,WACL,MAAM0qB,OAAQ,cAAAC,kBACdD,MAAME,kBAAmB,oBAAQ,IACxBA,oBAETF,MAAMG,eAAgB,oBAAQ,IACrBA,iBAETH,MAAMI,iBAAmB,KAAM,GA3MjC,I,IAAA,U,IAAA,2B,iCAEA,oCACA,yCAOO,SAASF,mBACd,MAAMG,sBAAwBC,oBAAQ,MAA4DC,QAC5FC,kBAAoBF,oBAAQ,MAAwDC,QACpFE,gBAAkBH,oBAAQ,MAA0CC,QACpEG,qBAAuBJ,oBAAQ,MAA+CC,QAC9EI,eAAiBL,oBAAQ,MAAoCC,QAC7DK,UAAYN,oBAAQ,MAAoCC,QACxDM,eAAiBP,oBAAQ,MAAyCC,QAClEO,KAAOR,oBAAQ,MAA+BC,QAC9CQ,gBAAkBT,oBAAQ,MAA0CC,QACpES,oBAAsBV,oBAAQ,MAA8CC,QAC5EU,KAAOX,oBAAQ,MAA+BC,QAC9CW,QAAUZ,oBAAQ,MAAkCC,QACpDY,YAAcb,oBAAQ,MAAsCC,QAC5Da,OAASd,oBAAQ,MAAiCC,QAClDc,WAAaf,oBAAQ,MAAqCC,QAC1De,iBAAmBhB,oBAAQ,MAA2CC,QACtEgB,gBAAkBjB,oBAAQ,MAA0CC,QACpEiB,IAAMlB,oBAAQ,MAA8BC,QAC5CkB,mBAAqBnB,oBAAQ,MAA6CC,QAC1EmB,oBAAsBpB,oBAAQ,MAA8CC,SAC5E,MAAEoB,OAAUrB,oBAAQ,KA+B1B,MAAO,CAAEsB,IA7BG,CACV,CAAEC,MAAO,UAAWC,UAAWL,oBAC/B,CAAEI,MAAO,KAAMC,UAAWJ,qBAC1B,CAAEG,MAAQ,eAAcF,gBAAiBG,UAAWtB,mBACpD,CAAEqB,MAAQ,eAAcF,eAAgBG,UAAWzB,uBACnD,CAAEwB,MAAO,QAASC,UAAWnB,gBAC7B,CAAEkB,MAAO,OAAQC,UAAWb,MAC5B,CAAEY,MAAO,UAAWC,UAAWZ,SAC/B,CAAEW,MAAO,eAAgBC,UAAWX,aACpC,CAAEU,MAAO,SAAUC,UAAWV,QAC9B,CAAES,MAAO,oBAAqBC,UAAWR,mBAmB7BS,UAhBI,CAChB,CAAEF,MAAO,mBAAoBC,UAAWrB,iBACxC,CAAEoB,MAAO,yBAA0BC,UAAWpB,sBAC9C,CAAEmB,MAAO,kBAAmBC,UAAWjB,gBACvC,CAAEgB,MAAO,QAASC,UAAWhB,MAC7B,CAAEe,MAAO,MAAOC,UAAWN,KAC3B,CAAEK,MAAO,mBAAoBC,UAAWlB,WACxC,CAAEiB,MAAO,mBAAoBC,UAAWT,aASjBW,UANP,CAChB,CAAEH,MAAO,oBAAqBC,UAAWf,iBACzC,CAAEc,MAAO,uBAAwBC,UAAWd,qBAC5C,CAAEa,MAAO,oBAAqBC,UAAWP,mBAMtC,SAASpB,gBACd,MAAM8B,SAAW3B,oBAAQ,MAAyBC,QAC5C2B,SAAW5B,oBAAQ,MAAyBC,QAC5C4B,YAAc7B,oBAAQ,MAA4BC,QAClD6B,oBAAsB9B,oBAAQ,MAAqCC,QACnE8B,oBAAsB/B,oBAAQ,MAAqCC,QACnE+B,UAAYhC,oBAAQ,MAA0BC,QAC9CgC,UAAYjC,oBAAQ,MAA0BC,QAC9CiC,cAAgBlC,oBAAQ,MAA4DC,SACpF,kBAAEkC,mBAAsBnC,oBAAQ,OAChC,qBAAEoC,qBAAF,sBAAwBC,uBAA0BrC,oBAAQ,IAE1DsC,2BAA6B,CAEjCC,mCAAoC,4BACpCC,yCAA0C,iCAC1CH,4CACAD,0CACAK,gCAAiC,wBACjCC,iCAAkC,yBAClCC,uCAAwC,gCAG1C,MAAO,CACLzC,kBAAmB,CACjB0C,cAAe,CACbC,UAAW,GACXC,iBAAkB,GAClBC,cAAeC,oCAGnBC,UAAW,CACTL,cAAe,CACbM,YAAa,GACbC,oBAAqB,GACrBC,yBAA0B,GAC1Bp0B,MAAO,GACPq0B,kBAAkB,EAClBC,aAAa,EACbC,KAAM,MACN/iB,eAAgB,IAChB1E,OAAQ,CAAC,EAAG,IAEd0nB,qBAAsB,CAAC,kCACvBC,2BAA6BC,QAAWA,MAAMC,SAAS,SAEzDvD,qBAAsB,CACpBwD,0BAA2B,IAAM,MAEnC5C,iBAAkB,CAAE4B,cAAe,CAAEiB,MAAO,IAAMC,4BAA6B,IAC/E1C,oBAAqB,CACnBwB,cAAe,CACbmB,YAAa,CAAC,eACdC,aAAc,CAAC,eACfC,SAAU,KACV5nB,YAAa,GACb6nB,wBAAyB,GACzBC,WAAW,EACXC,cAAe,GACfC,qBAAqB,GAEvB/B,sDACAgC,oBAAqB,CACnB,QACA,OACA,WACA,WACA,gBACA,OACA,oBACA,YACA,kBACA,WACA,YACA,aACA,SACA,aACA,SACA,aACA,OACA,gBAEFC,wBAAyB,OACzBC,OAAQ,GACRC,gBAAiB,CACf,4BAA6B5C,YAC7B,iCAAkCC,oBAClC,yBAA0BF,SAC1B,wBAAyBI,UACzB,+BAAgCD,oBAChC,CAACK,sBAAuBT,SACxB,CAACU,uBAAwBJ,WAG3ByC,MAAO,GACPC,uBAAwB,IAAM,KAC9BzC,4BACA0C,iCAAkC,CAACC,gBAAiBC,eAAgBC,kBAAlC,CAChCD,8BACAC,gCAEFC,eAAgB,CAACtB,MAAOuB,IAAKC,gBAAkBC,kBAC7CA,OAAOC,gBAAgBC,IAAI3B,MAAQ,0CAAyCuB,IAAIK,WAElFC,eAAiBN,KAAQA,IAAIO,QAAQv3B,KACrCw3B,qBAAqBC,IAAKhC,MAAOtvB,OAAQuxB,eACvCA,cAAcjC,MAAQ,4BAA2BtvB,OAAO8a,OAE1D0W,6BAA8B,KAAM,CAAG34B,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,KAC5DoxB,iBAAkB,OAClBC,uBAAyBpC,OAAU,CAAC,GAAK,OACzCqC,cAAa,IACJ5D,kBAET6D,YAAa,OACbC,eAAgB,CAACvC,MAAOwC,cAAgBA,YACxCC,mBAAoB,KAAM,EAC1BC,uBAAwB,SACxBC,mBAAoB,MACpBC,4BAA6B,KAC7BC,mBAAoB,MAEtB1F,YAAa,CAAE2F,gBAAiB,QAChCC,eAAgB,KACdzG,oBAAQ,MAAuCC,c,sIClHtC,SACbyG,gBAkBA,SAASC,eAAev5B,OACtB,MAAM,QAAEw5B,QAASC,OAAQC,eAAnB,WAAmCC,WAAnC,MAA+CC,OAAU55B,OACzD,cAAE65B,gBAAwD,SAAA9xB,YAAW+xB,sCACrE,oBAAEC,sBAAsE,SAAAhyB,YAAWiyB,2CAEnFC,QAAS,cAAAC,aAAY,EAAGC,iBAAaA,OAAOF,QAC5CG,YAAa,cAAAF,aAAY,EAAGC,iBAAaA,OAAOC,YAChDC,kBAAmB,cAAAH,aAAaztB,OAAUA,MAAM6tB,OAAOD,kBACvDE,WAAaF,iBAAiB9D,SAASiD,SAEvCgB,uBAAwB,SAAAC,SAC5B,IAAMJ,iBAAiB3M,OAAQgN,UAAY,UAAAC,oBAAmBD,WAAaE,iCAC3E,CAACP,mBAEGQ,aAAc,SAAAJ,SAAQ,KAAOb,SAAiB,wBAAAkB,UAASb,QAAU,CAACA,OAAQL,QAC1EH,OAASW,WAAWZ,UAAYE,gBAAkB,IAElD,OAAEtC,OAAF,UAAU2D,UAAV,aAAqBC,cAAiBC,SAASC,oBAC/CC,UAAW,cAAAC,eACXC,SAAuB,SAAAZ,SAC3B,KACE,SAAAa,oBACE,CACEC,0CACAC,gDACAC,4CACAC,8CACAC,oDACAC,iDAEFT,UAEJ,CAACA,YAGIU,uBAAwBC,4BAA6B,SAAA95B,WAAS,IAC9D+5B,gBAAiBC,qBAAsB,SAAAh6B,WAAS,IAChDi6B,cAAeC,mBAAoB,SAAAl6B,WAAS,IAC5Cm6B,WAAYC,gBAAiB,SAAAp6B,WAAS,IACtCq6B,UAAWC,eAAgB,SAAAt6B,WAAS,IACpCu6B,iBAAkBC,sBAAuB,SAAAx6B,WAAS,IAClDy6B,6BAA8BC,kCAAmC,SAAA16B,WAAS,GAE3E26B,cAAe,SAAAlC,SAAQ,KAAM,aAAAmC,mBAAmB,IAChD9a,KAAOwX,eAAeuD,UACtB1I,OAAQ,SAAAsG,SAAQ,8DAAMkC,aAAa7a,aAAnB,8BAAM,mBAAoBqS,OAAO,CAACwI,aAAc7a,OAChEgb,sBAAuB,SAAArC,SAAQ,IAAM,cAAN,GAAYnB,eAAe9D,cAAkBiE,QAAW,CAACA,SAExFsD,YAAa,SAAAtC,SAAQ,IAAMjB,UAAW,UAAAmB,oBAAmBnB,WAAaoB,gCAAgB,CAACpB,UAGvFwD,oBAAqB,SAAA30B,aACzB,CAAC40B,aAA8BC,WACzBvD,YACFA,WAAWsD,cAETzD,SACF6B,QAAQE,iBAAiB,CACvB4B,UAAUD,mBAAD,EAACA,QAASE,iBACnBC,QAAS,CAAC,CAAEvlB,GAAI0hB,QAASC,OAAQwD,aAAczH,cAAe8D,eAAe9D,gBAC7E8H,eAAgBJ,mBAAF,EAAEA,QAASI,kBAI/B,CAACjC,QAAS7B,QAASG,aAGf4D,mBAAoB,SAAAl1B,aACxB,CAACw0B,UAAmBW,aAA4CF,kBAC9DjC,QAAQG,oBAAoB,CAAEqB,oBAAWW,0BAAcF,iCAEzD,CAACjC,UAKGoC,kBAAmB,SAAAp1B,aACvB,CAACw0B,UAAmBa,wBAClB,MAAMC,iBAAmBC,mBAAUC,oBAAoBhB,WACvD,IAAKc,iBACH,OAEF,MAAMG,qBAAuBH,iBAAiBnI,cACxCuI,QAAUhE,oBAAoBiE,UAG9BC,gBAAiB,UAAApmB,MAAKkmB,UAAW,wBAAAG,iBAAe,UAAArmB,MAAKkmB,UAAY,SACjEI,YAAcJ,QAAQK,MAAM,GAAI,GAAGpe,OAAOie,gBAC1CI,WAAY,wBAAAC,eAAczE,cAAc0E,UAAWJ,aACzD,GAAyB,iBAAdE,YAA0B,UAAA1D,oBAAmB0D,aAAexB,UAAW,CAChF,MAAM2B,cAA6B,cAAH,GAAQV,qBAAyB1D,WAAWiE,YAM5E,YALAhD,QAAQE,iBAAiB,CACvB8B,QAAS,CACP,CAAEvlB,GAAIumB,UAAW5E,OAAQiE,qBAAqBc,eAAgBhJ,cAAesI,yBAOnF,MAAMW,aAAeV,QAAQ/d,OAAO,UACpC+Z,oBAAoB2E,MAAM,CAAE5c,KAAM+a,YAAa8B,KAAK,KAClD,MAAMC,YAAa,wBAAAN,eAAczE,cAAc0E,UAAWE,cAC1DpD,QAAQE,iBAAiB,CACvB8B,QAAS,CACP,CACEvlB,GAAI8mB,WACJnF,OAAQiE,qBAAqBI,sBAC7BtI,cAAesI,4BAMzB,CAACzC,QAASxB,cAAeE,oBAAqBK,aAG1CyE,gBAAiB,SAAAx2B,aACpB4I,IAUC,IATKkrB,YAAcN,yBACjBO,eAAc,GACVL,iBACFS,qBAAoB,IAMnBvrB,EAAE6tB,QAaHlF,OAASmD,WACXL,iCAAgC,GAI9BrC,iBAAiB9D,SAASiD,SAE5B6B,QAAQO,oBAAoBvB,iBAAiB3M,OAAQgN,SAAYA,UAAYlB,UACpEA,SAGT6B,QAAQO,oBACNvB,iBAAiB3M,OAAQgN,UAAY,UAAAC,oBAAmBD,WAAaE,iCAAgB5a,OAAO,CAACwZ,eAzBjG,CAEE,GAAII,OAASmD,WACX,OAEEvD,SACF6B,QAAQO,oBAAoB,CAACpC,YAuBnC,CACEkD,gCACAP,WACAN,uBACAxB,iBACAT,MACAmD,WACAvD,QACAuC,gBACAV,UAIE0D,gBAAiB,SAAA12B,aACrB,CAAC22B,WAAYC,mBAAoBC,sBAC/B7D,QAAQI,kBAAkBwD,oBAC1B5D,QAAQE,iBAAiB2D,oBACzB7D,QAAQO,oBAAoB,CAACoD,cAE/B,CAAC3D,UAGG8D,aAAc,SAAA92B,aAClB,KACE,MAAM,WAAE22B,WAAF,mBAAcC,mBAAd,mBAAkCC,qBAAuB,UAAAE,mBAC7D5F,QACAS,OACAO,uBAEFuE,eAAeC,WAAYC,mBAAoBC,qBAEjD,CAAC1F,QAASS,OAAQ8E,eAAgBvE,wBAG9B6E,YAAa,SAAAh3B,aACjB,KACE,MAAM,WAAE22B,WAAF,mBAAcC,mBAAd,mBAAkCC,qBAAuB,UAAAI,kBAC7D9F,QACAS,OACAO,uBAEFuE,eAAeC,WAAYC,mBAAoBC,qBAEjD,CAAC1F,QAASS,OAAQ8E,eAAgBvE,yBAG9B,WAAE+E,WAAF,WAAcC,aAAe,SAAA/E,SACjC,KAAM,CACJ8E,WAAY,KACV1F,cAAc4F,OAAO1F,oBAAoBiE,YAE3CwB,WAAY,KACV,GAAI5F,MAAO,CACT,MAAM8F,OAAQ,UAAAC,mBAAkBrG,eAAeuD,WACzC+C,gBAAkBxF,WAAWR,OAAOiG,KAAKzF,WAAWR,OAAOkG,cAAc7F,OACzE8F,kBAAmB,wBAAAC,iBAAgBxG,QAASoG,iBAC5CK,cAAe,wBAAAC,YAAWN,gBAAiB,CAC/C,CAAEO,KAAMJ,iBAAkBK,KAAM,CAAEC,KAAM,CAAEC,MAAO9G,QAAS+G,OAAQb,MAAOc,UAAW,WAEhFC,cAAe,UAAAC,sBAAqBT,aAAc7F,WAAWR,QACnEyB,QAAQE,iBAAiB,CAAE8B,QAAS,CAAC,CAAEvlB,GAAI8hB,MAAOH,OAAQgH,cAAgB,CAAE3oB,GAAI4nB,MAAOjG,uBAEvFM,oBAAoB2E,MAAM,CAAE5c,KAAMwX,eAAeuD,eAIvD,CAACxB,QAAS7B,QAASC,OAAQI,cAAeE,oBAAqBK,WAAYR,SAGvE,aAAE+G,aAAF,aAAgBC,aAAhB,YAA8BvhB,YAA9B,gBAA2CwhB,gBAA3C,eAA4DC,iBAAmB,SAAArG,SACnF,KAAM,CACJkG,aAAc,IAAMrE,cAAa,GACjCsE,aAAc,IAAMtE,cAAa,GACjCjd,YAAcpO,IACRA,EAAE6tB,UAAY7C,eAChBC,iBAAiBjrB,EAAE6tB,UAGvB+B,gBAAiB,KACfzE,eAAc,GACdI,qBAAoB,IAEtBsE,eAAgB,KACd1E,eAAc,GACdI,qBAAoB,MAGxB,CAACP,gBAGG8E,0BAA2B,SAAA14B,aAC/B,KACEyzB,2BAA0B,GACtBK,aAAeI,kBACjBuE,kBAGJ,CAACA,eAAgB3E,WAAYI,oBAGzB,cAAEyE,cAAF,gBAAiBC,kBAAoB,SAAAxG,SACzC,KAAM,CACJuG,cAAe,CACb,IAAK,IAAMD,2BACX,IAAK,IAAMA,2BACXG,MAAO,IAAMlF,oBAAmB,GAChCmF,KAAM,KACJjF,kBAAiB,GACjBQ,iCAAgC,KAGpCuE,gBAAiB,CACf55B,EAAI4J,IACFA,EAAEmwB,iBACEnF,eACFZ,QAAQO,qBAAoB,wBAAAyF,WAAUpH,UAG1C,IAAK,IAAM6B,2BAA0B,GACrC,IAAK,IAAMA,2BAA0B,GACrCoF,MAAO,IAAMlF,oBAAmB,GAChCsF,OAAQ,IAAMR,iBACdK,KAAM,KACJjF,kBAAiB,GACjBQ,iCAAgC,OAItC,CAACrB,QAASY,cAAe6E,eAAgB7G,OAAQ8G,2BAEnD,OAEE,6BAAC,sBAAaQ,SAAd,CACEr5B,MAAO,CACL4Z,UACAhK,GAAI0hB,QACJrF,YACAsF,cACAE,WAAYqD,mBACZO,oCACAE,kCACAoD,gCACAxE,oBACAzC,cAGF,6BAAC,6BAAD,CAAgB5rB,OAAQuF,OAAQiuB,SAAO,EAACrsB,OAAQ2rB,iBAChD,6BAAC,qBAAD,CAAaW,QAAM,EAACT,cAAeA,cAAeC,gBAAiBA,kBACnE,6BAAC,cAAD,CACES,QAAS7C,eACT8B,aAAcA,aACdC,aAAcA,aACdvhB,YAAaA,YACbxK,MAAO,CAAE8J,OAAS,cAAY4b,WAAahwB,6BAAOo3B,KAAO,gBACzDC,WAAW,uBAAG,CAAE,CAACC,qBAAOC,OAAO,EAAM,CAACD,qBAAOE,gBAAiB5F,aAC9D6F,KAAG,EACHC,SAAW,+BAA6BzI,SAAW,IACnD0I,MAAI,GACH/F,WAAa,oCAAKyF,UAAWC,qBAAOM,eAAmB,KACvD5H,aAAe4B,YAAc3B,sBAAsB9V,OAAS,GAC3D,oCAAK0d,oBAAA,EAAiBR,UAAWC,qBAAOQ,mBACtC,6BAAC,gBAAD,CAAQxtB,MAAO,CAAElP,gBAAiB4E,6BAAOo3B,MAAQD,QAASvC,aACxD,6BAAC,cAAD,CAAMmD,OAAK,EAACztB,MAAO,CAAE0tB,aAAc,IACjC,6BAAC,mBAAD,OAFJ,gBAMA,6BAAC,gBAAD,CAAQ1tB,MAAO,CAAElP,gBAAiB4E,6BAAOo3B,MAAQD,QAASrC,YACxD,6BAAC,cAAD,CAAMiD,OAAK,EAACztB,MAAO,CAAE0tB,aAAc,IACjC,6BAAC,0BAAD,OAFJ,UAIUlI,iBAAiB3V,OAJ3B,UAQH+X,8BACC,oCAAK+F,0BAAA,EAAuBZ,UAAWC,qBAAOY,qBAA9C,6CAID3gB,OAAS8Y,iCAAkBiB,yBAA2BM,YACrD,oCAAKyF,UAAWC,qBAAOa,oBAAqBC,sBAAA,GAC1C,6BAAC,0BAAD,CAAkB/I,MAAOA,OACvB,0DACE,wCACE,6BAAC,oBAAD,MACCmC,gBAAkB,kBAAoB,oCAEzC,wCACE,6BAAC,gBAAD,CAAQ2F,QAASnC,WAAYqD,SAAU/H,aACrC,6BAAC,yBAAD,MADF,UAIA,6BAAC,gBAAD,CAAQ6G,QAASlC,YACf,6BAAC,mBAAD,MADF,WAKA3E,aAAe,yDAKxBsB,WACC,uCAAQyF,UAAWC,qBAAOf,eAAgBY,QAASZ,eAAgB+B,2BAAA,GACjE,6BAAC,eAAD,MADF,IACgB,6DAEd,KACJ,6BAAC,uBAAD,KACE,6BAACvJ,eAAD,CACEG,OAAQqD,qBACRnD,WAAYqD,mBACZS,iBAAkBA,iBAClBrG,OAAQ,IAAIA,QACZ2D,UAAWA,UACXC,aAAcA,aACdqB,UAAWA,eAOvB9C,eAAeuJ,YAAe,SAAQxJ,eAAewJ,aAAexJ,eAAetO,MAAQ,MAE3F,MAAM+X,uBAAyBxiC,eAAM6jB,KAAKmV,gBAK1C,OAHAwJ,uBAAuBvN,cAAgB8D,eAAe9D,cAEtDuN,uBAAuBlG,UAAYvD,eAAeuD,UAC3CkG,wBAleT,iEACA,wDACA,oEACA,6DACA,6DACA,kEACA,4DACA,+BACA,uDACA,sEACA,8CAYA,oCACA,+BAEA,+DACA,iCACA,gCACA,yDACA,gEACA,uDACA,sDACA,8DACA,+DACA,mEACA,2DACA,6DAUA,yCACA,gCAOA,8C,8qCCyBe,UAA4B,eACzCC,eADyC,eAEzCC,eAFyC,UAGzCC,UAHyC,MAIzCC,MAJyC,qBAKzCC,qBALyC,cAMzCC,cANyC,iBAOzCC,iBAAmB,CAAEC,WAAY,GAPQ,kBAQzCC,kBARyC,MASzC3uB,MAAQ,CAAE0uB,WAAY,GATmB,MAUzCjN,MAVyC,cAWzCmN,cAXyC,cAYzCC,cAAgB,OAEhB,MAAM,sBAAEC,wBAA0B,uCAClC,IAAIC,0BAAmDR,sBAClDQ,2BAA6BtN,OAAS+M,gBACzCO,2BAA4B,oBAAAC,yBAAwB,CAClDvN,YACA+M,4BACAM,+CAIJ,MAAMG,cAAgBC,YAAYC,OAAON,eACnCO,eAAiBL,0BACjBM,0BAA4B5N,OAAS+M,cAAgB,CAAE/M,YAAO+M,4BAAeK,6BAAkB,KAC/FS,eAAiBF,eAAiBH,eAAiBI,0BACzD,IAAMD,eAAgBE,cACpB,OAAO,KAIT,IAAIC,aAAenB,eAAiBK,iBAAmBzuB,MAGvD,OAFAuvB,a,8ZAAe,CAAH,GAFaN,cAAgBjvB,MAAQ,CAAEwvB,OAAQ,WAElBD,cAGvC,oBAACE,SAAD,KACGnB,OAAS,oBAACoB,OAAD,KAASpB,OACnB,oBAACqB,oBAAD,CAAqB3vB,MAAOuvB,cACzBR,4BAA8BJ,mBAC7B,oBAAC,uBAAD,CACEJ,qBAAsBQ,0BACtB5Y,KAAM4Y,0BAA0B5Y,KAChCyZ,QAAShB,eACR,EAAGiB,oBAAWtB,qBAAsBuB,aACnC,oBAAC,8BAAD,CAAsBvB,qBAAsBuB,UAAWD,UAAWA,aAIvEP,eAAiBD,2BAChB,oBAAC,8BAAD,CACEhB,UAAWA,UACXuB,QAASzB,eACTkB,0BAA2BA,+B,4UApIvC,U,4WAAA,yBACA,iEAEA,sEACA,4CACA,4EACA,wEACA,wEACA,yEACA,iEACA,+D,sPAEA,MAAMI,SAAWM,0BAAOC,IAAK;;;EAIhBC,MAAQF,0BAAOC,IAAK;;sBAG1B,MAAME,GAAKH,0BAAOnb,CAAE;;;gBAIpB,MAAM+a,oBAAsBI,0BAAOC,IAAK;;;;;;;aAOlCt6B,sBAAO24B;;;;;;;;;;;;;;;kDAiBb,MAAM8B,oBAAsBJ,0BAAOK,IAAK;sBACzB16B,sBAAO26B;;;;;;;;;kDAW7B,MAAMX,OAASK,0BAAOC,IAAK;;yICpDZ,WAKb,MAAMpN,iBAAkB,cAAAyC,aAAaztB,OAAUA,MAAM0tB,OAAO1C,iBACtD0D,UAAW,cAAAC,eACjB,O,8ZAAA,EACE3D,kCACG,SAAA6D,oBAAmB,CAAE6J,8CAAoBC,2DAA4BjK,YAhB5E,wCACA,+BAEA,gC,4SCUe,WAIb,MAAMwI,uBAAwB,cAAAzJ,aAAaztB,OAAUA,MAAM0tB,OAAOwJ,uBAC5DxI,UAAW,cAAAC,eACjB,O,8ZAAA,EACEuI,8CACG,SAAArI,oBAAmB,CAAE+J,2DAA4BlK,YArBxD,wCACA,+BAEA,gC,qUCHA,uC,oKAQA,MAAMxlB,QAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACxD2vB,QAAU,CAAC,EAAG,EAAG,GACjBC,UAAY,CAAC,EAAG,EAAG,GACnBC,WAAa,CAAC,EAAG,EAAG,EAAG,GAE7B,SAASC,kBAAkBza,MACzB,OAAOA,KAAK0a,WAAW,KAAO1a,KAAKoT,MAAM,GAAKpT,KAGzC,MAAM2a,UAMXz8B,YAAY4O,IAAY,gEAJTlK,eAAKg4B,UAII,oEAFhB,GAGNn3B,KAAKqJ,GAAK2tB,kBAAkB3tB,IAG9B+tB,QACEj4B,eAAKk4B,SAASr3B,KAAKs3B,QACnBt3B,KAAKu3B,OAAQ,EAGf/N,IAAIhzB,SAAiBuG,aACnBoC,eAAKq4B,wBACHx3B,KAAKs3B,OACLv4B,eAAKyqB,IAAIuN,WAAYh6B,YAAYrK,EAAGqK,YAAYpK,EAAGoK,YAAYnK,EAAGmK,YAAY5B,GAC9E0D,eAAK2qB,IAAIqN,QAASrgC,SAAS9D,EAAG8D,SAAS7D,EAAG6D,SAAS5D,IAErDoN,KAAKu3B,OAAQ,EAGfE,mBAAmBC,QAEjB,OADAA,OAASV,kBAAkBU,QACtB13B,KAAK23B,OAGH33B,KAAK23B,OAAOF,mBAAmBC,QAF7B13B,KAAKqJ,KAAOquB,OAKvBzU,gBACE,OAAKjjB,KAAK23B,OAGH33B,KAAK23B,OAAO1U,gBAFVjjB,KAKXqO,MAAMupB,OAAqBC,MAAaH,QAEtC,GADAA,OAASV,kBAAkBU,QACvB13B,KAAKqJ,KAAOquB,OAQd,OAPAE,OAAOphC,SAAS9D,EAAImlC,MAAMrhC,SAAS9D,EACnCklC,OAAOphC,SAAS7D,EAAIklC,MAAMrhC,SAAS7D,EACnCilC,OAAOphC,SAAS5D,EAAIilC,MAAMrhC,SAAS5D,EACnCglC,OAAO76B,YAAYrK,EAAImlC,MAAM96B,YAAYrK,EACzCklC,OAAO76B,YAAYpK,EAAIklC,MAAM96B,YAAYpK,EACzCilC,OAAO76B,YAAYnK,EAAIilC,MAAM96B,YAAYnK,EACzCglC,OAAO76B,YAAY5B,EAAI08B,MAAM96B,YAAY5B,EAClCy8B,OAET,IAAK53B,KAAKu3B,MACR,OAAO,KAET,IAAKv3B,KAAKy3B,mBAAmBC,QAE3B,OAAO,KAGT,MAAM,SAAElhC,SAAF,YAAYuG,aAAgB86B,MAqClC,OAnCA14B,eAAKq4B,wBACHtwB,QACAnI,eAAKyqB,IAAIuN,WAAYh6B,YAAYrK,EAAGqK,YAAYpK,EAAGoK,YAAYnK,EAAGmK,YAAY5B,GAC9E0D,eAAK2qB,IAAIqN,QAASrgC,SAAS9D,EAAG8D,SAAS7D,EAAG6D,SAAS5D,IAIrDuM,eAAK24B,SAAS5wB,QAASlH,KAAKs3B,OAAQpwB,SAGpC/H,eAAK44B,eAAelB,QAAS3vB,SAO7B/H,eAAK64B,WAAWlB,UAAW5vB,SACvB/H,eAAK84B,YAAY/wB,SAAW,IAC9B4vB,UAAU,KAAO,GAEnBj4B,eAAKq5B,QAAQpB,UAAWA,WACxB33B,eAAKhM,MAAM+T,QAASA,QAAS4vB,WAE7B33B,eAAKg5B,YAAYpB,WAAY7vB,SAG7B0wB,OAAOphC,SAAS9D,EAAImkC,QAAQ,GAC5Be,OAAOphC,SAAS7D,EAAIkkC,QAAQ,GAC5Be,OAAOphC,SAAS5D,EAAIikC,QAAQ,GAC5Be,OAAO76B,YAAYrK,EAAIqkC,WAAW,GAClCa,OAAO76B,YAAYpK,EAAIokC,WAAW,GAClCa,OAAO76B,YAAYnK,EAAImkC,WAAW,GAClCa,OAAO76B,YAAY5B,EAAI47B,WAAW,GAE7B/2B,KAAK23B,OAGH33B,KAAK23B,OAAOtpB,MAAMupB,OAAQA,OAAQF,QAFhCE,Q,4BAMb,MAAMQ,QAAQ,6CACF,IADE,8BAaH,IAA0Bz6B,OAAO06B,OAAOr4B,KAAKs4B,UAXtD1uB,IAAI7J,KACFA,IAAMi3B,kBAAkBj3B,KACxB,IAAIhG,OAASiG,KAAKs4B,QAAQv4B,KAC1B,OAAIhG,SAGJA,OAAS,IAAIm9B,UAAUn3B,KACvBC,KAAKs4B,QAAQv4B,KAAOhG,OACbA,S,gBAMI,MAAiB,6CACpB,IAAIq+B,SADgB,2BA8BvBr4B,KAAgBC,KAAKs4B,QAAQ1uB,IAAI7J,MA9BV,8BA+BrB,IAAwBC,KAAKs4B,QAAQD,UA3B9CE,QAAQC,WAEN,MAAMnvB,GAAKmvB,UAAUC,eACfC,SAAWF,UAAUG,OAAOC,SAC5BC,GAAK74B,KAAKs4B,QAAQ1uB,IAAIP,KACtB,SAAEyvB,SAAF,YAAYC,aAAgBP,UAAUQ,UAC5CH,GAAGrP,IAAIuP,YAAaD,UACpBD,GAAGlB,OAAS33B,KAAKs4B,QAAQ1uB,IAAI8uB,UAU/BrqB,MAAMupB,OAAqBqB,SAAgBC,QAAiBxB,QAE1D,OADW13B,KAAKs4B,QAAQ1uB,IAAIsvB,SAClB7qB,MAAMupB,OAAQqB,SAAUvB,QAGpCyB,gBAAgBC,aACd,OAAOp5B,KAAK4J,IAAIwvB,aAAanW,mB,iJC7I1B,SAA4B+E,OACjC,OAAO,UAAAqR,OACL,sBAAUrR,MAAQ0J,OAChB,MAAM4H,QAAUC,aAAa7H,MAC7B,OAAO4H,QAAUA,QAAQE,eAAYtuB,M,uBA1B3C,mCACA,mCAGA,2DACA,4D,kFAEA,MAAMuuB,WAAaC,iBAAQC,aAAaC,kBAElCL,cAA2C,UAAAM,SAC9CnI,OAEC,MAAMoI,OAAS,IAAIC,gBAAON,YAC1B,IACE,OAAOK,OAAOE,KAAKtI,MAAMuI,QAAQ,GACjC,MAAO9wB,GACP,U,aAISowB,a,ioBCpBf,qEAEA,iPACA,I,IAAA,yB,IAAA,4B,iCACA,uEACA,iC,oYAAA,mO,aAEeW,sB,+TC+OR,SAAwBC,wBAA2C1wB,eACxE,MAAM,OAAEvX,OAAF,OAAU4J,OAAV,OAAkBs+B,QAAoBD,wBAATpoC,K,mkBAAnC,CAA4CooC,wBAA5C,8BACME,UAAsBnoC,QAAU,GACtC,IAAI6H,OACJ,GAAIsgC,UAAUpkB,QAA2B,MAAjBxM,eAAyBA,eAAiB,GAAqB,EAAhBA,cAAoB4wB,UAAUpkB,OAAQ,CAC3Glc,OAAS,CAAEugC,aAAc,IACzB,MAAMC,QAA0B,EAAhB9wB,cAChB1P,OAAOugC,aAAaE,KAAKH,UAAUE,UACnCxgC,OAAOugC,aAAaE,KAAKH,UAAUE,QAAU,IAC7CxgC,OAAOugC,aAAaE,KAAKH,UAAUE,QAAU,IAC7C,MAAM9lB,UAAsB3Y,QAAU,GAChC2+B,WAAahmB,UAAU8lB,SACvBG,WAAajmB,UAAU8lB,QAAU,GACjCI,WAAalmB,UAAU8lB,QAAU,GACnCE,YAAcC,YAAcC,aAC9B5gC,OAAO6gC,kBAAoB,CAACH,WAAYC,WAAYC,WAAY,IAElE,MAAME,gBAAkBC,wBAAwBV,QAC5CS,gBAAgB5kB,SAClBlc,OAAOghC,sBAAwBF,gBAAgBG,OAAO,CAACrlB,KAAMslB,aACvDlpC,KAAKkpC,aACPtlB,KAAKslB,WAAalpC,KAAKkpC,WAAWxxB,gBAE7BkM,MACN,KAGP,OAAO5b,Q,uFAQF,SAAgCxB,QACrC,MAAM,OAAE6hC,OAAF,KAAU3lC,KAAV,MAAgBL,MAAhB,SAAuB8mC,SAAvB,OAAiCtmC,OAAjC,WAAyCumC,YAAe5iC,OACxD+oB,QAAU8Z,0BAA0BhB,QAC1C,IAAK9Y,QACH,MAAO,GAGT,IAAI+Z,WAAa,EACjB,MAAMR,gBAAkBC,wBAAwBV,QAC1CkB,kBAAoBT,gBAAgBG,OAAO,CAACrlB,KAAM4G,QACtD5G,KAAK4G,MAAQ,IAAI5gB,MAAMvH,MAAQQ,QACxB+gB,MACN,IACH,IAAK,IAAI4lB,IAAM,EAAGA,IAAM3mC,OAAQ2mC,MAAO,CACrC,MAAMC,WAAaD,IAAML,SACzB,IAAK,IAAI3H,IAAM,EAAGA,IAAMn/B,MAAOm/B,MAAO,CACpC,MAAMkI,UAAYlI,IAAM4H,WAAaK,WACrC,IAAK,MAAMP,aAAaJ,gBAAiB,CACvC,MAAMa,OAASpa,QAAQ2Z,WAAWS,OAClC,GAAIA,OAAQ,CACV,MAAMC,WAAaD,OAAOE,KAAKnnC,KAAMgnC,WACrCH,kBAAkBL,WAAWI,YAAcM,YAI/CN,cAIJ,yBACK,UAAAxlB,MAAKtd,OAAQ,QACb+iC,oB,0FAzTP,mCACA,+DAGA,mCACA,0DACA,oDAMA,+B,kqBAEA,MAAMO,YAAc,GACdC,wBAA0B,CAAC,IAAK,IAAK,KAC9BC,SAAW,CACtBC,MAAO,EACPC,OAAQ,EACRC,MAAO,EACPC,MAAO,EACPC,QAAS,GAOJ,SAASC,UAAU5S,SAAkBxpB,QAC1C,OAAQwpB,UACN,KAAKsS,SAASK,QACZ,OAAO,IAAIE,uBAAcr8B,QAC3B,KAAK87B,SAASC,MACZ,OAAO,IAAIO,qBAAYt8B,QACzB,KAAK87B,SAASE,OACZ,OAAO,IAAIO,sBAAav8B,QAC1B,KAAK87B,SAASG,MACZ,OAAO,IAAIO,qBAAYx8B,QACzB,KAAK87B,SAASI,MACZ,OAAO,IAAIO,qBAAYz8B,QACzB,QACE08B,gBAAI/xB,MAAM,uBAAwB6e,WAIjC,SAAS2R,0BAA0BhB,QACxC,MAAMrgC,OAAS,GACf,kBAA6CqgC,OAAQ,OAA1C,KAAE7d,KAAF,SAAQkN,SAAR,OAAkBxpB,OAAS,GAAe,KACnDlG,OAAOwiB,MAAQ,CAAEkN,kBAAUxpB,cAAQy7B,OAAQW,UAAU5S,SAAUxpB,SAEjE,OAAOlG,OAGF,SAAS6iC,cAAclhC,OAE5B,OADAuI,QAAQ44B,OAAwB,IAAjBnhC,MAAMua,QACd6mB,SAASphC,MAAMi0B,MAAM,GAAI,IAG3B,SAASoN,UAAUxkC,OAAyDykC,iBAA2B,0BAE5G,MAAM,OAAE5C,OAAF,KAAU3lC,KAAV,MAAgBL,MAAhB,SAAuB8mC,SAAvB,OAAiCtmC,OAAjC,WAAyCumC,WAAzC,SAAqD8B,SAAW,GAAhE,aAAoEC,cAAiB3kC,OACrF4kC,kBAAoB/B,0BAA0BhB,QAEpD,IAAK,MAAMgD,gBAAgBtB,wBAAyB,CAClD,IAAKqB,kBAAkBC,cAErB,OADAT,gBAAI/xB,MAAO,iCAAgCwyB,iBACpC,CAAElrC,OAAQ,GAAI4J,OAAQ,IACxB,GAAIqhC,kBAAkBC,cAAc3T,WAAasS,SAASK,QAE/D,OADAO,gBAAI/xB,MAAO,aAAYwyB,8CAA8CD,kBAAkBC,cAAc3T,aAC9F,CAAEv3B,OAAQ,GAAI4J,OAAQ,IAGjC,MACEpJ,GAAKuN,OAAQo9B,SACb1qC,GAAKsN,OAAQq9B,SACb1qC,GAAKqN,OAAQs9B,SACbpsC,KAAO8O,OAAQu9B,WAAc,IAC3BL,kBAEEM,UAAuBR,SAASQ,UAClCR,SAASQ,UACI,MAAbD,UACA,CAAE9V,KAAM,OACR,CAAEA,KAAM,OAAQgW,UAAWC,8CAEzBzrC,OAAS,IAAIsC,WAAWJ,MAAQQ,OAAS,IACzCkH,OAAS,IAAItH,WAAWJ,MAAQQ,OAAS,GAE/C,IAAIgpC,cAAe,EACfC,cAAe,EACfC,mBAAqBC,IACrBC,oBAAsBD,IACH,aAAnBN,UAAU/V,MAA0C,YAAnB+V,UAAU/V,OACnB,MAAtB+V,UAAUQ,WACZL,cAAe,EACfE,mBAAqBL,UAAUQ,UAEP,MAAtBR,UAAUS,WACZL,cAAe,EACfG,mBAAqBP,UAAUS,WAOnC,MAAMC,OAA4B,QAAnBV,UAAU/V,MAA+B,MAAb8V,UAErCY,aAAkC,SAAnBX,UAAU/V,KACzB2W,gBAAqC,SAAnBZ,UAAU/V,KAAkBkV,cAAca,UAAUC,WAAa,EACnFY,WAAcD,iBAAmB,GAAM,IACvCE,WAAcF,iBAAmB,EAAK,IACtCG,WAA+B,IAAlBH,gBAEbI,iBACe,YAAnBhB,UAAU/V,MAAyC,aAAnB+V,UAAU/V,KAA1C,8BACIyV,kBAAkBM,UAAUiB,mBADhC,iCACI,sBAAyChD,OACzC,KACF+B,UAAUiB,aAAeD,kBAC3B9B,gBAAIgC,KAAM,eAAclB,UAAUiB,uCAEpC,MAAME,iBAAmBH,iBAAmB,IAAII,aAAazqC,MAAQQ,QAAUinC,YAE/E,IAAIR,WAAa,EACjB,IAAK,IAAIE,IAAM,EAAGA,IAAM3mC,OAAQ2mC,MAC9B,IAAK,IAAIhI,IAAM,EAAGA,IAAMn/B,MAAOm/B,MAAO,CACpC,MAAMuL,eAAiBvD,IAAML,SAAW3H,IAAM4H,WACxCle,GAAKxoB,KAAKqqC,eAAiBzB,SAC3BjgB,GAAK3oB,KAAKqqC,eAAiBzB,QAAU,GACrC0B,GAAKtqC,KAAKqqC,eAAiBzB,QAAU,GACrC2B,GAAKvqC,KAAKqqC,eAAiBzB,QAAU,GAK3C,GAAoB,MAAV,IAAL2B,KAAuC,MAAV,IAALD,IAC3B,SAGF,MAAME,WAA0B,GAAb5D,WAGnBnpC,OAAO+sC,YAAchiB,GACrB/qB,OAAO+sC,WAAa,GAAK7hB,GACzBlrB,OAAO+sC,WAAa,GAAKF,GACzB7sC,OAAO+sC,WAAa,GAAKD,GAGzB9sC,OAAO+sC,WAAa,GAAKxqC,KAAKqqC,eAAiBxB,SAC/CprC,OAAO+sC,WAAa,GAAKxqC,KAAKqqC,eAAiBxB,QAAU,GACzDprC,OAAO+sC,WAAa,GAAKxqC,KAAKqqC,eAAiBxB,QAAU,GACzDprC,OAAO+sC,WAAa,GAAKxqC,KAAKqqC,eAAiBxB,QAAU,GAGzDprC,OAAO+sC,WAAa,GAAKxqC,KAAKqqC,eAAiBvB,SAC/CrrC,OAAO+sC,WAAa,GAAKxqC,KAAKqqC,eAAiBvB,QAAU,GACzDrrC,OAAO+sC,WAAa,IAAMxqC,KAAKqqC,eAAiBvB,QAAU,GAC1DrrC,OAAO+sC,WAAa,IAAMxqC,KAAKqqC,eAAiBvB,QAAU,GAG1D,MAAM2B,WAA0B,EAAb7D,WACnB,GAAI+C,aACFtiC,OAAOojC,YAAcZ,WACrBxiC,OAAOojC,WAAa,GAAKX,WACzBziC,OAAOojC,WAAa,GAAKV,gBACpB,GAAIL,OAETriC,OAAOojC,WAAa,GAAKzqC,KAAKqqC,eAAiBtB,WAAaN,aAAe,EAAI,IAC/EphC,OAAOojC,WAAa,GAAKzqC,KAAKqqC,eAAiBtB,UAAY,GAC3D1hC,OAAOojC,WAAa,GAAKzqC,KAAKqqC,eAAiBtB,WAAaN,aAAe,EAAI,QAC1E,KAAIuB,iBAYT,MAAM,IAAI/mC,MAAO,yBAAwB+lC,UAAU/V,MAZxB,CAC3B,MAAMyX,gBAAkBV,iBAAiB7C,KAAKnnC,KAAMqqC,gBACpDF,iBAAiBvD,YAAc8D,gBAC1BjuB,OAAO7T,MAAM8hC,mBACZvB,eACFE,mBAAqB5sC,KAAK8D,IAAI8oC,mBAAoBqB,kBAEhDtB,eACFG,mBAAqB9sC,KAAKwyB,IAAIsa,mBAAoBmB,oBAMxD9D,aAIJ,GAAIoD,iBAAkB,CAKpB,MAAMW,gBAAkBpB,mBAAqBF,oBAAsBC,IAMnE,GAAuB,aAAnBN,UAAU/V,KAAqB,CACjC,MAAM2X,eAAiBzC,cAAca,UAAU6B,UACzCC,eAAiB3C,cAAca,UAAU+B,UAC/C,IAAK,IAAI/sC,EAAI,EAAGA,EAAI4oC,WAAY5oC,IAAK,CACnC,MAAMwN,OAAa,EAAJxN,EACT+I,IAAMojC,iBAAiBnsC,GACvBgtC,IAAMvuC,KAAKwyB,IAAI,EAAGxyB,KAAK8D,KAAKwG,IAAMsiC,oBAAsBsB,gBAAiB,IAEzEM,KAAQL,gBAAkB,GAAM,IAChCM,KAAQN,gBAAkB,EAAK,IAC/BO,KAAwB,IAAjBP,eAEPQ,KAAQN,gBAAkB,GAAM,IAChCO,KAAQP,gBAAkB,EAAK,IAC/BQ,KAAwB,IAAjBR,eAEbzjC,OAAOmE,SAAU,QAAA+/B,MAAKP,IAAKC,KAAMG,MACjC/jC,OAAOmE,OAAS,IAAK,QAAA+/B,MAAKP,IAAKE,KAAMG,MACrChkC,OAAOmE,OAAS,IAAK,QAAA+/B,MAAKP,IAAKG,KAAMG,WAIpC,IAAuB,YAAnBtC,UAAU/V,KAQjB,MAAM,IAAIhwB,MAAO,yBAAwB+lC,UAAU/V,MAPnD,IAAK,IAAIj1B,EAAI,EAAGA,EAAI4oC,WAAY5oC,IAAK,CACnC,MAAMwN,OAAa,EAAJxN,EACT+I,IAAMojC,iBAAiBnsC,GAE7BwtC,gBAAgBnkC,OAAQmE,OADZ/O,KAAKwyB,IAAI,EAAGxyB,KAAK8D,KAAKwG,IAAMsiC,oBAAsBsB,gBAAiB,OAQrF,wBACK7mC,OADL,CAEErG,OAAQ,IAAIM,aAAaN,OAAOyE,OAAQ,EAAgB,EAAb0kC,YAC3Cv/B,gBAyCG,SAASg/B,wBAAwBV,QACtC,MAAM8F,UAAY9F,OAAOlxB,IAAKi3B,OAAUA,MAAM5jB,MAC9C,OAAO,UAAA6jB,YAAWF,UAAW,CAAC,MAAO,IAAK,IAAK,MAwC1C,SAASD,gBAAgBnkC,OAA+BmE,OAAgBw/B,KAC7E,MAAMY,EAAgB,GAAX,EAAIZ,KAAa,EACtBhtC,EAAIvB,KAAKovC,MAAMD,GACrB,IAAIE,EAAIF,EAAI,EAEI,IAAP,EAAJ5tC,KACH8tC,EAAI,EAAIA,GAEV,MAAM1mB,EAAI,EAAI0mB,EACd,IAAInvC,EAAI,EACJC,EAAI,EACJC,EAAI,EACJmB,GAAK,GACPrB,EAAIyoB,EACJxoB,EAAI,EACJC,EAAI,GACW,IAANmB,GACTrB,EAAI,EACJC,EAAIwoB,EACJvoB,EAAI,GACW,IAANmB,GACTrB,EAAI,EACJC,EAAI,EACJC,EAAIuoB,GACW,IAANpnB,GACTrB,EAAIyoB,EACJxoB,EAAI,EACJC,EAAI,IAEJF,EAAI,EACJC,EAAIwoB,EACJvoB,EAAI,GAENwK,OAAOmE,QAAc,IAAJ7O,EACjB0K,OAAOmE,OAAS,GAAS,IAAJ5O,EACrByK,OAAOmE,OAAS,GAAS,IAAJ3O,E,0BAKvB,MAIakvC,mBAAoB,yBAAazD,UAAW,CAAE0D,QAJjC,CAAC7nC,EAAGtH,IACrBsH,EAAEnE,OAASnD,EAAEmD,OAAQ,UAAAgsC,SAAQ7nC,EAAEqkC,SAAU3rC,EAAE2rC,UAGmCyD,QAAS,K,+FCjXhG,IAAIC,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,kJCVrC,SAA6BtkB,MAClC,MAAO,mBAAmBwkB,KAAKxkB,Q,6ICAjC,gEACA,+BACA,O,4WAAA,yBACA,qEACA,kCACA,6DAEA,sEACA,+D,kqBAEA,MAAMjM,WAAa,4DAEnB,SAAS0wB,YAAYvpC,MACnB,OAAO,sBAAUA,KAAM,CAAEwpC,OAAQ3wB,WAAYsT,KAF9B,KAEkD,EAGnE,MAAM1vB,UAAY4oC,SAAS1J,4BAAOl/B,WA6ClC,SAASgtC,eAAe3kB,MACtB,OAAO,SAASjN,MACd,GAAoB,iBAATA,KACT,OAAOA,KACF,GAAIA,MAAwB,iBAATA,MAA2C,iBAAfA,KAAK7V,MACzD,OAAO6V,KAAK7V,MAEd,MAAM,IAAI/B,MAAO,4CAA2C6kB,OAIjD,MAAM4kB,qBAAqBC,qBAaxC3mC,YAAYlJ,OACV8vC,MAAM9vC,OAD8B,kFAXd,GAWc,oCAVf,GAUe,gCA4C3B,KACT,GAAIyO,KAAKshC,aACP,OAEF,MAAM,aAAEC,cAAiBvhC,KAAKzO,MAE5ByO,KAAKwhC,cAAc3gB,SACnB7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,OAChCh1B,SAAS6+B,gBAAkB1hC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,QAE3D73B,KAAK2hC,SAAS,CAAEC,SAAS,IACrBL,cACFvhC,KAAK2hC,SAAS,CAAEloC,MAAO,QAxDS,oCAgEtBooC,QACd,GAAI7hC,KAAKzO,MAAMuwC,kBACb,OAEF,GAAI9hC,KAAKhC,MAAM4jC,QACb,OAEF,MAAMn7B,UAAajE,IACjBK,SAASk/B,oBAAoB,UAAWt7B,WAAW,GAGjDzG,KAAKwhC,cAAc3gB,SACnB7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,OAEhCh1B,SAAS6+B,gBAAkB1hC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,QAGzD73B,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAMmK,iBAAmBhiC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAMoK,eAE/FjiC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAMqK,SACtC1/B,EAAE2/B,kBACF3/B,EAAEmwB,kBAGJ3yB,KAAK2hC,SAAS,CAAEC,SAAS,MAG7B/+B,SAASu/B,iBAAiB,UAAW37B,WAAW,KA3FZ,+BA8F5B,KACJzG,KAAKqiC,aAIPriC,KAAKwhC,cAAc3gB,SACnB7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,OAChCh1B,SAAS6+B,gBAAkB1hC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,QAK7D73B,KAAK2hC,SAAS,CAAEC,SAAS,EAAOnoC,WAAOyR,IACnClL,KAAKzO,MAAMmV,QACb1G,KAAKzO,MAAMmV,YA5GuB,iCAgHzBm7B,QACP7hC,KAAKzO,MAAM+wC,SACbtiC,KAAKzO,MAAM+wC,SAAST,MAAOA,MAAMtiC,OAAO9F,OAExCuG,KAAK2hC,SAAS,CAAEloC,MAAOooC,MAAMtiC,OAAO9F,UApHF,iCA2H1B,CAACA,MAAe6V,QACtBtP,KAAKwhC,cAAc3gB,SAAW7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,QAChE73B,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAM0K,QACtCviC,KAAK2hC,SAAS,CAAEC,SAAS,EAAMnoC,WAAOyR,GAAa,KACjDlL,KAAKzO,MAAMixC,SAAS/oC,MAAO6V,KAAMtP,WA/HD,iCAsIzB6hC,QACPA,MAAMY,cAAcC,UAAY,GAGlC1iC,KAAK2hC,SAAS,CAAEgB,cAAc,MA1II,kCA8IxBd,SACM,WAAdA,MAAM9hC,KAAmC,UAAd8hC,MAAM9hC,KAA+C,IAA5BC,KAAKzO,MAAMkuB,MAAMxJ,SACvEjW,KAAK4iC,SA9IP5iC,KAAKwhC,cAAgB1vC,eAAM+wC,YAC3B7iC,KAAKhC,MAAQ,CAAE4jC,SAAS,EAAOe,cAAc,GAM/Cp6B,qBAEIvI,KAAKwhC,cAAc3gB,SACnB7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAKqB,MAChC9iC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAKqB,KAAKC,cAAgB/iC,KAAKwhC,cAAc3gB,QAAQ4gB,KAAKqB,KAAKE,cAC1FhjC,KAAKhC,MAAM2kC,cAEX3iC,KAAK2hC,SAAS,CAAEgB,cAAc,IAIlCM,kBAAkBjB,eAAwBC,cACpCjiC,KAAKwhC,cAAc3gB,SAAW7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,OAChE73B,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAMoL,kBAAkBjB,eAAgBC,cAE1EjiC,KAAK2hC,SAAS,CAAEC,SAAS,IAG3BW,QACMviC,KAAKwhC,cAAc3gB,SAAW7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,OAChE73B,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAM0K,QAI1CK,OACM5iC,KAAKwhC,cAAc3gB,SAAW7gB,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,OAChE73B,KAAKwhC,cAAc3gB,QAAQ4gB,KAAK5J,MAAM+K,OAExC5iC,KAAKqiC,aAAc,EACnBriC,KAAK2hC,SAAS,CAAEC,SAAS,IACrB5hC,KAAKzO,MAAMmV,QACb1G,KAAKzO,MAAMmV,SA4GfR,SAAS,sBACP,MAAM,gBACJg9B,gBADI,SAEJC,SAFI,aAGJC,aAHI,YAIJC,YAJI,MAKJ5jB,MALI,YAMJ6jB,YANI,aAOJC,aAPI,MAQJ9pC,OAAK,0BAAGuG,KAAKhC,MAAMvE,aAAd,wCAAwB8pC,aAAeF,YAAYE,cAAgB,MARpE,WASJC,WAAa/pC,MATT,kBAUJgqC,kBAVI,SAWJC,SAXI,UAYJC,UAAY,GAZR,WAaJC,WAAa,IACX5jC,KAAKzO,MACHsyC,mBAAoB,wBAAYpkB,MAAO+jB,WAAYH,YAAaI,oBAEhE,SAAEK,SAAwC,IAA7BD,kBAAkB5tB,QAAiBjW,KAAKzO,MAErDwyC,KAAO/jC,KAAKhC,MAAM4jC,SAAWiC,kBAAkB5tB,OAAS,EACzD8tB,OACH/jC,KAAKqiC,aAAc,GAGrB,MAAM2B,kBAAoC,MAAhBT,aAAuBH,aAAaG,cAAgB,KAC9E,OACE,6BAAC,2BAAD,CACEQ,KAAMA,KACNtkB,MAAOokB,kBACPT,aAAcA,aACd3f,WAAY,CAACnU,KAAM20B,iBACjB,MAAMC,UAAYd,aAAa9zB,MAC/B,OACE,oCACEvP,IAAKmkC,UACLC,mBAAkBF,cAClBG,uBAAA,EACAjR,WAAW,uBAAGC,4BAAOiR,iBAAkB,CACrC,CAACjR,4BAAOkR,aAAcL,cACtB,CAAC7Q,4BAAOmR,UAAgC,MAArBP,mBAA6BE,YAAcF,qBAE/DX,YAAY/zB,QAInBgzB,SAAUtiC,KAAKwkC,UACfhC,SAAUxiC,KAAKykC,UACfhrC,MAAOA,OAAS,GAChBirC,WAAY,CACVvR,WAAW,uBAAGC,4BAAOyE,MAAO,CAAE,CAACzE,4BAAOuR,YAAab,WACnDc,YAAa,MACbC,eAAgB,MAChBC,WAAY,QACZxB,wBACAl9B,MAAO,cAAF,GACAw9B,WADA,CAEHtzB,sBACA1a,SAxRK,GAyRLxB,MAAO+uC,SAAWjyC,KAAKwyB,IAAIsd,YAAYvnC,OAAS6pC,aAAe,IAAKI,UAAY,SAElFqB,QAAS/kC,KAAKglC,SACdt+B,OAAQ1G,KAAKilC,QACbz+B,YAAaxG,KAAKklC,aAClBt+B,UAAW5G,KAAKmlC,YAElBC,WAAY,CAACC,UAAW7pC,IAAK4K,SAI3B,MAAMk/B,iBAAmBp0C,KAAKq0C,KAAKzgC,OAAO0gC,YAActxC,UAAY,IAC9DuxC,gBACJzlC,KAAKhC,MAAM2kC,cAAgB0C,UAAUpvB,QAA6B,EAAnBqvB,iBAC3CD,UACAA,UAAU1V,MAAM,EAAG2V,kBAAkB/zB,OAAO8zB,UAAU1V,OAAO2V,mBAI7DlxC,MAAQ4sC,YAAYqC,aAAY,UAAAqC,OAAM7B,kBAAoBv0B,MAAS+zB,YAAY/zB,MAAM2G,UAAY,GACjGvF,UAAa,uBAAsBtK,MAAMzF,SAE/C,OACE,oCACEwyB,UAAWC,4BAAOC,KAClBtzB,IAAKmjC,gBACL98B,MAEEA,MAAM1L,KAAOtG,OAAS0Q,OAAO6gC,WAA7B,iBACShC,UAAcv9B,MADvB,CAC8BhS,YAAOqc,SAAU,OAAQC,sBADvD,iBAESizB,UAAcv9B,MAFvB,CAE8BhS,YAAOqc,SAAU,OAAQC,oBAAWhW,KAAM,OAAQ2V,MAAO,IAEzFu1B,SAAU5lC,KAAK6lC,WAGf,oCAAK3T,aAAc,IAAOlyB,KAAKqiC,aAAc,EAAOlQ,aAAc,IAAOnyB,KAAKqiC,aAAc,GACzFoD,mBAKTK,kBAAoBhD,MAASjgC,SAASkjC,OAAQ,YAAAC,cAAalD,KAAMjgC,SAASkjC,MAC1Ez/B,IAAKtG,KAAKwhC,cACV7L,aAAc,CAAEsQ,KAAM,WAAYl1B,SAAU,SAAU+jB,WAAY,M,6CAvQrDqM,a,eAKG,CACpBkC,YAAanC,eAAe,eAC5BkC,aAAclC,eAAe,gBAC7BuC,mBAAmB,EACnBlC,cAAc,EACdmC,SAAU,O,oTC1DP,UAAiC,MACtC7b,MADsC,cAEtC+M,cAFsC,sBAGtCM,wBAMA,MAAMgR,wCAA0CC,6CAA6CjR,uBACvFkR,cAAgBC,iBAAiB,CAAExe,YAAO+M,8BAChD,OAAOsR,wCAAwCE,gB,yDAnCjD,I,IAAA,+BACA,e,IAAA,2B,iCAOO,SAASC,kBAAiB,MAAExe,MAAF,cAAS+M,gBACxC,MAAQ,GAAE/M,SAAS0H,QAAQqF,iBAGtB,SAASrF,QAAQqF,eACtB,MAAO,IAAIA,eAAe0R,UAAUC,KAAK,KAGpC,SAASC,0CACdtR,uBAEA,OAAO,UAAAuR,OAAMvR,sBAAuB,EAAGrN,YAAO+M,+BAAoByR,iBAAiB,CAAExe,YAAO+M,+BAG9F,MAAMuR,8CAA+C,yBAAQK,2CA0BtD,MAAME,2CAA4C,0BAVzD,SAA2CxR,uBACzC,OAAOA,sBAAsB8F,OAAO,CAACrlB,MAAQ4G,UAAMsL,YAAO+M,gCACnDjf,KAAK4G,QACR5G,KAAK4G,MAAQ,IAEf5G,KAAK4G,MAAMie,KAAK,CAAE3S,YAAO+M,4BAAerY,YACjC5G,MACN,O,mOCeU,SAAkCpkB,OAAkE,iEACjH,MAAM,QAAEo4B,QAAF,SAAWsT,SAAW,GAAtB,cAA0B0J,cAA1B,iBAAyCC,kBAAqBr1C,MAE9Ds1C,mBAAoB,SAAAjtC,aACvBktC,WACCF,iBAAkBG,aAAD,iBACZA,YADY,CAEftJ,UAA+B,mBAAbqJ,SAA0BA,SAASC,YAAYtJ,WAAaqJ,aAGlF,CAACF,mBAGGI,OAASrd,SAAWA,QAAQyQ,QAAUzQ,QAAQyQ,OAAO6M,KAAK,EAAG1qB,aAAoB,QAATA,MACxE2qB,kBAAoBvd,SAAWA,QAAQyQ,SAAnB,6BAA6BzQ,QAAQyQ,OAAO+M,KAAK,EAAG5qB,aAAoB,QAATA,aAA/D,gCAA6B,qBAAmDA,MACpGkhB,UAAuBR,SAASQ,UAClCR,SAASQ,UACTuJ,OACA,CAAEtf,KAAM,OACR,CAAEA,KAAM,OAAQgW,UAhDY,WAkDhC,OACE,6BAAC,cAAD,CAAMnK,KAAG,GACP,6BAAC,EAAA6T,oBAAD,CAAqBnK,SAAUA,SAAUoK,iBAAkB,EAAGV,cAAeA,gBAC7E,6BAAC,EAAAW,oBAAD,CAAqBrK,SAAUA,SAAU0J,cAAeA,gBAExD,6BAAC,QAAAY,OAAD,iBACA,6BAAC,cAAD,CAAMhM,KAAG,EAACn1B,MAAO,CAAEohC,eAAgB,gBAAiB1T,aAAc,QAChE,6BAAC,0BAAD,CACE2T,WAA+B,SAAnBhK,UAAU/V,KAAkB,OAAS,OACjD4a,SAAWj5B,IACTw9B,kBAAmBa,cACV,SAAPr+B,GACI,CACEqe,KAAM,OACNgW,UACEgK,cAAsC,aAAtBA,aAAahgB,KAAsBggB,aAAapI,SAjEpD,WAmEhB0H,OACA,CAAEtf,KAAM,OACRwf,kBACA,CAAExf,KAAM,UAAWgX,WAAYwI,mBAC/B,MAGRzY,QAAS,CAAC,CAAEplB,GAAI,OAAQqrB,MAAO,QAAU,CAAErrB,GAAI,OAAQqrB,MAAO,iBAGhE,6BAAC,cAAD,CAAM6G,KAAG,EAACn1B,MAAO,CAAEuhC,OAAQ,iBAAkBC,WAAY,WACnC,SAAnBnK,UAAU/V,KAET,6BAAC,qBAAD,CACEhsB,MAAO+hC,UAAUC,UACjB4E,SAAW5E,WAAcmJ,kBAAkB,CAAEnf,KAAM,OAAQgW,wBAI7D,6BAAC,QAAAmK,OAAD,CACEpwC,KAAyB,QAAnBgmC,UAAU/V,KAAiB,MAAQ+V,UAAUiB,WACnDjlC,MAA0B,QAAnBgkC,UAAU/V,KAAiB,MAAQ+V,UAAUiB,WACpD4D,SAAW7oC,OACTotC,kBACGa,cACe,QAAVjuC,MACK,CAAEiuB,KAAM,OAEbggB,cAAsC,aAAtBA,aAAahgB,MAG7BggB,cAAsC,YAAtBA,aAAahgB,KAF/B,iBAAYggB,aAAZ,CAA0BhJ,WAAYjlC,QAKjC,CAAEiuB,KAAM,UAAWgX,WAAYjlC,SAI1CkwB,QAEEA,QAAQyQ,OAAOlxB,IAAI,EAAGqT,aACpB,6BAAC,QAAAurB,OAAD,CAAQ/nC,IAAKwc,KAAM9iB,MAAO8iB,MACvBA,OAHL,OAWS,aAAnBkhB,UAAU/V,MAA0C,YAAnB+V,UAAU/V,OAC3C,6BAAC,cAAD,CAAM6L,KAAG,EAACntB,MAAO,CAAE0tB,aAAc,QAC/B,6BAAC,QAAAyT,OAAD,oBACA,6BAAC,cAAD,CAAMhM,KAAG,EAACn1B,MAAO,CAAE0uB,WAAY,QAC7B,6BAAC,cAAD,CAAMyG,KAAG,EAACn1B,MAAO,CAAE6/B,KAAM,WAAY2B,WAAY,WAAYG,YAAa,SAA1E,MAEE,6BAACC,iBAAD,CACEvuC,MAAK,4BAAEgkC,UAAUQ,gBAAZ,4CAAwB,GAC7BqE,SAAU,EAAG/iC,QAAU9F,gBACrBotC,kBAAmBa,cAAD,iBACbA,aADa,CAEhBzJ,SAAoB,KAAVxkC,MAAe,MAAQA,YAKzC,6BAAC,cAAD,CAAM8hC,KAAG,EAACn1B,MAAO,CAAE6/B,KAAM,WAAY2B,WAAY,aAAjD,MAEE,6BAACI,iBAAD,CACEvuC,MAAK,4BAAEgkC,UAAUS,gBAAZ,4CAAwB,GAC7BoE,SAAU,EAAG/iC,QAAU9F,gBACrBotC,kBAAmBa,cAAD,iBACbA,aADa,CAEhBxJ,SAAoB,KAAVzkC,MAAe,MAAQA,aAM3C,6BAAC,eAAD,CACEguC,WAAYhK,UAAU/V,KACtB4a,SAAWj5B,IACTw9B,kBAAkB,EAAGnI,sBAAYT,kBAAUC,qBAClC,YAAP70B,GACI,CAAEqe,KAAM,UAAWgX,sBAAYT,kBAAUC,mBACzC,CAAExW,KAAM,WAAYgX,sBAAYT,kBAAUC,kBAAUoB,SAAU,UAAWE,SAAU,YAG3F/Q,QAAS,CACP,CACEplB,GAAI,UACJqrB,MAA0B,YAAnB+I,UAAU/V,KAAqB,6BAACugB,YAAD,gBAAqC,WAE7E,CAAE5+B,GAAI,WAAYqrB,MAAO,uBAKb,aAAnB+I,UAAU/V,MACT,oCAAKthB,MAAO,CAAEuhC,OAAQ,QACpB,6BAAC,wBAAD,CACErI,SAAU7B,UAAU6B,SACpBE,SAAU/B,UAAU+B,SACpB8C,SAAU,EAAGhD,kBAAUE,qBACrBqH,kBAAmBa,cAAD,eAAqBhgB,KAAM,YAAeggB,aAA1C,CAAwDpI,kBAAUE,0B,kCA1MlG,W,4WAAA,yBACA,iEAEA,4BACA,kCACA,+DACA,uDACA,kEACA,wDACA,mEACA,kC,6rBAqBkC,UAUlC,MAAMwI,kBAAmB,6BAAOE,gBAAQC,MAAM,CAAE90B,KAAM,SAAUiwB,YAAa,QAAU;;;;EAMjF2E,YAAcn2C,eAAM6jB,MAAK,UAAuB/jB,SAAU6F,OAC9D,MAAMsC,OAAS,GACf,IAAK,IAAItH,EAAI,EAAGA,EAAIgF,KAAKwe,OAAQxjB,IAC/BsH,OAAOygC,KAEL,qCAAMz6B,IAAKtN,EAAG2T,MAAO,CAAE1K,MAAQ,OAAM,IAAajJ,GAAKgF,KAAKwe,OAAS,GAA1B,oBACxCxe,KAAKhF,KAIZ,OAAOsH,W,kJCtCF,UAA6B,iBAClCstC,iBADkC,kBAElCe,kBAAoB,SAFc,SAGlCnL,SAHkC,cAIlC0J,gBAUA,MAAM0B,kBAAsCn9B,IAAvB+xB,SAAStZ,UAA0B,GAAKsZ,SAAStZ,UAEhE2kB,WAAarL,SAASqL,WACtBC,cAAgBD,YAA0BF,kBAC1CI,eAAiB,CAAC,SAAU,UAAUt/B,IAAKi3B,OAC/C,6BAAC,QAAA2H,OAAD,CAAQ/nC,IAAKogC,MAAO1mC,MAAO0mC,QACxB,UAAAsI,YAAWtI,SAIhB,OACE,6BAAC,cAAD,CAAM5M,KAAG,GACP,6BAAC,QAAAgU,OAAD,mBACA,6BAAC,QAAAW,OAAD,CACEQ,YAAU,mBACVr1B,KAAK,SACLiwB,YAAa+D,iBAAiBsB,WAC9BlvC,MAAO4uC,aACPrzC,IAAK,EACL0uB,IAAK,GACLklB,KAAM,EACNtG,SAAW9/B,IACT,MAAMqmC,cAAgBxrC,MAAMyrC,WAAWtmC,EAAEjD,OAAO9F,QAChDktC,cAAc,YAAakC,aAAeC,WAAWtmC,EAAEjD,OAAO9F,YAASyR,MAI3E,6BAAC,QAAAq8B,OAAD,oBACA,6BAAC,QAAAM,OAAD,CACEpwC,MAAM,UAAAgxC,YAAWF,eACjB9uC,MAAO8uC,cACPjG,SAAW7oC,OAAUktC,cAAc,aAAcltC,QAChD+uC,kB,4BAMF,UAA6B,SAClCvL,SADkC,cAElC0J,gBAKA,MAAMoC,UAAY9L,SAAS8L,UACrBC,oBAA+B99B,IAAd69B,UAA0B,GAAKA,UAEtD,OACE,6BAAC,cAAD,CAAMxV,KAAG,GACP,6BAAC,QAAAgU,OAAD,6BACA,6BAAC,QAAA0B,aAAD,wEACA,6BAAC,QAAAf,OAAD,CACE70B,KAAK,SACLiwB,YAAY,IACZ7pC,MAAOuvC,eACPh0C,IAAK,EACL4zC,KAAM,GACNtG,SAAW9/B,IACT,MAAMqmC,cAAgBxrC,MAAMyrC,WAAWtmC,EAAEjD,OAAO9F,QAChDktC,cAAc,YAAakC,aAAeC,WAAWtmC,EAAEjD,OAAO9F,YAASyR,Q,8FA0B1E,SAAyBue,UAC9B,OAAmD,MAA5Cyf,+BAA+Bzf,W,mEAxHxC,mCACA,O,4WAAA,yBACA,+BAEA,kCACA,2EACA,wEACA,4EACA,sEACA,6EACA,gEACA,uDACA,kCACA,oCAEA,yC,kqBA4FO,SAASyf,+BAA+Bzf,UAS7C,OARgB,cAAH,CACX,CAAClD,uCAAuB4iB,kCACxB,CAAC3iB,wCAAwB4iB,4BACzB,CAACC,sCAAsBC,iCACvB,4BAA6BC,8BAC7B,iCAAkCA,gCAC/B,cAAAzlB,kBAAiBE,gBAAgBuB,oBAAoBikB,sBAE3C/f,U,4CAnGkC,kBAiHnD,MAAMggB,oBAAsB33C,eAAM6jB,MAAY,UAA6B,MACzEkS,MADyE,QAEzE8B,QAFyE,SAGzEsT,SAHyE,iBAIzE2J,mBAEA,MAAMD,eAAgB,SAAA/sC,aACpB,CAACqhC,UAAmBxhC,SAClBmtC,iBAAkBG,aAAD,iBAAuBA,YAAvB,CAAoC,CAAC9L,WAAYxhC,UAEpE,CAACmtC,mBAGG8C,OAASR,+BAA+BrhB,MAAM4B,UACpD,IAAKigB,OACH,MAAM,IAAIhyC,MAAO,0CAAyCmwB,MAAM4B,UAGlE,OACE,oCAAK0J,UAAWC,mCAAOuW,WACrB,mCAAIxW,UAAWC,mCAAOoG,WAAY3R,MAAMtL,MACxC,mCAAI4W,UAAWC,mCAAO3J,UACpB,uCAAK5B,MAAM4B,WAEb,6BAAC,uBAAD,KACE,6BAACigB,OAAD,CACE/f,QAASA,QACTsT,SAAUA,UAAY,GACtB0J,cAAeA,cACfC,iBAAkBA,oBAGtB,uCAAQ3T,QAAS,IAAM2T,iBAAiB,KAAxC,yB,cAKS,QAAAgD,KAAIH,qB,4PC/FZ,SAA+BpvC,OAAiC0L,OACrE,MAAMsuB,YAAcwV,eAAexvC,OAAOyvC,YAAazvC,OAAOkiB,MAC1DliB,OAAOg+B,QAAUh+B,OAAOg+B,OAAO4O,KAAK,EAAGxtC,eAAYA,MAAMwc,OAhE9B,OAiE7B5b,O,8ZAAS,CAAH,GACDA,OADC,CAEJg+B,OAAQh+B,OAAOg+B,OACXh+B,OAAOg+B,OAAOnvB,IAAK6gC,IACjBA,GAAGtwC,MAAMwc,OArEY,IAsEjB,CAAElW,IAAKgqC,GAAGhqC,IAAKtG,OAAO,UAAAuwC,UAASD,GAAGtwC,MAAO,CAAEwc,OAtE1B,OAuEjB8zB,SAEN7+B,KAIR,MAAO,CACL7Q,cACA0L,YACAsD,GAAI4gC,gBAAgB5vC,QACpBg6B,0B,wBAIG,SAAyB19B,OAA2BswB,iBAA0BijB,OACnF,IAAKjjB,iBACH,OAAOtrB,MAAMwuC,KAAKxzC,OAAOyzC,mBAAmBF,OAAO7R,UAErD,MAAMgS,UAAY,GAMlB,OALA1zC,OAAOyzC,mBAAmBF,OAAOI,QAAS7wC,QACpCA,MAAM46B,YAAY4C,WAAWhQ,mBAC/BojB,UAAU7P,KAAK/gC,SAGZ4wC,W,oEAzGT,mC,8LAUiC,I,eAE6B,CAAEE,GAAI,EAAGC,KAAM,EAAGC,MAAO,EAAGC,MAAO,GAE1F,MAAMC,YAAc,CACzB,EAAK,KACL,EAAK,OACL,EAAK,QACL,EAAK,SAqCA,SAASV,gBAAgB5vC,QAE9B,IAAIyvC,YAAczvC,OAAOyvC,YAIzB,OAHIA,YAAY7S,WAAW,OACzB6S,YAAcA,YAAYc,UAAU,IAE9B,IAAGd,eAAezvC,OAAOkiB,QAG5B,SAASstB,eAAegB,WAAoBtuB,MACjD,OAAiC,IAA7BA,KAAKuuB,QAAQD,YACRtuB,KAED,GAAEsuB,eAAetuB,O,sMCrBpB,SACLyS,iBACAwK,WAEAxK,iBACE,OACChE,QAAD,iBAEOA,OAFP,CAGIhD,OAAO,UAAAqR,MACLrO,OAAOhD,MACJzW,OAAO,CAAC,CAAE9X,MAAO+/B,UAAWzG,SAAS,EAAMgY,gBAAiB,iBAC5D9rB,OAAO,EAAGxlB,eAAYA,Y,gDA3DnC,mCACA,8DACA,uDACA,+BAEA,6DACA,uDAEA,wCACA,4DACA,yDACA,+DACA,0CACA,mCAEA,8DACA,8DACA,4DAEA,gC,+jCAEgC,CAC9B,OACA,OACA,QACA,QACA,SACA,QACA,SACA,QACA,SACA,UACA,UACA,OACA,WACA,UAqCF,MAAMuxC,kBAAqBC,cACzB,MAAMC,IAAsB,GAI5B,OAHAvtC,OAAOwtC,KAAKF,aAAaX,QAAS5Y,OAChCwZ,IAAIxZ,MAAQuZ,YAAYvZ,MAAMxoB,IAAIkiC,uDAE7BF,KAGHG,6BAA8B,wBAClC,CAACC,qCAAsCC,YAAaC,yBAClD,MAAMC,YAAc,GAQpB,OAPA9tC,OAAOwtC,KAAKI,aAAajB,QAASziB,QAChC,MAAM6T,OAAS8P,sBAAsB3jB,OACrC4jB,YAAY5jB,OAAS0jB,YAAY1jB,OAAO3e,IAAKygB,SAAD,iBACvCA,QADuC,CAE1CA,QAAS+R,OAAOgQ,YAAYC,OAAOxB,KAAKxgB,QAAQA,eAG7CqhB,kBAAkBM,qCAAqCG,gBA0BlE,SAAS3mB,KAAKvzB,OACZ,MAAM,WAAE25B,WAAF,OAAcF,QAAWz5B,OACvBy2B,MAAO4jB,WAAT,UAAqBC,UAArB,UAAgCC,UAAhC,WAA2CC,WAA3C,SAAuDC,SAAvD,UAAiEC,WAAcjhB,OAE/EkhB,aAAc,SAAAC,QAAO,MACrBC,aAAc,SAAAD,QAAO,MAErBE,eAAgB,SAAAzyC,aAAY,CAAC0yC,KAAcC,QAC/CL,YAAYrrB,QAAUyrB,KACtBF,YAAYvrB,QAAU0rB,MACrB,IAEGC,WAAY,SAAA5yC,aAChB,IACEsxB,WAAW,CACT2gB,UAAkC,MAAvBK,YAAYrrB,QAAkBqrB,YAAYrrB,QAAQ8nB,WAAa,GAC1EmD,UAAkC,MAAvBM,YAAYvrB,QAAkBurB,YAAYvrB,QAAQ8nB,WAAa,KAE9E,CAACyD,YAAaF,YAAahhB,cAG7B,SAAAvxB,WAAU,KACHiyC,WAAW31B,QACdiV,WAAW,CAAElD,MAAO,CAAC,CAAEvuB,MAAO,GAAIs5B,SAAS,EAAMgY,gBAAiB,oBAItE,MAAM0B,YAA2B,UAAbT,SAAuB,EAAIjO,IAEzC2O,SAAWd,WAAW1iC,IAAI,EAAGzP,eAAYA,OAAO8X,QAAO,UAAAo7B,SAAQ,CAACV,qBAAD,EAACA,UAAWxyC,SAC3EmzC,eAA0B,SAAAC,gBAAyBH,UACnDI,iBAAkB,SAAA9gB,SAAQ,KAAM,gBAAA+gB,oBAAmBH,eAAgB,CAACA,gBACpEI,iBAAkB,YAAAC,oBAAmB,CAAEtkB,OAAQmkB,gBAAiBL,0BAEhEnB,sCAAuC,oCAAA4B,yCAAwCN,eAK/EO,qBAAsB,SAAAnhB,SAAQ,IAAMgf,kBAAkBM,qCAAqC0B,kBAAmB,CAClH1B,qCACA0B,mBAGI,sBAAExB,sBAAF,OAAyB4B,SAAW,YAAAC,kBAAiBP,iBACrDQ,iBAnER,SAA6BhC,qCAAsCE,sBAAuB4B,QACxF,MAAMlC,IAAM,GAkBZ,OAjBAkC,OAAO9C,QAASiD,QACd,MAAMC,yBAA2BnC,4BAC/BC,qCACAiC,MACA/B,uBAKF7tC,OAAOwtC,KAAKqC,0BAA0BlD,QAAS5Y,OAC7C,MAAMniB,cAAgB27B,IAAIxZ,OAAS,GACnC,IAAK,MAAMpiB,QAAQk+B,yBAAyB9b,MAC1CniB,cAAcirB,KAAKlrB,MAErB47B,IAAIxZ,MAAQniB,kBAGT27B,IAgDkBuC,CAAoBnC,qCAAsCE,sBAAuB4B,SACpG,UAAEM,YAAc,YAAAjhB,sBAGhB,SAAEkhB,SAAF,SAAYC,WAAa,aAAAC,wBAC7BjC,WAD6B,iBAExBuB,oBAAwBG,kBAC7BI,WAAa,CAAEI,IAAK,EAAGC,KAAM,GAC7B/B,SACAC,WAGF,OACE,6BAAC,cAAD,CAAM1Y,KAAG,EAACE,MAAI,EAACua,QAAM,EAAC5nC,MAAO,CAAE5P,SAAU,aACvC,6BAAC,sBAAD,CACEy3C,YAAaA,mBACbC,UAAQ,EACRC,YACE,6BAAC,kBAAD,CACEtC,UAAWA,UACXC,UAAWA,UACX5gB,WAAYA,WACZshB,UAAWA,UACXmB,SAAUA,SACV3B,SAAUA,SACV4B,SAAUA,aAIhB,6BAAC,mBAAD,CACE5lB,MAAO4jB,WACPC,UAAW/C,WAAW+C,WACtBC,UAAWhD,WAAWgD,WACtBO,cAAeA,cACfsB,SAAUA,SACVC,SAAUA,SACV5B,SAAUA,WAEZ,6BAAC,oBAAD,CACEhkB,MAAO4jB,WACP1gB,WAAYA,WACZ6gB,WAAYA,WACZC,SAAUA,SACVC,UAAWA,aAKnBnnB,KAAKsJ,UAAY,OACjBtJ,KAAKiC,cAAgB,CACnBiB,MAAO,CAAC,CAAEvuB,MAAO,GAAIs5B,SAAS,EAAMgY,gBAAiB,gBACrDc,UAAW,GACXC,UAAW,GACXC,YAAY,EACZC,SAAU,a,cAGG,QAAApC,MAAI,kBAAkB9kB,O,qbC1NrC,mCACA,8BAGA,mDAEA,+CACA,gEACA,sEACA,S,4WAAA,2BAGA,gCACA,oC,kqBAeO,SAASspB,iCACdpmB,OAEA,MAAQW,OAAQ0lB,eAAV,UAA0B/hB,WAAcE,SAASC,qBACjD,gBAAEzD,kBAAoB,iCACtB4jB,eAA0B,SAAAC,gBAAyB7kB,OAInDsmB,yBAAiD,SAAAtiB,SACrD,KACE,MAAMuiB,cAAgB,GACtB,IAAK,MAAM7c,QAAQkb,cAAe,CAChC,MAAMtT,SAAU,yBAAa5H,MACzB4H,UACFiV,cAAc7c,MAAQ8c,4BAA4BlV,QAAStQ,kBAG/D,OAAOulB,eAET,CAACvlB,gBAAiB4jB,gBAEd6B,uBAAwB,SAAAC,aAAmCJ,yBAK3DK,cAAe,SAAAxC,QAElB,IAOH,IANI,SAAAyC,mBAAkB,CAACP,eAAgB/hB,YAAY,KACjDqiB,aAAa9tB,QAAU,KAKrB,SAAA+tB,mBAAkB,CAACH,wBAAwB,GAC7C,IAAK,MAAM/c,QAAQ/zB,OAAOwtC,KAAKwD,aAAa9tB,SAAU,CACpD,MAAMguB,aAAeJ,sBAAsB/c,MACtCmd,eAAiB,UAAApO,SAAQkO,aAAa9tB,QAAQ6Q,MAAMmd,aAAcA,sBAC9DF,aAAa9tB,QAAQ6Q,MAKlC,OAAO,SAAA93B,aACL,CAAC83B,KAAc/H,WACb,IAAKijB,cAAc9kB,SAAS4J,MAC1B,MAAM,IAAIh6B,MAAO,SAAQg6B,6CAE3B,MAAMmd,aAAeJ,sBAAsB/c,MAC3C,IAAKmd,aACH,OAEGF,aAAa9tB,QAAQ6Q,QACxBid,aAAa9tB,QAAQ6Q,MAAQ,CAAEmd,0BAAcC,QAAS,IAAIC,UAE5D,MAAM,QAAED,SAAYH,aAAa9tB,QAAQ6Q,MACzC,IAAKod,QAAQ3qC,IAAIwlB,SAAU,CACzB,MAAMqlB,qBAAuBC,wBAAwBtlB,QAASklB,aAAcR,eAAgB/hB,WAE5F,OADAwiB,QAAQtlB,IAAIG,QAASqlB,sBACdA,qBAGT,OAD6BF,QAAQllC,IAAI+f,UAG3C,CAAC2C,UAAWmiB,sBAAuB7B,cAAeyB,iBAItD,SAASa,cAAcjwB,OAA2BxlB,OAChD,GAA4B,iBAAjBwlB,OAAOxlB,MAChB,MAAM,IAAI/B,MAAM,gFAGlB,IAAIy3C,aAAe11C,MACnB,IAAK,MAAM8iB,QAAQ0C,OAAOyS,KAExB,GADAyd,aAAeA,aAAa5yB,MACR,MAAhB4yB,aACF,OAAO,EAOX,OAAOA,cAAgBlwB,OAAOxlB,MAGzB,SAAS+0C,4BAA4BlV,QAAkBtQ,iBAC5D,wBACKsQ,QADL,CAEE8V,YAAa9V,QAAQ8V,YAAYlmC,IAAKmmC,kBACpC,GAA6B,UAAzBA,gBAAgBh8B,KAAkB,CACpC,MAAMrK,MAC6B,iBAA1BqmC,gBAAgBrmC,MACnBkI,OAAO8X,gBAAgBqmB,gBAAgBrmC,MAAMsmC,eAC7CD,gBAAgBrmC,MAChB8M,IAC2B,iBAAxBu5B,gBAAgBv5B,IACnB5E,OAAO8X,gBAAgBqmB,gBAAgBv5B,IAAIw5B,eAC3CD,gBAAgBv5B,IAEtB,wBACKu5B,gBADL,CAEErmC,MAAO3L,MAAM2L,OAAS,EAAIA,MAC1B8M,IAAKzY,MAAMyY,KAAOioB,IAAWjoB,MAE1B,GAA6B,WAAzBu5B,gBAAgBh8B,MAAsD,iBAA1Bg8B,gBAAgB51C,MAAoB,CACzF,IAAIA,MACJ,MAAM81C,SAAWvmB,gBAAgBqmB,gBAAgB51C,MAAM61C,cAIvD,MAHwB,iBAAbC,UAA6C,iBAAbA,WACzC91C,MAAQ81C,UAEV,iBAAYF,gBAAZ,CAA6B51C,cAI/B,OADC41C,gBAAgBh8B,KACVg8B,oBAON,SAASJ,wBACdtlB,QACAklB,aACAR,eACA/hB,WAEA,MAAMkjB,YAAa,2BAAAC,uBAAsBnjB,WACnCzE,OAAQ,aAAA6nB,mBAAkBrB,gBAAgBQ,aAAarV,WAG7D,IAAK3R,OAAS8B,QAAQ9B,QAAUgnB,aAAarV,UAC3C,OAKF,IAAK,MAAMlqB,QAAQu/B,aAAaO,YAAa,CAC3C,GAAkB,WAAd9/B,KAAK+D,KAKP,MAJA,IAAK67B,cAAc5/B,KAAMqa,QAAQA,SAC/B,MAAO,GAOb,MAAMgmB,YAAc,GA6EpB,OA1EA,SAASC,SAASn2C,MAAYo2C,UAAmBne,KAAcoe,eAC7D,QAAc5kC,IAAVzR,YAAyCyR,IAAlB4kC,cACzB,OAEF,MAAMC,SAAWlB,aAAaO,YAAYS,WACpCG,aAAenB,aAAaO,YAAYS,UAAY,GAC1D,GAAKE,SAYE,GAAsB,SAAlBA,SAAS18B,MAAmD,YAAhCy8B,cAAcG,cAEnDL,SACEn2C,MAAMs2C,SAASxzB,MACfszB,UAAY,EACX,GAAEne,QAAQqe,SAASxzB,OACpBuzB,cAAcI,WAAWH,SAASxzB,YAE/B,GAAsB,UAAlBwzB,SAAS18B,MAAoD,UAAhCy8B,cAAcG,cAA2B,CAC/E,MAAM,MAAEjnC,MAAF,IAAS8M,KAAQi6B,SACvB,GAAqB,iBAAV/mC,OAAqC,iBAAR8M,IACtC,MAAM,IAAIpe,MAAM,2FAElB,MAAMy4C,SAAmBnnC,MACnBonC,OAAiBt6B,IACvB,GAAIzY,MAAM8yC,WAAa9yC,MAAM+yC,QAC3B,OAIF,IAAK,IAAI39C,EAAI09C,SAAU19C,GAAKvB,KAAK8D,IAAIo7C,OAAQ32C,MAAMwc,OAAS,GAAIxjB,IAAK,CACnE,MAAMsG,MAAQtG,GAAK,EAAIA,EAAIgH,MAAMwc,OAASxjB,EAC1C,QAAqByY,IAAjBzR,MAAMV,OACR,SAKF,IAAIs3C,QACJ,GAAIL,cAAsC,WAAtBA,aAAa38B,KAE/Bg9B,QAAa3e,KAAF,UACN,CAEL,MAAMnV,KAAO5e,OAAOwtC,KAAK1xC,MAAMV,QAAQouC,KAAMpnC,MAAQ,uBAAAuwC,qBAAoBvwC,MAEvEswC,QADE9zB,KACS,GAAEmV,WAAWnV,SAAS9iB,MAAMV,OAAOwjB,SAMnC,GAAEmV,QAAQj/B,KAGzBm9C,SAASn2C,MAAMV,OAAQ82C,UAAY,EAAGQ,QAASP,cAAcS,WAEpC,WAAlBR,SAAS18B,KACd67B,cAAca,SAAUt2C,QAC1Bm2C,SAASn2C,MAAOo2C,UAAY,EAAI,GAAEne,QAAQqe,SAASS,QAASV,eAG9D7rC,QAAQ06B,KAAM,yBAAwBoR,SAAS18B,2BAA2By8B,cAAcG,qBAhE3E,CAEb,IAAIQ,aACJ,MAAMC,aAAe7B,aAAaO,YAAYS,UAAY,GAC1D,GAAIa,cAAsC,SAAtBA,aAAar9B,KAAiB,CAChD,MAAM4nB,UAAYyV,aAAan0B,KACzBo0B,SAAU,aAAAC,8BAA6BtkB,WAAWwjB,cAAcrmB,UAClEknB,SAAWA,QAAQ1V,aACrBwV,aAAeE,QAAQ1V,WAAWxhC,QAGtCk2C,YAAYnV,KAAK,CAAE/gC,YAAOi4B,UAAM+e,6BAwDpCb,CAASjmB,QAAQA,QAAS,EAAGklB,aAAarV,UAAWgW,WAAW3nB,MAAM4B,WAC/DkmB,Y,gDAG+C3nB,QACtD,MAAM4kB,eAAgB,SAAAC,gBAAyB7kB,OACzC6oB,8BAAgCzC,iCAAiCxB,eAGvE,OAAO,SAAAhzC,aACJozC,kBACC,MAAM8D,IAAM,GACZ,IAAK,MAAMpf,QAAQkb,cAAe,CAEhC,MAAMtT,SAAU,yBAAa5H,MAC7B,GAAK4H,SAIL,GAAK0T,gBAAgB1T,QAAQE,WAA7B,CAOAsX,IAAIpf,MAAQ,GAEZ,IAAK,MAAM/H,WAAWqjB,gBAAgB1T,QAAQE,WAAY,CAExD,MAAMmW,YAAckB,8BAA8Bnf,KAAM/H,SACpDgmB,aACFmB,IAAIpf,MAAM8I,KAAK,CAAE7Q,gBAASgmB,iCAhB5BmB,IAAIpf,MAAQ,GAoBhB,OAAOof,KAET,CAAClE,cAAeiE,kC,qKCrSpB,+DACA,4DACA,+BACA,sDAGA,0EACA,mDAOA,gEACA,gEACA,2DACA,sDACA,yDACA,sEACA,2DAGA,oC,k4BA0DA,SAASE,oBAAoBC,eAC3B,OAAQA,eACN,IAAK,SACH,MAAO,KACT,IAAK,OACH,MAAO,OACT,IAAK,UACL,IAAK,UACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,QACH,MAAO,IACT,IAAK,WACL,IAAK,OAEL,QAEE,MAAO,IAyBb,MAAMC,oCAAoCn/C,MAAMsvC,cAG9C3mC,YAAYlJ,OACV8vC,MAAM9vC,OADkC,uEAK9B,CAACswC,MAA8CpoC,SAIzD,GAA+B,MAA3BooC,MAAMqP,YAAYz8C,KAAc,CAClC,MAAM08C,kBAAoBtP,MAAMtiC,OAAO0iC,aACvCxoC,MAAS,GAAEA,MAAMk2B,MAAM,EAAGwhB,sBAAsB13C,MAAMk2B,MAAMwhB,qBAE5D,MAAM5xC,OAASsiC,MAAMtiC,OACrB6xC,aAAa,IAAM7xC,OAAO0jC,kBAAkBkO,kBAAmBA,oBAEjEnxC,KAAKzO,MAAM+wC,SAAS7oC,MAAOuG,KAAKzO,MAAMwH,SAhBE,gDAmBdU,QACtBuG,KAAKzO,MAAM8/C,yBACbrxC,KAAKzO,MAAM8/C,wBAAwB53C,MAAOuG,KAAKzO,MAAMwH,SArBf,iCAyB9B,CACVU,MACA63C,aACAC,iBACAC,qBAIA,MAAMC,wBACiB,cAArBF,kBAAoCvxC,KAAKzO,MAAMmgD,aAAe1xC,KAAKzO,MAAMmgD,WAAW5pB,SAAS,WAY/F,GAXI2pB,0BACFh4C,OAAS,KAEXuG,KAAKzO,MAAM+wC,SACTtiC,KAAKzO,MAAMmgC,KAAKigB,OAAO,EAAGH,kBAAkBxoC,OAASvP,MAAQuG,KAAKzO,MAAMmgC,KAAKigB,OAAOH,kBAAkB17B,KACtG9V,KAAKzO,MAAMwH,OAMT04C,yBAA2Bh4C,MAAMquB,SAAS,MAAQ9nB,KAAKzO,MAAMmgC,KAAK5J,SAAS,KAAM,CACnF,MAAMqpB,kBAAoBK,kBAAkBxoC,MAAQvP,MAAMwc,OAC1Dm7B,aAAa,IAAME,aAAarO,kBAAkBkO,kBAAmBA,yBAErEG,aAAa1O,SAhDf5iC,KAAKhC,MAAQ,CAAE4jC,SAAS,GAoD1B17B,SACE,MAAM,KACJwrB,KADI,OAEJ/I,OAFI,UAGJ2D,UAHI,oBAIJslB,oBAJI,WAKJF,WALI,SAMJvO,SANI,YAOJG,YAPI,cAQJuO,cARI,gBASJ9G,gBATI,WAUJnH,WAVI,oBAWJkO,oBAXI,gBAYJ9oB,iBACEhpB,KAAKzO,MAEH+nC,SAAU,yBAAa5H,MAC7B,IAAI6f,iBACA1pB,MACAkqB,yBACJ,GAAIzY,QAAS,CACX,MAAM,UAAEE,WAAcF,QACtBzR,MAAQc,OAAOwe,KAAK,EAAG5qB,aAAWA,OAASid,WAEvC3R,QACFkqB,0BAA2B,2BAAAC,oBACzB,2BAAAvC,uBAAsBnjB,WAAWzE,MAAM4B,UACvC6P,QAAQ8V,cAIPvnB,MAGFkqB,0BACAA,yBAAyBxa,QACzB,2BAAA0a,+BAA8BF,yBAAyBjC,cAAe4B,cAEvEH,iBAAmB,eANnBA,iBAAmB,iBASrBA,iBAAmB,YAGrB,IAAI1N,kBAAoB,GACpBqO,uBAAyB,GACzBV,kBAAoB,CAAExoC,MAAO,EAAG8M,IAAKioB,KACzC,GAAI+T,oBACFjO,kBAAoB,QACf,GAAyB,cAArB0N,iBACT1N,mBAAoB,aAAAsO,eAAcxpB,QAClCupB,uBAAyBxgB,UACpB,GAAyB,gBAArB6f,kBAAsC1pB,MAC/C,GACEkqB,2BACCA,yBAAyBxa,OAC1Bwa,yBAAyBK,aACqB,WAA9CL,yBAAyBK,YAAY/+B,MACrC0+B,yBAAyBjC,eACgC,YAAzDiC,yBAAyBjC,cAAcG,cACvC,CACA,MAAM,YAAEmC,aAAgBL,yBAKxB,IAAK,MAAMx1B,QAAQ5e,OAAOwtC,KAAK4G,yBAAyBjC,cAAcI,YAAa,CACjF,MAAM5gC,KAAOyiC,yBAAyBjC,cAAcI,WAAW3zB,MACpC,cAAvBjN,KAAK2gC,eACPpM,kBAAkBrJ,KAAM,GAAEje,SAASw0B,oBAAoBzhC,KAAK0hC,kBAIhEkB,uBAAyBE,YAAY1gB,KAAK6U,KAAK,KAC/CiL,kBAAoB,CAClBxoC,MAAOopC,YAAYC,QACnBv8B,IAAKs8B,YAAYC,QAAUH,uBAAuBj8B,YAE/C,CACL4tB,mBAAoB,2BAAAyO,yBAAwBzqB,MAAM4B,SAAU6C,UAAWolB,WAAYG,eAAe5yB,OAE/FszB,SAAwB,KAAZA,UAAmBA,QAAQC,SAAS,gBAKnD,IAAIC,oBAAsB,EAC1B,IAAK,MAAMnjC,QAAQgqB,QAAQ8V,YAAa,CACtC,GAAkB,WAAd9/B,KAAK+D,KAGP,MAFAo/B,qBAAuBnjC,KAAKkhC,KAAKv6B,OAAS,EAM9Cu7B,kBAAoB,CAAExoC,MAAO6e,MAAMtL,KAAKtG,OAASw8B,oBAAqB38B,IAAKioB,KAM3EmU,uBAAyBxgB,KAAKigB,OAAO9pB,MAAMtL,KAAKtG,QAAQy8B,QAAQ,aAAc,SAE3E,GAAIpZ,QAAS,CAClB,MAAMqZ,+BAxOZ,SACErZ,QACAtQ,iBAEA,MAAM,YAAEomB,aAAgB9V,QACxB,OAAO8V,YACJlmC,IAAKwoB,OACJ,MAAMkhB,WAAaj1C,OAAOwtC,KAAKniB,iBAC/B,MAAkB,WAAd0I,KAAKre,MAA2C,iBAAfqe,KAAKj4B,OAAuBm5C,WAAW9qB,SAAS4J,KAAKj4B,MAAM61C,cAI9E,UAAd5d,KAAKre,MAA0C,iBAAfqe,KAAK1oB,OAAuB4pC,WAAW9qB,SAAS4J,KAAK1oB,MAAMsmC,cAI7E,UAAd5d,KAAKre,MAAwC,iBAAbqe,KAAK5b,KAAqB88B,WAAW9qB,SAAS4J,KAAK5b,IAAIw5B,mBAA3F,EACS,CAAEA,aAAc5d,KAAK5b,IAAIw5B,aAAcuD,IAAKnhB,KAAK5b,IAAIg9B,UAJrD,CAAExD,aAAc5d,KAAK1oB,MAAMsmC,aAAcuD,IAAKnhB,KAAK1oB,MAAM8pC,UAJzD,CAAExD,aAAc5d,KAAKj4B,MAAM61C,aAAcuD,IAAKnhB,KAAKqhB,YAY7D5L,KAAK6L,SAmNmCC,CAAmC3Z,QAAStQ,iBAE/E2pB,iCACFpB,iBAAmB,kBACnB1N,kBAAoBlmC,OAAOwtC,KAAKniB,iBAAiB9f,IAAKnJ,KAAS,IAAGA,KAClEyxC,kBAAoB,CAClBxoC,MAAO2pC,+BAA+BE,IACtC/8B,IAAK68B,+BAA+BE,IAAMF,+BAA+BrD,aAAar5B,OAAS,GAEjGi8B,uBAAyBS,+BAA+BrD,cAI5D,MAAM4D,cAAgBrrB,OAhQ1B,SAA+BA,MAAcyE,WAC3C,MAAMylB,0BAA2B,2BAAAC,oBAAkB,2BAAAvC,uBAAsBnjB,WAAWzE,MAAM4B,UAAW,CACnG,CAAEpW,KAAM,OAAQkJ,KAAM,UACtB,CAAElJ,KAAM,OAAQkJ,KAAM,WAGxB,OACGw1B,yBAAyBxa,SAAU,2BAAA0a,+BAA8BF,yBAAyBjC,cAAe,CAAC,SAyP5EqD,CAAsBtrB,MAAOyE,WACtD8mB,yBAA2BxB,qBAC7B,UAAAp6B,UACE,UAAA67B,WAAUxP,kBAAoBv0B,OAAD,iCAAU,4CAAAogC,mBAAkB/mB,QAAQrZ,aAA1B,uDAAiCma,YAAamoB,uBAEvF/N,kBAEJ,OACE,2BAAKz9B,MAAO,CAAEktC,QAAS,OAAQrN,KAAM,WAAYvC,SAAU,EAAG8D,eAAgB,kBAC5E,oBAAC,sBAAD,CACE/nB,MAAO2zB,yBACP5P,WAAY0O,uBACZz4C,MAAOi4B,KACP4Q,SAAUtiC,KAAKwkC,UACfhC,SAAU,CAAC/oC,MAAe6V,KAAWgiC,eACnCtxC,KAAKykC,UAAUhrC,MAAO63C,aAAcC,iBAAkBC,mBAExD1N,WAAYyN,mBAAqBO,oBACjC5O,gBAAiBqO,iBACjBjO,YAAaA,aAAe,4BAC5BH,SAAUA,SACVS,WAAYA,WAGZ9B,mBAAiB,IAGlBiJ,iBACC,2BAAK5X,UAAWC,gCAAOmgB,kCACrB,oBAAC,kBAAD,CACEjR,SAAUtiC,KAAKwzC,yBACf/5C,MAAOsxC,gBACP0I,gBACE,oBAAC,iBAAD,CAASC,SAAS,4BAA4BC,UAAU,OACtD,2BACExgB,WAAW,uBAAG,CACZ,CAACC,gCAAOwgB,0BAA0B,EAClC,CAACxgB,gCAAOygB,8BAAmD,gBAApB9I,iBAAqCmI,iBAEzD,gBAApBnI,gBAAoC,iBAAmB,iBACxD,oBAAC,cAAD,CAAM3kC,MAAO,CAAE5P,SAAU,WAAYmK,IAAK,EAAGm0B,WAAY,IACvD,oBAAC,kBAAD,UAMR,oBAAC,iBAAD,CACEr7B,MAAM,cACNk6C,UAAU,QACVD,SAAS,2DACT,iDAGF,oBAAC,iBAAD,CACEj6C,MAAM,cACNk6C,UAAU,QACVD,SACE,2BAAKttC,MAAO,CAAEqK,SAAU,IAAKqjC,WAAY,WAAzC,2IAGGZ,eACC,2BAAK/f,UAAWC,gCAAO2gB,oBAAvB,iDAIN,4BACE5gB,WAAW,uBAAG,CACZ,CAACC,gCAAO2gB,oBAAqBb,iBAFjC,qB,aAeDphD,MAAM6jB,MAAgC,SAA0BpkB,OAC7E,MAAM,gBAAEy3B,kBAAoB,kCACtB,UAAEsD,UAAF,OAAa3D,QAAW6D,SAASC,oBACvC,OACE,oBAACwkB,4BAAD,YAAiC1/C,MAAjC,CAAwCo3B,OAAQA,OAAQ2D,UAAWA,UAAWtD,gBAAiBA,sB,0NCnYnG,2DAGA,wCACA,4DAIA,2DAEA,gC,oYAoBA,MAAMgrB,UAAYr2C,OAAOs2C,OAAO,CAAEnG,IAAK,EAAGC,KAAM,I,aAOjCj8C,eAAM6jB,MAAY,UAAkC,SAAE/jB,SAAF,MAAYo2B,MAAZ,YAAmBykB,cACpF,MAAM,UAAEiB,WAAclhB,SAASC,oBACzBmgB,eAA0B,SAAAC,gBAAyB7kB,OACnD8kB,iBAAkB,SAAA9gB,SAAQ,KAAM,gBAAA+gB,oBAAmBH,eAAgB,CAACA,gBAEpEI,gBAAkBxgB,SAASygB,mBAAmB,CAClDtkB,OAAQmkB,gBACRL,YAAaA,aAAe1O,MAGxBuN,sCAAuC,oCAAA4B,yCAAwCN,eAC/E3B,aAAc,SAAAjf,SAAQ,IAAMsf,qCAAqC0B,iBAAkB,CACvF1B,qCACA0B,kBAGF,OAAO,SAAAhhB,SAAQ,IAAMp6B,SAAS,CAAEq5C,wBAAayC,UAAWA,WAAasG,YAAc,CACjFpiD,SACAq5C,YACAyC,e,0MCzDJ,I,IAAA,mB,IAAA,yB,iCAEO,MAAMnG,OAASpR,0BAAOzB,KAAM;;;;qBAIbnjC,OAAWA,MAAM2iD,cAAgB,eAAiB;wBAEjE,MAAMjL,aAAe9S,0BAAOzB,KAAM;;;;;oCAOlC,MAAMwT,OAAS/R,0BAAO0B,KAAM;;;+JCmCpB,UAA+B,UAC5Csc,UACAC,iBAAkBC,qBAF0B,WAG5CnpB,aAEA,MAAMkpB,iBAAmBE,oBAAoBD,sBAAwBA,qBAAuBE,qBAC5F,OACE,6BAACC,uBAAD,KACE,6BAAC,kBAAD,CACEC,SAAU,CAAErgD,MAAO+/C,UAlCA,GADD,IAoClB39C,SAAS,QACTiD,MAAO26C,iBACP38C,KAAM68C,oBAAoBF,kBAAkB1f,MAC5C4N,SAAWwE,UAAa5b,WAAW,CAAEkpB,iBAAkBtN,UAAY,CAAEnY,iBAAiB,KACrF+lB,gBAAgBxrC,IAAI,EAAGwrB,YAAOj7B,eAC7B,uCAAQA,MAAOA,MAAOsG,IAAKtG,OACxBi7B,W,mCAjEb,0DACA,iEAEA,2D,kFAIO,MAAM4f,oBAAsB,CACjCK,SAAU,CACRl7C,MAAO,WACPi7B,MAAO,OAETkgB,eAAgB,CACdn7C,MAAO,iBACPi7B,MAAO,aAETmgB,cAAe,CACbp7C,MAAO,gBACPi7B,MAAO,Y,gDAIX,MAAM6f,qBAAuBD,oBAAoBK,SAASl7C,MAIpDi7C,gBAAkB/2C,OAAOwtC,KAAKmJ,qBACjCr1B,OAAQ3P,MAAkB,cAATA,MACjBpG,IAAKnJ,MAAD,CACH20B,MAAO4f,oBAAoBv0C,KAAK20B,MAChCj7B,MAAO66C,oBAAoBv0C,KAAKtG,SAK9B+6C,uBAAyBre,0BAAO2e,GAAI;;;;;;;qQC4LnC,gBAAmF,IAA/C,OAAEjgD,OAASkgD,YAAYC,MAAwB,MAAfjjD,KAAe,2CACxF,MAAOkjD,WAAYC,eAAiBpjD,MAAMyB,SAAqBsB,QAC/D,OAAO,oBAACsgD,eAAD,YAAoBpjD,KAApB,CAA0B8C,OAAQogD,WAAYG,eAAiBC,WAAcH,cAAcG,e,2BAjOpG,mCACA,M,4WAAA,yBACA,iEAEA,2DACA,uDACA,sCACA,+DACA,wD,s7BAEA,MAAM,SAAE9hD,SAAF,YAAYqG,YAAZ,OAAyBuyC,OAAzB,gBAAiCmJ,gBAAjC,UAAkD37C,WAAc7H,MAEzDijD,YAAc,CAAEpiC,KAAM,OAAQqiC,KAAM,Q,gCAEjD,MAAMO,SAAWpf,0BAAO2e,GAAI;;;;;EAOtBU,2BAA6Brf,0BAAO2e,GAAI;;;;;;;EAQxCW,eAAiBtf,0BAAOuf,QAAS;;;EAIjCC,OAASxf,0BAAO2e,GAAI;WACfh5C,sBAAO85C;;EA8BX,SAASC,oBAAmB,cACjCC,cAAiBrhD,WADgB,WAEjCmvC,WAAa,GAFoB,SAGjCtB,SAHiC,QAIjCyT,QAJiC,MAKjCC,MALiC,UAMjCC,UANiC,MAOjCx8C,QAEA,MAAOmR,MAAOsrC,UAAY3iD,SAAiB,KACpC4iD,SAAUC,aAAe7iD,SAAiB,IAC3C8iD,gBAAkBlK,OAAO,IACzBmK,SAAWnK,OAA6B,OACvCoK,UAAWC,cAAgBjjD,UAAkB,GAG9CkjD,yBAA2B78C,YAC/B,CAAC88C,YAAqBC,eACpB,IAAIC,OACAC,SAEJ,GAA2B,KAAvBH,YAAYI,OACdF,OAASj7C,MAAMo7C,QAAQt9C,OAAS,GAAK,QAErC,IACEm9C,OAASZ,MAAMU,aACf,MAAOl0C,GACPq0C,SAAWr0C,EAAEmnB,QAIjB,GAAIktB,SAEF,YADAX,SAASW,UAGXX,SAAS,IACT,MAAMc,iBAAmBlB,cAAcc,QACnCI,iBACFd,UAAS,cAAAe,yBAAwBD,mBAG/BL,aACFA,YAAYC,SAGhB,CAACd,cAAeE,MAAOv8C,QAIzB67C,gBACE,KACE,IAAKiB,WAAa98C,QAAU48C,gBAAgBx1B,QAAS,CACnD,IAAI,UAAA4f,SAAQhnC,MAAO48C,gBAAgBx1B,SACjC,OAEF,IACIg2B,SADAD,OAAS,GAEb,IACEA,OAASX,UAAUx8C,OACnB,MAAO+I,GACPq0C,SAAY,0DAAyDr0C,EAAEmnB,QAIzE,GAFAysB,YAAYQ,QACZP,gBAAgBx1B,QAAUpnB,MACtBo9C,SAEF,YADAX,SAASW,UAIXJ,yBAAyBG,UAG7B,CAACn9C,MAAOw8C,UAAWQ,yBAA0BF,YAG/C,MAAMW,aAAet9C,YAClB4I,IACC,MAAMhH,IAAMgH,EAAEigC,eAAiBjgC,EAAEigC,cAAchpC,MAC1C88C,WACHC,cAAa,GAEfJ,YAAY56C,KACZi7C,yBAAyBj7C,IAAK8mC,WAEhC,CAACiU,UAAWE,yBAA0BnU,WAyBxC,OAtBA3oC,UACE,KACMo8C,SAAWnrC,OACbmrC,QAAQnrC,QAGZ,CAACA,MAAOmrC,UAIVT,gBACE,KACE,IAAKiB,UAAW,CACd,MAAMY,UAAYb,SAASz1B,QACvBs2B,YACFA,UAAUzU,UAAYyU,UAAUpU,gBAItC,CAACwT,UAAWJ,WAIZ,wCACE,oBAACV,eAAD,CACE/M,YAAU,kBACVtiC,MAAOw9B,WACPt9B,IAAKgwC,SACL78C,MAAO08C,SACP7T,SAAU4U,eAEXtsC,OAAS,oBAAC+qC,OAAD,KAAS/qC,QAKzB,SAASwsC,UAAU7lD,OAIjB,OAAO,oBAACskD,mBAAD,UAAoBG,MAAOrjC,KAAKqjC,MAAOC,UAH9C,SAAmBz6C,KACjB,OAAOmX,KAAKsjC,UAAUz6C,IAAK,KAAM,KAEqCjK,QAGnE,SAAS8lD,UAAU9lD,OACxB,OAAO,oBAACskD,mBAAD,UAAoBG,MAAOhB,cAAKgB,MAAOC,UAAWjB,cAAKiB,WAAe1kD,QAIhE,SAAS4jD,eAAT,MAAiG,IAAzE,OAAEtgD,OAASkgD,YAAYpiC,KAAvB,eAA6ByiC,eAA7B,SAA6CxjD,UAA4B,KAAfG,KAAe,sEAC9G,MAAMulD,eAAiBziD,SAAWkgD,YAAYpiC,KAAOykC,UAAYC,UACjE,OACE,oBAAC,cAAD,CAAM9jB,KAAG,GACP,oBAAC,cAAD,CAAMgI,KAAG,EAAC+K,SAAO,GACd10C,SACD,oBAAC4jD,2BAAD,KACE,oBAAC,kBAAD,CAAUh/C,SAAS,QAAQiD,MAAO5E,OAAQ4C,KAAM5C,OAAO0iD,cAAejV,SAAU8S,gBAC7Ez3C,OAAOwtC,KAAK4J,aAAa7rC,IAAKnJ,KAC7B,8BAAQtG,MAAOs7C,YAAYh1C,KAAMA,IAAKA,KACnCA,SAMX,oBAACw1C,SAAD,KACE,oBAAC+B,eAAmBvlD,U,sICzHb,UAAqB,eAClCylD,eADkC,YAElCC,YAFkC,iBAGlCC,iBAHkC,UAIlCvD,UAJkC,KAKlC1xB,KACAA,MAAM,kBAAEk1B,kBAAF,kBAAqBC,kBAArB,KAAwCr7B,KAAxC,IAA8Cxc,IAA9C,WAAmD83C,YANvB,mBAOlCC,mBAPkC,gBAQlCC,gBARkC,wBASlCC,wBATkC,0BAUlCC,0BAVkC,kBAWlCC,kBAXkC,mBAYlCC,mBAZkC,YAalCC,YAbkC,uBAclCC,uBAdkC,sBAelCC,sBAfkC,MAgBlClkD,MAhBkC,WAiBlCovC,WAjBkC,SAkBlCoK,WAEA,MAAMpU,UAA0B,UAAd/W,KAAKpP,KAAmBoP,KAAK+W,UAAY,GACrD/P,SAAyB,UAAdhH,KAAKpP,KAAmBoP,KAAKgH,cAAWve,EAEnDqtC,mBAAoBD,iCAAA,EAAAA,sBAAuBC,qBAAsBD,sBACjEE,kBAAoBhf,WAAa/P,WAAY,uBAAAgvB,iBAAgBhvB,UAC7DivB,yBAA2BF,oBAAsBD,kBAEjDI,eAA+B,UAAdl2B,KAAKpP,MAAoB+kC,aAAeA,YAAYniC,OAAS,EAC9E2iC,eAA+B,UAAdn2B,KAAKpP,MAAoB+kC,aAAeA,YAAYniC,OAAS,EAE9E4iC,SAAWzkD,OAAS+/C,UAAY,EAAmB,EAAf2E,yBAEpCC,aAAerB,iBAAyC,EAAtBsB,sCAA0BA,sCAC5DC,iBAAmBrB,kBAAoBmB,aAAeG,gCAAiBA,gCAE7E,IAAIC,iBAAmBN,SAAWI,iBAAmB,EAEjDP,2BACFS,kBAtHqB,IAwHnBP,iBACFO,kBAxH0B,IA0HxBR,iBACFQ,kBA5HqB,IA+HvB,MAAMC,aAAehB,aACnB,oBAACiB,WAAD,KACGjB,YAAYlvC,IAAKowC,QAChB,oBAACC,WAAD,CAAYx5C,IAAKu5C,QAASA,UAKhC,OACE,oBAACE,aAAD,CAAcC,eAAgB3B,mBAAoB1xC,MAAO,CAAEhS,MAAOykD,WAChE,oBAACa,MAAD,CACEtzC,MAAO,CAAEwvB,OAAQ6hB,cAAgBjU,WAAa,UAAY,WAC1DkF,YAAY,QAAO3oC,IACnBkzB,QAASwkB,YAAc,IAAMU,mBAAmBp4C,UAAOmL,GACvD,oBAAC,kBAAD,CACEipC,UAAWA,UACX1jC,SAAU0oC,iBACV9kB,YAAa9X,MAAQid,UACrBoU,SAAUA,SACVpU,UAAWA,UACXmgB,WAAYnW,aAEbkV,0BAA4BjvB,UAC3B,oBAAC,cAAD,CACErjB,MAAO,CAAEwzC,QAAS,QAASl+C,MAAOI,6BAAO+9C,WACzCC,MAAI,EACJ9jB,QAAQ,wBACR/C,QAAS,IAAMolB,uBAAuB,CAAE97B,KAAMid,UAAW/P,qBACzD,oBAAC,oBAAD,OAGHmvB,gBAAkBQ,cAAgBhB,aACjC,oBAAC,iBAAD,CAAS1E,SAAU0F,aAAczF,UAAU,OACzC,oBAACoG,YAAD,KAAe,GAAE3B,YAAYniC,UAAiC,IAAvBmiC,YAAYniC,OAAe,QAAU,aAG/E0iC,gBAAkBS,cACjB,oBAACY,aAAD,KACE,oBAAC,cAAD,CACE5zC,MAAO,CAAE1K,MAAOI,6BAAOm+C,IAAKrkD,SAAU,GAAI09C,QAAS,cAAe1L,WAAY,UAC9E/T,OAAK,EACLqmB,aAAc,CAAEvG,UAAW,OAC3B3d,QAASojB,aACTnmB,QAAUzwB,GAAMA,EAAE2/B,mBAClB,oBAAC,qBAAD,SAMR,oBAACgY,cAAD,KACGvC,mBACC,oBAACwC,SAAD,KACGzC,kBAAkBzuC,IAAI,CAACmxC,UAAWC,YACjC,oBAAC,0BAAD,CACED,UAAWA,UACX7mB,SAAW,qBAAoBzzB,aAAau6C,YAC5Cv6C,IAAKu6C,UACLC,gBAAgBjC,iCAAA,EAAAA,sBAAuBkC,wBAAyB,IAAIF,WACpEG,QAASjD,eAAerzC,IAAkB,IAAdm2C,UAAkBzC,WAAa93C,KAC3D26C,SAAU,IAAMxC,kBAAkBn4C,IAAKu6C,WACvCK,cAAe,IAAM1C,0BAA0Bl4C,IAAKu6C,WACpDM,YAAa,IAAM5C,wBAAwBj4C,IAAKu6C,WAChDO,mBACgB,UAAdp4B,KAAKpP,KAAmB,2DAA6D,cAEvFomC,iBAAkB1B,gBAAgBuC,eAK1C,oBAAC,yBAAD,CACE7wB,SAAU+uB,kBAAoB/uB,cAAWve,EACzC4vC,mBAAoBnD,kBAAkB,GACtCoD,sBAAuBpD,kBAAkB,GACzCD,iBAAkBA,kBAAoBC,kBAAkB,GACxDqD,QAASj7C,IACTs4C,uBAAwBA,uBACxBL,wBAAyBA,wBACzBC,0BAA2BA,0BAC3Bze,UAAWA,e,6KA9NrB,mEACA,8DACA,sDACA,iEAEA,4DACA,qCACA,oEAEA,qEACA,sDACA,yDACA,+CACA,8C,weAEyB,G,2BAES,G,mBAER,GAEnB,MAAMggB,aAAerjB,0BAAO2e,GAAI;WAC3BvjD,OAAwCA,MAAMkoD,eAAiB,QAAU39C,6BAAOm/C;;;;oCAMrF,MAAMvB,MAAQvjB,0BAAO2e,GAAI;;;;gBAIhBkE;aACHkC;sBAGb,MAAMnB,YAAc5jB,0BAAOtC,KAAM;WACtB/3B,6BAAOm+C;WArBY;EAyBxBD,aAAe7jB,0BAAO2e,GAAI;;;;WA1BP;YAAA;EAkCnBuE,WAAaljB,0BAAOglB,EAAG;;;;EAMvB5B,WAAapjB,0BAAOilB,EAAG;;EAIhBjB,cAAgBhkB,0BAAO2e,GAAI;;;;sCAMjC,MAAMsF,SAAWjkB,0BAAO2e,GAAI;;;4BAK5B,MAAMuG,oBAAsBllB,0BAAOC,IAAK;WACpC8iB;YApDe;iUC2EnB,SACLzvB,SACA6C,UACAolB,WACAG,eAEA,MAAMyJ,aAAe,GA6BrB,MAAMxL,cAAgBL,sBAAsBnjB,WAAW7C,UACvD,IAAKqmB,cACH,MAAM,IAAIp4C,MAAO,uBAAsB+xB,aAGzC,OAjCA,SAASmmB,SAASE,cAAyCyL,aACrDtJ,8BAA8BnC,cAAe4B,aAC/C4J,aAAa9gB,KAAK+gB,aAEpB,GAAoC,YAAhCzL,cAAcG,cAChB,IAAK,MAAM1zB,QAAQ5e,OAAOwtC,KAAK2E,cAAcI,YAC3CN,SAASE,cAAcI,WAAW3zB,MAAQ,GAAEg/B,eAAeh/B,aAExD,GAAoC,UAAhCuzB,cAAcG,cACvB,GAAyC,YAArCH,cAAcS,KAAKN,cAA6B,CAIlD,MAAMuL,kBAAoB79C,OAAOwtC,KAAK2E,cAAcS,KAAKL,YAAY/I,KAAMpnC,MAAQ,uBAAAuwC,qBAAoBvwC,MAErG6vC,SAASE,cAAcS,KADrBiL,kBAC4B,GAAED,kBAAkBC,wBAElBD,YAAF,YAOhC3L,SAASE,cAAcS,KALbsB,cAKsB0J,YAAF,MAFEA,YAAF,OAUpC3L,CAASE,cAAe,IACjBwL,aAAaG,MAAK,4B,iCAtI3B,mCACA,8DAEA,qCAOA,+CAEA,8D,kFAwBA,IAAIC,cACAC,eACG,SAASlM,sBAAsBnjB,WACpC,GAAIovB,gBAAkBpvB,UAAW,CAC/BovB,mBAAgBxwC,EAChB,MAAM0wC,cAAe,UAAA/hB,SAClBpQ,WACC,MAAMymB,WAAqD,GACrD2L,YAAcvvB,UAAU7C,UAC9B,IAAKoyB,YACH,MAAM,IAAInkD,MAAO,wBAAuB+xB,aAqB1C,OAnBAoyB,YAAYzhB,OAAOkQ,QAASwR,WAC1B,GAAIA,SAASC,WACX,OAGF,MAAMxL,KAAOyL,yBAAcl0B,SAASg0B,SAASzoC,MACzC,CACE48B,cAAe,YACfe,cAAiB8K,SAASzoC,KAC1BoW,mBAEFmyB,aAAaE,SAASzoC,MAEtByoC,SAAS/E,QACX7G,WAAW4L,SAASv/B,MAAQ,CAAE0zB,cAAe,QAASM,UAAM9mB,mBAE5DymB,WAAW4L,SAASv/B,MAAQg0B,OAGzB,CAAEN,cAAe,UAAWC,sBAAYzmB,qBAInDkyB,eAAiB,GACjBh+C,OAAOwtC,KAAK7e,WAAWge,QAAS7gB,WAC9BkyB,eAAelyB,UAAYmyB,aAAanyB,YAE1CiyB,cAAgBpvB,UAElB,OAAOqvB,eAGF,SAAS1J,8BACdnC,cACA4B,YAEA,QACI5B,iBACA4B,YACAA,WAAW5pB,SAASgoB,cAAcG,gBACD,cAAhCH,cAAcG,eAAiCyB,WAAW5pB,SAASgoB,cAAckB,gBA+DjF,MAAMgB,mBAAoB,wBAC/B,CAAClC,cAA0CV,eACzC,IAAKU,cACH,MAAO,CAAEvY,OAAO,EAAO6a,iBAAalnC,EAAW4kC,mBAAe5kC,GAEhE,IAAK,MAAMknC,eAAgChD,YAAa,CACtD,IAAKU,cACH,MAAO,CAAEvY,OAAO,EAAO6a,wBAAatC,6BAEtC,GAAyB,SAArBsC,YAAY/+B,KAAiB,CAC/B,GAAoC,YAAhCy8B,cAAcG,cAChB,MAAO,CAAE1Y,OAAO,EAAO6a,wBAAatC,6BAEtCA,cAAgBA,cAAcI,WAAWkC,YAAY71B,WAChD,GAAyB,UAArB61B,YAAY/+B,KAAkB,CACvC,GAAoC,UAAhCy8B,cAAcG,cAChB,MAAO,CAAE1Y,OAAO,EAAO6a,wBAAatC,6BAEtCA,cAAgBA,cAAcS,SACzB,IAAyB,WAArB6B,YAAY/+B,KAgBrB,MADC++B,YAAY/+B,KACP,IAAI3b,MAAO,6BAA4B06C,YAAY/+B,MAhBjB,CACxC,GAAoC,YAAhCy8B,cAAcG,eAA2D,IAA5BmC,YAAY1gB,KAAKzb,QAAqC,MAArBm8B,YAAY34C,MAC5F,MAAO,CAAE89B,OAAO,EAAO6a,wBAAatC,6BAEtC,IAAImM,YAAcnM,cAClB,IAAK,MAAMvzB,QAAQ61B,YAAY1gB,KAAM,CACnC,GAAkC,YAA9BuqB,YAAYhM,cACd,MAAO,CAAE1Y,OAAO,EAAO6a,wBAAatC,6BAGtC,GADAmM,YAAcA,YAAY/L,WAAW3zB,MAClB,MAAf0/B,YACF,MAAO,CAAE1kB,OAAO,EAAO6a,wBAAatC,gCAQ5C,MAAO,CAAEvY,OAAO,EAAM6a,iBAAalnC,EAAW4kC,+B,sOC9LlD,mCACA,O,4WAAA,yBACA,sEACA,0DAEA,iEAEA,yEACA,yDACA,0EACA,8DAGA,yCACA,gEACA,wEACA,yDACA,+D,06BAGA,MAAMoM,cAAe,mCAAuC,eAAiBC,YAAD,CAC1EC,MAAM,UAAApnD,KAAImnD,UAAUjzC,IAAI,EAAGkzC,aAAoB,MAARA,UAAelxC,EAAYkxC,OAClEC,MAAM,UAAA34B,KAAIy4B,UAAUjzC,IAAI,EAAGmzC,aAAoB,MAARA,UAAenxC,EAAYmxC,U,4CAShB/sC,OAAD,uDAA4C,CAC7FqgC,YAAargC,KAAKqgC,YAClB2M,YAAahtC,KAAKqa,QAAQ2yB,YAC1BC,YAAW,8BAAEjtC,KAAKqa,QAAQA,eAAf,0DAAE,sBAAsBgP,cAAxB,kCAAE,uBAA8B5yB,QAqB7C,MAAMy2C,MAAQrmB,0BAAO2e,GAAI;;EAInB2H,WAAatmB,0BAAO2e,GAAI;;;;EAMxB4H,KAAOvmB,0BAAO2e,GAAI;;;;;;;;;;;EAalB6H,QAAUxmB,0BAAO2e,GAAI;;;;;;;;;EAWrB8H,kBAAmB,SAAAjnC,OAAS,WAChC,OACE,6BAAC,eAAMknC,SAAP,KACE,6BAAC,iBAAD,CAASnJ,SAAU,4EAA6CoJ,MAAO,GACrE,oCAAK12C,MAAO,CAAE5P,SAAU,WAAYkE,KAAM,EAAGiG,IAAK,EAAGvM,MAAO,GAAIgc,OAAQ,MAE1E,6BAAC,iBAAD,CAASujC,UAAU,MAAMD,SAAU,8EAA+CoJ,MAAO,GACvF,oCAAK12C,MAAO,CAAE5P,SAAU,WAAYkE,KAAM,EAAG2V,MAAO,EAAGzb,OAAQ,GAAIwb,OAAQ,U,cAiCpE,SAAAuF,OAAY,SAAwBpkB,OAAc,YAC/D,MAAMwrD,gBAAiB,SAAA5Q,QAAwB,MACzCnW,SAAU,SAAAmW,QAAwB,MAClC6Q,cAAe,SAAA7Q,SAAgB,GAC/B8Q,KAAM,SAAA9Q,QAAwB,OAE7B+Q,mBAAoBC,2BAA4B,SAAA5pD,WAAS,IACzD,CAAE6pD,cAAe,SAAA7pD,YAElB8pD,oBAAqB,SAAAzjD,aACzB,KACmC,YAA7BiJ,SAASy6C,iBAUXF,eAGJ,CAACA,eAEH,SAAAzjD,WACE,KACEkJ,SAASu/B,iBAAiB,mBAAoBib,oBACvC,KACLx6C,SAASk/B,oBAAoB,mBAAoBsb,sBAGrD,CAACA,qBAGH,MAAME,YAAa,mBAAAC,qBAAmB,SAAA5jD,aAAa6jD,iBAAoBA,gBAAgBF,WAAY,KAE7FG,eAAgB,SAAA9jD,aACpB,KACE,MAAM+jD,YAAcJ,WAAW,kBAC/B,MAAO,KACLI,gBAGJ,CAACJ,cAGG,cAAElR,cAAF,MAAiBuR,OAAUrsD,MAC3BssD,aAAY,gBAAGD,MAAM,UAAT,mBAAG,QAAUv0C,GACzBy0C,qBAAsB,SAAAlkD,aACzBmkD,SACC,MAAMC,YAAcD,OAAO5W,KAAK,EAAG99B,SAASA,KAAOw0C,cAC/CG,aAAe3R,eAA4C,iBAApB2R,YAAYhpD,KAA+C,iBAApBgpD,YAAYt6B,KAC5F2oB,cAAc2R,YAAYhpD,IAAKgpD,YAAYt6B,MAG/C,CAACm6B,aAAcxR,gBAGX4R,WAAY,SAAArkD,aAChB,KACOsjD,oBACHC,0BAAyB,IAG7B,CAACD,mBAAoBC,2BAGjBe,aAAc,SAAAtkD,aAClB,KACMmjD,eAAel8B,UACjBk8B,eAAel8B,QAAQs9B,YACvBhB,0BAAyB,KAG7B,CAACA,4BAGIiB,yBAA0BC,8BAA+B,SAAA9qD,WAAkB,IAC3E+qD,2BAA4BC,gCAAiC,SAAAhrD,WAAkB,GACtF,IAAIirD,SAAW,KACXJ,0BAA4BE,2BAC9BE,SAAW,KACFJ,yBACTI,SAAW,IACFF,6BACTE,SAAW,KAEb,MAAMhsB,gBAAkB1gC,eAAMk6B,QAC5B,KAAM,CACJyyB,EAAG,IAAMJ,6BAA4B,GACrChe,EAAG,IAAMke,+BAA8B,KAEzC,CAACF,4BAA6BE,gCAE1BG,cAAgB5sD,eAAMk6B,QAC1B,KAAM,CACJyyB,EAAG,IAAMJ,6BAA4B,GACrChe,EAAG,IAAMke,+BAA8B,KAEzC,CAACF,4BAA6BE,gCAG1BI,eAAgB,SAAA/kD,aAAY,KAC5Bo8B,QAAQnV,SACV+9B,kBAASC,uBAAuB7oB,QAAQnV,SAEtCmV,QAAQnV,SAAWmV,QAAQnV,QAAQi+B,aAErC9oB,QAAQnV,QAAQi+B,WAAWC,YAAY/oB,QAAQnV,SAC/CmV,QAAQnV,QAAU,OAEnB,KAEH,SAAAlnB,WACE,IACS,KACLqjD,aAAan8B,SAAU,EACvB89B,iBAGJ,CAACA,gBAGH,MAAM/Q,SAAWr8C,MAAMq8C,UAAY,GAG7BoR,eAAgB,SAAAplD,aACpB,CAACqlD,sBAAuCpyC,OAA2BqyC,eAGjE,IAAKA,aAAelC,aAAan8B,QAC/B,OAAO89B,gBAMT,MAAMQ,YAAcvR,SAASzG,KAC1BiY,UAAaA,SAAS1sD,IAAMwsD,YAAYzqD,KAAK/B,GAAK2sD,OAAOD,SAASzsD,KAAO0sD,OAAOH,YAAYzqD,KAAK9B,IAEpG,IAAKwsD,YACH,OAAOR,gBAGJ3oB,QAAQnV,UACXmV,QAAQnV,QAAUhe,SAASy8C,cAAc,OACrCzyC,OAAOiyC,YACTjyC,OAAOiyC,WAAWS,YAAYvpB,QAAQnV,UAItCmV,QAAQnV,SACV+9B,kBAAS14C,OACP,6BAAC,+BAAD,CAAuB8vB,QAASmpB,aAC9B,oCAAK/4C,MAAO,CAAE5P,SAAU,WAAYkE,KAAMwkD,YAAYhgD,KAAKxM,EAAGiO,IAAKu+C,YAAYhgD,KAAKvM,MAEtFqjC,QAAQnV,UAId,CAAC89B,cAAe/Q,WAGZh9B,aAAc,SAAAhX,aAClBM,cACE,MAAM+kD,sBAAwBlC,eAAel8B,QAC7C,IAAKo+B,wBAA0BA,sBAAsBpyC,OAKnD,OAJA8xC,qBACI1B,IAAIp8B,SAAWo8B,IAAIp8B,QAAQza,QAC7B62C,IAAIp8B,QAAQza,MAAMktC,QAAU,SAIhC,MAAM,OAAEzmC,QAAWoyC,sBACbO,WAAa3yC,OAAO4yC,wBAC1B,GACE5d,MAAM6d,MAAQF,WAAW9kD,MACzBmnC,MAAM6d,MAAQF,WAAWnvC,OACzBwxB,MAAM8d,MAAQH,WAAW7+C,KACzBkhC,MAAM8d,MAAQH,WAAWpvC,OAMzB,OAJAuuC,qBACI1B,IAAIp8B,SAAWo8B,IAAIp8B,QAAQza,QAC7B62C,IAAIp8B,QAAQza,MAAMktC,QAAU,SAKhC,MAAMsM,eAAiB/d,MAAM6d,MAAQF,WAAW9kD,KAOhD,GANIuiD,IAAIp8B,SAAWo8B,IAAIp8B,QAAQza,QAC7B62C,IAAIp8B,QAAQza,MAAMktC,QAAU,QAC5B2J,IAAIp8B,QAAQza,MAAM1L,KAAUklD,eAAF,MAGF/d,MAAMtiC,SAAWsN,OAM3C,GAAI+gC,UAAYA,SAAS33B,OAAQ,CAC/B,MAAM4pC,qBAAuBZ,sBAAsBa,kBAAkBje,OACrEmd,cAAcC,sBAAuBpyC,OAAQgzC,qBAE7ClB,qBARAA,iBAWJ,CAACK,cAAeL,cAAe/Q,WAG3BmS,kBAAoB,CAAC3D,KAAeC,QACxC,MAAM,MAAE2D,OAAUzuD,MACZ0uD,QAAU1uD,MAAM0uD,SAAW,GAC3BC,YAAc3uD,MAAM2uD,aAAe,GAGnCC,sBAAwB,CAC5B7vC,WAAY8vC,sBAAOC,cACnBzqD,SAAU,GACV0qD,UAAW,OACXC,YAAa,GAETC,sBAAwB,CAC5BlwC,WAAY8vC,sBAAOC,cACnBzqD,SAAU,GACV0qD,UAAW,OACX1G,QAAS,GAEL6G,aAAe,CACnBC,MAAOP,sBACPQ,UAAW,CAAEjlD,MAAO,2BAA4BklD,cAAe,6BAG3DnyB,QAAU,CACdoyB,qBAAqB,EACrBC,UAAW,CAAEC,SAAU,GACvBC,4BAA6B,EAC7BC,OAAQ,CAAE3N,SAAS,GAEnB9hC,SAAU,CAAE0vC,KAAM,CAAEC,QAAS,IAC7BC,MAAO,CACLC,WAAW,EACX35B,KAAM,KAERkmB,SAAU,CACRyT,WAAW,EACX35B,KAAM,IACNqL,SAAS,GAEXgrB,OAAQ,CACNiC,MAAOA,MACHA,MAAM92C,IAAK+R,OACI,cAAH,GACLwlC,aACAxlC,MAFK,CAGRylC,MAAO,cAAF,GACAP,sBACAllC,MAAMylC,UAKf,CAACD,cACL7C,MAAOA,MAAM10C,IAAKgS,QAChB,MAAMwlC,MAAQ,cAAH,GACNF,sBACAtlC,MAAMwlC,OAQX,OALIxD,4BACKwD,MAAM1rD,WACN0rD,MAAMh9B,KAGf,iBACKxI,MADL,CAEEwlC,iBAINT,gBACAqB,WAAY,CAAEpB,0BAQhB,OANKhD,qBAEHzuB,QAAQsvB,OAAOiC,MAAM,GAAGU,MAAM1rD,IAAMonD,KAEpC3tB,QAAQsvB,OAAOiC,MAAM,GAAGU,MAAMh9B,IAAM24B,MAE/B5tB,UAGH,UACJ8yB,UADI,KAEJluC,KAFI,MAGJjf,MAHI,OAIJQ,OAJI,WAKJ4sD,WALI,eAMJC,eANI,WAOJC,WAPI,KAQJjtD,KARI,SASJktD,SATI,QAUJ1uB,QAVI,YAWJ2uB,YAAc,GAXV,aAYJC,cACEtwD,MACEy6C,SAAWz6C,MAAMy6C,UAAY,YAC7B8V,OAAQ,UAAAtqC,SAAQ/iB,KAAKk5C,SAASzkC,IAAI,EAAGzU,KAAMstD,OAAWA,IAAI9rC,OAAS,EAAI8rC,IAAI74C,IAAI,EAAGxW,OAAQA,QAAKwY,KAC9FkxC,KAAMC,MAAQ,EAAC,UAAArnD,KAAI8sD,QAAQ,UAAAp+B,KAAIo+B,QAEhCE,WAAa,CACjB3uC,UACAjf,YACAQ,cACAmL,IAAM,GAAE3L,SAASQ,SACjB0R,IAAKy2C,eACLtoD,KAAM,cAAF,GAAOA,KAAP,CAAak5C,SAAUl5C,KAAKk5C,SAAS1uB,OAAQgjC,UAAaL,YAAYK,QAAQvtB,UAClFopB,wCACAG,oBACAhrB,gBACAivB,YAAa,cAAF,GACNC,sBAAeC,aAAaF,YADtB,CAETnvB,QAASxhC,MAAMuS,KACf4jB,KAAM82B,WAERqD,0BACAnE,6BAGI2E,QAAUL,WAAWvtD,KAAKk5C,SAAS1G,KAAMgb,SAAYA,QAAQxtD,KAAKwhB,QAExE,OACE,oCAAK7P,MAAO,CAAEktC,QAAS,OAAQl/C,MAAO,SACpC,oCAAKgS,MAAO,CAAEktC,QAAS,OAAQl/C,cAC7B,6BAACooD,MAAD,CAAO7rC,cAAeutC,aACpB,6BAACxB,KAAD,CAAMp2C,IAAK22C,MAGV0E,UAAyB,cAAb3V,UAA4BqW,QACvC,6BAACnG,aAAD,CAAcznD,KAAM,CAAE2nD,UAAMC,YACxBiG,eACA,MAAMC,WAAkC,MAArBD,aAAalG,MAAe,UAAApnD,KAAI,CAAConD,KAAMkG,aAAalG,OAASA,KAC1EoG,WAAkC,MAArBF,aAAajG,MAAe,UAAA34B,KAAI,CAAC24B,KAAMiG,aAAajG,OAASA,KAChF,OAAO,6BAAC,sBAAD,YAAoB2F,WAApB,CAAgCvzB,QAASsxB,kBAAkBwC,WAAYC,iBAIlF,6BAAC,sBAAD,YAAoBR,WAApB,CAAgCvzB,QAASsxB,kBAAkB3D,KAAMC,SAGlEa,oBACC,6BAACT,WAAD,KACE,6BAAC,gBAAD,CAAQzmB,QAAQ,2BAA2B/C,QAASirB,aAApD,eAOJ,6BAAC,6BAAD,CAAgBuE,SAAO,EAACj8C,YAAaoK,YAAanK,UAAWmK,YAAaA,YAAaA,cACvF,6BAAC,qBAAD,CAAaoiB,QAAM,EAACR,gBAAiBA,gBAAiBD,cAAemsB,kBAGxEntD,MAAMuS,MAAQ,6BAAC84C,iBAAD,MACd4E,YACC,6BAAC7E,QAAD,KACE,6BAAC,8BAAD,CACE4E,UAAWA,UACXE,eAAgBA,eAChB9T,SAAUl5C,KAAKk5C,SACfiU,YAAaA,YACbF,WAAYA,YAAc,gB,+MCrftC,I,IAAA,+BACA,Y,IAAA,2B,iCAEA,4CAIO,MAAMgB,WAAa,CACxBC,mCAAiBC,KAAKC,OACtBF,mCAAiBG,OAAOD,OACxBF,mCAAiBI,OAAOF,OACxBF,mCAAiBK,OAAOC,KACxBN,mCAAiBO,KAAKL,OACtBF,mCAAiBQ,MAAMN,OACvBF,mCAAiBS,UAAUP,OAC3B,W,8BAGK,MAAMQ,YAAoC,UAAAxpB,SAC9Cn+B,QACC,sBAAUA,OACP4nD,SAAS,IACT3a,Y,8BAGA,MAAM4a,WAAmC,UAAA1pB,SAC7Cn+B,QACC,sBAAUA,OACP8nD,OAAO,IACP7a,Y,8MC9BP,I,IAAA,mB,IAAA,yB,iCAEO,MAAM8a,kBAAoBttB,0BAAOzB,KAAM;;;8CAKvC,MAAMgvB,kBAAoBvtB,0BAAO0B,KAAM;;;8MC4JvC,SACL7I,iBACAwK,WAEAxK,iBAAiB,mBAAqBhE,QACpC,iBACKA,OADL,CAEEhD,OAAO,UAAAqR,MAAKrO,OAAOhD,MAAMzW,OAAO,CAAC,CAAE9X,MAAO+/B,UAAWzG,SAAS,EAAMgY,gBAAiB,sB,sDAzK3F,mCACA,sDACA,2EACA,+BACA,8DACA,kEACA,4DAEA,6DACA,yDACA,4EACA,oEACA,yDACA,+DACA,mEAKA,oCACA,+DACA,+DAEA,+BACA,sCAEA,8BACA,4C,siCAEO,MAAM4Y,uBAAyB,CACpC,OACA,OACA,QACA,QACA,SACA,QACA,SACA,QACA,SACA,U,sDAGF,MAIMnH,MAAQrmB,0BAAO2e,GAAI;;;;;EAOnB8O,WAAaztB,0BAAO2e,GAAI;;;;aAIhBvjD,OAAWA,MAAMsyD,KAAO,EAAI;;;EAKpCC,qBAAuB3tB,0BAAO2e,GAAI;;;;;EAOlCiP,qBAAuB5tB,0BAAO2e,GAAI;;;EAKlCkP,YAAa,sBAAUloD,sBAAO26B,SACjCwtB,SAAS,IACTC,cACGC,kBAAmB,sBAAUroD,sBAAO26B,SACvC2tB,QAAQ,GACRF,cAEGG,gBAAkBluB,0BAAO2e,GAAI;;;kBADjB;;;;2BAAA;;;;;;kBAcAkP;;;;IAIbzyD,OACDA,MAAM+yD,QACNC,qBAAI;;;EAKFC,aAAeruB,0BAAO2e,GAAI;;;UAzBd;;;;;;gBAkCFkP;;;;iBAICG;;;IAGbE;;;EAKEzG,MAAQ,CACZ,CACE8C,MAAO,CACLpwC,WAAY8vC,sBAAOC,cACnBzqD,SAAU,GACV0qD,UAAW,OACXC,YAAa,GAEfltC,KAAM,WACNpT,QAAQ,IAINggD,QAAU,CACdwE,WAAY,CACVC,OAAQ,SACRC,OAAQ,GACR1kD,OAAQ,EACRwzB,MAAM,EACNrS,KAAM,CACJ6f,OAxGa,wCAyGbrd,KAxGW,GAyGXghC,OAxGa,SA2GjBC,sBAAuB,GAGnBhD,aAAe,CAEnBiD,WAAY,QAwBd,MAAM3/B,yBAAyBrzB,MAAMsvC,cAAqB,0EAIvC,CAAC3nC,MAAeV,SAC/B,GAAa,MAATA,MACF,MAAM,IAAIrB,MAAM,iBAElB,MAAMqtD,SAAW/kD,KAAKzO,MAAMy5B,OAAOhD,MAAM2H,QACzCo1B,SAAShsD,OAAT,iBAAuBgsD,SAAShsD,OAAhC,CAAwCU,MAAOA,MAAMq9C,SACrD92C,KAAKzO,MAAM25B,WAAW,CAAElD,MAAO+8B,aAVuB,qDAaxB,CAACtrD,MAAwBV,SACvD,GAAa,MAATA,MACF,MAAM,IAAIrB,MAAM,iBAElB,MAAMqtD,SAAW/kD,KAAKzO,MAAMy5B,OAAOhD,MAAM2H,QACzCo1B,SAAShsD,OAAT,iBAAuBgsD,SAAShsD,OAAhC,CAAwCgyC,gBAAiBtxC,QACzDuG,KAAKzO,MAAM25B,WAAW,CAAElD,MAAO+8B,aAGjC7+C,SACE,MAAM,MAAE8hB,OAAUhoB,KAAKzO,MAAMy5B,OACvBg6B,iBAAkC,GAAfh9B,MAAM/R,OACzBgvC,eAAiBD,iBAAmBh9B,MAAM/R,OAE1CrhB,OAAS1D,KAAKwyB,IAAI,GAAIshC,iBADR,IAGpB,OACE,oBAACxI,MAAD,KACE,oBAAC,sBAAD,CAActO,UAAQ,EAACD,YAAaA,qBACpC,oBAAC2V,WAAD,CAAYC,KAAM7jD,KAAKzO,MAAMq8B,WAC3B,oBAAC,gBAAD,CACEqF,QAAS,IACPjzB,KAAKzO,MAAM25B,WAAW,CACpBlD,MAAO,IAAIhoB,KAAKzO,MAAMy5B,OAAOhD,MAAO,CAAEvuB,MAAO,GAAIsxC,gBAAiB,mBAHxE,QASF,oBAAC,kCAAD,CAA0B/iB,MAAOA,MAAM9e,IAAI,EAAGzP,eAAYA,QACvD,EAAGwxC,wBAAayC,wBACf,MAAME,SAAW,GACXn5C,KAAO,CACXywD,QAASl9B,MAAM9e,IAAI,CAACi8C,MAAOtV,YAAcA,UAAUlH,YACnDgF,SAAU3lB,MAAM9e,IAAI,EAAGzP,MAAOi4B,KAAMqZ,iCAAmB8E,aACrD,MAAMuV,SAAW,CACfC,YAAa,GACbvpD,OAAQ,MAACoP,GACTzW,KAAM,GACNwU,MAAM,EACNyrB,MAAOmb,UAAUlH,WACjB5oC,IAAK8vC,UAAUlH,WACf2c,qBAAsB,GACtBC,iBAAkB,cAClBC,iBAAkB,EAClBC,YAAa,KACbC,WAAY,SACZC,UAAU,EACVlB,WAAY,CACVnR,QAAS,KAGPsS,YAAa,cAAA9hC,kBAAiBE,gBAAgBmB,iBAAiB8C,4BACnEyJ,OACG,CAACm0B,0BAASnD,wBACf,IAAIoD,cAAeC,kBACnB,IAAK,IAAIhtD,MAAQ,EAAGA,MAAQkyC,YAAYvZ,MAAMzb,OAAQld,QAAS,CAC7D,MAAMuW,MAAO,kBAAA87B,qCAAoCH,YAAYvZ,MAAM34B,QACnE,GAAgC,IAA5BuW,KAAKqgC,YAAY15B,OACnB,SAGF,MAAM+vC,UAAgC,gBAApBjb,gBAAoCz7B,KAAKitC,YAAcjtC,KAAKgtC,YAC9E,IAAK0J,UACH,SAGF,MAAM,aAAEvV,aAAF,MAAgBh3C,OAAU6V,KAAKqgC,YAAY,GAGjD,GACEoW,mBACuD,KAAvD,QAAAE,QAAM,QAAAC,eAAcH,kBAAmBC,aACvCF,gBAAkBrsD,MAElB,SAKF,GAHAssD,kBAAoBC,UAGhB90C,OAAO7T,MAAM5D,QAA2B,iBAAVA,MAChC,SAGF,GAAqB,iBAAVA,OAAuC,kBAAVA,OAAwC,iBAAVA,MACpE,SAGF,MAAM0sD,cAAiC,iBAAV1sD,OAAqB,uBAAWA,OAASvI,KAAKk1D,MAAMl1C,OAAOzX,QAClFiC,MAAQkqD,YAAW,QAAAS,gBAAeF,cAAexoD,OAAO06B,OAAOutB,YAAY3vC,SAIjFmvC,SAASE,qBAAqBgB,SAAQ,cAAA/C,WAAU7nD,QAChD0pD,SAAStpD,OAAOwqD,QAAQ5qD,OACxB,MAAMg5B,MAAQ+b,aAAgB,GAAEA,iBAAiB4O,OAAO5lD,UAAY4lD,OAAO5lD,OACrE/G,GAAI,QAAAuzD,QAAM,QAAAC,eAAcF,UAAWtY,YACnC/6C,EAAIk9C,UAAUlH,WACd3S,QAAqC,CACzCtjC,IACAC,IACA2c,UACAoiB,UACAj4B,YACAg3C,0BACA/C,qBAEFE,SAAS0Y,QAAQtwB,SACjB,MAAMuwB,UAAuB,CAAE7zD,IAAGC,KAC5B6zD,mBAAkCt7C,IAAlB46C,eAA+BA,gBAAkBrsD,MAEvE2rD,SAASX,WAAWnR,QAAQgT,UAAQE,eAAgB,QAChDA,gBACFD,UAAU7xB,MAAQA,MAClB6xB,UAAUE,WAAa/qD,OAEzB0pD,SAAS3wD,KAAK6xD,QAAQC,WACtBT,cAAgBrsD,MAElB,OAAO2rD,YAMX,OACE,oBAACtB,qBAAD,KACE,oBAAC,kCAAD,KACG,EAAG1vD,eACF,oBAAC2vD,qBAAD,CAAsB39C,MAAO,CAAEhS,MAAOA,MAN1B,GAM+CQ,gBACzD,oBAAC,wBAAD,CACEkP,MAAI,EACJ69C,UAAQ,EACRvtD,MAAOA,MAVC,GAWRQ,OAAQA,OACRH,KAAMA,KACN4e,KAAK,iBACLuqC,MAAOA,MACPqC,QAASA,QACT4B,aAAcA,aACdjU,SAAUA,WAGX5lB,MAAM9e,IAAI,EAAGzP,MAAOi4B,KAAMqZ,iCAAmBhyC,QAC5C,oBAACsrD,gBAAD,CACEtkD,IAAKhH,MACLqN,MAAO,CAAEzF,IAAK5H,MAAQksD,gBACtBX,OAAkB,IAAVvrD,OAAeiH,KAAKzO,MAAMq8B,WAClC,oBAAC42B,aAAD,CACEvxB,QAAS,KACP,MAAM8xB,SAAW/kD,KAAKzO,MAAMy5B,OAAOhD,MAAM2H,QACzCo1B,SAAS2B,OAAO3tD,MAAO,GACvBiH,KAAKzO,MAAM25B,WAAW,CAAElD,MAAO+8B,aAJnC,KAQA,oBAAC,0BAAD,CACErzB,KAAMA,KACN4Q,SAAUtiC,KAAK2mD,eACf5tD,MAAOA,MACPoqC,UAAQ,EACRuO,WAAYiS,uBACZ9R,eAAa,EACb9G,gBAAiBA,gBACjBsG,wBAAyBrxC,KAAK4mD,yC,gBAjLpDzhC,iB,YACe,oB,gBADfA,iB,gBAEmB,CAAE6C,MAAO,K,cA+LnB,QAAA4hB,MAAI,kBAA6BzkB,mB,gKCnUjC,UAA2B,SACxCmd,SADwC,cAExCpb,cAFwC,OAGxCyB,OAHwC,aAIxCk+B,aAJwC,oBAKxCC,oBALwC,qBAMxCC,uBAEA,GAAIF,cAAgBC,oBAClB,MAAM,IAAIpvD,MAAM,wDAElB,IAAKmvD,eAAiBC,oBACpB,MAAM,IAAIpvD,MAAM,uDAElB,MAAMsvD,gBAA4B,GAClC,IAAK,MAAMn/B,SAASc,OAClB,GAAIk+B,cACF,IAAK,MAAMI,cAAcJ,aACvB,GAAIh/B,MAAMtL,KAAKi2B,SAASyU,WAAWC,SAAWr/B,MAAM4B,WAAaw9B,WAAWx9B,SAAU,CACpF,MAAM09B,YAAct/B,MAAMtL,KAAKoT,MAAM,EAAG9H,MAAMtL,KAAKtG,OAASgxC,WAAWC,OAAOjxC,QAC9E+wC,gBAAgBxsB,KAAK2sB,mBAIrBt/B,MAAM4B,WAAaq9B,qBACrBE,gBAAgBxsB,KAAK3S,MAAMtL,MAKjC,MAAM6qC,cAAyB,UAAA/tB,MAAK,CAAC0tB,wBAAyBC,gBAAiB9/B,gBAW/E,OACE,6BAAC,kBAAD,CACEusB,gBACE,6BAAC,cAAD,CACEqG,MAAI,EACJ9jB,QACE6wB,aACK,+CAA8CA,aAAa39C,IAAKm+C,OAAUA,MAAMH,QAAQ3gB,KAAK,MAC7F,iCAA+BugB,qBAAuB,IAE7D5M,aAAc,CAAEvG,UAAW,OAC3BvtC,MAAO,CAAE1K,MAAOwrB,gBAAkB6/B,qBAAuBjrD,6BAAOwrD,OAASxrD,6BAAOyrD,QAChF/zB,SAAU,aACV,6BAAC,kBAAD,CAAcL,UAAWC,qBAAOo0B,SAGnCJ,aAAal+C,IAAI,CAAC2e,MAAOnT,MACxB,6BAAC+yC,KAAD,CACErhD,MAAO8gB,gBAAkBW,MAAQ,CAAE3wB,gBAAiB,0BAA6B,GACjF6I,IAAK8nB,MACLoL,QAAS,KACPqP,SAASza,SAEX,6BAAC6/B,MAAD,KAjCgB,EAAC7/B,MAAewyB,aACtC,MAAMsN,SAAW9/B,OAAgB,qCAAMzhB,MAAO,CAAEwhD,UAAW,WAA1B,WACjC,OACE,yCACGD,SACAtN,UAAY,GAAK,qBA4BRwN,CAAgBhgC,MAAOm/B,gBAAgBl/B,SAASD,SACvDX,gBAAkBW,MACjB,6BAACigC,UAAD,KACE,6BAAC,eAAD,OAEA,SAxHd,4DACA,2DACA,+BACA,sDACA,iEAEA,2DACA,sDACA,8DAEA,8C,kFAmBA,MAAML,KAAOtxB,0BAAO2e,GAAI;;;;;EAOlB4S,MAAQvxB,0BAAOC,IAAK;;;;EAMpB0xB,UAAY3xB,0BAAOC,IAAK;;;;;;;yICyGf,SAAsB7kC,OACnC,MAAM,WAAE25B,WAAYF,QAAQ,6BAAE+8B,8BAAiC,IAAOj2D,MAAMwH,WAAW0uD,wBAAiB,GACxG,OACE,oBAACC,0BAAD,YACM12D,MADN,CAEE25B,WAAYA,WACZ68B,6BAA8BA,iC,gIAxJpC,qEACA,sDAEA,iEAEA,+DACA,4EACA,iEACA,qEAEA,4EACA,4DACA,qEACA,sDACA,+DACA,6CACA,gEAEA,gCACA,8C,k4BAEO,MAAMG,KAAO/xB,0BAAO2e,GAAI;;;;;oBAMxB,MAAMvN,OAASpR,0BAAOzB,KAAM;WACvBnjC,OAAWA,MAAM6C,MAAW7C,MAAM6C,MAAR,KAAoB;;;wBAInD,MAAM0hC,OAASK,0BAAO2e,GAAI;WACtBh5C,6BAAO+9C;;wBAGX,MAAMsO,YAAchyB,0BAAO2e,GAAI;WAC3Bh5C,6BAAOm/C;;;0DAKa,iB,kCACU,mBAgBzC,MAAMgN,0BAA4Bn2D,MAAM6jB,MAAsB,UAAmC,eAC/FyyC,eAD+F,gBAE/FC,gBAF+F,UAG/FC,UAH+F,sBAI/FC,sBAJ+F,mBAK/FC,mBAL+F,6BAM/FT,6BAN+F,WAO/F78B,aAEA,MAAOu9B,YAAaC,gBAAkB52D,MAAMyB,SAAmBi1D,oBACzDG,uBAAwB,SAAA/Z,mBAAkB,CAACwZ,kBAAmBA,gBACpEt2D,MAAM6H,UACJ,KACOouD,8BAAiCO,YAEhCK,uBAhCmB,mBAgCMF,YAC3BC,eAjCqB,kBAkCXN,gBAlCW,mBAkCOK,aAE5BC,eAAe,QAIrB,CAACX,6BAA8BY,sBAAuBF,YAAaL,eAAgBE,YAGrF,MAAM,OAAE/+C,QAAW6+C,gBAAkB,GAC/BQ,aAAer/C,QAA0B,MAAhBA,OAAO8J,KAChCw1C,wBAA0B/2D,MAAMk6B,QACpC,IAAO48B,a,8ZAAe,CAAH,GAAQR,eAAR,CAAwB7+C,QAAQ,qBAAAu/C,wBAAuBv/C,UAAY6+C,eACtF,CAACQ,aAAcr/C,OAAQ6+C,kBAGnB,sBAAElzB,wBAA0B,uCAElC,OACE,oBAAC,0BAAD,CACEc,QAAQ,uCACRwxB,KACE,oBAAC,cAAD,CAAMphD,MAAO,CAAE1K,MAAO,UACpB,oBAAC,uBAAD,OAGJy3B,UAAWC,sBAAO21B,QAClBN,YAAaA,YACbO,YAAcC,iBACRlB,8BAAgCx+C,SAAW0/C,gBAE7CV,wBAEFG,eAAeO,kBAEjB,oBAAC,kBAAAC,UAAD,CAAW3sC,KArEc,kBAsEvB,oBAAC,kBAAA4sC,uBAAD,KACGf,eACC,wCACGC,iBAAmB,oBAAC,qBAAD,CAAaD,eAAgBA,eAAgBC,gBAAiBA,kBACjFO,cACC,oBAAC,2BAAD,CAAmBR,eAAgBS,wBAAyBR,gBAAiBA,kBAE/E,oBAAC,uBAAD,CACEnzB,sBAAuBA,sBACvBkzB,eAAgBS,wBAChBR,gBAAiBA,mBAIrB,oBAACF,YAAD,qDAEF,oBAAC,kBAAD,CACEzzB,MAAM,gCACN+lB,SAAUsN,6BACVzlB,SAAU,IAAMpX,WAAW,CAAE68B,8BAA+BA,mCAIlE,oBAAC,kBAAAmB,UAAD,CAAW3sC,KA5FwB,oBA6FjC,oBAAC,kBAAA4sC,uBAAD,KACE,oBAAC,kCAAD,CAA0Bj0B,sBAAuBA,+B,sICzH5C,SAASk0B,QACtBC,OACAC,MACAC,QAAmB,KACnBC,wBAAkC,GAElC,GAAI7tD,MAAMo7C,QAAQsS,SAAW1tD,MAAMo7C,QAAQuS,OAAQ,CACjD,IAAIG,gBACJ,MAAMC,SAAWL,OAAO93C,OAAO+3C,OAC/B,GAAII,SAAS,IAA6B,iBAAhBA,SAAS,GAAiB,CAClD,IAAIC,0BAA4B,GACV,MAAlBD,SAAS,GAAGrgD,KACdsgD,0BAA0BtgD,GAAK,CAAEggD,OAAQ,GAAIC,MAAO,KAEtD,IAAK,MAAMvpD,OAAO2pD,SAAS,IACrB,uBAAApZ,qBAAoBvwC,OACtB4pD,0BAA0B5pD,KAAO,CAAEspD,OAAQ,GAAIC,MAAO,MAGrD,UAAAM,OAAMF,SAAWp6C,MAASA,MAAwB,iBAATA,QAC5Cq6C,0BAA4B,IAE9B,IAAK,MAAME,SAASF,0BAClB,IAAK,MAAMG,cAAcT,OAEE,MAArBS,WAAWD,QACbF,0BAA0BE,OAAOR,OAAO7uB,KAAKsvB,WAAWD,QAI9D,IAAK,MAAMA,SAASF,0BAClB,IAAK,MAAMI,aAAaT,MAEE,MAApBS,UAAUF,QACZF,0BAA0BE,OAAOP,MAAM9uB,KAAKuvB,UAAUF,QAI5D,IAAK,MAAMA,SAASF,0BAA2B,CAC7C,MAAQN,OAAQW,kBAAmBV,MAAOW,kBAAqBN,0BAA0BE,OACzF,IAAI,UAAAxwB,MAAK2wB,mBAAmB/zC,SAAWozC,OAAOpzC,SAAU,UAAAojB,MAAK4wB,kBAAkBh0C,SAAWqzC,MAAMrzC,OAAQ,CACtGwzC,gBAAkBI,MAClB,QAKN,GAAIJ,gBAAiB,CACnB,MAAMS,oBAAqB,UAAAzjB,OAAM6iB,MAAOG,iBAClCU,KAAO,GACb,IAAK,MAAML,cAAcT,OAAQ,CAC/B,IAAKS,YAAoC,iBAAfA,WACxB,MAAM,IAAIpyD,MAAM,2DAElB,MAAM2R,GAAKygD,WAAWL,iBAChBW,UAAYhB,QAAQU,WAAYI,mBAAmB7gD,IAAKogD,gBAAiBD,wBAE/E,UADOU,mBAAmB7gD,MACrB,UAAAghD,SAAQD,WAAY,CACvB,MAAME,UAC8B,IAAlC3sD,OAAOwtC,KAAKif,WAAWn0C,QAAgBtY,OAAOwtC,KAAKif,WAAW,KAAOG,WAAWC,QAAQC,UAC1FN,KAAK3vB,KAAK8vB,UAAYF,UAAH,eAAiB,CAACG,WAAWG,GAAGD,WAAY,CAAE,CAAChB,iBAAkBpgD,KAAS+gD,aAGjG,IAAK,MAAML,aAAapsD,OAAO06B,OAAO6xB,oBAAqB,CACzD,MAAME,UAAYhB,aAAQl+C,EAAW6+C,UAAWN,gBAAiBD,yBAC5D,UAAAa,SAAQD,YACXD,KAAK3vB,KAAK4vB,WAGd,OAAOD,MAIX,GAAId,QAAUC,OAA2B,iBAAXD,QAAwC,iBAAVC,MAAoB,CAC9E,MAAMa,KAAO,GACPQ,QAAUhtD,OAAOwtC,KAAKke,QAAQ93C,OAAO5T,OAAOwtC,KAAKme,QACvD,IAAK,MAAMvpD,OAAO,UAAAs5B,MAAKsxB,SAAU,CAC/B,MAAMP,UAAYhB,QAAQC,OAAOtpD,KAAMupD,MAAMvpD,KAAM,KAAMypD,yBACpD,UAAAa,SAAQD,WAEFZ,yBACTW,KAAKpqD,KAAOspD,OAAOtpD,MAFnBoqD,KAAKpqD,KAAOqqD,UAKhB,OAAOD,KAGT,GAAId,SAAWC,MACb,OAEF,QAAep+C,IAAXm+C,OAAsB,CACxB,MAAMuB,cAAgBjvD,MAAMo7C,QAAQuS,QAA2B,iBAAVA,MACrD,IAAKC,SAAWqB,cACd,MAAO,CAAE,CAACL,WAAWM,MAAMJ,WAAYnB,OAEzC,MAAMwB,WAAa,CAAE,CAACP,WAAWG,GAAGD,WAAY,CAAE,CAAClB,SAAU,iBAAKD,OAAQC,WAC1E,MAAO,CAAE,CAACgB,WAAWM,MAAMJ,WAAlB,iBAAmCK,WAAexB,QAE7D,QAAcp+C,IAAVo+C,MAAqB,CACvB,MAAMyB,eAAiBpvD,MAAMo7C,QAAQsS,SAA6B,iBAAXA,OACvD,IAAKE,SAAWwB,eACd,MAAO,CAAE,CAACR,WAAWC,QAAQC,WAAYpB,QAE3C,MAAMyB,WAAa,CAAE,CAACP,WAAWG,GAAGD,WAAY,CAAE,CAAClB,SAAU,iBAAKF,QAASE,WAC3E,MAAO,CAAE,CAACgB,WAAWC,QAAQC,WAApB,iBAAqCK,WAAezB,SAE/D,MAAO,CACL,CAACkB,WAAWS,QAAQP,WAAa,GAAE93C,KAAKsjC,UAAUoT,SAAW,SAAmB12C,KAAKsjC,UAAUqT,QAAU,O,0EA5H7G,mCAEA,+CACA,yCACA,8C,kmBAEyB,KAClB,MAAMiB,WAAa,CACxBM,MAAO,CAAEJ,UAAW,sBAAuB/uD,MAAOI,6BAAOmvD,MAAO/zD,gBAAiB,UAAWg0D,UAAW,KACvGV,QAAS,CAAEC,UAAW,wBAAyB/uD,MAAOI,6BAAOmvD,MAAO/zD,gBAAiB,UAAWg0D,UAAW,KAC3GF,QAAS,CAAEP,UAAW,wBAAyB/uD,MAAOyvD,+BAAcC,QACpEV,GAAI,CAAED,UAAW,qB,8BAIZ,MAAMY,uBAAwB,UAAA5kB,OAAM9oC,OAAO06B,OAAOkyB,YAAa,a,4SCS/D,SAAwB5zD,OAAsBoC,OACnD,MAAMtE,KAAOkC,OAAOA,OACdsJ,OAAStJ,OAAOsJ,OAChBkY,OAASxhB,OAAOwhB,OACtB,OAAO1jB,KAAKsE,MAAQof,OAASlY,S,wBAIxB,SAAyBtJ,OAAsBoC,MAAezC,OACnE,MAAM40C,IAAM,GACNz2C,KAAOkC,OAAOA,OACdsJ,OAAStJ,OAAOsJ,OAChBkY,OAASxhB,OAAOwhB,OACtB,IAAK,IAAI1lB,EAAI,EAAGA,EAAI6D,MAAO7D,IACzBy4C,IAAI1Q,KAAK/lC,KAAKsE,MAAQof,OAASlY,OAASxN,IAE1C,OAAOy4C,K,uBAKF,SAAwBv0C,QAC7B,OAAOA,OAAOA,OAAOsf,OAAStf,OAAOwhB,Q,6BAgDhC,UAA8B,KACnC1jB,KADmC,OAEnC2lC,OAFmC,WAGnCiB,WAHmC,OAInCljB,SAUA,GADEiiB,OAAOznC,EAAEsN,OAASm6B,OAAO1nC,EAAEuN,SAAWqrD,YAAclxB,OAAOxnC,EAAEqN,OAASm6B,OAAOznC,EAAEsN,SAAWqrD,YACrEC,eAAepzC,QAKpC,MAAO,CACLxhB,OAAQ60D,yBAAyB/2D,MAGjCwL,OAAQm6B,OAAO1nC,EAAEuN,OAASqrD,WAC1BnzC,OAAQA,OAASmzC,YAMrB,OADArnD,QAAQnL,KAAM,yCAAwCqf,kDAC/CszC,cAAc,CACnBh3D,UACAi3D,QAAS,CAACtxB,OAAO1nC,EAAEgpC,OAAQtB,OAAOznC,EAAE+oC,OAAQtB,OAAOxnC,EAAE8oC,QACrDL,sBACAljB,iB,0BAIG,UAA2B,KAChC1jB,KADgC,OAEhC2lC,OAFgC,UAGhCqD,UAHgC,WAIhCpC,WAJgC,OAKhCljB,SAQA,GAAuB,SAAnBslB,UAAU/V,KAGZ,OAAO,KAGT,GAAuB,QAAnB+V,UAAU/V,KAAgB,CAC5B,MAAM8V,UAAYpD,OAAOjpC,IAAI8O,QAAU,EACvC,OAAIsrD,eAAeD,WAAanzC,QACvB,CAOLxhB,OAAQg1D,oBAAoBl3D,MAG5BwL,OAAQu9B,UACRrlB,gBAIJlU,QAAQnL,KAAM,yCAAwC,EAAIqf,mDACnDszC,cAAc,CACnBh3D,UACAi3D,QAAS,CAAC,IAAInvB,qBAAYiB,UAAY,GAAI,IAAIjB,qBAAYiB,UAAY,GAAI,IAAIjB,qBAAYiB,UAAY,IACtGrlB,cACAkjB,yBAIJ,MAAMqD,WAAatE,OAAOqD,UAAUiB,YAAc,OAOlD,GAAIA,WAAWjV,WAAasS,4BAASK,SAAWsC,WAAWz+B,OAASqrD,YAAe,GAAKC,eAAepzC,QACrG,MAAO,CACLxhB,OAAQ60D,yBAAyB/2D,MAGjCwL,OAAQy+B,WAAWz+B,OAASqrD,WAC5BnzC,OAAQA,OAASmzC,YAOrB,OADArnD,QAAQnL,KAAK,8DACN2yD,cAAc,CACnBh3D,UACAi3D,QAAS,CAAChtB,WAAWhD,QACrBvjB,cACAkjB,yB,0BAxMJ,iDAIA,mCAGO,MAAMiwB,WAAa94D,aAAao5D,kBAGhC,SAASJ,yBAAyB70D,QACvC,OAAO,IAAInE,aAAa,IAAIgC,WAAWmC,QAAQA,OAAQ,EAAGA,OAAOsf,OAASzjB,aAAao5D,mBAIlF,SAASD,oBAAoBh1D,QAClC,OAAO,IAAInE,aAAamE,QAmC1B,SAAS40D,eAAepzC,QACtB,OAAOA,QAAU,KAAOA,OAASmzC,YAAe,EASlD,SAASG,eAAc,KACrBh3D,KADqB,QAErBi3D,QAFqB,WAGrBrwB,WAHqB,OAIrBljB,SAOA,MACMxhB,OAAS,IAAInE,aADK,EAC0B6oC,YAClD,IAAK,IAAI5oC,EAAI,EAAGA,EAAI4oC,WAAY5oC,IAAK,CACnC,MAAMwsC,WAAaxsC,EAAI0lB,OACvB,IAAK,IAAIzjB,EAAI,EAAGA,EAAIg3D,QAAQz1C,OAAQvhB,IAAK,CACvC,MAAMgnC,OAASgwB,QAAQh3D,GACvB,IAAI+E,MAAQyX,OAAO26C,IACL,MAAVnwB,SACFjiC,MAAQiiC,OAAOE,KAAKnnC,KAAMwqC,aAE5BtoC,OAVoB,EAUblE,EAAsBiC,GAAK+E,OAGtC,MAAO,CACL9C,cACAsJ,OAAQ,EACRkY,OAhBsB,G,2KCjEnB,SAAuBzc,OAC5B,MAAM2iC,gBAAkBvB,SAASphC,MAAMi0B,MAAM,GAAI,IACjD,MAAO,CAAE0O,iBAAmB,GAAM,IAAOA,iBAAmB,EAAK,IAAwB,IAAlBA,gBAAwB,I,qBAK1F,SAAsB9lC,QAC3B,MAAM,OAAE6hC,OAAS,GAAX,SAAe6C,SAAW,GAAI9B,WAAYhjB,OAA1C,MAAkD/jB,MAAlD,OAAyDQ,OAAzD,aAAiEk3D,aAAjE,KAA+Er3D,MAAS8D,OACxF4kC,mBAAoB,qBAAA/B,2BAA0BhB,SAC5CjpC,KAAO8O,OAAQu9B,WAAc,IAAOL,kBAItC9B,WAAajnC,MAAQQ,OAErB6oC,UAAuBR,SAASQ,UAClCR,SAASQ,UACI,MAAbD,UACA,CAAE9V,KAAM,OACR,CAAEA,KAAM,OAAQgW,UAAWC,8CAEzB3nC,WAAa81D,aAEbC,gBAAiB,WAAAC,sBAAqB,CAC1Cv3D,UACA2lC,OAAQ+C,kBACR9B,sBACAljB,gBAMIjb,YAAclH,SAChB,MACA,WAAAi2D,mBAAkB,CAChBx3D,UACA2lC,OAAQ+C,kBACRM,oBACApC,sBACAljB,gBAGN,IAAI+zC,cAAwBh7C,OAAOi7C,kBAC/BC,cAAwBl7C,OAAOm7C,kBAMnC,GAAInvD,cAAgBlH,WAAgC,aAAnBynC,UAAU/V,MAA0C,YAAnB+V,UAAU/V,MAAqB,CAC/F,IAAI4kC,aAAc,EACd7uB,UAAUQ,WACZquB,aAAc,EACdJ,cAAgBzuB,UAAUQ,UAE5B,IAAIsuB,aAAc,EAOlB,GANI9uB,UAAUS,WACZquB,aAAc,EACdH,cAAgB3uB,UAAUS,WAIvBouB,cAAgBC,YACnB,IAAK,IAAI95D,EAAI,EAAGA,GAAI,WAAA+5D,gBAAetvD,aAAczK,IAAK,CACpD,MAAMg6D,KAAM,WAAAC,gBAAeX,eAAgBt5D,GAC3C,GAAIye,OAAO7T,MAAMovD,KAIf,SAEF,MAAMhzD,OAAQ,WAAAizD,gBAAexvD,YAAazK,GACrCye,OAAO7T,MAAM5D,UACX6yD,aAAe7yD,MAAQyyD,gBAC1BA,cAAgBzyD,QAEb8yD,aAAe9yD,MAAQ2yD,gBAC1BA,cAAgB3yD,SAO1B,wBACKlB,OADL,CAGE0kC,SAAU,cAAF,GACHA,SADG,CAENQ,sBAEFpC,sBACA0wB,8BACA7uD,wBACAgvD,4BACAE,4BACAN,6BA1GJ,uCAEA,6CACA,oD,0tBCgBO,UAAsB,SAAEl6D,WAC7B,OAAOA,U,+BAGF,UAAgC,SAAEA,WACvC,OACE,oBAAC+6D,wBAAD,CAAyBvmD,MAAO,CAAEhS,MAAOw4D,IAAiBh4D,OAd1C,MAebhD,W,gBAgBQ,UAAqC,SAClDA,SADkD,UAElDuhC,UAFkD,KAGlDq0B,KAHkD,YAIlDwB,YAJkD,YAKlDP,YALkD,QAMlDzyB,QANkD,MAOlD5vB,QAGA,IADmBqiD,YACJ,CACb,IAAIoE,iBAAmBpE,YASvB,OARKoE,kBAEH/6D,MAAMg7D,SAASxiB,QAAQ14C,SAAWm7D,QAC3BF,mBACHA,iBAAmBE,MAAMx7D,MAAMgrB,QAKnC,2BAAK4W,UAAWA,WACd,oBAAC,gBAAD,CAAQ6C,QAASA,QAAS/C,QAAS,IAAM+1B,YAAY6D,mBACnD,oBAAC,cAAD,KAAOrF,QAKf,IAAIwF,cAMJ,OALAl7D,MAAMg7D,SAASxiB,QAAQ14C,SAAWm7D,QAC3BC,eAAiBD,MAAMx7D,MAAMgrB,OAASksC,cACzCuE,cAAgBD,SAIlB,2BAAK55B,WAAW,uBAAGA,UAAWC,gCAAO65B,WACnC,oBAAC,cAAD,CAAM1xB,KAAG,EAACpI,UAAWC,gCAAO85B,QACzBp7D,MAAMg7D,SAAS5jD,IAAItX,SAAWm7D,OAE3B,oBAAC,gBAAD,CACE55B,WAAW,uBAAGC,gCAAO+5B,IAAK,CAAE,CAAC/5B,gCAAOmR,UAAWwoB,QAAUC,gBACzD/5B,QAAS,IAAM+1B,YAAY+D,MAAMx7D,MAAMgrB,OACtCwwC,MAAMx7D,MAAMgrB,OAInB,2BAAK4W,UAAWC,gCAAOg6B,iBACvB,oBAAC,gBAAD,CAAQn6B,QAAS,IAAM+1B,YAAY,OACjC,oBAAC,cAAD,KACE,oBAAC,uBAAD,SAIN,2BAAK71B,UAAWC,gCAAOi6B,QAASjnD,MAAOA,OACpC4mD,iB,uCAhGT,qEACA,4DACA,M,4WAAA,yBACA,iEAEA,0EACA,yDACA,uDACA,sD,kFAEA,MAGaL,wBAA0Bx2B,0BAAO2e,GAAI;;;;0MCkB3C,SACLwY,WACA3kC,OACA4kC,oBACA5lC,sBAEA,MAAMsS,QAAU,GACVuzB,gBAAkBC,mBAAmBH,YAC3C,kBAAiC3kC,OAAQ,OAA9B,KAAEpM,KAAF,SAAQkN,UAAsB,KAErC+jC,kBACCjxC,KAAK0a,WAAWu2B,kBAAoBjxC,KAAK0a,WAAY,OAAMu2B,mBAC5D7lC,qBAAqBG,SAAS2B,WAE9BwQ,QAAQO,KAAKje,MAGjB,OAAO0d,QAAQwhB,Q,+BAGV,SAAgCn0B,oBAA+BomC,uBACpE,OAAOA,sBAAsBzuC,OAAQ4I,OAC5BP,oBAAoB2f,KAAM0mB,cAAiB9lC,MAAM2qB,SAASmb,aAAa19B,MAAM,KAAK29B,U,2BAKtF,SAA4BN,YACjC,MAAME,gBAAkBC,mBAAmBH,YAC3C,GAAIE,gBACF,OAAUA,gBAAF,eAEV,OAAO,M,kEAeF,SAAqB7kC,QAC1B,MAAMklC,uBAA+C,IAAI5iD,IACzD,IAAK,MAAM4c,SAASc,OAAQ,CAC1B,MAAM5oB,IAAM0tD,mBAAmB5lC,MAAMtL,OAASsL,MAAMtL,KAC9CuxC,KAAOD,uBAAuBjkD,IAAI7J,KACpC+tD,KACFA,KAAKtzB,KAAK3S,OAEVgmC,uBAAuBrkC,IAAIzpB,IAAK,CAAC8nB,QAGrC,OAAOgmC,wB,yBAOF,SACLn7D,EACAC,EACAo7D,aACAC,cACAC,YACAC,cAEA,MAEMC,OAASJ,aAAeE,YACxBG,QAAUJ,cAAgBE,aAChC,MAAO,EACL,kBAAMx7D,EAAGxB,KAAK8D,IALF,EAKam5D,QAASj9D,KAAKwyB,IAL3B,EAKsCyqC,UAClD,kBAAMx7D,EAAGzB,KAAK8D,IALH,EAKao5D,SAAUl9D,KAAKwyB,IAL5B,EAKsC0qC,Y,wBAI9C,SAAyBC,eAC9B,MAAM,QAAEC,QAAF,MAAWn7D,MAAX,iBAAkBq0B,iBAAlB,WAAoC+mC,YAAeF,cACzD,GAAuB,IAAnBC,QAAQr4C,OACV,MAAO,CACLq4C,gBACAE,YAAa,KACbC,oBAAgBvjD,EAChBwjD,mBAAexjD,GAGnB,IAAIsjD,YASAE,cACAD,eATJ,GAAIjnC,iBAAkB,CACpB,IAAK+mC,WACH,OAAO,KAETC,YAAc,IAAIG,qBAAYJ,YAMhC,GAAIA,YAAcA,WAAWn6D,OAASm6D,WAAW35D,OAE/C85D,cAAgBH,WAAWn6D,MAC3Bq6D,eAAiBF,WAAW35D,WACvB,IAAc,IAAVzB,MAKT,OAAO,KAHPu7D,mBAAgBxjD,EAChBujD,oBAAiBvjD,EAKnB,MAAO,CACLojD,gBACAE,wBACAE,4BACAD,gCAvJJ,4DAEA,+D,kFAgEO,SAAShB,mBAAmBj0B,WACjC,IAAIo1B,WAAap1B,UAAUvJ,MAAM,KAOjC,OALA2+B,WAAWhB,MACXgB,WAAaA,WAAW3vC,OAAQ4vC,WAA4B,QAAdA,WAIvCD,WAAW34C,OAAS,EAAI24C,WAAWroB,KAAK,KAAO,O,yKC3ExD,kC,sBAE6B,MAgBtB,MAAMuoB,eAAgB,SAAAC,eAE1B,CAAEC,gBAAgB,I,8NCyBd,UAAgC,mBACrCC,mBADqC,SAErC7mC,SAFqC,kBAGrC8mC,kBAHqC,WAIrCC,aAOA,IAAIC,eAAiB,cAAH,GAAQH,oBAC1B,MAAMI,WAAaC,cAAclnC,SAAU+mC,YAGrCI,mBAAoB,SAAApjB,QAAoB,MACxCqjB,eAAiBD,kBAAkB1uC,QAErCwuC,YACFE,kBAAkB1uC,QAAUwuC,WAC5BD,eAAe7vD,OAAS8vD,WAAW9vD,OAC/B2vD,oBACFE,eAAezwD,kBAAoB0wD,WAAW1wD,oBAEvCypB,UAAYonC,iBAGrBJ,eAAe7vD,OAASiwD,eAAejwD,OACnC2vD,oBACFE,eAAezwD,kBAAoB6wD,eAAe7wD,oBAInB,MAA/BswD,mBAAmB5wD,WACrB+wD,eAAe/wD,SA1DnB,WACE,MAAMoxD,OAAS,IAAIC,gBAAgBC,UAAYA,SAASC,QACxD,GAAIH,OAAOtrD,IAJgB,QAKzB,OAAO2kC,WAAW2mB,OAAO7lD,IALA,SA4DCimD,IAK5B,OAFAT,gBAAiB,UAAAU,WAAUV,eAAgB9vD,oCAAsB,CAACywD,OAAQC,SAAWD,oBAAUC,QAExF,CAAExvD,YAAa4uD,eAAgBC,WAAYA,YAAcG,iB,kDAG3D,SACLpH,eACAlzB,uBAEA,MAAMmzB,gBAAkBD,gBAAkBA,eAAe7+C,OAAO8+C,gBAC1D4H,YAAc5H,iBAAmBA,gBAAgBxgC,MACvD,IAAKqN,sBAAsBjf,SAAWg6C,YACpC,OAEF,MAAMC,mBAAqB,GAO3B,OANAh7B,sBAAsBoV,QAAQ,EAAGziB,YAAO+M,4BAAerY,cACrD,GAAI0zC,cAAgBpoC,MAAO,CACzB,MAAMsoC,eAAgB,UAAAvmD,KAAIw+C,eAAe7+C,OAAQ,IAAIqrB,eAAe0R,WACpE4pB,mBAAmB3zC,MAAQ4zC,iBAGxBD,oB,wCAmBF,UAAyC,gBAC9CE,gBAD8C,eAE9CC,eAF8C,aAG9CC,aAH8C,sBAI9CC,sBAJ8C,YAK9CC,YAL8C,qBAM9CC,uBASA,MAAMrB,eAAiB,cAAH,GAAQgB,iBAC5B,GAAII,YAAa,CAEf,GAAIC,uBAAyBF,uBAAyBF,eAAgB,CACpE,MAAMK,QAAUC,oCAAqB1xD,cAAc,CACjDN,kBAAmB0xD,eAAe1xD,oBAEpCywD,eAAe5vD,aAAeX,eAAK+xD,QACjC,CAAC,EAAG,EAAG,GACPxB,eAAe5vD,cAAgBF,oCAAqBE,aACpD,CAAC,EAAG,EAAG,GACPkxD,SAEFtB,eAAe3wD,aAAeiyD,QAG3BJ,eACHlB,eAAe5vD,aAAe,CAAC,EAAG,EAAG,SAE9B8wD,cAAgBD,gBAEzB1yD,OAAOkzD,OACLzB,eAnDN,SACE9tC,QACA+tC,WACAH,mBAEA,MAAMwB,QAAUxB,kBACZyB,oCAAqB1xD,cAAc,CAAEN,kBAAmB0wD,WAAW1wD,oBACnE,EACEa,aAAeX,eAAK+xD,QAAQ,CAAC,EAAG,EAAG,GAAItvC,QAAQ9hB,aAAc,CAAC,EAAG,EAAG,IAAKkxD,SAC/E7xD,eAAKgrB,IAAIrqB,aAAcA,aAAc6vD,WAAW9vD,QAChD,MAAMd,YAAc6iB,QAAQ7iB,YAAciyD,QAC1C,MAAO,CAAElxD,0BAAcf,yBAyCnBqyD,CACE,CACEtxD,aAAc4wD,gBAAgB5wD,cAAgBF,oCAAqBE,aACnEf,YAAa2xD,gBAAgB3xD,aAAea,oCAAqBb,aAEnE4xD,iBACEE,uBAEJ,CAAEhxD,OAAQ,CAAC,EAAG,EAAG,KAIrB,OAAO6vD,gBA5KT,I,IAAA,mCACA,+BACA,8BACA,wCAYA,Q,IADA,4B,eACA,2B,glBAcO,SAASE,cAAclnC,SAA2B+mC,YACvD,GAAI/mC,SAAU,CACZ,IAAIh2B,MAAO,QAAA2+D,aAEX,GADA3+D,KAAO+8D,WAAW9gD,MAAMjc,KAAMA,KAAMg2B,SAAU+mC,WAAWh2B,gBAAgB/Q,UAAU/e,IAC/EjX,KAAM,CACR,MAAQM,EAAGyrB,GAAIxrB,EAAGyrB,GAAIxrB,EAAGo+D,IAAO5+D,KAAKoE,UAC7B9D,EAAGu+D,GAAIt+D,EAAGu+D,GAAIt+D,EAAGu+D,GAAIh2D,EAAGi2D,IAAOh/D,KAAK2K,YAC5C,MAAO,CACLwC,OAAQ,CAAC4e,GAAIC,GAAI4yC,IACjBryD,kBAAmB,CAACsyD,GAAIC,GAAIC,GAAIC,MAItC,OAAO,O,4SCCF,WAEL,MAAMh/D,KAAO,IAAIi/D,UAGjB,OAFAj/D,KAAKoE,SAAW86D,WAAWC,QAC3Bn/D,KAAK2K,YAAcy0D,iBAAiBD,QAC7Bn/D,MA3CT,MAAMk/D,WAAW,iHAKf,eAEE,MAAM/vD,MAAQ,IAAI+vD,WAIlB,OAHA/vD,MAAM7O,EAAI,EACV6O,MAAM5O,EAAI,EACV4O,MAAM3O,EAAI,EACH2O,OAIX,MAAMiwD,iBAAiB,kJAMrB,eAEE,MAAMz0D,YAAc,IAAIy0D,iBAKxB,OAJAz0D,YAAYrK,EAAI,EAChBqK,YAAYpK,EAAI,EAChBoK,YAAYnK,EAAI,EAChBmK,YAAY5B,EAAI,EACT4B,aAIX,MAAMs0D,UAAU,oG,sRC4FD,UAAiB,2BAC9BI,2BAD8B,YAE9BvpC,YAF8B,qBAG9BwpC,qBAH8B,aAI9BvpC,aAJ8B,WAK9Bqb,WAL8B,wBAM9Bnb,wBAN8B,eAO9BgmB,eAP8B,WAQ9BnjB,WAR8B,sBAS9BymC,sBAT8B,iBAU9Bvd,iBAV8B,cAW9B7rB,cAX8B,gBAY9BqpC,kBAEA,MAAMC,iBAAkB,SAAA7lC,SACtB,IACErwB,MAAMwuC,KAAK2nB,YAAYF,kBACpB1oD,IAAKuZ,MAAUA,KAAK+W,YAAc/W,KAAKsvC,UAAYtvC,KAAK+W,eAAYtuB,GACpE+T,OAAO+zB,SACZ,CAAC4e,kBAGGla,kBAAmB,SAAA1rB,SAAQ,IAAMqiB,eAAepH,KAAK,EAAG1qB,aAAWA,KAAK0a,WAAW+6B,wCAAwB,CAC/G3jB,iBAGI4jB,cAAe,SAAAjmC,SACnB,KACE,MAAMkmC,cAAgB7jB,eAAenlC,IAAK2e,OAAUA,MAAMtL,MACpD41C,uBAAwB,UAAA94B,MAAK64B,cAAchpD,IAAKqT,MAASA,KAAKm2B,QAAQsf,sCAAsB,MAC5FI,wBAA0B,IAAI1+D,IAAIw+D,eAGlCG,yBAA0B,UAAAjyB,YAAW+xB,sBAAuBN,iBAC5DS,kBAAmB,UAAAxiD,YAAU,UAAA22B,OAAM4H,eAAgB,QAAU/+B,MAASA,KAAKma,UAE3E8oC,YAAc,IAAKX,gBAAgBhgE,UAAY,IASrD,OARIygE,wBAAwBp8C,QAE1Bs8C,YAAY/3B,KAAK,CACfje,KA5JiB,kBA6JjB3qB,SAAUygE,wBAAwBnpD,IAAKswB,YAAD,CAAkBA,yBAIrDg5B,iBAAiB,cAAD,GAChBZ,gBADgB,CACChgE,SAAU2gE,cAChC,CAAEE,eAAWvnD,EAAWonD,kCAAkBF,gDAAyB1a,qCAGvE,CAACA,iBAAkBrJ,eAAgBujB,gBAAiBC,kBAGhDa,YAAa,SAAA1mC,SACjB,KACE,MAAM2mC,aAAeh3D,MAAMwuC,KAAK2nB,YAAYG,eAC5C,OAAO,UAAAxrB,OAAMksB,aAAc,QAE7B,CAACV,eAGGW,YAAa,SAAA5mC,SACjB,KACE,MAAMwrB,eAAiB,IAAI9jD,IAAIw0B,aAEzB2qC,eAAwC,GAG9C,SAAS/mC,WAAWgnC,QAAkBC,iBAIpC,IAAKD,QACH,OAAO,EAGT,MAAMrwC,KAAOiwC,WAAWI,SAClBjb,YAAap1B,gBAAA,EAAAA,KAAMo1B,aAAcib,QASvC,OAPIrwC,OACGswC,sBAA+C7nD,IAA5B2nD,eAAeC,SAE5BC,sBAAkD7nD,IAA/B2nD,eAAehb,cAC3Cgb,eAAehb,YAAcL,eAAerzC,IAAI0zC,aAAe/rB,WAAWrJ,KAAKgwC,UAAWM,kBAF1FF,eAAeC,SAAWtb,eAAerzC,IAAI2uD,UAAYhnC,WAAWrJ,KAAKgwC,UAAWM,kBAKjFF,eAAeE,gBAAkBlb,WAAaib,SAGvD,MAAME,sBAAwB,IAAIt/D,KAChC,sBAAUw0B,YAAcnoB,MACtB,GAAKA,IAAIk3B,WAAW,OAAUnL,WAAWmnC,WAAWlzD,KAAMA,IAAI+nB,SAASkqC,wCAGvE,OAAOjyD,IAAI4xC,OAAO,KAAK17B,WAMrBi9C,2BAA6B7qC,yBAA2B,IAAI2S,OAChE,CAACrlB,KAAM6jB,YAAP,iBAA2B7jB,KAA3B,CAAiC,CAAC6jB,WAAY,KAC9C,IA2CF,OAtCAtR,YAAYoiB,QAASvqC,MACnB,IAAKA,IAAIk3B,WAAW,OAClB,OAEF,MAAO9tB,EAAGqwB,UAAWu4B,WAAahyD,IAAIkwB,MAAM,KAC5C,IAAKuJ,YAAcu4B,UACjB,MAAM,IAAIr6D,MAAO,yCAAwCqI,KAEvDizD,sBAAsB7uD,IAAIq1B,aACvB05B,0BAA0B15B,aAC7B05B,0BAA0B15B,WAAa,IAEzC05B,0BAA0B15B,WAAWgB,KAAKu3B,cA0BvC,CACLoB,mBAAoBx3D,MAAMwuC,KAAK6oB,uBAC/BE,oDACAE,4BAvBF,SAAqC3wC,KAAgB4wC,YAAqBtB,WACxE,MAAMe,QAAUG,WAAWxwC,KAAK1iB,KAC1BgzD,gBAAkC,IAAhBM,YACxB,GAAItB,WAA2B,UAAdtvC,KAAKpP,KAAkB,CACtC,MAAMigD,kBACU,UAAd7wC,KAAKpP,KACD0/C,gBACG,GAAEf,wCAAuBvvC,KAAK+W,YAC/B/W,KAAK+W,eACPtuB,EAEAqoD,qBAAuBC,gBAAgB,CAAEh6B,UAAW/W,KAAK+W,UAAWu4B,oBAAWgB,kCAKrF,OAHEvb,eAAerzC,IAAIovD,0BAChBD,mBAAsBJ,0BAA0BI,wBAExB7wC,KAAKk1B,kBAAkB0b,cAAgBvnC,WAAWgnC,QAASC,iBAE1F,QAAStwC,KAAKk1B,kBAAkB0b,cAAgBvnC,WAAWgnC,QAASC,oBAQxE,CAAC7qC,YAAaG,wBAAyBqqC,cAGnC,mBAAES,mBAAF,0BAAsBD,0BAAtB,4BAAiDE,6BAAgCR,WAGjFa,4BAA6B,SAAA5mB,gBAAesmB,oBAE5CO,4BAA6B,SAAA1nC,SACjC,KACE,MAAMjyB,OAAS,GACf,IAAK,MAAOy/B,UAAWyD,YAAat/B,OAAOg2D,QAAQprC,eAAgB,CACjE,MAAMqrC,eAAiBp6B,UAAUvC,WAAW+6B,uCACtCqB,YAAcO,eAAiB,EAAI,EAEnC7zD,IAAMyzD,gBAAgB,CAAEh6B,UADRo6B,eAAiBp6B,UAAUkZ,QAAQsf,sCAAsB,IAAMx4B,YAGrF,IAAI+e,mBAAoB,EAYxB,GAVImZ,qBAAqBl4B,aACvB+e,mBAAoB,UAAA9X,SAAQxD,SAAUy0B,qBAAqBl4B,aAExDz/B,OAAOgG,KAIVhG,OAAOgG,KAAP,iBAAmBhG,OAAOgG,KAA1B,CAAgCw4C,kBAAmBA,mBAAqBx+C,OAAOgG,KAAKw4C,oBAHpFx+C,OAAOgG,KAAO,CAAEw4C,qCAMdtb,SAASsd,cAAe,CAC1B,MAAMsZ,MAAO,uBAAAC,mBAAkB72B,SAASsd,eACnCxgD,OAAOgG,KAAKy6C,wBACfzgD,OAAOgG,KAAKy6C,sBAAwB,MAACtvC,OAAWA,IAElDnR,OAAOgG,KAAKy6C,sBAAsB6Y,aAAeU,mBAAUC,UAAUH,MAAMI,eAG/E,OAAOl6D,QAET,CAAC23D,qBAAsBnpC,gBAGnB2rC,8BAA+B,SAAAloC,SACnC,KACE,MAAMmoC,mBAAoB,sBAAUjsC,YAAc5Y,OAChD,GAAIA,KAAK2nB,WAAW,OAAQ,CAC1B,MAAO9tB,EAAGqwB,UAAWu4B,WAAaziD,KAAK2gB,MAAM,KAC7C,MAAO,CAAEuJ,oBAAWu4B,wBAGxB,OAAO,UAAAtrB,OAAM0tB,kBAAmB,cAElC,CAACjsC,cAIGksC,gCAAiC,SAAAx6D,aACrC,CAAC4/B,UAAmB65B,eACjBhrC,wBAAwBP,SAAS0R,aACjC06B,6BAA6C,IAAhBb,YAAqB,GAAErB,wCAAuBx4B,YAAcA,WAC5F,CAAC06B,6BAA8B7rC,0BAG3BgsC,wBAAyB,SAAAz6D,aAC7B,EAAG4/B,oBAAWu4B,oBAAWsB,4BACvB,MAAMN,gBAAkC,IAAhBM,YAClBE,qBAAuBC,gBAAgB,CAAEh6B,oBAAWu4B,oBAAWgB,kCAE/DO,kBAAoBP,gBAAmB,GAAEf,wCAAuBx4B,YAAcA,UAGpF,IAAI86B,eACJ,GAHoCF,+BAA+B56B,UAAW65B,aAG7C,CAE/B,MAAMkB,WAAa9C,2BAA2B6B,oBAAsB,IAAIpqD,IAAKsrD,IAC3EhB,gBAAgB,CAAEh6B,oBAAWu4B,UAAWyC,GAAIzB,mCAExC0B,oBAAqB,UAAAr0B,YAAWm0B,UAAW,CAAChB,uBAClDe,eAAiB,IAAIpsC,eAAgBusC,yBAErCH,gBAAiB,UAAAI,KAAIxsC,YAAa,CAACqrC,uBAGrCroC,WAAW,CACThD,YAAaosC,eACbjsC,yBAAyB,UAAAgR,MAAK,IAAIhR,wBAAyBirC,uBAG/D,CAAC7B,2BAA4BvpC,YAAaksC,+BAAgC/rC,wBAAyB6C,aAG/FgtB,mBAAoB,SAAAt+C,aACxB,CAACohD,QAAiBqY,eAChB,MAAMtzD,IAAsB,IAAhBszD,YAAoBX,WAAW1X,SAASnD,WAAamD,QACjE9vB,WAAW,CAAEhD,aAAa,UAAAwsC,KAAIxsC,YAAa,CAACnoB,SAE9C,CAACmoB,YAAawqC,WAAYxnC,aAGtB+sB,2BAA4B,SAAAr+C,aAChC,CAACohD,QAAiBqY,eAChB,MAAM5wC,KAAOiwC,WAAW1X,SAClB+X,gBAAkC,IAAhBM,YAClBsB,cAAgB5B,gBAAkBtwC,KAAKo1B,WAAamD,QACpD4Z,cAAgB1sC,YAAYJ,SAAS6sC,eACrCE,gBAAkBl5D,MAAMwuC,KAAK2nB,YAAYrvC,OACzCqyC,oBAAsBD,gBAAgB3rD,IAAKoG,MAAUyjD,gBAAkBzjD,KAAKuoC,WAAavoC,KAAKvP,KAC9Fg1D,WAAaF,gBAAgB3rD,IAAKoG,MAAwB,UAAdA,KAAK+D,KAAmB/D,KAAKkqB,UAAY,MAAOva,OAAO+zB,SACnGgiB,uBAAwB,UAAAx9C,SAC5Bu9C,WAAW7rD,IAAKswB,YACbi4B,2BAA2BsB,gBAAmB,GAAEf,wCAAuBx4B,YAAcA,YAAc,IAAItwB,IACrG6oD,WAAcyB,gBAAgB,CAAEh6B,oBAAWu4B,oBAAWgB,qCAK7D,IAAIkC,6BAA+B,IAAI5sC,yBACvC0sC,WAAWzqB,QAAS9Q,YAClB,MAAM85B,kBAAoBP,gBAAmB,GAAEf,wCAAuBx4B,YAAcA,UAChFi4B,2BAA2B6B,oBAC7B2B,6BAA6Bz6B,KAAK84B,qBAGtC2B,8BAA+B,UAAAx0B,SAAQw0B,6BAA8B5sC,yBACjEA,yBACA,UAAAgR,MAAK47B,8BAET,MAAMC,iBAAmB,IAAIJ,uBAAwBE,uBAErD9pC,WAAW,CACT7C,wBAAyB4sC,6BACzB/sC,YAAa0sC,cACT,UAAAv7B,MAAK,IAAInR,eAAgBgtC,oBACzB,UAAA90B,YAAWlY,YAAagtC,qBAGhC,CAACzD,2BAA4BvpC,YAAaG,wBAAyBqqC,WAAYxnC,aAG3E8sB,yBAA0B,SAAAp+C,aAC9B,CAACohD,QAAiBqY,YAAqB8B,4BACrC,MAAMpC,gBAAkC,IAAhBM,YAClB5wC,KAAOiwC,WAAW1X,SACxB,IAAI2Z,cAAgB5B,iBAAmBtwC,KAAOA,KAAKo1B,WAAamD,QAChE,MAAMsY,kBACJP,iBAAmBoC,yBACd,GAAEnD,wCAAuBmD,2BAC1BA,yBAEN,IAAIF,6BAA+B5sC,wBACnC,GAAI8sC,0BAA4B7B,kBAAmB,CAC5CjrC,wBAAwBP,SAASwrC,qBACpC2B,6BAA+B,IAAI5sC,wBAAyBirC,oBAE9D,MAAMvB,UAAY/W,QAAQ/qB,MAAM,KAAK29B,MACrC+G,cAAgBnB,gBAAgB,CAAEh6B,UAAW27B,yBAA0BpD,oBAAWgB,kCAGpF,IAAIqC,YAAcltC,YAAYJ,SAAS6sC,eACnCL,eAAiB,IAAIpsC,aACzB,IAAKktC,aAAeD,2BAClBC,YAAchB,+BAA+Be,yBAA0B9B,aACnE+B,aAAe9B,mBAAmB,CAEpC,MAAMiB,WAAa9C,2BAA2B6B,oBAAsB,IAAIpqD,IAAKsrD,IAC3EhB,gBAAgB,CAAEh6B,UAAW27B,yBAA0BpD,UAAWyC,GAAIzB,mCAExEuB,eAAiB,IAAIpsC,eAAgBqsC,WAGzC,MAAMK,cAAgBQ,YAEhBC,oBAAgC,CAACV,eACvC,IAAIlC,UAAY0C,yBACZ3B,gBAAgB,CAAEh6B,UAAW27B,2BAC7B1yC,gBAFoC,EAEpCA,KAAMgwC,UAEV,KAAOA,WAAW,kDAChB,MAAM6C,YAAcvC,gBAAe,8BAAGL,WAAWD,kBAAd,iCAAG,sBAAuB5a,WAAa4a,UACtE6C,aACFD,oBAAoB76B,KAAK86B,aAE3B7C,UAAS,+BAAGC,WAAWD,kBAAd,kCAAG,uBAAuBA,UAGrCvnC,WAAW,CACT7C,wBAAyB4sC,6BACzB/sC,YAAa0sC,cACT,UAAAv7B,MAAK,IAAIi7B,kBAAmBe,uBAC5B,UAAAj1B,YAAWk0B,eAAgBe,wBAGnC,CACE5D,2BACAvpC,YACAksC,+BACA/rC,wBACAqqC,WACAxnC,aAIEqqC,eAAgB,SAAAppB,QAAO3I,YAC7B+xB,cAAc10C,QAAU2iB,WACxB,MAAM2U,oBAAqB,SAAAv+C,aACxBohD,UAEMua,cAAc10C,SACjBqK,WAAW,CAAE/C,cAAc,UAAAusC,KAAIvsC,aAAc,CAAC6yB,WAAa,CAAErsB,iBAAiB,KAGlF,CAACxG,aAAc+C,aAGXsqC,kBAAmB,SAAAxpC,SACvB,KACE,MAAMjyB,OAAS,GAEf,SAAS07D,mBAAmBC,SAAmBpsC,QAC7C,IAAKosC,SACH,OAEF,IAAI1a,QAAmB0a,SACvB,KAAO1a,SAAW0X,WAAW1X,UACtBjhD,OAAOihD,WACVjhD,OAAOihD,SAAW,IAEpBjhD,OAAOihD,SAASxgB,QAAQlR,QACxB0xB,QAAU0X,WAAW1X,SAASyX,UAIlC,IAAK,MAAOkD,SAAUrsC,UAAW3rB,OAAOg2D,QAAQhC,uBAAwB,CACtE,MAAMmB,QAAUG,WAAW0C,UACtB57D,OAAO+4D,WACV/4D,OAAO+4D,SAAW,IAEpB,MAAM8C,oBAAwBtsC,OAAwBpgB,IAAKuF,KAAS,GAAEknD,SAAShkB,OAAO,KAAK17B,YAAYxH,OACvG1U,OAAO+4D,SAASt4B,QAASkd,iBAAmBke,oBAAsBtsC,QAClE,MAAMusC,UAAYnD,WAAWI,SAC7B2C,mBAAmBI,qBAAD,EAACA,UAAWpD,UAAWmD,qBAE3C,OAAO77D,QAET,CAAC29C,iBAAkBgb,WAAYf,yBAG1BmE,sBAAuB,eAAAC,aAAYvyB,WAAY,MAChD,2BAAEwyB,6BAA+B,SAAAhqC,SACrC,KACE,MAAMiqC,YAAc7hB,mBAAqBE,2CAAoBO,cAAcp7C,MACrEy8D,cAAgB9hB,mBAAqBE,2CAAoBM,eAAen7C,MACxEm+C,kBAAoBvJ,eAAep4B,OAAS,EAElD,IAAIkgD,yBAA0B,EAE9B,MAAMC,eAAwC,GAExCzc,WAAamc,oBAAoBO,cAAcvf,OAkBrD,SAASwf,mBAAmB7zC,KAAgB8zC,mBAG1C,GAAI3e,mBAAmC,SAAdn1B,KAAKlG,KAAiB,CAC7C,MAAMi6C,YAAc9e,kBACfj1B,KAAKk1B,kBAAkB,KAAOl1B,KAAKk1B,kBAAkB,IACrDl1B,KAAKk1B,kBAAkB,GACtB8e,iBAAmB/e,kBACpB0b,4BAA4B3wC,KAAM,KAAO2wC,4BAA4B3wC,KAAM,IAC3E2wC,4BAA4B3wC,KAAM,GAEvC,GAAKyzC,eAAiBM,aAAiBP,aAAeQ,iBAEpD,OADAL,eAAe3zC,KAAK1iB,MAAO,GACpB,EAIX,MAAM22D,2BAA6BH,mBAlCrC,SAA0B9zC,MAExB,MAAkB,SAAdA,KAAKlG,OAEgB,UAAdkG,KAAKpP,KAEM,MAAboP,KAAKlG,MAAgBkG,KAAKlG,KAAK85C,cAAcvuC,SAAS6xB,YAI7Dl3B,KAAK+W,UAAU68B,cAAcvuC,SAAS6xB,aACxB,MAAbl3B,KAAKlG,MAAgBkG,KAAKlG,KAAK85C,cAAcvuC,SAAS6xB,aACtDjC,kBAAqB,GAAEsa,wCAAuBvvC,KAAK+W,YAAY68B,cAAcvuC,SAAS6xB,aAsBjCgd,CAAiBl0C,MACzE,IAAIm0C,gBAAiB,EAErB,GAAkB,UAAdn0C,KAAKpP,KAAkB,CAEzB,MAAMwjD,WACJpF,2BAA2BhvC,KAAK+W,YAC/Bke,kBAAoB+Z,2BAA4B,GAAEO,wCAAuBvvC,KAAK+W,cAC/E,GAEF,IAAK,MAAMu4B,aAAa8E,WAAY,CAClC,MAAMC,sBAAwB/E,UAAUsE,cAAcvuC,SAAS6xB,YAC/Dyc,eAAe5C,gBAAgB,CAAEh6B,UAAW/W,KAAK+W,UAAWu4B,uBAC1D2E,4BAA8BI,sBAChCF,eAAiBE,uBAAyBF,qBAI5C,IAAK,MAAM7J,SAAStqC,KAAK7wB,SACvBglE,eAAiBN,mBAAmBvJ,MAAO2J,6BAA+BE,eAG9E,MAAMG,UAAYL,4BAA8BE,eAEhD,OADAR,eAAe3zC,KAAK1iB,KAAOg3D,UACpBA,UAiBT,MAAO,CAAEf,2BAdT,SAA8Bj2D,KAC5B,OAAK45C,aAKAwc,0BACHG,mBAAmBrE,cAAc,GACjCkE,yBAA0B,KAGnBC,eAAer2D,SAK5B,CACEq0C,iBACA/F,eAAep4B,OACf6/C,oBACA1C,4BACA3B,2BACAQ,aACAva,oBAIE,QAAEiT,QAAF,oBAAWqM,sBAAwB,SAAAhrC,SACvC,KACS,CACL2+B,QAAShtD,OAAOwtC,KAAKunB,YACrBsE,sBAAuBlB,sBAG3B,CAACA,oBAAqBpD,aAGxB,MAAO,CACL/H,gBACA+I,sDACAU,8DACAhB,wDACA4C,sDACAte,kCACAgb,sBACAT,0BACAuD,kCACAtC,oDACAC,mBAAoBM,2BACpBuD,wCACAhf,gDACAC,oDACAoc,8CACAnc,oCACAC,wCA7oBJ,mCACA,8BACA,4DACA,uCAGA,4DACA,+CACA,iDACA,yCACA,gC,kqBAKO,SAASqb,iBAAgB,UAC9Bh6B,UAD8B,KAE9Bjd,KAF8B,UAG9Bw1C,UAH8B,gBAI9BgB,kBAOA,MAAMO,kBAAoB95B,UACtBu5B,gBACG,GAAEf,wCAAuBx4B,YAC1BA,eACFtuB,EACJ,GAAI6mD,UAAW,CACb,GAAIuB,kBACF,MAAQ,MAAKA,qBAAqBvB,YAEpC,MAAM,IAAIr6D,MACR,8GAGJ,GAAI47D,kBACF,MAAQ,KAAIA,kBAEd,GAAI/2C,KACF,OAAOw2C,gBAAmB,UAASx2C,KAAU,QAAOA,KAGtD,MAAM,IAAI7kB,MAAO,0FAIZ,SAAS86D,kBACd,SAAE5gE,SAAW,GAAb,UAAiB4nC,UAAjB,KAA4Bjd,KAA5B,YAAkC06C,cAClC,wBACE7E,wBADF,UAEEK,UAFF,iBAGEH,iBAHF,iBAIE5a,mBAQF,MAAM33C,IAAMyzD,gBAAgB,CAAEj3C,UAAMid,sBAC9Bqe,WAAa2b,gBAAgB,CAAEj3C,UAAMid,oBAAWu5B,iBAAiB,IACjEnb,kBAAoBwa,wBAAwBxuC,KAAO,EAEzD,GAAI4V,UAAW,CACb,MAAM/P,SAAW6oC,iBAAiB94B,WAClC,sBACEnmB,KAAM,QACNtT,QACA83C,sBACAre,oBACAme,kBAAmBD,iBACf,CAAC0a,wBAAwBjuD,IAAIq1B,WAAY44B,wBAAwBjuD,IAAK,GAAE6tD,wCAAuBx4B,cAC/F,CAAC44B,wBAAwBjuD,IAAIq1B,YACjCoe,qCACI6a,UAAY,CAAEA,0BAAcvnD,EAC5BqR,KAAO,CAAEA,gBAASrR,EAClBue,SAAW,CAAEA,wBAAave,EAC1B+rD,YAAc,CAAEA,8BAAgB/rD,GAGxC,GAAIqR,KAAM,CACR,MAAM26C,cAAgBtlE,SAASsX,IAAK8hB,QAClCwnC,iBAAiBxnC,OAAQ,CACvBonC,gDAEAK,UAAoB,SAATl2C,UAAkBrR,EAAYnL,IACzCuyD,kCACA5a,qCAGJ,sBACE33C,QACA83C,sBACAt7B,UACAlJ,KAAM,QAENskC,kBAAmBD,iBACf,CACEwf,cAAcjwB,KAAMxkB,MAASA,KAAKk1B,kBAAkB,IACpDuf,cAAcjwB,KAAMxkB,MAASA,KAAKk1B,kBAAkB,KAEtD,CAACuf,cAAcjwB,KAAMxkB,MAASA,KAAKk1B,kBAAkB,KACzDC,oCACAhmD,SAAUslE,eACNzE,UAAY,CAAEA,0BAAcvnD,GAGpC,MAAM,IAAIxT,MAAO,0EAGZ,SAAUo6D,YAA2CrvC,MAE1D,SADMA,KACFA,KAAK7wB,SACP,IAAK,MAAMulE,WAAW10C,KAAK7wB,eAClBkgE,YAAYqF,SAKlB,SAASlE,WAAWlzD,KACzB,OAAOA,IAAI2yC,QAAQsf,sCAAsB,IAAItf,QAAQ,UAAW,W,gJC7F3D,SAA2BmhB,KAAej9D,QAAmB,KAClE,MAAOxF,EAAI,IAAKC,EAAI,IAAKC,EAAI,IAAKsH,EAAI,IAAMi7D,MAAQ,IACjD5jC,MAAM,KACN/mB,IAAI4/B,YACJ5/B,IAAKxW,GAAO2K,MAAM3K,QAAKwY,EAAYxY,GACtC,MAAO,CAAEtB,EAAGA,EAAIwF,QAASvF,EAAGA,EAAIuF,QAAStF,EAAGA,EAAIsF,QAASgC,M,gBAiE5C,UAA6B,WAC1Cw+D,WAD0C,oBAE1CC,oBAF0C,iCAG1CC,iCAH0C,YAI1CC,YAJ0C,sBAK1CC,wBAMA,MAAMC,WAAuB,UAAA7tD,KAAI2tD,YAAaH,aACxC,UACJ59B,UACAk+B,eAAe,eAAEC,eAAF,SAAkBluC,WAC/BguC,UAEJ,IAAKhuC,SACH,OAAO,KAGT,OACE,6BAACmuC,qBAAD,KACE,6BAACC,OAAD,SAAUr+B,WACV,6BAACs+B,UAAD,KAAYruC,UACZ,oCAAK0J,UAAU,iBACb,6BAAC,MAAA4kC,KAAD,CAAMC,iBAAkBR,uBAAyB,KAC9CG,eAAezuD,IAAI,CAAC+uD,OAAQ5E,cAC3B,6BAAC,MAAA0E,KAAKG,QAAN,CAAc/K,IAAK8K,QAAU,OAAQl4D,IAAKszD,aACxC,6BAAC8E,YAAD,KACE,6BAACC,WAAD,CACE/E,YAAaA,YACb+D,WAAYA,WACZC,oBAAqBA,oBACrBC,iCAAkCA,iCAClCG,UAAWA,mBAzI7B,oCACA,+BACA,sDACA,iEAEA,iDAEA,yDACA,gEACA,+CACA,8C,sPAEA,MAAMG,qBAAuBzhC,0BAAO2e,GAAI;gBACxBh5C,6BAAOu8D;WACZv8D,6BAAOw8D;;EAGZT,OAAS1hC,0BAAOoiC,EAAG;;;EAKnBT,UAAY3hC,0BAAOnb,CAAE;;EAIrBm9C,YAAchiC,0BAAO2e,GAAI;WACpBh5C,6BAAOw8D;EAmBlB,SAASF,YAAW,YAClB/E,YADkB,WAElB+D,WAFkB,oBAGlBC,oBAHkB,iCAIlBC,iCAJkB,UAKlBG,UACAA,WAAW,UACTj+B,UADS,iBAETg/B,iBACAd,eAAe,YAAErjC,YAAF,SAAe5K,SAAf,eAAyBkuC,mBAO1C,IAAKluC,SACH,OAAO,KAET,MAAMwT,SAAYu7B,kBAAoBA,iBAAiBnF,cAAiB,GAClE3pB,QAAS,uBAAAR,gCAA+Bzf,UAC9C,IAAKigB,OACH,MAAM,IAAIhyC,MAAO,0CAAyC+xB,UAG5D,OACE,6BAAC,uBAAD,KACE,0DACE,6BAACigB,OAAD,CACE/f,QAAS2tC,iCACT3wB,cAAe,CAAC1L,UAAWxhC,SACzB,MAAMstC,Y,8ZAAc,CAAH,GACZ9J,SADY,CAEf,CAAChC,WAAYxhC,QAEf49D,oBAAqB,GAAED,+BAA+B/D,eAAgBtsB,cAExE9J,SAAUA,SACV2J,iBAAmBG,cACjB,MAAM0xB,kBAA2C,mBAAhB1xB,YAA6BA,YAAY9J,UAAY8J,YACtFswB,oBAAqB,GAAED,+BAA+B/D,eAAgBoF,sBAG1E,6BAAC,gBAAD,CACEtlC,UAAU,0BACV/sB,MAAO,CAAEsyD,UAAW,GACpBzlC,QAAS,KAAM,0BACb,MAAM0lC,iBAAkB,wDAAAC,iCAAgCp/B,kBAAhC,uDAA4Cg/B,mBAAoB,GACxFnB,oBAAqB,GAAED,+BAA+B/D,eAAgBsF,gBAAgBtF,gBAL1F,yB,6MCwCD,UAA8C,sBACnDwF,sBAAwBC,uCAD2B,cAEnDvwC,cAFmD,YAGnDL,YAHmD,wBAInDG,0BAEA,IAAKH,YACH,MAAO,CACLmM,YAAawkC,sBACbE,mBAAoB,EAAC,GAAM,GAC3B9L,UAAU,EACVxtC,MAAO,IAIX,MAAMu5C,oBAAsBC,iBAAiB/wC,cACvC,mBACJgxC,mBADI,eAEJC,eAFI,0BAGJjG,0BAHI,iBAIJkG,kBAtIJ,SACElxC,aAOA,MAAMgxC,mBAAqB,GACrBC,eAAiB,GACjBjG,0BAA4B,GAC5BkG,iBAAmB,IAAI1lE,IAqB7B,OApBAw0B,YAAYoiB,QAASh7B,OACnB,GAAIA,KAAK2nB,WAAW,MAClBkiC,eAAe3+B,KAAKlrB,KAAKqiC,OAAO,KAAK17B,cAChC,GAAI3G,KAAK2nB,WAAW,KACzBkiC,eAAe3+B,KAAKlrB,WACf,GAAIA,KAAK2nB,WAAW,MACzBiiC,mBAAmB1+B,KAAKlrB,KAAKqiC,OAAO,KAAK17B,cACpC,GAAI3G,KAAK2nB,WAAW,OAAQ,CACjC,MAAOpP,MAAOkqC,WAAaziD,KAAKqiC,OAAO,MAAM17B,QAAQga,MAAM,KACvDpI,OAASkqC,YACXmB,0BAA0BrrC,OAASqrC,0BAA0BrrC,QAAU,GACvEqrC,0BAA0BrrC,OAAO2S,KAAKu3B,iBAE/BziD,KAAK2nB,WAAW,SACzBmiC,iBAAiBvvC,IAAIva,KAAKqiC,OAAO,QAAQ17B,SAGzCmjD,iBAAiBvvC,IAAIva,QAGlB,CAAE4pD,sCAAoBC,8BAAgBjG,oDAA2BkG,mCAuGpEC,CAA6BL,qBAC3BM,mBAAqBC,sBAAsBC,gCAGjD,IAAI/5C,OAFsB,oBAAAg6C,qBAAoBN,gBAG3CjwD,IAAKswB,YACJ,MAAMu/B,mBAAqB,EAAC,GAAO,GACnC,IAAIP,iBACAkB,2BAEJ,IAAK,MAAMC,oBAAoBC,2CAA0B,CACvD,MAAMtG,kBAAqB,GAAEqG,mBAAmBngC,YAC1C65B,YAAcwG,8BAA8BF,kBAGhDR,eAAerxC,SAASwrC,qBACvBgG,mBAAmBhG,oBAAsB,CAAC,oBAAoB1J,MAAOkQ,YACpEV,iBAAiBj1D,IAAI21D,eAIvBf,mBAAmB1F,cAAe,EAG9B9qC,eAAiBA,cAAc+qC,qBACjCkF,iBAAmBA,kBAAoB,MAACttD,OAAWA,GACnDstD,iBAAiBnF,aAAe9qC,cAAc+qC,qBAK7CjrC,yBAA2BA,wBAAwBP,SAASwrC,oBAC7DJ,0BAA0BI,sBAG1BoG,2BAA6BA,4BAA8B,MAACxuD,OAAWA,GACnEgoD,0BAA0BI,qBAC5BoG,2BAA2BrG,aAAeH,0BAA0BI,sBAO5E,OAAO,UAAA7yB,SAAQs4B,mBAAoB,EAAC,GAAO,SACvC7tD,EADG,eAGDsuB,oBACAu/B,uCAEIW,6BAA8B,UAAAliD,UAAQ,UAAAm1B,SAAQ+sB,6BAA6BzjD,OAAS,EACpF,CAAEg3C,UAAU,QACZ/hD,EACAstD,iBAAmB,CAAEA,wCAAqBttD,EAC1CwuD,2BAA6B,CAAEA,4DAA+BxuD,KAGzE+T,OAAO+zB,SAEV,MAAM+mB,2BAA6B,GAC7BC,qBAAuB,GAC7B,IAAK,MAAMC,aAAaf,mBAClBe,UAAUhjC,WAAW,MACvB+iC,qBAAqBx/B,KAAKy/B,UAAUtoB,OAAO,MAAM17B,SAEjD8jD,2BAA2Bv/B,KAAKy/B,WAMhCD,qBAAqB/jD,QACvBwJ,MAAM+a,KAAK,CACThB,UAAW,MACXkgC,2BAA4B,CAACM,qBAAsB,IACnDjB,mBAAoB,EAAC,GAAM,KAI/Bt5C,OAAQ,UAAAy6C,QAAOz6C,MAAO,CAAC,cAEnBs6C,2BAA2B9jD,QAC7BwJ,MAAM6mC,QAAQ,CACZ9sB,UAAW,YACXkgC,2BAA4B,CAACK,2BAA4B,IACzDhB,mBAAoB,EAAC,GAAM,KAI/B,MAAO,CACL1kC,YAAawkC,sBACbE,mBAAoB,EAAC,GAAM,GAC3B9L,UAAU,EACVxtC,c,gDAmFG,SAAiD83C,aACtD,OAAOA,YAAYruD,IAAKm+C,OACtB,kBACK,UAAAxxC,MAAKwxC,MAAO,CAAC,uBADlB,CAEE0R,mBAAoBoB,2BAA2B9S,MAAM0R,oBACrDt5C,MAAO4nC,MAAM5nC,MAAMvW,IAAKoG,MACtB,kBACK,UAAAuG,MAAKvG,KAAM,CAAC,qBAAsB,6BAA8B,qBADrE,CAEEypD,mBAAoBqB,2BAClB9qD,KAAKypD,mBACLzpD,KAAK+qD,oBAAsB,CAAE,IAAI,KAhE7C,SACEX,2BACAY,oBAEA,IAAIC,eAAiB,GACrBC,4CAA0BlwB,QAAS2tB,SAC7BqC,mBAAmBrC,UACrBsC,eAAiBD,mBAAmBrC,WAGxC,IAAIwC,kBAAoB,GAMxB,GALAC,+CAA6BpwB,QAAS2tB,SAChCqC,mBAAmBrC,UACrBwC,kBAAoBH,mBAAmBrC,YAGvC,UAAAx3B,SAAQ85B,eAAgB,MAAO,UAAA95B,SAAQg6B,kBAAmB,IAC5D,OAGF,MAAO,CAAEf,2BAA4B,CAACa,eAAgBE,oBA8C3CE,CAAmCrrD,KAAKoqD,2BAA4BpqD,KAAKsrD,4BAA8B,IA3CpH,SACEpC,iBACAqC,kBAEA,GAAIrC,iBACF,MAAO,CAAEA,mCAEX,IAAIsC,aAAe,GACnBN,4CAA0BlwB,QAAS2tB,SAC7B4C,iBAAiB5C,UACnB6C,aAAeD,iBAAiB5C,WAGpC,IAAI8C,gBAAkB,GAMtB,GALAL,+CAA6BpwB,QAAS2tB,SAChC4C,iBAAiB5C,UACnB8C,gBAAkBF,iBAAiB5C,YAGnC,UAAAx3B,SAAQq6B,aAAc,MAAO,UAAAr6B,SAAQs6B,gBAAiB,IACxD,OAGF,MAAO,CACLvC,iBAAkB,EAChB,UAAA/3B,SAAQq6B,aAAc,SAAM5vD,EAAY4vD,cACxC,UAAAr6B,SAAQs6B,gBAAiB,SAAM7vD,EAAY6vD,kBAkBpCC,CAAyB1rD,KAAKkpD,iBAAkBlpD,KAAKurD,kBAAoB,U,wGA4B/E,SAAiCtD,aACtC,OAAOA,YAAYruD,IAAKm+C,OAAD,iBAClBA,MADkB,CAErB5nC,MAAO4nC,MAAM5nC,MAAMvW,IAAKoG,MAAD,iBAClBA,KACAspD,gCAAgCtpD,KAAKkqB,UAAWlqB,KAAKkpD,wBApX9D,I,IAAA,+BACA,e,IAAA,2B,iCAEA,qCACA,4CAQA,oC,glBAuDA,MAAMe,uBAAwB,yBAC3B0B,cACC,MAAMx7C,OAAQ,UAAAjI,SAAQyjD,YAAYrpE,SAASsX,IAAKoG,MAAS3T,MAAMwuC,KAlBnE,SAAU+wB,2BACR5rD,KACA6rD,aAEA,MAAMC,cAAgB9rD,KAAK1d,SAI3B,IAHKwpE,eAAiB9rD,KAAKkqB,iBACnB,CAAE3R,MAAOvY,KAAKkqB,UAAW2hC,0BAE7BC,cACF,IAAK,MAAMC,WAAWD,oBACbF,2BAA2BG,QAASF,YAAY5pD,OAAOjC,KAAKiN,KAAO,CAACjN,KAAKiN,MAAQ,KAQtB2+C,CAA2B5rD,KAAM,OACrG,OAAO,UAAAQ,YAAU,UAAA22B,OAAMhnB,MAAO,SAAU,EAAG07C,2BAAkBA,eAIjE,SAAStB,8BAA8BF,kBACrC,OAAOe,+CAA6B5yC,SAAS6xC,kBAAoB,EAAI,EAwBvE,MAAM2B,kBAAmB,yBACtBL,cACQ,UAAAzjD,SAAQyjD,YAAYrpE,SAASsX,IAAKoG,MAAS3T,MAAMwuC,KAlB5D,SAAUoxB,sBAAsBjsD,MAC9B,MAAM,SAAE1d,SAAF,KAAY2qB,KAAZ,UAAkBid,UAAlB,UAA6BgiC,WAAclsD,KAQjD,GAPIksD,YACEhiC,gBACKgiC,UAAUtyD,IAAKuyD,WAAD,CAAiBA,kBAAU5zC,MAAO2R,aAC9Cjd,aACFi/C,UAAUtyD,IAAKuyD,WAAD,CAAiBA,kBAAUl/C,eAGhD3qB,SACF,IAAK,MAAMypE,WAAWzpE,eACb2pE,sBAAsBF,SAO8BE,CAAsBjsD,UAIhF,SAAS2pD,iBAAiB/wC,aAC/B,MAAMwzC,cAAgBJ,iBAAiB9B,gCACjCmC,gCAAkC,GACxC,kBAAwCD,cAAe,OAA5C,MAAE7zC,MAAF,KAAStL,KAAT,SAAek/C,UAA6B,KACjDl/C,OACFo/C,gCAAiC,GAAEF,UAAe,QAAOl/C,KACzDo/C,gCAAiC,QAAOF,UAAe,QAAOl/C,MAE5DsL,QACF8zC,gCAAiC,KAAIF,UAAe,KAAI5zC,MAExD8zC,gCAAiC,GAAEF,UAAe,KAAI5zC,OAG1D,OAAOK,YAAYhf,IAAKuZ,MAASk5C,gCAAgCl5C,OAASA,MAoI5E,SAAS03C,2BAA2BpB,oBAClC,OAAIA,oBAKG,EAAC,GAAM,GAGhB,SAASqB,2BACPrB,mBACAsB,oBAEA,GAAItB,mBACF,OAAOA,mBAIT,MAAO,CAFeyB,4CAA0BvzB,KAAMgxB,UAAaoC,mBAAmBpC,SAC7DyC,+CAA6BzzB,KAAMgxB,UAAaoC,mBAAmBpC,UA8EvF,SAASW,gCACdp/B,UACAg/B,kBAEA,MAAMoD,8BAA+B,cAAA93C,kBAClC+3C,uBACAt2C,oBAAoBu2C,gCAAgCtiC,WAEvD,GAAIoiC,6BAA8B,CAChC,MAAMG,oBAAsBvD,kBAAoB,MAACttD,OAAWA,GAO5D,OANA6wD,oBAAoBzxB,QAAQ,CAACrN,SAAUo2B,oBACpBnoD,IAAb+xB,WAEF8+B,oBAAoB1I,aAAeuI,6BAA6BvI,gBAG7D,CAAEmF,iBAAkBuD,qBAE7B,OAAOvD,iBAAmB,CAAEA,wCAAqBttD,I,ufC7WnD,mCAOA,SAASm/C,QAAQ5wD,OACf,OAAgB,MAATA,MAEF,MAAMuiE,WAAcviE,OAAkC,MAATA,MAAgB,mBAAgByR,E,8BAE7E,MAAM+wD,SAAYxiE,OACtB4wD,QAAQ5wD,QAA2B,iBAAVA,WAA0CyR,EAArB,mB,0BAE1C,MAAMgxD,UAAaziE,OACvB4wD,QAAQ5wD,QAA2B,kBAAVA,WAAoDyR,EAA7B,4B,4BAE5C,MAAMixD,cAAgB,CAACC,aAAuB,IAAO3iE,QAC1D,GAAIkC,MAAMo7C,QAAQt9C,OAAQ,CACxB,GAAIA,MAAMwc,SAAWmmD,aACnB,MAAQ,gBAAeA,2BAEzB,IAAK,MAAM9sD,QAAQ7V,MACjB,GAAoB,iBAAT6V,KACT,MAAQ,4CAA2CA,2B,oCAMpD,MAAM+sD,cAAiB5iE,QAC5B,MAAM6iE,iBAAmBH,cAAc,EAAdA,CAAiB1iE,OAC1C,GAAI6iE,iBACF,OAAOA,iBAET,GAAI7iE,MAAO,CACT,MAAM8iE,cAAgB9iE,MAAMuhC,OAAO,CAACrlB,KAAMrG,OAASqG,KAAOrG,KAAOA,KAAM,GAEvE,GAAIpe,KAAKsrE,IAAID,cAAgB,GAAK,GAChC,MAAO,6B,qDAKY9iE,OAA0C,iBAAVA,MAAqB,sBAAmByR,E,eAE3E,CAACuxD,UAAoB,IAAOhjE,OAC5CkC,MAAMo7C,QAAQt9C,OACTA,MAAMwc,OAASwmD,UAAa,yBAAwBA,6BAA0BvxD,EAC3D,iBAAVzR,OACTA,MAAMwc,OAASwmD,UAAa,yBAAwBA,4BADtD,E,eAKa,CAACC,UAAoB,IAAOjjE,OAC5CkC,MAAMo7C,QAAQt9C,OACTA,MAAMwc,OAASymD,UAAa,wBAAuBA,6BAA0BxxD,EAC1D,iBAAVzR,OACTA,MAAMwc,OAASymD,UAAa,wBAAuBA,4BADrD,E,eAKa,CAACC,IAAc,IAAOljE,OACtCkC,MAAMo7C,QAAQt9C,OACTA,MAAMwc,SAAW0mD,IACnB,sBAAqBA,wCAAwCljE,MAAMwc,eACpE/K,EACsB,iBAAVzR,OACTA,MAAMwc,SAAW0mD,IAAO,gBAAeA,kCAAkCljE,MAAMwc,eADjF,E,qBAKoBxc,OACV,iBAAVA,OAAsBA,MAAMw9B,WAAW,KAAO,6BAA0B/rB,E,uBAKlDzR,QAE7B,IADgB,IAAImjE,OAAQ,8BAA8B,MAC7C77B,KAAKtnC,OAChB,OAAUA,MAAF,iCAIL,MAAMojE,gBAAmBC,OACvB,CAACroE,KAAY,MAClB,MAAM60B,OAAS,GASf,OARA3rB,OAAOwtC,KAAK2xB,OAAOxyB,QAASvqC,MAE1B,MACM6K,MAfEkyD,QAAWrjE,OAAUqjE,MAAM5zD,IAAK6zD,MAASA,KAAKtjE,QAAQwlB,OAAQrU,SAAYA,OAAO,GAc5E27B,CAAK,GAAGh1B,OAAOurD,MAAM/8D,MACpBg9D,CAAKtoE,KAAKsL,MACpB6K,QACF0e,OAAOvpB,KAAO6K,SAGX0e,Q,yEAI8BwzC,OAC/BroE,OACN,IAAK,IAAIhC,EAAI,EAAGA,EAAIqqE,MAAM7mD,OAAQxjB,IAAK,CACrC,MAAMmY,MAAQkyD,MAAMrqE,GAAGgC,MACvB,GAAImW,MACF,OAAOA,Q,gCAYyBosC,kBACV,iBAArBA,iBACHA,iBACAr5C,OAAOwtC,KAAK6L,kBACT9tC,IAAKnJ,KAAS,GAAEA,QAAQi3C,iBAAiBj3C,QACzCwmC,KAAK,M,6BAEuB/zB,WACnC,MAAM/d,KAA2B,iBAAb+d,SAAwB,GAAKA,SAC3CsqD,MAAQ,CACZz+D,SAAU,CAAC49D,UACX99D,YAAa,CAAC+9D,WACd39D,IAAK,CAAC09D,UACNx9D,YAAa,CAACw9D,UACd18D,OAAQ,CAAC48D,cAAc,IACvB38D,aAAc,CAAC28D,cAAc,IAC7Bx9D,kBAAmB,CAAC09D,gBAGhBtiE,OADY8iE,gBAAgBC,MACnBE,CAAUvoE,MAEzB,OAAsC,IAA/BkJ,OAAOwtC,KAAKpxC,QAAQkc,YAAe/K,EAAYnR,QAGxD,MAAMkjE,eAAkBxjE,QACtB,IAAIkC,MAAMo7C,QAAQt9C,OAUhB,MAAO,qCATP,IAAK,MAAM6V,QAAQ7V,MAAO,CACxB,IAAK6V,MAAkB,MAAVA,KAAK5c,GAAuB,MAAV4c,KAAK3c,EAClC,MAAQ,8BAEV,GAAsB,iBAAX2c,KAAK5c,GAAoC,iBAAX4c,KAAK3c,EAC5C,MAAQ,mCAQVuqE,WAAczjE,QAClB,IAAIkC,MAAMo7C,QAAQt9C,OAQhB,MAAO,4CAPP,IAAK,MAAM6V,QAAQ7V,MAAO,CACxB,MAAMmR,MAAQqyD,eAAe3tD,MAC7B,GAAI1E,MACF,OAAOA,Q,+BASwB4H,WACrC,IAAKA,WAAY,UAAAiuB,SAAQjuB,SAAU,MAAO,UAAAiuB,SAAQjuB,SAAU,IAC1D,OAEF,MAEMzY,OADY8iE,gBADJ,CAAEhrE,SAAU,CAACqrE,aAEZF,CAAU,CAAEnrE,SAAU2gB,WACrC,OAAsC,IAA/B7U,OAAOwtC,KAAKpxC,QAAQkc,YAAe/K,EAAYnR,OAAOlI,U,yBAG9B2gB,WAC/B,MAAM/d,KAA2B,iBAAb+d,SAAwB,GAAKA,SAG3CzY,OADY8iE,gBADJ,CAAEnqE,EAAG,CAACspE,WAAYC,UAAWtpE,EAAG,CAACqpE,WAAYC,WAE5Ce,CAAUvoE,MACzB,OAAsC,IAA/BkJ,OAAOwtC,KAAKpxC,QAAQkc,YAAe/K,EAAYnR,S,qKCzLxD,mCACA,M,4WAAA,yBAIA,+B,glBAgBe,MAAMojE,sBAAsBrrE,MAAMsrE,UAAiB,2EACpC,EAAE,GAAI,IAD8B,0CAG3C,KACnB,MAAMC,gBAA8C,SAA5Br9D,KAAKzO,MAAM+rE,aAA0B,cAAgB,OAC7Et9D,KAAKzO,MAAMgsE,oBAAoB,CAC7BD,aAAcD,gBACdG,cAAe,CAAEx0D,WAAOkC,EAAW4K,SAAK5K,OAPoB,6BAWxD,KACNlL,KAAKzO,MAAMgsE,oBAAoB,CAC7BD,aAAc,OACdE,cAAe,CAAEx0D,WAAOkC,EAAW4K,SAAK5K,OAdoB,+CAkBtC,CAAC1I,EAAei7D,aACxCz9D,KAAK09D,gBAAkB,CAACl7D,EAAED,QAASC,EAAEF,WAnByB,6CAsBxC,CAACE,EAAei7D,aACtC,MAAME,cAAgB,CAACn7D,EAAED,QAASC,EAAEF,UAC9B,aAAEg7D,aAAF,cAAgBE,cAAhB,oBAA+BD,qBAAwBv9D,KAAKzO,OAE7D,UAAAkvC,SAAQk9B,cAAe39D,KAAK09D,mBAIZ,gBAAjBJ,aACFC,oBAAoB,CAAED,aAAc,eAAgBE,8BAC1B,iBAAjBF,cAGTlsB,aAAa,KACXmsB,oBAAoB,CAAEC,4BAAeF,aAAc,cApCO,+CAyCtC,CAAC96D,EAAei7D,aACxC,MAAM,aAAEH,aAAF,cAAgBE,cAAhB,oBAA+BD,qBAAwBv9D,KAAKzO,MAClE,OAAQ+rE,cACN,IAAK,cACHC,oBAAoB,CAClBD,0BACAE,cAAe,CACbx0D,OAAO,QAAA40D,cAAaH,UAAUxuD,IAAI3H,kBAAkB,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,KACtEwO,SAAK5K,KAGT,MAEF,IAAK,eACHqyD,oBAAoB,CAClBD,0BACAE,cAAe,cAAF,GACRA,cADQ,CAEX1nD,KAAK,QAAA8nD,cAAaH,UAAUxuD,IAAI3H,kBAAkB,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,YAO9E,kBACE,OAAKtH,KAAK69D,cAIH79D,KAAK89D,wBAHH,KAMX,gBACE,OAAK99D,KAAK69D,cAIH79D,KAAK+9D,sBAHH,KAMX,kBACE,OAAK/9D,KAAK69D,cAIH79D,KAAKg+D,wBAHH,KAMX,oBACE,MAAM,aAAEV,cAAiBt9D,KAAKzO,MAC9B,MAAwB,gBAAjB+rE,cAAmD,iBAAjBA,aAG3C,sBACE,MAAM,MAAEt0D,MAAF,IAAS8M,KAAQ9V,KAAKzO,MAAMisE,cAClC,IAAIS,YAAc,GAClB,GAAIj1D,OAAS8M,IAAK,CAEhBmoD,YADa/sE,KAAKgtE,MAAMpoD,IAAIpjB,EAAIsW,MAAMtW,EAAGojB,IAAInjB,EAAIqW,MAAMrW,EAAGmjB,IAAIljB,EAAIoW,MAAMpW,GAClDurE,QAAQ,GAAf,IAGjB,OAAOF,YAGT/3D,SACE,OAAO,M,4VChIX,mEACA,6DACA,wDACA,2DACA,mCACA,+BACA,O,4WAAA,yBACA,wCAEA,yDACA,sDAGA,QAFA,kDAEA,0BACA,8C,kqBAEO,MAAMk4D,OAAS,CAAEhtE,EAAG,EAAGE,EAAG,EAAGD,EAAG,EAAGuH,EAAG,G,sBACtC,MAAM2uD,OAAS,CAAEn2D,EAAG,IAAMC,EAAG,IAAMC,EAAG,IAAMsH,EAAG,G,sBAwB/C,MAAMylE,sBAAwB,CAAC5mE,KAAekiD,cACnD,MAAM2kB,sBAAwB,IAAI5qE,IAClC,IAAI6qE,MACAC,cAAgB,EACpB,MAAMC,oBAAsB9kB,WAAW0c,cACjCqI,cAAgBjnE,KAAOA,KAAK4+D,cAAgB,GAClD,MAAgF,KAAxEkI,MAAQG,cAAc5zB,QAAQ2zB,oBAAqBD,kBACzD,UAAAG,OAAMJ,MAAOA,MAAQ5kB,WAAW1jC,QAAQq0B,QAASvxC,QAC/CulE,sBAAsBz0C,IAAI9wB,SAE5BylE,cAAgBD,MAAQ,EAI1B,OAD2B5iE,MAAMwuC,KAAKm0B,wB,sEAIf,EACvB7mE,UACAkiD,sBACAilB,8BACAC,sCACAC,0CACAC,wCAKA,MAAMC,OAAyBltE,eAAMk6B,QACnC,KACE,IAAIizC,WAAa,EACjB,OAAOxnE,KAAKyR,IAAI,CAAC3Q,OAAQ9F,KACvB,MAAMU,MAAQ,CAEZT,EAAG6F,OAAOpF,MAAMP,EAChBD,EAAG4F,OAAOpF,MAAMP,EAChBA,EAAG2F,OAAOpF,MAAMP,GAGlB,IAAK+mD,aAAeilB,eAClB,wBAAYrmE,OAAZ,CAAoBpF,cAGtB,MAAM+rE,mBAAqBb,sBAAsB9lE,OAAOd,KAAMkiD,YAE9D,GAAIulB,mBAAmBjpD,OAAQ,CAQ7B,OAPAgpD,YAAc,EACY,cAAH,GAClB1mE,OADkB,CAErBpF,YACAgE,eAAgB0nE,mBAAqB,IAAMI,WAAa1X,OAAS6W,OACjEc,wCAKJ,wBAAY3mE,OAAZ,CAAoBpF,iBAGxB,CAACwmD,WAAYilB,eAAgBC,mBAAoBpnE,OAG7C0nE,+BAAgC,SAAAvlE,cAAY,UAAAwlE,UAASN,qBAAsB,IAAK,CAAEO,UAAU,IAAS,CACzGP,uBAkBF,OAfA,SAAAnlE,WACE,KACE,IAAKilE,iBAAmBG,kBAAkB9oD,OACxC,OAEF,MAAMqpD,QAAUN,OAAO//C,OAAQ1mB,QAAWA,OAAO2mE,oBAAsB3mE,OAAO2mE,mBAAmBjpD,QAC7FqpD,QAAQrpD,OACVkpD,8BAA8BG,UACpBA,QAAQrpD,QAAU8oD,kBAAkB9oD,QAC9CkpD,8BAA8B,KAGlC,CAACA,8BAA+BH,OAAQrlB,WAAYolB,kBAAkB9oD,OAAQ2oD,iBAGzEI,Q,sBAGoB,KAC3B,MAAOJ,eAAgBW,uBAAwB,SAAAhsE,WAAkB,IAC1DomD,WAAY6lB,gBAAiB,SAAAjsE,UAAiB,KAC9CwrE,kBAAmBD,uBAAwB,SAAAvrE,UAAyB,KACpEsrE,mBAAoBY,wBAAyB,SAAAlsE,UAAS,GAG7D,MAAO,CACLqrE,8BACAW,0CACA5lB,sBACA6lB,4BACAV,0CACAC,oCACAF,sCACAY,4CACAC,gBAXqB,SAAAvzB,QAA0B,QAwB5C,MAAMwzB,iBAAmB,EAC9Bn/D,wBACAo/D,0BACA50D,wCACA60D,cACAjB,8BACAzP,0BASA,MAAM2Q,wBAAyB,SAAAC,uBAAsB,CAACH,eAAe,GACrE9tE,eAAM6H,UACJ,KACE,KAAKimE,cAAiBhB,gBAAmBiB,QAAWC,wBAClD,OAGF,MAAM,OAAEnnC,OAAF,KAAUvmC,MAASwtE,aAEnBhoC,OAASu3B,WAAW9gD,MACxB,CAAE7X,SAAU,CAAE9D,EAAG,EAAGC,EAAG,EAAGC,EAAG,GAAKmK,YAAa,CAAErK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGuI,EAAG,IACtE/I,KACAumC,OAAOC,SACPinC,QAEF,IAAKjoC,OACH,OAEF,MACEphC,UAAU,EAAE9D,EAAF,EAAKC,EAAL,EAAQC,IAChBglC,OAEE34B,cAAgB0xD,oCAAqB1xD,cAAcuB,aACnDhB,aAAe,CAAC,EAAG,EAAG,GAC5BX,eAAK+xD,QAAQpxD,aAAcX,eAAKmhE,SAASxgE,aAAc,CAAC9M,EAAGC,EAAGC,GAAI4N,YAAYjB,QAAS,CAAC,EAAG,EAAG,GAAIN,eAClG+L,oBAAoB,cAAD,GAAMxK,YAAN,CAAmBhB,8BAExC,CAACgB,YAAao/D,aAAcE,uBAAwB90D,oBAAqB60D,OAAQjB,eAAgBzP,c,uDAIlFr9D,eAAM6jB,KACvB,EACEipD,8BACAW,0CACA5lB,sBACA6lB,4BACAE,8BACAD,4CACAZ,sCACAE,oCACA/zD,wCACAxK,wBACA2uD,sBACA0Q,cACAI,kCAEA,MAAML,aAAeb,kBAAkBF,oBACjCqB,qBAAsB,SAAAtmE,aACzBumE,WACC,MAAMC,SAAWvB,mBAAqBsB,SAClCC,UAAYrB,kBAAkB9oD,OAChCwpD,sBAAsB,GAEtBA,sBADSW,SAAW,EACErB,kBAAkB9oD,OAAS,EAE3BmqD,WAG1B,CAACrB,kBAAmBF,mBAAoBY,wBAqB1C,OAlBA3tE,eAAM6H,UACJ,KACOolE,kBAAkB9oD,QACrBwpD,sBAAsB,IAG1B,CAACV,kBAAkB9oD,OAAQwpD,wBAG7BE,iBAAiB,CACfn/D,wBACAo/D,0BACA50D,wCACA60D,cACAjB,8BACAzP,wBAGGyP,eAWH,oCACEx4D,MAAO,CACLktC,QAAS,OACT1L,WAAY,SACZy4B,cAAe,MACfzmB,QAAS,QACThlD,OAAQ,SAEV,oCAAKwR,MAAO,CAAElP,gBAAiB,UAAW0iD,QAAS,kBAAmB0mB,aAAc,QAClF,6BAAC,cAAD,CAAMzd,QAAM,GACV,6BAAC,iBAAD,OAEF,sCACE0d,WAAS,EACTj6D,IAAKo5D,eACLrsD,KAAK,OACLiwB,YAAY,gBACZwB,YAAY,EACZrrC,MAAOkgD,WACPvzC,MAAO,CAAElP,gBAAiB,eAC1BorC,SAAW9/B,GAAMg9D,cAAch9D,EAAEjD,OAAO9F,OACxCmN,UAAYpE,IACI,UAAVA,EAAEzC,MAGFyC,EAAEg+D,SACJN,qBAAqB,GAGvBA,oBAAoB,OAGxB,qCAAM95D,MAAO,CAAE1K,MAAOI,6BAAOm/C,WAAY7mD,MAAO,OAAQk/C,QAAS,iBAC9DyrB,kBAAkB9oD,OAAS,EAAI4oD,mBAAqB,EAAI,IAD3D,OACoEE,kBAAkB9oD,SAGxF,6BAAC,cAAD,CAAM4sC,QAAM,EAAC5vB,QAAS,IAAMitC,qBAAqB,IAC/C,6BAAC,mBAAD,OAEF,6BAAC,cAAD,CAAMrd,QAAM,EAAC5vB,QAAS,IAAMitC,oBAAoB,IAC9C,6BAAC,qBAAD,OAEF,6BAAC,cAAD,CAAMjtC,QAAS,IAAMssC,sBAAqB,GAAQvpC,QAAQ,QAAQ6sB,QAAM,GACtE,6BAAC,eAAD,QApDF,6BAAC,gBAAD,CAAQ5vB,QAAS,IAAMssC,sBAAsBX,iBAC3C,6BAAC,cAAD,CAAM5oC,QAAQ,uBACZ,6BAAC,iBAAD,U,4LC7PZ,mEACA,wDACA,2DACA,wEACA,wEACA,gCACA,uDACA,iEAGA,6DACA,oEACA,sEACA,yEACA,2CACA,uCAeA,4CACA,sDACA,gCACA,8C,2eAO4B,EAC5B,MAEMyqC,8BAAgCznB,sCAEhC0nB,mBAAqBvqC,0BAAO2e,GAAI;;SAVZ;UAAA;;eAeX6rB;;;;yBAIUC;;;;;;;gBAOTC;;;mBAGG,EAAG1sB,uBAAiBA,UAAY,EAxBvB;;sBA0BNr4C,6BAAOglE;;;iBAGZhlE,6BAAOm/C;;;;;;;;;;;;;;EAgBlB8lB,WAAa5qC,0BAAO2e,GAAI;;WAEnBh5C,6BAAOklE;;sBAEIllE,6BAAOu8D;;;;EAMvB4I,iBAAmB9qC,0BAAO2e,GAAI;;;;;;;sBAOdh5C,6BAAOolE;;;EAKvBC,QAAUhrC,0BAAO2e,GAAI;;;;;EAOrB5M,OAAS/R,0BAAO0B,KAAM;;;;;;;;;;;;;;EAgBtBupC,cAAgBjrC,0BAAOC,IAAK;WACvBwqC;YACCS;;;;;;;;;EAWNC,WAAanrC,0BAAO2e,GAAI;;;;;;;EASxBysB,eAAiBprC,0BAAO2e,GAAI;;;;;;eA0OnBhjD,eAAM6jB,MAnMrB,UAAmB,QACjBg1C,QADiB,2BAEjB8G,2BAFiB,YAGjBvpC,YAHiB,gBAIjBs5C,gBAJiB,eAKjBC,eALiB,2BAMjB/N,2BANiB,aAOjBvrC,aAPiB,WAQjBqb,WARiB,+BASjB4wB,+BATiB,4BAUjBhB,4BAViB,2BAWjB4C,2BAXiB,iBAYjBte,iBAZiB,UAajBpvB,UAbiB,aAcjB2pC,aAdiB,WAejB/mC,WAfiB,iBAgBjBsqC,iBAhBiB,uBAiBjBnd,uBAjBiB,cAkBjBqpB,cAlBiB,iBAmBjBC,iBAnBiB,oBAoBjB3K,oBApBiB,cAqBjB4K,cArBiB,wBAsBjB5pB,wBAtBiB,0BAuBjBC,0BAvBiB,uBAwBjBoc,uBAxBiB,kBAyBjBnc,kBAzBiB,mBA0BjBC,mBA1BiB,iBA2BjB/D,mBAEA,MAAMytB,gBAAkBv5C,WAAas5C,cAC/BE,oBAAqB,SAAA31B,UACrBqL,gBAAiB,SAAAxrB,SAAQ,IAAM,IAAIt4B,IAAIw0B,aAAc,CAACA,cAEtD65C,WADsBP,gBAAkBQ,GAzLtB,GA0LqCC,mCAEvDC,2BAA6BhxE,KAAKovC,MAzLR,GAyLcmhC,gBAC9C,IAAIU,UAAYjxE,KAAKwyB,IAAIxyB,KAAK8D,IAAIktE,2BA/Ld,KACG,KA+LvB,MAAM/tB,UAAYguB,WAAaD,2BACzBnpB,aAAerB,iBAAmD,EAAhC+oB,8BAAoCA,8BACvExO,aAAara,oBAChBuqB,WAAappB,aAAeG,iCAG9B,MAAMkpB,oBAAqB,SAAAj2B,UAKrBk2B,iBAAkB,SAAAl2B,QAAOhkB,cACzBm6C,oBAAqB,SAAA1zB,mBAAkB,CAACqjB,eAAe,GAC7DoQ,gBAAgBxhD,QAAUyhD,mBAAqB,IAAIn6C,cAAgBA,cAEnE,SAAAxuB,WACE,KAEMkoE,iBAAmBO,mBAAmBvhD,SACxCuhD,mBAAmBvhD,QAAQ0hB,SAG/B,CAACs/B,kBAGH,MAAMU,wBAAyB,SAAAv2C,SAC7B,KACiD,UAAtBimC,aAAa5+C,KAAmB4+C,aAAargE,SAAW,IAC3CsX,IAAI,EAAGnJ,WAAUA,KACnC6pD,MAAO7pD,MAASooB,aAAaL,SAAS/nB,MAE5D,CAACooB,aAAc8pC,eAGXuQ,oBAAsBxM,2BAA2B/D,aAAalyD,KAC9D0iE,qBAAuB,CAAE96B,OAAS,OAAuC,GAAhCwM,UAAY,EA/NjC,gBAiO1B,OACE,6BAACusB,mBAAD,CACEvsB,UAAWA,UACXhhB,UAAU,gBACV/sB,MAAO,CAAEsK,UAAW8wD,gBAAkBQ,KACtC,6BAAC,2BAAD,CACEU,gBAAiBb,iBAAmBlkE,OAAOwtC,KAAKqqB,kBAAkBv/C,OAAS,EAC3EqS,UAAWA,UACXu5C,gBAAiBA,gBACjB32C,WAAYA,WACZy2C,iBAAkBA,iBAClBC,cAAeA,gBAEhBC,iBACC,6BAACd,WAAD,CAAY9tC,QAAUzwB,GAAMA,EAAE2/B,mBAC5B,oCAAK/7B,MAAO,CAAEhS,MAAO+tE,YACnB,6BAAClB,iBAAD,KACE,6BAACE,QAAD,KACE,6BAAC,cAAD,CAAM/6D,MAAO,CAAE1K,MAAO,2BACpB,6BAAC,iBAAD,CAAa0K,MAAO,CAAEhS,MAAO,GAAIQ,OAAQ,OAE3C,6BAACszC,OAAD,CACEtkB,KAAM,EACN8kB,YAAU,0BACVjvC,MAAO+pC,WACPF,YAAY,iBACZhB,SAAWT,OAAU6/B,cAAc7/B,MAAMtiC,OAAO9F,OAChD6M,IAAK87D,sBAGRnQ,aAAara,mBACZ,6BAAC,+BAAD,CACEzD,UAAWA,UACXjpB,WAAYA,WACZkpB,iBAAkBA,oBAGpB5Q,YACA,6BAAC,cAAD,CACEhQ,SAAS,kBACTwC,QAASusC,uBAAyB,aAAe,eACjD1uC,OAAK,EACLimB,MAAI,EACJ7mB,QAAS,KACP/H,WAAW,CAAE/C,aAAco6C,uBAAyB5X,QAAU,IAAM,CAAEh8B,iBAAiB,KAEzFvoB,MAAOq8D,sBACNF,uBAAyB,6BAAC,8BAAD,MAAe,6BAAC,8BAAD,OAG5C/+B,YACC,6BAAC,cAAD,CACEhQ,SAAS,oBACTK,OAAK,EACLimB,MAAI,EACJ1zC,MAAOq8D,qBACPxvC,QAAS,IAAMyuC,cAAc,KAC7B,6BAAC,eAAD,QAIN,oCAAKp7D,IAAKw7D,mBAAoB17D,MAAO,CAAE2K,SAAU,OAAQ3c,MAAO+tE,YAC7DK,mBACC,6BAAClB,WAAD,KACE,6BAAC,mBAAD,MACA,6BAACC,eAAD,2DAGF,6BAAC,MAAAoB,KAAD,CACEC,UAAU,4BAAgB,CACxBnR,sDACAja,8BACA5lD,SAAUqgE,aAAargE,UAAY,GACnCwhE,wDACA4C,sDACA5B,8DACA1c,kCACAvD,oBACAqhB,kCACAnd,8CACAqb,sDACA1b,gDACAC,oDACAoc,8CACAnc,oCACAC,sCACA/D,kCACAhgD,MAAO+tE,UACP3+B,wBAEF5uC,OAAQmtE,WACRc,WAAYhC,wBAGZn7D,OAAQ,KACRo9D,YAAY,EACZC,SAAWC,kBACJhM,qBACH9rC,WAAW,CAAE/C,aAAc66C,iBAAmB,CAAEr0C,iBAAiB,KAGrExG,aAAc6uC,oBAAsBrM,QAAU0X,gBAAgBxhD,QAC9DoiD,kBAAkB,EAClBC,aACE,6BAAC9B,cAAD,CAAeh7D,MAAOo9B,WAAa,CAAEpvC,MAAO,EAAGQ,OAAQ,EAAGmc,SAAU,UAAa,IAC/E,6BAAC,qBAAD,CACE9H,KAAK,eACL7C,MAAO,CAAEhS,MA7UN,GA6UiCQ,OA7UjC,gB,gKCmDZ,UAA0B,UACvCylD,UADuC,QAEvCI,QAFuC,SAGvCjnB,SAHuC,YAIvConB,YAJuC,cAKvCD,cALuC,SAMvCD,SANuC,cAOvCH,cAPuC,KAQvC32B,KARuC,mBASvCi3B,mBATuC,eAUvCpB,iBAGA,MAAMnX,UAAW,SAAA1oC,aACd4I,IACKm4C,eAAiBn4C,EAAEg+D,SACrB7lB,gBACSC,aAAep4C,EAAE2gE,OAC1BvoB,cAEAF,YAGJ,CAACE,YAAaD,cAAeD,WAE/B,IAAKL,UACH,OACE,6BAAC,cAAD,CACEH,aAAc,CAAEvG,UAAW,OAC3B3d,QAAS6kB,oBAAsB,cAC/Bf,MAAI,EACJjmB,OAAK,EACLuvC,WAAW,EACXh9D,MAAO,CACLxQ,SAAU,GACVggC,OAAQ,cACRhhC,OAAQisE,wBACRzsE,MAlHyB,GAmHzBwlD,QAAS,IAEX,6BAAC,qBAAD,OAKN,OACE,6BAACypB,QAAD,CACE36B,YAAWlV,SACXrtB,SAAU,EACVS,UAAYpE,IACI,UAAVA,EAAEzC,KACJuiC,SAAS9/B,IAGbywB,QAAUzwB,GAAkB8/B,SAAS9/B,IACrC,6BAACklD,MAAD,CAAOthD,MAAOk9D,UAAU,CAAE7oB,gBAAShB,8BAAgB71B,UAAM22B,kC,+GAjJ/D,mEACA,O,4WAAA,yBACA,iEACA,4DAEA,uCACA,sDACA,8C,4rBAEiC,EAEjC,MAAM1+B,cAAgB/f,6BAAOwrD,OAChBic,eAAiBznE,6BAAOm/C,W,kEACF,GAE5B,MAAMuoB,mBAAqB,CAChCC,OAAQ,CAAElnD,KAAM,SAAUqH,KAAM,IAChC8/C,MAAO,CAAEnnD,KAAM,QAASqH,KAAM,I,8CAGhC,MAAMy/C,QAAUltC,0BAAOzB,KAAM;WAPM;YASvBwmB;;;;;;;;0BAQcp/C,6BAAOo3B;;;EAK3Bw0B,MAAQvxB,0BAAOC,IAAK;;;;EAoB1B,SAASktC,WAAU,QACjB7oB,QADiB,eAEjBhB,eAFiB,cAGjBc,cAHiB,KAIjB32B,OAOA,MAAM+/C,aACJ//C,OAAS4/C,mBAAmBE,MAAMnnD,KAAOinD,mBAAmBE,MAAM9/C,KAAO4/C,mBAAmBC,OAAO7/C,KACrG,IAAIwP,OAAS,CAAEh/B,MAAOuvE,aAAc/uE,OAAQ+uE,aAAcrD,aAAcqD,aAAe,GAEvF,MAAM,aAAEC,aAAF,cAAgBC,eAAkBtpB,cACpC,CACEqpB,aAAcrpB,cACdspB,eAAe,sBAAUtpB,eACtB0J,SAAS,IACTgQ,eAEL,CAAE2P,aAAc/nD,cAAegoD,cAAeN,gBAE5C7nE,MAAQ+9C,eAAiBmqB,aAAeC,cAO9C,OALEzwC,OAAS,cAAH,GAAQA,OADZqnB,QACI,CAAgBqpB,WAAYpoE,OAE5B,CAAgBwU,OAAS,aAAYxU,QAGtC03B,S,oQCUM,UAA4B,SAAExhC,SAAF,MAAYi2B,QACrD,MAAMk8C,YAAcC,eAAen8C,OACnC,OAAOj2B,SAASmyE,cAlGlB,mCAGA,gCAQA,S,4WAAA,2B,oKAuBO,SAASE,WAAWttE,OAA2BgzB,SACpD,MAAMu6C,YAAqCv6C,QAAQA,QACnD,GAAkC,IAA9Bu6C,YAAY7pE,OAAO4b,OACrB,OAAOtf,OAET,IAAK,MAAM0D,UAAU6pE,YAAY7pE,OAAQ,CACvC,MAAMvB,MAAO,QAAAqrE,uBAAsB9pE,OAAQ6pE,YAAYvrC,OAAO5yB,OAExDq+D,QAAUztE,OAAO0tE,gBAAgBz6D,IAAI9Q,KAAKuQ,IAchD,GAXIhP,OAAO6vC,SAASvzC,OAAOyzC,oBACzBzzC,OAAOyzC,mBAAmB/vC,OAAO6vC,OAAO1gB,IAAI1wB,KAAKuQ,GAAIvQ,MAEjDsrE,SAAWA,QAAQ/pE,OAAO6vC,QAAU7vC,OAAO6vC,OAC7CvzC,OAAOyzC,mBAAmBg6B,QAAQ/pE,OAAO6vC,OAAOo6B,OAAOxrE,KAAKuQ,KAG9DpF,QAAQ06B,KAAK,4BAA6BtkC,aAI5B6Q,IAAZk5D,QAAuB,CACzB,MAAMG,SAAW,CACfz6B,YAAahxC,KAAKuB,OAAOyvC,YACzBvtB,KAAMzjB,KAAKuB,OAAOkiB,KAClBlT,GAAIvQ,KAAKuQ,GACTgrB,YAAav7B,KAAKu7B,YAClBmwC,QAAS1rE,KAAKu7B,YAAYqe,QAAQ,MAAO,IAAI2jB,eAEzCt9D,OAAQ,UAAA0rE,eAAc9tE,OAAO+tE,0BAA2BH,SAAU,eACxE5tE,OAAO+tE,0BAA0Bhe,OAAO3tD,MAAO,EAAGwrE,UAIpD5tE,OAAO0tE,gBAAgB76C,IAAI1wB,KAAKuQ,GAAIvQ,MAEtC,O,8ZAAA,IAAYnC,QAIP,SAASguE,2BACd,MAAO,CACLN,gBAAiB,IAAIp5D,IACrBy5D,0BAA2B,GAC3Bt6B,mBAAoB,CAClB,CAACw6B,aAAOr6B,IAAK,IAAIt/B,IACjB,CAAC25D,aAAOp6B,MAAO,IAAIv/B,IACnB,CAAC25D,aAAOn6B,OAAQ,IAAIx/B,IACpB,CAAC25D,aAAOl6B,OAAQ,IAAIz/B,MAKnB,SAAS+4D,eAAen8C,OAC7B,OAAO2E,SAASq4C,kBAAqC,CACnDl8C,OAAQ,CAACd,OACTi9C,QAASH,yBACTV,0B,6IC1EJ,gEACA,sDACA,sDAGA,iEACA,kEACA,6CACA,mCACA,2EACA,oE,sPAwBA,MAAMc,iBAAmBjgE,OAAOigE,kBAAoB,EAE9CC,iBAAmB,IAAIC,0BAAiBC,wBAAe,GAE7D,MAAM/iB,uBAAuBrwD,eAAMsvC,cAUjC3mC,YAAYlJ,OACV8vC,MAAM9vC,OADkB,+IALpB4zE,cAAKC,MAKe,6CAJF,IAIE,wCAHR,GAGQ,kDAFG,IAEH,+BAkBhB,KACR,GAAIplE,KAAKqlE,UACP,OAAOrlE,KAAKqlE,UAGd,IAAKrlE,KAAKzO,MAAM+zE,8BAA+B,sCAE7CtlE,KAAKqlE,UAAYL,iBAAiBO,uBAAuBvlE,KAAKwlE,KAC9DxlE,KAAKylE,iBAAkB,MAClB,CAEL,MAAM,cAAEC,cAAF,UAAiBC,YAAc,WAAAC,eACrC,IAAIC,uBAAwBF,WAC5B3lE,KAAKqlE,UAAYK,cACjB1lE,KAAKylE,iBAAkB,EAEzB,OAAOzlE,KAAKqlE,YAlCY,4BAoHlBS,UACN9lE,KAAK6M,OAASi5D,UArHU,yCAwHN5rE,cAClB,IAAK8F,KAAK6M,OACR,OAAO3C,QAAQG,aAAQa,GAGzB,MAAM66D,aAAe/lE,KAAK6M,OAAO4yC,wBACjC,GACE5d,MAAMt/B,QAAUwjE,aAAarrE,MAC7BmnC,MAAMt/B,QAAUwjE,aAAa11D,OAC7BwxB,MAAMv/B,QAAUyjE,aAAaplE,KAC7BkhC,MAAMv/B,QAAUyjE,aAAa31D,OAE7B,OAAOlG,QAAQG,aAAQa,GAGzB,MAAM86D,SAAW,CACfC,QAAQ,EACRvzE,EAAGmvC,MAAMt/B,QAAUwjE,aAAarrE,KAChC/H,EAAGkvC,MAAMv/B,QAAUyjE,aAAaplE,KAElC,OAAOX,KAAKkmE,UAAUC,KAAK,oBAAqB,CAAE98D,GAAIrJ,KAAKwlE,IAAK3jC,MAAOmkC,aA5I/C,iCAiJd9rE,UACV,MAAMksE,wBAA0BpmE,KAAKkmE,UAAUC,KAAK,YAAa,CAAE98D,GAAIrJ,KAAKwlE,MAC5ExlE,KAAKqmE,qBAAqBD,qBAnJF,iCAsJf,GAtJe,sCAuJT,MAvJS,sCAwJT,MAxJS,4CAyJH,GAzJG,gCA8PflsE,cACT,IAAK8F,KAAKzO,MAAM2wD,YAAYnvB,QAC1B,OAEF,MAAM,aAAEuzC,aAAF,aAAgBC,aAAhB,WAA8BC,aAAe,qBAAAC,kBAAiB5kC,MAAO7hC,KAAKzO,MAAM2wD,aAChFkkB,wBAA0BpmE,KAAKkmE,UAAUC,KAAK,SAAU,CAC5D98D,GAAIrJ,KAAKwlE,IACTtjB,YAAaliD,KAAKzO,MAAM2wD,YACxBokB,0BACAC,0BACAC,sBACAE,eAAgB,OAElB1mE,KAAK2mE,aACL3mE,KAAKqmE,qBAAqBD,qBA5QF,kCA+Qb,KACPpmE,KAAKzO,MAAM0sD,WACbj+C,KAAKzO,MAAM0sD,cAjRW,4CAqRFmoB,oBAClBpmE,KAAKzO,MAAMusD,qBAAuBsoB,mBACpCpmE,KAAKzO,MAAMusD,oBAAoBsoB,qBAvRT,gCA2RflsE,cACT,MAAM,QAAE+4B,SAAYjzB,KAAKzO,MACzB,IAAKyO,KAAK4mE,UAAY3zC,SAAWjzB,KAAK6M,OAAQ,CAC5C,MAAMg6D,KAAOhlC,MAAMY,cAAcgd,wBAG3BumB,SAAW,CAAEtzE,EAFTmvC,MAAMt/B,QAAUskE,KAAKnsE,KAET/H,EADZkvC,MAAMv/B,QAAUukE,KAAKlmE,KAG/BkhC,MAAMilC,UAEN7zC,QAAQ4O,YADgB7hC,KAAKkmE,UAAUC,KAAK,sBAAuB,CAAE98D,GAAIrJ,KAAKwlE,IAAK3jC,MAAOmkC,eAlS5FhmE,KAAKkmE,UAmCPthE,oBACE,MAAM,KAAEyO,KAAF,KAAQ5e,KAAR,QAAcg6B,QAAd,aAAuBozB,aAAvB,MAAqCztD,MAArC,OAA4CQ,QAAWoL,KAAKzO,MAElE,IAAKyO,KAAK6M,OAAOk6D,2BAEf,MAAM,IAAIrvE,MAAM,iFAGlBsI,KAAKgnE,4BAEL,IAAIvkD,KAAOziB,KAAK6M,QACX7M,KAAKzO,MAAM+zE,8BAA+B,wCAE7C7iD,KAAOziB,KAAK6M,OAAOk6D,8BAErB/mE,KAAKinE,MAAQxkD,KACbziB,KAAKkmE,UACFC,KACC,aACA,CACE1jD,UACApZ,GAAIrJ,KAAKwlE,IACTnyD,UACA5e,UACAg6B,gBACAozB,0BACAkjB,kCACA3wE,YACAQ,eAEF,CAAC6tB,OAEFyN,KAAMk2C,mBAAsBpmE,KAAKqmE,qBAAqBD,oBAG3D79D,qBACE,MAAM,KAAE9T,KAAF,QAAQg6B,QAAR,aAAiBozB,aAAjB,MAA+BztD,MAA/B,OAAsCQ,OAAtC,cAA8C8oD,eAAkB19C,KAAKzO,MAC3E,IAAI21E,cACJ,GAAIxpB,cAAe,CACjB,MAAMypB,iBAAmBzpB,gBACzBwpB,cAAgB/B,cAAKC,KACrBplE,KAAKonE,2BAA2BF,eAAiBC,iBAEnDnnE,KAAKkmE,UACFC,KAAK,SAAU,CACd98D,GAAIrJ,KAAKwlE,IACT/wE,UACAg6B,gBACAozB,0BACAztD,YACAQ,gBAEDs7B,KAAMk2C,oBACLpmE,KAAKqmE,qBAAqBD,qBAE3BiB,QAAQ,KACHrnE,KAAKonE,2BAA2BF,iBAClClnE,KAAKonE,2BAA2BF,wBACzBlnE,KAAKonE,2BAA2BF,kBAK/CliE,uBAGErH,OAAO06B,OAAOr4B,KAAKonE,4BAA4B98B,QAASg9B,UAAaA,YACrEtnE,KAAKonE,2BAA6B,GAE9BpnE,KAAKqlE,YACPrlE,KAAKqlE,UAAUc,KAAK,UAAW,CAAE98D,GAAIrJ,KAAKwlE,MAC1CxlE,KAAKqlE,UAAY,KAEbrlE,KAAKylE,iBACPT,iBAAiBuC,yBAAyBvnE,KAAKwlE,MA4CrDwB,4BACE,MAAM,UAAEQ,WAAcxnE,KAAKzO,MAAMk2E,WAC3BC,cAAgB,IAAIC,kBAAOC,QAAQ5nE,KAAK6M,QAC9C66D,cAAc79C,IAAI,IAAI89C,kBAAOE,OAC7BH,cAAc79C,IAAI,IAAI89C,kBAAOG,IAAI,CAAEN,uBAEnC,MAAMO,iBAAmB7tE,cACvB,GAAK8F,KAAKzO,MAAMk2E,WAAW10C,SAGA,MAAvB/yB,KAAKgoE,gBAAiD,MAAvBhoE,KAAKioE,eAAwB,CAC9D,MAAMr5D,OAASizB,MAAMjzB,OAAS5O,KAAKgoE,eAC7Bn5D,OAASgzB,MAAMhzB,OAAS7O,KAAKioE,eACnCjoE,KAAKgoE,eAAiBnmC,MAAMjzB,OAC5B5O,KAAKioE,eAAiBpmC,MAAMhzB,OAC5B,MAAMu3D,wBAA0BpmE,KAAKkmE,UAAUC,KAAK,QAAS,CAC3D98D,GAAIrJ,KAAKwlE,IACTiC,WAAYznE,KAAKzO,MAAMk2E,WACvB74D,cACAC,gBAEF7O,KAAK2mE,aACL3mE,KAAKqmE,qBAAqBD,qBAI9BsB,cAAcQ,GAAG,WAAarmC,QAC5B7hC,KAAK4mE,UAAW,EAChB5mE,KAAKgoE,eAAiB,EACtBhoE,KAAKioE,eAAiB,EACtBF,iBAAiBlmC,SAEnB6lC,cAAcQ,GAAG,UAAWH,kBAC5BL,cAAcQ,GAAG,SAAU,KACzBloE,KAAKgoE,eAAiB,KACtBhoE,KAAKioE,eAAiB,KACtBjoE,KAAKkmE,UAAUC,KAAK,gBAAiBnmE,KAAKwlE,KAC1C2C,WAAW,KACTnoE,KAAK4mE,UAAW,GACf,OAML,MAAMwB,YAAcluE,UAClB,IAAK8F,KAAKzO,MAAMk2E,WAAW10C,QACzB,OAEF,MAAMo3B,KAAQ,EAAInqD,KAAKqoE,qBAAwB7lE,EAAErP,MAC3C0zE,KAAOrkE,EAAEjD,OAAOkgD,wBAGhBzR,OAAS,CACbt7C,EAHc8P,EAAEwrC,OAAOt7C,EAAIm0E,KAAKnsE,KAIhC/H,EAHc6P,EAAEwrC,OAAOr7C,EAAIk0E,KAAKlmE,KAO5BjO,EAAIxB,KAAKsrE,IAAIh6D,EAAE8lE,SAAS,GAAG/lE,QAAUC,EAAE8lE,SAAS,GAAG/lE,SACnD5P,EAAIzB,KAAKsrE,IAAIh6D,EAAE8lE,SAAS,GAAGhmE,QAAUE,EAAE8lE,SAAS,GAAGhmE,SAGnD0Y,EAAItoB,EAAIC,EACd,IAAI41E,GAEFA,GADEvtD,EAAI,IAAOA,EAAI,IACZ,KACItoB,EAAIC,EACR,IAEA,IAIPqN,KAAKqoE,qBAAuB7lE,EAAErP,MAE9B,MAAMizE,wBAA0BpmE,KAAKkmE,UAAUC,KAAK,SAAU,CAC5D98D,GAAIrJ,KAAKwlE,IACTtjB,YAAaliD,KAAKzO,MAAM2wD,YACxBokB,aAAcnc,KACdoc,aAAcpc,KACdqc,WAAYx4B,OACZ04B,eAAgB6B,KAElBvoE,KAAK2mE,aACL3mE,KAAKqmE,qBAAqBD,oBAG5BsB,cAAcQ,GAAG,aAAc,KAC7BloE,KAAKqoE,qBAAuB,IAE9BX,cAAcQ,GAAG,QAASE,aAC1BV,cAAcQ,GAAG,WAAa1lE,IAC5B4lE,YAAY5lE,GACZxC,KAAKqoE,qBAAuB,EAC5BroE,KAAKkmE,UAAUC,KAAK,iBAAkB,CAAE98D,GAAIrJ,KAAKwlE,QA+CrDt/D,SACE,MAAM,OAAEtR,OAAF,MAAUR,MAAV,GAAiBiV,IAAOrJ,KAAKzO,MAEnC,OACE,uCACE+U,IAAKtG,KAAKwoE,KACV5zE,OAAQA,OAASmwE,iBACjB3wE,MAAOA,MAAQ2wE,iBACf17D,GAAIA,GACJo/D,QAASzoE,KAAK0oE,SACdz1C,QAASjzB,KAAK2oE,SACdviE,MAAO,CAAEhS,YAAOQ,kB,gBA9TlButD,e,eAekB,CACpBlB,OAAQ,CACN3N,SAAS,EACT98C,SAAU,UAEZ6c,KAAM,WACNze,OAAQ,IACRR,MAAO,IACPq6B,QAAS,GACTyzB,YAAa,CAAEx6B,KAAM,KAAMqL,SAAS,EAAM61C,YAAa,EAAGC,MAAO,IACjEpB,WAAY,CAAE//C,KAAM,KAAMqL,SAAS,EAAM81C,MAAO,GAAIrB,UAAW,M,aA2SpDrlB,e,+JCtOR,SACL2mB,QACAC,cACA7mB,YACAokB,aACAC,aACAC,WACAE,gBAEA,MAAMsC,GAAKD,cAAcE,UAEpBzC,aACHA,WAAa,CACX9zE,GAAIs2E,GAAGtuE,KAAOsuE,GAAG34D,OAAS,EAC1B1d,GAAIq2E,GAAGroE,IAAMqoE,GAAG54D,QAAU,IAI9B,GAAI8xC,YAAYnvB,QAAS,CACvBm2C,qBAAqBJ,QAASC,eAE9B,MAAMvqB,SAAW0D,YAAYx6B,KAG7B,IAAIyhD,UAGFA,UAFuB,OAArBjnB,YAAYx6B,WAA+Bxc,IAAdi+D,UAEnBzC,eAGA,KAGd/oE,OAAOwtC,KAAK49B,cAAchrB,QAAQzT,QAAS8+B,WACzC,MAAMj2E,MAAQ41E,cAAchrB,OAAOqrB,UAC/Bj2E,MAAMk2E,gBAAkBC,iBAAiB9qB,SAAU,MAAQ8qB,iBAAiBH,UAAW,KACzFI,UAAUp2E,MAAOmzE,aAAcE,WAAYtkB,YAAa4mB,UAC9C31E,MAAMk2E,gBAAkBC,iBAAiB9qB,SAAU,MAAQ8qB,iBAAiBH,UAAW,MACjGI,UAAUp2E,MAAOozE,aAAcC,WAAYtkB,YAAa4mB,WAI5DC,cAAc53D,OAAO,K,uBAIlB,SAAwB23D,SAC7BU,6BAA6BV,SAAW,G,cAyEnC,SACLA,QACAC,cACAtB,WACA74D,OACAC,QAGA,GADAq6D,qBAAqBJ,QAASC,eAC1BtB,WAAW10C,QAAS,CACtB,MAAM02C,QAAUhC,WAAW//C,KAE3B/pB,OAAOwtC,KAAK49B,cAAchrB,QAAQzT,QAAS8+B,WACzC,MAAMj2E,MAAQ41E,cAAchrB,OAAOqrB,UAC/Bj2E,MAAMk2E,gBAAkBC,iBAAiBG,QAAS,MAAmB,IAAX76D,OAC5D86D,SAASv2E,MAAOyb,OAAQ64D,WAAYqB,UAC1B31E,MAAMk2E,gBAAkBC,iBAAiBG,QAAS,MAAmB,IAAX56D,QACpE66D,SAASv2E,MAAO0b,OAAQ44D,WAAYqB,WAIxCC,cAAc53D,OAAO,K,sBAIlB,SAAuB23D,SAC5Ba,4BAA4Bb,SAAW,G,kBAGlC,SAAmBA,QAAiBC,eACzCG,qBAAqBJ,QAASC,eAC9B,MAAMa,gBAAkBC,yBAAyBf,SACjDnrE,OAAOwtC,KAAK49B,cAAchrB,QAAQzT,QAAS8+B,WACzC,MAAMj2E,MAAQ41E,cAAchrB,OAAOqrB,UAC7BU,YAAc32E,MAAMs7B,QAAQs7C,KAC5BC,YAAc72E,MAAMs7B,QAAQiyB,MAE9BkpB,gBAAgBz2E,MAAMkW,KACpBygE,cACFA,YAAY90E,IAAM40E,gBAAgBz2E,MAAMkW,IAAI0gE,KAAK/0E,IACjD80E,YAAYpmD,IAAMkmD,gBAAgBz2E,MAAMkW,IAAI0gE,KAAKrmD,KAG/CsmD,cACFA,YAAYh1E,IAAM40E,gBAAgBz2E,MAAMkW,IAAIq3C,MAAM1rD,IAClDg1E,YAAYtmD,IAAMkmD,gBAAgBz2E,MAAMkW,IAAIq3C,MAAMh9B,OAGhDomD,qBACKA,YAAY90E,WACZ80E,YAAYpmD,KAGjBsmD,qBACKA,YAAYh1E,WACZg1E,YAAYtmD,QAKzBqlD,cAAc53D,U,yBAKT,SAA0B0wB,MAA+CqgB,aAC9E,MAAM2kB,KAAOhlC,MAAMY,cAAcgd,wBAC3BwqB,QAAUpoC,MAAMt/B,QAAUskE,KAAKnsE,KAC/BwvE,QAAUroC,MAAMv/B,QAAUukE,KAAKlmE,IAE/BqtC,OAAS,CAAEt7C,EAAGu3E,QAASt3E,EAAGu3E,SAEhC,IAAIC,aAAejoB,YAAY2mB,MAE3BhnC,MAAMhzB,QAAU,IAClBs7D,cAAgBA,cAIdtoC,MAAMuoC,YACRvoC,MAAMlP,iBAGR,MAAO,CACL2zC,aAAc,EAAI6D,aAClB5D,aAAc,EAAI4D,aAClB3D,WAAYx4B,S,uBAIT,SAAwB+6B,eAC7B,OAAOprE,OAAOwtC,KAAK49B,cAAchrB,QAAQ70C,IAAKkgE,WAC5C,MAAMj2E,MAAQ41E,cAAchrB,OAAOqrB,UACnC,IAAIp0E,IAAK0uB,IAET,MAAMomD,YAAc32E,MAAMs7B,QAAQs7C,KAC5BC,YAAc72E,MAAMs7B,QAAQiyB,MAUlC,OATIopB,cACF90E,IAAM80E,YAAY90E,IAClB0uB,IAAMomD,YAAYpmD,KAEhBsmD,cACFh1E,IAAMg1E,YAAYh1E,IAClB0uB,IAAMsmD,YAAYtmD,KAGb,CAAEra,GAAIlW,MAAMkW,GAAIrU,QAAK0uB,YAvWhC,I,IAAA,Y,IAAA,4B,iCAoBA,MAAM8lD,6BAA+B,GA4CrC,SAASa,mBAAmBl3E,MAAO2Q,KAAMkqC,OAAQkU,aAC/C,MAAMyc,MAAQxrE,MAAMuwB,IAAMvwB,MAAM6B,IAC1Bs1E,QAAU3L,OAAS76D,KAAO,GAE1BymE,YAAcp3E,MAAMk2E,eAAiBr7B,OAAOt7C,EAAIs7C,OAAOr7C,EACvD63E,YAAcr3E,MAAMs3E,iBAAiBF,aAAep3E,MAAM6B,KAAO2pE,MAGjE+L,SAAWJ,QAAUE,WACrBG,SAAWL,SAHE,EAAIE,YAKvBr3E,MAAMs7B,QAAQiyB,MAAM1rD,IAAM7B,MAAM6B,IAAM01E,SACtCv3E,MAAMs7B,QAAQiyB,MAAMh9B,IAAMvwB,MAAMuwB,IAAMinD,SAiBxC,MAAMC,cAAgB,CACpBC,SAxEF,SAA2B13E,MAAO2Q,KAAMkqC,OAAQkU,YAAa4mB,SAC3D,MAAMgC,OAAS33E,MAAM43E,MAAMt2E,KAAKq2E,OAChC,IAAIE,SAAW73E,MAAM63E,SACrB,MAAMC,eAAiBH,OAAO70D,OAAS,EACvC,IAAIi1D,SAAW/3E,MAAM+3E,SACrB,MAAMtC,YAAc1mB,YAAY0mB,YAC1BuC,YAAch4E,MAAMk2E,eAAiBl2E,MAAMuH,KAAOvH,MAAMiB,MAAQ,EAAIjB,MAAMwN,IAAMxN,MAAMyB,OAAS,EAC/Fw2E,cAAgBj4E,MAAMk2E,eAAiBr7B,OAAOt7C,EAAIs7C,OAAOr7C,EAE/D62E,6BAA6BV,SAAWU,6BAA6BV,UAAY,EACjFU,6BAA6BV,SAC3BhlE,KAAO,EAAI0lE,6BAA6BV,SAAW,EAAIU,6BAA6BV,SAAW,EAE7F53E,KAAKsrE,IAAIgN,6BAA6BV,UAAYF,cAChDY,6BAA6BV,SAAW,GACtCsC,eAAiBD,YACfH,UAAY,EACdE,SAAWh6E,KAAK8D,IAAIi2E,eAAgBC,SAAW,GAE/CF,SAAW95E,KAAKwyB,IAAI,EAAGsnD,SAAW,GAE3BI,cAAgBD,cACrBD,UAAYD,eACdD,SAAW95E,KAAKwyB,IAAI,EAAGsnD,SAAW,GAElCE,SAAWh6E,KAAK8D,IAAIi2E,eAAgBC,SAAW,IAGnD1B,6BAA6BV,SAAW,GAC/BU,6BAA6BV,SAAW,IAC7CsC,eAAiBD,YACnBH,SAAWA,SAAWE,SAAYF,SAAW95E,KAAK8D,IAAIk2E,SAAUF,SAAW,GAAMA,SACxEI,cAAgBD,cACzBD,SAAWA,SAAWF,SAAYE,SAAWh6E,KAAKwyB,IAAIsnD,SAAUE,SAAW,GAAMA,UAEnF1B,6BAA6BV,SAAW,GAE1C31E,MAAMs7B,QAAQiyB,MAAM1rD,IAAM81E,OAAOE,UACjC73E,MAAMs7B,QAAQiyB,MAAMh9B,IAAMonD,OAAOI,YAmCnCnB,KAhBF,SAAuB52E,MAAO2Q,KAAMkqC,OAAQkU,aAC1CmoB,mBAAmBl3E,MAAO2Q,KAAMkqC,QAEhC,MAAMvf,QAAUt7B,MAAMs7B,QAClBA,QAAQs7C,OACNt7C,QAAQs7C,KAAK/0E,MACfy5B,QAAQs7C,KAAK/0E,IAAMy5B,QAAQiyB,MAAM1rD,KAE/By5B,QAAQs7C,KAAKrmD,MACf+K,QAAQs7C,KAAKrmD,IAAM+K,QAAQiyB,MAAMh9B,OAQrC2nD,OAAQhB,mBACRiB,YAAajB,oBAGf,SAASd,UAAUp2E,MAAO2Q,KAAMkqC,OAAQkU,YAAa4mB,SACnD,MAAMhvE,GAAK8wE,cAAcz3E,MAAMkgB,MAC3BvZ,IACFA,GAAG3G,MAAO2Q,KAAMkqC,OAAQkU,YAAa4mB,SAIzC,MAAMe,yBAA2B,GAEjC,SAASX,qBAAqBJ,QAAiBiC,OAC7ClB,yBAAyBf,SAAWe,yBAAyBf,UAAY,GACzEnrE,OAAOwtC,KAAK4/B,MAAMhtB,QAAQzT,QAAS8+B,WACjC,MAAMj2E,MAAQ43E,MAAMhtB,OAAOqrB,UACtBS,yBAAyBf,SAAS31E,MAAMkW,MAC3CwgE,yBAAyBf,SAAS31E,MAAMkW,KAAM,sBAAUlW,MAAMs7B,YAGlE9wB,OAAOwtC,KAAK0+B,yBAAyBf,UAAUx+B,QAASvqC,MACjDgrE,MAAMhtB,OAAOh+C,aACT8pE,yBAAyBf,SAAS/oE,OAK/C,SAASupE,iBAAiB5hD,KAAMljB,KAC9B,YAAa0G,IAATwc,MAEuB,iBAATA,OACc,IAAvBA,KAAKojB,QAAQtmC,KA0DxB,MAAMmlE,4BAA8B,GA2BpC,SAAS4B,kBAAkBp4E,MAAOq4E,MAAO/D,YACvC,MAAMgE,SAAWt4E,MAAMs7B,QAAQiyB,MACzBgrB,UAAYv4E,MAAM6B,IAClB22E,QAAUx4E,MAAMuwB,IACtB,IAAIkoD,OAASz4E,MAAMs3E,iBAAiBt3E,MAAM04E,iBAAiBH,WAAaF,OACpEM,OAAS34E,MAAMs3E,iBAAiBt3E,MAAM04E,iBAAiBF,SAAWH,OAEtEI,OAASA,OAAOG,QAAUH,OAAOG,UAAYH,OAC7CE,OAASA,OAAOC,QAAUD,OAAOC,UAAYD,OAC7CL,SAASz2E,IAAM42E,OACfH,SAAS/nD,IAAMooD,OAiBjB,MAAME,aAAe,CACnBnB,SArDF,SAA0B13E,MAAOq4E,MAAO/D,WAAYqB,SAClD,MAAMgC,OAAS33E,MAAM43E,MAAMt2E,KAAKq2E,OAC1BG,eAAiBH,OAAO70D,OAAS,EACjCg2D,UAAY/6E,KAAKwyB,IAAIvwB,MAAMutD,MAAMzqC,OAAQ,GACzCi2D,SAAWzE,WAAWoB,MAC5B,IAAImC,SAAW73E,MAAM63E,SACrB,MAAMpiC,KAAO13C,KAAKk1D,MAAMjzD,MAAMiB,OAAS63E,UAAYC,WAEnDvC,4BAA4Bb,SAAWa,4BAA4Bb,UAAY,EAC/Ea,4BAA4Bb,UAAY0C,MAExCR,SACErB,4BAA4Bb,SAAWlgC,KACnC13C,KAAKwyB,IAAI,EAAGsnD,SAAW,GACvBrB,4BAA4Bb,UAAYlgC,KACxC13C,KAAK8D,IAAIi2E,eAAiBgB,UAAY,EAAGjB,SAAW,GACpDA,SACNrB,4BAA4Bb,SAAWkC,WAAa73E,MAAM63E,SAAW,EAAIrB,4BAA4Bb,SAErG,MAAMoC,SAAWh6E,KAAK8D,IAAIi2E,eAAgBD,SAAWiB,UAAY,GAEjE94E,MAAMs7B,QAAQiyB,MAAM1rD,IAAM81E,OAAOE,UACjC73E,MAAMs7B,QAAQiyB,MAAMh9B,IAAMonD,OAAOI,WAgCjCnB,KAhBF,SAAsB52E,MAAOq4E,MAAO/D,YAClC8D,kBAAkBp4E,MAAOq4E,OAEzB,MAAM/8C,QAAUt7B,MAAMs7B,QAClBA,QAAQs7C,OACNt7C,QAAQs7C,KAAK/0E,MACfy5B,QAAQs7C,KAAK/0E,IAAMy5B,QAAQiyB,MAAM1rD,KAE/By5B,QAAQs7C,KAAKrmD,MACf+K,QAAQs7C,KAAKrmD,IAAM+K,QAAQiyB,MAAMh9B,OAQrC2nD,OAAQE,kBACRD,YAAaC,mBAGf,SAAS7B,SAASv2E,MAAOq4E,MAAO/D,WAAYqB,SAC1C,MAAMhvE,GAAKkyE,aAAa74E,MAAMkgB,MAC1BvZ,IACFA,GAAG3G,MAAOq4E,MAAO/D,WAAYqB,W,6IC1QjC,8DAEA,kE,gGAE+C,oBAC7C,KACE,IAEEjmE,SAASy8C,cAAc,UAAUynB,6BACjC,MAAOn8D,OAOP,OANA,6BACE,oHACA,GACA,MACA,SAEK,EAET,OAAO,I,uKClBX,iEACA,0DAEA,sDACA,mC,sQAOe,MAMbnQ,YAAY0xE,UAAgBC,gBAAwB,mLAClDpsE,KAAKqsE,WAAaF,UAClBnsE,KAAKssE,gBAAkBF,eACvBpsE,KAAKusE,cAAgB,IAAI5wE,MAAMywE,gBAC/BpsE,KAAKwsE,cAAgB,IAAI94E,IAG3B+4E,uBAAuBpjE,IACrB,OAAOrJ,KAAKusE,cAAcplC,KAAMulC,aAAgBA,aAAeA,YAAYC,YAAY7kD,SAASze,KAGlGk8D,uBAAuBl8D,IACrB,GAAIrJ,KAAKwsE,cAAcroE,IAAIkF,IACzB,MAAM,IAAI3R,MAAM,8CAKlB,GAHAsI,KAAKwsE,cAAc3iD,IAAIxgB,IAEIrJ,KAAKusE,cAActtD,OAAO+zB,SAAS/8B,OACrCjW,KAAKssE,gBAAiB,CAC7C,MAAMM,OAAS,IAAI5sE,KAAKqsE,WAClBQ,IAAM,IAAIC,aAAIF,SACpB,YAAAG,gCAA+BF,KAE/B,MAAMG,YAAa,sBAAUhtE,KAAKusE,cAAgB75E,IAAOA,GAEzD,OADAsN,KAAKusE,cAAcS,YAAc,CAAEJ,cAAQC,QAAKF,YAAa,CAACtjE,KACvDwjE,IAET,MAIMH,aAJ6B,mBACjC1sE,KAAKusE,cAActtD,OAAO+zB,SACzB05B,aAAgBA,aAAeA,YAAYC,YAAY12D,QAEX,GAE/C,OADAy2D,YAAYC,YAAYnyC,KAAKnxB,IACtBqjE,YAAYG,IAGrBtF,yBAAyBl+D,IACvB,IAAKrJ,KAAKwsE,cAAcroE,IAAIkF,IAC1B,MAAM,IAAI3R,MAAM,sCAElBsI,KAAKwsE,cAAclI,OAAOj7D,IAE1B,MAAM4jE,kBAAmB,sBACvBjtE,KAAKusE,cACJG,aAAgBA,aAAeA,YAAYC,YAAY7kD,SAASze,KAE7DqjE,YAAc1sE,KAAKusE,cAAcU,kBACnCA,kBAAoB,GAAKP,cAC3BA,YAAYC,YAAcD,YAAYC,YAAY1tD,OAAQumD,KAAQA,MAAQn8D,IACnC,IAAnCqjE,YAAYC,YAAY12D,SAC1BjW,KAAKusE,cAAcU,uBAAoB/hE,EACvCwhE,YAAYE,OAAOM,iB,0JCxDpB,SAAqCx7C,MAC1C,OAAQr0B,MAAM6T,OAAO43B,WAAWpX,KAAKj4B,U,mKCbvC,I,IAAA,Y,IAAA,2B,0DAEgC,CAC9B2L,KAAM,CACJ69C,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAETv3B,IAAK,CACHqN,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAETvqB,KAAM,CACJK,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAET/pB,UAAW,CACTH,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAETrqB,OAAQ,CACNG,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAETjqB,KAAM,CACJD,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAEThqB,MAAO,CACLF,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAETnqB,OAAQ,CACNC,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAETpqB,OAAQ,CACNE,KAAM,UACNJ,OAAQ,UACRsqB,MAAO,WAIJ,MAAMtnB,MAAO,sBAAW,mBAAkB3B,c,yJC7ClC,SAAmB3xD,MAAY+c,KAAS89D,UAA6B7mE,KAAOA,KAAO+I,OAChG,MAAM+9D,UAAW,UAAA/iE,QAAO/X,MAAO66E,WAC3BC,SAASp3D,SAAW1jB,MAAM0jB,QAC5Bo3D,SAAS7yC,KAAKlrB,MAEhB,OAAO+9D,UAVT,oC,sICmDe,UAA+B,KAAE9wD,KAAF,SAAQ+wD,WACpD,MAAM,sBAAEp4C,sBAAF,yBAAyB0B,2BAA6B,uCAEtD22C,OADiC,oBAAA7mC,2CAA0CxR,uBACZ3Y,OAAS,GAE9E,GAAqB,IAAjBgxD,MAAMt3D,OACR,OAAO,KAGT,MAAMu3D,UAAYF,SAAW,CAAEx4C,WAAY,EAAGiT,YAAa,GAAM,GAG3D0lC,SACJ,oBAACC,MAAD,CAAOtnE,MAAOonE,WACXD,MAAMrkE,IAAI,EAAG2e,YAAO+M,4BAAerY,KAAMoxD,0BAA4Bj5D,MAElE,oBAACk5D,UAAD,CAAW7tE,IAAK2U,IAAKtO,MAAOonE,WAC1B,oBAAC,gBAAD,CACEK,QAAM,EACNh6C,OAAK,EACLztB,MAAO,CAAE0nE,WAAY,GACrB76C,QAAS,KACP,MAAM86C,yBAA2B74C,sBAAsBjW,OACpD0V,wBAEGA,qBAAqB9M,QAAUA,QAC/B,UAAA4Y,SAAQ9L,qBAAqBC,cAAeA,gBAC5CD,qBAAqBpY,OAASoxD,2BAGpC/2C,yBAAyBm3C,4BAb7B,UAiBA,oBAACC,eAAD,KACGnmD,MADH,IACU,oBAAC,OAAAwO,MAAD,MAAQ,oBAAA9G,SAAQqF,oBAOpC,GAAI04C,SACF,OACE,oBAACW,eAAD,KACE,yBAAG7nE,MAAO,CAAEsyD,UAAW,EAAG5kB,WAAY,QAAtC,+HAIC25B,UAKP,OACE,oBAAC,OAAA13C,oBAAD,KACE,oBAAC,uBAAD,CACEC,QACE,0CACS,oBAAC,OAAAk4C,mBAAD,CAAoB3xD,KAAMA,QAGrCoY,qBAAsB44C,MAAM,IAC3B,IAAM,oBAACY,MAAD,CAAOzlC,YAAU,eAAe+kC,aAlH/C,mCACA,M,4WAAA,yBACA,iEAEA,4CACA,4EACA,iCACA,iEACA,yDACA,+D,kFAEA,MAAMU,MAAQh4C,0BAAOK,IAAK;sBACJ16B,sBAAO26B;;;;;;;;EAUvBw3C,eAAiB93C,0BAAO2e,GAAI;;EAI5B44B,MAAQv3C,0BAAOglB,EAAG;;EAIlByyB,UAAYz3C,0BAAOilB,EAAG;;;;;;EAQtB4yB,eAAiB73C,0BAAOC,IAAK;;;;;;yICepB,UAAuB,MAAEhwB,MAAF,SAASxU,SAAT,qBAAmB+iC,qBAAnB,QAAyCqB,UAC7E,MAAOo4C,OAAQn4C,WAAankC,MAAMyB,UAAkB,GACpD,OACE,wCACE,oBAAC86E,eAAD,KACE,oBAAC,qBAAD,CACE76C,SAAW,UAASmB,qBAAqBpY,KACzC/lB,SAAS,QACTkkD,SAAU,IAAMzkB,WAAWm4C,QAC3BA,OAAQA,QACR,oBAACp0B,aAAD,KACE,oBAAC,cAAD,CACEF,MAAI,EACJI,aAAc,CACZxG,SAAU1d,SACR,0DACyB,oBAAC,OAAAk4C,mBAAD,CAAoB3xD,KAAMoY,qBAAqBpY,UAI5E,oBAAC,wBAAD,CAAoB4W,UAAU,kBAC9B,oBAAC,qBAAD,CAAiBA,UAAU,kBAG/B,gCAAOvhC,SAAS,CAAEqkC,oBAAWtB,+CAGjC,oBAAC,OAAAu5C,mBAAD,CAAoB3xD,KAAMoY,qBAAqBpY,KAAM+xD,aAAW,MAhFtE,sEACA,+DACA,M,4WAAA,yBACA,iEAGA,iCACA,6DACA,sD,kFAEA,MAAMD,eAAiBl4C,0BAAOC,IAAK;;;;EAM7B4jB,aAAe7jB,0BAAOC,IAAK;;;;;;;;;;;;;;;;;;;;;;;;;wKCjBjC,4EACA,kEACA,+DACA,6DACA,wEACA,wEACA,+BACA,uDACA,+BACA,sEACA,iEAEA,gCACA,kDACA,6DACA,+DACA,4DACA,oEACA,iCACA,2DACA,6DACA,uDACA,sDAEA,oEACA,mDAIA,gEACA,4DAIA,oDACA,yDACA,+DACA,yDACA,mCACA,4DAGA,yCACA,oC,8jCAE+B,mBAe/B,MAAMm4C,kBAAqBz9B,KAAQn1C,MAAMo7C,QAAQjG,MAAgD,IAAxCA,IAAI7xB,OAAQrmB,GAAW,MAALA,GAAWqd,OAChFu4D,yBAA4B/5E,MACzB85E,kBAAkB95E,OAA4B,iBAAZA,KAAK,GAAkBA,KAAK,GAAKA,KAG5E,SAASuwB,YAAYzzB,OACnB,MAAM,OAAEy5B,OAAF,WAAUE,WAAV,iBAAsB8D,kBAAqBz9B,OAC3C,UAAEk9E,UAAF,WAAaC,WAAb,cAAyBC,cAAzB,YAAwCC,YAAxC,uBAAqDplB,wBAA2Bx+B,QAChF,OAAErC,OAAF,UAAU2D,YAAc,YAAAG,qBAExBoiD,cAAyB,SAAA7iD,SAAQ,KAAM,yBAAayiD,WAAY,CAACA,YACjE5mD,OAAgB,SAAAmE,SAAQ,IAAM6iD,cAAgBlmD,OAAOwe,KAAK,EAAG5qB,aAAWA,OAASsyD,aAAar1C,WAAY,CAC9Gq1C,aACAlmD,SAEImmD,mBAA+C,SAAA9iD,SACnD,KACE,GAAKnE,OAAUgnD,aAGf,OAAO,2BAAA78B,oBAAkB,2BAAAvC,uBAAsBnjB,WAAWzE,MAAM4B,UAAWolD,aAAaz/B,aACrFU,eAEL,CAACxjB,UAAWzE,MAAOgnD,gBAIdE,UAAWC,eAAgB,SAAAz7E,WAAS,IACpC07E,eAAgBC,oBAAqB,SAAA37E,UAAS,IAAM,IAAIG,KAEzD8lC,WAAYq1C,wBAAA,EAAAA,aAAcr1C,YAAa,GACvC21C,iBAAkB,YAAAliC,oBAAmB,CAAEtkB,OAAQ,CAAC6Q,WAAYiT,YAAa,IAAKjT,WAC9EqX,+BAAgC,oCAAAzC,kCAAiC,CAACqgC,YAClEW,YAAcD,gBAAgBA,gBAAgBl5D,OAAS,IACtDo5D,YAAaC,aAAe,CACjCF,aAAe,CAAEzlD,QAASylD,YAAaz/B,YAAakB,8BAA8B49B,UAAWW,cAAgB,KAC7G,4BAAAG,0BAAyBd,YAErBe,cAAe,4BAAAD,0BAAyBX,YAAcD,cAAgB,IAEtEc,mBAAqBb,aAvDE,qBAuDaF,WACpCgB,SAAWD,mBAAqBJ,YAAcC,YAC9CK,SAAWF,mBAAqBH,YAAcE,aAE9CI,mBAAoB,SAAAh2E,aACvBi2E,eACC3kD,WAAW,CAAEujD,UAAWoB,gBAE1B,CAAC3kD,aAGG4kD,uBAAwB,SAAAl2E,aAC3Bm2E,mBACC7kD,WAAW,CAAEyjD,cAAeoB,oBAE9B,CAAC7kD,aAGG8kD,cAAe,SAAAp2E,aACnB,KACEsxB,WAAW,CAAE0jD,aAAcA,eAE7B,CAACA,YAAa1jD,aAGV+kD,mBAAoB,SAAAr2E,aACxB,KACEs1E,kBAAkB,IAAIx7E,KACtBs7E,cAAcD,YAEhB,CAACA,YAGGmB,cAAe,SAAAt2E,aAClBu2E,UAEC,MAAMpwE,IAAMowE,QAAQ5pC,KAAK,KACnB6pC,mBAAqB,IAAI18E,IAAIu7E,gBAC/BmB,mBAAmBjsE,IAAIpE,MACzBqwE,mBAAmB9L,OAAOvkE,KAC1BmvE,kBAAkBkB,sBAElBA,mBAAmBvmD,IAAI9pB,KACvBmvE,kBAAkBkB,qBAEpBpB,aAAa,OAEf,CAACC,iBAGGoB,eAAgB,SAAAz2E,aACpB,CACEk2C,cACAr7C,KACAk7C,YACAjb,MACAwP,aACGosC,UAEH,6BAAC,4BAAD,CAAoBn9C,UAAWC,qBAAOm9C,aACnC,EAAGC,0BAEF,MAAMC,aAAsB,UAAArnE,MAAKknE,SACjC,IAAII,YAKAjgC,aACJ,GALI+/B,YAAc1gC,gBAChB4gC,aAAc,0BAAAC,wBAAuBl8E,KAAKg8E,aAAc3gC,cAAewgC,QAAQ3gD,MAAM,GAAI,GAAG2W,YAI1FwJ,cAAe,CACjB,MAAM8gC,oBAAqB,0BAAAC,yBACzB/gC,cACAwgC,QACG3gD,MAAM,GAAI,GACV2W,UACAC,KAAK,MAEV,GAAIqqC,mBAAoB,CACtB,MAAMzwC,MAAQmwC,QAAQ,GACtB,GAAqB,iBAAVnwC,MAAoB,CAC7B,MAAM2wC,aAAc,aAAAlgC,8BAA6BtkB,WAC3C7C,SAAWmnD,mBAAmBnnD,SAChCqnD,YAAYrnD,WAAaqnD,YAAYrnD,UAAU0W,QAAU2wC,YAAYrnD,UAAU0W,OAAO+D,aACxFuM,aAAeqgC,YAAYrnD,UAAU0W,OAAO+D,cAKpD,MAAM6sC,SAAmBphC,YAAY8gC,aAAa/+C,KAClD,IAAIs/C,UAAYt8C,MAGZu8C,oBAAsB,GAa1B,OAZI37C,YAAYC,OAAO2O,aAErB+sC,oBAAuB,IAAG/sC,UAAUjuB,YAAYiuB,UAAUvU,MAAM,EAAGuhD,iCAA0B3qC,KAAK,QAEhGrC,UAAUjuB,QAAUi7D,gCAA2B,QAAU,OAG3DF,UAAY9sC,UAAUzpC,YAAY8hB,MAEhCk0B,eACFugC,UAAa,GAAEA,cAAcvgC,iBAG7B,yCACE,6BAAC,MAAA0gC,iBAAD,CAAkBH,UAAWA,UAAWV,QAASA,UAChDW,qBACC,0DACGA,oBACD,6BAAC,cAAD,CACEn3B,MAAI,EACJ3mB,UAAWC,qBAAOo0B,KAClBv0B,QAAS,IAAMhvB,QAAQ04B,IAAIuH,WAC3BlO,QAAQ,+BACR,6BAAC,qBAAD,QAIN,qCAAM7C,UAAWC,qBAAOg+C,SACrBV,aACC,6BAAC,0BAAD,CACEA,YAAaA,YACbK,SAAUA,SACVnB,kBAAmBA,kBACnB5gD,iBAAkBA,uBASlC,CAAC1C,UAAWsjD,kBAAmB5gD,mBAG3BqiD,+BAAgC,SAAAz3E,aACpC,KACE,IAAI03E,iBASJ,GAPEA,iBADgB,OAAdvC,UACiB,IAAMA,UAEN,CAACoB,QAAS17E,KAAMy1C,QAC1B+kC,eAAe9qE,IAAIgsE,QAAQ5pC,KAAK,OAItCkoC,UACH,OAAO,6BAAC,oBAAD,0BAET,GAAIG,aAA8B,WAAfF,cAA6BgB,WAAaC,UAC3D,OAAO,6BAAC,oBAAD,KAAc,uCAAsClB,mBAAmBE,kBAEhF,IAAKe,SACH,OAAO,6BAAC,oBAAD,iCAGT,MAAMj7E,KAAO+5E,yBAAyBkB,SAAS//B,YAAYzmC,IAAI,EAAGzP,eAAaA,QACzE83E,kBAAoD,IAAhC7B,SAAS//B,YAAY15B,QAAyD,iBAAlCy5D,SAAS//B,YAAY,GAAGl2C,MACxF+3E,MAAO,SAAAC,6BAA4B/B,SAAS/lD,QAAQF,UACpDioD,4BACMxmE,IAATzW,MAAsC,iBAATA,MAC7B85E,kBAAkB95E,YAAqByW,IAAZzW,KAAK,IAAuC,iBAAZA,KAAK,GAC7Dk9E,UAAYpD,kBAAkB95E,MAAQA,KAAK,GAAKA,KAEhDm9E,SAAWjC,UAAYnB,yBAAyBmB,SAAShgC,YAAYzmC,IAAI,EAAGzP,eAAaA,QACzF0wD,KAAOykB,cAAe,oBAAQn6E,KAAMm9E,SAAU,KAAMpoB,wBACpDqoB,eAAiBl0E,OAAOwtC,KAAKof,qBAAYrhD,IAAKnJ,KAAQwqD,oBAAWxqD,KAAK0qD,WAEtEqnB,kBAAoBtoB,uBAAyBuoB,wBAAqBC,8BACxE,OACE,6BAAC,cAAD,CAAMz+C,KAAG,EAACE,MAAI,EAACw+C,QAAM,EAAC9+C,UAAWC,qBAAOuW,WACtC,6BAAC,kBAAD,CACEl1C,KAAMA,KACNm9E,SAAUA,SACVznB,KAAMA,KACNqnB,KAAMA,KACN7nD,QAAS+lD,SAAS/lD,QAClBuoD,YAAavC,oBAAF,EAAEA,SAAUhmD,UAExB+nD,uBACC,oCAAKv+C,UAAWC,qBAAOu+C,WAAYtyB,OAAOsyB,YACxC/C,cAAe,UAAAnuC,SAAQ,GAAI0pB,MAC7B,6BAAC,oBAAD,4BAEA,0DACGykB,aACC,oCACExoE,MAAO,CAAEwvB,OAAQ,UAAWhgC,SAAU,QACtCq9B,QAAS,IAAM/H,WAAW,CAAEs+B,wBAAyBA,0BACrD,6BAAC,cAAD,CAAMpjD,MAAO,CAAE+rE,cAAe,WAC5B,6BAACL,kBAAD,OACM,IALV,iBASF,6BAAC,uBAAD,CACEM,cAAgBC,KAAQ,6BAAC,MAAAC,UAAD,CAAWr/C,QAAS,IAAMi9C,aAAamC,OAAO,UAAAxgD,OAAMwgD,MAC5Ef,iBAAkBA,iBAClBiB,UAAQ,EACRC,aAAa,EACbC,cAAe7D,YAAc8D,4BAAuBD,qBACpDpC,cAAe,IAAI5lE,OACbmkE,YACKyB,cAAc,KAAMlmB,KAAMA,QAAS1/C,MAExC8mE,kBAEKlB,cAAcvB,kBAAmB,CAACr6E,MAAOi7E,SAAS//B,eAAgBllC,KAAM,GAE1E4lE,cAAcvB,kBAAmBr6E,KAAMi7E,SAAS//B,eAAgBllC,MAEzEkoE,iBAAmBn3E,KAER,MAAPA,KACe,iBAARA,KACqB,IAA5BmC,OAAOwtC,KAAK3vC,KAAKya,QACjB47D,eAAe/pD,SAASnqB,OAAOwtC,KAAK3vC,KAAK,KAErCmC,OAAOwtC,KAAK3vC,KAAK,KAAO+uD,oBAAWG,GAAGD,UACjCjvD,IAAImC,OAAOwtC,KAAK3vC,KAAK,IAGzBA,IAETo3E,MAAK,iBACAznB,+BADA,CAEH0nB,KAAM,CAAElrC,OAAQ,GAChBmrC,WAAY,EAAG1sE,aAASkqE,QAASyC,SAAU9lB,YACzC,MAAM+lB,UAAY,cAAH,GACV5sE,MADU,CAEbwzC,QAAS,gBACT8e,UAAW,EACXua,eAAgB,YAElB,IAAKrE,YACH,MAAO,CAAExoE,MAAO4sE,WAElB,IAAI97E,gBACA+7E,eACA5nB,+BAAsBilB,QAAQ,MAChCp5E,gBAAkBm0D,+BAAsBilB,QAAQ,IAAIp5E,gBACpD+7E,eAAiB3C,QAAQ,KAAO/lB,oBAAWC,QAAQC,UAAY,eAAiB,QAElF,MAAMyoB,WAAY,UAAAtpE,KAAIugD,KAAMmmB,QAAQ3gD,QAAQ2W,UAAW,IACjD6sC,aAAex1E,OAAOwtC,KAAK+nC,WAAW,GAK5C,OAJI7nB,+BAAsB8nB,gBACxBj8E,gBAAkBm0D,+BAAsB8nB,cAAcj8E,gBACtD+7E,eAAiBE,eAAiB5oB,oBAAWC,QAAQC,UAAY,eAAiB,QAE7E,CACLrkD,MAAO,cAAF,GAAO4sE,UAAP,CAAkB97E,gCAAiB+7E,eAAgBA,gBAAkB,cAG9EG,gBAAiB,EAAGhtE,aAASkqE,QAASyC,SAAU9lB,YAA/B,CACf7mD,MAAO,cAAF,GAAOA,MAAP,CAAc6sE,eAAgB,cAErCI,mBAAoB,EAAGjtE,aAAS2sE,SAAU9lB,YAAtB,CAClB7mD,MAAO,cAAF,GAAOA,MAAP,CAAc6sE,eAAgB,cAErCx5E,MAAO,EAAG2M,aAAS2sE,SAAUzC,WAC3B,MAAM0C,UAAY,cAAH,GAAQ5sE,MAAR,CAAe6sE,eAAgB,YAC9C,IAAKrE,YACH,MAAO,CAAExoE,MAAO4sE,WAElB,IAAI97E,gBACA+7E,eACJ,MAAMC,WAAY,UAAAtpE,KAAIugD,KAAMmmB,QAAQ3gD,QAAQ2W,UAAW,IACjD6sC,aAAex1E,OAAOwtC,KAAK+nC,WAAW,GAK5C,OAJI7nB,+BAAsB8nB,gBACxBj8E,gBAAkBm0D,+BAAsB8nB,cAAcj8E,gBACtD+7E,eAAiBE,eAAiB5oB,oBAAWC,QAAQC,UAAY,eAAiB,QAE7E,CACLrkD,MAAO,cAAF,GAAO4sE,UAAP,CAAkB97E,gCAAiB+7E,eAAgBA,gBAAkB,cAG9Ev+C,MAAO,CAAEu+C,eAAgB,aAE3Bx+E,KAAMm6E,YAAczkB,KAAO11D,UAOvC,CACEi7E,SACAd,YACAe,SACAjB,WACAC,cACAI,UACAE,eACAiB,aACApB,kBACA5jD,WACAs+B,uBACAilB,UACA4B,gBAIJ,OACE,6BAAC,cAAD,CAAM98C,KAAG,EAACE,MAAI,EAACrtB,MAAO,CAAE5P,SAAU,aAChC,6BAAC,sBAAD,CAAcy3C,YAAaA,oBACzB,6BAAC,cAAD,CAAMjY,QAAQ,cAAc6sB,QAAM,EAAC/I,MAAI,EAAC7mB,QAAS+8C,aAAcsD,OAAQ1E,aACrE,6BAAC,mBAAD,OAEF,6BAAC,cAAD,CACE54C,QAAS+4C,UAAY,eAAiB,aACtClsB,QAAM,EACN/I,MAAI,EACJ7mB,QAASg9C,kBACT7pE,MAAO,CAAE5P,SAAU,WAAYmK,IAAK,IACnCouE,UAAY,6BAAC,8BAAD,MAAe,6BAAC,8BAAD,OAE9B,oCAAK57C,UAAWC,qBAAOmgD,aACrB,6BAAC,0BAAD,CAAkBx6E,MAAO,EAAG24B,KAAM+8C,UAAWnsC,SAAUstC,kBAAmBhsC,WAAY,CAAEhvC,OAAQ,UAC/Fg6E,aACC,6BAAC,cAAD,KACE,6BAAC,iBAAD,CAASl7B,SAAS,cAAcC,UAAU,OACxC,0DACE,6BAAC,kBAAD,CACEl6C,MAAOi1E,WACPpsC,SAAWkxC,eAAkBtoD,WAAW,CAAEwjD,WAAY8E,gBACtDC,UAAQ,GACR,qCAAMh6E,MAhYK,wCAiYX,qCAAMA,MAAM,UAAZ,aAIU,WAAfi1E,WACC,6BAAC,0BAAD,CACE31E,MAAO,EACP24B,KAAMi9C,cACNrsC,SAAUwtC,sBACVlsC,WAAY,CAAEhvC,OAAQ,QACtBg9C,oBAAqB/pB,iBAAF,EAAEA,MAAO4B,WAE5B,QAKX4nD,iCAKPrsD,YAAY+B,cAAgB,CAC1B0nD,UAAW,GACXE,cAAe,GACfD,WAAY,SACZE,aAAa,EACbplB,wBAAwB,GAE1BxkC,YAAYoJ,UAAY,c,cAET,QAAAwb,MAAI,kBAAyB5kB,c,4ECnd5C,IAAI2b,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,uJCErC,SAAkCnP,MACvC,MAAM4H,SAAU,SAAAtN,SAAQ,KAAM,yBAAa0F,MAAO,CAACA,OAC7C/I,QAAS,SAAAqD,SAAQ,IAAOsN,QAAU,CAACA,QAAQE,WAAa,GAAK,CAACF,UAC9DuX,+BAAgC,oCAAAzC,kCAAiC,CAAC1c,OAElEuyC,YAA4D,SAAArqE,aAChE,CAAC85E,mBAAqC/pD,WACpC,MAAMgmB,YAAckB,8BAA8Bnf,KAAM/H,SACxD,GAAKgmB,YAGL,OAAIA,YAAY15B,OAAS,EAChB,CAAE0T,gBAASgmB,yBAEb+jC,oBAET,CAAC7iC,8BAA+Bnf,OAG5BozC,SAAU,SAAAlrE,aACb85E,qBACC,GAAIA,mBAAoB,CACtB,MAAM/jC,YAAckB,8BAA8Bnf,KAAMgiD,mBAAmB/pD,SAC3E,GAAIgmB,aAAeA,YAAY15B,OAAS,EACtC,MAAO,CAAE0T,QAAS+pD,mBAAmB/pD,QAASgmB,2BAIpD,CAACkB,8BAA+Bnf,OAG5BiiD,eAAiBnnD,SAASq4C,kBAAkB,CAAEl8C,cAAQs7C,sBAAYa,kBACxE,OAAOxrC,QAAUq6C,oBAAiBzoE,GA3CpC,I,IAAA,8BAEA,e,IAAA,4B,iCACA,4DACA,S,4WAAA,4B,8ZCAO,MAGLzQ,YAAYwF,QAAgB,0EAC1BD,KAAKC,OAASA,OACd,MAAMtJ,OAAS,IAAI2+B,YAAY,GAC/Bt1B,KAAKd,KAAO,IAAI8S,SAASrb,QAG3BilC,KAAKnnC,KAA6BsE,OAKhC,OAJAiH,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,SACxCD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IACjDD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IACjDD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IAC1CD,KAAKd,KAAK20E,WAAW,GAAG,K,oBAI5B,MAGLp5E,YAAYwF,QAAgB,0EAC1BD,KAAKC,OAASA,OACd,MAAMtJ,OAAS,IAAI2+B,YAAY,GAC/Bt1B,KAAKd,KAAO,IAAI8S,SAASrb,QAG3BilC,KAAKnnC,KAA6BsE,OAKhC,OAJAiH,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,SACxCD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IACjDD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IACjDD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IAC1CD,KAAKd,KAAK40E,SAAS,GAAG,K,qBAI1B,MAGLr5E,YAAYwF,QAAgB,0EAC1BD,KAAKC,OAASA,OACd,MAAMtJ,OAAS,IAAI2+B,YAAY,GAC/Bt1B,KAAKd,KAAO,IAAI8S,SAASrb,QAG3BilC,KAAKnnC,KAA6BsE,OAGhC,OAFAiH,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,SACxCD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IAC1CD,KAAKd,KAAK60E,UAAU,GAAG,K,oBAG3B,MAGLt5E,YAAYwF,QAAgB,0EAC1BD,KAAKC,OAASA,OACd,MAAMtJ,OAAS,IAAI2+B,YAAY,GAC/Bt1B,KAAKd,KAAO,IAAI8S,SAASrb,QAG3BilC,KAAKnnC,KAA6BsE,OAGhC,OAFAiH,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,SACxCD,KAAKd,KAAK00E,SAAS,EAAGn/E,KAAKsE,MAAQiH,KAAKC,OAAS,IAC1CD,KAAKd,KAAK80E,SAAS,GAAG,K,oBAI1B,MAELv5E,YAAYwF,QAAgB,sCAC1BD,KAAKC,OAASA,OAGhB27B,KAAKnnC,KAA6BsE,OAChC,OAAOtE,KAAKsE,MAAQiH,KAAKC,W,sIC5Cd,UAAkB,MAC/By0B,MAD+B,WAE/Bu/C,WAF+B,eAG/BC,eAAiB,QAHc,QAI/Bz5B,QAJ+B,QAK/BzkB,QAL+B,SAM/BsM,SAN+B,SAO/BnO,SAP+B,MAQ/B/tB,MAAQ,GARuB,SAS/BotB,WAEA,MAAM4pC,UAAY3iB,QAAUs3B,wBAAqBC,8BAC3C/+C,QAAUnhC,MAAM8H,YACpB,KACOu6B,UACHmO,UAAUmY,UAGd,CAACA,QAAStmB,SAAUmO,WAGhB6xC,YACJ,oBAAC5sC,OAAD,CAAQ2sC,eAAgBA,eAAgB//C,SAAUA,SAAU/tB,MAAO6tE,YAChEv/C,OAIL,GAAuB,QAAnBw/C,eACF,OACE,oBAACE,UAAD,CAAWjgD,SAAUA,SAAU+/C,eAAgBA,eAAgB9tE,MAAOA,OACnE+tE,aAKP,OACE,oBAACC,UAAD,CAAWjgD,SAAUA,SAAU+/C,eAAgBA,eAAgB9tE,MAAOA,OAChD,SAAnB8tE,gBAA6BC,YAC9B,oBAAC,cAAD,CAAMtgD,OAAK,EAACmC,QAASA,QAAS/C,QAASA,QAASO,SAAUA,UACxD,oBAAC4pC,UAAD,OAEkB,UAAnB8W,gBAA8BC,c,wCA3ErC,4EACA,kEACA,M,4WAAA,yBACA,iEAEA,sDACA,8C,kFAEO,MAAMC,UAAYj+C,0BAAO2e,GAAI;;;oBAGfvjD,OAAoC,QAAzBA,MAAM2iF,eAA2B,SAAW;iBAC1D3iF,OAAoC,QAAzBA,MAAM2iF,eAA2B,aAAe;WACjE3iF,OAAWA,MAAM4iC,SAAWr4B,6BAAOu4E,KAAOv4E,6BAAOwrD;YAChD/1D,OAAWA,MAAM4iC,SAAW,cAAgB;8BAGlD,MAAMoT,OAASpR,0BAAOzB,KAAM;YACtBnjC,OAAoC,QAAzBA,MAAM2iF,eAA2B,gBAAkB;WAC/D3iF,OAAWA,MAAM4iC,UAAqC,QAAzB5iC,MAAM2iF,eAA2Bp4E,6BAAOu4E,KAAOv4E,6BAAOwrD;oWCnB/F,8DACA,0D,+FAGezf,gB,iMCJf,6DACA,O,4WAAA,yBACA,iEAEA,8C,kFAEA,0B,0BAEiC,GAEjC,MAAMysC,aAAen+C,0BAAO2e,IAAI3M,MAAM,EAAGzsC,gBAAH,CACpC0K,MAAO,CAAElP,gBAAiBwE,OAC1B,YAAa,gBACX;;;WAL6B;YAAA;;sBAWXI,6BAAOy4E;gBA6Dd,SAAAC,aAxDf,UAAqB,MAAE94E,MAAF,SAAS4mC,UAAmBh8B,KAC/C,MAAMqjC,WAAY,SAAAwC,UACZsoC,OAAQ,SAAAtoC,WACd,SAAAuoC,qBAAoBpuE,IAAK,KAAM,CAC7BquE,mBAAoB,IAAMF,MAAM5zD,WAGlC,MAAM+zD,aAAc,SAAAzoC,QAAO7J,UAC3BsyC,YAAY/zD,QAAUyhB,SAEtB,MAAMuyC,UAAW,SAAA1oC,QAAOzwC,OA2CxB,OA1CAm5E,SAASh0D,QAAUnlB,OAEnB,SAAA45C,iBAAgB,KACd,IAAK3L,UAAU9oB,QACb,MAAM,IAAInpB,MAAM,6BA+BlB,OA7BA+8E,MAAM5zD,QAAU,IAAIi0D,eAAM,CACxBvuE,GAAIojC,UAAU9oB,QAIduD,QAASywD,SAASh0D,QAElB+xD,MAAO,WACPmC,aAAa,EACbC,YAAY,EACZC,aAAa,EACbC,WAAY,CACVC,SAAS,EACTC,KAAK,EACLC,YAAa,CACXx9C,OAAO,MAIVqwC,GAAG,OAAQ,KAENuM,MAAM5zD,SACR4zD,MAAM5zD,QAAQy0D,SAAST,SAASh0D,WAGnCqnD,GAAG,SAAWqN,WACbX,YAAY/zD,QAAQ00D,SAASC,SAAS7sC,cAGnC,KACD8rC,MAAM5zD,SACR4zD,MAAM5zD,QAAQ40D,qBAGjB,IAEI,6BAACnB,aAAD,CAAchuE,IAAKqjC,UAAWjuC,MAAOA,W,4ECpF9C,IAAIilC,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,iTCP5C,MAAM60C,sBACE,OADFA,4BAEQ,a,gBASC,MASbj7E,YAAY3B,MAAkB,wCARM48E,uBAQN,yBAPF,IAOE,yBANF,IAME,yBALF,IAKE,yBAJF,IAK1B,MAAM,UAAEC,UAAF,UAAaC,UAAb,IAAwBC,IAAxB,iBAA6BC,iBAA7B,EAA+CC,EAA/C,EAAkDC,EAAlD,EAAqDC,EAArD,EAAwDC,GAAMp9E,KAEpE,GAAyB,KAArBg9E,iBAGF,YADA91E,KAAKm2E,iBAAmBT,uBAK1B,MAGMU,eAHWT,WAAwB,GAGR,IAFhBC,WAAwB,GAEQ,EAC3CS,UAA6B,IAAjBR,IAAIS,UAAmC,IAAjBT,IAAIU,SAE5C,GAAIH,eAAiBC,UACnB,MAAM,IAAI3+E,MACR,wGAMJ,GAAa,IAATu+E,EAAE,IAAqB,IAATA,EAAE,GAClB,MAAM,IAAIv+E,MACR,mHAKJ,GAAyB,cAArBo+E,kBAAyD,wBAArBA,iBAGtC,MAAM,IAAIp+E,MACR,yHAHFsI,KAAKm2E,iBAA4B,IAATJ,EAAE,GAAaL,sBAAwBA,4BAMjE11E,KAAK+1E,EAAIA,EACT/1E,KAAKi2E,EAAIA,EACTj2E,KAAKk2E,EAAIA,EACTl2E,KAAKg2E,EAAIA,EAGXQ,gBAAiB9jF,EAAG+jF,MAAO9jF,EAAG+jF,QAC5B,GAAI12E,KAAKm2E,mBAAqBT,sBAC5B,MAAO,CAAEhjF,EAAG+jF,MAAO9jF,EAAG+jF,OAGxB,MAAM,EAAET,EAAF,EAAKC,EAAL,EAAQH,EAAR,EAAWC,GAAMh2E,KACjB22E,GAAKV,EAAE,GACPW,GAAKX,EAAE,GACPY,GAAKZ,EAAE,GACPa,GAAKb,EAAE,GAUPh5D,IAAMw5D,MAAQI,GATTZ,EAAE,IASkBU,GACzBz5D,IAAMw5D,MAAQI,GATTb,EAAE,IASkBW,GAEzBG,EAAIb,EAAE,GAAKj5D,GAAKi5D,EAAE,GAAKh5D,GAAKg5D,EAAE,GAC9Bc,EAAId,EAAE,GAAKj5D,GAAKi5D,EAAE,GAAKh5D,GAAKg5D,EAAE,GAC9Be,EAAIf,EAAE,GAAKj5D,GAAKi5D,EAAE,GAAKh5D,GAAKg5D,EAAE,GAC9BgB,GAAKH,EAAIE,EACTE,GAAKH,EAAIC,EAKTG,GAAKF,GAAKA,GAAKC,GAAKA,GACpBE,GAAKD,GAAKA,GACVE,GAAKD,GAAKD,GACVG,GAAK,EAAIL,GAAKC,GACdK,GAAKzB,EAAE,GACP0B,GAAK1B,EAAE,GACP2B,GAAK3B,EAAE,GACP4B,GAAK5B,EAAE,GAEb,IAAI6B,kBAAoB,EAAIJ,GAAKJ,GAAKK,GAAKJ,GADhCtB,EAAE,GACwCuB,GACpC,IAAbvB,EAAE9/D,SACJ2hE,mBAAqB,EAAM7B,EAAE,GAAKqB,GAAKrB,EAAE,GAAKsB,GAAKtB,EAAE,GAAKuB,IAE5D,MACMO,IAAMV,GAAKS,kBAAoBF,IAAMN,GAAUD,GAAKA,GAAV,GAAiBQ,GAAKJ,GAKtE,MAAO,CAAE7kF,GANGwkF,GAAKU,kBAAoBF,GAAKH,GAAKI,IAAMP,GAAUF,GAAKA,GAAV,IAMxClB,EAAE,GAAKA,EAAE,GAAIrjF,EAAGklF,IAAM7B,EAAE,GAAKA,EAAE,O,mJCvF9C,WAEL,MAAM8B,aAAe,GAYrB,OAXAA,aAAat9C,KAAK,CAChBu9C,SAAUC,kBACVC,SAAUD,kBACVE,WAAYC,mBAEdL,aAAat9C,KAAK,CAChBu9C,SAAUK,6CACVH,SAAW,iBAAgBG,6CAC3BF,WAAYG,0CAGP,CACLC,mBAAoBN,kBACpBO,OAAQ,CACNR,SAAUS,sBACVP,SAAW,iBAAgBO,sBAC3BN,WAAYO,kBAEdX,0BACAY,4BAnDJ,I,IAAA,+BACA,0CAIA,8BAIA,Y,IAAA,4B,iCACA,yC,oKAcA,MAAMA,aAAkCC,mBAAczvE,IAAK0vE,S,8ZAAD,IACrDA,QADqD,CAExDX,SAAW,GAAEY,8CAA6BD,QAAQb,e,sICvBrC,SAAuB7tC,OACpC,OAAQA,OACN,KAAK,EACH,MAAO,QACT,KAAK,EACH,MAAO,OACT,KAAK,EACH,MAAO,OACT,KAAK,EACH,MAAO,QACT,KAAK,GACH,MAAO,QACT,QACE,MAAO,U,yDAhBkC,CAAC,EAAG,EAAG,EAAG,EAAG,K,kDCP5D,IAAIvJ,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,8JCT5C,4EACA,+BACA,O,4WAAA,yBACA,+BACA,oCAGA,8CACA,yCACA,yDACA,+DACA,oCACA,6DAEA,oDAKA,0DAGA,iBADA,kDACA,mDAGA,yC,kqBA0CA,MAAMi4C,aAAe,CAACvnF,MAAc+U,OAClC,MAAM,QACJyyE,QADI,OAEJ/tD,OAFI,MAGJguD,MAHI,WAIJ9tD,WAJI,iBAKJ+tD,iBALI,OAMJtwD,OANI,WAOJwmC,WACAnkC,QAAQ,oBAAExC,oBAAF,kBAAuB0mC,kBAAvB,SAA0C9mC,WAChD72B,MACEyb,YAAa,cAAAye,aAAaztB,OAAUA,MAAMgP,aAC1C,kBAAE8hB,mBAAsBh9B,eAAMwH,WAAW0uD,wBAAiB,GAE1DkxB,aAAc,mBAAA17B,qBAClB,SAAA5jD,aAAY,EAAGu/E,aAAeC,0BAAoBA,YAAcA,WAAWF,aAAgB,CAAEprC,IAAK,EAAGC,KAAM,GAAK,KAE5GsrC,WAAY,mBAAA77B,qBAChB,SAAA5jD,aAAY,EAAGu/E,aAAeC,6BAAsBA,aAAcA,WAAWC,WAAY,MAGrF,YAAE74E,YAAF,WAAe6uD,aAAe,4BAAAiqB,wBAAuB,CACzDrqB,mBAAoBjkC,OAAOxqB,YAC3B4nB,kBACA8mC,oCACAC,wBAGIoqB,oBAAqB,SAAA3/E,aACxB4/E,gBACCP,iBAAiB,KACZ,cAAAn1D,kBAAiBE,gBAAgBuB,oBAAoBoD,OACxD8wD,iCACAC,2CACGF,iBAGP,CAACP,mBAIGU,kBAAoB7nF,eAAMq6C,OAAO,CACrC3rC,wBACAo5E,kBAAmB5uD,OAAOxqB,YAC1B6uD,sBACAwqB,wBAAyB7uD,OAAOkkC,kBAChC4qB,eAAgB9uD,OAAO5C,WAEzBuxD,kBAAkB94D,QAAU,CAC1BrgB,wBACAo5E,kBAAmB5uD,OAAOxqB,YAC1B6uD,sBACAwqB,wBAAyB7uD,OAAOkkC,kBAChC4qB,eAAgB9uD,OAAO5C,UAEzB,MAAM63C,gBAAiB,SAAArmE,aACrB,CAAC42D,YAA8BC,wBAC7B,MACEmpB,kBAAmBxpB,gBACnBypB,wBAAyBtpB,sBACzBupB,eAAgBxpB,aAChBjB,WAAYgB,gBACVspB,kBAAkB94D,QAChBuuC,gBAAiB,4BAAA2qB,iCAAgC,CACrD3pB,gCACAC,8BACAC,0BACAC,4CACAC,wBACAC,4CAEFvlC,WAAW,CAAE9C,SAAUooC,YAAatB,kBAAmBuB,qBAAsBjwD,YAAa4uD,kBAE5F,CAAClkC,aAGG8uD,eAAgB,SAAApgF,aACpB,IACEsxB,WAAW,CACTgkC,mBAAmB,EACnB1uD,YAAa,cAAF,IACN,UAAAqV,MAAK8jE,kBAAkB94D,QAAQrgB,YAAa,CAAC,SAAU,sBADjD,CAET/B,YAAa,MAGnB,CAACysB,aAGGlgB,qBAAsB,SAAApR,aACzBw1D,iBACC,MAAM6qB,mBAAoB,UAAApkE,MAAKu5C,eAAgB,CAAC,SAAU,sBACtD5mC,oBACFsG,kBAAkB,WAAaorD,WAAD,iBAAqBA,UAArB,CAAgC15E,YAAay5E,qBAE3E/uD,WAAW,CAAE1qB,YAAay5E,mBAAqB,CAAEtrD,iBAAiB,KAGtE,CAACnG,oBAAqB0C,WAAY4D,oBAMpC,OAFAh9B,eAAM4iF,oBAAoBpuE,IAAK,MAAc25D,iCAG3C,6BAAC,gBAAD,CACEz/D,YAAaA,YACbwqB,OAAQA,OACR+tD,QAASA,QACTG,YAAaA,YACblsE,WAAYA,WACZkiD,oBAAqBA,kBACrB9mC,SAAUA,SACV4wD,MAAOA,MACP/qC,YAAaA,mBACborC,UAAWA,UACXW,cAAeA,cACfhvE,oBAAqBA,oBACrBi1D,eAAgBA,eAChB/0C,WAAYA,WACZvC,OAAQA,OACR0mC,WAAYA,WACZF,WAAYA,WACZ8pB,iBAAkBM,sBAKxBT,aAAazkD,YAAc,sBAC3BykD,aAAa1qD,UAAY,WACzB0qD,aAAa/xD,eAAgB,cAAAjD,kBAAiBE,gBAAgBuB,oBAAoBwB,cAE3E,MAAMozD,UAAW,iCAAqBroF,eAAM0iF,WAAuCsE,cAAeA,c,wCAE1F,QAAAlvC,MAAI,mBAAiC,sBAAAwwC,+BAA6B,2BAAeD,UAAW,M,+dCxMhE,iB,8BACN,G,+BAEC,G,qBACV,E,kBACH,G,wBACME,G,+BAEOC,I,2BAEJ,CAChC,CACErjB,YAAa,qBACb9rB,KAAM,CAAC,MAET,CACE8rB,YAAa,SACb9rB,KAAM,CAAC,MAET,CACE8rB,YAAa,mBACb9rB,KAAM,CAAC,IAAK,MAEd,CACE8rB,YAAa,kBACb9rB,KAAM,CAAC,IAAK,MAEd,CACE8rB,YAAa,gCACb9rB,KAAM,CAAC,UAET,CACE8rB,YAAa,kBACb9rB,KAAM,CAAC,QAAS,UAElB,CACE8rB,YAAa,eACb9rB,KAAM,CAAC,S,6BAIyB,CAClCovC,MAAO,QACPC,UAAW,YACXC,MAAO,QACPC,UAAW,YACXC,UAAW,a,uBAGiB,CAC5BC,MAAO,QACPC,UAAW,YACXC,WAAY,aACZC,QAAS,UACTC,UAAW,YACXC,UAAW,a,sBAGgB,CAAEC,EAAG,IAAKroD,OAAQ,SAAU,IAAK,M,2TCavD,SACLsoD,cACA,gBACEn0B,gBADF,mBAEEo0B,mBAFF,cAGEC,cAHF,kBAIEC,kBAJF,WAKE93C,WALF,gBAME+3C,gBANF,iBAOE7jC,mBAWF,MAAM8jC,uBAAyB,IAAI9nF,IAAIszD,gBAAgB99C,IAAI,EAAGqT,aAAWA,OACnEk/D,wBAAyB,UAAA3rE,YAAU,UAAA22B,OAAMugB,gBAAiB,QAAS,YAEzE,OAAOm0B,aAAajyE,IAClB,CAAC,KAAgGwL,OAAQ,IAAxG,MAAE+K,MAAOs5C,mBAAoB2iB,wBAA0BC,8BAAiD,KAAhB5pF,K,mkBAAgB,sCACvG,MAAMsX,GAAM,GAAEtX,KAAKsiC,YAAYpE,MAAM,KAAKsW,KAAK,QAAQ7xB,MAEjDknE,gBAAmC,MAAjB7pF,KAAKk7D,SAA2B,IAARv4C,IAAY3iB,KAAKk7D,YAAczpB,WAC/E,IAAIq4C,oBAAqB,EAEzB,MAAMC,WAAar8D,MAAMvW,IAAI,CAAC6yE,gBAAiBC,QAC7C,MAAM,YACJ3nD,YADI,UAEJmF,UAFI,2BAGJkgC,2BAA6B,GAHzB,mBAIJX,mBAAqB4iB,8BACnBI,gBAEJ,IAAItyD,SACJ,MAAMH,OAAS,GACTquC,eAAiBskB,kBAAkBziD,WACnC0iD,sBAAwBxkC,mBAAqBykC,wBAAwBh4E,IAAIq1B,WACzE4iD,+BAAiCF,sBAAwB,MAAChxE,OAAWA,GAAa,MAACA,GACnFmxE,4BAA8BH,sBAAwB,CAAC,GAAI,IAAM,CAAC,IAClEI,sCAAwC,GAC9CvjB,mBAAmBzuB,QAAQ,CAACiyC,cAAejiC,aAEzC,IAAK4hC,uBAAyB5hC,UAAY,EACxC,OAEF,MAAMqf,iBAAmBhC,eAAerd,WAClCgZ,kBAAqB,GAAEqG,mBAAmBngC,YAChD,GAAIgiD,uBAAuBr3E,IAAImvD,mBAAoB,CACjD,GAAI+nB,cAAc/nB,mBAAoB,CACpC,MAAMkpB,YAAc7iB,iBAAoB,IAAGA,qBAAuB,GAClErwC,OAAOkR,QAAQ6gD,cAAc/nB,mBAAmBpqD,IAAK0B,OAAW,GAAE4xE,cAAc5xE,UAGlF6e,SAAWgyD,uBAAuBnoB,mBAClC,MAAMmpB,UAAYC,wBAAwBppB,mBAE1C8oB,+BAA+B9hC,WAAa,CAC1CmiC,oBACAE,gBAAiBjB,wBAAwBphC,WACzCsiC,QAASL,cACTliC,WAAW,GAEb,MAAMwiC,yBAA2BnB,wBAAwBphC,YAAciiC,cAGvEF,4BAA4B/hC,WAAaghC,kBAAkBhoB,oBAAsB,GAEjF+oB,4BAA4B/hC,WAAWhQ,QAASkqB,KACzC8nB,sCAAsC9nB,MACzC8nB,sCAAsC9nB,IAAM0nB,sBACxC,MAAChxE,OAAWA,GACZ,MAACA,IAEPoxE,sCAAsC9nB,IAAIla,WAAa,CACrDqiC,gBAAiBE,yBACjBJ,oBAEAG,QAC2C,MAAzCljB,2BAA2Bpf,YAAsBof,2BAA2Bpf,WAAWxyB,SAAS0sC,IAClGna,WAAW,QAMnB,MAAMyiC,wBAA0BzoD,aAAe+mD,mBAAmB5hD,WAE5DujD,yCAA2Cp/E,OAAOwtC,KAAKmxC,uCAC1D7gC,OACAx8B,OAAQ+9D,SAAYzB,iBAAkBA,gBAAgBp3E,IAAI64E,SAC1D9zE,IAAK6oD,YAAD,CACHA,oBACAkrB,oBAAqB,EACrBC,0BAA2BZ,sCAAsCvqB,cAG/DorB,oBACH5B,iBACCA,kBAAoBA,gBAAgBp3E,IAAIq1B,YAAc+hD,gBAAgBp3E,IAAI24E,2BAE1EC,yCAAyC9mE,OAAS,EAOtD,OAJIknE,qBACFtB,oBAAqB,GAGvB,iBAEKE,gBAFL,CAGErkB,cAAe,cAAF,CACXrjC,YAAayoD,yBAA2BtjD,UACxCnwB,GAAK,GAAEA,MAAM2yE,OACboB,cAAeD,mBACfF,oBAAqB,EACrBtlB,+BACIolB,yCAAyC9mE,OACzC,CAAE8mE,kFAA0CV,8DAC5CnxE,GACA,UAAAu1B,SAAQ27C,+BAAgC,MAAClxE,OAAWA,MACxD,UAAAu1B,SAAQ27C,+BAAgC,MAAClxE,SACrCA,EACA,CAAEgyE,0BAA2Bd,gCAC7B54C,WAAa,CAAEA,4BAAet4B,EAC9Boe,OAAOrT,OAAS,CAAEqT,oBAAWpe,EAC7Bue,SAAW,CAAEA,wBAAave,OAM9BmyE,oBACH9B,iBAAmBM,oBAAuBN,iBAAmBA,gBAAgBp3E,IAAIpS,KAAKsiC,aAEzF,wBACKtiC,KADL,CAEEgnE,mBAAoB2iB,wBACpBhkB,cAAe,cAAF,CACX4lB,4BAA6B,EAC7BrwB,SAAU2uB,gBACVlkC,mBAAoBA,iBACpBruC,MACA+zE,cAAeC,mBACfJ,oBAAqB,EACrBM,iBAAkB,CAAC/iB,0BAA2BE,+BAC1Cl3B,WAAa,CAAEA,4BAAet4B,GAEpCuU,MAAOq8D,gB,0CAMR,SACLvkB,aAIA,MAAMimB,UAAY,GACZC,eAAiBlmB,YAAYruD,IAAI,CAACm+C,MAAO3yC,OAC7C,MAAM,MACJ+K,MACAi4C,eAAe,cAAE0lB,cAAF,SAAiBnwB,WAC9B5F,MACEq2B,SAAW,cAAH,GAAQr2B,OAEhBs2B,gBAAkBH,UAAUvnE,OAC9BmnE,eACFI,UAAUhjD,KAAK,CAAE48B,WAAa,IAAG1iD,OAAQkpE,UAAWC,gCAAqBtD,QAG3E,MAAMuD,iCAAmCV,eAAiBnwB,SAkC1D,OAjCI6wB,mCACFJ,SAASj+D,MAAQA,MAAMvW,IAAI,CAACoG,KAAM0sE,QAChC,MAAM+B,QAAU,cAAH,GAAQzuE,OAEnB29C,SAAU+wB,cACVtmB,eAAiB0lB,cAAea,mBAAjB,yCAAqClB,2CAClDztE,KAeJ,OAdI2uE,qBACFF,QAAQrmB,cAAculB,mBAAqBO,UAAUvnE,OACrDunE,UAAUhjD,KAAK,CAAE48B,WAAa,IAAG1iD,eAAesnE,QAAS4B,UAAWC,gCAAqBpD,QAErFuD,eAAiBjB,0CACnBA,yCAAyCzyC,QAAQ,CAAC4zC,OAAQC,aACxDD,OAAOjB,mBAAqBO,UAAUvnE,OACtCunE,UAAUhjD,KAAK,CACb48B,WAAa,IAAG1iD,eAAesnE,iEAAiEmC,aAChGP,UAAWC,gCAAqBlD,eAKjCoD,WAIPX,gBACFM,SAAShmB,cAAculB,mBAAqBU,gBACxCG,mCACFJ,SAAShmB,cAAc4lB,2BAA6BE,UAAUvnE,OAE9DunE,UAAUhjD,KAAK,CAAE48B,WAAa,IAAG1iD,aAAckpE,UAAWC,gCAAqBnD,cAG5EgD,WAIT,OADAF,UAAUhjD,KAAK,CAAE48B,WAAY,GAAIwmB,UAAWC,gCAAqBrD,YAC1D,CAAEjjB,YAAakmB,eAAgBD,sB,0CAGjC,SAA2CjmB,YAA+B6mB,YAC/E,OAAO7mB,YAAYruD,IAAKm+C,OAAD,iBAClBA,MADkB,CAErBqQ,cACErQ,MAAMqQ,cAAculB,qBAAuBmB,WAA3C,iBAES/2B,MAAMqQ,cAFf,CAGM2mB,mBAAmB,IAErBh3B,MAAMqQ,cACZj4C,MAAO4nC,MAAM5nC,MAAMvW,IAAKoG,MAAD,iBAClBA,KADkB,CAErBooD,cACEpoD,KAAKooD,cAAculB,qBAAuBmB,WAA1C,iBACS9uE,KAAKooD,cADd,CAC6B2mB,mBAAmB,IAC5C/uE,KAAKooD,cAAcqlB,yCAAnB,iBAEKztE,KAAKooD,cAFV,CAGEqlB,yCAA0CztE,KAAKooD,cAAcqlB,yCAAyC7zE,IACnGg1E,QACCA,OAAOjB,qBAAuBmB,WAA9B,iBAESF,OAFT,CAGMG,mBAAmB,IAErBH,UAGV5uE,KAAKooD,qB,wCAgEV,UAAyC,YAC9CuD,YAAczB,aADgC,cAE9C8kB,cAAgB,GAF8B,aAG9CC,aAAe,KAMf,MAAMjD,kBAAoB,GACpBkD,8BAAgCC,uCAAuCxjB,aAE7EqgB,kBAAkB,aAAe39E,OAAOwtC,KAAKqzC,+BAA+Bv/D,OAAQlf,MAASA,IAAIk3B,WAAW,MAC5GqkD,kBAAkB,OAASiD,aAE3B,mBAA8BD,cAAe,OAAlC,MAAEz2D,MAAF,KAAStL,MAAyB,MAC3C++D,kBAAkBzzD,OAASyzD,kBAAkBzzD,QAAU,GACvDyzD,kBAAkBzzD,OAAO2S,KAAKje,MAGhC,OAAO++D,mB,kGA2BF,SACLoD,mBAMA,MAAMvrB,mBAAqB,GACrBD,0BAA4B,GAC5ByrB,6BAA+B,GAuCrC,OAtCAD,kBAAkBp0C,QAAQ,EAAGyuB,mBAAoB2iB,wBAA0BC,6BAA8Bl8D,gBACvGA,MAAM6qB,QACJ,EACE9Q,oBACAu/B,mBAAoB6lB,wBAA0BjD,6BAC9CnjB,kCACAkB,0DAEA,MAAM/B,eAAiBskB,kBAAkBziD,WACzC,IAAK,IAAI/mC,EAAI,EAAGA,EAAIklE,eAAe1hD,OAAQxjB,IAAK,CAE9C,IAAKipF,wBAAwBjpF,GAC3B,SAEF,MACM6gE,kBAAqB,GADFqE,eAAellE,KACQ+mC,YAC1CqlD,eAAiBD,wBAAwBnsF,GAC3CosF,gBACF1rB,mBAAmB34B,KAAK84B,mBAGtBoG,4BAA8BmlB,gBAAkBnlB,2BAA2BjnE,KAC7EygE,0BAA0BI,mBAAqBoG,2BAA2BjnE,IAGzE+lE,kBAGLA,iBAAiBluB,QAAQ,CAACrN,SAAU6hD,kBAClC,MAAMnlB,iBAAmBhC,eAAemnB,gBACxC,GAAI7hD,UAAgC,MAApB08B,iBAA0B,CAExCglB,6BAD2B,GAAEhlB,mBAAmBngC,aACEyD,gBAMrD,CACLk2B,sCACAD,oDACAyrB,4D,8BAIG,SAA+BvmC,aACpC,MAAMjuC,IAAM,GAEZ,IAAK,MAAO0d,MAAO8B,WAAYyuB,YAAY7uB,gBACpCpf,IAAI0d,SACP1d,IAAI0d,OAAS,IAEf1d,IAAI0d,OAAO2S,KAAK7Q,SAiBlB,MAdA,CACE,CAAEstC,YAAa,mBAAoB3tC,OAAQ8uB,YAAY2mC,uBACvD,CACE9nB,YAAc,wCAAuC7e,YAAY4mC,gBACjE11D,OAAQ8uB,YAAY6mC,0BAEtB30C,QAAQ,EAAG2sB,wBAAa3tC,kBACxBA,OAAOghB,QAAQ,CAACnhC,EAAG0e,SACZ1d,IAAI0d,SACP1d,IAAI0d,OAAS,IAEf1d,IAAI0d,OAAO2S,KAAKy8B,iBAGb9sD,K,2BAYF,SAAS+0E,mBAAmBC,SACjC,MAAMC,QAA0B,cAAH,GACvBD,QAAQ5iE,KAAO,CAAEA,KAAM4iE,QAAQ5iE,MAAQ4iE,QAAQ3lD,gBAActuB,EAC7Di0E,QAAQ3lD,UAAY,CAAEA,UAAW2lD,QAAQ3lD,gBAActuB,GAEzDi0E,QAAQ5iE,MAAyB,OAAjB4iE,QAAQ5iE,OAC1B6iE,QAAQ5lD,UAAY,OAEtB,MAAM6lD,YAAcF,QAAQvtF,SAE5B,GAAIytF,YAAa,CACf,MAAM9sB,YAAc8sB,YAAYn2E,IAAK6jD,OAAUmyB,mBAAmBnyB,QAC9DwF,YAAYt8C,SACdmpE,QAAQxtF,SAAW2gE,aAGvB,OAAO6sB,S,0BAIF,SAA2BE,WAChC,OAAOA,UAAU5sC,QAAQ,MAAO,K,uHA0C3B,SAAkDgsC,mBAEvD,MAAM5C,WAAa4C,kBAAkBj/D,MACrC,IAAKq8D,WAAW7lE,OACd,MAAO,CAACyoE,mBAEV,MAAMvrB,mBAAqB2oB,WAAW5yE,IAAKoG,MAASA,KAAKkqB,WACnDw5B,sBAAwB,IAAIt/D,IAAIy/D,oBAKhCosB,wBAA0BC,gCAJR,cAAA17D,kBACrB+3C,uBACAt2C,oBAAoBk6D,uBAGjBC,sBAAkC,GAElCzlD,QAAU,GAChBslD,wBAAwBj1C,QAAS+c,QAC/B,MAAMs4B,0BAA4Bt4B,MAAM5nC,MACrCR,OAAQ3P,MAAS0jD,sBAAsB7uD,IAAImL,KAAKkqB,YAChDtwB,IAAI,EAAGswB,uBAAgBA,WAGtBmmD,0BAA0B1pE,OAAS,IACrCypE,sBAAsBllD,QAAQmlD,2BAC9B1lD,QAAQO,KAAR,iBACK6sB,MADL,CAEE0R,mBAAoB,EAAC,GAAM,GAC3B9L,UAAU,EACVxtC,MAAOq8D,WAAW78D,OAAQ3P,MAASqwE,0BAA0B73D,SAASxY,KAAKkqB,kBAMjF,MAAM64B,yBAA0B,UAAAjyB,YAAW+yB,mBAAoBusB,uBAC3DrtB,wBAAwBp8C,QAC1BgkB,QAAQO,KAAKolD,6BAA6B,gBAAiBvtB,0BAE7D,OAAOp4B,S,8RA3mBT,I,IAAA,+BACA,e,IAAA,2B,iCAEA,qCACA,iDAEA,oC,glBAMO,MAAMu/B,cAAe,cAAA11C,kBACzB+3C,uBACAt2C,oBAAoBk6D,sB,kCAEhB,MAAMjlB,0BAA4B,CAAC,GAAI,iBAAkB,gB,4DACzD,MAAME,6BAA+B,CAAC,mBAAoB,oB,kEAC1D,MAAMd,yBAA2B,IAAIY,6BAA8BE,8B,0DACnE,MAAMmlB,iCAAmC,CAACrlB,0BAA2BE,8B,0EAE5E,MAAMyhB,wBAA0B,IAAIzoF,IAAI,CAAC,YAAa,QAChDioF,6BAA+B,EAAC,GAAO,GAIhCmE,4BAA8B,CAAC,QAAS,aAE9C,SAASF,6BAA6BvrD,YAAqB0gC,YAChE,MAAO,CACL9H,UAAU,EACV54B,wBACA5U,MAAOs1C,WAAW7rD,IAAKswB,WAAcumD,0BAA0BvmD,YAE/Du/B,mBAAoB,EAAC,GAAM,IAIxB,SAASgnB,0BACdvmD,UACAwmD,0BAAsCF,6BAEtC,MAAMG,uBAAyBxmB,oBAAoB,CAACjgC,YAAY,GAC1DkgC,2BACuB,cAA3BumB,uBAAyC,CAACD,0BAA2B,SAAM90E,EAC7E,sBACEsuB,UAAWymD,uBAEXlnB,mBAAoB,EAAC,GAAM,KACxB,yBAAAH,iCAAgCqnB,wBAC/BvmB,2BAA6B,CAAEA,4DAA+BxuD,GAQ/D,SAASuuD,oBAAoB1E,YAClC,MAAMmrB,iBAAmBnrB,WAAW7rD,IAAKqT,OACvC,IAAK,MAAMo9C,oBAAoBe,6BAC7B,GAAIf,kBAAoBp9C,KAAK0a,WAAW0iC,kBACtC,OAAOp9C,KAAKo1B,OAAOgoB,iBAAiB1jD,QAGxC,OAAOsG,OAET,OAAO,UAAA8c,MAAK6mD,kB,gEA6RP,MAAMC,uBAAwB,yBACnC,CAACllB,YAA8BmlB,0BACxBnlB,YAAYrpE,UAGV,UAAA4lB,SACLyjD,YAAYrpE,SAASsX,IAAKoG,MAAS3T,MAAMwuC,KAnC/C,SAAUk2C,YACR/wE,KACAiN,KACA6jE,yBAEA,MAAMhlB,cAAgB9rD,KAAK1d,SAM3B,GAJKwpE,sBAEH,kBAAW,UAAAvlD,MAAKvG,KAAM,YAAtB,CAAmCiN,aAEjC6+C,cACF,IAAK,MAAMC,WAAWD,cAAe,CACnC,IAAIklB,YAAcjlB,QAAQhnC,aAAgB,GAAE9X,UAAU8+C,QAAQ9+C,MAAQ,KACjE8+C,QAAQhnC,aAAgBgnC,QAAQ9+C,OAAQ8+C,QAAQ7hC,YACnD8mD,YAAc/jE,MAEX6jE,0BACHE,YAAe,GAAE/jE,UAAU8+C,QAAQ9+C,MAAQ,MACtC8+C,QAAQ9+C,MAAQ8+C,QAAQ7hC,YAC3B8mD,YAAc/jE,aAGX8jE,YAAYhlB,QAASilB,YAAaF,0BAYKC,CAAY/wE,KAAMA,KAAKiN,MAAQ,GAAI6jE,4BAH1E,I,oDASN,MAAM3B,wCAAyC,yBACpD,CAACxjB,YAA8BmlB,2BAC7B,MAAMG,oBAAsBJ,sBAAsBllB,cAAemlB,yBAC3DrmF,OAAS,CAAE,YAAa,MAAO,MAAO,MAC5C,IAAK,MAAM0oB,QAAQ89D,oBAAqB,CACtC,MAAMxgF,IAAM0iB,KAAKoF,OAASpF,KAAKw3C,UAC3Bl6D,MACFhG,OAAOgG,KAAO0iB,KAAKlG,MAGvB,OAAOxiB,SA8BJ,SAAS2iF,wBAAwBljD,WACtC,OAAIA,UAAUvC,WAAW,2BAChB,KACEuC,UAAUvC,WAAW,oBACvB,KACEuC,UAAUvC,WAAW,WACvB,KACEuC,UAAUvC,WAAW,kBACvB,KACEuC,UAAUvC,WAAW,gBACvB,KAEF,KAET,SAASglD,kBAAkBziD,WACzB,OAAIA,UAAUvC,WAAW,aAAeuC,UAAUvC,WAAW,4BACpD,CAAC,GAAI,oBACHuC,UAAUvC,WAAW,iBACvB,CAAC,GAAI,kBAEP,CAAC,GAAI,oBA0HP,SAASuoD,+BAA+BgB,WAC7C,OAAKA,UAAU5uF,SAGR4uF,UAAU5uF,SAASsX,IAAK6jD,QAC7B,IAEI//C,WAFAyzE,YAAc1zB,MAAMvzB,UAAY,CAACuzB,MAAMvzB,WAAa,GAGxD,GAAIuzB,MAAMn7D,SAAU,CACUuuF,sBAAsBpzB,OAC9BziB,QAAS7nB,OACvBA,KAAKoF,MACP44D,YAAYjmD,KAAK/X,KAAKoF,OACbpF,KAAKw3C,YACTjtD,aACHyzE,YAAYjmD,KAAK,aACjBxtB,WAAa,IAEfA,WAAWwtB,KAAK/X,KAAKw3C,cAQ3B,MAJmB,OAAflN,MAAMxwC,OAERkkE,YAAc,CAAC,QAEV,CACLpsD,YAAa04B,MAAMxwC,MAAQwwC,MAAMvzB,WAtiBZ,gBAuiBrByzB,UAAU,EACVxtC,MAAOghE,YAAYv3E,IAAKswB,WAAcumD,0BAA0BvmD,UAAWxsB,gBA3BtEwzE,UAAUhnD,UAAY,CAAComD,6BA7gBP,gBA6gBwD,CAACY,UAAUhnD,aAAe,G,6PCriB7G,8DACA,sDAGA,WAFA,yBAEA,mDACA,qEACA,sDACA,0CACA,gEACA,+D,sdAcA,SAASknD,cAAa,mBACpBl4B,mBADoB,oBAEpBm4B,oBAFoB,cAGpBC,cAHoB,eAIpBC,eAJoB,0BAKpBC,4BAEA,MAAOr4B,YAAaC,gBAAkB52D,MAAMyB,SAA0Bi1D,oBAEtE,OACE,oBAAC,0BAAD,CACExyB,QAAQ,gBACRwxB,KACE,oBAAC,cAAD,CAAMphD,MAAO,CAAE1K,MAAO+sD,YAAc3sD,sBAAOilF,OAAS,UAClD,oBAAC,gBAAD,OAGJ5tD,UAAWC,sBAAO21B,QAClBN,YAAaA,YACbO,YAAcC,iBACZ03B,oBAAoB13B,gBACpBP,eAAeO,kBAEjB,oBAAC,kBAAAC,UAAD,CAAW3sC,KAnCe,YAoCxB,oBAAC,kBAAD,CACEqkE,cAAeA,cACfC,eAAgBA,eAChBC,0BAA2BA,8B,yBAvCL,WA8ChCJ,aAAat+B,aAAe,CAC1B0+B,0BAA2B/rC,4BAAYC,M,aAG1BljD,MAAM6jB,KAAY+qE,c,uKC5DjC,I,IAAA,S,IAAA,4B,kNAEe,CACb1qC,MAASgrC,KACAC,gBAAKC,SAASF,KAEvB/qC,UAAS,CAACnF,IAAUriB,QAAe,KAE1BwyD,gBACJE,SAASrwC,I,8ZADL,EACYswC,cAAc,GAAS3yD,UACvCikB,QAAQ,UAAW,UACnBoE,Q,gKC6BQ,UAAkB,YAC/BziB,YAD+B,UAE/B8f,UAF+B,SAG/B1jC,SAH+B,UAI/B+oB,UAJ+B,WAK/BmgB,WAL+B,MAM/BvzC,MAAQ,GANuB,SAO/BwnC,WAEA,IAAIyzC,UAAYhtD,aAAemF,UAE/B,GAAImgB,WAAY,CACd,IAAI2nC,gBAAkB9nD,UACtB,MAAM85B,kBAAqB,GAAEtB,wCAAuBx4B,YAGhDA,YAAcA,UAAU1R,SAAS6xB,aAAe2Z,kBAAkBxrC,SAAS6xB,cAC7E2nC,gBAAkBhuB,kBAClB+tB,UAAYC,iBAGVjtD,aAAemF,WAAanF,cAAgBmF,YAC9C6nD,UAAa,GAAEhtD,gBAAgBitD,oBAGnC,MAAMC,YACJptC,YACCvG,SACC,oBAAC,iBAAD,CAAS8F,SAAU9F,SAAU+F,UAAU,UACrC,oBAAC6tC,MAAD,KAAQH,YAGV,oBAACG,MAAD,KAAQH,YAGZ,OACE,oBAACI,kBAAD,CAAmBr7E,MAAOA,OACxB,oBAACs7E,aAAD,CAAct7E,MAAO,CAAEqK,oBACpBkpC,WACC,oBAAC,uBAAD,CAAe0nC,UAAWA,UAAW1nC,WAAYA,aAEjD,wCACGxF,UACCotC,YAEA,oBAAC,4BAAD,CACE9pF,KAAM4pF,UACNM,cAAenoD,UAAYA,UAAUvJ,MAAM,KAAK29B,MAAM33C,OAAS,EAAI2rE,4CACnEh0C,SAAUA,e,oEAxF1B,0DACA,iEAEA,iEACA,uEACA,yDACA,yC,sdAEO,MAAM6zC,kBAAoBtrD,0BAAO2e,GAAI;;8CAIrC,MAAM4sC,aAAevrD,0BAAO2e,GAAI;;;;;;;;oCAUhC,MAAM0sC,MAAQrrD,0BAAO2e,GAAI;;;;;;6JCYjB,UAAyB,SACtCrrB,SADsC,kBAEtCqxB,kBAFsC,qBAGtCC,qBAHsC,iBAItCrD,iBAJsC,QAKtCsD,QALsC,uBAMtC3C,uBANsC,wBAOtCL,wBAPsC,0BAQtCC,0BARsC,UAStCze,YAEA,MAAO40C,OAAQn4C,YAAa,SAAA1iC,WAAS,GAE/BmnD,UAAW,SAAA9gD,aAAaioF,KAC5B5rD,UAAW6rD,aAAgBA,aAC1B,IAEH,OACE,6BAAC,qBAAD,CAAatrF,SAAS,QAAQ43E,OAAQA,OAAQ1zB,SAAUA,SAAUlnB,SAAW,kBAAiBgG,WAC5F,6BAAC,cAAD,CAAM3F,OAAK,EAACimB,MAAI,EAAC7mB,QAASynB,SAAUt0C,MAAO,CAAEwzC,QAAS,YACpD,6BAAC,sBAAD,OAEF,6BAAC,cAAD,KACE,6BAAC,MAAAmoC,KAAD,CACE37E,MAAK,eAAIwzC,QAAS,UAAckB,kBAAoBknC,oBAAiB92E,GACrE+nB,QAAS,KACH6nB,oBAGJ9C,wBAAwBgD,QAAS,GACjC/kB,WAAU,MAEZ,6BAACgsD,aAAD,KACE,qCAAM77E,MAAO,CAAE+J,aAAc,IAA7B,oBACA,6BAAC,0BAAD,CAAkBg7B,KAAM,CAAC,MAAO,aAGpC,6BAAC,MAAA42C,KAAD,CACE37E,MAAK,eAAIwzC,QAAS,UAAckB,kBAAoBknC,oBAAiB92E,GACrE+nB,QAAS,KACH6nB,oBAGJ7C,0BAA0B+C,QAAS,GACnC/kB,WAAU,MAEZ,6BAACgsD,aAAD,KACE,qCAAM77E,MAAO,CAAE+J,aAAc,IAA7B,sBACA,6BAAC,0BAAD,CAAkBg7B,KAAM,CAAC,QAAS,aAGrCuM,kBACC,0DACE,6BAAC,MAAAqqC,KAAD,CACE37E,MAAO20C,qBAAuBinC,eAAiB,GAC/C/uD,QAAS,KACH8nB,uBAGJ/C,wBAAwBgD,QAAS,GACjC/kB,WAAU,MAPd,4BAWA,6BAAC,MAAA8rD,KAAD,CACE37E,MAAO20C,qBAAuBinC,eAAiB,GAC/C/uD,QAAS,KACH8nB,uBAGJ9C,0BAA0B+C,QAAS,GACnC/kB,WAAU,MAPd,+BAaHuD,WACC,6BAAC,MAAAuoD,KAAD,CACE9uD,QAAS,KACPivD,mBAAUC,KAAK3oD,WACfvD,WAAU,KAHd,mBAQDxM,UACC,6BAAC,MAAAs4D,KAAD,CACEvuD,SAAW,gCAA+BgG,UAC1CvG,QAAS,KACPolB,uBAAuB,CAAE97B,KAAMid,UAAW/P,oBAC1CwM,WAAU,KAJd,0B,8BAzHV,oEACA,uDACA,iEAGA,6DACA,sDACA,oEACA,uDACA,4D,siCAGA,MAAM+rD,eAAiB,CAAEpsD,OAAQ,cAAel6B,MAFhD,wBAEuDI,OAAOm/C,YAExDgnC,aAAe9rD,0BAAO2e,GAAI;;;;yBAkBF,I,sICcf,UAA0B,KAAE3J,KAAF,YAAQ8rB,YAAR,oBAAqBmrB,sBAC5D,OACE,6BAACC,kBAAD,KACGprB,aACC,6BAAChuB,aAAD,CAAc7iC,MAAOg8E,oBAAsB,CAAEhuF,MAAOguF,qBAAwB,IAAKnrB,aAEnF,yCACG9rB,KAAKjiC,IAAI,CAACnJ,IAAK2U,MACd,6BAAC4tE,YAAD,CAAaviF,IAAK2U,IAAKtO,MAAOsO,IAAMy2B,KAAKl1B,OAAS,EAAI,CAAE8xB,YAAa,GAAM,IACzE,6BAACw6C,KAAD,KAAOxiF,UAvDnB,0DACA,iEAEA,8C,kFAEA,MAAMsiF,kBAAoBlsD,0BAAO2e,GAAI;;;;;;EAQ/B7L,aAAe9S,0BAAO2e,GAAI;;EAI1BwtC,YAAcnsD,0BAAO2e,GAAI;;;WAGpBh5C,6BAAOu4E;sBACIv4E,6BAAO0mF;mBACVC,8BAAQ/e;eACZgf,+BAAShf;;;;;EAOlB6e,KAAOpsD,0BAAOwsD,GAAI;WACb7mF,6BAAOu4E;;;;;8BAKYv4E,6BAAO0mF;;sNCrCrC,I,IAAA,Y,IAAA,2B,qMAIO,MAAMI,OAAS,CACpBC,OAAO,sBAAU,SACjB5oC,KAAK,sBAAU,OACf6oC,MAAM,sBAAU,QAChBC,MAAM,sBAAU,QAChBC,MAAM,sBAAU,QAChBC,OAAO,sBAAU,SACjBC,MAAM,sBAAU,QAChBhwD,MAAM,sBAAU,QAChBq0B,QAAQ,sBAAU,UAClB47B,SAAS,sBAAU,WACnB/kB,QAAQ,sBAAU,UAClBiW,MAAM,sBAAU,YAChB+O,UAAU,sBAAU,QACpBC,QAAQ,sBAAU,WAGb,SAASC,QAAQ3sF,OAAoBoC,MAAe2C,OACzD,MAAM6nF,QAAU7nF,MAAM8nF,QACtBD,QAAQ3qF,GAAK,IACbjC,OAAOoC,OAASwqF,QAAQnyF,EACxBuF,OAAOoC,MAAQ,GAAKwqF,QAAQlyF,EAC5BsF,OAAOoC,MAAQ,GAAKwqF,QAAQjyF,EAC5BqF,OAAOoC,MAAQ,GAAKwqF,QAAQ3qF,E,sBAGvB,MAAM0tB,kBAAoB,MAC/B,MAAM1U,KAAO,IAAIpd,WAAW,MAG5B,IAAK,IAAI/B,EAAI,EAAGA,GAAK,IAAKA,IAAK,CAC7B,MAAMyoF,EAAI,EAAIzoF,EAAI,IAElB6wF,QAAQ1xE,KADQ,EAAJnf,EACOgxF,mBAAUzvB,UAAU,CAAE5iE,EAAG8pF,EAAG7pF,EAAG6pF,EAAG5pF,EAAG4pF,KAI1D,IAAK,IAAIzoF,EAAI,IAAKA,GAAK,IAAKA,IAAK,CAE/B6wF,QAAQ1xE,KADQ,EAAJnf,GACO,sBAAU,SAI/B,IAAK,IAAIA,EAAI,IAAKA,GAAK,IAAKA,IAAK,CAC/B,MACMyoF,GAAKzoF,EAAI,KAAL,IACV6wF,QAAQ1xE,KAFQ,EAAJnf,EAEOgxF,mBAAUzvB,UAAU,CAAE5iE,EAAG8pF,EAAG7pF,EAAG,GAAKC,EAAG,GAAKsH,EAAG1H,KAAKwyB,IAAI,EAAIw3D,EAAG,OAapF,OATAoI,QAAQ1xE,KAAM,KAASgxE,OAAOvO,KAAKpwB,SAAS,KAC5Cq/B,QAAQ1xE,KAAM,KAASgxE,OAAOr7B,OAAOtD,SAAS,KAC9Cq/B,QAAQ1xE,KAAM,KAASgxE,OAAOI,KAAK/+B,SAAS,KAC5Cq/B,QAAQ1xE,KAAM,KAASgxE,OAAOxkB,OAAOna,SAAS,KAC9Cq/B,QAAQ1xE,KAAM,IAASgxE,OAAOS,OAAOp/B,SAAS,KAC9Cq/B,QAAQ1xE,KAAM,IAASgxE,OAAOE,KAAK7+B,SAAS,KAC5Cq/B,QAAQ1xE,KAAM,IAASgxE,OAAOG,KAAK9+B,SAAS,KAC5Cq/B,QAAQ1xE,KAAM,IAASgxE,OAAOM,KAAKj/B,SAAS,KAErCryC,MAjCwB,GAuCjC,SAAS8xE,aAAajvF,MACpB,GAAIA,gBAAgBkvF,UAClB,OAAO,IAAInvF,WAAWC,KAAKkC,OAAQlC,KAAKmvF,WAAYnvF,KAAK4d,YAE3D,MAAMtY,OAAS,IAAIvF,WAAWC,KAAKwhB,QACnC,IAAK,IAAIxjB,EAAI,EAAGA,EAAIgC,KAAKwhB,OAAQxjB,IAC/BsH,OAAOtH,GAAKgC,KAAKhC,GAEnB,OAAOsH,O,4CAGT,MAAM8pF,kBAMJppF,YAAYxF,KAAWsD,QAA8B,iHACnDyH,KAAKzH,OAASA,OACdyH,KAAK/K,KAAOA,KACZ,MAAM,KAAE6D,KAAF,KAAQrE,MAAS8D,OAEvByH,KAAK8jF,QAAU7uF,KAAK6uF,QAAQ,CAC1BjvF,OAAQ,QACRkvF,QAAQ,EACRtvF,KAAMivF,aAAajvF,MACnBL,MAAO0E,KAAK1E,MACZQ,OAAQkE,KAAKlE,SASjBovF,WAAWzrF,QACT,GAAIyH,KAAKzH,SAAWA,OAClB,OAAOyH,KAAK8jF,QAEd9jF,KAAKzH,OAASA,OACd,MAAM,KAAEO,KAAF,KAAQrE,MAAS8D,OAQvB,OAPAyH,KAAK8jF,QAAU9jF,KAAK8jF,QAAQ,CAC1BjvF,OAAQ,QACRkvF,QAAQ,EACRtvF,KAAMivF,aAAajvF,MACnBL,MAAO0E,KAAK1E,MACZQ,OAAQkE,KAAKlE,SAERoL,KAAK8jF,S,qBAIT,MAKLrpF,YAAYxF,MAAW,6BAJkB,IAIlB,oCACrB+K,KAAK/K,KAAOA,KAId2U,IAAIrR,QACF,MAAM,KAAEgkB,MAAShkB,OACX+W,KAAOtP,KAAKikF,MAAM1nE,MACxB,IAAKjN,KAAM,CAET,MAAM40E,MAAQ,IAAIL,kBAAkB7jF,KAAK/K,KAAMsD,QAE/C,OADAyH,KAAKikF,MAAM1nE,MAAQ2nE,MACZA,MAAMJ,QAEf,OAAOx0E,KAAK00E,WAAWzrF,W,6IC5I3B,U,4WAAA,yBACA,+BAEA,sEACA,oEACA,6EACA,gCACA,gEACA,6DACA,uDACA,yDACA,+DACA,qEAGA,yC,sPAgBA,MAAM2rB,8BAA8BpyB,MAAMsrE,UAAiB,qEAI7C,CAAC3jE,MAAeyqF,MAAoC5yC,gBAC9DtxC,KAAKzO,MAAM25B,WAAW,CACpBi5D,mBAAoBD,MAAMp6C,YAC1Bs6C,aAAcF,MAAM3nE,OAEtB+0B,aAAa1O,SAT0C,+CAY9Bja,SACzB,MACEqC,QAAQ,cAAE9D,eADN,WAEJgE,YACElrB,KAAKzO,MACT,OACE,oBAAC,2BAAD,CACE21B,cAAeA,cACfob,SAAW+hD,kBAAqBn5D,WAAW,CAAEhE,cAAem9D,mBAC5D17D,OAAQA,OACRm+B,oBAAqB,kCACrBC,qBAAsB5/B,sCAK5BjhB,SACE,MAAM,iBAAE8oB,iBAAF,OAAoBhE,QAAWhrB,KAAKzO,OACpC,mBAAE4yF,mBAAF,aAAsBC,aAAtB,cAAoCE,cAApC,cAAmDp9D,eAAkB8D,OAE3E,IACIyc,WAAY88C,oBADZC,cAAe,EAQnB,OAN0B,MAAtBL,oBAA8C,MAAhBC,eAChCI,cAAe,EACf/8C,YAAa,QAAAwC,iBAAgB,CAAEH,YAAaq6C,mBAAoB5nE,KAAM6nE,aAAcl6C,MAAO,EAAGvgB,QAAS,KACvG46D,oBAAsBC,cAAe,QAAA36C,gBAAes6C,mBAAoBC,cAAgB,MAIxF,oBAAC,cAAD,CAAMnS,QAAM,EAACwS,SAAO,EAAClxD,KAAG,GACtB,oBAAC,4BAAD,CAAoB1L,MAAOX,eACvBvwB,SACA,MAAM4sC,aAAekE,WAAa9wC,OAAO0tE,gBAAgBz6D,IAAI69B,YAAc,KAE3E,OACE,wCACE,oBAAC,sBAAD,CACEyG,UAAQ,EACRD,YAAaA,mCACby2C,gBAAiB1kF,KAAK2kF,wBAAwB3kF,KAAKzO,MAAMo3B,SACzD,oBAAC,sBAAD,CACE2a,YAAakhD,aAAeD,oBAAsB,sBAClD9kE,MAAO9oB,OAAO+tE,0BACdrhC,YAAc6gD,OAAUA,MAAM7vD,YAC9B+O,aAAe8gD,OAAUA,MAAM76E,GAC/Bm5B,SAAUxiC,KAAKykC,UACflB,aAAcA,aACdK,WAAY,CAAEhvC,OAAQ,WAGzB2uC,aACC,oBAAC,0BAAD,CACEzqC,KAAMyqC,aACN+gD,cAAeA,cACfM,sBAAwBC,kBACtB7kF,KAAKzO,MAAM25B,WAAW,CAAEo5D,cAAeO,mBAEzC39D,cAAeA,cACf8H,iBAAkBA,mBAElByY,WACF,oBAAC,oBAAD,qCAC+B,gCAAO88C,sBAGtC,oBAAC,oBAAD,yC,gBA7EZrgE,sB,YACe,yB,gBADfA,sB,gBAE2B,CAAEgD,cAAeC,oC,cAsFnC,QAAAyiB,MAAI,kBAAc1lB,wB,uKCvHjC,wEACA,kEACA,4DACA,+BACA,M,4WAAA,yBACA,mCACA,gEACA,iEAEA,0EACA,gCACA,uDACA,sDACA,yDACA,gCACA,4CACA,+D,sPAGA,MAUM4gE,aAAe3uD,0BAAO2e,IAAI3M,MAAM,EAAGm8C,gCAAH,CACpCl+E,MAAO,CAAE1L,KAAS,IAAM4pF,cAAR,OACd;;;;;;;;;;;;;;;;;;;0BAmBsBxoF,sBAAOipF;;;EAK3BC,cAAgB7uD,0BAAO8uD,KAAM;;;;;;;;;;;;;;;;;;;;EA6B7BC,YAAc,CAElB,IACA,KACA,SACA,OACA,KACA,OACA,IACA,SACA,QACA,KACA,KACA,KACA,KACA,KAGF,SAASC,SAAS1rF,OAChB,MAAO,CACL2rF,QAAQ,yBAAa3rF,MAAO,CAC1ByrF,wBACAG,kBAAmB,CACjBjkE,KAAM,CAAC,QAAS,QAChBkkE,GAAI,CAAC,WACLC,GAAI,CAAC,eAOb,MAAMC,aAAe,IAAI5oB,OAAQ,KAAIsoB,YAAY3+C,KAAK,SAEhDk/C,uBAAwB,YAAAvnF,gBAC3ByrB,SAAqCA,QACrCA,UACSA,QAAQ0O,QAAU,IAAInvB,IAAK6gC,KAC1B,CACLhqC,IAAKgqC,GAAGhqC,IACR2lF,QAASF,aAAazkD,KAAKgJ,GAAGhqC,KAAOolF,SAASp7C,GAAGhqC,UAAOmL,EACxDzR,MAAOswC,GAAGtwC,MACVksF,UAAWH,aAAazkD,KAAKgJ,GAAGtwC,OAAS0rF,SAASp7C,GAAGtwC,YAASyR,MAOtE,MAAM06E,yBAAyB9zF,MAAMsrE,UAAoB,iEAC/C,CACNyoB,kBAAoB,IAAInyF,MAF6B,iCAK3C5B,MAAM+wC,aALqC,wCAqBnChB,QAClBA,MAAMlP,iBACN7tB,OAAOs9B,iBAAiB,YAAapiC,KAAK8lF,kBAC1ChhF,OAAOs9B,iBAAiB,UAAWpiC,KAAK+lF,kBAxBa,sCA2BtC,KACfjhF,OAAOi9B,oBAAoB,YAAa/hC,KAAK8lF,oBA5BQ,wCA+BnCjkD,QAClB,MAAM,UACJmkD,UACAz0F,OAAO,sBAAEqzF,wBACP5kF,KAEJ,IAAKgmF,UAAUnlE,UAAY+jE,sBACzB,OAGF,MAAM,KAAElqF,KAAF,MAAQ2V,OAAU21E,UAAUnlE,QAAQ4+B,wBAE1CmlC,uBADsB,UAAAqB,QAAOpkD,MAAMt/B,QAAU7H,OAAS2V,MAAQ3V,MA5JvC,GA4JkE,OA1CpC,+CA+D5B29B,SACzB,MAAM,KAAEv/B,KAAF,cAAQouB,cAAR,iBAAuB8H,kBAAqBhvB,KAAKzO,MACvD,IAAI20F,oBAAqB,EACrBC,eAAgB,EACpB,OAAO9tD,OAAOnvB,IAAI,CAAC6gC,GAAIr1B,OACrB,MAAM0xE,cAAgBr8C,GAAGtwC,QAAUswC,GAAGhqC,IAAIk3B,WAAW,OAAS8S,GAAGhqC,IAAIk3B,WAAW,OAC1EovD,cAAgBt8C,GAAGhqC,MAAQgqC,GAAGtwC,MAAMw9B,WAAW,OAAS8S,GAAGtwC,MAAMw9B,WAAW,OAClF,GAAImvD,cAAgBC,aAAc,CAChC,MAAM9pE,KAAOwtB,GAAGhqC,IAAMgqC,GAAGtwC,MAGzB,OAFAysF,mBAAqBlmF,KAAKhC,MAAM6nF,kBAAkB1hF,IAAIoY,MACtD4pE,eAAgB,EAEd,0BAAIpmF,IAAK2U,IAAKye,UAAW/sB,gCAAMkgF,QAASrzD,QAAS,IAAMjzB,KAAKumF,eAAehqE,OACzE,0BAAIiqE,QAAS,GAAIjqE,OAGhB,GAAI2pE,mBACT,OAAIC,cACK,MAETA,eAAgB,EAEd,0BAAIpmF,IAAK2U,KACP,0BAAI8xE,QAAS,EAAGrzD,UAAW/sB,gCAAMqgF,kBAAjC,OAQN,MAAMC,UAAa,GAAEx/D,yCAAyCpuB,KAAKuB,OAAOyvC,wBACxEhxC,KAAKuB,OAAOkiB,0BACQwtB,GAAGhqC,cACzB,IAAI4mF,sBAAwB,KAqB5B,OApBI58C,GAAGtwC,OAASswC,GAAGtwC,MAAMwc,OAAS,IAChC0wE,sBAAyBtpF,MAAM6T,OAAO64B,GAAGtwC,QAUvC,oBAAC,cAAD,CACEqgD,MAAI,EACJ3mB,UAAW/sB,gCAAMwgF,qBACjB3zD,QAAS,KAAM,oBAAA4zD,kCAAiC73D,iBAAkB03D,WAClE1wD,QAAQ,qBACR,oBAAC,wBAAD,OAdF,oBAAC,cAAD,CACE8jB,MAAI,EACJtmB,SAAS,iBACTL,UAAW/sB,gCAAM0gF,SACjB7zD,QAAS,KAAM,QAAA8zD,sBAAqB/3D,iBAAkB03D,WACtD1wD,QAAQ,cACR,oBAAC,0BAAD,QAaJ,0BAAIj2B,IAAK2U,IAAKye,UAAW/sB,gCAAMm1B,KAC5Bv7B,KAAKgnF,oBAAoB5gF,gCAAM6gF,QAASl9C,GAAG27C,QAAS37C,GAAGhqC,KACvDC,KAAKgnF,oBAAoB5gF,gCAAM8gF,UAAWn9C,GAAG47C,UAAW57C,GAAGtwC,MAAOktF,4BA9G3EJ,eAAehqE,MACb,MAAMspE,kBAAoB,IAAInyF,IAAIsM,KAAKhC,MAAM6nF,mBACzCA,kBAAkB1hF,IAAIoY,MACxBspE,kBAAkBvhB,OAAO/nD,MAEzBspE,kBAAkBh8D,IAAItN,MAExBvc,KAAK2hC,SAAS,CAAEkkD,sCA4BlB7gF,uBACEF,OAAOi9B,oBAAoB,YAAa/hC,KAAK8lF,kBAC7ChhF,OAAOi9B,oBAAoB,UAAW/hC,KAAK+lF,gBAG7CiB,oBAAoBG,IAAaC,KAA2BpG,IAAa2F,uBACvE,OAAIS,KACK,0BAAIj0D,UAAW/sB,gCAAM8gF,UAAWG,wBAAyBD,OAGhE,0BAAIj0D,UAAW/sB,gCAAM8gF,WAClBlG,KAAO,IACP2F,uBAqEPzgF,SACE,MACEpN,MAAM,OAAEuB,OAAF,YAAUg6B,aADZ,cAEJiwD,cAFI,iBAGJt1D,iBAHI,cAIJ9H,eACElnB,KAAKzO,MACH+1F,YAAclhF,gCAAO,WAASukC,kBAAYtwC,OAAO6vC,QAAU,YAEjE,OACE,oBAAC,cAAD,CAAM+nC,QAAM,GAEV,2BAAK7rE,MAAO,CAAE5P,SAAU,WAAY5B,OAAQ,SAE1C,oBAACkwF,aAAD,CAAcyC,0BAAA,EAAuBjD,cAAeA,cAAe99E,YAAaxG,KAAKwnF,mBACrF,oBAACxC,cAAD,CAAe1+E,IAAKtG,KAAKgmF,WACvB,iCAEE,0BAAI5/E,MAAO,CAAExR,OAAQ,IACnB,0BAAIwR,MAAO,CAAEwzC,QAAS,EAAGxlD,MAAU,IAAMkwF,cAAR,IAA0BmD,YAAa,UACxE,0BAAIrhF,MAAO,CAAEwzC,QAAS,EAAG8tC,WAAY,WAEvC,0BAAIv0D,WAAW,uBAAG/sB,gCAAMkgF,QAASgB,cAC/B,oBAAC,iBAAD,CACE3zC,UAAU,QACVD,SACE,+CACe,gCAAOr5C,OAAOyvC,aAC3B,+BAFF,SAGQ,gCAAOzvC,OAAOkiB,QAGxB,0BAAIiqE,QAAS,GAAInyD,eAGrB,0BAAIlB,WAAW,uBAAG/sB,gCAAMm1B,IAAK+rD,cAC3B,0BAAId,QAAS,GACVnsF,OAAOsvB,QAAS,IACjB,oBAAC,cAAD,CACEmwB,MAAI,EACJ3mB,UAAW/sB,gCAAMwgF,qBACjB3zD,QAAS,KACP,oBAAA4zD,kCACE73D,iBACC,GAAE9H,yCAAyC7sB,OAAOyvC,wBACjDzvC,OAAOkiB,kBAIbyZ,QAAQ,qBACR,oBAAC,wBAAD,SAILh2B,KAAK2nF,wBAAwBlC,sBAAsBprF,c,gBArL5DurF,iB,eAOkB,CACpBtB,cAAe,K,aAsLJsB,iB,4OC1Uf,IAAIjlD,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,m7FAAo7F,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,kGAAkG,6EAA6E,MAAQ,GAAG,SAAW,gZAAgZ,KAAO,+BAA+B,eAAiB,CAAC,stCAAwtC,orDAAorD,WAAa,MAG/gNquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,KAAQ,kFACR,QAAW,qFACX,YAAa,uFACb,cAAe,yFACf,eAAgB,0FAChB,eAAgB,0FAChB,iBAAkB,4FAClB,QAAW,qFACX,iBAAoB,8FACpB,SAAY,sFACZ,qBAAwB,kGACxB,IAAO,mF,8BCrCRD,OAAOE,QAAU,osE,mDCEjB,WACA,SAASz3B,GAAG3W,GAAK,OAAOA,EAAE,GAC1B,IAAIknC,QAAU,CACVguD,WAAO18E,EACP28E,YAAa,CACb,CAAC,KAAQ,cAAe,QAAW,CAAC,eAAgB,YAAex+E,IACnE,CAAC,KAAQ,cAAe,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC1E,CAAC,KAAQ,cAAe,QAAW,CAAC,YAAa,YAAe6B,IAChE,CAAC,KAAQ,cAAe,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC1E,CAAC,KAAQ,OAAQ,QAAW,CAAC,YAAa,cAAe,eAAgB,YAAgBA,IAAM,CAAGgyB,UAAWhyB,EAAE,GAAI4nC,YAAa5nC,EAAE,IAAM,GAAIsgF,SAAUtgF,EAAE,MACxJ,CAAC,KAAQ,YAAa,QAAW,CAAC,iBAClC,CAAC,KAAQ,YAAa,QAAW,CAAC,YAAa,gBAAiB,YAAe,SAAiBA,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAC1H,CAAC,KAAQ,KAAM,QAAW,CAAC,aAAc,YAAgBA,GAAMA,EAAE,GAAG++B,KAAK,KACzE,CAAC,KAAQ,iBAAkB,QAAW,CAAC,UACvC,CAAC,KAAQ,iBAAkB,QAAW,CAAC,iBAAkB,SAAU,YAAe,SAAiB/+B,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAC7H,CAAC,KAAQ,UAAW,QAAW,CAAC,kBAAmB,YAAgBA,IAAM,CAAG/N,MAAOqjC,SAASt1B,EAAE,GAAG++B,KAAK,KAAMiK,KAAMhpC,EAAE,GAAG++B,KAAK,OAC5H,CAAC,KAAQ,iBAAkB,QAAW,CAAC,UACvC,CAAC,KAAQ,iBAAkB,QAAW,CAAC,iBAAkB,SAAU,YAAe,SAAiB/+B,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAC7H,CAAC,KAAQ,UAAW,QAAW,CAAC,CAAC,QAAU,KAAM,kBAAmB,YAAgBA,IAAM,CAAG/N,OAAQqjC,SAASt1B,EAAE,GAAG++B,KAAK,KAAMiK,KAAM,IAAIhpC,EAAE,GAAG++B,KAAK,OAClJ,CAAC,KAAQ,gBAAiB,QAAW,IACrC,CAAC,KAAQ,gBAAiB,QAAW,CAAC,gBAAiB,QAAS,YAAe,SAAiB/+B,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAC1H,CAAC,KAAQ,SAAU,QAAW,CAAC,CAAC,QAAU,KAAM,gBAAiB,CAAC,QAAU,MAAO,YAAgBA,IAAM,CAAG/N,MAAO+N,EAAE,GAAG++B,KAAK,IAAKiK,KAAM,IAAIhpC,EAAE,GAAG++B,KAAK,UACtJ,CAAC,KAAQ,gBAAiB,QAAW,IACrC,CAAC,KAAQ,gBAAiB,QAAW,CAAC,gBAAiB,QAAS,YAAe,SAAiB/+B,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAC1H,CAAC,KAAQ,SAAU,QAAW,CAAC,CAAC,QAAU,KAAO,gBAAiB,CAAC,QAAU,MAAQ,YAAgBA,IAAM,CAAG/N,MAAO+N,EAAE,GAAG++B,KAAK,IAAKiK,KAAM,IAAIhpC,EAAE,GAAG++B,KAAK,UACxJ,CAAC,KAAQ,kBAAmB,QAAW,CAAC,MAAO,YAAel9B,IAC9D,CAAC,KAAQ,kBAAmB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC9E,CAAC,KAAQ,WAAY,QAAW,CAAC,CAAC,QAAU,KAAM,mBAAoB,YAAe,CAACA,EAAGqrC,OAAQ,CAAGp5C,MAAO,CAAC61C,aAAc9nC,EAAE,IAAM,GAAIsrC,SAAUD,KAAOrC,KAAM,KAAIhpC,EAAE,IAAM,OACzK,CAAC,KAAQ,QAAS,QAAW,CAAC,WAAY,YAAgBA,GAAMA,EAAE,IAClE,CAAC,KAAQ,QAAS,QAAW,CAAC,UAAW,YAAgBA,GAAMA,EAAE,IACjE,CAAC,KAAQ,iBAAkB,QAAW,CAAC,CAAC,QAAU,KAAM,CAAC,QAAU,KAAM,CAAC,QAAU,KAAM,CAAC,QAAU,MAAO,YAAe,SAAgBA,GAAI,OAAOA,EAAE++B,KAAK,MAC7J,CAAC,KAAQ,QAAS,QAAW,CAAC,kBAAmB,YAAgB/+B,IAAM,CAAG/N,OAAO,EAAM+2C,KAAM,UAC7F,CAAC,KAAQ,iBAAkB,QAAW,CAAC,CAAC,QAAU,KAAM,CAAC,QAAU,KAAM,CAAC,QAAU,KAAM,CAAC,QAAU,KAAM,CAAC,QAAU,MAAO,YAAe,SAAgBhpC,GAAI,OAAOA,EAAE++B,KAAK,MAC9K,CAAC,KAAQ,QAAS,QAAW,CAAC,kBAAmB,YAAgB/+B,IAAM,CAAG/N,OAAO,EAAO+2C,KAAM,WAC9F,CAAC,KAAQ,QAAS,QAAW,CAAC,YAAa,YAAgBhpC,GAAMA,EAAE,IACnE,CAAC,KAAQ,mBAAoB,QAAW,CAAC,YACzC,CAAC,KAAQ,mBAAoB,QAAW,CAAC,mBAAoB,WAAY,YAAe,SAAiBA,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OACnI,CAAC,KAAQ,YAAa,QAAW,CAAC,oBAAqB,YAAgBA,GAAMA,EAAE,GAAG++B,KAAK,KACvF,CAAC,KAAQ,iBAAkB,QAAW,CAAC,MAAO,YAAel9B,IAC7D,CAAC,KAAQ,iBAAkB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC7E,CAAC,KAAQ,UAAW,QAAW,CAAC,CAAC,QAAU,KAAM,kBAAmB,YAAgBA,GAAMA,EAAE++B,KAAK,KACjG,CAAC,KAAQ,qBAAsB,QAAW,IAC1C,CAAC,KAAQ,qBAAsB,QAAW,CAAC,qBAAsB,sBAAuB,YAAe,SAAiB/+B,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAClJ,CAAC,KAAQ,qBAAsB,QAAW,CAAC,CAAC,QAAU,MAAO,YAAe6B,IAC5E,CAAC,KAAQ,qBAAsB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OACjF,CAAC,KAAQ,cAAe,QAAW,CAAC,qBAAsB,sBAAuB,YAAgBA,GAAMA,EAAE,GAAGwzB,OAAO,CAAChd,IAAK5gB,MAAQ4gB,IAAIzM,OAAOnU,KAAM,IAAImU,OAAO/J,EAAE,GAAK,CAAC,CAAE6L,KAAM,OAAQkJ,KAAM,KAAQ,KACnM,CAAC,KAAQ,4BAA6B,QAAW,CAAC,SAAU,YAAelT,IAC3E,CAAC,KAAQ,4BAA6B,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OACxF,CAAC,KAAQ,4BAA6B,QAAW,CAAC,UAAW,YAAe6B,IAC5E,CAAC,KAAQ,4BAA6B,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OACxF,CAAC,KAAQ,qBAAsB,QAAW,CAAC,CAAC,QAAU,KAAM,OAAQ,4BAA6B,6BAA8B,YAAgBA,GAAM,CAACA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAIyX,OAAOvsB,GAAW,OAANA,IACpL,CAAC,KAAQ,qBAAsB,QAAW,CAAC,UAAW,YAAe2W,IACrE,CAAC,KAAQ,OAAQ,QAAW,CAAC,MAAO,YAAgB7B,IAAM,CAAG6L,KAAM,OAAQkJ,KAAM/U,EAAE,MACnF,CAAC,KAAQ,WAAY,QAAW,CAAC,WAAY,YAAgBA,GAAOA,EAAE,GAAQ,OAC9E,CAAC,KAAQ,WAAY,QAAW,CAAC,YAAa,YAAgBA,GAAOA,EAAE,GAAQ,OAC/E,CAAC,KAAQ,QAAS,QAAW,CAAC,CAAC,QAAU,KAAM,WAAY,CAAC,QAAU,MAAO,YAAgBA,IAAM,CAAG6L,KAAM,QAASrK,MAAOxB,EAAE,GAAIsO,IAAKtO,EAAE,MACzI,CAAC,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAe6B,IACjE,CAAC,KAAQ,eAAgB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC3E,CAAC,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAe6B,IACjE,CAAC,KAAQ,eAAgB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC3E,CAAC,KAAQ,QAAS,QAAW,CAAC,CAAC,QAAU,KAAM,eAAgB,CAAC,QAAU,KAAM,eAAgB,CAAC,QAAU,MAAO,YAAgBA,IAAM,CAAG6L,KAAM,QAASrK,MAAgB,OAATxB,EAAE,GAAc,EAAIA,EAAE,GAAIsO,IAAc,OAATtO,EAAE,GAAcu2B,IAAWv2B,EAAE,MAC7N,CAAC,KAAQ,oBAAqB,QAAW,IACzC,CAAC,KAAQ,oCAAqC,QAAW,CAAC,CAAC,QAAU,KAAM,OAC3E,CAAC,KAAQ,oBAAqB,QAAW,CAAC,oBAAqB,qCAAsC,YAAe,SAAiBA,GAAI,OAAOA,EAAE,GAAG+J,OAAO,CAAC/J,EAAE,OAC/J,CAAC,KAAQ,aAAc,QAAW,CAAC,KAAM,qBAAsB,YAAgBA,GAAM,CAACA,EAAE,IAAI+J,OAAO/J,EAAE,GAAG0B,IAAK1B,GAAMA,EAAE,MACrH,CAAC,KAAQ,gBAAiB,QAAW,CAAC,cAAe,YAAe6B,IACpE,CAAC,KAAQ,gBAAiB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC5E,CAAC,KAAQ,SAAU,QAAW,CAAC,CAAC,QAAU,KAAM,gBAAiB,CAAC,QAAU,MAAO,YAC/E,CAACA,EAAGqrC,OAAQ,CACVx/B,KAAM,SACNqe,KAAMlqB,EAAE,IAAM,GACd/N,WAAOyR,EACPmnC,QAASQ,IAAI,EACbE,SAAUF,IAAI,EACdrC,MAAOhpC,EAAE,IAAM,IAAI++B,KAAK,QAG9B,CAAC,KAAQ,gBAAiB,QAAW,CAAC,cAAe,YAAel9B,IACpE,CAAC,KAAQ,gBAAiB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC5E,CAAC,KAAQ,kBAAmB,QAAW,CAAC,CAAC,QAAU,KAAM,CAAC,QAAU,MAAO,YAAe,SAAgBA,GAAI,OAAOA,EAAE++B,KAAK,MAC5H,CAAC,KAAQ,SAAU,QAAW,CAAC,CAAC,QAAU,KAAM,gBAAiB,kBAAmB,QAAS,CAAC,QAAU,MAAO,YAC3G,CAAC/+B,EAAGqrC,OAAQ,CACVx/B,KAAM,SACNqe,KAAMlqB,EAAE,IAAM,GACd/N,MAAO+N,EAAE,GAAG/N,MACZ44C,QAASQ,IAAI,EACbE,SAAUF,IAAI,GAAGrrC,EAAE,IAAM,IAAI++B,KAAK,KAAKtwB,OAAOzO,EAAE,GAAGyO,OACnDu6B,KAAM,IAAIhpC,EAAE,IAAM,IAAI++B,KAAK,SAAS/+B,EAAE,GAAGgpC,UAG/C,CAAC,KAAQ,oBAAqB,QAAW,CAAC,CAAC,QAAU,KAAM,CAAC,QAAU,MAAO,YAAe,SAAgBhpC,GAAI,OAAOA,EAAE++B,KAAK,MAC9H,CAAC,KAAQ,kBAAmB,QAAW,CAAC,MAAO,YAAel9B,IAC9D,CAAC,KAAQ,kBAAmB,QAAW,GAAI,YAAe,SAAS7B,GAAI,OAAO,OAC9E,CAAC,KAAQ,WAAY,QAAW,CAAC,oBAAqB,mBAAoB,YAAgBA,GAAMA,EAAE,IAAM,KAExGugF,YAAa,aAE6C,IAAnBnnD,OAAOE,QAC/CF,OAAOE,QAAUlH,QAEjB90B,OAAO80B,QAAUA,QApGpB,I,mJCMA,MAkBaoiB,cAAgCr+C,OAAOwtC,KAlB9B,CACpB68C,KAAM,KACNC,KAAM,KACNjsD,MAAO,KACPE,MAAO,KACPD,OAAQ,KACRE,MAAO,KACP+rD,OAAQ,KACRC,MAAO,KACPC,OAAQ,KACRhsD,QAAS,KACTisD,QAAS,KACTC,OAAQ,KACRve,KAAM,KACNhpB,SAAU,O,uFCrBZ,IAAIpgB,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAmEy1B,QAASlS,SAEtFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAA+D,IAKlFtG,KAAK,CAACoG,OAAOnuC,EAAI,0/LAA2/L,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,+EAA+E,4EAA4E,yEAAyE,MAAQ,GAAG,SAAW,+2CAA+2C,KAAO,oBAAoB,eAAiB,CAAC,uhFAA2hF,mrDAAmrD,yDAAyD,WAAa,MAG19XquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,KAAQ,+DACR,eAAkB,yEAClB,aAAgB,uEAChB,kBAAqB,4EACrB,oBAAuB,8EACvB,oBAAuB,8EACvB,eAAkB,2E,6ICxBnB,U,4WAAA,yBAGA,+EACA,yDACA,8B,kFAMe,MAAM0nD,8BAA8Bz2F,MAAMsvC,cACvDl7B,SACE,MAAM,QAAE8vB,SAAYh2B,KAAKzO,MACnBkI,MAAiC,iBAAlBu8B,QAAQv8B,MAAqBu8B,QAAQv8B,MAAQkZ,KAAKsjC,UAAUjgB,QAAQv8B,QACnF,YAAE6iD,YAAF,YAAeC,aAAgBvmB,QAAQ1mB,KACvCqxB,QACJ,2BAAKxN,UAAWC,qCAAOC,MACrB,+BACE,4BAAMF,UAAWC,qCAAO1N,OAAxB,WACCsQ,QAAQya,aAAgB,GAAEza,QAAQya,iBAAiBh3C,SAAWA,OAEjE,+BACE,4BAAM05B,UAAWC,qCAAO1N,OAAxB,UACCsQ,QAAQtE,MAEV4qB,aAAeC,aACd,iCACE,iCACE,8BACE,+BACCD,aAAe,8CACfC,aAAe,+CAElB,8BACE,qCACCD,aAAe,+BAAK,QAAAksC,eAAclsC,cAClCC,aAAe,+BAAK,QAAAisC,eAAcjsC,eAErC,8BACE,sCACCD,aAAe,+BAAK,QAAAmsC,YAAWnsC,cAC/BC,aAAe,+BAAK,QAAAksC,YAAWlsC,eAElC,8BACE,yCACCD,aAAe,+BAAK,QAAA2J,QAAM,QAAAC,eAAc5J,YAAatmB,QAAQ0X,YAAYywB,QAAQ,GAAlE,QACf5hB,aAAe,+BAAK,QAAA0J,QAAM,QAAAC,eAAc3J,YAAavmB,QAAQ0X,YAAYywB,QAAQ,GAAlE,YAQ5B,OACE,oBAAC,iBAAD,CAASuqB,cAAY,EAAC/0C,UAAU,MAAMD,SAAU/S,SAC7C3gC,KAAKzO,MAAMK,W,yFChEpB,IAAI+uC,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,y5BAA85B,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,8GAA8G,4EAA4E,6EAA6E,MAAQ,GAAG,SAAW,4KAA4K,KAAO,oCAAoC,eAAiB,CAAC,2qBAA+qB,m9DAA+9D,orDAAorD,WAAa,MAGxyLquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,KAAQ,8FACR,MAAS,iG,sICYK,SACbxM,YACAs0D,SACyF,iBAGzF,MAAMC,SAAwC,GACxCC,eAAuD,GAE7D,IACIC,YADAC,eAAiB,IAAIr1F,IAKzB,oBAAO,cAA+B5B,MAAMsrE,UAI1C3iE,YAAYlJ,OACV8vC,MAAM9vC,OADkB,iFAkCF,UAAA6tE,UACtB,KAIEzhE,OAAOwtC,KAAK09C,gBAAgBv+C,QAASjhC,KAC/BA,KAAOrJ,KAAKwlE,KAAQujB,eAAe5kF,IAAIkF,KACzCw/E,eAAex/E,IAAI+zC,iBA/CJ,IAoDrB,CAAE4rC,SAAS,EAAO3pB,UAAU,KA5C5Br/D,KAAKwlE,IAAML,cAAKC,KAChByjB,eAAe7oF,KAAKwlE,KAAOxlE,KAC3B4oF,SAAS5oF,KAAKwlE,KAAOj0E,MAAMkD,KAC3BuL,KAAKipF,aAGPC,sBAAsB5gF,WAMpB,OALK,yBAAatI,KAAKzO,MAAMkD,KAAM6T,UAAU7T,QAC3Cm0F,SAAS5oF,KAAKwlE,KAAOl9D,UAAU7T,KAC/BuL,KAAKipF,eAGA,EAGTjkF,8BACS6jF,eAAe7oF,KAAKwlE,YACpBojB,SAAS5oF,KAAKwlE,KACrBxlE,KAAKipF,aAGPA,aACE,MAAME,eAAgCR,QAAQhrF,OAAOwtC,KAAKy9C,UAAU1/E,IAAKG,IAAOu/E,SAASv/E,OACpF,yBAAay/E,YAAaK,kBAC7BL,YAAcK,eACdJ,eAAiB,IAAIr1F,IACrBsM,KAAKopF,yBAqBTljF,SAEE,OADA6iF,eAAel/D,IAAI7pB,KAAKwlE,KACjBxlE,KAAKzO,MAAMK,SAASk3F,eAvD/B,qCACuBz0D,aADvB,OA9CF,mCACA,M,4WAAA,yBACA,+DACA,sD,uZCHA,sEAEA,sDACA,mC,sPAEA,MAAMg1D,oBAAsBr2D,OAAOs2D,cAAgBt2D,OAAOu2D,U,gBAE3C,MAIb9uF,YAAYoyE,KAAc,iFACxB7sE,KAAKwpF,cAAgB,GAEkBH,qBAAuBrpF,KAAKypF,gBAAgB3c,eACjF,YAAA4c,aAAY1pF,KAAKypF,MAGnB5c,IAAI8c,QAAQ,aAAel/E,OACzB,MAAMm/E,QAAU,IAAIC,wBAAep/E,MAEnC,OADAzK,KAAKwpF,cAAc/+E,KAAKpB,IAAMugF,QACvB5pF,KAAKwpF,cAAc/+E,KAAKpB,IAAIygF,mBAGrCjd,IAAI8c,QAAQ,SAAWl/E,OAAD,+DAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,iCAAU,sBAA6B0gF,OAAOt/E,QAEpEoiE,IAAI8c,QAAQ,iBAAmBl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6B2gF,eAAev/E,QAEpFoiE,IAAI8c,QAAQ,QAAUl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6B4gF,MAAMx/E,QAElEoiE,IAAI8c,QAAQ,gBAAkBl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6B6gF,cAAcz/E,QAElFoiE,IAAI8c,QAAQ,SAAWl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6B8H,OAAO1G,QAEpEoiE,IAAI8c,QAAQ,YAAcl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6B80C,UAAU1zC,QAC1EoiE,IAAI8c,QAAQ,UAAYl/E,OACtB,MAAMm/E,QAAU5pF,KAAKwpF,cAAc/+E,KAAKpB,IACxC,GAAIugF,QAAS,CACX,MAAM7vF,OAAS6vF,QAAQr8E,QAAQ9C,MAE/B,cADOzK,KAAKwpF,cAAc/+E,KAAKpB,IACxBtP,UAIX8yE,IAAI8c,QAAQ,oBAAsBl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6By2C,kBAAkBr1C,QAE1FoiE,IAAI8c,QAAQ,sBAAwBl/E,OAAD,iEAAUzK,KAAKwpF,cAAc/+E,KAAKpB,WAAlC,kCAAU,uBAA6B8gF,oBAAoB1/E,Y,6QC9ClG,6DACA,yDACA,wDAEA,6C,kqBAuBA,SAAS2/E,4BACP,MAAO,GAGT,SAASC,mCAAmC5wF,MAAeV,MAAes/B,QACxE,OAAc,IAAVt/B,OAAeA,QAAUs/B,OAAOpiB,OAAS,EAGpC,GAGD,GAAE/kB,KAAKk1D,MAAc,IAAR3sD,OAAgB,IAGvC,SAAS6wF,8BAA8B7wF,OACrC,OAAUvI,KAAKk1D,MAAc,IAAR3sD,OAAgB,IAA7B,KAGV,SAAS8wF,8BAA8BxhB,cAAez5D,MAAM,0BAC1D,MAAO,CAIL7a,KAAI,8BAAEs0E,cAAct0E,KAAKk5C,SAASr+B,KAAKk7E,sBAAnC,iCAAE,sBAAiD/1F,KAAK6a,KAAKm7E,QAEjEvrF,KAAMoQ,KAAKo7E,OAIf,MAAMC,mBAAsBnjF,GAAMA,EAAEktB,M,gBAQrB,MAKbj6B,aAAY,GACV4O,GADU,KAEVoZ,KAFU,KAGVpP,KAHU,KAIV5e,KAJU,QAKVg6B,QALU,aAMVozB,aANU,iBAOVkjB,mBASC,qHACD/kE,KAAKqJ,GAAKA,GACVrJ,KAAKinE,MAAQxkD,KACb,MACMsmD,cAAgB,IAAI6hB,eAAMnoE,KAAM,CACpCpP,UACA5e,UACAg6B,QAAS,cAAF,GAAOzuB,KAAK6qF,sBAAsBp8D,QAASozB,cAA3C,CAA0DkjB,oCACjE9kB,QALc,KAOhBjgD,KAAK8qF,eAAiB/hB,cAGxB+gB,iBACE,MAAM/gB,cAAgB/oE,KAAK8qF,eAC3B,GAAK/hB,cAIL,OAAO,qBAAA+gB,gBAAe/gB,eAGxBghB,QAAO,YACL7nC,YADK,aAELokB,aAFK,aAGLC,aAHK,WAILC,WAJK,eAKLE,iBAQA,MAAMqC,cAAgB/oE,KAAK8qF,eAC3B,GAAK/hB,cAKL,OADA,qBAAAghB,QAAO/pF,KAAKqJ,GAAI0/D,cAAe7mB,YAAaokB,aAAcC,aAAcC,WAAYE,iBAC7E,qBAAAojB,gBAAe/gB,eAGxBihB,iBACwBhqF,KAAK8qF,iBAK3B,qBAAAd,gBAAehqF,KAAKqJ,IAGtB4gF,OAAM,WAAExiB,WAAF,OAAc74D,OAAd,OAAsBC,SAC1B,MAAMk6D,cAAgB/oE,KAAK8qF,eAC3B,GAAK/hB,cAKL,OADA,qBAAAkhB,OAAMjqF,KAAKqJ,GAAI0/D,cAAetB,WAAY74D,OAAQC,SAC3C,qBAAAi7E,gBAAe/gB,eAGxBmhB,iBACE,qBAAAA,eAAclqF,KAAKqJ,IAGrB8H,QAAO,KAAE1c,KAAF,QAAQg6B,QAAR,aAAiBozB,eACtB,MAAMknB,cAAgB/oE,KAAK8qF,eAE3B,IAAK/hB,cACH,OAGEt6C,UACFA,QAAUzuB,KAAK6qF,sBAAsBp8D,QAASozB,cAC9CknB,cAAct6C,QAAUm8D,eAAMG,QAAQC,YAAYjiB,cAAct6C,QAASA,UAK3E,MAAMw8D,gBAAkBjrF,KAAKkrF,sBACvBC,aAAgB12F,MAAQA,KAAKk5C,UAAa,GAChD3tC,KAAKorF,eAAeH,iBAEpB,MAAMI,wBAAyB,kBAAMJ,gBAAiBN,oBAItD5hB,cAAc/9C,OAAOv2B,KAAKk5C,SAAWw9C,aAAajiF,IAAKqnC,OACrD,MAAM1vB,QAAUwqE,uBAAuBV,mBAAmBp6C,OAE1D,GAAI1vB,SAAWA,QAAQxN,OAASk9B,KAAKl9B,MAAQk9B,KAAK97C,KAAM,CAGtDosB,QAAQpsB,KAAKiyD,OAAOnW,KAAK97C,KAAKwhB,QAC9Bs6B,KAAK97C,KAAK61C,QAAQ,CAAC/oC,MAAO+pF,OACxBzqE,QAAQpsB,KAAK62F,KAAO/6C,KAAK97C,KAAK62F,OAEhC,MAAMC,mBAAoB,iBAAKh7C,KAAM,QAIrC,wBACK1vB,QACA0qE,mBAGP,OAAOh7C,OAGT,MAAMi7C,gBAAiB,iBAAK/2F,KAAM,YASlC,OAPAs0E,cAAc/9C,OAAOv2B,KAArB,iBACKs0E,cAAc/9C,OAAOv2B,KACrB+2F,gBAGLziB,cAAc53D,UAEP,qBAAA24E,gBAAe/gB,eAGxB5qB,YACE,MAAM4qB,cAAgB/oE,KAAK8qF,eAK3B,OAJI/hB,gBACF,qBAAA5qB,WAAUn+C,KAAKqJ,GAAI0/D,gBAGd,qBAAA+gB,gBAAe/gB,eAGxBx7D,UACE,MAAMw7D,cAAgB/oE,KAAK8qF,eACvB/hB,eACFA,cAAcx7D,UAEhBvN,KAAK8qF,eAAiB,KAMxBhrC,mBAAkB,MAAEje,QAClB,MAAMknC,cAAgB/oE,KAAK8qF,eAC3B,GAAI/hB,cAAe,CAEjB,MAAM0iB,cAAgB1iB,cAAc2iB,0BAA0B7pD,MAAO,SAErE,GAAI4pD,cAAcx1E,OAEhB,OAAOs0E,8BAA8BxhB,cAAe0iB,cAAc,IAIpE,MAAME,cAAgB5iB,cAAc2iB,0BAA0B7pD,MAAO,IAAK,CAAEwf,WAAW,IACvF,GAAIsqC,cAAc11E,OAAQ,CAExB,MACM21E,oBADkB7iB,cAAc2iB,0BAA0B7pD,MAAO,UAAW,CAAEwf,WAAW,IACnDla,KAAM73B,MAEhDq8E,cAAc1kD,KAAM4kD,OAAUv8E,KAAKm7E,SAAWoB,MAAMpB,QAAUn7E,KAAKk7E,gBAAkBqB,MAAMrB,gBAG7F,OACSD,8BAA8BxhB,cADnC6iB,oBACkDA,oBAGFD,cAAc,MAKxExB,qBAAoB,MAAEtoD,QACpB,MAAMknC,cAAgB/oE,KAAK8qF,eAC3B,GAAI/hB,cAAe,CACjB,MAAM+iB,eAAiB/iB,cAAcgjB,YAAYC,gBAAgBnqD,OACjE,GAAIiqD,eAAgB,CAClB,MAAMzyF,QAAUyyF,eAAeG,SAC/B,OAAO5yF,QAAQ4oD,QAAQxtD,KAAK4E,QAAQ6yF,aAK1CrB,sBAAsB7/D,OAAa62B,cACjC,GAAI72B,QAAUA,OAAOi1B,QAAQwE,WAAY,CAGvCz5B,OAAOi1B,QAAQwE,WAAW0nC,UAAY,CAAC1yF,MAAYJ,WACjD,MAAMq7B,MAAQj7B,iBAAH,EAAGA,MAAOi7B,MAGrB,OAAgB,MAATA,MAAgBA,MAAQ,MAGjC,MAAM03D,YAAcphE,OAAOi1B,QAAQwE,WAAW/oD,OAAS,QACvDsvB,OAAOi1B,QAAQwE,WAAW/oD,MAASrC,UACjC,MAAMI,MAAQJ,QAAQ4oD,QAAQxtD,KAAK4E,QAAQ6yF,WAC3C,OAAOzyF,iBAAA,EAAAA,MAAOgtD,aAAc2lC,aAIhC,GAAIvqC,aAAc,CAChB,IAAK,MAAM1uD,SAAS63B,OAAO+yB,OAAOH,MACI,MAAhCiE,aAAawqC,kBACfl5F,MAAMm5F,SAAYC,gBAChBA,cAAcn4F,MAAQytD,aAAawqC,kBAGvCl5F,MAAMutD,MAAQvtD,MAAMutD,OAAS,GACG,SAA5BmB,aAAaiD,WACf3xD,MAAMutD,MAAM4mB,SAAW8iB,0BACc,qBAA5BvoC,aAAaiD,aACtB3xD,MAAMutD,MAAM4mB,SAAW+iB,oCAI3B,IAAK,MAAMl3F,SAAS63B,OAAO+yB,OAAOiC,MAChC7sD,MAAMutD,MAAQvtD,MAAMutD,OAAS,GACzBmB,aAAa2qC,6BACfr5F,MAAMutD,MAAM4mB,SAAWgjB,+BAK7B,OAAOt/D,OAGTogE,eAAez9C,UAEYA,SAAS13B,OAkBpCi1E,sBACE,OAAQlrF,KAAK8qF,gBAAkB9qF,KAAK8qF,eAAe9/D,OAAOv2B,MAAQuL,KAAK8qF,eAAe9/D,OAAOv2B,KAAKk5C,UAAa,M,kDCtVnH/M,OAAOE,QAAU,WACf,OAAO,IAAI2rD,OAAO,sBAA0B,kD,8SCyBvC,WACL,MAAM9mB,UAAY,IAAI+mB,QAChBhnB,cAAgB,IAAIgnB,QAG1B,OAFA/mB,UAAUgnB,cAAgBjnB,cAC1BA,cAAcinB,cAAgBhnB,UACvB,CAAEA,oBAAWD,8BArBtB,MAAMgnB,QAAQ,2FAE2B,IAEvC,WAAoB7kE,MAAepzB,KAAWm4F,UAC5C,OAAO5sF,KAAK2sF,cAAcE,SAAShlE,OAAOpzB,MAG5C,cAAuBozB,MAAehoB,SACpC,GAAIG,KAAK6sF,SAAShlE,OAChB,MAAM,IAAInwB,MAAO,wCAAuCmwB,OAE1D7nB,KAAK6sF,SAAShlE,OAAShoB,W,6ICf3B,4EACA,kEACA,sDAEA,qC,kFAYA,MAAMitF,cAAgB,CAAEl4F,OAAQ,GAAIk/B,cAAe,GAEpC,MAAMi5D,6BAA6Bj7F,eAAMsvC,cAAqB,qB,kBAAA,e,MAC5D1M,OAAkB,KAC/B,MAAM,UAAE6sB,UAAF,WAAaG,YAAe1hD,KAAKzO,MACvCmwD,WAAWH,UAAW7sB,S,IAHmD,iB,IAAA,M,sGAM3ExuB,SACE,MAAM,eAAEu7C,eAAF,YAAkBG,aAAgB5hD,KAAKzO,MAC7C,OACE,wCACGyO,KAAKzO,MAAMo8C,SAASzkC,IAAI,CAAC+4C,QAASxvD,KACjC,MAAM,MAAEiiC,MAAF,MAASh5B,MAAT,WAAgBsxF,YAAe/qC,QACrC,IAAIgrC,SAEFA,SADED,aAAeE,iCAEf,oCAAK94F,MAAM,KAAKQ,OAAO,MACrB,qCACEu4F,OAAQzxF,MACR0xF,YAAY,IACZC,gBAAiBH,iCAAsB3mD,KAAK,MAC5CtpB,GAAG,IACHG,GAAG,KACHF,GAAG,IACHG,GAAG,OAIA2vE,aAAeM,6BACb,qCAAMlnF,MAAO,CAAExQ,SAAU,OAAQ23F,WAAY,SAA7C,OAEA,qCAAMnnF,MAAO,CAAExQ,SAAU,OAAQ23F,WAAY,SAA7C,MAEb,MAAMzb,kBAAoBlwB,YAAYltB,OAASs9C,8BAA2BD,wBAC1E,OACE,oCAAKhyE,IAAKtN,EAAG2T,MAAO,CAAE1K,YAAOuN,KAAM,QAASukF,WAAY,WACrD/rC,gBAAkB,6BAACqwB,kBAAD,CAAmB1rE,MAAO0mF,cAAe75D,QAASjzB,KAAKytF,YAAY/4D,SACrFu4D,SAFH,IAEa,qCAAM7mF,MAAO,CAAExQ,SAAU,SAAW8+B,Y,qPCtD5B,CAAC,EAAG,G,8BACA,CAAC,EAAG,EAAG,EAAG,I,qJCmKxC,SACL1M,MACAijB,YACAyC,UACA1B,SACAC,WAEA,MAAMyhD,qBAAsB,sBAAU1lE,MAAO,CAAC0J,KAAgB34B,QACvD24B,KAAKqB,SAEE,iBAAA46D,6BAA4Bj8D,MAGjC,KA9GX,SACEA,KACAuZ,YACAlyC,MACA20C,UACA1B,SACAC,WAEA,IAAI2B,SAAwC,GACxC17C,OAA2B,GAC3ByzD,UAAW,EACf,MAAMioC,WAAa70F,MAAM4vC,WAEzB,IAAK,MAAOklD,SAAUv+E,QAAS27B,YAAYvZ,KAAKj4B,OAAOk6D,UAAW,CAChE,MAAM3N,UAAqC,gBAAzBt0B,KAAKqZ,gBAAoCz7B,KAAKitC,YAAcjtC,KAAKgtC,YACnF,IAAK0J,UACH,SAEF,MAAM8nC,aAAc,QAAA7nC,QAAM,QAAAC,eAAcF,UAAWtY,YACnD,IAAK,MAAOqgD,UAAU,MAAEt0F,MAAOi4B,KAAMs8D,YAAf,aAA4Bv9C,iBAAmBnhC,KAAKqgC,YAAYgkB,UACpF,GAAqB,iBAAVl6D,OAAuC,kBAAVA,OAAwC,iBAAVA,MAAoB,CACxF,MAAMw0F,SAAW/8E,OAAOzX,OACxB,IAAK4D,MAAM4wF,UAAW,CACpB,MAAMv7F,EAAIw7F,aAAaliD,SAAU8hD,YAAaC,SAAU9iD,YAAagB,UAAW4hD,UAC1El7F,EAAIs7F,SACJj4D,QAAU,CAAEtjC,IAAGC,IAAGi7F,sBAAYt+E,UAAMoiB,KAAMs8D,YAAav0F,YAAOg3C,0BAAc/C,qBAClFx7C,OAAOsoC,KAAK,CAAE9nC,IAAGC,MACjBi7C,SAASpT,KAAKxE,eAEX,IAAI,QAAAm4D,QAAO10F,OAAQ,CAExB,MAAM20F,UAAa30F,MACb/G,EAAIw7F,aAAaliD,SAAU8hD,YAAaC,SAAU9iD,YAAagB,UAAW4hD,UAC1El7F,GAAI,QAAAszD,OAAMmoC,WACVp4D,QAAU,CACdtjC,IACAC,IACAi7F,sBACAt+E,UACAoiB,KAAMs8D,YACNv0F,MAAQ,IAAE,QAAA5E,QAAOu5F,gBAAe,QAAA5F,eAAc4F,cAC9C39C,0BACA/C,qBAEFx7C,OAAOsoC,KAAK,CAAE9nC,IAAGC,MACjBi7C,SAASpT,KAAKxE,SAId1mB,KAAKqgC,YAAY15B,OAAS,GAAkB,UAAb+1B,WACjC2Z,UAAW,GAIf,GAAIj0B,KAAKj4B,MAAMquB,SAAS,gBACtB,GAAI69B,SAAU,CACZ,MAAQzzD,OAAQm8F,iBAAkBzgD,SAAU0gD,qBAAuB,uBAAWp8F,OAAQ07C,UACtF17C,OAASm8F,iBACTzgD,SAAW0gD,wBAIXp8F,OAAS,GAiBb,MAAO,CAAE+vD,QAbO,CACdssC,YAAa7rC,uBAAW3pD,MAAQ2pD,uBAAWzsC,QAC3Cye,MAAOhD,KAAKj4B,OAAS0rE,cAAKC,KAC1BrlE,IAAK6tF,WACLjoC,kBACA18C,MAAM,EACNo8C,YAAa,EACbI,YAAa,IACbD,iBAAkB,EAClBF,sBAAsB,cAAAjC,YAAWX,uBAAW3pD,MAAQ2pD,uBAAWzsC,SAC/DsvC,iBAAkB,cAClB9wD,KAAMvC,QAEU07C,mBA6BP4gD,CAAyC98D,KAAMuZ,YAAalyC,MAAO20C,UAAW1B,SAAUC,WAFxF,MAOX,MAAO,CACL0B,SAAU+/C,oBAAoBxkF,IAAI,EAAG+4C,mBAAcA,SACnDrU,UAAU,oBAAQ8/C,oBAAoBxkF,IAAI,EAAG0kC,qBAAeA,a,uBArLhE,8DACA,O,4WAAA,yBACA,2EACA,mCAEA,OADA,wBACA,iDAEA,mEACA,kEAIA,4DACA,8DACA,yCAKA,sCACA,8B,kFA4BA,SAASsgD,aAAaliD,SAAUga,UAAW+nC,SAAU9iD,YAAagB,UAAW4hD,UAC3E,GAAiB,WAAb7hD,UAAyBC,UAAW,CACtC,IAAI,iBAAA0hD,6BAA4B1hD,WAC9B,OAAO/6B,OAAO43B,WAAWmD,UAAUxyC,OAErC,GAAIwxC,YAAYgB,UAAUxyC,OAAQ,2BAChC,MAAM6V,KAAO27B,YAAYgB,UAAUxyC,OAAOo0F,UAC1C,OAAOv+E,KAAO4B,OAAM,8BAAC5B,KAAKqgC,YAAYo+C,iBAAlB,iCAAC,sBAA4Bt0F,OAASoyD,KAG9D,MAAoB,cAAb7f,SAA2Bga,UAAY+nC,SAGhD,MAAMlsC,aAAe,CACnBwqC,gBAAiB,GACjBvnC,WAAY,oBA0Hd,SAAS2pC,eAAezmE,OACtB,OAAO,sBAAUA,MAAO,CAAC0J,KAAgB34B,QAClC24B,KAAKqB,UAEC,iBAAA46D,6BAA4Bj8D,MAxC3C,SAAwCA,KAAgB34B,OACtD,MAAO,CACLsa,KAAM,OACNq7E,SAAU,qBACVC,QA3Gc,YA4Gdj6D,MAAOhD,KAAKj4B,MACZ80F,YAAa7rC,uBAAW3pD,MAAQ2pD,uBAAWzsC,QAC3C+2E,WAAY,CAAC,EAAG,GAChB3nC,YAAa,EACb39B,KAAM,aACNjuB,MAAOyX,OAAO43B,WAAWpX,KAAKj4B,QA+BrBm1F,CAA+Bl9D,KAAM34B,OAFrC,MAUb,MAAM6kD,OAAQ,YAAA1/C,gBACXuxD,QAAWA,OACZ,EAAGnjB,UAAMC,UAAMsiD,mBAGN,CACL,CACExlF,GAAIwlF,QACJnuC,MAAO,CACL1rD,IANMqI,MAAMivC,WAAQphC,EAAYohC,KAOhC5oB,IANMrmB,MAAMkvC,WAAQrhC,EAAYqhC,KAOhCuiD,UAAW,GAEbnuC,UAAW,CACTjlD,MAAO,2BACPklD,cAAe,+B,cAgBV,SAAAjrC,OAAqB,SAAmBpkB,OACrD,MAAM,MAAEy2B,MAAF,UAAS6jB,UAAT,UAAoBC,UAApB,cAA+BO,cAA/B,SAA8CsB,SAA9C,SAAwDC,SAAxD,SAAkE5B,UAAaz6C,MAC/E2uD,YAAcuuC,eAAezmE,OAEnC,OACE,oCAAKmL,UAAWC,yBAAOC,MACrB,6BAAC,kCAAD,KACG,EAAGj/B,YAAOQ,iBACT,6BAAC,wBAAD,CAEEmL,IAAKisC,SACL2V,UAAQ,EACR79C,MAAI,EACJ1P,MAAOA,MACPQ,OAAQA,OACRH,KAAM,CAAEk5C,mBACRC,SAAUA,SACVsS,YAAaA,YACb7sC,KAAK,UACLuqC,MAAOA,MAAM,CAAEtR,KAAMT,UAAWU,KAAMT,UAAW+iD,QA1M3C,cA2MNxiD,cAAeA,cACfL,SAAUA,SACV6V,aAAcA,oB,4EClQ1B,IAAIlhB,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,8JAA+J,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,qFAAqF,MAAQ,GAAG,SAAW,wDAAwD,KAAO,wBAAwB,eAAiB,CAAC,icAAqc,WAAa,MAG13BquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,KAAQ,sE,sIChBM,SACbpsC,KACAm5C,UAEA,MAAM17C,OAAS,GACT68F,YAAc,GACpB,IAAK,IAAIt8F,EAAI,EAAGA,EAAIgC,KAAKwhB,OAAQxjB,IAAK,CACpC,MAAMu8F,kBAAoBv6F,KAAKhC,GAAGC,EAAI+B,KAAKhC,EAAI,GAAGC,EAC5C+G,OAAShF,KAAKhC,GAAGE,EAAI8B,KAAKhC,EAAI,GAAGE,GAAKq8F,kBACtCC,gBAAkBrhD,SAASn7C,GAC3B8O,MAAwB,CAAE7O,EAAG+B,KAAKhC,GAAGC,EAAGC,EAAG8G,OAC3Cu8B,QAAU,CACdtjC,EAAG6O,MAAM7O,EACTC,EAAG4O,MAAM5O,EACT2c,KAAM2/E,gBAAgB3/E,KACtBoiB,KAASu9D,gBAAgBv9D,KAAlB,eACPk8D,WAAYqB,gBAAgBrB,WAC5Bn0F,YACAg3C,kBAAcvlC,EACdwiC,UAAWuhD,gBAAgBvhD,WAE7BqhD,YAAYv0D,KAAKxE,SACjB9jC,OAAOsoC,KAAKj5B,OAEd,MAAO,CAAErP,cAAQ07C,SAAUmhD,e,sICDd,SAAoBx9F,OACjC,MAAM,MAAEy2B,MAAF,WAASkD,WAAT,WAAqB6gB,WAArB,SAAiCC,SAAjC,UAA2CC,WAAc16C,MACzD29F,UAAW,UAAA9lF,MAAK4e,OAEhBmnE,eAAgB,SAAAv1F,aACpB,CAACH,MAAeV,SACd,GAAa,MAATA,MACF,MAAM,IAAIrB,MAAM,iBAElB,MAAMqtD,SAAW/8B,MAAM2H,QACvBo1B,SAAShsD,OAAT,iBAAuBgsD,SAAShsD,OAAhC,CAAwCU,MAAOA,MAAMq9C,SACrD5rB,WAAW,CAAElD,MAAO+8B,YAEtB,CAAC/8B,MAAOkD,aAGJkkE,8BAA+B,SAAAx1F,aACnC,CAACH,MAAwBV,SACvB,GAAa,MAATA,MACF,MAAM,IAAIrB,MAAM,iBAElB,MAAMqtD,SAAW/8B,MAAM2H,QACvBo1B,SAAShsD,OAAT,iBAAuBgsD,SAAShsD,OAAhC,CAAwCgyC,gBAAiBtxC,QACzDyxB,WAAW,CAAElD,MAAO+8B,YAEtB,CAAC/8B,MAAOkD,cAGJ,mBAAEmkE,mBAAF,mBAAsBC,qBAAuB,SAAAtjE,SACjD,KAAM,CACJqjE,mBAAoB,IAAMnkE,WAAW,CAAE6gB,YAAY,IACnDujD,mBAAoB,IAAMpkE,WAAW,CAAE6gB,YAAY,MAErD,CAAC7gB,aAGH,IAAK6gB,WACH,OACE,oCAAK5Y,UAAWC,0BAAOC,MACrB,6BAAC,cAAD,CAAMF,UAAWC,0BAAOm8D,aAAct8D,QAASq8D,oBAC7C,6BAAC,cAAD,QAMR,OACE,oCAAKn8D,UAAWC,0BAAOC,MACrB,6BAAC,cAAD,CAAMF,UAAWC,0BAAOm8D,aAAct8D,QAASo8D,oBAC7C,6BAAC,cAAD,OAEF,oCAAKl8D,UAAWC,0BAAO9jB,MAAvB,KAEE,oCAAK6jB,UAAWC,0BAAOo8D,kBAAmBppF,MAAO,CAAEhS,MAAO,OAAQ0/C,WAAY,SAAU27C,OAAQ,IAC9F,6BAAC,kBAAD,CACEj8D,SAAS,0BACT/5B,MAAOuyC,SACPyI,SAAU,CAAEv9C,gBAAiB,cAAe0iD,QAAS,GACrDtX,SAAWotD,aAAgBxkE,WAAW,CAAE8gB,SAAU0jD,cAClDjc,UAAQ,GACR,qCAAMh6E,MAAM,aAAZ,aACA,qCAAMA,MAAM,SAAZ,SACA,qCAAMA,MAAM,UAAZ,YAGJ,oCACE05B,WAAW,uBAAG,CACZ,CAACC,0BAAOu8D,YAAY,EACpB,CAACv8D,0BAAOw8D,qBAAqB3jD,qBAAD,EAACA,UAAWlZ,WAE1C3sB,MAAO,CAAEktC,QAAS,SACJ,WAAbtH,SACC,6BAAC,0BAAD,CACEta,MAAMua,qBAAA,EAAAA,UAAWxyC,QAAS,IAC1B6oC,SAAWotD,aACTxkE,WAAW,CAAE+gB,UAAW,CAAExyC,MAAOi2F,YAAa38D,SAASkZ,WAAYA,UAAUlZ,WAE/E2e,WAAYm+C,wBACZvsD,YAAY,iCACZwO,oBAAqB7F,YAAa,iBAAA0hD,6BAA4B1hD,WAC9D9I,UAAQ,IAER,OAGPnb,MAAM9e,IAAI,CAACwoB,KAAgB34B,SAC1B,MAAM+2F,yBAA0B,iBAAAnC,6BAA4Bj8D,MAC5D,IAAIqZ,gBAMJ,OAHK+kD,yBAA2Bp+D,KAAKj4B,MAAMwc,OAAS,IAClD80B,gBAAkBrZ,KAAKqZ,iBAGvB,6BAAC,eAAM8R,SAAP,CAAgB98C,IAAKhH,OACnB,oCAAKo6B,UAAWC,0BAAO9jB,MAAvB,KAEE,oCACE6jB,UAAWC,0BAAOo8D,kBAClBppF,MAAO,CAAEqpF,OAAQ,GACjBx8D,QAAS,KACP,MAAM8xB,SAAW/8B,MAAM2H,QACvBo1B,SAAShsD,OAAT,iBAAuBgsD,SAAShsD,OAAhC,CAAwCg6B,SAAUgyB,SAAShsD,OAAOg6B,UAClE7H,WAAW,CAAElD,MAAO+8B,aAEtB,oCACE5xB,UAAWC,0BAAO28D,SAClB3pF,MAAO,CAAE1K,MAAOg2B,KAAKqB,QAAU2vB,uBAAW3pD,MAAQ2pD,uBAAWzsC,QAAU,WAG3E,oCACEkd,WAAW,uBAAG,CACZ,CAACC,0BAAOu8D,YAAY,EACpB,CAACv8D,0BAAOw8D,oBAAqBl+D,KAAKqB,WAEpC,6BAAC,0BAAD,UACErB,KAAMA,KAAKj4B,MACX6oC,SAAU6sD,cACV99C,wBAAyB+9C,6BACzB19C,WAAYm+C,wBACZvsD,YAAY,iCACZvqC,MAAOA,MACPoqC,UAAQ,EACR2O,oBAAqBg+C,yBACH,cAAb9jD,SAA2B,CAAEjB,iCAAoB,QAG1D,oCACE5X,UAAWC,0BAAO48D,WAClB/8D,QAAS,KACP,MAAM8xB,SAAW/8B,MAAM2H,QACvBo1B,SAAS2B,OAAO3tD,MAAO,GACvBmyB,WAAW,CAAElD,MAAO+8B,aALxB,SAaR,oCACE5xB,UAAWC,0BAAO68D,QAClBh9D,QAAS,IACP/H,WAAW,CACTlD,MAAO,IACFA,MACH,CACEvuB,MAAO,GACPs5B,SAAS,EAETgY,gBAAiBmkD,SAAWA,SAASnkD,gBAAkB,mBAVjE,gBAtKN,4DACA,4DACA,+BACA,O,4WAAA,yBAEA,iCACA,oEACA,2DACA,sDACA,oEACA,yCAKA,sC,89BCtBA,IAAIpK,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,w6GAA26G,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,qFAAqF,6EAA6E,MAAQ,GAAG,SAAW,0mCAA0mC,KAAO,yBAAyB,eAAiB,CAAC,o1FAAy1F,orDAAorD,WAAa,MAG90SquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,KAAQ,qEACR,QAAW,wEACX,KAAQ,qEACR,kBAAqB,kFACrB,SAAY,yEACZ,aAAgB,6EAChB,WAAc,2EACd,UAAa,0EACb,kBAAqB,oF,kDClCtB,IAAIF,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,m8BAAo8B,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,4GAA4G,6EAA6E,MAAQ,GAAG,SAAW,gLAAgL,KAAO,+BAA+B,eAAiB,CAAC,yqBAA2qB,orDAAorD,WAAa,MAG5xHquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,iCAAoC,wHACpC,wBAA2B,+GAC3B,6BAAgC,oHAChC,mBAAsB,4G,kDC7BvB,IAAIF,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAmEy1B,QAASlS,SAEtFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAA+D,IAKlFtG,KAAK,CAACoG,OAAOnuC,EAAI,+tDAAguD,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,sFAAsF,6EAA6E,MAAQ,GAAG,SAAW,2cAA2c,KAAO,2BAA2B,eAAiB,CAAC,ioCAAmoC,orDAAorD,WAAa,MAGjxKquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,UAAa,KACb,KAAQ,sEACR,MAAS,uEACT,WAAc,4EACd,iBAAoB,kFACpB,SAAY,0EACZ,YAAe,+E,sICvBD,SACbpS,QACAxP,OACAixE,QAA0Bx9F,IAAWA,GACrC+oD,MAAgB,GAEhB,IAAKx8B,OACH,OAAOwP,QAET,MAAM0hE,OAASlxE,OAAOo3C,cAAc3jB,QAAQ,aAAc,IAC1D,GAAsB,IAAlBy9C,OAAOl6E,OACT,OAAOwY,QAIT,MAAMwL,QAAoB,GAE1B,IAAK,MAAMm2D,UAAU3hE,QAAS,CAC5B,MAAM4hE,SAAWH,QAAQE,QAAQ/5B,cACjC,IAAIi6B,SAAW,EACXC,MAAQ,EACZ,IAAK,MAAM13F,QAAQs3F,OAAQ,CAEzB,GADAG,QAAUD,SAASvlD,QAAQjyC,KAAMy3F,QAAU,IAC1B,IAAbA,QACF,MAEFC,OAASD,SAEM,IAAbA,SACFr2D,QAAQO,KAAK,CACX41D,cACAG,MAAOA,MAAQF,SAASp6E,SAK1BwlC,MACFxhB,QAAQwhB,KAAK,CAAC7iD,EAAGtH,IAAMsH,EAAE23F,MAAQj/F,EAAEi/F,OAErC,OAAOt2D,QAAQ/wB,IAAKnP,QAAsBA,OAAOq2F,U,oKCWpC,UAAkB,UAC/BvkD,UAD+B,UAE/BC,UAF+B,WAG/B5gB,WAH+B,UAI/BshB,UAJ+B,SAK/BmB,SAL+B,SAM/B3B,SAAW,YANoB,SAO/B4B,WAUA,OACE,0DACE,6BAAC,cAAD,CAAM3a,QAAS,IAAM/H,WAAW,CAAE4gB,UAAyB,KAAdA,UAAmB,KAAO,KAAO9V,QAAQ,wBACpF,oCAAK7C,UAAWC,wBAAOsB,OAAvB,WACA,6BAAC,oBAAAgvB,kBAAD,CACErwC,KAAK,SACL8f,WAAW,uBAAGC,wBAAOyE,MAAO,CAAE,CAACzE,wBAAOuR,aAAc6rD,aAAa1kD,aACjEryC,MAAOqyC,UACPxJ,SAAWT,QACT3W,WAAW,CAAE4gB,UAAWjK,MAAMtiC,OAAO9F,SAEvCw5B,QAAU4O,OAAUA,MAAMM,kBAC1BmB,YAAY,UAGhB,6BAAC,cAAD,CAAMrQ,QAAS,IAAM/H,WAAW,CAAE2gB,UAAyB,KAAdA,UAAmB,MAAQ,KAAO7V,QAAQ,wBACrF,oCAAK7C,UAAWC,wBAAOsB,OAAvB,WACA,6BAAC,oBAAAgvB,kBAAD,CACErwC,KAAK,SACL8f,WAAW,uBAAGC,wBAAOyE,MAAO,CAAE,CAACzE,wBAAOuR,aAAc6rD,aAAa3kD,aACjEpyC,MAAOoyC,UACPvJ,SAAWT,QACT3W,WAAW,CAAE2gB,UAAWhK,MAAMtiC,OAAO9F,SAEvCw5B,QAAU4O,OAAUA,MAAMM,kBAC1BmB,YAAY,UAGhB,6BAAC,cAAD,KACE,uCAAQrQ,QAASuZ,WAAjB,2BAEF,6BAAC,cAAD,KACE,uCAAQvZ,QAAS,IAvDzB,SAAyB0a,SAAqBC,UAC5C,MAAM6iD,IAAMC,WAAW/iD,SAAUC,UAC3B+iD,KAAO,IAAIj9E,KAAK,CAAC+8E,KAAM,CAAEp9E,KAAM,6BACrC,QAAAu9E,eAAc,CAAC,CAAED,UAAM5Y,SAAW,0BAoDL8Y,CAAgBljD,SAAUC,WAAjD,+BArGR,gEACA,sDAEA,kEACA,8CACA,uDAIA,+BACA,8B,kFAEA,SAAS4iD,aAAa/2F,OACpB,MAAiB,KAAVA,QAAiB4D,MAAMyrC,WAAWrvC,QAqBpC,SAASi3F,WAAW/iD,SAAqBC,UAC9C,MACMkjD,cAAgB,GAOtB,OANAA,cAAct2D,KAFG,CAAC,eAAgB,eAAgB,eAAgB,QAAS,UAG3EmT,SAASrD,QAAQ,CAAC2X,QAASvtC,OACzButC,QAAQxtD,KAAK61C,QAAQ,CAAC71C,KAAMy3F,aAC1B4E,cAAct2D,KAxBpB,SACE/lC,KACAy3F,UACAx3D,MACAk5D,WACAhgD,UAEA,MAAM,EAAEl7C,EAAF,EAAKC,GAAM8B,KACXuhC,QAAU4X,SAASzG,KAAMiY,UAAaA,SAASwuC,aAAeA,YACpE,IAAK53D,QACH,MAAM,IAAIt+B,MAAM,6DAElB,MAAM,YAAE4kD,YAAF,YAAeC,aAAgBvmB,QAAQ1mB,KAG7C,MAAO,CAAC5c,GAFiB,QAAA81F,eAAclsC,aACrBC,aAAc,QAAAisC,eAAcjsC,aAAe,GACrB7nB,MAAO/hC,GASxBo+F,CAAWt8F,KAAMy3F,EAAWjqC,QAAQvtB,MAAOutB,QAAQliD,IAAK6tC,eAGxEkjD,cAAcvqD,KAAK,Q,kDClD5B,IAAI5F,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,upBAAwpB,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,mFAAmF,6EAA6E,MAAQ,GAAG,SAAW,qMAAqM,KAAO,uBAAuB,eAAiB,CAAC,0lBAA4lB,orDAAorD,WAAa,MAGr5GquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,MAAS,oEACT,MAAS,oEACT,WAAc,yEACd,SAAY,uEACZ,SAAY,yE,8BC9BbD,OAAOE,QAAU,mvB,8BCAjBF,OAAOE,QAAU,qV,6ICQjB,2DACA,4DACA,+BACA,M,4WAAA,yBACA,+BACA,4CAGA,yEACA,2EACA,gCACA,6DACA,uDACA,sDACA,yDACA,+DACA,qEACA,oCACA,sEAGA,yCACA,0D,kqBAEA,MAAMkwD,aAAe,CACnB,CAACpsB,aAAOr6B,IAAKnX,iCAAO69D,GACpB,CAACrsB,aAAOp6B,MAAOpX,iCAAOuL,KACtB,CAACimC,aAAOn6B,OAAQrX,iCAAOxoB,MACvB,CAACg6D,aAAOl6B,OAAQtX,iCAAO89D,OASzB,MAAMC,gBAAgBr/F,MAAMsvC,cAA4B,mEAC5C,KACR,MAAM,KAAEtoC,KAAF,QAAQm6B,SAAYjzB,KAAKzO,MAC/B0hC,QAAQn6B,QAH4C,kCAKzC,KACX,MAAM,KAAEA,KAAF,WAAQs4F,YAAepxF,KAAKzO,MAClC6/F,WAAWt4F,QAGboN,SACE,MAAM,KAAEpN,KAAF,SAAQu4F,UAAarxF,KAAKzO,MAEhC,OACE,2BACE4hC,WAAW,uBAAG69D,aAAal4F,KAAKuB,OAAO6vC,OAAQ9W,iCAAOk+D,SACtDr+D,QAASjzB,KAAKizB,QACds+D,4BAAA,GACA,oBAAC,cAAD,CAAMz3C,MAAOu3C,SAAUp+D,QAASjzB,KAAKoxF,WAAYj+D,WAAW,uBAAGC,iCAAOo+D,QAAS,CAAE,CAACp+D,iCAAOq+D,QAASJ,YAChG,oBAAC,aAAD,OAEF,gCAAOv4F,KAAKu7B,aAPd,MAO0C,4BAAMlB,UAAWC,iCAAOzJ,SAAU7wB,KAAKuB,OAAOsvB,WAc9F,MAAM+nE,eAAiB,CAACC,MAAyB3qE,aACxC,UAAAkzC,QAAOy3B,MAAM1yE,OAAQnmB,OAAyC,IAAhCkuB,UAAU8jB,QAAQhyC,KAAKuQ,KAAcvQ,MACxEA,KAAKu7B,YAAYqe,QAAQ,MAAO,KAIpC,MAAMruB,0BAA0BvyB,MAAMsrE,UAAiB,wEAIrCtkE,OACdkH,KAAKzO,MAAM25B,WAAW,CAAElE,WAAW,mBAAOhnB,KAAKzO,MAAMy5B,OAAOhE,UAAWluB,KAAKuQ,QALzB,mCAQtCvQ,OACbkH,KAAKzO,MAAMy9B,iBACT,wBACA,MAEIm1D,mBAAoBrrF,KAAKuB,OAAOyvC,YAChCs6C,aAActrF,KAAKuB,OAAOkiB,KAC1B2K,cAAelnB,KAAKzO,MAAMy5B,OAAO9D,mBAfY,iCAoBzC,EAAG5X,UAAMlJ,YAAOrG,QAAKhH,eAE7B,2BAAKgH,IAAKA,IAAKqG,MAAOA,OACpB,oBAAC+qF,QAAD,CACEr4F,KAAMwW,KACN+hF,UAA4D,IAAlDrxF,KAAKzO,MAAMy5B,OAAOhE,UAAU8jB,QAAQx7B,KAAKjG,IACnD4pB,QAASjzB,KAAK4xF,YACdR,WAAYpxF,KAAK6xF,iBA3B4B,+CAgD1BlpE,SACzB,MACEqC,QAAQ,cAAE9D,eADN,WAEJgE,YACElrB,KAAKzO,MACT,OACE,oBAAC,2BAAD,CACE21B,cAAeA,cACfob,SAAW+hD,kBAAqBn5D,WAAW,CAAEhE,cAAem9D,mBAC5D17D,OAAQA,OACRm+B,oBAAqB,kCACrBC,qBAAsB5/B,sCA1B5B2qE,uBACE,MACE9mE,QAAQ,iBAAE/D,kBADN,WAEJiE,YACElrB,KAAKzO,MACT,OACE,6BACE6U,MAAO,CAAEhS,MAAO,OAAQwlD,QAAS,IAAKkqB,WAAY,cAAeiuB,QAAS,OAC1Et4F,MAAOwtB,iBACPqc,YAAa,qBACbhB,SAAW9/B,GAAM0oB,WAAW,CAAEjE,iBAAkBzkB,EAAEjD,OAAO9F,UAqB/DyM,SACE,MACE8kB,QAAQ,cAAE9D,eADN,OAEJyB,QACE3oB,KAAKzO,MACT,OACE,oBAAC,cAAD,CAAMgiC,KAAG,EAACJ,UAAWC,iCAAO4+D,OAC1B,oBAAC,sBAAD,CAAc/jD,YAAaA,+BAAay2C,gBAAiB1kF,KAAK2kF,wBAAwBh8D,SACnF3oB,KAAK8xF,wBAER,oBAAC,cAAD,CAAMv+D,KAAG,GACP,oBAAC,4BAAD,CAAoB1L,MAAOX,eACvBvwB,SACA,GAAoC,IAAhCA,OAAO0tE,gBAAgBzgD,KACzB,OACE,oBAAC,oBAAD,oBACc,gCAAOsD,eADrB,aAKJ,MAAM,UAAEF,UAAF,iBAAaC,kBAAqBjnB,KAAKzO,MAAMy5B,OAC7CinE,YAAcjrE,UAAU9d,IAAKG,IAAO1S,OAAO0tE,gBAAgBz6D,IAAIP,KAE/DsoF,MAA0B,KAC3B,UAAAhlD,SAAQslD,gBACRP,gBAAe,QAAAQ,iBAAgBv7F,OAAQswB,iBAAkB29C,aAAOl6B,OAAQ1jB,cACxE0qE,gBAAe,QAAAQ,iBAAgBv7F,OAAQswB,iBAAkB29C,aAAOn6B,OAAQzjB,cACxE0qE,gBAAe,QAAAQ,iBAAgBv7F,OAAQswB,iBAAkB29C,aAAOp6B,MAAOxjB,cACvE0qE,gBAAe,QAAAQ,iBAAgBv7F,OAAQswB,iBAAkB29C,aAAOr6B,IAAKvjB,YAE1E,OAAwB,IAAjB2qE,MAAM17E,OAAe,KAC1B,oBAAC,kBAAAk8E,UAAD,KACG,EAAGv9F,cAAQR,eACV,oBAAC,kBAAAg+F,KAAD,CACEh+F,MAAOA,MACPQ,OAAQA,OACRwR,MAAO,CAAE5N,QAAS,QAClBtE,UAAW,GACXm+F,YAAcC,UAAatyF,KAAKuyF,UAAL,iBAAoBD,SAApB,CAA8BhjF,KAAMqiF,MAAMW,SAASv5F,UAC9Ey5F,SAAUb,MAAM17E,OAChBw8E,iBAAkB,W,gBAxGlCpuE,kB,YACe,qB,gBADfA,kB,kCAEwB,cAAAP,kBAAiBE,gBAAgBK,kBAAkB0C,gB,cAmHlE,QAAA6iB,MAAI,kBAAcvlB,oB,wDC3MjCuc,OAAOE,QAAU,oV,kDCCjB,IAAIH,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,++EAAg/E,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,mGAAmG,4EAA4E,6EAA6E,MAAQ,GAAG,SAAW,8iBAA8iB,KAAO,gCAAgC,eAAiB,CAAC,25BAA+5B,m9DAA+9D,orDAAorD,WAAa,MAG79PquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,QAAW,sFACX,QAAW,sFACX,MAAS,oFACT,GAAM,iFACN,QAAW,sFACX,KAAQ,mFACR,MAAS,oFACT,MAAS,oFACT,OAAU,uF,6IC3BX,mCACA,O,4WAAA,yBACA,+BACA,sEACA,iEAEA,6DACA,uDACA,yDACA,+DACA,sEACA,wCACA,4CACA,4EACA,oEACA,+DACA,4DACA,yC,sPAEA,MAAM6xD,YAAcv8D,0BAAOC,IAAK;;;;;;;;;;;EAa1Bu8D,iBAAmBx8D,0BAAO2e,GAAI;;;;;;;;;;;;;;;aAevB49C;;;;;;;;;;;;;;;;;EAmBPE,UAAap3F,MACjB,IACE,OAAOmX,KAAKqjC,MAAMx6C,KAClB,MAAOgH,GACP,SAIEqwF,UAAY,CAAE7X,WAAY,EAAGD,QAAS,GAC5C,SAAS+X,UAAUvhG,OACjB,MAAOwhG,cAAeC,mBAAoB,SAAAz/F,UAAiBhC,MAAMkI,OAC3Dw5F,gBAAiB,SAAA9mD,QAAe56C,MAAMkI,OACxCw5F,eAAepyE,UAAYtvB,MAAMkI,QACnCw5F,eAAepyE,QAAUtvB,MAAMkI,MAC/Bu5F,iBAAiBzhG,MAAMkI,QAEzB,MAAMy5F,YAAcN,UAAUG,eACxBI,aAA0BjoF,IAAhBgoF,YAChB,OACE,sCACE9sF,MAAO,CAAE1K,MAAOy3F,QAAU,QAAUr3F,sBAAO85C,KAC3ClN,YAAU,aACVr1B,KAAK,OACL5Z,MAAOs5F,cACPzwD,SAAW9/B,IACTwwF,iBAAiBxwF,EAAEjD,OAAO9F,OAC1B,MAAM25F,eAAiBR,UAAUpwF,EAAEjD,OAAO9F,YACnByR,IAAnBkoF,gBACF7hG,MAAM+wC,SAAS8wD,iBAGnBxsF,UAAYpE,IACV,GAA2B,iBAAhB0wF,aAA4BL,UAAUrwF,EAAEzC,KAAM,CACvD,MAAMqzF,eAAiBF,YAAcL,UAAUrwF,EAAEzC,KACjDizF,iBAAkB,GAAEI,gBACpB7hG,MAAM+wC,SAAS8wD,oBAOzB,SAASC,uBAAuB9hG,OAC9B,MAAOwhG,cAAeC,mBAAoB,SAAAz/F,UAAiBhC,MAAMkI,OAC3Dw5F,gBAAiB,SAAA9mD,QAAe56C,MAAMkI,OAK5C,OAJIw5F,eAAepyE,UAAYtvB,MAAMkI,QACnCw5F,eAAepyE,QAAUtvB,MAAMkI,MAC/Bu5F,iBAAiBzhG,MAAMkI,QAGvB,6BAAC,4BAAD,CACE2M,MAAO,CAAE1K,MAAQnK,MAAM+hG,cAAcxrE,SAASirE,eAA2Bj3F,sBAAO85C,IAAjB,SAC/Dn8C,MAAQ,IAAGs5F,cACXzwD,SAAWT,QACT,MAAMpoC,MAAQooC,MAAMtiC,OAAO9F,MAAMk2B,MAAM,GACvCqjE,iBAAiBv5F,OACZlI,MAAM+hG,cAAcxrE,SAASruB,QAChClI,MAAM+wC,SAAS7oC,UAOzB,MAAM85F,gBAAkB,CAACC,OAAQC,OAAQzqE,gBAAiBtU,IAAKiiB,4BAC7D,MAAMwU,KAAOxtC,OAAOwtC,KAAKniB,iBACzB2N,yB,8ZAAyB,CAAD,IACnB,UAAA+8D,MAAK1qE,gBAAiBmiB,KAAKxb,MAAM,EAAGjb,MADjB,CAEtB,CAAC8+E,QAASxqE,gBAAgByqE,UACvB,UAAAC,MAAK1qE,gBAAiBmiB,KAAKxb,MAAMjb,IAAM,OAI9C,SAAS4P,gBAAgB/yB,OACvB,MAAOoiG,WAAYC,gBAAiB,SAAArgG,UAAiB,SAC/C,gBAAEy1B,gBAAF,mBAAmB0N,mBAAnB,yBAAuCC,2BAA6B,kCACpE,sBAAEzB,wBAA0B,uCAC5B2+D,oBAAsBl2F,OAAOwtC,KAAKniB,iBAClC8qE,gCAAiC,oBAAAptD,2CAA0CxR,wBAC1E6+D,OAAQC,WAAY,UAAA3gD,WAAUwgD,oBAAsBt3E,QAAWu3E,+BAA+Bv3E,OAE/F03E,KAAM,SAAAjoE,SACV,KACE,MAAMkoE,YAAc,IAAIxkC,gBAAgB5qD,OAAO6qD,SAASC,QAExD,OADAskC,YAAY1qE,IAAI2qE,4CAA4BxhF,KAAKsjC,UAAUjtB,mBACvD,gCACM,0BAAyBkrE,YAAYvrD,WAEvC,GAAE7jC,OAAO6qD,SAASykC,SAASF,YAAYvrD,cAEjD,CAAC3f,kBAGH,OACE,6BAAC2pE,iBAAD,KACE,6BAAC,sBAAD,CAAc1kD,YAAaA,mBAAaC,UAAQ,IAChD,0CACE,0CACG6lD,OAAO7qF,IAAI,CAACqT,KAAM7H,OAAQ,0BACzB,OACE,mCAAI3U,IAAM,UAAS2U,KACjB,uCACE,6BAAC,cAAA2/E,sBAAD,CAAuB93E,KAAMA,QAE/B,mCAAInoB,MAAM,QACR,6BAAC0+F,UAAD,CACEr5F,MAAOkZ,KAAKsjC,UAAL,8BAAejtB,gBAAgBzM,aAA/B,gDAAwC,IAC/C+lB,SAAWsU,QAAWlgB,mBAAmB,CAAE,CAACna,MAAOq6B,eAM5Do9C,SAAS9qF,IAAI,CAACqT,KAAM7H,OAAP,kCACZ,mCAAI3U,IAAM,YAAW2U,KACnB,mCAAIg0B,YAAU,uBACZ,6BAACgqD,YAAD,CAAaz/D,QAAS,IAAMyD,mBAAmB,CAAE,CAACna,WAAOrR,KAAzD,KACA,6BAACmoF,uBAAD,CACE55F,MAAO8iB,KACP+lB,SAAWkxD,QACTD,gBAAgBC,OAAQj3E,KAAMyM,gBAAiB+qE,OAAO99E,OAASvB,IAAKiiB,0BAEtE28D,eAAe,UAAAgB,SAAQT,oBAAqBt3E,MAAMhL,OAAO,OAG7D,mCAAInd,MAAM,QACR,6BAAC0+F,UAAD,CACEr5F,MAAOkZ,KAAKsjC,UAAL,+BAAejtB,gBAAgBzM,aAA/B,kDAAwC,IAC/C+lB,SAAWsU,QAAWlgB,mBAAmB,CAAE,CAACna,MAAOq6B,iBAQ/D,6BAAC,cAAD,CAAMxwC,MAAO,CAAEuhC,OAAQ,IACrB,uCAAQe,YAAU,mBAAmBzV,QAAS,IAAMyD,mBAAmB,CAAE,GAAI,MAA7E,kBAGA,sCAAO69D,UAAQ,EAACnuF,MAAO,CAAEhS,MAAO,QAAUif,KAAK,OAAO5Z,MAAOw6F,MAC5DpxF,SAAS2xF,sBAAsB,SAC9B,uCACEvhE,QAAS,KACPivD,mBAAUC,KAAK8R,KAAK/jE,KAAK,KACvB0jE,cAAc,WACdzrB,WAAW,KACTyrB,cAAc,SACb,SAGND,cAQbrvE,gBAAgB8J,UAAY,SAC5B9J,gBAAgByC,cAAgB,G,cAEjB,QAAA6iB,MAAI,kBAAUtlB,kB,wDC5O7Bsc,OAAOE,QAAU,2wB,sICoBF,UAAqB,eAAEsnB,eAAF,gBAAkBC,kBACpD,OACE,oBAAC,QAAAH,KAAD,KACE,oBAAC,QAAApyB,OAAD,KACE,oBAAC,mBAAD,CAAWjO,MAAOwgC,gBAAgBxgC,SAEP,MAA5BugC,eAAe7+C,OAAOF,IACrB,oBAAC,QAAAysB,OAAD,KACE,oBAAC,eAAD,CACErB,WAAS,EACTM,mBAAiB,EACjBH,cAAe,CAAC,MAChB/M,MAAOwgC,gBAAgBxgC,MACvBoN,cAAemzB,eAAe7+C,OAAOF,GACrCkrB,eACE,oBAAC,OAAA+B,GAAD,CAAIlwB,MAAO,CAAEsyD,UAAW,IAAxB,QACO,sCADP,yBAC4C,oBAAC,OAAAwV,mBAAD,CAAoB3xD,KAAK,aA5BnF,I,IAAA,sDAGA,0DACA,kCACA,Y,IAAA,4B,6iBCQe,UAA4B,KAAEA,KAAF,YAAQ+xD,cACjD,OACE,6BAACmmB,oBAAD,CAAqB/uE,MAAOnJ,KAAM+xD,YAAaA,aAA/C,IACI/xD,OAhBR,0D,kFAGA,MAAMk4E,oBAFN,+CAE4Bt+D,QAAOC,IAAK;;;;;;;kBAOrB7kC,OAAWA,MAAM+8E,YAAc,MAAQ;yICuB3C,UAA8B,MAC3CloE,MAAQ,GACRqvB,2BAA2B,MAAE5N,MAAF,cAASoN,cAAT,cAAwBL,eAFR,QAG3CoB,QAH2C,UAI3CvB,YAEA,MAAO25C,OAAQsmB,YAAc5iG,MAAMyB,UAAkB,IAC9CgpB,KAAMo4E,SAAW7iG,MAAMyB,SAAS,IAAMqhG,eAAehgE,gBAEtDqB,UAAYnkC,MAAM8H,YACrBktC,WACC4tD,WAAW5tD,UACPA,UACF6tD,QAAQC,eAAehgE,iBAG3B,CAACA,iBAGG,mBAAE8B,qBAAuB,kCACzB,sBAAExB,sBAAF,yBAAyB0B,2BAA6B,uCAEtDi+D,QAAWhT,KACfA,GAAGlvD,iBACH+D,mBAAmB,CAAE,CAACna,MAAO0Y,gBAC7B,MAAM84C,yBAA2B,IAAI74C,sBAAuB,CAAErN,YAAO+M,4BAAerY,YACpFqa,yBAAyBm3C,0BACzB93C,WAAU,IAGN6+D,mBAAqBrgE,UAAY,CAAE/4B,MAAOI,sBAAO24B,WAAc,GAErE,OACE,oBAAC,qBAAD,CACEjB,SAAW,QAAOjX,KAClB/lB,SAAS,QACTkkD,SAAU,IAAMzkB,WAAWm4C,QAC3BA,OAAQA,OACRhoE,MAAOA,OACP,oBAAC,cAAD,CACE+sB,WAAW,uBAAW,YAAa,CAAEsB,sBACrCruB,MAAO0uF,mBACPh7C,MAAOrlB,UACPuB,QAASA,SAAW,uCACpBkkB,aAAc,CAAEvG,UAAW,QAC3B,oBAAC,kBAAD,OAEF,oBAAC,OAAApd,oBAAD,CAAqBw+D,SAAUF,QAASnsD,YAAU,aAChD,yBAAGtiC,MAAO,CAAEsyD,UAAW,EAAG5kB,WAAY,QAAtC,2CAC2CjsB,MAD3C,oCAEE,oBAAC,OAAAqmD,mBAAD,CAAoB3xD,KAAMA,OAF5B,KAIA,oBAAC,+BAAD,CAAuBA,KAAMA,KAAM+wD,UAAQ,IAC3C,6BAAO/M,WAAS,EAACltD,KAAK,OAAO5Z,MAAQ,IAAG8iB,KAAQ+lB,SAAW9/B,GAAMmyF,QAAQnyF,EAAEjD,OAAO9F,MAAMi5C,QAAQ,MAAO,OACvG,yBAAGhK,YAAU,kBACX,oBAAC,gBAAD,CAAQssD,UAAWz4E,KAAM4X,UAAW5X,KAAM0W,QAAS4hE,SAAnD,YAGA,oBAAC,gBAAD,CAAQ5hE,QAAS,IAAMgD,WAAU,IAAjC,cA3FV,gEACA,4DACA,M,4WAAA,yBAEA,4EACA,iCACA,yEACA,yDACA,6DACA,sDACA,sEACA,+D,kFAeA,SAAS2+D,eAAehgE,eACtB,OAAOA,cACJjF,MAAM,EAAG,GACT2W,UACAC,KAAK,O,sIClBK,UACb5R,sBAAsB,MAAE9M,MAAF,cAAS+M,cAAT,KAAwBrY,MADH,UAE3C0Z,YAEA,MAAM,sBAAEf,sBAAF,yBAAyB0B,2BAA6B,uCAC5D,OACE,oBAAC,OAAAL,oBAAD,CAAqBnwB,MAAO,CAAE0uB,WAAY,GAAK4T,YAAU,eACvD,yBAAGtiC,MAAO,CAAEsyD,UAAW,EAAG5kB,WAAY,QAAtC,UACS,oBAAC,OAAAo6B,mBAAD,CAAoB3xD,KAAMA,OADnC,SACkDsL,MADlD,IACyD,oBAAC,OAAAwO,MAAD,MAAQ,oBAAA9G,SAAQqF,gBADzE,KAGA,oBAAC,gBAAD,CACEi5C,QAAM,EACN56C,QAAS,KACP,MAAM86C,yBAA2B74C,sBAAsBjW,OACpD0V,wBAEGA,qBAAqB9M,QAAUA,QAC/B,UAAA4Y,SAAQ9L,qBAAqBC,cAAeA,gBAC5CD,qBAAqBpY,OAASA,OAGpCqa,yBAAyBm3C,0BACzB93C,WAAU,KAZd,UAgBA,oBAAC,gBAAD,CAAQhD,QAAS,IAAMgD,WAAU,IAAjC,YAtCN,mCACA,M,4WAAA,yBAEA,4CACA,4EACA,iCACA,yD,0NCWe,UAAmB,MAAEpO,QAClC,MAAM,iBAAEmH,mBAAqB,gBAAAimE,mBACvBC,gBAAkBpjG,MAAM8H,YAC5B,KACOo1B,kBAGLA,iBAEEhK,eAAYoJ,UAEXpD,Q,8ZAAD,IAAqCA,OAArC,CAA6CyjD,UAAW5mD,UAG5D,CAACmH,iBAAkBnH,QAGrB,OACE,oBAAC,iBAAD,CAAS8rB,UAAU,MAAMD,SAAW,QAAO7rB,+BAEzC,gCACE,oBAACstE,WAAD,CAAYliE,QAASiiE,iBAAkBrtE,UAtC/C,U,4WAAA,yBACA,iEAEA,uCACA,yDACA,yDACA,+D,sPAEA,MAAMstE,WAAah/D,0BAAOC,IAAK;;WAEpBt6B,sBAAO24B;kJCDX,UAA0B,UAAEu8C,UAAF,QAAaV,UAE5C,MAAM8kB,gBAAkB,GAAEpkB,WAAY/gD,MAAO,IAAGolE,uBAEhD,GAD0D,IAA1BD,eAAen/E,OAClB,CAC3B,MAAOozC,OAAQC,OAAS8rC,eAClBE,WAAa3iF,KAAKqjC,MAAMrjC,KAAKsjC,UAAUoT,SACvCksC,UAAY5iF,KAAKqjC,MAAMrjC,KAAKsjC,UAAUqT,QAC5C,OACE,6BAACgpB,UAAD,CAAWlsE,MAAO,CAAE1K,MAAO6uD,oBAAWS,QAAQtvD,QAAW,GAAE45F,cAAcD,sBAAaE,aAG1F,OAAO,6BAACjjB,UAAD,KAAYtB,Y,yBAtBrB,0DACA,iEAEA,mC,kFAEO,MAAMsB,UAAYn8C,0BAAOC,IAAK;;;oLCiB9B,SACLo/D,UACA1mB,kBACAwB,SAEA,IAAImlB,gBAAkB,GAClBC,eAAiB,GACjBC,UAAY,GACZl8F,MAAe+7F,UACf1lD,cAA2Cg/B,kBAE/C,IAAK,MAAM/+B,YAA6BugC,QAAS,CAC/C,GAAqB,MAAjBxgC,eAAkC,MAATr2C,MAC3B,MACK,GAAoC,YAAhCq2C,cAAcG,eAAgD,iBAAVx2C,OAA0C,iBAAbs2C,SAC1FD,cAAgBA,cAAcI,WAAWH,UACzCt2C,MAAQA,MAAMs2C,UAGZ4lD,UAFED,eAAeljD,SAAS,OAEb,GAAEkjD,kBAAkB3lD,aAAap9B,KAAKsjC,UAAUx8C,QAAU,MAE3D,GAEdg8F,iBAAoB,IAAG1lD,SACvB2lD,gBAAmB,IAAG3lD,aACjB,IAAoC,UAAhCD,cAAcG,gBAA6Bt0C,MAAMo7C,QAAQt9C,QAA8B,iBAAbs2C,SAkB9E,IAAoC,cAAhCD,cAAcG,cAGvB,OAEA,MAAM,IAAIv4C,MAAO,0BAAyBo4C,cAAcG,qCAvBkD,CAG1G,GAFAx2C,MAAQA,MAAMs2C,UACdD,cAAgBA,cAAcS,MACzBT,cACH,MAKF,IAAI0L,kBAHJk6C,eAAoBD,gBAAF,MAIkB,YAAhC3lD,cAAcG,gBAChBuL,kBAAoB79C,OAAOwtC,KAAK2E,cAAcI,YAAY/I,KAAMpnC,MAAQ,uBAAAuwC,qBAAoBvwC,OAG5F01F,iBADmB,iBAAVh8F,OAA+B,MAATA,OAA8C,iBAAtB+hD,kBACnC,OAAMA,sBAAsB7oC,KAAKsjC,UAAUx8C,MAAM+hD,qBAAuB,MAExE,IAAGzL,cAW7B,GAAID,eAAiD,cAAhCA,cAAcG,eAA0C,MAATx2C,MAClE,OAAIk8F,YAAa,uBAAArlD,sBAAoB,UAAAlnC,MAAKknE,SAAS3nC,YAC1C,CAAEt1B,KAAM,QAASsiF,qBAEnB,CACLtiF,KAAM,YACNoiF,gCACAC,8BACA1kD,cAAelB,cAAckB,gB,uCAjFnC,I,IAAA,+BACA,c,IAAA,2B,iCAGA,+CAqFO,MAAM6/B,yBAA0B,wBACrC,CAAC/B,kBAA8C8mB,iBAE7C,MAAMtlB,QAA+B,GACrC,IAAK,MAAMulB,QAAgBD,cAAc3lE,MAAM,KACxC5yB,MAAMw4F,MAGTvlB,QAAQ91C,KAAKq7D,MAFbvlB,QAAQ91C,KAAKsC,SAAS+4D,OAK1B,IAAI/lD,cAA2Cg/B,kBAE/C,IAAK,MAAM/+B,YAA6BugC,QAAS,CAC/C,GAAqB,MAAjBxgC,cACF,MACK,GAAoC,YAAhCA,cAAcG,eAAmD,iBAAbF,SAC7DD,cAAgBA,cAAcI,WAAWH,cACpC,IAAoC,UAAhCD,cAAcG,eAAiD,iBAAbF,SAKtD,IAAoC,cAAhCD,cAAcG,cAGvB,OAAOH,cAEP,MAAM,IAAIp4C,MAAO,0BAAyBo4C,cAAcG,qCARxD,GADAH,cAAgBA,cAAcS,MACzBT,cACH,OAUN,OAAOA,gB,uFChIXlP,OAAOE,QAAU,8gB,mDCAjBA,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,48BAAm9B,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,uFAAuF,6EAA6E,MAAQ,GAAG,SAAW,iSAAiS,KAAO,oBAAoB,eAAiB,CAAC,86BAAg7B,o9DAAg+D,WAAa,MAG76IquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,YAAe,8EACf,UAAa,4EACb,YAAe,8EACf,QAAW,0EACX,KAAQ,uEACR,UAAa,8E,sICWC,UAAkB,KAAEpsC,KAAF,SAAQm9E,SAAR,KAAkBznB,KAAlB,KAAwBqnB,KAAxB,QAA8B7nD,QAA9B,YAAuCuoD,cACtE,MAAM4jB,aAAc,SAAAl8F,aACjBm8F,YAAgBvzF,IACfA,EAAE2/B,kBACF3/B,EAAEmwB,iBACF,MAAMqjE,wBAAyB,UAAAC,eAAcF,WAAat8F,QACxD,GAAqB,iBAAVA,OAAsBA,MAAM9C,OACrC,MAAO,aAGXurF,mBAAUC,KAAKxvE,KAAKsjC,UAAU+/C,uBAAwB,KAAM,IAAM,KAEpE,IAEF,OACE,6BAACE,UAAD,MACIhkB,cACCV,KACC,kCAAGprE,MAAO,CAAE1K,MAAO,WAAa6D,OAAO,SAAS42F,IAAI,sBAAsBC,KAAM5kB,MAC7E7nD,QAAQF,UAGXE,QAAQF,UAEXE,QAAQ2yB,aAAgB,GAAE41B,YAAc,QAAU,SAAQ,QAAAsW,eAAc7+D,QAAQ2yB,oBACjF,6BAAC+5C,kBAAD,CAAmBpjE,QAAS6iE,YAAYrhG,MAAOgD,KAAK,aAEnDy6E,aAAeA,YAAY51B,aAC1B,0DACE,wCACI,WAAS,QAAAksC,eAActW,YAAY51B,oBACrC,6BAAC+5C,kBAAD,CAAmBpjE,QAAS6iE,YAAYlkB,UAAWn6E,KAAK,cAE1D,6BAAC4+F,kBAAD,CAAmBpjE,QAAS6iE,YAAY3rC,MAAO1yD,KAAK,yBArE9D,uEACA,+BACA,O,4WAAA,yBACA,iEAEA,sDAEA,4DACA,8B,kFAEA,MAAMy+F,UAAY//D,0BAAO2e,GAAI;;;;;EAe7B,SAASuhD,mBAAkB,KAAE5+F,KAAF,QAAQw7B,UACjC,OACE,kCAAGA,QAASA,QAASmjE,KAAK,IAAIhwF,MAAO,CAAE6sE,eAAgB,SACrD,6BAAC,cAAD,CAAMj9C,QAAQ,mCAAmC5vB,MAAO,CAAE5P,SAAU,WAAYmK,KAAM,IACpF,6BAAC,0BAAD,CAAsByF,MAAO,CAAE+rE,cAAe,aACxC,IACP16E,Q,sICXQ,UAA0B,YAAEi5E,YAAF,SAAeK,SAAf,kBAAyBnB,kBAAzB,iBAA4C5gD,mBACnF,MAAMsnE,eAAgB,SAAA18F,aACnB28F,YAAuB,MACtB,QAAAxP,sBAAqB/3D,iBAAmB,GAAE+hD,WAAWwlB,eAEvD,CAACxlB,SAAU/hD,mBAEPwnE,2BAA4B,SAAA58F,aAC/B28F,YAAuB,MACtB,oBAAA1P,kCAAiC73D,iBAAmB,GAAE+hD,WAAWwlB,eAEnE,CAACxlB,SAAU/hD,mBAEPynE,SAAU,SAAA78F,aACd,IAAMg2E,kBAAmB,GAAEmB,WAAgC,UAArBL,YAAYr9D,KAAmBq9D,YAAYilB,UAAY,MAC7F,CAAC5kB,SAAUnB,kBAAmBc,cAEhC,GAAyB,UAArBA,YAAYr9D,KACd,OACE,6BAAC,cAAD,CAAMymC,MAAI,EAAC3mB,UAAWC,qBAAOo0B,KAAMv0B,QAASwjE,QAASzgE,QAAQ,sBAAsBj2B,IAAI,SACrF,6BAAC,gBAAD,OAIN,MAAM,gBAAE01F,gBAAF,eAAmBC,eAAnB,cAAmC1kD,eAAkB0/B,YAC3D,OACE,yCACGmf,uBAAiB/nE,SAASkpB,gBACzB,6BAAC,cAAD,CAAM8I,MAAI,EAAC3mB,UAAWC,qBAAOo0B,KAAMv0B,QAASqjE,cAAcb,iBAAkBz/D,QAAQ,cAClF,6BAAC,0BAAD,OAGH65D,uBAAiB/nE,SAASkpB,gBAAkB0kD,iBAAmBD,iBAC9D,6BAAC,cAAD,CAAM37C,MAAI,EAAC3mB,UAAWC,qBAAOo0B,KAAMv0B,QAASqjE,cAAcZ,gBAAiB1/D,QAAQ,gBACjF,6BAAC,qBAAD,OAGH2tB,yCAAuB77B,SAASkpB,gBAAkB0kD,iBAAmBD,iBACpE,6BAAC,cAAD,CACE37C,MAAI,EACJ3mB,UAAWC,qBAAOo0B,KAClBv0B,QAASujE,0BAA0Bf,iBACnCz/D,QAAQ,qBACR,6BAAC,wBAAD,SA/DV,mEACA,oEACA,kEACA,0DACA,O,4WAAA,yBAGA,+DACA,sDACA,gCACA,4C,gOCqBO,SAAuB3iB,KAAc5e,KAAWiiG,SAAkBC,YACvE,MAAMxrD,KAAOxtC,OAAOwtC,KAAK12C,MACzB,GAAoB,IAAhB02C,KAAKl1B,OAAc,CACrB,MAAM,IAAE63B,IAAF,KAAOC,MAASt5C,KACtB,GAAW,MAAPq5C,KAAuB,MAARC,KAEjB,OAAOD,IA5BiB,SA4Ba,QAAA8oD,gBAAeniG,MAAQ,0CAAO,QAAAI,QAAOJ,OAK9E,GAAoB,IAAhB02C,KAAKl1B,OAAc,CACrB,MAAM,EAAEvjB,EAAF,EAAKC,GAAM8B,KACjB,GAAS,MAAL/B,GAAkB,MAALC,EAAW,CAC1B,MAAMsjB,OAAS/kB,KAAK2lG,KAAKnkG,EAAIA,EAAIC,EAAIA,GACrC,OACE,mDACUsjB,OAAOkoD,QAAQ,GADzB,IAC8B24B,SAASpkG,EAAGC,KAMhD,GAAoB,IAAhBw4C,KAAKl1B,OAAc,CACrB,MAAM,EAAEvjB,EAAF,EAAKC,EAAL,EAAQC,GAAM6B,KACpB,GAAS,MAAL/B,GAAkB,MAALC,GAAkB,MAALC,EAAW,CACvC,MAAMqjB,OAAS/kB,KAAK2lG,KAAKnkG,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,GAC7C,OACE,mDACUqjB,OAAOkoD,QAAQ,GADzB,IACoC,IAANvrE,EAAUkkG,SAASpkG,EAAGC,QAAKuY,IAO/D,MAAM6rF,WAAa5rD,KAChBlsB,OAAOqxB,0CACPpnC,IAAKnJ,KAAS,GAAEA,QAAQtL,KAAKsL,QAC7BwmC,KAAK,MACR,OACE,yCACGmwD,SADH,IACcK,YAAcJ,a,oCAuEzB,SAAqCltE,UAC1C,MAAMutE,MAAQvtE,SAASwG,MAAM,KACvBgnE,KAAM,UAAAplE,OAAMmlE,OACZE,UAAW,UAAA9tF,MAAK4tF,OACtB,OAAOG,gBAAgBhzF,IAAI8yF,KACtB,2BAA0BA,gBAAgBC,iBAC3C,cAAApzE,kBACGE,gBACAgB,YAAY2F,gBAAgBusE,W,6FAxJrC,I,IAAA,+BACA,Q,IAAA,yB,iCAEA,+CACA,oCACA,mCACA,8CACA,8B,iCAGwC,GACjC,MAAMC,gBAA+B,IAAIzjG,IAAI,CAClD,iBACA,kBACA,gBACA,WACA,cACA,aACA,WACA,cACA,kBACA,uBAGF,SAASojG,SAASpkG,EAAWC,GAC3B,GAAU,IAAND,GAAiB,IAANC,EAGf,OAAO,qCAAMyT,MAAO,CAAE4yB,UAAY,UAAS9nC,KAAKkmG,OAAOzkG,EAAGD,SAAU4gD,QAAS,iBAAtE,K,qEA8D2B,CAACjgC,KAAc5e,KAAWiiG,SAAkBC,cAC9E,MAAM,MAAE9rC,MAAF,QAASL,QAAT,QAAkBQ,QAAlB,GAA2BN,IAAOH,oBAClClhD,GAAK5U,KAAKi2D,GAAGD,WACblB,QAAUlgD,GACZ1L,OAAOwtC,KAAK9hC,IACTH,IAAKnJ,KAAS,GAAEA,QAAQsJ,GAAGtJ,QAC3BwmC,KAAK,MACR,KAEE8wD,OArBR,SAASC,gBAAgB7iG,KAAM8iG,gBAC7B,MAAMC,mBAAqB75F,OAAOwtC,KAAKosD,gBACvC,IAAK,MAAMx3F,OAAOtL,KACZ+iG,mBAAmB1vE,SAAS/nB,KAC9Bw3F,eAAex3F,OACe,iBAAdtL,KAAKsL,MACrBu3F,gBAAgB7iG,KAAKsL,KAAMw3F,gBAG/B,OAAOA,eAYQD,CAAgB7iG,KADR,CAAE,CAACo2D,MAAMJ,WAAY,EAAG,CAACO,QAAQP,WAAY,EAAG,CAACD,QAAQC,WAAY,IAE5F,OACE,0DACGphD,GACC,yCACGqtF,SADH,IACcntC,SAEZ,KACJ,qCAAMnjD,MAAO,CAAEqxF,MAAO,QAAS/7F,MAAOsvD,QAAQtvD,QAC3C27F,OAAOxsC,MAAMJ,YAAc4sC,OAAO7sC,QAAQC,WACzC,qCACErkD,MAAO,CACLktC,QAAS,eACT19C,SAAU,QACVgkD,QAAS,EACT0mB,aAAc,EACdppE,gBAAiB2zD,MAAMnvD,MACvBqsC,YAAa,IAEf,qCAAM3hC,MAAO,CAAE1K,MAAOI,6BAAO47F,QAC1BL,OAAOxsC,MAAMJ,WAAc,GAAEF,oBAAWM,MAAMK,YAAYmsC,OAAOxsC,MAAMJ,cAAgB,MAE1F,qCAAMrkD,MAAO,CAAE1K,MAAOI,6BAAOm+C,MAC1Bo9C,OAAO7sC,QAAQC,WAAc,GAAEF,oBAAWC,QAAQU,YAAYmsC,OAAO7sC,QAAQC,aAAe,OAG/F,KACH4sC,OAAOrsC,QAAQP,WACd,qCACErkD,MAAO,CACLktC,QAAS,eACTl/C,MAAO,EACPQ,OAAQ,EACR0rE,aAAc,EACdppE,gBAAiB8zD,QAAQtvD,MACzBqsC,YAAa,IAEdsvD,OAAOrsC,QAAQP,WAAa,IAAM,MAEnC,S,sICnHG,UAAkC,sBAAEv1B,wBACjD,GAAqC,IAAjCA,sBAAsBjf,OACxB,OACE,oBAAC,QAAAkyC,YAAD,iBACY,IACV,oBAAC,cAAD,CAAM/hD,MAAO,CAAEktC,QAAS,SAAU6+B,cAAe,SAAUr+B,WAAY,GAAKsvB,WAAW,GACrF,oBAAC,kBAAD,OACM,IAJV,0EASJ,OACE,wCACE,oBAAC,QAAAjb,YAAD,uFACA,oBAACwvC,OAAD,KACE,iCACGziE,sBAAsBhsB,IAAI,CAACyrB,qBAAsB57B,QAChD,0BAAIgH,IAAKhH,OACP,8BACE,oBAAC,eAAD,CACE47B,qBAAsBA,qBACtBK,cACE,0CACS,oBAAC,OAAAk5C,mBAAD,CAAoB3xD,KAAMoY,qBAAqBpY,WAK9D,0BAAInW,MAAO,CAAEwxF,UAAW,cACrBjjE,qBAAqB9M,MADxB,IAC+B,oBAAC,OAAAwO,MAAD,MAAQ,oBAAA9G,SAAQoF,qBAAqBC,uBApDlF,gEACA,sDACA,iEAEA,0DACA,kCACA,4CAEA,sD,sdAEA,MAAM+iE,OAASxhE,0BAAO8uD,KAAM;;;;;;yICsBb,UAA8B,gBAC3C58B,gBAD2C,sBAE3CnzB,sBACAkzB,gBAAgB,OAAE7+C,OAAF,cAAUE,iBAE1B,MAAOouF,aAAcC,iBAAmBhmG,MAAMyB,UAAS,GACjDwkG,eAAiBC,eAAezuF,OAAQE,eACxCwuF,aAAe,CACnBxvF,SAAU,uBACVyvF,KAAM,oBAGR,OAAOH,eACL,+BACE,oBAAC,kBAAD,CACEvhG,SAAS,QACTiD,MAAOo+F,aACPpgG,KAAMogG,aAAeI,aAAaxvF,SAAWwvF,aAAaC,KAC1D51D,SAAUw1D,iBACV,4BAAMr+F,OAAO,GAAOw+F,aAAaxvF,UACjC,4BAAMhP,OAAO,GAAQw+F,aAAaC,OAEpC,oBAACC,cAAD,CACE9vC,gBAAiBA,gBACjBnzB,sBAAuBA,sBACvBkjE,gBAAiBP,aAAeE,eAAiBxuF,UAIrD,oBAAC4uF,cAAD,CACE9vC,gBAAiBA,gBACjBnzB,sBAAuBA,sBACvBkjE,gBAAiB7uF,U,8BAjEvB,mCACA,M,4WAAA,yBACA,iEAEA,iEAEA,yDAGA,2DACA,yC,kqBAEA,MAAM8uF,eAAiBliE,0BAAO2e,GAAI;;EAiBrBkjD,eAAiB,CAACz/F,OAAamc,MACnCnc,OAAO+/F,iBAAmB//F,OAAO+/F,gBAAgB5jF,KAwC1D,SAASyjF,eAAc,gBAAE9vC,gBAAF,sBAAmBnzB,sBAAnB,gBAA0CkjE,kBAC/D,MAAMvwE,MAASwgC,iBAAmBA,gBAAgBxgC,OAAU,GACtD0wE,gBAAiB,UAAA1iF,MAAKuiF,gBAAiB,mBAE7C,OAAKvwE,MAgBH,oBAACwwE,eAAD,KACE,oBAAC,uBAAD,CACE5jG,KAAM8jG,eACNjnB,iBAAkB,CAAC18C,cAAengC,KAAMy1C,QAAUA,MAAQ,EAC1DsoC,aAAa,EACbI,MAAK,iBAAOznB,+BAAP,CAAsB0nB,KAAM,CAAElrC,OAAQ,KAC3C4qC,UAAQ,EACRE,cAAe,CAACp/D,KAAM5e,KAAMiiG,SAAUC,aAAe,gCAAOA,YAC5DvkB,cAAe,CAACx9C,cAAyB8iD,GAAIC,GAAIlgC,eAAyB1lD,QACxE,MAAM2iC,OAAQ,UAAA7C,OAAM+C,eACpB,IAAK6iB,YACH,OAAO,4BAAMrxC,MAAO,CAAEwzC,QAAS,UAAYllB,OAG7C,IAAIy7B,cAAgBooC,eACpB,IAAK,IAAI9lG,EAAImiC,cAAc3e,OAAS,EAAGxjB,GAAK,IAC1C09D,cAAgBA,cAAcv7B,cAAcniC,IACvC09D,eAFwC19D,KAO/C,OAAI09D,cAEA,oBAAC,eAAD,CACE37B,gBAAc,EACdpuB,MAAO,CAAE0uB,WAAY,GACrBJ,MAAOA,MACPE,cAAeA,cACf/M,MAAOA,MACPoN,cAAek7B,qBARrB,GAaFkgB,cAAe,CAAC37C,MAAewP,aAAmBtP,gBAE9C,oBAAC,eAAD,CACExuB,MAAO,CAAE0uB,WAAY,IACrBJ,MAAOA,MACPE,cAAeA,cACf/M,MAAOA,MACPoN,cAAeiP,eAvDvB,oBAACm0D,eAAD,KACE,oBAAC,uBAAD,CACE5jG,KAAM2jG,gBACN9mB,iBAAkB,CAAC18C,cAAengC,KAAMy1C,QAAUA,MAAQ,EAC1DsoC,aAAa,EACbI,MAAK,iBAAOznB,+BAAP,CAAsB0nB,KAAM,CAAElrC,OAAQ,KAC3C4qC,UAAQ,K,6KCnDH,UAA6BnqB,gBAAgB,OAAE7+C,OAAF,cAAUE,iBACpE,MAAO2kE,OAAQn4C,YAAa,SAAA1iC,WAAkB,GAExCilG,uBAAwB,wBAAAC,wBAAuB,kBAE/C,aAAEn+D,aAAF,kBAAgBM,kBAAhB,sBAAmCG,wBACvC,SAAA/O,SACE,IACMwsE,uBACK,aAAAE,gBAAkBnvF,OAAQE,gBAE5B,qBAAAivF,gBAAenvF,OAAQE,eAEhC,CAAC+uF,sBAAuB/uF,cAAeF,UACpC,GAEDovF,sBAAuB,SAAA3sE,SAAQ,IAAO+O,uBAAyBp9B,OAAOwtC,KAAKpQ,wBAA2B,GAAI,CAC9GA,wBAGI69D,0BAA4BD,qBAAqB1iF,OACjD4iF,QAAS,SAAAj/F,aACb,KAEE,MAAMygC,UAAsB9wB,OAAOrX,SAAU,aAAA4mG,cAAavvF,QACpDwvF,SAAW,GACXp8B,IAAMtiC,UAAUpkB,OAAS,EAE/B,IAAK,IAAIxjB,EAAI,EAAGA,EAAIkqE,IAAKlqE,IAAK,CAC5B,MAAMumG,QAAU,CAAC3+D,UAAc,EAAJ5nC,GAAQ4nC,UAAc,EAAJ5nC,EAAQ,GAAI4nC,UAAc,EAAJ5nC,EAAQ,IAC3EumG,QAAQx+D,QAAQm+D,qBAAqBzvF,IAAK+xB,YAAc,UAAArxB,KAAIL,OAAQ,CAAC0xB,UAAWxoC,MAChFsmG,SAASv+D,KAAKw+D,QAAQzyD,KAAK,MAG7B,MACM0yD,QAAW,QADSL,wBAA2B,IAAGD,qBAAqBpyD,KAAK,KAAS,OAC7CwyD,SAASxyD,KAAK,QACtDoqD,KAAO,IAAIj9E,KAAK,CAACulF,SAAU,CAAE5lF,KAAM,6BACzC,QAAAu9E,eAAc,CAAC,CAAED,UAAM5Y,SAAU,oBACjC9hD,WAAU,IAEZ,CAAC0iE,qBAAsBC,wBAAyBrvF,SAGlD,IAAK+wB,aACH,OAAO,KAGT,MAAM4+D,WAAat+D,kBAAoB,CAAEl/B,MAAQ,QAAOk/B,kBAAkB2L,KAAK,SAAY,GAE3F,OACE,0DACE,oCAAKngC,MAAO,CAAEktC,QAAS,OAAQ9L,eAAgB,aAC7C,6BAAC,qBAAD,CAAahxC,SAAS,QAAQkkD,SAAU,IAAMzkB,WAAWm4C,QAASA,OAAQA,QACxE,6BAAC,cAAD,CACEv6C,OAAK,EACLimB,MAAI,EACJw5B,OAAQlF,OACRp4C,QAAS4iE,wBAA0B,2BAA6B,iBAChE,6BAAC,uBAAD,OAEF,6BAAC,cAAD,KACE,6BAAC,cAAD,CACE3lE,QAAS,KACPivD,mBAAUC,KAAK7nD,aAAaiM,KAAK,OAAOrW,KAAK,KAC3C+F,WAAU,OAHhB,mCAQA,6BAAC,cAAD,CAAMhD,QAAS4lE,QACZD,wBAA0B,wCAA0C,iCAK7E,6BAAC1wC,KAAD,KACE,6BAAC,OAAA3gB,OAAD,CAAQnzC,MAAOwkG,wBAA0B,GAAK,IAA9C,UACA,6BAAC,OAAA9iE,OAAD,CAAQ1vB,MAAK,eAAI6/B,KAAM,EAAG6N,WAAY,KAAQolD,aAC3C5+D,aAAapxB,IAAKxW,GAAoB,iBAANA,EAAiBA,EAAIigB,KAAKsjC,UAAUvjD,IAAK6zC,KAAK,QAGlFxL,uBACC,0DACGp9B,OAAOwtC,KAAKpQ,uBAAuB7xB,IAAK+xB,WACvC,6BAACitB,KAAD,CAAMnoD,IAAKk7B,WACT,6BAAC,OAAAsM,OAAD,CAAQnzC,MAAO,IAAK6mC,UAAUk+D,OAAO,GAAG5hD,cAAgBtc,UAAUtL,MAAM,GAAxE,KACA,6BAAC,OAAAmG,OAAD,KAASiF,sBAAsBE,iBArH7C,qEACA,+BACA,O,4WAAA,yBAEA,iEAEA,iCACA,6DACA,+CACA,sDACA,sDACA,uDACA,qCAIA,6CACA,+BACA,4D,kqBAEA,MAAMitB,KAAO/xB,0BAAO2e,GAAI;;;;;;gJCPjB,SAAwB3a,wBAA2C1wB,eACxE,MAAM,eAAEsiD,eAAF,YAAkB7uD,YAAlB,OAA+Bk9B,OAA/B,SAAuC6C,SAAvC,aAAiDC,cAAiB/C,wBACxE,IAAK4xB,eACH,OAAO,KAGT,MAAMqtC,WAAa3vF,eAAiB,EAG9B6wB,cAAe,WAAA++D,iBAAgBttC,eAAgBqtC,WAAY,GAEjE,IAAIx+D,kBACJ,MAAM,UAAE6C,WAAcR,SACtB,GAAIQ,UACF,GAAuB,QAAnBA,UAAU/V,MAAkBxqB,aAS9B,GAPA09B,kBAAoB,KACf,WAAAy+D,iBAAgBn8F,YAAak8F,WAAY,GAI5C,IAEGl8D,aAAc,CAGjB,MAAMo8D,KAAO1+D,kBAAkB,GAC/BA,kBAAkB,GAAKA,kBAAkB,GACzCA,kBAAkB,GAAK0+D,WAEpB,GAAuB,aAAnB77D,UAAU/V,MAAuBxqB,YAAa,CACvD,MAAM,cAAEgvD,cAAF,cAAiBE,eAAkBjyB,wBACnCgF,iBAAkB,WAAAutB,gBAAexvD,YAAak8F,YAC9Ch6D,gBAAkBgtB,cAAgBF,eAAiBnuB,IACnD0B,IAAMvuC,KAAKwyB,IAAI,EAAGxyB,KAAK8D,KAAKmqC,gBAAkB+sB,eAAiB9sB,gBAAiB,KAChF,SAAEE,SAAF,SAAYE,UAAa/B,UACzB4B,gBAAiB,gBAAAzC,eAAc0C,UAC/BC,gBAAiB,gBAAA3C,eAAc4C,UACrC5E,kBAAoB,EAClB,QAAAoF,MAAKP,IAAKJ,eAAe,GAAIE,eAAe,KAC5C,QAAAS,MAAKP,IAAKJ,eAAe,GAAIE,eAAe,KAC5C,QAAAS,MAAKP,IAAKJ,eAAe,GAAIE,eAAe,IAC5C,QAEG,GAAuB,YAAnB9B,UAAU/V,MAAsBxqB,YAAa,CACtD,MAAM,cAAEgvD,cAAF,cAAiBE,eAAkBjyB,wBACnCgF,iBAAkB,WAAAutB,gBAAexvD,YAAak8F,YAC9Ch6D,gBAAkBgtB,cAAgBF,eAAiBnuB,IACnD0B,IAAMvuC,KAAKwyB,IAAI,EAAGxyB,KAAK8D,KAAKmqC,gBAAkB+sB,eAAiB9sB,gBAAiB,IACtFxE,kBAAoB,CAAC,EAAG,EAAG,EAAG,IAC9B,qBAAAqF,iBAAgBrF,kBAAmB,EAAG6E,SACV,SAAnBhC,UAAU/V,OACnBkT,mBAAoB,gBAAAgC,eAAca,UAAUC,WAAaC,+CAI7D,IAAI5C,sBACJ,MAAMF,iBAAkB,qBAAAC,yBAAwBV,QAC5CS,gBAAgB5kB,SAClB8kB,sBAAwBF,gBAAgBG,OAAO,CAACrlB,KAAMslB,aACpD,MAAM5C,OAAS8B,wBAAwBc,WAIvC,OAHI5C,SACF1iB,KAAKslB,WAAa5C,OAAO+gE,aAEpBzjF,MACN,KAGL,MAAO,CACL2kB,0BACAM,oCACAG,8C,qBAKG,SAAsBZ,yBAC3B,MAAM,WAAEkB,WAAF,eAAc0wB,gBAAmB5xB,wBACjC+Q,IAAM,GACZ,IAAK,IAAIz4C,EAAI,EAAGA,EAAI4oC,WAAY5oC,IAAK,CACnC,MAAM+D,UAAW,WAAA6iG,iBAAgBttC,eAAgBt5D,EAAG,GAC/Cye,OAAO7T,MAAM7G,SAAS,KACzB00C,IAAI1Q,QAAQhkC,UAGhB,OAAO00C,KAhGT,uCACA,wCACA,6CAKA,oDACA,gC,6ICXA,mCAEA,MAEMvM,MAAO,UAAAygC,UAAS,IAAI30D,OAAgBxG,QAAQ06B,QAAQl0B,MAF5C,KAGRG,OAAQ,UAAAw0D,UAAS,IAAI30D,OAAgBxG,QAAQ2G,SAASH,MAH9C,KAIR3R,MAAO,UAAAsmE,UAAS,IAAI30D,OAAgBxG,QAAQnL,QAAQ2R,MAJ5C,K,aAOC,CACbyN,OAHY,UAAAknD,UAAS,IAAI30D,OAAgBxG,QAAQ04B,OAAOlyB,MAL5C,KASZ3R,UACA6lC,UACA/zB,a,gKCDa,SAAiCrZ,OAC9C,MAAM,SAAE0rC,SAAF,cAAY0J,eAAkBp1C,MAEpC,OACE,6BAAC,cAAD,CAAMgiC,KAAG,GACP,6BAAC,EAAA6T,oBAAD,CACEnK,SAAUA,SACVoK,iBAAkB,EAClBe,kBAAkB,SAClBzB,cAAeA,gBAEjB,6BAAC,EAAAW,oBAAD,CAAqBrK,SAAUA,SAAU0J,cAAeA,kBAtB9D,0DAEA,4BACA,uD,0NCWe,SAA8Bp1C,OAC3C,MAAM,SAAE0rC,SAAW,GAAb,cAAiB0J,eAAkBp1C,MACzC,OACE,6BAAC,cAAD,CAAMgiC,KAAG,GACP,6BAAC,QAAAgU,OAAD,wBACA,6BAAC,QAAA0B,aAAD,kBACY,kDADZ,IAC+B,mDAD/B,mCAGA,6BAAC,QAAAf,OAAD,CACE70B,KAAK,OACLq1B,YAAU,cACVjvC,MAAOwjC,SAASsd,eAAiB,GACjCjX,YAAY,wBACZhB,SAAW9/B,GAAMmkC,cAAc,gBAAiBnkC,EAAEjD,OAAO9F,SAE3D,6BAAC,QAAA8tC,OAAD,0CACA,6BAAC,QAAA0B,aAAD,KACI,wYAOJ,6BAAC,kBAAD,CACEwR,QAASxd,SAASs8D,kBAAoBC,qDACtC9kE,MAAM,wDACN4N,SAAWmY,SAAY9T,cAAc,kBAAmB8T,QAAU++C,qDAAsC,MACxGpzF,MAAO,CAAE0tB,aAAc,IACvBmgD,WAAY,CAAEngC,WAAY,SA3ClC,0DAGA,kCACA,4DACA,uDAEA,yC,0NCce,SAA4BviD,OAA4D,oEACrG,MAAM,QAAEo4B,QAAF,SAAWsT,SAAX,cAAqB0J,cAArB,iBAAoCC,kBAAqBr1C,MAE/D,IAAKo4B,QACH,OACE,oCAAKvjB,MAAO,CAAE1K,MAAOI,6BAAOm/C,aAC1B,sEAKN,MAAM3+C,MAA0B,MAAlB2gC,SAAS3gC,MAAgB2gC,SAAS3gC,MAAQ,EAClDm9F,WACJ,6BAAC,cAAD,CAAMlmE,KAAG,GACP,6BAAC,QAAAgU,OAAD,cACA,6BAAC,QAAAW,OAAD,CACE70B,KAAK,SACL5Z,MAAO6C,MAAMqsC,WACb3zC,IAAK,EACL0uB,IAAK,EACLklB,KAAM,GACNtG,SAAW9/B,GAAMokC,iBAAiB,cAAD,GAAM3J,SAAN,CAAgB3gC,MAAOwsC,WAAWtmC,EAAEjD,OAAO9F,aAI5EigG,kBAAiB,oCAAGz8D,SAASrZ,YAAZ,0BAAG,eAAe+1E,kBAAlB,cAAgC,EACjDC,iBAAgB,sCAAG38D,SAASrZ,YAAZ,2BAAG,gBAAei2E,iBAAlB,gBAA+B,EAC/CC,kBAAiB,sCAAG78D,SAASrZ,YAAZ,2BAAG,gBAAexN,kBAAlB,gBAAgC,GACjD2jF,iBACJ,6BAAC,cAAD,CAAMxmE,KAAG,GACP,6BAAC,QAAAgU,OAAD,wBACA,6BAAC,QAAAW,OAAD,CACE70B,KAAK,OACL5Z,MAEEwjC,SAASvhC,OAAS,GAEpB4nC,YAAY,wBACZhB,SAAW9/B,GAAMmkC,cAAc,QAASnkC,EAAEjD,OAAO9F,SAEnD,6BAAC,QAAA8tC,OAAD,oBACA,6BAAC,QAAAW,OAAD,CACE70B,KAAK,SACL5Z,MAAOigG,kBACPp2D,YAAY,IACZhB,SAAW9/B,GACTokC,iBAAiB,cAAD,GAAM3J,SAAN,CAAgBrZ,KAAM,cAAF,GAAOqZ,SAASrZ,KAAhB,CAAsB+1E,WAAY7wD,WAAWtmC,EAAEjD,OAAO9F,cAG9F,6BAAC,QAAA8tC,OAAD,mBACA,6BAAC,QAAAW,OAAD,CACE70B,KAAK,SACL5Z,MAAOmgG,iBACPt2D,YAAY,IACZhB,SAAW9/B,GACTokC,iBAAiB,cAAD,GAAM3J,SAAN,CAAgBrZ,KAAM,cAAF,GAAOqZ,SAASrZ,KAAhB,CAAsBi2E,UAAW/wD,WAAWtmC,EAAEjD,OAAO9F,cAG7F,6BAAC,QAAA8tC,OAAD,oBACA,6BAAC,QAAAW,OAAD,CACE70B,KAAK,SACL5Z,MAAOqgG,kBACPx2D,YAAY,MACZhB,SAAW9/B,GACTokC,iBAAiB,cAAD,GAAM3J,SAAN,CAAgBrZ,KAAM,cAAF,GAAOqZ,SAASrZ,KAAhB,CAAsBxN,WAAY0yB,WAAWtmC,EAAEjD,OAAO9F,eAM5Fq4E,kBAAoB70C,SAAS+8D,YAAcjoB,wBAAqBC,8BAWtE,OACE,6BAAC,cAAD,CAAMz+C,KAAG,GACP,6BAAC,cAAD,CAAMntB,MAAO,CAAE0tB,aAAc,MAAO8B,OAAQ,YAC1C,6BAACk8C,kBAAD,YAbY,CAChB19E,MAAO,GACPQ,OAAQ,GACRwR,MAAO,CACL6C,KAAM,eACNzS,SAAU,WACVmK,IAAK,QAOH,CAEEsyB,QAAS,IAAM2T,iBAAiB,cAAD,GAAM3J,SAAN,CAAgB+8D,aAAc/8D,SAAS+8D,YAAa19F,WAAO4O,QAE5F,6BAAC,QAAAq8B,OAAD,sBAEDtK,SAAS+8D,YAAcP,WAAaM,mBA/G3C,4EACA,kEACA,sDAGA,kCACA,uDAEA,8C,89BCfA,IAAIp5D,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAyEy1B,QAASlS,SAE5FkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAqE,IAKxFtG,KAAK,CAACoG,OAAOnuC,EAAI,i3CAAw3C,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,iIAAiI,4EAA4E,6EAA6E,MAAQ,GAAG,SAAW,4KAA4K,KAAO,kCAAkC,eAAiB,CAAC,oVAAwV,m9DAA+9D,orDAAorD,WAAa,MAG57LquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,UAAa,sHACb,UAAa,sHACb,SAAY,qHACZ,OAAU,mHACV,SAAY,uH,6ICvBb,I,cAAA,4DACA,M,4WAAA,yBAEA,gEACA,sD,kFAYe,MAAMiH,eAAeh2C,MAAMsrE,UAMxC68B,kBACE,MAAM,UAAEC,WAAcl6F,KAAKzO,MAC3B,GAAK2oG,UAGL,OACE,4BAAM9zF,MAAO,CAAEqxF,MAAO,UACpB,oBAAC,cAAD,KAAOyC,YAKbh0F,SACE,MAAM,QAAE+sB,QAAF,OAAWqgD,OAAX,SAAmBn/C,SAAnB,SAA6BviC,UAAaoO,KAAKzO,MAC/C4hC,WAAY,uBAAGC,sBAAOuW,UAAW,CACrC,CAACvW,sBAAOkgD,QAASA,OACjB,CAAClgD,sBAAOe,UAAWA,WAErB,OACE,2BAAKhB,UAAWA,UAAWF,QAASA,SACjCrhC,SACAoO,KAAKi6F,oB,6BA1BU,CACpB9lE,UAAU,EACVm/C,QAAQ,I,0BAHSxrC,Q,yJCvBrB,IAAInH,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,guCAAiuC,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,uFAAuF,4EAA4E,6EAA6E,MAAQ,GAAG,SAAW,sUAAsU,KAAO,qBAAqB,eAAiB,CAAC,gVAAkV,m9DAA+9D,orDAAorD,WAAa,MAGl4LquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,UAAa,4EACb,OAAU,yEACV,SAAY,6E,qKCrBb,+DACA,M,4WAAA,yBACA,kCACA,iEAEA,gEACA,sDACA,+D,sPAEA,MAAMs5D,OAAShkE,0BAAO2e,GAAI;;WAEfh5C,sBAAOs+F;;EAiBH,MAAMvyD,eAAe/1C,MAAMsrE,UAAwB,mGAOxD,CACNgR,QAAQ,IARsD,6BAWxD,KACNpuE,KAAK2hC,SAAS,CAAEysC,QAAQ,IACxBtpE,OAAOi9B,oBAAoB,QAAS/hC,KAAKq6F,SAbqB,4BAgBxD73F,IACNA,EAAE2/B,kBACFniC,KAAK2hC,SAAS,CAAEysC,QAAQ,IAExBh9B,aAAa,KACXtsC,OAAOs9B,iBAAiB,QAASpiC,KAAKq6F,WAI1CC,aACE,MAAM,MAAE7gG,MAAF,SAAS7H,SAAT,SAAmB0wC,UAAatiC,KAAKzO,MACrCgpG,eAAiBzoG,MAAMg7D,SAAS5jD,IAAItX,SAAWm7D,QAGnD,IAAKA,MAAMx7D,MAAMkI,MACf,OAAOszD,MAET,MAcMumB,OAAS75E,QAAUszD,MAAMx7D,MAAMkI,MACrC,OAAO3H,MAAM0oG,aAAaztC,MAAO,CAAE95B,QAflBzwB,IAGf,GAFAA,EAAE2/B,kBACF3/B,EAAEmwB,iBACEo6B,MAAMx7D,MAAM4iC,SACd,OAEiB44B,MAAMx7D,MAAMkI,QAK/BuG,KAAKq6F,QACL/3D,SAASyqB,MAAMx7D,MAAMkI,SAGqB65E,mBAExC,KAAEvtC,MAASljC,UACX,GAAE0D,IAAOvG,KAEf,IAAK+lC,OAASx/B,GACZ,OAEF,MAAMk0F,IAAMl0F,GAAGk5C,wBACTr5C,MAAQ,CACZzF,IAAK85F,IAAI95F,IACTjG,KAAM+/F,IAAI//F,KACVtG,MAAOqmG,IAAIrmG,OAEb,OAAO,YAAA4xC,cACL,2BAAK5/B,MAAOA,MAAO+sB,UAAWC,sBAAO0P,MAClCy3D,gBAAkBA,eAAetkF,OAASskF,eAAiB,oBAACJ,OAAD,8BAE9Dp0D,MAIJ7/B,SACE,MAAM,OAAEkoE,QAAWpuE,KAAKhC,OAClB,KAAEvG,KAAF,MAAQgC,MAAR,KAAe+tD,MAASxnD,KAAKzO,MACnC,OACE,2BAAK+U,IAAMC,IAAQvG,KAAKuG,GAAKA,GAAK4sB,UAAWC,sBAAOuW,UAAW1W,QAASjzB,KAAK+jC,MAC3E,2BAAK5Q,UAAWC,sBAAO8O,QACrB,4BAAM/O,UAAWC,sBAAO35B,OAAQhC,MAAQgC,OACxC,4BAAM05B,UAAWC,sBAAOo0B,MACtB,oBAAC,cAAD,KAAOA,QAGV4mB,QAAUpuE,KAAKs6F,e,uCAjFHzyD,O,eACG,CACpB2f,KAAM,oBAAC,kBAAD,U,oGCrCV,IAAI7mB,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,q1EAA41E,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,uFAAuF,4EAA4E,6EAA6E,MAAQ,GAAG,SAAW,0nBAA0nB,KAAO,qBAAqB,eAAiB,CAAC,m9BAAq9B,m9DAA+9D,orDAAorD,WAAa,MAGp7PquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,UAAa,4EACb,KAAQ,uEACR,OAAU,yEACV,KAAQ,uEACR,MAAS,wEACT,KAAQ,yE,sICYM,UAAwB,SACrCvB,SADqC,SAErCE,SAFqC,SAGrC8C,SAHqC,sBAIrCo4D,sBAJqC,sBAKrCC,wBAQA,MAAMC,cAAe,SAAAhhG,aACnB,CAAC9F,IAAKM,MAAOQ,UACX,MAAMimG,SAAW/mG,IAAIgnG,qBAAqB,EAAG,EAAG1mG,MAAO,GACvDymG,SAASE,aAAa,EAAGz7D,UACzBu7D,SAASE,aAAa,EAAGv7D,UACzB1rC,IAAIknG,UAAYH,SAChB/mG,IAAImnG,SAAS,EAAG,EAAG7mG,MAAOQ,SAE5B,CAAC4qC,SAAUF,WAGb,OACE,0DACE,6BAAC47D,eAAD,KACE,6BAAC,qBAAD,CACE50F,IAAKo0F,sBACLh/F,MAAO4jC,SACPgD,UAAU,SAAA1oC,aAAa27E,UAAajzC,SAAS,CAAEhD,SAAUi2C,SAAU/1C,oBAAa,CAACA,SAAU8C,aAE7F,6BAAC,qBAAD,CACEh8B,IAAKq0F,sBACLj/F,MAAO8jC,SACP8C,UAAU,SAAA1oC,aAAa27E,UAAajzC,SAAS,CAAEhD,kBAAUE,SAAU+1C,WAAa,CAACj2C,SAAUgD,cAG/F,6BAAC64D,YAAD,KACE,6BAACC,MAAD,MACA,6BAAC1+C,KAAD,KACE,6BAAC,0BAAD,CAAkB2+C,KAAMT,gBAE1B,6BAACQ,MAAD,SA/ER,2DACA,iEAEA,gEACA,mEACA,8C,sdAEA,MAAME,mBAAqBpqG,KAAKovC,MAAMi7D,+BAAoB,GAIpDL,eAAiB/kE,0BAAO2e,GAAI;;;;;EAM5BqmD,YAAchlE,0BAAO2e,GAAI;;;;;iBAKdwmD;kBACCA;EAEZF,MAAQjlE,0BAAO2e,GAAI;;;YAGb0mD;sBACU1/F,6BAAOy4E;EAEvB73B,KAAOvmB,0BAAO2e,GAAI;;YAvBI;qDCf5B,IAAInU,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAmEy1B,QAASlS,SAEtFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAA+D,IAKlFtG,KAAK,CAACoG,OAAOnuC,EAAI,i9BAAk9B,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,0FAA0F,6EAA6E,MAAQ,GAAG,SAAW,+LAA+L,KAAO,+BAA+B,eAAiB,CAAC,ovBAAsvB,orDAAorD,WAAa,MAGl3HquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,OAAU,4EACV,IAAO,yEACP,SAAY,8EACZ,eAAkB,oFAClB,QAAW,+E,mDC9BZC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,qxGAAsxG,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,gGAAgG,4EAA4E,6EAA6E,MAAQ,GAAG,SAAW,y7BAAy7B,KAAO,qBAAqB,eAAiB,CAAC,gxDAAmxD,m9DAA+9D,orDAAorD,WAAa,MAGp/TquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,mFACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,oBAAuB,+FACvB,UAAa,qFACb,QAAW,mFACX,UAAa,qFACb,MAAS,iFACT,KAAQ,gFACR,MAAS,iFACT,cAAiB,yFACjB,cAAiB,yFACjB,aAAgB,0F,sIC8BF,UAAgC,gBAAE46D,gBAAkB,GAApB,gBAAwBC,gBAAkB,GAA1C,eAA8CC,iBAC3F,OACE,oBAACC,wBAAD,CACEx1F,MAAO,CACLzF,IAAK+6F,gBAAgBp5F,QACrB5H,KAAMghG,gBAAgBn5F,UAExB,oBAACs5F,MAAD,KACGJ,gBAAgBvyF,IAAI,EAAGK,cAAQE,6BAAiB1Q,SAC/C,MAAM+iG,SACJ,wCACGvyF,OAAOF,IAAM,oBAAC0yF,IAAD,KAAMxyF,OAAOF,IAC1BE,OAAO8+C,iBAAmB9+C,OAAO8+C,gBAAgBxgC,OAGtD,OACE,oBAACm0E,UAAD,CAAWj8F,IAAKhH,OACd,oBAACkjG,OAAD,CACEl8F,IAAKwJ,OAAOF,IAAOE,OAAO8+C,iBAAmB9+C,OAAO8+C,gBAAgBxgC,MACpEoL,QAAS,IAAM0oE,eAAe,CAAEpyF,cAAQE,+BACvCqyF,SACD,oBAACI,SAAD,KAAWJ,iBA/E3B,I,IAAA,M,4WAAA,yBAEA,mB,IAAA,yB,iCAGA,8CAEA,MAAMF,wBAA0BzlE,0BAAO2e,GAAI;;;gBAG3Bh5C,6BAAOglE;;EAIjB+6B,MAAQ1lE,0BAAOglB,EAAG;;;EAKlB+gD,SAAW/lE,0BAAO2e,GAAI;;gBAEZh5C,6BAAOqgG;;;;;;EAQjBH,UAAY7lE,0BAAOilB,EAAG;;;;;kBAKVt/C,6BAAOqgG;MACnBD;;;;EAMAD,OAAS9lE,0BAAO2e,GAAI;;;;;EAOpBinD,IAAM5lE,0BAAOC,IAAK;WACbt6B,6BAAOsgG;oMClDlB,W,4WAAA,yBACA,+BAEA,wEACA,uDACA,yDACA,+DAEA,6DACA,sEACA,oC,kqBAkBA,MAAMC,kBAAqBrb,KAAS3jF,MAAMyrC,WAAWk4C,MAAQ,uBAAyB,KAChFsb,gBAAmBtb,MACvB,MAAMjnF,OAASsiG,kBAAkBrb,KACjC,OAAIjnF,SAGW+uC,WAAWk4C,MACZ,EACL,eAEF,OAGT,SAASub,mBAAmBhrG,OAC1B,MAAM,aAAEirG,aAAF,OAAgBxxE,QAAWz5B,OAC3B,YAAEkrG,YAAF,mBAAeC,oBAAuB1xE,OAEtC2xE,mBAAoB,SAAA/iG,aACvBgjG,UACCJ,aAAa,cAAD,GACPxxE,OADO,CAEVyxE,YAAa,cAAF,GAAOA,YAAgBG,aAGtC,CAAC5xE,OAAQyxE,YAAaD,eAGlBK,sBAAuB,SAAAjjG,aAC1BkjG,uBACCN,aAAa,cAAD,GACPxxE,OADO,CAEV0xE,mBAAoBI,yBAExB,CAAC9xE,OAAQwxE,eAGLO,aAAc,SAAAnjG,aAAa5E,KAAQ2nG,kBAAkB,CAAE3nG,IAAK8zC,WAAW9zC,OAAS,CAAC2nG,oBACjFK,aAAc,SAAApjG,aAAa8pB,KAAQi5E,kBAAkB,CAAEj5E,IAAKolB,WAAWplB,OAAS,CAACi5E,oBACjFM,cAAe,SAAArjG,aAAagvC,MAAS+zD,kBAAkB,CAAE/zD,KAAME,WAAWF,QAAU,CAAC+zD,oBAC3F,OACE,0DACE,6BAAC,cAAD,KACE,6BAAC,mBAAD,CACEljG,MAAOijG,mBACPp6D,SAAUu6D,qBACVnoE,MAAM,uBACNwoE,gBAAc,KAGlB,6BAAC,cAAD,KACE,6BAAC,mBAAD,CACEzjG,MAAQ,GAAEgjG,YAAYznG,IACtBstC,SAAUy6D,YACVz5D,YAAY,MACZ5O,MAAM,MACNsoC,UAAWq/B,qBAGf,6BAAC,cAAD,KACE,6BAAC,mBAAD,CACE5iG,MAAQ,GAAEgjG,YAAY/4E,IACtB4e,SAAU06D,YACV15D,YAAY,MACZ5O,MAAM,MACNsoC,UAAWq/B,qBAGf,6BAAC,cAAD,KACE,6BAAC,mBAAD,CACE5iG,MAAQ,GAAEgjG,YAAY7zD,KACtBtG,SAAU26D,aACV35D,YAAY,OACZ5O,MAAM,OACNsoC,UAAWs/B,oBAOrB,SAASa,0BAA0B5rG,OACjC,MAAM,OAAEy5B,OAAF,WAAUE,YAAe35B,OACzB,YAAEkrG,YAAF,mBAAeC,oBAAuB1xE,QACtC,gBAAEhC,gBAAF,mBAAmB0N,qBAAuB,iCAE1C0mE,oBAAsBp0E,gBAAgB0zE,oBACtCW,iBAAkB,SAAAzjG,aACrB0jG,gBAGKA,cAAcZ,qBAAuB1xE,OAAO0xE,oBAC9ChmE,mBAAmB,CAAE,CAAC4mE,cAAcZ,oBAAqBU,sBAE3DlyE,WAAWoyE,gBAEb,CAACtyE,OAAO0xE,mBAAoBU,oBAAqBlyE,WAAYwL,qBAEzD6mE,kBAAmB,SAAAvxE,SACvB,KACS,cAAAlI,kBACJE,gBACAO,qBAAqBwD,0BAA0B20E,mBAAoB1zE,iBAExE,CAAC0zE,mBAAoB1zE,kBAEjBmlB,aAAc,SAAAniB,SAAQ,IAAM,6BAACuwE,mBAAD,CAAoBvxE,OAAQA,OAAQwxE,aAAca,kBAAqB,CACvGryE,OACAqyE,kBAEF,OACE,oCAAKj3F,MAAO,CAAEwzC,QAAS,iBACrB,6BAAC,sBAAD,CAAc1L,UAAQ,EAACC,YAAaA,cACpC,6BAAC,8BAAD,CAAsBsuD,YAAaA,YAAaC,mBAAoBA,qBACnEa,kBAKPJ,0BAA0B/uE,UAAY,4BACtC+uE,0BAA0Bp2E,cAAgB,CACxC01E,YAAa,CAAEznG,IAAK,EAAG0uB,IAAK,GAAIklB,KAAM,GACtC8zD,mBAAoB,kB,cAGP,QAAA9yD,MAAI,kBAAkCuzD,4B,gKC5ItC,SAA8B5rG,OAC3C,MAAM,gBAAEy3B,gBAAF,mBAAmB0N,qBAAuB,iCAC1C0mE,oBAAsBp0E,gBAAgBz3B,MAAMmrG,oBAE5Cp6D,UAAW,SAAA1oC,aACdktC,WACKA,WAAas2D,qBACf1mE,mBAAmB,CAAE,CAACnlC,MAAMmrG,oBAAqB51D,YAGrD,CAACv1C,MAAMmrG,mBAAoBU,oBAAqB1mE,qBAElD,OAAO,6BAAC,iBAAA8mE,gBAAD,CAAiB/jG,MAAO2jG,oBAAqBX,YAAalrG,MAAMkrG,YAAan6D,SAAUA,YAxBhG,I,IAAA,O,4WAAA,yBAEA,2CAEA,qB,IAAA,4B,gLC8BO,SAAyB/wC,OAC9B,MAAM,MAAEkI,MAAF,YAASgjG,YAAT,SAAsBn6D,UAAa/wC,MACzC,OACE,6BAACksG,iBAAD,KACE,6BAAC,0BAAD,CAAkBpC,KAAMqC,UAAUjkG,MAAOgjG,eACzC,oCAAKr2F,MAAO,CAAE5P,SAAU,WAAYkE,KAAM,EAAGiG,IAAK,EAAG0P,MAAO,EAAGD,OAAQ,IACrE,6BAAC,gBAAD,YAAYqsF,YAAZ,CAAyBhjG,MAAOA,MAAO4M,WAAS,EAACi8B,SAAUA,e,wDAxCnE,mCACA,sDACA,iEACA,6DAEA,mEACA,yDACA,+D,0VAKA,MAEMq7D,UAAY,CAAE18D,OAAQmf,sBAAOC,cAAez8B,KAAM,IAElD65E,iBAAmBtnE,0BAAO2e,GAAI;;;;EA+B7B,SAAS8oD,wBAAwBC,eAAiCzpG,OACvE,IAAI0pG,WAA8BD,eAClC,EAAG,CAGD,GADuBzpG,OADJ,UAAA2pG,OAAMD,WAAY,EAAGE,uBAAgBA,YAtCtB,EAyChC,MAEFF,WAAaA,WAAW7+E,OAAO,CAAC9V,EAAG1W,IAAMA,EAAI,GAAM,SAC5CqrG,WAAW7nF,OAAS,GAC7B,OAAO6nF,WAGT,SAASJ,UAAUO,WAA2BC,cAC5C,MAAM,IAAElpG,IAAF,IAAO0uB,IAAP,KAAYklB,MAASs1D,aAIrBL,eAAiB,GAGjBM,MAAQjtG,KAAKq0C,MAAM7hB,IAAM1uB,KAAO4zC,MACtC,IAAK,IAAIn2C,EAAI,EAAGA,GAAK0rG,MAAO1rG,IAAK,CAC/B,MAAMgH,MAAQvI,KAAK8D,IAAIA,IAAOvC,EAAI0rG,OAAUz6E,IAAM1uB,KAAM0uB,KAClDjsB,KAAOgC,MAAM0kE,QAAQ,GAErB6/B,WAAY,sBAAUvmG,KAAMkmG,WAClCE,eAAerjE,KAAK,CAClB/iC,UACAgC,YACAukG,sBAIJ,MAAO,CAAClqG,IAA+BM,MAAeQ,UAGpD,MAAMkpG,WAAaF,wBAAwBC,eAAgBzpG,OAG3DN,IAAIsqG,UAAU,EAAG,EAAGhqG,MAAOQ,QAC3BkpG,WAAWxzD,QAAQ,EAAG7yC,UAAMumG,oBAAWvkG,aAAShH,KAC9C,MAAMC,EAAKD,GAAKqrG,WAAW7nF,OAAS,GAAM7hB,MAAQ4pG,UAAY,EACxDrrG,EAAIiC,OAAS,EAAI,EAEnBqpG,aAAexkG,OACjB3F,IAAIstB,KAAQ,QAAOu8E,UAAU/5E,UAAU+5E,UAAU18D,SACjDntC,IAAIknG,UAAY,UAEhBlnG,IAAIstB,KAAQ,GAAEu8E,UAAU/5E,UAAU+5E,UAAU18D,SAC5CntC,IAAIknG,UAAY,QAElBlnG,IAAIuqG,SAAS5mG,KAAM/E,EAAGC,Q,iNClG5B,I,IAAA,M,4WAAA,yBACA,mB,IAAA,yB,iCAEA,8C,o7CAEA,MAAM,OAAEw5C,OAAF,SAAU54C,SAAV,gBAAoB+hD,gBAApB,YAAqC17C,aAAgB9H,MAE9CwsG,WAAanoE,0BAAO2e,GAAI;;;gCAK9B,MAAMypD,gBAAkBpoE,0BAAOzB,KAAM;;WAEjC54B,6BAAOu4E;0CAGX,MAAM1+B,OAASxf,0BAAO2e,GAAI;WACtBh5C,6BAAOm+C;;EAoBH,SAASukD,UAAT,MAeL,IAfwB,aAChCC,aADgC,aAEhCC,aAFgC,WAGhC96D,WAHgC,gBAIhC+6D,gBAJgC,MAKhCjqE,MALgC,OAMhChuB,OANgC,SAOhC47B,SAPgC,QAQhCyT,QARgC,YAShCzS,YATgC,MAUhCl9B,MAVgC,eAWhC82F,eAXgC,UAYhClgC,UAZgC,MAahCvjE,OAEQ,KADL1H,KACK,+LACR,MAAO6Y,MAAOsrC,UAAY3iD,YACnB4iD,SAAUC,aAAe7iD,SAAiBkG,OAASglG,cAAgB,IAEpEpoD,gBAAkBlK,OAAO,IACzBmK,SAAWnK,OAAO,MAExBmJ,gBACE,KAEE,IAAKmpD,eAAiBvB,gBAAkB7mD,gBAAgBx1B,UAAYpnB,MAAO,CACzE,MAAMu9C,iBAAmBgmB,UAAUvjE,OACnCy8C,SAASc,kBAAoB,MAC7BZ,YAAY38C,OAAS,IAEvB48C,gBAAgBx1B,QAAUpnB,OAE5B,CAACglG,aAAcvB,eAAgBlgC,UAAWvjE,QAG5C67C,gBACE,KACMgB,SAASz1B,SAAW69E,cACtBpoD,SAASz1B,QAAQ0hB,SAGrB,CAACm8D,eAGHppD,gBACE,KACMS,SACFA,QAAQnrC,QAGZ,CAACA,MAAOmrC,UAGV,MAAM6oD,SAAWhlG,YACd4B,MACC,MAAMw7C,iBAAmBgmB,UAAUxhE,KAC/Bw7C,iBACFd,SAASc,mBAETd,SAAS,MACT5T,SAAS9mC,OAGb,CAAC8mC,SAAU06B,YAGP9lB,aAAet9C,YACnB,EAAG2F,kBACD62C,YAAY72C,OAAO9F,OACdyjG,gBACH0B,SAASr/F,OAAO9F,QAGpB,CAACmlG,SAAU1B,iBAGP2B,WAAajlG,YACjB,KACMsjG,gBACF0B,SAASzoD,UAEPzvC,QACFA,UAIJ,CAACyvC,SAAUzvC,OAAQk4F,SAAU1B,iBAIzB4B,WAAa3oD,UAAYvrC,MAAQ,CAAEsF,OAAS,aAAYpU,6BAAOm+C,KAAU,GAE/E,OACE,oBAACqkD,WAAD,CAAYl4F,MAAOA,OAChBsuB,OAAS,oBAAC6pE,gBAAD,KAAkB7pE,OAC5B,sCACEhuB,OAAQm4F,WACRv4F,IAAKgwC,SACLhT,YAAaA,YACbl9B,MAAK,eAAI0uB,WAAY,GAAMgqE,WAAel7D,YAC1CnqC,MAAO08C,SACP7T,SAAU4U,cACNnlD,OAEL6Y,QAAU+zF,iBAAmB,oBAAChpD,OAAD,KAAS/qC,Q,sBAK7C4zF,UAAUp8C,aAAe,CACvB4a,UAAYvjE,UACZ6oC,SAAW7oC,UACXiN,OAASjN,UACTmqC,WAAY,GACZx9B,MAAO,K,6ICxJT,4EACA,kEACA,wDACA,2DACA,yDACA,4DACA,+BACA,sDACA,+BACA,mCACA,iEAEA,+DACA,qEACA,6DACA,+DACA,gCACA,gEACA,6DACA,2DACA,+DACA,6DACA,uDACA,sDACA,8BACA,yCACA,yDACA,+DACA,4DACA,oCACA,2DAEA,oEACA,+DAGA,gCACA,8DACA,+CACA,8BACA,0D,siCAEA,MAAM,QAAE4lB,QAAF,YAAWpyB,aAAgB9H,MAiC3BitG,mBAAqB5oE,0BAAOC,IAAK;;;;EAMjC4oE,eAAiB,EAAGvnG,UAAM2O,MAAO64F,YAC5B,KAATxnG,KAAc,KAAO,oBAACsnG,mBAAD,CAAoB34F,MAAO64F,UAAWxnG,MAEvDynG,UAAY,EAAGttG,kBAAUutG,6BAC7B,2BACEhsE,WAAW,uBAAGisE,2BAAkB,cAAe,CAC7C,CAACA,2BAAkBD,gBAAeE,4BAA2BF,gBAE9DvtG,UAIC0tG,gBAAkB,EACtB7nG,UACA08B,mBAAW,EACXX,qBAOE,8BAAQptB,MAAO,CAAEqK,SAAU,OAAQmpC,QAAS,WAAazmB,WAAW,uBAAG,CAAEgB,oBAAauU,YAAWlV,UAC/F,4BAAML,UAAWosE,sBAAe75E,OAAQjuB,MACxC,oBAAC,cAAD,CAAM2O,MAAO,CAAE0uB,WAAY,IACzB,oBAAC,kBAAD,CAAc1uB,MAAO,CAAEhS,MAAO,GAAIQ,OAAQ,GAAIm9F,QAAS,QAOzDyN,gCAAiC,YAAAthG,gBACpCyqB,QAAmCA,QAAU,GAC7CA,SACC,MAAM82E,YAAc92E,OAAO1J,OACxB4I,OAA6B,sBAAnBA,MAAM4B,UAAuD,gCAAnB5B,MAAM4B,UAE7D,OAAO,QAAAg3D,aAAYgf,eA8EvB,MAAMC,SAAW,EAAGC,4BAAeh3E,iBAE/B,2BAAKviB,MAAO,CAAEwzC,QAAS,WAAYhlD,OAAQ,SACzC,oBAAC,sBAAD,CACE0uC,YAAY,YACZ7jB,MAAOkJ,OACP6Z,SAAUm9D,cACVv8D,aAAew8D,GAAMA,EACrBv8D,YAAcu8D,GAAMA,KAM5B,SAASx4E,UAAU71B,OACjB,MAAM,OAAEy5B,OAAF,WAAUE,YAAe35B,OACzB,MACJ4B,MADI,YAEJs0B,YAFI,YAGJJ,YAHI,oBAIJC,oBAJI,WAKJu4E,WALI,iBAMJr4E,iBANI,yBAOJD,yBAA2B,IACzByD,QACE,OAAErC,QAAW6D,SAASC,oBAEtBohC,uBAAyB2xC,+BAA+B72E,QAExD4kC,oBAAsBM,uBAAyB,IAAIA,uBAAuB1iB,QAAU,IAEpF,qBAAExjB,sBAAyBk4E,aAC/B,cAAA/7E,kBAAiBE,gBAAgBoD,WAAa,CAAEO,qBAAsB,IAClEm4E,8BAA+B,QAAAC,kBAAiB14E,YAAasB,OAAQ4kC,oBAAqB5lC,sBAC1Fq4E,iCAAkC,UAAA3mE,MAAK,IACxCymE,gCACAv4E,4BACAD,sBACFm0B,OACGwkD,mBAAqBrmG,YACxBsmG,cACCh1E,WAAW,CAAE5D,qBAAqB,mBAAOA,oBAAqB44E,gBAEhE,CAACh1E,WAAY5D,sBAGT64E,oBAAsBvmG,YACzBwmG,iBACC,MAAMC,0BAA2B,QAAAN,kBAC/BK,eACAz3E,OACA4kC,oBACA5lC,sBAGI24E,wBAAyB,QAAAC,wBAAuBj5E,oBAAqB+4E,0BAC3En1E,WAAW,CACT7D,YAAa+4E,eACb54E,kBAAkB,cAAA1D,kBACfE,gBACAoD,UAAUQ,2BAA2Bw4E,gBAExC94E,oBAAqBg5E,0BAGzB,CAAC33E,OAAQ4kC,oBAAqB5lC,qBAAsBL,oBAAqB4D,aAGrEs1E,cAAgB5mG,YACnB6mG,WACCv1E,WAAW,CAAE/3B,MAAOstG,YAEtB,CAACv1E,aAGGw1E,oBAAsB9mG,YAC1B,KACEsxB,WAAW,CAAEzD,aAAcuD,OAAOvD,eAEpC,CAACyD,WAAYF,OAAOvD,cAuGhB0mB,YAAcniB,QAClB,IACE,wCACE,oBAAC,MAAA+1D,KAAD,CAAMv6B,KAAM//B,YAAc,oBAAC,wBAAD,MAAyB,oBAAC,8BAAD,MAA8BwL,QAASytE,qBACxF,mEAEF,+BACA,oBAAC,MAAAC,QAAD,CAAS5uE,UAAU,QAAQt6B,KAAO,sBAA6B,IAARtE,OAAagrE,cACjE,CAAC,GAAK,GAAK,GAAGj1D,IAAKzP,OAEhB,oBAAC,MAAAsoF,KAAD,CAAMhiF,IAAKtG,MAAOA,MAAOA,MAAOghD,QAAStnD,QAAUsG,MAAOw5B,QAAS,IAAMutE,cAAc/mG,SAC3E,IAARA,OAAa0kE,UADjB,QAQV,CAAChrE,MAAOqtG,cAAe/4E,YAAai5E,sBAGhCE,iBAAkB,QAAAC,oBAAmBx5E,aACrCknC,WAA0B/hC,SAASq4C,kBAAkB,CACzDl8C,OAAQi4E,gBAAkB,CAACA,iBAAmB,GAC9C97B,QAASlrE,YAAaH,OAAUA,MAAO,IACvCwqE,WAAYrqE,YAAY,CAACH,OAASkwB,mBAAwCA,QAAS,MAG/Em3E,kBAAoB91E,OAAOvD,aAAeH,oBAAoBrR,OAAS,EACvE8qF,sBAAuB,SAAAl0D,gBAAe,CAAC,CAAEhlB,MAAOR,YAAa25E,WAAY7tG,UAAYm0B,uBACrF,gBAAE0lB,gBAAF,qBAAmBi0D,sBAjP3B,SACEH,kBACAn4E,QAEA,MAAMu4E,gBAAiB,SAAAxyD,aAAY/lB,QAC7Bw4E,SAAWn1E,QACf,IACE80E,mBACI,uBAAAM,0BACEF,eAAeh4F,IAAKm4F,SAAgC,iBAAZA,QAAuBA,QAAUA,QAAQx5E,QAEnF,CACEi9C,QAAUhf,gBAAD,CACP9Y,gBAAiB8Y,cAAgBA,cAAc9Y,gBAAkB,GACjEi0D,qBAAsB,OAExBh9B,WAAY,EAAGj3B,gCAAiBi0D,2CAAwBK,cAA5C,CACVt0D,gBAAiB,cAAF,GAAOA,gBAAP,CAAwB,CAACs0D,WAAWz5E,OAAQ,CAACy5E,cAC5DL,qBAAsB,QAGhC,CAACH,kBAAmBI,iBAEtB,OAAO10E,SAASq4C,kBAAT,eACLl8C,eACGw4E,WAwN6CI,CAChDT,kBACAC,sBAEIS,cAAe,UAAA53F,KAAIojC,gBAAiB,CAAC3lB,YAAa,IAElDo6E,gBAA6Bz1E,QACjC,IACE80E,kBACIG,qBACE35E,oBAAoBpe,IAAK2e,OAAUo5E,qBAAqBp5E,QACxD,IACF,sBAAUP,oBAAsBO,QAAU,UAAAze,MAAK4jC,gBAAgBnlB,SACrE,CAACP,oBAAqB0lB,gBAAiB8zD,kBAAmBG,uBAGtDS,yBAA2B11E,QAC/B,KACE,MAAM21E,OAAS,GACf,kBAAiCF,gBAAiB,4BAAvC,MAAE55E,MAAF,QAAS8B,SAA8B,KAEhDg4E,OAAO95E,QAAS8B,eAAA,yBAAAA,QAASgP,cAAT,6CAAiB5yB,QAAQ,QAAAyiF,eAAc7+D,QAAQgP,OAAO5yB,OAAS,oBAEjF,OAAO47F,QAET,CAACF,kBAGGlkD,YAAa,mBAAAC,oBAAmB5jD,YAAa6jD,iBAAoBA,gBAAgBF,WAAY,KAC7FqkD,mBAAqBhoG,YACzB,KACE,MAAM+jD,YAAcJ,WAAW,aAI/B,MAH4B,KAC1BI,gBAIJ,CAACJ,aAGG8Q,cAAgB,CACpBC,QAASmzC,gBACTtuG,YACAq0B,kCACA+mC,WAAYkzC,gBAAgBxrF,OAAS,EAAIs4C,WAAa,MAGlDszC,cAAgB,IAElB,oBAAC,sBAAD,CAAc3zD,UAAQ,EAACD,YAAaA,mBAAaE,YAAaA,aAC5D,2BAAKhb,UAAW/sB,qBAAM07F,UApLK,MAC/B,MAAMt0C,iBAAkB,QAAAC,oBAAmBpmC,aAE3C,IAAKwmC,wBAA0D,IAAhCA,uBAAuBjqC,KACpD,OACE,oBAAC,kBAAD,CACE6vB,gBACE,oBAAC6rD,gBAAD,CAAiB9rE,SAAU,kBAAmB/7B,KAAM4vB,aAAe,sBAAuB8M,UAAQ,MAM1G,MAAM1U,MAAQ,IAAIouC,uBAAuB1iB,QAAQsQ,OAAOvyC,IAAKm+C,QAC3D,MAAMo4C,YAAc5xC,uBAAuBjkD,IAAIy9C,OAC/C,OAAKo4C,aAGLA,YAAYhkD,MAAK,wBAAY,SAI3B,oBAAC,MAAAklD,QAAD,CACE5uE,UAAU,QACVhyB,IAAKsnD,MACL5vD,KAAM4vD,MACN5M,QAAS4M,QAAUmG,gBACnBh6B,SAAU6zB,MAAM1V,OAAO,IACtB8tD,YAAYv2F,IAAK2e,OAEd,oBAAC,MAAAk6D,KAAD,CACEhiF,IAAK8nB,MAAMtL,KACX9iB,MAAOouB,MAAMtL,KACbk+B,QAAS5yB,MAAMtL,OAAS8K,YACxB4L,QAAS,IAAMktE,oBAAoBt4E,MAAMtL,OACxCsL,MAAMtL,SAnBR,OA0BX,OACE,oBAAC,kBAAD,CAAUk3B,gBAAiB,oBAAC6rD,gBAAD,CAAiB9rE,SAAU,kBAAmB/7B,KAAM4vB,eAAkB5H,QA0I5FsiF,GAtIoB,EAACxzC,WAAyBmzC,4BACrD,MAAMM,0BAAsC,IAAV7uG,QAAgBo7D,WAElD,OACE,oBAAC,kBAAD,CACE/6B,SAAU,mBACVyuE,eAAe,EACf3/D,SAAU29D,mBACVxmG,MAAO6tB,oBACP7vB,KAAMuoG,gCAAgC/pF,OAAS,EAAI,UAAY,aAC/D+f,QACEgsE,0BACI,iIACA92F,EAENipB,SAAqD,IAA3C6rE,gCAAgC/pF,QAAgB+rF,2BACzDhC,gCAAgC92F,IAAK2e,OACpC,oBAAC,MAAAk6D,KAAD,CACEv6B,KAAMlgC,oBAAoBQ,SAASD,OAAS,oBAAC,wBAAD,MAAyB,oBAAC,8BAAD,MACrE9nB,IAAK8nB,MACLpuB,MAAOouB,MACPsL,UAAW/sB,qBAAM87F,cACjB,4BAAM97F,MAAO,CAAEktC,QAAS,eAAgBvL,YAAa,SAAWlgB,OAChE,oBAACm3E,eAAD,CAAgBvnG,KAAMiqG,yBAAyB75E,QAAU,KACxDN,yBAAyBO,SAASD,QACjC,oBAAC,cAAD,CACEzhB,MAAO,CAAE5P,SAAU,WAAY6Z,MAAO,QACtC4iB,QAAS,IACP/H,WAAW,CACT5D,oBAAqBA,oBAAoBrI,OAAQkjF,aAAgBA,cAAgBt6E,OACjFN,yBAA0BA,yBAAyBtI,OAAQkjF,aAAgBA,cAAgBt6E,UAG/F,oBAAC,eAAD,SAMN,oBAAC63E,SAAD,CACE/2E,OAAQA,OAAOzf,IAAI,EAAGqT,aAAWA,MAAM0C,OAAQ4I,QAAWm4E,gCAAgCl4E,SAASD,QACnG83E,cAAgB93E,OACdqD,WAAW,CACT5D,oBAAqB,IAAIA,oBAAqBO,OAC9CN,yBAA0B,IAAIA,yBAA0BM,aA2F7Du6E,CAAqB7zC,WAAYmzC,4BAM1C,OAAKF,cAAiBV,oBAAsBG,qBAExC,oBAAC,cAAD,CAAM1tE,KAAG,EAACE,MAAI,GACXouE,gBA3VT,SACEx6E,YACAg7E,aACAvB,kBACA9zD,iBAEA,OACE,oBAAC,oBAAD,2BACsBq1D,aAAapsF,OAAS,GAAK,cADjD,OAEE,8BACE,8BACE,gCAAOoR,cAERg7E,aAAa5mD,OAAOvyC,IAAKzY,GACxB,0BAAIsP,IAAKtP,GACP,gCAAOA,MAIZqwG,mBACC,wCACE,iFACmD,gDADnD,yBAGA,8BACGnjG,OAAOwtC,KAAK6B,iBAAiB9jC,IAAK2e,OACjC,0BAAI9nB,IAAK8nB,OACP,gCAAOA,OADT,IACwB,IACrBmlB,gBAAgBnlB,QAAUmlB,gBAAgBnlB,OAAO5R,OAC9C+2B,gBAAgBnlB,OACb3e,IAAI,EAAGygB,oBAAH,2BAEHA,eAAA,wBAAAA,QAASgP,cAAT,2CAAiB5yB,QAAQ,QAAAyiF,eAAc7+D,QAAQgP,OAAO5yB,OAAS,gBAEhEwgC,KAAK,MACR,mBAyTX+7D,CAAiBj7E,YAAaC,oBAAqBw5E,kBAAmB9zD,kBAM3E,oBAAC,cAAD,CAAMzZ,KAAG,EAACE,MAAI,GACXouE,gBACD,oBAAC,qBAAD,CACEhC,WAAYA,WACZh4E,MAAOR,YACPk7E,MAAOf,aACPnzC,cAAeA,cACfrjC,OAAQA,OACRE,WAAYA,WACZ02E,mBAAoBA,qBAEtB,oBAAC,qBAAYY,aAAb,KACIrD,eACA,MAAMsD,qBAAsB,cAAA3+E,kBACzBE,gBACAoD,UAAUQ,2BAA2BP,aAElCq7E,eACJ,oBAAC1D,eAAD,CACE54F,MAAO,CAAEwzC,QAAS,mBAClBniD,KAAM+pG,cAAe,QAAAhZ,eAAcgZ,aAAa73E,QAAQgP,OAAO5yB,OAAS,KAI5E,OAAK08F,oBAKH,oBAACvD,UAAD,CAAWC,aAAcA,cACtBuD,eACD,oBAAC,cAAD,CACEzvE,QAAS,IAAM/H,WAAW,CAAE1D,kBAAmBA,mBAC/CwO,QACExO,iBACI,2FACC,uFAEPsyB,MAAI,EACJ+I,QAAM,GACN,oBAAC,eAAD,CAAWz8C,MAAO,CAAE1K,MAAO8rB,iBAAmB1rB,sBAAOgnD,OAAShnD,sBAAO6mG,gBAflE,oBAACzD,UAAD,CAAWC,aAAcA,cAAeuD,mBAyB3Dt7E,UAAUgH,UAAY,iBACtBhH,UAAUL,eAAgB,cAAAjD,kBAAiBE,gBAAgBoD,UAAUL,c,cAEtD,QAAA6iB,MAAI,kBAAcxiB,Y,uKClhBjC,+DACA,4DACA,0DACA,wDACA,2DACA,sDACA,4EACA,uEACA,+DACA,iEACA,sDAEA,qEACA,+DAEA,uCACA,gCACA,+DACA,8DACA,M,4WAAA,0BACA,oCAEA,+DAEA,gCACA,kEAEA,kEACA,2EACA,oE,sPAwBA,MAAMw7E,cAAgBzsE,0BAAO2e,GAAI;;;;;;;;;WAStBh5C,sBAAO85C;EAMZovB,iBAAmB,IAAIC,0BAAiB49B,qBAAmB,GAYlD,MAAMC,oBAAoBhxG,eAAMsrE,UAU7C3iE,YAAYlJ,OACV8vC,MAAM9vC,OADkB,kCATbO,eAAM+wC,aASO,+BARhB/wC,eAAM+wC,aAQU,+GALlB,CACNj4B,WAAOM,EACP63F,eAAe,IAGS,qCAYV,KACd,MAAMC,eAAiBhjG,KAAKijG,gBAC5B,GAA4B,QAAxBD,eAAe3vF,KAAgB,CAEjC,MAAMu5D,OAASo2B,eAAep2B,QAAU5H,iBAAiBO,uBAAuBvlE,KAAKwlE,KAIrF,OAHKw9B,eAAep2B,SAClBo2B,eAAep2B,OAASA,QAEnBA,OAET,MAAM,IAAIl1E,MAAM,mEAtBQ,qCAyBTmV,SACf,GAAIA,OAAQ,CAEV,GADA7M,KAAKkjG,qBAC6B,QAA9BljG,KAAKijG,gBAAgB5vF,KAAgB,CACvC,MAAMu5D,OAAS5sE,KAAKmjG,gBAEdC,mBAAqBv2F,OAAOk6D,6BAClC6F,OAAOzG,KAAW,aAAc,CAAE98D,GAAIrJ,KAAKwlE,IAAK34D,OAAQu2F,oBAAsB,CAACA,qBAEjFpjG,KAAKqjG,WAAWxiF,QAAUhU,UAlCJ,qCAsCL,MAtCK,wCAuCK,CAAEzY,MAAO,EAAGQ,OAAQ,IAvCzB,oCAyCVkgD,MACd,MAAM,EAAEpiD,EAAF,EAAKC,EAAL,MAAQQ,OAAU6M,KAAKsjG,cAAcC,eAC3C,GAAIlmG,MAAM3K,IAAM2K,MAAM1K,GAEpB,YADA,6BAAiB,0EAA2E,GAAI,MAAO,QAKzG,MAAM6wG,kBAA4B,IAARrwG,MACpB0zE,KAAO/xB,IAAI2K,yBACX,MAAErrD,MAAF,OAASQ,QAAWiyE,KACpB5mE,QAAS,QAAAwjG,kBACb/wG,EACAC,EACAyB,MACAQ,OAECoL,KAAK0jG,iBAAiBtvG,MAAQovG,kBAAqB,IACnDxjG,KAAK0jG,iBAAiB9uG,OAAS4uG,kBAAqB,KAEvDxjG,KAAKzO,MAAM25B,WAAW,CAAExD,KAAM,QAASznB,cAAQ0E,eAAgB6+F,mBAAqB,CAAE70E,iBAAiB,IACnG1uB,OAAO,KAAOvN,GAAKuN,OAAO,KAAOtN,GACnCqN,KAAKsjG,cAAcK,OAAO1jG,OAAO,GAAIA,OAAO,MA/DtB,qCAmEV,KACd,MAAM4M,OAAS7M,KAAKqjG,WAAWxiF,QACzBi0B,IAAM90C,KAAK4jG,QAAQ/iF,QACrBhU,QAAUioC,MACZ90C,KAAKsjG,eAAgB,oBAAQz2F,OAAQ,CACnCg3F,QAAS,IACTC,QAAS,EACTtgG,UAAW,IACXugG,cAAc,EACdC,UAAS,CAACxhG,EAAGnO,GAAI4vG,GAAIC,MAIZ,IAGXlkG,KAAKsjG,cAAcp7B,GAAG,OAAS1lE,IAC7B,MAAM,MAAErP,OAAU6M,KAAKsjG,cAAcC,eAC/B/4B,WAAiC,GAApBxqE,KAAKmkG,aACpBhxG,MAAQq3E,WAAa,KACvBxqE,KAAKokG,qBAAqB55B,YAE5BxqE,KAAKqkG,aAAavvD,OAEpB90C,KAAKsjG,cAAcp7B,GAAG,MAAQ1lE,GAAMxC,KAAKqkG,aAAavvD,SA3FhC,wCA+FP,KACjB,MAAMA,IAAM90C,KAAK4jG,QAAQ/iF,QAEzB,IAAKi0B,IACH,MAAM,IAAIp9C,MAAM,0CAElB,MAAO,CAAE4sG,mBAAoBxvD,IAAIyvD,YAAaC,oBAAqB1vD,IAAI2vD,gBArG/C,oCAwGX,KACb,IAAKzkG,KAAKsjG,cAER,YADA,6BAAiB,iDAAkD,GAAI,MAAO,SAGhF,MAAM,MAAElvG,MAAF,OAASQ,QAAWoL,KAAK0jG,kBACzB,mBAAEY,mBAAF,oBAAsBE,qBAAwBxkG,KAAK0kG,mBACzD1kG,KAAKsjG,cAAcK,QAChBW,mBAAsBlwG,MAAQowG,oBAAuB5vG,QAAU,GAC/D4vG,oBAAuB5vG,OAAS0vG,mBAAsBlwG,OAAS,KAjH1C,kCAqHb,KACX,MAAM,MAAEA,MAAF,OAASQ,QAAWoL,KAAK0jG,kBACzB,mBAAEY,mBAAF,oBAAsBE,qBAAwBxkG,KAAK0kG,mBACzD,OAA4E,IAArExzG,KAAK8D,IAAIsvG,mBAAqBlwG,MAAOowG,oBAAsB5vG,UAxH1C,mCA2HZ,KACZ,MAAM,MAAER,MAAF,OAASQ,QAAWoL,KAAK0jG,kBACzB,mBAAEY,mBAAF,oBAAsBE,qBAAwBxkG,KAAK0kG,mBACzD,OAA4E,IAArExzG,KAAKwyB,IAAI4gF,mBAAqBlwG,MAAOowG,oBAAsB5vG,UA9H1C,0CAiIL,KACfoL,KAAKsjG,gBAGTtjG,KAAK2kG,gBACL3kG,KAAK4kG,kBAtImB,2CA8IJ,KASa,YAA7B/hG,SAASy6C,iBACXt9C,KAAK6kG,uBAxJiB,qCAuLV,KACd,MAAM,MAAEh9E,MAAF,MAAS06E,OAAUviG,KAAKzO,MACxBsb,OAAS7M,KAAKqjG,WAAWxiF,QAG1BhU,QAAW01F,OAMhB11F,OAAOi4F,OAAQnU,OAKb,MAAMn3D,UAAY3R,MAAM8H,MAAM,GACxB5pB,MAAQw8F,MAAM54E,QAAQgP,OAAS4pE,MAAM54E,QAAQgP,OAAO5yB,MAAQ,CAAE+nC,IAAK,EAAGC,KAAM,GAC5EgqC,SAAY,GAAEv+C,aAAazzB,MAAM+nC,OAAO/nC,MAAMgoC,QACpD,SAAA6iD,eAAc,CAAC,CAAED,UAAM5Y,yBA1MD,0CA8MJv1E,IACpBA,EAAE2/B,kBACF3/B,EAAEmwB,iBACKoyE,qBAAYlhD,KACjBrhD,EAAED,QACFC,EAAEF,QACF,6BAAC,cAAD,KACE,6BAAC,MAAAy/E,KAAD,CAAM9uD,QAASjzB,KAAKglG,eAApB,sBArNoB,oCA0NX,KACbhlG,KAAK2hC,SAAU3jC,QAAD,CAAc+kG,eAAgB/kG,MAAM+kG,mBA3N1B,iCA6Nbp0E,kBACX,MAAMw1E,WAAankG,KAAKmkG,aACxBnkG,KAAKsjG,cAAc2B,QAAQ,EAAG,EAAGd,WAAa,KAC9CnkG,KAAKklG,eACLllG,KAAKzO,MAAM25B,WAAW,CAAExD,KAAM,MAAO/iB,eAAgBw/F,YAAc,CAAEx1E,oCAjO7C,kCAoOZA,kBACZ,MAAMw2E,YAAcnlG,KAAKmlG,cACzBnlG,KAAKsjG,cAAc2B,QAAQ,EAAG,EAAGE,YAAc,KAC/CnlG,KAAKklG,eACLllG,KAAKzO,MAAM25B,WAAW,CAAExD,KAAM,OAAQ/iB,eAAgBwgG,aAAe,CAAEx2E,oCAxO/C,4CA2OFy2E,mBACtB,MAAM,mBAAEd,mBAAF,oBAAsBE,qBAAwBxkG,KAAK0kG,mBACzD1kG,KAAKsjG,cAAc2B,QAAQX,mBAAqB,EAAGE,oBAAsB,EAAGY,iBAAmB,OA7OvE,mCAgPZ,KACZ,MAAM,eAAEzgG,gBAAmB3E,KAAKzO,MAAMy5B,OAChCo6E,iBAAmBl0G,KAAKwyB,KAAK/e,gBAAkB,KA1QvC,EA0Q6E,GAApB3E,KAAKmkG,cAC5EnkG,KAAKokG,qBAAqBgB,oBAnPF,kCAsPb,KACX,MAAM,eAAEzgG,gBAAmB3E,KAAKzO,MAAMy5B,OAChCo6E,iBAAmBl0G,KAAK8D,KAAK2P,gBAAkB,KAhRvC,EADU,KAkRxB3E,KAAKokG,qBAAqBgB,oBAzPF,2CA4PL,4BAAgBlrG,UACnC,MAAM,MAAEqoG,MAAF,cAASl0C,cAAT,mBAAwBuzC,oBAAuB5hG,KAAKzO,MACpD8zG,oBAAsBzD,qBAC5B,IACE,MAAM,qBAAEj6E,uBAAyB,cAAA7D,kBAAiBE,gBAAgBoD,UAClE,IAAIk+E,WAEJ,GAA4B,QADLtlG,KAAKijG,gBACT5vF,KAAgB,CACjC,MAAMu5D,OAAS5sE,KAAKmjG,gBACpBmC,iBAAmB14B,OAAOzG,KAAkB,cAAe,CACzD98D,GAAIrJ,KAAKwlE,IACTg8B,aAAce,MACdl0C,4BACA1mC,iDAGF29E,iBAAmB,eAAAC,aAAY,CAC7B14F,OAAQ7M,KAAKqjG,WAAWxiF,QACxB2gF,aAAce,MACdl0C,4BACA1mC,4CAIA29E,aACFtlG,KAAK0jG,iBAAmB4B,WACxBtlG,KAAKkjG,sBAEHljG,KAAKhC,MAAM4M,OACb5K,KAAK2hC,SAAS,CAAE/2B,WAAOM,IAEzB,MAAON,OACP,MAAMid,MAAQ06E,MAAQA,MAAM16E,MAAQ,IACpC,6BAAkB,6BAA4BA,SAAU,GAAI,OAAQ,SACpE7nB,KAAK2hC,SAAS,CAAE/2B,cA/BlB,QAiCEy6F,0BAhSsB,uCAoSR,IACTrlG,KAAKhC,MAAM+kG,cAChB,oCAAK5vE,UAAWC,2BAAOoyE,UAAWC,kBAAA,GAChC,oCAAKtyE,WAAW,uBAAGC,2BAAOsyE,SAAUtyE,2BAAOuyE,iBAA3C,qCACA,oCAAKxyE,WAAW,uBAAGC,2BAAOsyE,SAAUtyE,2BAAOwyE,eACzC,uCAAQzyE,UAAWC,2BAAOgzB,MAAOnzB,QAASjzB,KAAK6lG,YAAaC,yBAAA,GAA5D,KAGA,0CAAW9lG,KAAKzO,MAAMy5B,OAAOrmB,gBAAkB,KAAKw5D,QAAQ,GAApD,KACR,uCAAQhrC,UAAWC,2BAAOgzB,MAAOnzB,QAASjzB,KAAK+lG,WAAYC,uBAAA,GAA3D,MAIF,6BAAC,MAAAjkB,KAAD,CAAM5uD,UAAWC,2BAAOwyE,aAAc3yE,QAAS,IAAMjzB,KAAKokG,qBAAqB,KAAM5wE,SAAU,gBAA/F,gBAGA,6BAAC,MAAAuuD,KAAD,CAAM5uD,UAAWC,2BAAOwyE,aAAc3yE,QAASjzB,KAAKimG,UAAWzyE,SAAU,YAAzE,eAGA,6BAAC,MAAAuuD,KAAD,CAAM9uD,QAASjzB,KAAKkmG,WAAY1yE,SAAU,aAA1C,iBAIA,MA3ToB,oCA8TX,KACb,IAAKxzB,KAAKsjG,cACR,OAGF,MAAM,oBAAEkB,oBAAF,mBAAuBF,oBAAuBtkG,KAAK0kG,mBACzD,IAAKF,sBAAwBF,mBAE3B,OAGF,MAAM,KAAE58E,KAAF,eAAQ/iB,eAAR,OAAwB1E,QAAWD,KAAKzO,MAAMy5B,OAC/CtD,MAAiB,QAATA,KAEO,SAATA,KACT1nB,KAAKkmG,YAAW,GACE,UAATx+E,OAET1nB,KAAKokG,qBAAqBz/F,gBAAkB,KAC5C3E,KAAKsjG,cAAcK,OAAO1jG,OAASA,OAAO,GAAK,EAAGA,OAASA,OAAO,GAAK,IANvED,KAAKimG,WAAU,KA3UO,uCAqVR,CAChB,IAAK,KACHjmG,KAAK+lG,cAEP,IAAK,KACH/lG,KAAK6lG,eAEP,EAAMrjG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,KAG9B,EAAM5hG,IACAA,EAAE6tB,SACJrwB,KAAKokG,qBAAqB,QAzY9BpkG,KAAKwlE,IAAML,cAAKC,KAGhBplE,KAAKijG,kBACF,uCAA6B1xG,MAAM40G,iCAChC,CAAE9yF,KAAM,cACR,CAAEA,KAAM,MAAOu5D,OAAQ5H,iBAAiBO,uBAAuBvlE,KAAKwlE,MAiI5E5gE,oBACE5E,KAAK6kG,qBACLhiG,SAASu/B,iBAAiB,mBAAoBpiC,KAAKomG,qBAiBrDphG,uBACE,MAAMg+F,eAAiBhjG,KAAKijG,gBACA,QAAxBD,eAAe3vF,OAEjB2xD,iBAAiBuC,yBAAyBvnE,KAAKwlE,KAC/Cw9B,eAAep2B,OAAS,MAE1B/pE,SAASk/B,oBAAoB,mBAAoB/hC,KAAKomG,qBAGxD79F,mBAAmB89F,aACK,yBAAaA,UAAWrmG,KAAKzO,MAAO,CAACqH,EAAGtH,EAAGyO,OAC/D,GAAY,kBAARA,IACF,OAAO,yBAAanH,EAAGtH,EAAG,CAACg1G,OAAQC,OAAQC,WACxB,YAAbA,UACK,yBAAaF,OAAQC,QACN,eAAbC,UACF,qBAAQ,iBAAKF,OAAQ,WAAW,iBAAKC,OAAQ,gBAD/C,MAOXvmG,KAAK6kG,qBA6NT3+F,SACE,MAAM,KAAEwhB,KAAF,eAAQ/iB,eAAR,OAAwB1E,QAAWD,KAAKzO,MAAMy5B,OAqBpD,OApBIrmB,iBAAmBA,eAAiB,KAAOA,eAAiB,MAC9D,6BACG,0CAAyCA,2EAC1C,GACA,OACA,QAEF3E,KAAKzO,MAAM25B,WAAW,CAAEvmB,eAAgB,OAEtC1E,QAA4B,IAAlBA,OAAOgW,UACnB,6BACG,kCAAiCtD,KAAKsjC,UACrCh2C,4EAEF,GACA,OACA,QAEFD,KAAKzO,MAAM25B,WAAW,CAAEjrB,OAAQ,CAAC,EAAG,MAGpC,6BAAC,6BAAD,CAAqBwmG,aAAW,EAACC,cAAY,EAACC,SAAU3mG,KAAK4kG,cAC3D,oCAAKzxE,UAAWC,2BAAOC,KAAM/sB,IAAKtG,KAAK4jG,SACrC,6BAAC,qBAAD,CAAapxE,gBAAiBxyB,KAAKwyB,kBACnC,wCACGxyB,KAAKhC,MAAM4M,OAAS,6BAACg4F,cAAD,eAAuB5iG,KAAKhC,MAAM4M,MAAM+e,SAC7D,uCAAQhjB,cAAe3G,KAAK4mG,mBAAoBtgG,IAAKtG,KAAK6mG,cAAe1zE,UAAWC,2BAAOvmB,UAE7F,6BAAC,kCAAD,CACEi6F,eAAgB,KACd9mG,KAAK2hC,SAAS,CAAEohE,eAAe,MAEhC/iG,KAAK+mG,kBACN,uCAAQ5zE,UAAWC,2BAAO4zE,QAAS/zE,QAASjzB,KAAKinG,aAAcC,qBAAA,GAC7D,6BAAC,iBAAD,MAAgB,IACN,UAATx/E,KAAmB,yCAAO/iB,eAAoBA,eAAew5D,QAAQ,GAAzB,IAAiC,QAAiB,U,gFCvhB7Gr9B,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,+rGAAgsG,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,2FAA2F,6EAA6E,MAAQ,GAAG,SAAW,s5BAAs5B,KAAO,0BAA0B,eAAiB,CAAC,m4DAAq4D,orDAAorD,WAAa,MAGl8PquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,KAAQ,2EACR,OAAU,6EACV,aAAc,iFACd,aAAgB,mFAChB,QAAW,8EACX,UAAa,gFACb,MAAS,4EACT,aAAgB,mFAChB,SAAY,+EACZ,eAAkB,uF,kDCnCnBD,OAAOE,QAAU,WACf,OAAO,IAAI2rD,OAAO,sBAA0B,gD,0IC+BvCvyF,gBAA2B,OAChC2S,OADgC,aAEhC20F,aAFgC,cAGhCnzC,cAHgC,qBAIhC1mC,uBAOA,IAAK9a,OACH,OAAO,KAET,IAAK20F,aAEH,OADA2F,YAAYt6F,QACL,KAET,IAAIu6F,WAAa,KACjB,IACEA,YAAa,QAAAC,iBAAgBh5C,eAC7B,MAAOzjD,OACF08F,6BACH,6BAAkB,oDAAoD18F,MAAO,OAAQ,QACrF08F,2BAA4B,GAIhC,IACE,MAAMhlF,aAwBVpoB,eAAqCkvB,KACnC,IAAIm5E,MACJ,MAAQ9tG,KAAM8yG,QAAR,aAAiBrqE,cAAiB9T,IAAIO,QAC5C,KAAM49E,mBAAmB/yG,YACvB,MAAM,IAAIkD,MAAM,6CAIlB,GAAqB,sBAAjB0xB,IAAIK,SAAkC,CACxC,MAAM,MAAEr1B,MAAF,OAASQ,OAAT,SAAiB4yG,UAAap+E,IAAIO,QAGxC,OAFA44E,MAAQ,IAAIkF,UAAUrzG,MAAOQ,QAErB4yG,UACN,IAAK,UAAU,aAAAE,WAAUH,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC9D,IAAK,QAAQ,aAAAkzG,YAAWJ,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC7D,IAAK,QAAQ,aAAAmzG,YAAWL,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC7D,IAAK,SAAS,aAAAozG,eAAcN,QAASnzG,MAAOQ,OAAQsoC,aAAcqlE,MAAM9tG,MAAO,MAC/E,IAAK,eAAe,aAAAqzG,kBAAiBP,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC1E,IAAK,eAAe,aAAAszG,kBAAiBR,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC1E,IAAK,eAAe,aAAAuzG,kBAAiBT,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC1E,IAAK,eAAe,aAAAwzG,kBAAiBV,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MAC1E,IAAK,QACL,IAAK,QACD,aAAAyzG,aAAYX,QAASnzG,MAAOQ,OAAQ2tG,MAAM9tG,MAAO,MACrD,IAAK,SACL,IAAK,SACD,aAAA0zG,cAAaZ,QAASnzG,MAAOQ,OAAQsoC,aAAcqlE,MAAM9tG,MAAO,MACpE,QACE,MAAM,IAAIiD,MAAO,wBAAuB8vG,eAEvC,IAAqB,gCAAjBp+E,IAAIK,SAGb,MAAM,IAAI/xB,MAAO,oBAAmB0xB,IAAIK,6CAFxC84E,MAAQ,IAAI7uF,KAAK,CAAC6zF,SAAU,CAAEl0F,KAAO,SAAQ+V,IAAIO,QAAQ90B,SAK3D,OAAO4e,KAAK20F,kBAAkB7F,OA5DP8F,CAAsB7G,cACrC8D,WAoEV,SACEz4F,OACAyV,OACA8kF,WACAz/E,sBAEA,IAAI+7E,iBAAmB,CAAEtvG,MAAOkuB,OAAOluB,MAAOQ,OAAQ0tB,OAAO1tB,QAC7D,MAAMd,IAAM+Y,OAAOy7F,WAAW,MAC9B,IAAKlB,WAIH,OAHAmB,aAAa17F,OAAQyV,OAAOluB,MAAOkuB,OAAO1tB,QAC1Cd,IAAIklC,UAAU,EAAG,EAAG,EAAG,EAAG,EAAG,GAC7BllC,IAAI00G,UAAUlmF,OAAQ,EAAG,GAClBohF,iBAGT,MAAM,QAAEp1C,QAAF,YAAWE,aAAgB44C,WACjC,IAAI,cAAE14C,cAAF,eAAiBD,gBAAmB24C,WACnB,MAAjB14C,gBACFA,cAAgBpsC,OAAOluB,OAEH,MAAlBq6D,iBACFA,eAAiBnsC,OAAO1tB,QAG1B8uG,iBAAmB,CAAEtvG,MAAOs6D,cAAe95D,OAAQ65D,gBACnD85C,aAAa17F,OAAQ6hD,cAAeD,gBACpC36D,IAAI20G,OACJ30G,IAAIX,MAAMu7D,cAAgBpsC,OAAOluB,MAAOq6D,eAAiBnsC,OAAO1tB,QAChEd,IAAI00G,UAAUlmF,OAAQ,EAAG,GACzBxuB,IAAIgxE,UACJhxE,IAAI20G,OACJ,KAUF,SACE30G,IACA40G,SACAl6C,YACA7mC,sBAEA,kBAA0B+gF,SAAU,OAAzB,QAAE/+E,SAAuB,KAClC71B,IAAI20G,OACJ,IACE,GAAI9sG,MAAMo7C,QAAQptB,QAAQ2kC,SACxB,IAAK,MAAM/1D,UAAUoxB,QAAQ2kC,QAC3Bq6C,YAAY70G,IAAKyE,OAAQi2D,kBAG3Bm6C,YAAY70G,IAAK61B,QAAS6kC,aAE5B,MAAOhsD,GACPyB,QAAQ2G,MAAM,sCAAuCpI,EAAGmnB,SAE1D71B,IAAIgxE,WA5BJ8jC,CAAa90G,IAAKw6D,QAASE,aAC3B,MAAO//C,KACPxK,QAAQ06B,KAAK,0BAA2BlwB,KAH1C,QAKE3a,IAAIgxE,UAEN,OAAO4+B,iBA1GcmF,CAAYh8F,OAAQyV,OAAQ8kF,YAE/C,OADA9kF,OAAO+3E,QACAiL,WACP,MAAO16F,OAGP,MADAu8F,YAAYt6F,QACNjC,QA5DV,sDACA,qCAYA,gCAGA,kE,kFAIA,IAAI08F,2BAAqC,EA4CzC,SAAS/rG,OAAOG,OACd,MAAM,EAAEtK,EAAF,EAAKC,EAAL,EAAQC,EAAR,EAAWsH,GAAM8C,MACvB,MAAQ,QAAOtK,MAAMC,MAAMC,MAAMsH,GAAK,KAIxC,SAASkwG,oBAAoBt6C,YAA2BjtD,OACtD,OAAIitD,YACKA,YAAYgoB,eAAej1E,OAE7BA,MA0CT,SAAS4lG,YAAYt6F,QACfA,QACFA,OAAOy7F,WAAW,MAAMlK,UAAU,EAAG,EAAGvxF,OAAOzY,MAAOyY,OAAOjY,QAoEjE,SAAS+zG,YAAY70G,IAA+ByE,OAAqBi2D,aACvE,OAAQj2D,OAAO8a,MACb,KAAK,EAAG,CAENvf,IAAIi1G,YACJ,MAAM,EAAEr2G,EAAF,EAAKC,GAAMm2G,oBAAoBt6C,YAAaj2D,OAAO/B,UACzD1C,IAAIk1G,IAAIt2G,EAAGC,EAAG4F,OAAOpF,MAAO,EAAG,EAAIjC,KAAK+3G,IACpC1wG,OAAOuf,WAAa,GACtBhkB,IAAIknG,UAAYz/F,OAAOhD,OAAO2wG,eAC9Bp1G,IAAImV,SAEJnV,IAAIq1G,UAAY5wG,OAAOuf,UACvBhkB,IAAIs1G,YAAc7tG,OAAOhD,OAAO2wG,eAChCp1G,IAAIq5F,UAEN,MAIF,KAAK,EACH,GAAI50F,OAAOrG,OAAO+jB,OAAS,GAAM,EAC/B,MAEFniB,IAAIs1G,YAAc7tG,OAAOhD,OAAO2wG,eAChCp1G,IAAIq1G,UAAY5wG,OAAOuf,UACvB,IAAK,IAAIrlB,EAAI,EAAGA,EAAI8F,OAAOrG,OAAO+jB,OAAQxjB,GAAK,EAAG,CAChD,MAAQC,EAAGuqB,GAAItqB,EAAGuqB,IAAO4rF,oBAAoBt6C,YAAaj2D,OAAOrG,OAAOO,KAChEC,EAAG0qB,GAAIzqB,EAAG0qB,IAAOyrF,oBAAoBt6C,YAAaj2D,OAAOrG,OAAOO,EAAI,IAC5EqB,IAAIi1G,YACJj1G,IAAI6vG,OAAO1mF,GAAIC,IACfppB,IAAIu1G,OAAOjsF,GAAIC,IACfvpB,IAAIq5F,SAEN,MAGF,KAAK,EACL,KAAK,EAAG,CACN,GAA6B,IAAzB50F,OAAOrG,OAAO+jB,OAChB,MAEFniB,IAAIi1G,YACJ,MAAM,EAAEr2G,EAAF,EAAKC,GAAMm2G,oBAAoBt6C,YAAaj2D,OAAOrG,OAAO,IAChE4B,IAAI6vG,OAAOjxG,EAAGC,GACd,IAAK,IAAIF,EAAI,EAAGA,EAAI8F,OAAOrG,OAAO+jB,OAAQxjB,IAAK,CAC7C,MAAM62G,sBAAwBR,oBAAoBt6C,YAAaj2D,OAAOrG,OAAOO,IAC7EqB,IAAIu1G,OAAOC,sBAAsB52G,EAAG42G,sBAAsB32G,GAExC,IAAhB4F,OAAO8a,MACTvf,IAAIy1G,YAEFhxG,OAAOuf,WAAa,GACtBhkB,IAAIknG,UAAYz/F,OAAOhD,OAAO2wG,eAC9Bp1G,IAAImV,SAEJnV,IAAIs1G,YAAc7tG,OAAOhD,OAAO2wG,eAChCp1G,IAAIq1G,UAAY5wG,OAAOuf,UACvBhkB,IAAIq5F,UAEN,MAGF,KAAK,EAAG,CAEN,GAA6B,IAAzB50F,OAAOrG,OAAO+jB,OAChB,MAGF,MAAM2N,KAAOrrB,OAAOpF,OAAS,EAC7B,GAAIoF,OAAOixG,gBAAkBjxG,OAAOixG,eAAevzF,SAAW1d,OAAOrG,OAAO+jB,OAC1E,IAAK,IAAIxjB,EAAI,EAAGA,EAAI8F,OAAOrG,OAAO+jB,OAAQxjB,IAAK,CAC7C,MAAM,EAAEC,EAAF,EAAKC,GAAMm2G,oBAAoBt6C,YAAaj2D,OAAOrG,OAAOO,IAChEqB,IAAIknG,UAAYz/F,OAAOhD,OAAOixG,eAAe/2G,IAC7CqB,IAAIi1G,YACJj1G,IAAIk1G,IAAIt2G,EAAGC,EAAGixB,KAAM,EAAG,EAAI1yB,KAAK+3G,IAChCn1G,IAAImV,WAED,CACLnV,IAAIi1G,YACJ,IAAK,IAAIt2G,EAAI,EAAGA,EAAI8F,OAAOrG,OAAO+jB,OAAQxjB,IAAK,CAC7C,MAAM,EAAEC,EAAF,EAAKC,GAAMm2G,oBAAoBt6C,YAAaj2D,OAAOrG,OAAOO,IAChEqB,IAAIk1G,IAAIt2G,EAAGC,EAAGixB,KAAM,EAAG,EAAI1yB,KAAK+3G,IAChCn1G,IAAIy1G,YAENz1G,IAAIknG,UAAYz/F,OAAOhD,OAAOkxG,YAC9B31G,IAAImV,OAEN,MAGF,KAAK,EAAG,CAEN,MAAM,EAAEvW,EAAF,EAAKC,GAAMm2G,oBAAoBt6C,YAAaj2D,OAAO/B,UAEnDZ,SAA0B,GAAf2C,OAAOpF,MAClBymD,QAAU,EAAIrhD,OAAOpF,MAG3B,GAFAW,IAAIstB,KAAUxrB,SAAF,gBACZ9B,IAAI41G,aAAe,SACfnxG,OAAOoxG,OAAQ,CACjB,MAAMC,QAAU91G,IAAIktC,YAAYzoC,OAAOd,KAAKhD,MACtCG,OAAoB,IAAXgB,SACf9B,IAAIknG,UAAYz/F,OAAOhD,OAAOkxG,YAC9B31G,IAAImnG,SAASvoG,EAAGC,EAAIiC,OAAQ1D,KAAKq0C,KAAKqkE,QAAQx1G,MAAQ,EAAIwlD,SAAU1oD,KAAKq0C,KAAK3wC,SAEhFd,IAAIknG,UAAYz/F,OAAOhD,OAAO2wG,eAC9Bp1G,IAAIuqG,SAAS9lG,OAAOd,KAAKhD,KAAM/B,EAAIknD,QAASjnD,GAC5C,MAGF,QACEsR,QAAQ06B,KAAK,iCAAkCpmC,SAIrD,SAASgwG,aAAa17F,OAA4BzY,MAAeQ,SAC3DiY,QAAWA,OAAOzY,QAAUA,OAASyY,OAAOjY,SAAWA,SACzDiY,OAAOzY,MAAQA,MACfyY,OAAOjY,OAASA,U,+DCpLpB,SAASi1G,2BACPC,GACAC,GACAC,GACAC,IAiBA,OAAQ,IAAIC,SACV,OACA,QACA,SACA,SACC,saAWSJ,yBACAC,yBACAC,yBACAC,2mB,yEAnKP,SAAmBE,IAAgB/1G,MAAeQ,OAAgBgjC,QACvE,IAAIwyE,EAAI,EACJxwF,IAAM,EAGV,MAAM8J,IAAM9uB,OAASR,MACrB,IAAK,IAAIhD,EAAI,EAAGA,GAAKsyB,IAAKtyB,GAAK,EAAG,CAChC,MAAMi5G,EAAIF,IAAIvwF,KAAO,IACfsD,GAAKitF,IAAIvwF,IAAM,GACf6kC,EAAI0rD,IAAIvwF,IAAM,GAAK,IACnByD,GAAK8sF,IAAIvwF,IAAM,GAGrBge,OAAOwyE,GAAKltF,GAAK,MAAQuhC,EACzB7mB,OAAOwyE,EAAI,GAAKltF,GAAK,OAAUmtF,EAAI,OAAU5rD,EAC7C7mB,OAAOwyE,EAAI,GAAKltF,GAAK,MAAQmtF,EAC7BzyE,OAAOwyE,EAAI,GAAK,IAGhBxyE,OAAOwyE,EAAI,GAAK/sF,GAAK,MAAQohC,EAC7B7mB,OAAOwyE,EAAI,GAAK/sF,GAAK,OAAUgtF,EAAI,OAAU5rD,EAC7C7mB,OAAOwyE,EAAI,GAAK/sF,GAAK,MAAQgtF,EAC7BzyE,OAAOwyE,EAAI,GAAK,IAEhBA,GAAK,EACLxwF,KAAO,I,mBAIJ,SAAoBzoB,IAAiBiD,MAAeQ,OAAgBgjC,QACzE,IAAI0yE,MAAQ,EACRC,OAAS,EAEb,IAAK,IAAI93G,EAAI,EAAGA,EAAI2B,MAAQQ,OAAQnC,IAAK,CACvC,MAAMrB,EAAID,IAAIm5G,SACRj5G,EAAIF,IAAIm5G,SACRh5G,EAAIH,IAAIm5G,SAEd1yE,OAAO2yE,UAAYn5G,EACnBwmC,OAAO2yE,UAAYl5G,EACnBumC,OAAO2yE,UAAYj5G,EACnBsmC,OAAO2yE,UAAY,M,mBAIhB,SAAoBC,IAAiBp2G,MAAeQ,OAAgBgjC,QACzE,IAAI0yE,MAAQ,EACRC,OAAS,EAEb,IAAK,IAAI93G,EAAI,EAAGA,EAAI2B,MAAQQ,OAAQnC,IAAK,CACvC,MAAMnB,EAAIk5G,IAAIF,SACRj5G,EAAIm5G,IAAIF,SACRl5G,EAAIo5G,IAAIF,SAEd1yE,OAAO2yE,UAAYn5G,EACnBwmC,OAAO2yE,UAAYl5G,EACnBumC,OAAO2yE,UAAYj5G,EACnBsmC,OAAO2yE,UAAY,M,sBAIhB,SACLE,KACAr2G,MACAQ,OACAsoC,aACAtF,QAEA,MAAM14B,KAAO,IAAI8S,SAASy4F,KAAK9zG,OAAQ8zG,KAAK7mB,YAE5C,IAAI2mB,OAAS,EACb,IAAK,IAAI93G,EAAI,EAAGA,EAAI2B,MAAQQ,OAAS,EAAGnC,GAAK,EAAG,CAC9C,MAAM+I,IAA0C,IAApC0D,KAAK20E,WAAWphF,GAAIyqC,cAChCtF,OAAO2yE,UAAY/uG,IACnBo8B,OAAO2yE,UAAY/uG,IACnBo8B,OAAO2yE,UAAY/uG,IACnBo8B,OAAO2yE,UAAY,M,oBAIhB,SAAqBG,MAAmBt2G,MAAeQ,OAAgBgjC,QAC5E,IAAI0yE,MAAQ,EACRC,OAAS,EAEb,IAAK,IAAI93G,EAAI,EAAGA,EAAI2B,MAAQQ,OAAQnC,IAAK,CACvC,MAAMk4G,GAAKD,MAAMJ,SACjB1yE,OAAO2yE,UAAYI,GACnB/yE,OAAO2yE,UAAYI,GACnB/yE,OAAO2yE,UAAYI,GACnB/yE,OAAO2yE,UAAY,M,qBAIhB,SACLK,OACAx2G,MACAQ,OACAsoC,aACAtF,QAEA,MAAM14B,KAAO,IAAI8S,SAAS44F,OAAOj0G,OAAQi0G,OAAOhnB,YAEhD,IAAI2mB,OAAS,EACb,IAAK,IAAI93G,EAAI,EAAGA,EAAI2B,MAAQQ,OAAS,EAAGnC,GAAK,EAAG,CAC9C,IAAI+I,IAAM0D,KAAK60E,UAAUthF,GAAIyqC,cAQ7B1hC,IAAOA,IAAM,IAAS,IAEtBo8B,OAAO2yE,UAAY/uG,IACnBo8B,OAAO2yE,UAAY/uG,IACnBo8B,OAAO2yE,UAAY/uG,IACnBo8B,OAAO2yE,UAAY,M,2GA0EhB,MAAMzC,iBAAmB+B,2BAA2B,IAAK,KAAM,KAAM,K,0CACrE,MAAM9B,iBAAmB8B,2BAA2B,IAAK,KAAM,KAAM,K,0CACrE,MAAM7B,iBAAmB6B,2BAA2B,KAAM,IAAK,IAAK,M,0CACpE,MAAM5B,iBAAmB4B,2BAA2B,KAAM,IAAK,IAAK,M,wLClM3E,8DACA,M,4WAAA,yBAEA,sD,kFAQe,MAAM9E,oBAAoBjzG,MAAMsrE,UAAiB,qB,kBAAA,e,MASvD,KACLt4D,OAAOi9B,oBAAoB,QAAS/hC,KAAK6qG,MACzCC,iBAAQD,S,IAXoD,U,IAAA,M,sGAC9D,YAAYn4G,EAAWC,EAAW+gD,UAChCo3D,iBAAQjnD,KAAKnxD,EAAGC,EAAG,oBAACoyG,YAAD,KAAcrxD,WAGnC9uC,oBACEE,OAAOs9B,iBAAiB,QAASpiC,KAAK6qG,MAQxC3kG,SACE,OAAO,oBAAC,cAAD,KAAOlG,KAAKzO,MAAMK,W,2DClC7BgvC,OAAOE,QAAU,iuC,kDCCjB,IAAIH,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,igBAAkgB,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,sFAAsF,MAAQ,GAAG,SAAW,kKAAkK,KAAO,oBAAoB,eAAiB,CAAC,+dAA+d,WAAa,MAG91CquC,QAAQD,OAAS,CAChB,SAAY,yEACZ,aAAgB,+E,sIC8DF,SACboK,YACA8/D,gBAEA,IAAK,MAAMhlG,SA7Db,SACEklC,YACA8/D,gBAEA,MAAMpJ,OAAS,GACf,IAAK,MAAMjwE,QAAQuZ,YACjB,IAAK,MAAM37B,QAAQ27B,YAAYvZ,MAAO,CACpC,MAAM3rB,MAAQglG,eAAiBA,eAAez7F,KAAKqa,UAAW,UAAA/f,KAAI0F,KAAKqa,QAAS,CAAC,UAAW,SAAU,UACtG,IAAK5jB,MACH,MAAO,GAET47F,OAAOnnE,KAAKz0B,OAGhB,OAAO47F,OAAOlmD,KAAK,CAAC7iD,EAAGtH,KAAO05G,iBAASC,QAAQryG,EAAGtH,IA+C9B45G,CAAyBjgE,YAAa8/D,gBAAiB,CACzE,MAAMI,wBAA0BC,mBAAmBrlG,MAAOklC,YAAa8/D,gBACvE,GAAII,wBACF,OAAOA,wBAGX,OAAO,M,iCAoDF,SAAkCxiF,QACvC,MAAO,CACLm8C,QAAQhf,eACN,MAAM9Y,gBAAkB,GACxB,IAAK,MAAMnlB,SAASc,OAClBqkB,gBAAgBnlB,OAAUi+B,eAAiBA,cAAc9Y,gBAAgBnlB,QAAW,GAEtF,OAAOwjF,qBAAqB1iF,OAAQ,CAAEqkB,gCAAiBi0D,qBAAsB,QAE/Eh9B,WAAU,EAAC,gBAAEj3B,gBAAF,qBAAmBi0D,sBAAsCK,aAC3D+J,qBAAqB1iF,OAAQ,CAClCqkB,gBAAiB,cAAF,GACVA,gBADU,CAEb,CAACs0D,WAAWz5E,OAAQmlB,gBAAgBs0D,WAAWz5E,OAC3CmlB,gBAAgBs0D,WAAWz5E,OAAOtW,OAAO+vF,YACzC,CAACA,cAEPL,8CA/IR,mCACA,gC,glBAoCA,SAASmK,mBACPrlG,MACAklC,YACA8/D,gBAEA,MAAMI,wBAA0B,GAChC,IAAK,MAAMz5E,QAAQuZ,YAAa,CAC9B,IAAIqgE,OAAQ,EACZ,IAAK,MAAMh8F,QAAQ27B,YAAYvZ,MAAO,CACpC,MAAM65E,UAAYR,eACdA,eAAez7F,KAAKqa,UACpB,UAAA/f,KAAI0F,KAAKqa,QAAS,CAAC,UAAW,SAAU,UAC5C,GAAI4hF,WAAaP,iBAASQ,QAAQzlG,MAAOwlG,WAAY,CACnDD,OAAQ,EACRH,wBAAwBz5E,MAAQ,CAACpiB,MACjC,OAGJ,IAAKg8F,MACH,OAAO,KAGX,OAAOH,wBAkBT,SAASM,wBACP1lG,MACA4iB,OACA+/E,UAEA,MAAMzH,qBAAuB,GAC7B,IAAK,MAAMp5E,SAASc,OAAQ,CAC1B,MAAM+iF,gBAAkBhD,SAAS7gF,OAAOsf,KAAK,EAAGxd,oBAC9C,MAAM4hF,WAAY,UAAA3hG,KAAI+f,QAAS,CAAC,SAAU,UAC1C,OAAO4hF,WAAaP,iBAASQ,QAAQzlG,MAAOwlG,aAE9C,IAAKG,gBACH,OAAO,KAETzK,qBAAqBp5E,OAAS6jF,gBAEhC,OAAOzK,qBAQT,SAASoK,qBACP1iF,QACA,gBAAEqkB,gBAAF,qBAAmBi0D,uBAEnB,IAAI0K,mBAAqB3+D,gBACrB4+D,wBAA0B3K,qBAE9B,IAAK,MAAMl7F,SArFb,SAAqCinC,iBACnC,MAAM20D,OAAS,GACf,IAAK,MAAM95E,SAASmlB,gBAClB,kBAA0BA,gBAAgBnlB,OAAQ,OAAvC,QAAE8B,SAAqC,KAC1C5jB,OAAQ,UAAA6D,KAAI+f,QAAS,CAAC,SAAU,UAClC5jB,OACF47F,OAAOnnE,KAAKz0B,OAIlB,OAAO47F,OAAOlmD,KAAK,CAAC7iD,EAAGtH,KAAO05G,iBAASC,QAAQryG,EAAGtH,IA2E9Bu6G,CAA4B7+D,iBAAkB,CAChE,MAAM8+D,WAAaL,wBAAwB1lG,MAAO4iB,OAAQqkB,iBAC1D,GAAI8+D,WAAY,CAEdF,wBAA0BE,WAC1BH,oBAAqB,UAAA77F,WAAU67F,mBAAqBI,aAClDA,YAAY9sF,OAAO,EAAG0K,oBACpB,MAAM4hF,WAAY,UAAA3hG,KAAI+f,QAAS,CAAC,SAAU,UAC1C,OAAQqhF,iBAASgB,WAAWT,UAAWxlG,UAG3C,OAGJ,MAAO,CAAEinC,gBAAiB2+D,mBAAoB1K,qBAAsB2K,2B,6IC1HtE,mCACA,sDACA,+BACA,iEAEA,yDACA,2DACA,uDACA,8BACA,4EACA,yCACA,yDACA,+DACA,8DACA,4DACA,2DAEA,+B,sdAEA,MAAM,YAAEhyG,aAAgB9H,MAIlBm6G,UAAY91E,0BAAO2e,GAAI;;;;;;;;;;;;;;;;;;EAoB7B,SAASo3D,sBAAqB,UAAEC,YAC9B,IAAKA,UACH,MAAO,YAET,OAAQA,UAAU94F,MAChB,IAAK,QACH,MAAQ,UAAS84F,UAAU5vF,QAC7B,IAAK,OACH,MAAQ,SAAQ4vF,UAAU5vF,QAC5B,IAAK,QACH,OAAO4vF,UAAU5vF,KAKrB,OAHC4vF,UAAU94F,KAGH,aAAY84F,UAAU94F,QAAQ84F,UAAU5vF,QAGlD,SAAS6vF,mBAAkB,WAAEC,aAC3B,IAAKA,WACH,MAAO,YAET,OAAQA,WAAWh5F,MACjB,IAAK,QACH,MAAQ,UAASg5F,WAAW9vF,QAGhC,OADC8vF,WAAWh5F,KACJ,aAAYg5F,WAAWh5F,QAAQg5F,WAAW9vF,QAIpD,SAASkI,YACP,MAAM,OAAEkE,QAAW6D,SAASC,oBACtB+sD,eAAgB,mBAAAh8B,oBACpB5jD,YAAY,EAAG4/E,cAAe8yB,yBAA4BA,sBAAuB,KAE7EC,YAAa,mBAAA/uD,oBAAmB5jD,YAAY,EAAG2yG,WAAYC,sBAAyBA,mBAAoB,MAEvGC,qBAAsBC,oBAAsB56G,MAAMk6B,QACvD,KACE,MAAM2gF,SAAU,UAAAC,SAAQpzB,cAAe0yB,sBACvC,MAAO,CAACS,QAAShvG,OAAOwtC,KAAKwhE,WAE/B,CAACnzB,gBAGGqzB,sBAAwB/6G,MAAMk6B,QAClC,KACE,GAA6B,IAAzBwtD,cAAcvjE,OAChB,MAAO,SAET,MAAM62F,cAAe,UAAArmE,OAAM9d,OAASd,OAAUA,MAAMtL,MAEpD,OAAO5e,OAAOwtC,KAAKshE,sBAChBhxD,OACAvyC,IAAKnJ,KAEF,oBAACjO,MAAM+qD,SAAP,CAAgB98C,IAAKA,KACnB,2BAAKqG,MAAO,CAAEsyD,UAAW,KAAO34D,IAAhC,KACA,+BACG,UAAAm6D,QAAOuyC,qBAAqB1sG,KAAOgtG,KAAQA,IAAIllF,OAAO3e,IAAI,CAAC6jG,IAAKt6G,IAC/D,0BAAIsN,IAAKtN,GACP,8BACGs6G,IAAIllF,MACJilF,aAAaC,IAAIllF,QAChBilF,aAAaC,IAAIllF,OAAOmlF,eACvB,qBAAoBF,aAAaC,IAAIllF,OAAOmlF,wBASjE,CAACP,qBAAsBjzB,cAAe7wD,SAGlCskF,mBAAqBn7G,MAAMk6B,QAC/B,KACE,GAA0B,IAAtBugF,WAAWt2F,OACb,MAAO,SAET,MAAMi3F,mBAAoB,UAAAN,SAAQL,WAAYH,mBAC9C,OAAOzuG,OAAOwtC,KAAK+hE,mBAChBzxD,OACAvyC,IAAKnJ,KAEF,oBAACjO,MAAM+qD,SAAP,CAAgB98C,IAAKA,KACnB,2BAAKqG,MAAO,CAAEsyD,UAAW,KAAO34D,IAAhC,KACA,+BACG,UAAAm6D,QAAOgzC,kBAAkBntG,KAAOgtG,KAAQA,IAAIllF,OAAO3e,IAAI,CAAC6jG,IAAKt6G,IAC5D,0BAAIsN,IAAKtN,GACP,8BAAKs6G,IAAIllF,aAQzB,CAAC0kF,cAGIY,YAAaC,gBAAkBt7G,MAAMyB,SA9H3B,eA+HV85G,gBAAiBC,oBAAsBx7G,MAAMyB,WAC9Cg6G,aAAez7G,MAAMq6C,SAgB3B,MAAMqhE,gBAAkB17G,MAAMk6B,QAC5B,MACOqhF,iBAIH,oBAAC,kCAAD,CAA0BrlF,MAAOqlF,gBAAiB5gE,YAAa,GAC5D,EAAGxB,4BACF,MAAM+tC,OAAQ,UAAAlpE,WAAUm7B,YAAcxrB,OAAUA,MAAMvW,IAAI,EAAGygB,mBAAcA,UAS3E,OARA4jF,aAAa1sF,QAAU,CACrB8H,QAAQ,sBAAUhrB,OAAOwtC,KAAKF,aAAepjB,OAC3CojB,YAAYpjB,QAAUojB,YAAYpjB,OAAO5R,OACrC,CAAEsG,KAAMsL,MAAO4B,SAAUwhB,YAAYpjB,OAAO,GAAG8B,QAAQF,UACvD,MAENuvD,aAEK,OAKf,CAACq0B,kBAGH,OACE,oBAACpB,UAAD,KACE,oBAAC,sBAAD,CAAc/9D,UAAQ,IACtB,2CACA,oBAAC,qBAAD,+KAIA,oBAAC,cAAD,CAAM3S,KAAG,EAACzmC,MAAI,EAACsR,MAAO,CAAEwzC,QAAS,eAC/B,oBAAC,gBAAD,CAAQ6zD,WAAS,EAAC55E,OAAK,EAACZ,QAhD9B,WACE,GAAIo6E,gBAGF,OAFAE,aAAa1sF,aAAU3V,OACvBoiG,wBAAmBpiG,GAGrB,MAAMwiG,WAxIS,eAwIIP,YAA6B3zB,cAAgBizB,qBAAqBU,aACrFG,mBAAmBI,WAAWxkG,IAAK6jG,KAAQA,IAAIllF,SAyCK6gB,YAAU,2BACvD2kE,gBAAmB,aAAYA,gBAAgBp3F,iBAAmB,mBAErE,oBAAC,kBAAD,CACEke,WAAYk5E,gBACZ51G,KAAO,iBAvLE,eAuLa01G,YAA6B,aAAeA,aAClE1zG,MAAO0zG,YACP7qE,SAAW7oC,OAAU2zG,eAAe3zG,QACpC,oBAAC,MAAAsoF,KAAD,CAAMtoF,MA1LG,cA0LT,cACCizG,mBAAmBxjG,IAAKm+C,OACvB,oBAAC,MAAA06B,KAAD,CAAMhiF,IAAKsnD,MAAO5tD,MAAO4tD,OACtBA,SAINgmD,iBACC,oBAAC,gBAAD,CAAQx5E,OAAK,EAACZ,QAtDtB,YACE,QAAA06E,kBAAiBh7F,KAAKsjC,UAAUs3D,aAAa1sF,UAAY,KAAM,iBAqDpB6nB,YAAU,6BAA/C,iBAID8kE,iBAEH,oBAAC,cAAD,CAAMjyE,KAAG,GACP,+BAASmN,YAAU,2BACjB,+CACCmkE,uBAEH,+BAASnkE,YAAU,wBACjB,4CACCukE,sBAMXxoF,UAAU2J,UAAY,YACtB3J,UAAUsC,cAAgB,G,cAEX,QAAA6iB,MAAI,kBAAUnlB,Y,sMC9O7B,iEACA,wEACA,+EACA,kEACA,wDACA,+BACA,M,4WAAA,yBACA,2EACA,+BACA,oCACA,iEACA,sDAGA,gCACA,yDACA,uDACA,sDACA,uDACA,yDACA,+DACA,sEACA,8DACA,6DACA,kEACA,2DACA,uCAGA,yCACA,8C,kqBAEA,MAAMilB,OAAS53C,MAAM87G,KAAK,IACxB,yIAGIC,aAAgB,oHAKGh1B,0PAuBnBi1B,WAAa33E,0BAAO2e,GAAI;aACjB,EAAGi5D,mBAAqCA,QAAU,OAAS;;;;;;;;sBAQlDjyG,6BAAO0mF;EAIhBwrB,uBAAyB,EAAGhjF,cAAQE,yBAC/C,oBAAC,cAAD,CACEs8B,KAAMx8B,OAAOijF,QAAU,oBAAC,wBAAD,MAAyB,oBAAC,8BAAD,MAChDh7E,QAAS,IAAM/H,WAAW,CAAE+iF,SAAUjjF,OAAOijF,WAC7C,6C,sDAIJ,MAAMC,mBAAqB/3E,0BAAO2e,GAAI;;;sBAGhBh5C,6BAAOqyG;;;;;;EAQvBC,YAAcj4E,0BAAOk4E,MAAO;;;;;;;;sBAQZvyG,6BAAOwrD;EAGvBgnD,YAAc,EAAGr7E,mBACrB,oBAACi7E,mBAAD,KACE,gJAGA,oBAACE,YAAD,CAAa1lE,YAAU,qBAAqBzV,QAASA,SAArD,QAEE,oBAAC,cAAD,CAAMY,OAAK,GACT,oBAAC,qCAAD,SAMF06E,eAAiBp4E,0BAAO2e,GAAI;;;;;;;;;;;EAe5B05D,cAAgB,EACpBC,sBACAC,iCAME,oBAACH,eAAD,KACE,oBAAC,wBAAD,MACA,oBAAC,qBAAD,8DACyD,IACvD,yBACEnY,KAAK,GACLnjE,QAAUzwB,IACRA,EAAEmwB,iBACF+7E,eAAe,UAJnB,QAFF,gCAYA,oBAAC,gBAAD,CAAQtoG,MAAO,CAAEsyD,UAAW,OAASzlC,QAASw7E,YAC5C,oBAAC,cAAD,CAAM5rD,QAAM,GACV,oBAAC,cAAD,OACM,IAHV,aAUN,SAASn+B,eAAenzB,OACtB,MAAM,OAAEy5B,OAAF,WAAUE,YAAe35B,OACzB,eAAEo9G,eAAF,mBAAkBC,mBAAlB,QAAsCX,SAAYjjF,QAEjD6jF,SAAUH,gBAAkB58G,MAAMyB,SAAmB,MAEtDu7G,WAAY,cAAArjF,aAAaztB,OAAUA,MAAM0tB,OAAOojF,WAChDC,qBAAsB,cAAAtjF,aAAaztB,OAAUA,MAAM8wG,UAAUC,qBAC7Dx2B,QAAS,cAAA9sD,aAAaztB,OAAUA,MAAM8wG,UAAUv2B,QAChDy2B,gBAAiB,cAAAvjF,aAAaztB,QAClC,MAAM2zF,MAAgCh0F,OAAO06B,OAAOr6B,MAAM8wG,UAAUC,qBACpE,OAAO,UAAA9nE,MAAK0qD,MAAO,EAAGsd,mBAAiC,kBAAZA,UAA0BA,WAGjEviF,UAAW,cAAAC,eACXuiF,aAAep9G,MAAM8H,YAAau1G,SAAuBziF,UAAS,UAAAwiF,cAAmBC,UAAW,CAACziF,WAEjG0iF,wBACJT,gBAAkBI,oBAAoBJ,gBAAkBI,oBAAoBJ,gBAAgB5qC,YAAc,GACtGsrC,aAAeV,eAAiBG,UAAUH,qBAAkBzjG,GAC3DokG,gBAAiBC,oBAAsBz9G,MAAMyB,SAAmB,IAEjEi8G,cAAgBF,gBAAgBr5F,OAAS,EAAIq5F,gBAAgBA,gBAAgBr5F,OAAS,GAAK,KAC3Fw5F,8BAAgCJ,gBAAkBG,eAAiBA,cAAcv3B,WAAao3B,aAAa9yF,KAC3GmzF,aAAeD,8BAA+BD,yBAAA,EAAAA,cAAelsG,SAAS+rG,wBAAxB,EAAwBA,aAAcn3B,YACpFy3B,iBACJhB,gBAAkBI,oBAAoBJ,gBAAkBI,oBAAoBJ,gBAAgBiB,KAAO,GAE/FC,WAAaL,cACfA,cAAcv3B,UAAYu3B,cAAcjb,SAAW,cAAgB,IACnE,YACE3wD,WAAa,CACjB08B,aAAc,EACd34B,OAAQ,EACRzwC,gBAAiB4E,6BAAOg0G,MACxBl2D,QAAS,WACTxlD,MAAUy7G,WAAW55F,OAAS,EAAtB,MAGVnkB,MAAMwjD,gBACJ,KACE,GAAI+5D,aAAc,CAChB,MAAMU,UAAYx+G,MAAMy5B,OAAOglF,0BAA4B,GAC3DT,mBAAmB,CACjB,CAAEt3B,SAAUo3B,aAAa9yF,KAAMjZ,KAAM+rG,aAAan3B,WAAYqc,UAAU,MACrEwb,cAIT,CAACx+G,MAAMy5B,OAAOglF,yBAA0BX,eAI1Cv9G,MAAMwjD,gBACJ,KACM05D,gBACFN,eAAe,UAGnB,CAACM,iBAGH,MAAMP,WAAa38G,MAAM8H,YACvB,CAACuP,EAAG7F,QACF,MAAM2sG,UAAY9qC,cAAKC,KACjB8S,WAAa50E,MAAQuqG,cAE3B,gBAAAqC,eAAc,CAAE7mG,GAAI4mG,UAAW/3B,wBAAchoD,KAAK,KAChDg/E,aAAa,CACX,CAACe,WAAY,CACX/3B,sBACA37D,KAAO,GAAEs8D,8CAA6Bo3B,UAAUhgF,MAAM,KAAK,QAG/D/E,WAAW,CAAEyjF,eAAgBsB,eAGjC,CAAC/kF,WAAYgkF,eAGTiB,kBAAoBr+G,MAAM8H,YAC9B,KACO+0G,gBAAmBU,eAGxB,gBAAAa,eAAc,CAAE7mG,GAAIslG,eAAgBz2B,WAAYm3B,aAAan3B,aAAchoD,KAAK,KAE9Eg/E,aAAa,OAGjB,CAACG,aAAcV,eAAgBO,eAG3BkB,SAAWt+G,MAAM8H,YACpBy2G,SACM1B,gBAAmB0B,SAGxB,gBAAAH,eAAc,CAAE7mG,GAAIslG,eAAgBz2B,WAAYm4B,SAAUngF,KAAK,KAC7Dg/E,aAAa,CAAE,CAACP,gBAAD,iBAAuBU,aAAvB,CAAqCn3B,WAAYm4B,cAGpE,CAAChB,aAAcV,eAAgBO,eAG3BoB,kBAAoBx+G,MAAM8H,YAC9B,CAACy2G,OAAgBE,YACXA,UAAYjB,gBAAgBr5F,QAAUs6F,SACxChB,mBAAmB,IAAID,gBAAgB3/E,MAAM,EAAG4gF,SAAW,GAAIF,SAE/Dd,mBAAmB,IAAID,gBAAiBe,UAG5C,CAACf,kBAGGkB,OAAS1+G,MAAM8H,YACnB,KACE21G,mBAAmBD,gBAAgB3/E,MAAM,EAAG2/E,gBAAgBr5F,OAAS,KAEvE,CAACq5F,kBAGGmB,cAAgB3+G,MAAM8H,YACzB0J,OAEC,MAAMotG,UAAY,IAAIpB,iBACtB,GAAIoB,UAAUz6F,OAAS,EAAG,CACxB,MAAMo6F,OAASK,UAAU9iD,MACpByiD,OAAO9b,UACVgb,mBAAmB,IAAImB,UAAJ,iBAAoBL,OAApB,CAA4B/sG,gBAIrD,CAACgsG,kBAGH,OACE,oBAAC,kCAAD,KACG,EAAG16G,cAAQR,eACV,oBAAC,cAAD,CAAMm/B,KAAG,EAACntB,MAAO,CAAExR,cAAQ4B,SAAU,aACnC,oBAAC,sBAAD,CAAc03C,UAAQ,EAACC,YAAa,oBAAC6/D,uBAA2Bz8G,SAChE,oBAAC,cAAD,CAAM6U,MAAO,CAAExR,cAAQR,cACrB,oBAAC,iBAAD,CACEy6G,SAAUA,SACVH,eAAgBA,eAChBiC,WAAaC,SACPjC,gBAAkBa,eAAiBC,6BAErCP,aAAa,CACX,CAACP,gBAAD,iBAAuBU,aAAvB,CAAqCn3B,WAAYs3B,cAAclsG,SAGnE4nB,WAAW,CAAEyjF,eAAgBiC,UAE/BC,WAAaD,SACX1B,aAAa,cAAD,GAAMJ,UAAN,CAAiB,CAAC8B,aAAS1lG,KACvCggB,WAAW,CAAEyjF,oBAAgBzjG,KAE/ByjG,eAAgBA,eAChBG,UAAWA,UACXE,eAAgBA,eAChBD,oBAAqBA,oBACrBsB,OAAQb,cACRc,kBAAmBA,kBACnB7B,WAAYA,aAEd,oBAAC,cAAD,CAAMl7E,KAAG,GACP,oBAAC,cAAD,CACEvqB,OAAK,EACL5C,MAAO,CACL0qG,SAAU,EACV55G,gBAAiB4E,6BAAOi1G,MACxBnpE,WAAY,WAEb0nE,gBAAgBr5F,OAAS,GACxB,oBAAC,cAAD,CAAM+6F,OAAK,EAACh7E,QAAQ,UAAUxC,SAAS,UAAUptB,MAAO,CAAE1K,MAAOI,6BAAO0mF,OAASvvD,QAASu9E,QACxF,oBAAC,mBAAD,OAGH7B,gBACC,2BAAKvoG,MAAO,CAAE5P,SAAU,aACtB,6BACE6c,KAAK,OACLiwB,YAAY,YACZ7pC,MAAOo2G,WACP17E,UAAWq7E,eAAiBA,cAAcjb,SAC1CnuF,MAAOw9B,WACPkB,YAAY,EACZxC,SAAW9/B,IACT,MAAMyuG,YAAczuG,EAAEjD,OAAO9F,MAC7By1G,aAAa,cAAD,GACPJ,UADO,CAEV,CAACH,gBAAD,iBAAuBU,aAAvB,CAAqC9yF,KAAM00F,oBAIjD,oBAACnD,WAAD,CAAYC,QAAS2B,eAGzB,oBAAC,cAAD,CACEsB,OAAK,EACLh7E,QAAQ,WACRxC,SAAS,WACTptB,MAAO,CAAE1K,MAAOI,6BAAO0mF,MAAO5oC,QAAS,SACvC3mB,QAASw7E,YACT,oBAAC,cAAD,QAIHM,oBAAoBJ,iBACoC,kBAAhDI,oBAAoBJ,gBAAgBM,UAC1CF,oBAAoBJ,gBAAgBM,SAAW,oBAACX,YAAD,CAAar7E,QAASk9E,oBACxE,oBAAC,cAAD,CAAM58E,KAAG,EAACntB,MAAO,CAAE0qG,SAAU,EAAGt6G,SAAU,cACtCm4G,gBAAkB,oBAACH,cAAD,CAAeC,WAAYA,WAAYC,eAAgBA,iBAC3E,2BACE3uG,IAAM,GAAEnL,UAAUR,QAClB88G,sBAAoB,OACpB9qG,MAAO,CACLxR,OAAQ,OACRR,MAAO,OACPk/C,QAASq7D,eACL,UACA,SAEN,oBAAC78G,MAAMq/G,SAAP,CACEC,SACE,oBAAC,cAAD,CAAMpjE,QAAM,EAAC5nC,MAAO,CAAEhS,MAAO,OAAQQ,OAAQ,SAC3C,oBAAC,cAAD,CAAMo8G,OAAK,GACT,oBAAC,6BAAD,SAILpC,oBACC,oBAACllE,OAAD,CACE2mE,OAAQb,cACRiB,cAAeA,cACfH,kBAAmBA,kBACnBrC,QAASA,QACT11B,OAAQA,OACR84B,UAAY,GAAEj9G,SAASQ,UAAUi6G,UAAY,UAAUF,gBAAkB,SACzElG,KAAM2H,aAKd,oBAAC,mBAAD,CACEQ,OAAQjC,eACRZ,QAAS2B,YACTjH,KAAM,IAAM2H,SAASZ,yBAAD,EAACA,cAAelsG,MACpCygE,YAAaqrC,wBACbQ,KAAMD,wBAWxBjrF,eAAe0J,UAAY,iBAC3B1J,eAAeqC,cAAgB,CAAE4nF,oBAAgBzjG,EAAW+iG,SAAS,G,cAEtD,QAAArkE,MAAI,kBAAcllB,iB,uKCjbjC,W,4WAAA,yBACA,oCACA,iEAEA,oCACA,yDACA,uDACA,sEACA,+DAEA,8C,kFAEA,MAAM4sF,YAAcn7E,0BAAO2e,GAAI;;;;EAoBzBy8D,WAAa,EAAGnjC,cAAQojC,kBAAU/5G,aACtC,6BAAC65G,YAAD,CACElrG,MAAO,CACL1K,MAAO81G,SAAW11G,6BAAOm+C,IAAM,UAC/B2rD,aAAcx3B,OAAU,aAAYtyE,6BAAOmvD,MAAU,OACrDwmD,cAAerjC,OAAS,EAAI,IAE7B32E,KANH,IAMU+5G,UAAY,I,aAMN,EAAGZ,cAAQ7C,gBAAStF,UAAM1kC,wBAAa6rC,cACvD,MAAO8B,iBAAyCC,sBAAuB,SAAAp+G,UAAS,WACzEq+G,WAAYC,gBAAiB,SAAAt+G,WAAS,GAEvCm5B,UAAW,cAAAC,eACXmlF,UAAYhgH,eAAM8H,YAAau1G,SAAoBziF,UAAS,aAAAqlF,mBAAkB5C,UAAW,CAACziF,WAC1FslF,iBAAkB,SAAA7lE,QAAO,MAa/B,OAXA,SAAAxyC,WACE,KACMi4G,YACEI,gBAAgBnxF,UAClBmxF,gBAAgBnxF,QAAQ6hB,UAAYsvE,gBAAgBnxF,QAAQkiB,eAIlE,CAAC6uE,WAAYhC,OAIb,6BAAC,cAAD,CAAMr8E,KAAG,EAACntB,MAAO,CAAElP,gBAAiB4E,6BAAOi1G,MAAOv6G,SAAU,WAAY4Z,OAAQ,EAAGC,MAAO,EAAG3V,KAAM,IACjG,6BAAC,cAAD,CACE6gC,KAAG,EACHvyB,OAAK,EACL5C,MAAO,CACLwzC,QAAS,EACTxpC,OAAQ,IAEV,6BAAC,cAAD,CACE49B,QAAM,EACN5nC,MAAO,CAAE0qG,SAAU,EAAGp1G,MAAOI,6BAAO0mF,OACpChvD,SAAS,YACTP,QAAS,KAEL0+E,oBADuB,gBAArBD,iBACkB,cAEA,YAGxB,6BAACH,WAAD,CAAY95G,KAAK,WAAW+5G,SAAUztC,YAAY9tD,OAAQm4D,OAA6B,gBAArBsjC,oBAEpE,6BAAC,cAAD,CACE1jE,QAAM,EACN5nC,MAAO,CAAE0qG,SAAU,EAAGp1G,MAAOI,6BAAO0mF,OACpChvD,SAAS,UACTP,QAAS,KAEL0+E,oBADuB,SAArBD,iBACkB,OAEA,YAGxB,6BAACH,WAAD,CAAY95G,KAAK,OAAO+5G,SAAU5B,KAAK35F,OAAQm4D,OAA6B,SAArBsjC,oBAEzD,6BAAC,gBAAD,CACEtrG,MAAO,CAAEwzC,QAAS,WAClBo7C,SAAU+Y,QACV55E,SAAU45E,QACV/3E,QAAS,eACT/C,QAAS,KACH29E,SACFnI,OACAqJ,UAAUlB,WAGb7C,QAAU,QAAU,SAGzB,oCACEznG,IAAK0rG,gBACLpsE,SAAU,EAAGrmC,kBACX,MAAM0yG,WAAa1yG,OAAOwjC,aAAexjC,OAAOmjC,UAAYnjC,OAAOyjC,aAC/DivE,YAAcL,WAChBC,eAAc,GACJI,YAAeL,YACzBC,eAAc,IAGlBzrG,MAAO,CACL8rG,UAAgC,WAArBR,iBAAgC,SAAW,OACtD98G,OAA6B,WAArB88G,iBAAgC,IAAM,EAC9Ch2G,MAAOI,6BAAO0mF,QAEM,gBAArBkvB,kBAAsC,6BAAC,4BAAD,CAAoB3tC,YAAaA,cAClD,SAArB2tC,kBAA+B,6BAAC,qBAAD,CAAad,OAAQA,OAAQhB,KAAMA,KAAMkC,UAAWA,e,uKCjI5F,mEACA,wDACA,6DACA,+DACA,+BACA,sDAEA,sDAEA,gCACA,8C,kFAEA,MAAMK,eAAiB,CACrBC,KAAMt2G,6BAAOu2G,SACbC,KAAMx2G,6BAAOy2G,OACbC,QAAS12G,6BAAO22G,SAChB/6G,MAAOoE,6BAAOqyG,OAGVuE,cAAgB,CACpBN,KAAM,6BAAC,oBAAD,MACNE,KAAM,6BAAC,qBAAD,MACNE,QAAS,6BAAC,eAAD,MACT96G,MAAO,6BAAC,qBAAD,O,aAOkB,EAAGqsE,2BACrBA,YAAY9tD,OACjB,uCACG8tD,YAAY76D,IAAI,EAAGypG,kBAAUhpF,gBAASipF,cAAQC,wBAAc,KAAMC,gCAAkB,MAAQrgH,KAC3F,MAAMsgH,eAAgB,UAAAC,QAAOC,2BAAoBN,UAC3CO,SACe,MAAnBJ,iBAA0C,MAAfD,YAAuB,IAAGC,gBAAkB,KAAKD,YAAc,KAAO,KACnG,OACE,mCAAI9yG,IAAM,GAAE4pB,WAAWl3B,KACrB,6BAAC,cAAD,CAAMujC,QAAQ,WAAWnC,OAAK,EAACztB,MAAO,CAAE1K,MAAOy2G,eAAeY,gBAAkBz/B,QAAM,GACnFo/B,cAAcK,gBAEjB,qCAAM3sG,MAAO,CAAEwzC,QAAS,QAAUjwB,SAClC,qCAAMvjB,MAAO,CAAE1K,MAAOI,6BAAOu4E,OAC1Bu+B,OADH,IACYM,cAOpB,iE,uKCnDJ,0DACA,iEACA,iEAGA,yCACA,8C,kFAEA,MAAMtlC,UAAYz3C,0BAAOilB,EAAG;;;;;;;wBAOJt/C,6BAAOglE;;EAUzBqyC,cAAgB,CACpB7qB,OAAQn9B,+BAAcC,OACtBgoD,OAAQjoD,+BAAckoD,OACtBC,QAASnoD,+BAAckoD,OACvB9pG,OAAQ4hD,+BAAcooD,OACtBroG,UAAWigD,+BAAcooD,Q,aAGP,EAAG3C,cAAQhB,UAAMkC,uBACf,IAAhBlC,KAAK35F,OAEL,0DACE,6DACA,gDACS,2DADT,wDAOJ,0DACE,uCACEyyB,YAAU,gBACVtiC,MAAO,CAAEwzC,QAAS,UAAWpjD,SAAU,WAAY6Z,MAAO,EAAG1P,IAAK,GAClEsyB,QAAS,KACH29E,QACFkB,UAAUlB,UALhB,cAUA,uCACGhB,KAAK1mG,IAAI,EAAG0pG,cAAQn5G,aAASib,OAC5B,MAAM8+F,cAAyB,MAAT/5G,OAAkC,iBAAVA,MAC9C,OACE,6BAACm0E,UAAD,CAAW7tE,IAAM,GAAE2U,MAAMk+F,SAAUxsG,MAAO,CAAEwzC,QAAS45D,cAAgB,UAAY,gBAC9EA,cACC,6BAAC,uBAAD,CAAMjhC,UAAQ,EAAC99E,KAAMgF,MAAO+4E,aAAa,EAAOI,MAAOznB,iCAEvD,qCAAM/kD,MAAO,CAAE1K,MAAOy3G,qBAAqB15G,QAAUqC,6BAAO23G,QAChD,MAATh6G,QAA2B,IAAVA,MAAkB4lD,OAAO5lD,OAASA,OAGxD,oCAAK2M,MAAO,CAAE1K,MAAOI,6BAAO0mF,MAAOvP,eAAgB,cAAgB2/B,a,qGC3EjF,8MAAIc,SAAW/1G,OAAOkzD,QAAU,SAAUtxD,QAAU,IAAK,IAAI9M,EAAI,EAAGA,EAAI4Z,UAAU4J,OAAQxjB,IAAK,CAAE,IAAImgH,OAASvmG,UAAU5Z,GAAI,IAAK,IAAIsN,OAAO6yG,OAAcj1G,OAAOg2G,UAAUC,eAAeC,KAAKjB,OAAQ7yG,OAAQR,OAAOQ,KAAO6yG,OAAO7yG,MAAY,OAAOR,QAKvO,mCACd,IAAI,OACF6zB,OAAS,IACPo1C,KACAj3E,MAPN,SAAkCu/C,IAAK3F,MAAQ,IAAI5rC,OAAS,GAAI,IAAK,IAAI9M,KAAKq+C,IAAW3F,KAAKL,QAAQr4C,IAAM,GAAkBkL,OAAOg2G,UAAUC,eAAeC,KAAK/iE,IAAKr+C,KAAc8M,OAAO9M,GAAKq+C,IAAIr+C,IAAM,OAAO8M,OAOrMu0G,CAAyBtrC,KAAM,CAAC,WAE5C,OAAO,6CAAMlpB,cACX,MACAo0D,SAAS,CAAEt/G,MAAO,MAAOQ,OAAQ,MAAOm/G,QAAS,cAAe9qG,KAAM,OAAQ+qG,MAAO,8BAAgCziH,OACrH,6CAAM+tD,cAAc,OAAQ,CAAE93C,EAAG,gDAAiD2lF,OAAQ,UAAW8mB,cAAe,QAASC,eAAgB,UAC7I,6CAAM50D,cAAc,OAAQ,CAAE93C,EAAG,gBAAiB2lF,OAAQ,UAAW8mB,cAAe,UACpF,6CAAM30D,cAAc,OAAQ,CAAE93C,EAAG,sFAAuF2lF,OAAQ,YAChI,6CAAM7tC,cAAc,OAAQ,CAAE93C,EAAG,+CAAgD2lF,OAAQ,UAAW8mB,cAAe,QAASC,eAAgB,UAC5I,6CAAM50D,cAAc,OAAQ,CAAE93C,EAAG,gBAAiB2lF,OAAQ,UAAW8mB,cAAe,UACpF,6CAAM30D,cAAc,OAAQ,CAAE93C,EAAG,yJAA0J2lF,OAAQ,YACnM,6CAAM7tC,cAAc,SAAU,CAAEu3B,GAAI,KAAMC,GAAI,KAAM1lF,EAAG,MAAO+7F,OAAQ,YACtE,6CAAM7tC,cAAc,SAAU,CAAEu3B,GAAI,KAAMC,GAAI,KAAM1lF,EAAG,MAAO+7F,OAAQ,YACtE,6CAAM7tC,cAAc,OAAQ,CAAE93C,EAAG,8ZAA+Z2lF,OAAQ,e,6ICd5c,qEACA,0DACA,gEACA,6DACA,sDACA,iEAEA,uDACA,sDACA,8DAEA,oEACA,gEACA,6DAEA,yCACA,6DACA,0DAGA,8C,kFAEA,MAAMgnB,YAAch+E,0BAAO2e,GAAI;;;;;sBAKTh5C,6BAAOi1G;;;;EAMvBqD,gBAAkBj+E,0BAAO2e,GAAI;aACtB,EAAG+O,aAA+BA,KAAO,UAAY;sBAC5C/nD,6BAAOu4G;;;;EAMvBC,SAAWn+E,0BAAOilB,EAAG;;;;;;;;WAQhB,EAAG6zD,mBAAgBA,QAAyB,UAAfnzG,6BAAOqyG;sBACzB,EAAG5pE,qBAAuCA,SAAWzoC,6BAAO0mF,MAAQ;;;;;wBAKlE1mF,6BAAO0mF;;;;;EAOzB+xB,aAAep+E,0BAAOilB,EAAG;;;;;;;;;;;;;;wBAcPt/C,6BAAO0mF;;EAIzBgyB,MAAQr+E,0BAAO2e,GAAI;;;;;;;;EAqBnB2/D,UAAY,EAChB9iB,YACAgf,sBACAE,sBACA6D,kBACA/F,8BACAI,2CAGE,6BAAC,cAAD,CAAMx7E,KAAG,GACP,6BAACohF,aAAD,CAAcjvF,MAAO,QAASgvF,SAAUA,WACvC/2G,OAAOwtC,KAAKwmD,OAAOzoF,IAAK0nG,SACvB,MAAM3B,SAAUF,oBAAoB6B,SAAU7B,oBAAoB6B,QAAQ3B,QAC1E,OACE,6BAACqF,SAAD,CACEv0G,IAAK6wG,OACLrsE,SAAUoqE,iBAAmBiC,OAC7B39E,QAAS,IAAM09E,WAAWC,QAC1B3B,QAASA,SACRtd,MAAMif,QAAQr0F,KACf,6BAAC,cAAD,CAAM0W,QAAS,IAAM49E,WAAWD,QAAS/tD,QAAM,GAC7C,6BAAC,gBAAD,WA0BR+xD,OAASz+E,0BAAO2e,GAAI;;;;sBAIJh5C,6BAAOqyG;;;;GAMvB,aAAEz1B,eAAiB,iBAAAm8B,wBAEnBF,aAAe,EAAGjvF,YAAOsQ,gBAAS0+E,qBACtC,6BAAC,cAAD,CAAMn5E,KAAG,EAACn1B,MAAO,CAAEwhC,WAAY,SAAUlsC,MAAOI,6BAAO0mF,MAAO5oC,QAAS,QACrE,mCAAIxzC,MAAO,CAAE0uG,cAAe,cAAgBpvF,OAC3CsQ,SACC,6BAAC,cAAD,CAAM5vB,MAAO,CAAEwvB,OAAQ,QAASd,WAAY,OAAS+tB,QAAM,EAAC7sB,QAASA,SACnE,6BAAC,oBAAD,OAGJ,oCAAK5vB,MAAO,CAAEktC,QAAS,OAAQ9L,eAAgB,WAAYspE,SAAU,IACnE,6BAAC,cAAD,CAAM79E,QAASyhF,SAAU7xD,QAAM,EAAC7sB,QAAS,YACvC,6BAAC,uBAAD,S,aAMQ,EACd84E,oBACA6B,sBACAE,sBACAlC,8BACAoG,kDACA/F,8BACAD,wCACAF,kBACAH,8BACA4B,oCACAD,cACA5B,0BAEA,MAAMuG,cAA6B,UAAbnG,SAChBoG,aAA4B,SAAbpG,SACfqG,cAA6B,UAAbrG,SAChBsG,kBAAiC,cAAbtG,SAEpBuG,UAAYtjH,eAAM8H,YACrBq+E,WACC,uEAAsF/nD,KAAMmlF,YAC1F,MAAMC,eAAiBD,UAAUE,IAAIv/D,MAAO,UAASiiC,UAC/Cu9B,eAAiBH,UAAUI,OAAOC,SAASJ,gBAC5CE,gBAGLlF,kBACE,CACEr4B,SAAUu9B,eAAeG,IAAIjkF,KAC7BpuB,KAAMkyG,eAAeI,WACrBrhB,UAAU,EACVshB,eAAW3qG,GAEb,MAIN,CAAColG,oBAGGwF,UAAYhkH,eAAMk6B,QACtB,KAAM,CACJ2lE,MACE,6BAAC8iB,UAAD,CACE9iB,MAAOmd,UACP6B,WAAYA,WACZE,WAAYA,WACZ6D,SAAU,IAAMhG,eAAe,MAC/BC,eAAgBA,eAChBI,oBAAqBA,sBAGzBgH,KACE,6BAACvB,MAAD,KACE,6BAACG,aAAD,CAAcjvF,MAAO,OAAQgvF,SAAU,IAAMhG,eAAe,QAC5D,6BAAC,qBAAD,CAAatoG,MAAO,CAAElP,gBAAiB,eAAiB8+G,WAAW,UAChEjB,0BAA4BkB,oBAE/B,wCACA,wCACA,6BAAC,qBAAD,CAAa7vG,MAAO,CAAElP,gBAAiB,eAAiB8+G,WAAW,UAChEE,kBAIPC,MACE,6BAAC,cAAD,CAAM5iF,KAAG,EAACntB,MAAO,CAAE5P,SAAU,aAC3B,6BAACm+G,aAAD,CACED,SAAU,IAAMhG,eAAe,MAC/BhpF,MAAO,YACPsQ,QAAU,iMAEX0iD,aAAaxvE,IAAI,EAAG6uE,kBAAUE,qBAC7B,6BAACq8B,SAAD,CACEv0G,IAAKk4E,SACLhlD,QAASmiF,UAAUgB,KAAK,KAAMn+B,UAC9Bg3B,SAAO,EACP1qE,SAAU8rE,QAAUp4B,WAAao4B,OAAOp4B,UACvCF,YAMTs+B,UACE,6BAAC,cAAD,CAAM9iF,KAAG,GACP,6BAACohF,aAAD,CACEjvF,MAAO,YACPsQ,QAAS,oCACT0+E,SAAU,IAAMhG,eAAe,QAEhC2H,mBAAUntG,IAAI,EAAGqT,UAAM06C,wBAAaq/C,mBAAY7jH,IAC/C,6BAAC8hH,aAAD,CAAcx0G,IAAM,GAAEwc,QAAQ9pB,IAAKwgC,QAASw7E,WAAW2H,KAAK,UAAMlrG,EAAWorG,WAC3E,qCAAMlwG,MAAO,CAAEmnF,WAAY,SAAWhxE,MACtC,yCAAO06C,kBAMjB,CACEw3C,WACAoC,WACAuE,UACAL,yBACA1E,OACAM,WACAhC,eACAD,eACAK,oBACAD,YAIJ,OACE,0DACE,6BAACqF,YAAD,KACE,6BAAC,cAAD,CACE3gF,SAAS,gBACTP,QAAS,IAAMy7E,eAAesG,cAAgB,KAAO,SACrDhE,OAAK,EACLh7E,QAAS,QACT5vB,MAAO,CAAE1K,MAAOs5G,cAAgB,UAAYl5G,6BAAO0mF,MAAOhsF,SAAU,aACpE,6BAAC,sBAAD,MACCw4G,gBAAkB,6BAAC4F,OAAD,OAErB,6BAAC,cAAD,CACEphF,SAAS,iBACTP,QAAS,IAAMy7E,eAAewG,cAAgB,KAAO,SACrDlE,OAAK,EACLh7E,QAAS,YACT5vB,MAAO,CAAE1K,MAAOw5G,cAAgB,UAAYp5G,6BAAO0mF,QACnD,6BAAC,sBAAD,OAEF,6BAAC,cAAD,CACEhvD,SAAS,qBACTP,QAAS,IAAMy7E,eAAeyG,kBAAoB,KAAO,aACzDnE,OAAK,EACLh7E,QAAS,YACT5vB,MAAO,CAAE1K,MAAOy5G,kBAAoB,UAAYr5G,6BAAO0mF,QACvD,6BAAC,0BAAD,OAEF,6BAAC,cAAD,CACEhvD,SAAS,gBACTP,QAAS,IAAMy7E,eAAeuG,aAAe,KAAO,QACpDjE,OAAK,EACLh7E,QAAS,OACT5vB,MAAO,CAAE1K,MAAOu5G,aAAe,UAAYn5G,6BAAO0mF,QAClD,6BAAC,oBAAD,QAGJ,6BAAC4xB,gBAAD,CAAiBvwD,OAAQgrD,UAAWA,UAAYiH,UAAUjH,a,qGChVhE,8MAAI6E,SAAW/1G,OAAOkzD,QAAU,SAAUtxD,QAAU,IAAK,IAAI9M,EAAI,EAAGA,EAAI4Z,UAAU4J,OAAQxjB,IAAK,CAAE,IAAImgH,OAASvmG,UAAU5Z,GAAI,IAAK,IAAIsN,OAAO6yG,OAAcj1G,OAAOg2G,UAAUC,eAAeC,KAAKjB,OAAQ7yG,OAAQR,OAAOQ,KAAO6yG,OAAO7yG,MAAY,OAAOR,QAKvO,mCACd,IAAI,OACF6zB,OAAS,IACPo1C,KACAj3E,MAPN,SAAkCu/C,IAAK3F,MAAQ,IAAI5rC,OAAS,GAAI,IAAK,IAAI9M,KAAKq+C,IAAW3F,KAAKL,QAAQr4C,IAAM,GAAkBkL,OAAOg2G,UAAUC,eAAeC,KAAK/iE,IAAKr+C,KAAc8M,OAAO9M,GAAKq+C,IAAIr+C,IAAM,OAAO8M,OAOrMu0G,CAAyBtrC,KAAM,CAAC,WAE5C,OAAO,6CAAMlpB,cACX,MACAo0D,SAAS,CAAEttG,MAAO,CACdhS,MAAO,OACPQ,OAAQ,QACPm/G,QAAS,aAAexiH,OAC7B,6CAAM+tD,cAAc,OAAQ,CAAEr2C,KAAM,eAAgBzB,EAAG,gS,2ECjB3D,8MAAIksG,SAAW/1G,OAAOkzD,QAAU,SAAUtxD,QAAU,IAAK,IAAI9M,EAAI,EAAGA,EAAI4Z,UAAU4J,OAAQxjB,IAAK,CAAE,IAAImgH,OAASvmG,UAAU5Z,GAAI,IAAK,IAAIsN,OAAO6yG,OAAcj1G,OAAOg2G,UAAUC,eAAeC,KAAKjB,OAAQ7yG,OAAQR,OAAOQ,KAAO6yG,OAAO7yG,MAAY,OAAOR,QAKvO,mCACd,IAAI,OACF6zB,OAAS,IACPo1C,KACAj3E,MAPN,SAAkCu/C,IAAK3F,MAAQ,IAAI5rC,OAAS,GAAI,IAAK,IAAI9M,KAAKq+C,IAAW3F,KAAKL,QAAQr4C,IAAM,GAAkBkL,OAAOg2G,UAAUC,eAAeC,KAAK/iE,IAAKr+C,KAAc8M,OAAO9M,GAAKq+C,IAAIr+C,IAAM,OAAO8M,OAOrMu0G,CAAyBtrC,KAAM,CAAC,WAE5C,OAAO,6CAAMlpB,cACX,MACAo0D,SAAS,CAAEM,MAAO,6BAA8B5/G,MAAO,KAAMQ,OAAQ,KAAMm/G,QAAS,aAAexiH,OACnG,6CAAM+tD,cAAc,OAAQ,CAAE93C,EAAG,qZ,8BCdrCo5B,OAAOE,QAAU,ytO,2LCSW,WAG5B,MAMMy1E,sBACJ,2qDAuBWp+B,YAAe,m3BAFJ,65jOAXS,m3BAAk3Bo+B,0rjBAWiIA,wBAnB3+B,m3BAAk3BA,ktT,wQCb/2B,6B,gCACJ,wxG,6ICDxC,mEACA,2DACA,wDACA,yDACA,2D,+FAEe,CACb,CAAEx+B,SAAU,iBAAkBG,WAAYs+B,sBAC1C,CAAEz+B,SAAU,aAAcG,WAAYxsB,kBACtC,CAAEqsB,SAAU,UAAWG,WAAYnO,eACnC,CAAEgO,SAAU,WAAYG,WAAYu+B,gBACpC,CAAE1+B,SAAU,aAAcG,WAAYw+B,mB,wDCnBxC91E,OAAOE,QAAU,i2G,8BCAjBF,OAAOE,QAAU,u3D,8BCAjBF,OAAOE,QAAU,uhC,8BCAjBF,OAAOE,QAAU,i8C,8BCAjBF,OAAOE,QAAU,+rD,+DCOjB,I,+FAEe,CAAC,CAAEvkB,KAAM,UAAW06C,YAAa,gCAAiCq/C,W,IAFjF,4B,kCAE2FK,U,wDCT3F/1E,OAAOE,QAAU,ilB,8BCAjBF,OAAOE,QAAU,+9E,6ICQjB,mDACA,O,4WAAA,yBACA,+BACA,iEAEA,6DACA,uDACA,yDACA,+D,kFAGA,MAAM81E,UAAYzgF,0BAAOuf,QAAS;;;;;;;;;;EAclC,SAAS/wB,MAAK,OAAEqG,OAAF,WAAUE,aACtB,MAAM2rF,cAAe,SAAAj9G,aAClBioC,QACC3W,WAAW,CAAE4rF,SAAUj1E,MAAMtiC,OAAO9F,SAEtC,CAACyxB,aAGH,OACE,6BAAC,cAAD,CAAMqI,KAAG,EAACntB,MAAO,CAAExR,OAAQ,SACzB,6BAAC,sBAAD,CAAcq5C,YAAaA,mBAAaC,UAAQ,IAChD,6BAAC0oE,UAAD,CAAWtzE,YAAY,kBAAkB7pC,MAAOuxB,OAAO8rF,SAAUx0E,SAAUu0E,gBAIjFlyF,KAAKyJ,UAAY,OACjBzJ,KAAKoC,cAAgB,CAAE+vF,SAAU,I,cAElB,QAAAltE,MAAI,kBAAcjlB,O,wDCnDjCic,OAAOE,QAAU,4E,6ICOjB,0DACA,+BAEA,uDACA,4EACA,yCACA,yDACA,+DACA,2DACA,oE,sdAIA,IAAIi2E,iBAAmB,EACnBC,0BAA4B,EAC5BC,6BAA+B,EAC/BC,2BAA6B,EAWjC,SAASC,iBAMP,OALA3qF,SAASq4C,kBAAkB,CACzBl8C,OAAQ,GACRm8C,QAAShzE,MAAM8H,YAAY,IAAM,KAAM,IACvCqqE,WAAYnyE,MAAM8H,YAAY,IAAM,KAAM,MAEpC,oCAAkCq9G,6BAG5C,SAASG,kCAIP,OADA,mBAAA55D,oBAA4CnkD,SAAoCA,SACxE,kCAAgC69G,2BAG1C,SAAStyF,kBAEP,OADAmyF,mBAEE,oBAAC,cAAD,CAAMxjF,KAAG,GACP,oBAAC,sBAAD,MACA,oBAAC,cAAD,CAAMgI,KAAG,EAACyS,QAAM,EAAC5nC,MAAO,CAAExQ,SAAU,GAAIk+C,WAAY,IAAKujE,UAAW,WAClE,oBAAC,kCAAD,CAA0BrvF,MAAO,IAC9B,IACC,6DACqB+uF,iBADrB,IACuC,+BADvC,gCAEgCC,4BAIpC,+BACA,oBAACG,eAAD,MACA,iCACE,iCAAuB,oBAACC,gCAAD,QA1CjCtyG,OAAOwyG,iCAAmC,WACxC,MAAO,CACLP,kCACAC,oDACAC,0DACAC,wDA4CJtyF,gBAAgBwJ,UAAY,kBAC5BxJ,gBAAgBmC,cAAgB,G,cAEjB,QAAA6iB,MAAI,kBAAUhlB,kB,uKCtE7B,mCACA,M,4WAAA,yBACA,+BAEA,uDACA,yCACA,yDACA,+DACA,qCAEA,8B,kFAWA,SAAS2yF,wBAAwBhmH,OAC/B,OACE,2BAAK6U,MAAO,CAAEuhC,OAAQ,IACpB,oBAAC,WAAA6vE,UAAD,CAAWtlH,OAAQX,MAAMW,OAAQulH,QAASlmH,MAAMkmH,QAASrjH,MAAO,IAAKQ,OAAQ,GAAI8iH,UAZpE,MAab,2BAAKtxG,MAAO,CAAEktC,QAAS,eAAgBxe,WAAY,GAAIq9C,cAAe,aAClE,UAAA/oE,MAAK7X,MAAMW,SAAW,CAAEuH,MAAO,IAAKA,MAAM0kE,QAAQ5sE,MAAMomH,eACzDpmH,MAAMK,SACP,2BAAKwU,MAAO,CAAE1K,MAAO,WACjB,UAAAqiG,OAAMxsG,MAAMW,OAAQ,SAAWX,MAAMW,OAAO+jB,QAAQkoD,QAAQ5sE,MAAMomH,eADtE,UAQR,SAAS9yF,sBACP,MAAMmhC,UAAY93C,KAAK0pG,MACjBx+B,YAAa,mBAAA57B,oBAAmB1rD,MAAM8H,YAAY,EAAGu/E,2BAAkBA,YAAYC,WAAY,KAC/Fy+B,aAAe/lH,MAAMq6C,SACrB2rE,iBAAmBD,aAAah3F,SAClCu4D,YAAgBy+B,aAAah3F,SAAWg3F,aAAah3F,QAAQu4D,aAAeA,aAC9Ey+B,aAAah3F,QAAU,CAAEmlC,UAAW93C,KAAK0pG,MAAOx+B,wBAGlD,MAAM2+B,WAAajmH,MAAMq6C,OAIrB,CACF08B,MAAO,GACPmvC,UAAW,GACXC,UAAW,KAGb,GACE7+B,YACAy+B,aAAah3F,SACbi3F,kBACAA,iBAAiB1+B,aAAeA,YAChC0+B,iBAAiB1+B,WAAWC,WAC5BD,WAAWC,WACXy+B,iBAAiB1+B,WAAW8+B,eAAiB9+B,WAAW8+B,cACxDJ,iBAAiB1+B,WAAWF,cAAgBE,WAAWF,YACvD,CACA,MAAMi/B,aAAejqG,KAAK0pG,MAAQE,iBAAiB9xD,UAC7CiyD,UAAoG,KAAxF,QAAAhyD,QAAM,QAAAC,eAAckzB,WAAWF,YAAa4+B,iBAAiB1+B,WAAWF,cAC1F6+B,WAAWl3F,QAAQgoD,MAAMruC,KAAK,CAAE/gC,MAAOw+G,UAAYE,aAAcnyD,sBACjE+xD,WAAWl3F,QAAQm3F,UAAUx9E,KAAK,CAAE/gC,MAAO,IAAO0+G,aAAcnyD,sBAChE+xD,WAAWl3F,QAAQo3F,UAAUz9E,KAAK,CAAE/gC,MAAOw+G,UAAWjyD,sBACtD,IAAK,MAAMzpC,QAAQw7F,WAAWl3F,QAAS,CACrC,MAAM3uB,OAAS6lH,WAAWl3F,QAAQtE,MAClC,KAAOrqB,OAAO,IAAMA,OAAO,GAAG8zD,UAAYA,UA5D7B,KA6DX9zD,OAAOkmH,SAKb,OACE,oBAAC,cAAD,CAAM7kF,KAAG,GACP,oBAAC,sBAAD,CAAc2a,UAAQ,IACtB,oBAAC,cAAD,CAAM3a,KAAG,EAACz+B,MAAI,EAACk5C,QAAM,EAAChlC,OAAK,EAAC5C,MAAO,CAAE0tC,WAAY,EAAG05C,WAAY,WAC9D,oBAAC+pB,wBAAD,CAAyBrlH,OAAQ6lH,WAAWl3F,QAAQgoD,MAAO4uC,QAAS,IAAKE,cAAe,GAAxF,cAGA,oBAACJ,wBAAD,CAAyBrlH,OAAQ6lH,WAAWl3F,QAAQm3F,UAAWP,QAAS,GAAIE,cAAe,GAA3F,OAGA,oBAACJ,wBAAD,CAAyBrlH,OAAQ6lH,WAAWl3F,QAAQo3F,UAAWR,QAAS,IAAKE,cAAe,GAA5F,kBAQR9yF,oBAAoBuJ,UAAY,sBAChCvJ,oBAAoBkC,cAAgB,G,cAErB,QAAA6iB,MAAI,kBAAU/kB,sB,kKCxDtB,SAAmBtzB,OACxB,OACE,2BACE6U,MAAO,CACLktC,QAAS,eACT6+B,cAAe,QACfj7E,gBAAiB,OACjB9C,MAAO7C,MAAM6C,MACbQ,OAAQrD,MAAMqD,SAEhB,oBAAC,0BAAD,CACEymG,KAAM,CAAChiG,QAAmCjF,MAAeQ,WAtCjE,SACE1C,OACAulH,QACAC,UACAW,SACAh/G,QACAjF,MACAQ,QAEA,MAAMspC,SAAWhtC,KAAKwyB,IAAI+zF,SAAS,UAAA/zF,KAAIxxB,OAAOgX,IAAI,EAAGzP,eAAYA,SACjEJ,QAAQ+kG,UAAU,EAAG,EAAGhqG,MAAOQ,QAC/ByE,QAAQ0vG,YACR1vG,QAAQ+vG,YAAc,QACtB,IAAIv3E,OAAQ,EACZ,kBAAmC3/B,OAAQ,OAAhC,MAAEuH,MAAF,UAASusD,WAAuB,KACnCtzD,GAAMglH,UAAY1xD,UAAYqyD,UAAYX,UAAatjH,MACvDzB,GAAK,EAAI8G,MAAQykC,UAAYtpC,OAC/Bi9B,OACFx4B,QAAQsqG,OAAOjxG,EAAGC,GAClBk/B,OAAQ,GAERx4B,QAAQgwG,OAAO32G,EAAGC,GAGtB0G,QAAQ8zF,SAeAkO,CAAK9pG,MAAMW,OAAQX,MAAMkmH,SAAW,EAAGlmH,MAAMmmH,UAAWnmH,MAAM8mH,UAAYnqG,KAAK0pG,MAAOv+G,QAASjF,MAAOQ,aAvDhH,I,IAAA,+BACA,M,4WAAA,yBAEA,mB,IAAA,2B,+KCHA,4EACA,kEACA,M,4WAAA,yBACA,+BACA,iEAEA,sEACA,8CACA,gEACA,yDACA,uDACA,uDACA,yDACA,+DACA,6DACA,gCACA,+D,sPA8BA,MAAMgiH,UAAYzgF,0BAAOuf,QAAS;;;;EAM5B4iE,mBAAqBniF,0BAAO2e,GAAI;;;EAKhCyjE,WAAapiF,0BAAO2e,GAAI;;;;;WAKnBh5C,sBAAO85C;EAGZ8R,MAAQvxB,0BAAOC,IAAK;;EAGpB8xB,KAAO/xB,0BAAO2e,GAAI;;;;EAMxB,SAAS0jE,aAAa3wF,OACpB,OAAOA,MAAMtL,KAuBf,MAAMwI,gBAAgBjzB,MAAMsvC,cAAiC,sEAY9CtvC,MAAM+wC,aAZwC,6BAcnD,CACN41E,YAAa,GACbC,cAAe,GACf9tG,MAAO,KACP+tG,kBAAcztG,IAlB2C,sCAuD1C,CAAC22B,MAAOrI,aACvBx5B,KAAKzO,MAAM25B,WAAW,CAAEsO,wBAxDiC,sCA4D1C,CAACA,UAAmB3R,MAAcypB,gBACjDtxC,KAAKzO,MAAM25B,WAAW,CAAEsO,oBAAW/P,SAAU5B,MAAM4B,WACnD6nB,aAAa1O,SA9D4C,yCAiEvC,CAACnZ,SAAkBhwB,MAAY63C,gBACjDtxC,KAAKzO,MAAM25B,WAAW,CAAEzB,oBACxB6nB,aAAa1O,SAnE4C,gCAsEhD,KACT,MAAM,UAAEpJ,WAAcx5B,KAAKzO,MAAMy5B,QAC3B,aAAE2tF,cAAiB34G,KAAKhC,MAC9B,KAAIw7B,WAAam/E,cAAgB34G,KAAK44G,WAAW/3F,SAG/C,MAAM,IAAInpB,MAAO,4CAFjBsI,KAAK44G,WAAW/3F,QAAQg4F,QAAQF,gBA1EuB,iCAgF9C92E,QACX7hC,KAAKzO,MAAM25B,WAAW,CAAEzxB,MAAOooC,MAAMtiC,OAAO9F,UA5D9C,gCAAgClI,MAAcyM,OAAmB,uFAC/D,MAAM86G,SA1CV,SAAoBr/G,OAClB,IAAIk/G,aACA/tG,MAAQ,KACZ,IACE,MAAMmuG,UAAYpmG,KAAKqjC,MAAMv8C,OACzBkC,MAAMo7C,QAAQgiE,WAChBnuG,MAAQ,kDACe,OAAdmuG,UACTnuG,MAAQ,8CACsB,iBAAdmuG,UAChBnuG,MAAS,kDAAiDmuG,aAE1DJ,aAAeI,UAEjB,MAAOv2G,GACPoI,MAAQnR,MAAQ+I,EAAEmnB,QAAU,GAE9B,MAAO,CAAE/e,YAAO+tG,2BAyBuBK,CAAWznH,MAAMy5B,OAAOvxB,OAC7D,IAAIw/G,SAAU,EAed,GAbI1nH,QAAUyM,MAAMy6G,cAClBK,SAASL,YAAclnH,MACvB0nH,SAAU,GAGR1nH,MAAM+6B,YAActuB,MAAMy6G,YAAYnsF,YACxCwsF,SAASJ,cAAgB/6G,OAAOwtC,KAAK55C,MAAM+6B,WAAWmvB,OACtDw9D,SAAU,GAOV1nH,MAAMy5B,OAAOvB,UAC0B,OAAvC,2BAAAzrB,MAAMy6G,mBAAN,yEAAmBztF,cAAnB,uDAA2BvB,WAC3Bl4B,MAAMy5B,OAAOvB,YAAb,4BAA0BzrB,MAAMy6G,mBAAhC,uDAA0B,oBAAmBztF,cAA7C,iCAA0B,sBAA2BvB,WACX,MAA1Cl4B,MAAM+6B,UAAU/6B,MAAMy5B,OAAOvB,UAC7B,CACA,MAAMyvF,eAAgB,+BAAmB3nH,MAAM+6B,UAAW/6B,MAAMy5B,OAAOvB,UACvE,GAAIyvF,cAAe,CACjB,MAAMC,yBAA2BxmG,KAAKsjC,UAAUijE,cAAe,KAAM,GACrE3nH,MAAM25B,WAAW,CAAEzxB,MAAO0/G,2BAC1BF,SAAU,GAId,OAAOA,QAAUH,SAAW,KAgC9BM,qBACE,MAAM,OAAEpuF,OAAF,WAAUE,YAAelrB,KAAKzO,MAEpC,OACE,wCACE,oBAAC,cAAD,CACEi2D,KAAMx8B,OAAOquF,aAAe,oBAAC,wBAAD,MAAyB,oBAAC,8BAAD,MACrDpmF,QAAS,KACP/H,WAAW,CAAEmuF,cAAeruF,OAAOquF,iBAErC,kDAEF,oBAAC,cAAD,KACE,oBAAC,oBAAA51D,kBAAD,oBACA,oBAAC,oBAAAC,kBAAD,CACErwC,KAAK,OACL5Z,MAAOuxB,OAAOsuF,WACdh3E,SAAWT,QACT3W,WAAW,CAAEouF,WAAYz3E,MAAMtiC,OAAO9F,SAExC6pC,YAAY,aAGhB,oBAAC,cAAD,KACE,oBAAC,oBAAAmgB,kBAAD,uBACA,oBAAC,oBAAAC,kBAAD,CACErwC,KAAK,OACL5Z,MAAOuxB,OAAOuuF,cACdj3E,SAAWT,QACT3W,WAAW,CAAEquF,cAAe13E,MAAMtiC,OAAO9F,YAI/C,oBAAC,cAAD,KACE,oBAAC,oBAAAgqD,kBAAD,mCACA,oBAAC,oBAAAC,kBAAD,CACErwC,KAAK,OACL5Z,MAAOuxB,OAAOwuF,YACdl3E,SAAWT,QACT3W,WAAW,CAAEsuF,YAAa33E,MAAMtiC,OAAO9F,SAEzC6pC,YAAY,+BAOtBp9B,SACE,MAAM,aACJqmB,aADI,OAEJ5D,OACAqC,QAAQ,UAAEwO,UAAF,SAAa/P,SAAb,WAAuB6vF,WAAvB,cAAmCC,cAAnC,YAAkDC,YAAlD,aAA+DH,aAA/D,MAA6E5/G,QACnFuG,KAAKzO,OAEH,cAAEmnH,cAAF,aAAiBC,aAAjB,MAA+B/tG,OAAU5K,KAAKhC,MAC9Cy7G,WAAaltF,aAAazE,SAAS4xF,0BAAmBC,WACtDC,eAAiBP,aAAe,CAAEpzE,KAAM,YAAe,CAAEA,KAAM,WAAYuB,eAAgB,UAEjG,OACE,oBAAC,cAAD,CAAMjU,KAAG,EAACntB,MAAO,CAAExR,OAAQ,OAAQglD,QAAS,SACzCpgB,WAAa/P,UACZ,oBAAC,mBAAD,CAAWnjB,IAAKtG,KAAK44G,WAAYr8F,KAAK,UAAUsL,MAAO2R,UAAW/P,SAAUA,WAE9E,oBAAC,sBAAD,CAAcykB,UAAQ,EAACC,YAAanuC,KAAKo5G,uBACxCC,cACC,oBAACnxD,KAAD,KACE,oBAACR,MAAD,eACA,oBAAC,sBAAD,CACEpkB,YAAY,iBACZ7jB,MAAOkJ,OACPmb,UAAU,EACVxB,SAAUtiC,KAAK65G,eACfr3E,SAAUxiC,KAAK85G,eACfv2E,aAAc,CAAEhnB,KAAMid,WACtB6J,YAAam1E,aACbp1E,aAAco1E,gBAInBa,cACC,oBAACnxD,KAAD,KACE,oBAAC,oBAAAzE,kBAAD,kBACA,oBAAC,sBAAD,CACEliB,cAAY,EACZ+B,YAAY,oBACZ7jB,MAAOi5F,cACPl2E,SAAUxiC,KAAK+5G,kBACfx2E,aAAc9Z,YAInB4vF,cACC,oBAACf,mBAAD,KACE,oBAAC1B,UAAD,CAAWtzE,YAAY,gCAAgC7pC,MAAOA,OAAS,GAAI6oC,SAAUtiC,KAAKwkC,aAG9F,oBAAC,cAAD,CAAMjJ,KAAG,EAACn1B,MAAOwzG,gBACdhvG,OAAS,oBAAC2tG,WAAD,KAAa3tG,OACvB,oBAAC,gBAAD,CACExE,MAAOqzG,WAAa,CAAEviH,gBAAiBsiH,aAAgB,GACvDxjF,QAASyjF,WAAaF,cAAgB,iCACtCplF,UAAWslF,aAAed,aAC1B3jB,QAASykB,cAAgBd,aACzB1lF,QAASjzB,KAAKg6G,UACbV,e,gBA7LPv0F,Q,YACe,W,gBADfA,Q,gBAEmB,CACrByU,UAAW,GACX/P,SAAU,GACV6vF,WAAY,UACZC,cAAe,GACfC,YAAa,UACbH,cAAc,EACd5/G,MAAO,K,cA4LI,QAAAmwC,MAAI,kBAAc7kB,U,gKCnRlB,SAASk1F,mBAAmB3tF,UAAyB7C,UAClE,MAAMywF,QAAUC,oBAAoB1wF,UACpC,GAAe,MAAXywF,QACF,OAAOA,QAET,MAAM9/E,OAAS9N,UAAU7C,UAAU2Q,OACnC,IAAKA,OACH,OAAO,KAET,MAAM0W,IAAM,GACZ,IAAK,MAAM3Q,SAAS/F,OAAQ,CAC1B,GAAI+F,MAAM4b,WACR,SAEF,MAAMq+D,OAASH,mBAAmB3tF,UAAW6T,MAAM9sB,MAC/C8sB,MAAM4W,QACiB,MAArB5W,MAAMk6E,YACRvpE,IAAI3Q,MAAM5jB,MAAQ,IAAI5gB,MAAMwkC,MAAMk6E,aAAapxG,KAAKmxG,QAEpDtpE,IAAI3Q,MAAM5jB,MAAQ,CAAC69F,QAGrBtpE,IAAI3Q,MAAM5jB,MAAQ69F,OAGtB,OAAOtpE,K,mCA1CF,MAAMqpE,oBAAsB,CACjCnyB,MAAM,EACNC,KAAM,EACNjsD,MAAO,EACPE,MAAO,EACPD,OAAQ,EACRE,MAAO,EACP+rD,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRhsD,QAAS,EACTisD,QAAS,EACTC,OAAQ,GACRve,KAAM,CAAEj8B,IAAK,EAAGC,KAAM,GACtBgT,SAAU,CAAEjT,IAAK,EAAGC,KAAM,I,8LCjB5B,I,IAAA,M,4WAAA,yBACA,O,IAAA,0B,iCAEA,yC,oKASe,MAAMusE,kBAAkBxoH,MAAMsvC,cAAqB,+DAClD+jC,cAAKC,MAD6C,wCAIhEm1C,cACE,IAAKv6G,KAAKw6G,SACR,MAAM,IAAI9iH,MAAM,2CAElB,OAAOsI,KAAKw6G,SAGdC,iBACE,MAAM,MAAE5yF,MAAF,SAAS4B,SAAT,KAAmBlN,MAASvc,KAAKzO,MACvCyO,KAAKu6G,cAAcG,cAAc16G,KAAKwlE,IAAK,CAAC,CAAE39C,YAAO4B,kBAAU4iF,WAAY,CAAEh5F,KAAM,QAASkJ,cAG9F3X,oBACE5E,KAAKy6G,iBAGPlyG,qBACEvI,KAAKy6G,iBAGPz1G,uBACEhF,KAAKu6G,cAAcG,cAAc16G,KAAKwlE,IAAK,IAG7CqzC,QAAQzvF,KACN,MAAM,MAAEvB,OAAU7nB,KAAKzO,MACvByO,KAAKu6G,cAAc1B,QAAQ,CAAEhxF,YAAOuB,UAGtCljB,SACE,OACE,oBAAC,iBAAAy0G,wBAAD,KACIthH,UACA2G,KAAKw6G,SAAWnhH,QACT,Q,6NCjDjB,uEACA,4DACA,uDACA,+BACA,uCACA,0EACA,mCAEA,6DACA,+DACA,kEACA,8DACA,oEACA,uDACA,sDACA,2DACA,4EAIA,yDACA,+DACA,qEAEA,4DACA,yC,siCAGA,MAAMuhH,kBAAkB9oH,eAAMsrE,UAC5Bl3D,SACE,OAAO,6BAAC,uBAAyBlG,KAAKzO,QAsB1C,MAAMspH,kBAAoBC,gCAAiB5xG,IAAKghC,QAAD,CAC7CxV,MAAQ,OAAK,0BAAcwV,OAC3BzwC,MAAOywC,SAKI6wE,kBAAmB,YAAA78G,gBAC7B88G,MAAmBA,KACnBA,MAA6BA,KAAK9xG,IAAKzP,QAAD,CAAci7B,MAAOj7B,MAAOA,gB,0CAG9D,MAAMwhH,oBAAsB,CAAC7xF,IAAc8xF,YAAqBC,eACrE,GAAI/xF,IAAIO,QAAQugB,MAAQgxE,YACtB,OAAO,EAGT,GAAIC,YAAYllG,OAAS,EAEvB,OAAO,EAET,MAAMmlG,uBAAyBD,YAAYjyG,IAAKmyG,MAASA,KAAKhlD,eAC9D,IAAK,MAAMilD,cAAcF,uBACvB,GAAIhyF,IAAIO,QAAQpN,KAAK85C,cAAcvuC,SAASwzF,aAAelyF,IAAIO,QAAQP,IAAIitC,cAAcvuC,SAASwzF,YAChG,OAAO,EAGX,OAAO,G,gDAGT,MAAMC,oBAAoBn6E,qBAAqB,+EAItBo6E,kBACrBx7G,KAAKzO,MAAM25B,WAAX,iBAA2BlrB,KAAKzO,MAAMy5B,OAAtC,CAA8CmwF,YAAaK,gBAAgBtyG,IAAKknF,QAAWA,OAAO32F,YALvD,yCAQxByhH,cACnBl7G,KAAKzO,MAAM25B,WAAX,iBAA2BlrB,KAAKzO,MAAMy5B,OAAtC,CAA8CkwF,6BATH,iCAYhC5rG,MACX2rG,oBAAoB3rG,KAAKqa,QAAS3pB,KAAKzO,MAAMy5B,OAAOkwF,YAAal7G,KAAKzO,MAAMy5B,OAAOmwF,cAbxC,yCAyBzB,CAACM,cAA4BC,QAC/C,MAAM,YAAER,YAAF,YAAeC,aAAgBn7G,KAAKzO,MAAMy5B,OAC1C2wF,gBAAkBhgH,MAAMwuC,KAAKsxE,eAAevyG,IAAKqT,OAAD,CAAamY,MAAOnY,KAAM9iB,MAAO8iB,QAEvF,OACE,oCAAK4W,UAAWC,qBAAOwoF,YACrB,6BAAC,gCAAD,CACEzoF,WAAW,uBAAGC,qBAAOyoF,gBACrBC,WAAW,EACXC,YAAY,EACZtiH,MAAOyhH,YACPc,aAAcl/E,SAAS1J,qBAAO4oF,cAC9BtrG,UAAWosB,SAAS1J,qBAAO4oF,cAAgBlB,gCAAiB7kG,OAC5DwY,QAASosF,kBACToB,eAAgB,EAAGl8G,QAAKqG,MAAO81G,UAAW9rB,cAAQ+rB,wBAAaC,+BAC7D,oCACEjpF,WAAW,uBAAGkpF,2BAAS,0BAAcjsB,OAAO32F,OAAO48D,eAAgB,0BAA2B,CAC5FimD,+BAAgCF,gBAAkBhsB,SAEpDhqF,MAAO81G,UACPjpF,QAAS,IAAMjzB,KAAKu8G,kBAAkBnsB,OAAO32F,OAC7CsG,IAAKA,KACJqwF,OAAO17D,OAGZ8nF,eAAiBpsB,QAAW,yCAAQ,kBAAgB,0BAAcA,OAAO32F,MAAMA,UAEjF,6BAAC,gCAAD,CACE05B,UAAWC,qBAAOqpF,WAClBX,WAAS,EACTY,OAAK,EACLC,eAAe,EACfljH,MAAOshH,iBAAiBI,aACxB74E,SAAUtiC,KAAK48G,oBACfnuF,QAASktF,gBACTK,aAAcl/E,SAAS1J,qBAAO4oF,cAC9B14E,YAAY,sCACZy4E,YAAU,EACVc,gBAAiBjC,UACjBkC,kBAAoBpoF,OAAW,kCAAiCA,WAElE,oCAAKvB,UAAWC,qBAAO2pF,iBACpBrB,KAAKzlG,OADR,IACiC,IAAhBylG,KAAKzlG,OAAe,OAAS,QAC5C,6BAAC,cAAD,CACE7P,MAAO,CAAEwzC,QAAS,mBAClB3mB,QAAS,KACPivD,mBAAUC,KAAKxvE,KAAKsjC,UAAUylE,KAAM,KAAM,KAE5C1lF,QAAQ,4BACR,6BAAC,0BAAD,WA3DVgnF,qBAAqBv9F,OACnB,MAAM,YAAEy7F,YAAF,YAAeC,aAAgBn7G,KAAKzO,MAAMy5B,OAEhD,OADyBkwF,YAAc,GAAKC,YAAYllG,OAAS,EAK1DwJ,MAAMR,OAAOjf,KAAKi9G,WAFhBx9F,MA4DXy9F,YAAW,KAAE5tG,KAAF,MAAQlJ,MAAR,IAAerG,IAAf,MAAoBhH,QAC7B,OACE,oCAAKgH,IAAKA,IAAKqG,MAAiB,IAAVrN,MAAA,iBAAmBqN,MAAnB,CAA0B+2G,WAAY,KAAO/2G,OACjE,6BAAC,oBAAD,CAAYgjB,IAAK9Z,KAAKqa,QAAQA,WAKpCzjB,SACE,MAAM,OAAEyiB,OAAF,OAAUqC,QAAWhrB,KAAKzO,MAC1BkqH,cAAgB,IAAI/nH,IAEpB0pH,kBACJ,6BAAC,2BAAD,CACEl2F,cAAe8D,OAAO9D,cACtBob,SAAWpb,eAAkBlnB,KAAKzO,MAAM25B,WAAX,iBAA2BlrB,KAAKzO,MAAMy5B,OAAtC,CAA8C9D,+BAC3EyB,OAAQA,OACRm+B,oBAAoB,oBACpBC,qBAAsBs2D,gCAI1B,OACE,6BAAC,kCAAD,CAA0Br1F,MAAO,CAACgD,OAAO9D,eAAgBulB,YAAa,KACnE,EAAGxB,4BACF,MAAMywE,KAA2CzwE,YAAYjgB,OAAO9D,eAGpE,OAFAw0F,KAAKpxE,QAASlhB,KAAQqyF,cAAc5xF,IAAIT,IAAIO,QAAQA,QAAQpN,OAG1D,6BAAC,cAAD,CAAMgX,KAAG,GACP,6BAAC,sBAAD,CAAc2a,UAAQ,EAACD,YAAaA,mBAAay2C,gBAAiB04B,mBAC/Dp9G,KAAKs9G,kBAAkB7B,cAAeC,OAEzC,oCAAKvoF,UAAWC,qBAAOuN,SACrB,6BAAC,iBAAD,CAASlhB,MAAOzf,KAAKg9G,qBAAqBtB,MAAOnpB,UAAWvyF,KAAKk9G,kB,gBAlH3E3B,Y,gBACmB,CAAEJ,YAAa,GAAID,YAAa,EAAGh0F,cAAem2F,gC,gBADrE9B,Y,YAEe,U,cA0HN,QAAA3xE,MAAI,kBAAc2xE,c,wDCtNjC36E,OAAOE,QAAU,myB,kDCCjB,IAAIH,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,s6nBAA26nB,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,kFAAkF,4EAA4E,4EAA4E,yFAAyF,wFAAwF,0FAA0F,0FAA0F,yFAAyF,uFAAuF,yFAAyF,MAAQ,GAAG,SAAW,yvLAAyvL,KAAO,oBAAoB,eAAiB,CAAC,ynGAA8nG,m9DAA+9D,mrDAAmrD,2nHAA6nH,8vKAA8vK,gkBAAgkB,o1NAAo1N,+7BAA+7B,84DAA84D,2jFAA2jF,WAAa,MAGxiuDquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,cAAiB,uEACjB,aAAgB,KAChB,QAAW,qEACX,WAAc,wEACd,eAAkB,4EAClB,WAAc,wEACd,gBAAmB,6EACnB,aAAc,wEACd,cAAe,yEACf,wBAAyB,mFACzB,0BAA2B,uF,6IC5B5B,2DACA,sDAGA,iEACA,oE,kFAIA,SAAS08E,SAAS/hH,IAAKlF,OACrB,OAAO6S,gBAAEq0G,SAAU,GAAEhiH,IAAOlF,MAAO,KAGrC,SAASmnH,MAAMlsH,OACb,MAAMwU,MAAQxU,MAAMwU,MACpB,OACE,yCACGw3G,SAASx3G,MAAM+nC,IAAK,IADvB,IAC6ByvE,SAASx3G,MAAMgoC,KAAM,I,aAUvCj8C,eAAM6jB,MAAK,UAAoB,IAAEyT,MAC9C,MAAMs0F,OAAU,GAAEt0F,IAAIu0F,QAAQv0F,IAAI83B,OAE5B08D,UAAW,0BAAcx0F,IAAI8gB,OAE7B2zE,eAAiBz3G,0BAAMw3G,SAASE,qBAIhC1mG,MAAQgS,IAAIA,IAAI6G,MAAM,MAC5B,OACE,oCAAKvK,MAAOg4F,OAAQvqF,UAAY,GAAE/sB,0BAAMujC,aAAak0E,kBACnD,wCACE,6CAAQ10G,gBAAEq0G,SAASI,SAAU,EAAG,KAAhC,KACA,6CACG,6BAACH,MAAD,CAAO13G,MAAOqjB,IAAIuP,OAAO5yB,QAD5B,KAGA,6CACIqjB,IAAI7M,KADR,MAIA,8CACA,yCAAOnF,MAAM,KAGf,wCAEGA,MAAMuY,MAAM,GAAGzmB,IAAI,CAACg4C,KAAMxsC,MAEvB,oCAAK3U,IAAK2U,KAAV,OAEGwsC,Y,6EClEfpgB,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,yqBAA0qB,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,uFAAuF,6EAA6E,MAAQ,GAAG,SAAW,0LAA0L,KAAO,yBAAyB,eAAiB,CAAC,6mBAA+mB,orDAAorD,WAAa,MAGr7GquC,QAAQD,OAAS,CAChB,UAAa,UACb,MAAS,UACT,WAAc,UACd,OAAU,UACV,OAAU,UACV,YAAe,UACf,KAAQ,UACR,gBAAmB,UACnB,OAAU,UACV,QAAW,UACX,IAAO,UACP,QAAW,2BACX,kBAAqB,wBACrB,UAAa,2BACb,WAAc,4BACd,aAAgB,4BAChB,kBAAqB,2BACrB,UAAa,4EACb,MAAS,wEACT,MAAS,wEACT,KAAQ,uEACR,KAAQ,uEACR,MAAS,0E,6ICvBV,mDACA,M,4WAAA,yBACA,4CACA,sDAEA,yD,2gBAyBA,UAAuB,MAAEphB,MAAF,UAAS8yE,YAE9B,MAAOqf,WAAYC,eAAiB//G,MAAMyB,UAAS,GAI7CwqH,OAASjsH,MAAMq6C,OAAeg5B,cAAKC,MAGnC44C,MAAQlsH,MAAMq6C,OAA0B,IAAI8xE,oCAAkB,CAAEC,YAAY,KAG5EC,UAAYrsH,MAAMq6C,QAAgB,GAGlCiyE,UAAYtsH,MAAMq6C,OAA6B,IAG/CkyE,eAAiBvsH,MAAMq6C,OAAe,GAC5CkyE,eAAex9F,QAAU3S,KAAK0pG,OAI1Bn4F,MAAMxJ,OAASmoG,UAAUv9F,QAAQ5K,SAAWmoG,UAAUv9F,QAAQ+oC,MAAM,CAACt6C,KAAMvW,QAAUuW,OAASmQ,MAAM1mB,UACtGilH,MAAMn9F,QAAQy9F,WAEhBF,UAAUv9F,QAAUpB,MAKpB,MAAMgpD,QAAU32E,MAAM8H,YACpB,KACE,MAAM2kH,YAAc17G,SAAS27G,eAAeT,OAAOl9F,SACnD,IAAK09F,YACH,OAEF,MAAME,cAAgBF,YAAYx7E,aAAew7E,YAAY77E,WAAa67E,YAAYv7E,aAClFy7E,gBAAkB7M,YACpBC,cAAc4M,gBAGlB,CAAC7M,aASGhsE,SAAW9zC,MAAM8H,YACrB,KACE,GAAIsU,KAAK0pG,MAAQyG,eAAex9F,QAAU,IACxC,OAEF,MAAM09F,YAAc17G,SAAS27G,eAAeT,OAAOl9F,SACnD,IAAK09F,YACH,OAEF,MAAME,cAAgBF,YAAYx7E,aAAew7E,YAAY77E,WAAa67E,YAAYv7E,aAAe,EACjGy7E,gBAAkB7M,YACpBC,cAAc4M,gBAGlB,CAAC7M,aAGG8M,YAAc5sH,MAAM8H,YAAY,KACpCi4G,eAAc,IACb,IAEH,OACE,oBAAC,kBAAA1f,UAAD,KACG,EAAG/9F,YAAOQ,kBAELupH,UAAUt9F,UAAYzsB,OACxB4pH,MAAMn9F,QAAQy9F,WAEhBH,UAAUt9F,QAAUzsB,MAGlB,2BAAKgS,MAAO,CAAE5P,SAAU,WAAYpC,YAAOQ,gBACzC,oBAAC,kBAAAw9F,KAAD,UACEh+F,MAAOA,MACPQ,OAAQA,OACRwR,MAAO,CAAE5N,QAAS,QAClBmmH,yBAA0BX,MAAMn9F,QAChC3sB,UAAW8pH,MAAMn9F,QAAQ3sB,UACzBm+F,YAAcC,UACZ,oBAAC,kBAAAssB,aAAD,CACE7+G,IAAKuyF,SAASvyF,IACdi+G,MAAOA,MAAMn9F,QACb8W,OAAQ26D,SAAS36D,OACjB07B,YAAa,EACbwrD,SAAUvsB,SAASv5F,OAClBw5F,U,8ZAAU,CAAD,GAAMD,SAAN,CAAgBhjF,KAAMmQ,MAAM6yE,SAASv5F,WAGnDy5F,SAAU/yE,MAAMxJ,OAChBw8E,iBAAkB,GAClB7sD,SAAUA,SACVv8B,GAAI00G,OAAOl9F,QACXi+F,eAAgB,CAAEr2C,kBACbmpC,WAAa,CAAEmN,cAAet/F,MAAMxJ,OAAS,QAAM/K,KAExD0mG,YACA,2BAAKxrG,MAAO,CAAE5P,SAAU,WAAY4Z,OAAQ,EAAGC,MAAO,KACpD,oBAAC,gBAAD,CAAQ2lB,QAAQ,0BAA0B/C,QAASyrF,aAAnD,mB,uKC1IhB,W,4WAAA,yBACA,+BACA,iEAEA,6DACA,yCACA,yDACA,+DACA,sEACA,4DACA,8B,kFAEA,MAAMM,gBAAkB7oF,0BAAO2e,GAAI;;EAI7B6iD,OAASxhE,0BAAO2e,GAAI;;;;EAMpBoT,KAAO/xB,0BAAO2e,GAAI;;;;EAMlBmqE,MAAQ9oF,0BAAO2e,GAAI;;;;;;;;;EAWnBoqE,QAAU/oF,0BAAO2e,GAAI;;;EAKrB+iB,OAAS1hC,0BAAO2e,GAAI;;EAIpBw8D,YAAcn7E,0BAAO2e,GAAI;;;EAK/B,SAAS5vB,WAAW3zB,OAClB,MAAM,OAAEo3B,OAAF,UAAU+kB,UAAV,QAAqByxE,UAAY,mBAAA3hE,qBACrC,SAAA5jD,aACE,EAAGu/E,aAAeC,0BAChBA,WACI,CACEzwD,OAAQywD,WAAWzwD,OACnB+kB,UAAW0rC,WAAW1rC,UACtByxE,QAAS/lC,WAAW+lC,SAEtB,CAAEx2F,OAAQ,GAAI+kB,eAAWxiC,EAAWi0G,aAASj0G,GACnD,KAIJ,OACE,0DACE,6BAAC,sBAAD,CAAcgjC,UAAQ,IACrBR,WAAayxE,QACZ,6BAACH,gBAAD,KACE,6BAACE,QAAD,KACE,6BAAC5N,YAAD,KACE,6BAACz5C,OAAD,oBACA,6BAAC,6BAAD,CACEnqB,UAAWA,UACXyxE,QAASA,QACTjmC,YAAaxrC,UACb0xE,cAAe,OACfC,aAAel2G,SAGnB,6BAACmoG,YAAD,KACE,6BAACz5C,OAAD,kBACA,6BAAC,6BAAD,CACEnqB,UAAWA,UACXyxE,QAASA,QACTjmC,YAAaimC,QACbC,cAAe,OACfC,aAAel2G,SAGnB,6BAACmoG,YAAD,KACE,6BAACz5C,OAAD,mBAAmB,QAAA++B,iBAAe,QAAA1wC,eAAci5D,QAASzxE,eAG7D,6BAACiqD,OAAD,KACGhvE,OAAOzf,IAAKgyE,GACX,6BAAChzB,KAAD,CAAMnoD,IAAKm7E,EAAE3+D,MACX,6BAAC0iG,MAAD,CACEv5F,MAAQ,4BAA2Bw1D,EAAE3+D,qBACrC0W,QAAS,KACPivD,mBAAUC,KAAKjH,EAAE3+D,QAElB2+D,EAAE3+D,MAEL,6BAAC0iG,MAAD,CACEv5F,MAAQ,4BAA2Bw1D,EAAEzxD,yBACrCwJ,QAAS,KACPivD,mBAAUC,KAAKjH,EAAEzxD,YAElByxD,EAAEzxD,cAOb,6BAAC,oBAAD,oCAMRvE,WAAWkJ,UAAY,aACvBlJ,WAAW6B,cAAgB,G,cAEZ,QAAA6iB,MAAI,kBAAU1kB,a,uKClI7B,0DACA,+BAEA,uDACA,yDACA,+DACA,2D,sdASA,SAASE,iBAAgB,OAAE4F,OAAF,WAAUE,aACjC,MAAMvC,OAASqC,OAAOrC,OAAOsH,MAAM,qBAC7BqvF,aAAe9yF,SAASq4C,kBAA0B,CACtDl8C,cACAm8C,QAAShzE,MAAM8H,YAAY,IAAM,EAAG,IACpCqqE,WAAYnyE,MAAM8H,YAAa2lH,YAAeA,WAAa,EAAG,MAEhE,OACE,oBAAC,cAAD,CAAMhsF,KAAG,GACP,oBAAC,sBAAD,CAAc2a,UAAQ,IACtB,gCACE9nC,MAAO,CAAE0qG,SAAU,EAAG5gG,OAAQ,QAC9BozB,YAAY,sEACZ7pC,MAAOuxB,OAAOrC,OACd2Z,SAAUxwC,MAAM8H,YAAaioC,OAAU3W,WAAW,CAAEvC,OAAQkZ,MAAMtiC,OAAO9F,QAAU,CAACyxB,eAEtF,2BAAK9kB,MAAO,CAAE5P,SAAU,WAAY4Z,OAAQ,EAAGC,MAAO,KAAtD,kBAA4EivG,eAKlFl6F,gBAAgBgJ,UAAY,kBAC5BhJ,gBAAgB2B,cAAgB,CAAE4B,OAAQ,I,cAE3B,QAAAihB,MAAI,kBAAcxkB,kB,uKCvCjC,W,4WAAA,yBACA,+BACA,oCACA,iEAEA,gCACA,uDACA,yDACA,uCACA,sCACA,2CACA,yCACA,yCAGA,yCACA,gC,kqBAEA,MAAMo6F,YAAcrpF,0BAAO2e,GAAI;;;;;;;;EAY/B,SAASzvB,KAAI,OAAE2F,OAAF,WAAUE,aAAqB,qBAC1C,MAAMe,QAAO,0BAAG,gBAAAgpE,0BAAH,4BAAG,iBAAmB5rF,GAC7BqjB,UAAW,cAAAC,eACX8yF,UAAW,cAAAh0F,aAAY,EAAGI,iBAAaA,OAAO4zF,UAC9CC,oBAAqB,SAAA9lH,aAAY8yB,SAASI,0BAAmB,CAACJ,YAE9D,KAAE0E,KAAF,aAAQC,cAAiBrG,OACzB20F,UAAYvuF,KAAKC,cACjBuuF,aAAeD,qBAAH,EAAGA,UAAWn0F,QAGzBq0F,iBAAkBC,sBAAuB,SAAAvsH,UAAgC,CAC9E+b,KAAM,KACNywG,QAAQ,IAIJC,WAAY,SAAApmH,aACf8a,MACCwW,WAAW,CAAEmG,aAAc3c,OAE7B,CAACwW,aAEG+0F,aAAc,SAAArmH,aAClB,CAAC8a,IAAKgR,SACJ,MAAMw6F,QAAU9uF,KAAKzB,QACrBuwF,QAAQxrG,KAAR,iBAAoB0c,KAAK1c,KAAzB,CAA+BgR,cAC/BwF,WAAW,CAAEkG,KAAM8uF,WAErB,CAACh1F,WAAYkG,OAET+uF,WAAY,SAAAvmH,aACf8a,MACC,MAAMwrG,QAAU9uF,KAAKzB,MAAM,EAAGjb,KAAKnD,OAAO6f,KAAKzB,MAAMjb,IAAM,IACrD0rG,QAAUhvF,KAAKnb,OAAS,EAC9BiV,WAAW,CAAEkG,KAAM8uF,QAAS7uF,aAAcA,eAAiB+uF,QAAUA,QAAU,EAAI/uF,gBAErF,CAACA,aAAcnG,WAAYkG,OAEvBivF,QAAS,SAAAzmH,aACb,KACE,MAAM0mH,OAAS,CAAE56F,MAAQ,IAAE0L,KAAKnb,OAAS,GAAKuV,OAAQ,MACtDN,WAAW,cAAD,GAAMF,OAAN,CAAcqG,aAAcD,KAAKnb,OAAQmb,KAAMA,KAAK7f,OAAO,CAAC+uG,aAExE,CAACt1F,OAAQE,WAAYkG,OAEjBmvF,gBAAiB,SAAA3mH,aACpB4xB,SACCN,YAAW,UAAA+G,sBAAqBzG,OAAQR,UAE1C,CAACA,OAAQE,aAEL0B,SAAU,SAAAZ,SAAQ,KAAM,CAAGq0F,cAAQF,oBAAWH,oBAAWC,0BAAgB,CAC7EI,OACAF,UACAH,UACAC,cAKIO,YAAcX,iBAAiBvwG,KAC/B0/C,iBACFwxD,aACFA,YAAYv0F,UAAYA,SACxBu0F,YAAYr6G,WAAakrB,eACxBwuF,iBAAiBE,OAEpB,OACE,6BAAC,cAAD,CAAMxsF,KAAG,GACP,6BAAC,eAAAktF,cAAD,CACEx0F,QAASA,QACTmF,KAAMA,KACNxE,QAASA,QACTyE,aAAcA,aACdyuF,oBAAqBA,sBAEvB,6BAAC,cAAD,CACE15G,MAAO,CACL5P,SAAU,aAEXopH,aACC,6BAAC,eAAA9wD,cAAch8B,SAAf,CAAwBr5B,MAAO,CAAEu1D,gCAC/B,6BAAC,aAAA0xD,uBAAD,CACEC,aAAa,EACbn1F,OAAQo0F,aACR9yF,iBAAkB4yF,mBAClBp9E,SAAUi+E,eACVK,YAAa,OACbnB,SAAUA,SACVt0F,MAAOc,QACP40F,sBAAoB,KAIxB,6BAAC,iBAAAC,gBAAD,CAAiBrB,SAAUA,SAAUt0F,MAAOc,QAASs0F,eAAgBA,iBAEtEvxD,gBAAkB,6BAACwwD,YAAD,QAM3Bn6F,IAAI+I,UAAYjC,gCAChB9G,IAAI0B,cAAgBg6F,iC,cAEL,QAAAn3E,MAAI,kBAAcvkB,M,+KCvIjC,W,4WAAA,yBACA,kCACA,8CACA,oCACA,iEAEA,gCACA,4DACA,6DACA,sDACA,4DACA,+DACA,gCACA,8C,kFAEA,MAAM27F,YAAc7qF,0BAAO2e,GAAI;;;;;;;sBAOT,EAAGirE,iBAAcA,OAASkB,sBAAUC,aAAe;YAC7D,EAAGnB,iBAAcA,OAAU,aAAYkB,sBAAU7mB,UAAc;EAGrE+mB,gBAAkBhrF,0BAAO2e,GAAI;;;;;;EAQ7BssE,gBAAkBjrF,0BAAO2e,GAAI;;;;;;aAMtBh5C,6BAAOklE;;0BAUW,EAAGy+C,kBAAUt0F,YAAOo1F,kCACjD,MAAM7zF,UAAW,cAAAC,gBACV00F,cAAeC,mBAAoB,SAAA/tH,WAAS,GAC7CguH,qBAAsB,SAAA3nH,aAAY,IAAM0nH,kBAAkBD,eAAgB,CAACA,kBAE1E,OAAEtB,QAAUyB,OAAQ,YAAAC,SAAQ,CACjCC,OAAQC,qCAAeC,OACvBJ,KAAM,CAAClyG,KAAMuyG,WACX,GAAIA,QAAQC,UAAUrC,WAAaA,SACjC,MAAO,CACLt0F,cAIN42F,QAAS,CAACF,QAAStwH,SAAV,CACPwuH,OAAQ8B,QAAQ9B,aAIdiC,eAAgB,SAAApoH,aACpB,EAAGyZ,UAAM2X,cAAQi3F,kCACf,MAAM,mBAAEzxF,mBAAF,mBAAsBC,qBAAuB,UAAAyxF,mBAAkB7uG,KAAM,KAAM,CAC/E2X,cACAi3F,gCAGuC,iBAA9BzxF,mBAAmBhF,SAC5B+0F,eAAe/vF,mBAAmBhF,QAClCkB,UAAS,UAAAI,kBAAiB2D,sBAE5B3rB,OAAOq9G,GAAG,OAAQ,QAAS,QAAS,SAAU9uG,OAEhD,CAACqZ,SAAU6zF,iBAGb,OACE,6BAACS,YAAD,CAAa16G,IAAKk7G,KAAMzB,OAAQA,OAAQr3E,YAAU,qBAChD,6BAAC,kBAAD,MACA,6BAACy4E,gBAAD,yBAEE,wCACA,6BAAC,qBAAD,CACE3qH,SAAS,QACTkkD,SAAU6mE,oBACVnzC,OAAQizC,cACRj7G,MAAO,CAAEktC,QAAS,gBAClB,6BAAC8tE,gBAAD,CAAiB14E,YAAU,gBAA3B,gBACA,6BAAC,cAAD,KACE,6BAAC,mBAAD,CAAWs5E,cAAeA,kBAEf,IACd,sC,2EC7GT,8MAAItO,SAAW/1G,OAAOkzD,QAAU,SAAUtxD,QAAU,IAAK,IAAI9M,EAAI,EAAGA,EAAI4Z,UAAU4J,OAAQxjB,IAAK,CAAE,IAAImgH,OAASvmG,UAAU5Z,GAAI,IAAK,IAAIsN,OAAO6yG,OAAcj1G,OAAOg2G,UAAUC,eAAeC,KAAKjB,OAAQ7yG,OAAQR,OAAOQ,KAAO6yG,OAAO7yG,MAAY,OAAOR,QAKvO,mCACd,IAAI,OACF6zB,OAAS,IACPo1C,KACAj3E,MAPN,SAAkCu/C,IAAK3F,MAAQ,IAAI5rC,OAAS,GAAI,IAAK,IAAI9M,KAAKq+C,IAAW3F,KAAKL,QAAQr4C,IAAM,GAAkBkL,OAAOg2G,UAAUC,eAAeC,KAAK/iE,IAAKr+C,KAAc8M,OAAO9M,GAAKq+C,IAAIr+C,IAAM,OAAO8M,OAOrMu0G,CAAyBtrC,KAAM,CAAC,WAE5C,OAAO,6CAAMlpB,cACX,MACAo0D,SAAS,CAAEt/G,MAAO,MAAOQ,OAAQ,KAAMm/G,QAAS,aAAc9qG,KAAM,OAAQ+qG,MAAO,8BAAgCziH,OACnH,6CAAM+tD,cAAc,UAAW,CAAEu3B,GAAI,KAAMC,GAAI,OAAQsrC,GAAI,KAAMC,GAAI,OAAQp5G,KAAM,YACnF,6CAAMq2C,cAAc,OAAQ,CAAE93C,EAAG,mDAAoDyB,KAAM,YAC3F,6CAAMq2C,cAAc,OAAQ,CAAE93C,EAAG,2FAA4F2lF,OAAQ,UAAWC,YAAa,IAAK6mB,cAAe,WACjL,6CAAM30D,cAAc,OAAQ,CAAE93C,EAAG,iFAAkFyB,KAAM,UAAWkkF,OAAQ,UAAWC,YAAa,MACpK,6CAAM9tC,cAAc,OAAQ,CAAE5sD,EAAG,KAAMC,EAAG,IAAKyB,MAAO,KAAMQ,OAAQ,IAAKwtH,GAAI,MAAOn5G,KAAM,UAAWkkF,OAAQ,UAAWC,YAAa,MACrI,6CAAM9tC,cAAc,OAAQ,CAAE6tC,OAAQ,UAAWC,YAAa,IAAK5lF,EAAG,yB,4IC0CnE,SAAuBjW,OAC5B,MAAM,QAAE06B,QAAF,QAAWW,QAAX,KAAoBwE,KAApB,aAA0BC,aAA1B,oBAAwCyuF,qBAAwBvuH,MAEhEm7B,UAAW,cAAAC,eACXhB,YAAa,cAAAF,aAAY,EAAGC,iBAAaA,OAAOC,aAChD,eAAEqjC,iBAAmB,SAAA11D,YAAWw1D,gCAC/B,OAAEixD,OAAF,KAAUzwG,MAAQgzG,UAAW,YAAAb,SAAQ,CAC1CC,OAAQa,6BACRR,QAAUF,UAAD,CACPvyG,KAAMuyG,QAAQC,UACd/B,OAAQ8B,QAAQ9B,WAElByC,QAAS,KAAOxzD,eAChBwyD,KAAM,CAACiB,WAA6BZ,WAElC,GAAIA,QAAQa,UACV,OAEF,MAAM9P,OAAS,CACb3mF,QAASw2F,WAAWx2F,QACpB9lB,SAAUs8G,WAAWt8G,UAEjB5G,OAAS,CACb0sB,iBAEIwE,oBAAqB,UAAAkyF,iCAAgC/P,OAAQrzG,OAAQosB,YAC3Ee,UAAS,UAAAI,kBAAiB2D,wBAU9B,OAPA,SAAA92B,WACE,KACEmmH,oBAAoB,CAAExwG,UAAMywG,iBAE9B,CAACzwG,KAAMywG,OAAQD,sBAIf,6BAAC8C,eAAD,CAAgBnuF,UAAWsrF,QACzB,6BAAC,sBAAD,CAAc9xE,YAAaA,mBAAa40E,2BAAyB,GAC/D,6BAACC,MAAD,CAAOx8G,IAAKg8G,QAAS55E,YAAU,qBAC5BtX,KAAKloB,IAAI,CAACikD,IAAK16D,IACd,6BAAC,qBAAAswH,oBAAD,CACE3jG,SAAUiS,eAAiB5+B,EAC3BsN,IAAKtN,EACLw5B,QAASA,QACT6zF,oBAAqBA,oBACrBlzF,QAASA,QACTo2F,SAAU5xF,KAAKnb,OACf9P,SAAU1T,EACVwwH,SAAU91D,IAAIznC,SAGlB,6BAAC,cAAD,CACEmO,OAAK,EACLimB,MAAI,EACJtmB,SAAS,UACTwC,QAAQ,UACR5vB,MAAO,CACL0nE,WAAY,EACZnmC,OAAQ,UACRu7E,WAAY,gBAEdjwF,QAASrG,QAAQyzF,QACjB,6BAAC,cAAD,CAAU75G,YAAchE,GAAMA,EAAEmwB,wBApH5C,4DACA,O,4WAAA,yBACA,kCACA,oCACA,iEAEA,gCACA,sDACA,+DACA,+CACA,6DACA,yCAOA,gCACA,8C,kFAEA,MAAMiwF,eAAiBzsF,0BAAO2e,GAAI;;;;;;;wBAOV,EAAGrgB,uBAAiBA,UAAY34B,6BAAOolE,MAAQ;;;;;;;;;;EAWjE4hD,MAAQ3sF,0BAAO2e,GAAI;;;;qJCrBlB,SAA6BvjD,OAClC,MAAM,SAAE6tB,SAAF,SAAY4jG,SAAZ,QAAsBp2F,QAAtB,QAA+BX,QAA/B,SAAwCg3F,SAAxC,SAAkD98G,UAAa5U,MAE/D+U,KAAM,SAAA6lC,QAAO,MACbzf,UAAW,cAAAC,eACXhB,YAAa,cAAAF,aAAY,EAAGC,iBAAaA,OAAOC,cAC/C,WAAEw3F,YAAcC,UAAW,YAAAC,SAAQ,CACxC/zG,KAAM,CAAE+D,KAAMkvG,6BAAet2F,gBAAS9lB,mBACtC47G,QAAUF,UAAD,CACPsB,WAAYtB,QAAQsB,mBAIjB,OAAEpD,QAAUuC,UAAW,YAAAb,SAAQ,CACpCC,OAAQa,6BACRR,QAAUF,UAAD,CACP9B,OAAQ8B,QAAQ9B,WAElByB,KAAM,CAACiB,WAAYZ,WACjB,MAAMjP,OAAS,CACb3mF,QAASw2F,WAAWx2F,QACpB9lB,SAAUs8G,WAAWt8G,UAEjB5G,OAAS,CACb4G,kBACA8lB,iBAEIwE,oBAAqB,UAAAkyF,iCAAgC/P,OAAQrzG,OAAQosB,YAC3Ee,UAAS,UAAAI,kBAAiB2D,wBAI9B2yF,QAAQd,QAAQh8G,MAEhB,MAAMg9G,SAAW,CACfL,kBACA98G,kBACAiZ,kBACA4jG,kBACAp2F,gBACAu2F,sBACAI,SAAUj9G,IACVk9G,OAAQL,WACR1uF,UAAWsrF,QAEb,OAAO,6BAAC,YAAA0D,WAAeH,WAhEzB,W,4WAAA,yBACA,kCACA,oCAEA,gCACA,yCACA,sCACA,iC,iKCwDO,SAAoB/xH,OACzB,MAAM,SAAE4U,SAAF,SAAYiZ,SAAZ,SAAsB4jG,SAAtB,SAAgCC,SAAhC,WAA0CE,WAA1C,QAAsDv2F,QAAtD,SAA+D22F,SAA/D,UAAyE9uF,UAAzE,OAAoF+uF,QAAWjyH,MAE/F+kD,UAAW,SAAAnK,QAA0B,OACpCzmB,MAAOg+F,WAAY,SAAAnwH,UAAiB0vH,UAAY,KAChDU,aAAcC,kBAAmB,SAAArwH,WAAkB,GACpDswH,oBAAqB,SAAAjqH,aAAaioF,IAAO6hC,SAAS7hC,GAAGtiF,OAAO9F,OAAQ,KAEpE,UAAEumH,UAAF,UAAaG,YAAc,SAAAn0F,SAC/B,KAAM,CACJg0F,UAAW,IAAMpzF,QAAQozF,UAAU75G,UACnCg6G,UAAW,IAAMvzF,QAAQuzF,UAAUh6G,YAErC,CAACymB,QAASzmB,WAEN85G,aAAc,SAAArmH,aAAY,IAAMgzB,QAAQqzF,YAAY95G,SAAUuf,OAAQ,CAACkH,QAASzmB,SAAUuf,QAE1Fo+F,YAAa,SAAAlqH,aACjB,KACOwlB,UAGHwkG,iBAAgB,GAEhBxyE,aAAa,KACX,GAAIkF,SAASz1B,QAAS,CACpB,MAAMkjG,QAA4BztE,SAASz1B,QAC3CkjG,QAAQxhF,QACRwhF,QAAQ7hF,aARZ89E,aAaJ,CAAC5gG,SAAU4gG,UAAW1pE,WAGlB0tE,iBAAkB,SAAApqH,aAAY,KAClCgqH,iBAAgB,GACZ/gH,SAAS6+B,eACX7+B,SAAS6+B,cAAckB,QAExB,IAEGqhF,iBAAkB,SAAArqH,aACtB,KACEqmH,cACA+D,mBAEF,CAACA,gBAAiB/D,cAGdiE,YAAa,SAAAtqH,aACjB,KACE8pH,SAAST,UAAY,IACrBe,mBAEF,CAACA,gBAAiBf,WAGdr8G,WAAY,SAAAhN,aACfioC,QACmB,WAAdA,MAAM9hC,IACRmkH,aACuB,UAAdriF,MAAM9hC,KACfkkH,mBAGJ,CAACA,gBAAiBC,aAqBpB,OAjBA,SAAAvqH,WACE,KACOylB,UACHwkG,iBAAgB,IAGpB,CAACxkG,YAIH,SAAAzlB,WACE,KACE+pH,SAAST,WAEX,CAACA,WAID,6BAACkB,KAAD,CACEX,OAAQA,OACRL,WAAYA,WACZ/jG,SAAUA,SACVqV,UAAWA,UACXuuF,SAAUA,SACVvpH,MAAOwpH,UAAY,GACnBhwF,QAAS6wF,WACTx9G,IAAKi9G,SACLpwF,WAAW,uBAAGC,mBAAO+5B,IAAK,CAAE,CAAC/5B,mBAAOkgD,QAASl0D,YAC7C,6BAAC,iBAAD,CAASs0B,SAAUiwE,aAAe,GAAKV,UAAY,iBAAkBtvE,UAAU,OAE7E,wCACE,6BAACzL,OAAD,CACEk8E,UAAWT,aACXU,SAAUV,aACVrgF,YAAY,iBACZl9B,MAAOk+G,aACP7qH,MAAOisB,MACP4c,SAAUuhF,mBACVn9G,OAAQu5G,YACRr5G,UAAWA,UACXN,IAAMC,IAAQ+vC,SAASz1B,QAAUta,OAItC6Y,SACC,6BAAC,cAAD,CACEyU,OAAK,EACLimB,MAAI,EACJtmB,SAAS,WACTwC,QAAS2tF,aAAe,eAAiB,aACzCv9G,MAAO,CAAEhS,MAAO,QAChB6+B,QAAS0wF,aAAeM,gBAAkB9D,WACzCwD,aACC,6BAAC,eAAD,CAAWn9G,YAAchE,GAAMA,EAAEmwB,mBAEjC,6BAAC,eAAD,CAAWnsB,YAAchE,GAAMA,EAAEmwB,oBAGnC,OA/LV,4DACA,wDACA,4DACA,O,4WAAA,yBACA,iEACA,6DAEA,6DACA,sDACA,yDAEA,+DACA,8C,kFAaA,MAAMwxF,KAAOhuF,0BAAO2e,IAAI3M,MAAM,EAAG/oB,kBAAU3lB,YAAOupH,kBAAUG,sBAAYQ,0BAAcH,cAAQ/uF,wBAAhE,OAC5BruB,MAAO,CACL2rF,QAASyxB,OAAS,EAAI,EACtBj1B,YAAa40B,YAAc1uF,UAAY34B,6BAAOmvD,MAAQ,cACtDs5D,UAAWpB,WAAc,iCAAkC,OAC3DjsH,gBAAiBkoB,SAAWtjB,6BAAOglE,MAAQqiD,WAAaqB,sBAAaC,gBAAkB,cACvF/gF,SAAUtkB,SACL,uBAA2CluB,KAAKq0C,MAXpC9tC,KAYCgC,OAXb,sBAAUhC,KAAM,CAAEwpC,OAPP,4DAO4Brd,KAR9B,KAQmD,EAWtC,yBAdH,IAesCo/F,SAAW,eACrE93G,IAdR,IAAqBzT,MAgBjB;eApBkB;EAwBhBywC,OAAS/R,0BAAO0B,MAAMsQ,MAAM,EAAGk8E,sBAAH,CAChCj+G,MAAO,CACLs+G,cAAeL,SAAW,MAAQ,UAElC;;EAGEC,aAAe,CAAEptH,gBAAiB,cAAe0iD,QAAS,K,oGCvDhE,IAAIjZ,QAAU,oBAAQ,MAEA,iBAAZA,UAAsBA,QAAU,CAAC,CAACC,OAAOnuC,EAAIkuC,QAAS,MAOhE,IAAIlS,QAAU,CAAC,WAAY,EAAK,KAAM,EAEtC,eAPIuK,EAQJ,gBAAqB9tB,GAER,oBAAQ,GAAR,CAAsEy1B,QAASlS,SAEzFkS,QAAQE,SAAQD,OAAOE,QAAUH,QAAQE,S,mDCjB5CC,QAAUF,OAAOE,QAAU,oBAAQ,GAAR,EAAkE,IAKrFtG,KAAK,CAACoG,OAAOnuC,EAAI,omCAAumC,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,8EAA8E,MAAQ,GAAG,SAAW,wVAAwV,KAAO,kBAAkB,eAAiB,CAAC,g5BAAi5B,WAAa,MAGjiFquC,QAAQD,OAAS,CAChB,IAAO,4DACP,OAAU,iE,8BCVXD,OAAOE,QAAU,+d,6ICOjB,mCACA,O,4WAAA,yBACA,2EACA,sEACA,0DACA,+BACA,iEAEA,6DACA,8CACA,6DACA,uDACA,8BACA,oEACA,oDACA,yDACA,+DACA,gEACA,gEACA,8C,kqBAEA,MAAM6jF,WAAaxuF,0BAAO2e,GAAI;;;;;EAOxB0H,MAAQrmB,0BAAO2e,GAAI;;;;;EAQnB8vE,YAAc,CAAC,WACfC,WAAa,CACjB,QACA,QACA,kBACA,cACA,aACA,cACA,uBACA,mBACA,mBACA,cACA,aACA,QAGIC,iBAAoBtpH,KACV,MAAPA,KAAuB,KAARA,MAAe6B,MAAMyrC,WAAWttC,MA+BxD,SAAS8pB,mBAAmB/zB,OAAc,uBACxC,MACEy5B,QAAQ,KAAE0G,KAAF,QAAQqzF,QAAR,QAAiBC,QAAjB,QAA0BC,QAA1B,QAAmCC,SADvC,WAEJh6F,YACE35B,MAEEykC,SAAU,SAAAmW,QAAwB,MAClC4Q,gBAAiB,SAAA5Q,QAAwB,MAEzCgC,aAAc,SAAAniB,SAClB,IACE,0DACE,6BAAC,MAAA+1D,KAAD,KACE,6BAAC,cAAD,KACE,6BAAC,cAAD,CAAMxuD,KAAG,EAACntB,MAAO,CAAEqK,SAAU,IAAKs3B,YAAa,IAC7C,6BAAC,oBAAA0b,kBAAD,cACA,6BAAC,oBAAAC,kBAAD,CACEt9C,MAAO0+G,iBAAiBC,SAAW,GAAK,CAAErpH,MAAOI,6BAAOqyG,OACxD10G,MAAOsrH,QACPziF,SAAU,EAAG/iC,iBAAa2rB,WAAW,CAAE65F,QAASxlH,OAAO9F,QACvDw5B,QAAUzwB,GAAMA,EAAE2/B,kBAClBmB,YAAY,UAGhB,6BAAC,cAAD,CAAM/P,KAAG,EAACntB,MAAO,CAAEqK,SAAU,MAC3B,6BAAC,oBAAAgzC,kBAAD,cACA,6BAAC,oBAAAC,kBAAD,CACEt9C,MAAO0+G,iBAAiBE,SAAW,GAAK,CAAEtpH,MAAOI,6BAAOqyG,OACxD10G,MAAOurH,QACP1iF,SAAU,EAAG/iC,iBAAa2rB,WAAW,CAAE85F,QAASzlH,OAAO9F,QACvDw5B,QAAUzwB,GAAMA,EAAE2/B,kBAClBmB,YAAY,YAKpB,6BAAC,MAAAy+C,KAAD,KACE,6BAAC,cAAD,KACE,6BAAC,cAAD,CAAMxuD,KAAG,EAACntB,MAAO,CAAEqK,SAAU,IAAKs3B,YAAa,IAC7C,6BAAC,oBAAA0b,kBAAD,cACA,6BAAC,oBAAAC,kBAAD,CACEt9C,MAAO0+G,iBAAiBG,SAAW,GAAK,CAAEvpH,MAAOI,6BAAOqyG,OACxD10G,MAAOwrH,QACP3iF,SAAU,EAAG/iC,iBAAa2rB,WAAW,CAAE+5F,QAAS1lH,OAAO9F,QACvDw5B,QAAUzwB,GAAMA,EAAE2/B,kBAClBmB,YAAY,UAGhB,6BAAC,cAAD,CAAM/P,KAAG,EAACntB,MAAO,CAAEqK,SAAU,MAC3B,6BAAC,oBAAAgzC,kBAAD,cACA,6BAAC,oBAAAC,kBAAD,CACEt9C,MAAO0+G,iBAAiBI,SAAW,GAAK,CAAExpH,MAAOI,6BAAOqyG,OACxD10G,MAAOyrH,QACP5iF,SAAU,EAAG/iC,iBAAa2rB,WAAW,CAAEg6F,QAAS3lH,OAAO9F,QACvDw5B,QAAUzwB,GAAMA,EAAE2/B,kBAClBmB,YAAY,aAOxB,CAAC0hF,QAASE,QAASH,QAASE,QAAS/5F,aAGjCi6F,mBAAoB,SAAAvrH,aAAawrH,UACrC,MAAMC,OAASn0H,KAAK8D,OAAOowH,SACrBE,OAASp0H,KAAKwyB,OAAO0hG,SACrBj7D,KAAOm7D,OAASD,OACtB,MAAO,CACLrwH,IAAMm1D,KAAoBk7D,OAAgB,IAAPl7D,KAAtBk7D,OAAS,EACtB3hG,IAAMymC,KAAoBm7D,OAAgB,IAAPn7D,KAAtBm7D,OAAS,IAEvB,IAEG3mE,eAAgB,SAAA/kD,aAAY,KAC5Bo8B,QAAQnV,SACV+9B,kBAASC,uBAAuB7oB,QAAQnV,SAEtCmV,QAAQnV,SAAWmV,QAAQnV,QAAQi+B,aAErC9oB,QAAQnV,QAAQi+B,WAAWC,YAAY/oB,QAAQnV,SAC/CmV,QAAQnV,QAAU,OAEnB,KAGH,SAAAlnB,WACE,IACS,KACLglD,iBAGJ,CAACA,gBAGH,MAAMrvC,MAAO,4BAAAigE,0BAAyB79C,KAAKj4B,OACrCkwB,QAAwBra,YAAJ,2BAAIA,KAAMqgC,YAAY,UAAtB,8BAAI,mBAAsBl2C,OAC9C,MAAEisB,MAAF,WAAS6/F,WAAT,WAAqBC,WAArB,MAAiCpuG,MAAQ,GAAzC,OAA6CllB,OAAS,GAAtD,SAA0DL,SAAW,IAAO83B,SAAW,GACvFl1B,MAAO,SAAAu3B,SACX,IACErC,QACI,CACEgkB,SAAU,IACLv2B,MAAMlO,IAAI,CAACg4C,KAAMxsC,MAAP,kBAAqB,UAAAg/E,MAAKxyC,KAAM2jE,YAAhC,CAA6Cl/D,UAAU,EAAM18C,MAAM,QAC7E/W,OAAOgX,IAAI,CAAC3H,MAAOmT,OAAQ,UAAAg/E,MAAKnyF,MAAOsjH,gBACvChzH,SAASqX,IAAI,CAACuU,QAAS/I,MAAV,kBACX,UAAAg/E,MAAKj2E,QAASonG,YADH,CAEdpwH,KAAMgpB,QAAQhpB,KAAK,GAAKgpB,QAAQhpB,KAAK8c,OAAO,CAACkM,QAAQhpB,KAAK,KAAOgpB,QAAQhpB,KACzEwU,MAAM,EACNw8C,YAAa,EACbE,UAAU,EACV8/D,YAAa,MAEfhqE,KAAK,CAAC7iD,EAAGtH,KAAOA,EAAEo0H,OAAS,IAAM9sH,EAAE8sH,OAAS,KAEhD,CAAE/3E,SAAU,IAClB,CAACv2B,MAAOuS,QAASz3B,OAAQL,YAGrB,MAAE8zH,MAAF,MAASC,QAAU,SAAA55F,SACvB,KAAM,CACJ25F,OAAO,UAAAnuG,SAAQ/iB,KAAKk5C,SAASzkC,IAAK+4C,SAAaA,QAAQxtD,KAAOwtD,QAAQxtD,KAAKyU,IAAI,EAAGxW,OAAQA,GAAK,KAC/FkzH,OAAO,UAAApuG,SAAQ/iB,KAAKk5C,SAASzkC,IAAK+4C,SAAaA,QAAQxtD,KAAOwtD,QAAQxtD,KAAKyU,IAAI,EAAGvW,OAAQA,GAAK,OAEjG,CAAC8B,KAAKk5C,WAGFlf,SAAU,SAAAzC,SACd,KAAM,CACJtG,MAAO,CAAE4tB,UAAW5tB,MAAOjuB,KAAMiuB,OACjCq4B,OAAQ,CACNH,MAAO,CACL,CACEioE,WAAY,CAAEvyE,UAAWiyE,WAAYO,YAAaP,YAClD7kE,MAAO,CACL1rD,IAAK8zC,WAAWm8E,SAAWn8E,WAAWm8E,SAAWE,kBAAkBS,OAAO5wH,IAC1E0uB,IAAKolB,WAAWo8E,SAAWp8E,WAAWo8E,SAAWC,kBAAkBS,OAAOliG,OAIhFs8B,MAAO,CACL,CACE6lE,WAAY,CAAEvyE,UAAWkyE,WAAYM,YAAaN,YAClD9kE,MAAO,CACL1rD,IAAK8zC,WAAWi8E,SAAWj8E,WAAWi8E,SAAWI,kBAAkBQ,OAAO3wH,IAC1E0uB,IAAKolB,WAAWk8E,SAAWl8E,WAAWk8E,SAAWG,kBAAkBQ,OAAOjiG,QAKlFhoB,MAAOI,6BAAOu4E,KACdvzB,UAAW,CAAEC,SAAU,GACvBE,OAAQ,CAAE3N,SAAS,GACnByyE,IAAK,CAAEhzF,SAAS,GAChBjvB,KAAM,CAAEivB,SAAS,GACjBktB,QAAS,KAEX,CAAC0lE,MAAOC,MAAOT,kBAAmBH,QAASE,QAASH,QAASE,QAASv/F,MAAO8/F,WAAYD,aAGrF30G,aAAc,SAAAhX,aAClBM,cACE,MAAM+kD,sBAAwBlC,eAAel8B,QAC7C,IAAKo+B,wBAA0BA,sBAAsBpyC,OAEnD,YADA8xC,gBAGF,MAAM,OAAE9xC,QAAWoyC,sBACbO,WAAa3yC,OAAO4yC,wBACpBumE,kBAAoBnkF,MAAMtiC,SAAWsN,OAC3C,GACEg1B,MAAM6d,MAAQF,WAAW9kD,MACzBmnC,MAAM6d,MAAQF,WAAWnvC,OACzBwxB,MAAM8d,MAAQH,WAAW7+C,KACzBkhC,MAAM8d,MAAQH,WAAWpvC,SACxB41G,kBAGD,YADArnE,gBAIF,MAAMkB,qBAAuBZ,sBAAsBa,kBAAkBje,OACrE,IAAKge,eAEH,YADAlB,gBAGF,IAAIsnE,iBAAkBC,aACtB,kBAA0CzxH,KAAKk5C,SAAU,OAA5Cl5C,KAAM0xH,WAAR,MAAoBzxF,OAA0B,KACjD0xF,UAAYD,WAAWh/E,KAC1Bk/E,YACCA,WAAW3zH,IAAMmtD,eAAeprD,KAAK/B,GAAK2sD,OAAOgnE,WAAW1zH,KAAO0sD,OAAOQ,eAAeprD,KAAK9B,IAElG,GAAIyzH,UAAW,CACbH,iBAAmBG,UACnBF,aAAexxF,MACf,OAGJ,IAAKuxF,iBAEH,YADAtnE,gBAIG3oB,QAAQnV,UACXmV,QAAQnV,QAAUhe,SAASy8C,cAAc,OACrCzyC,OAAOiyC,YACTjyC,OAAOiyC,WAAWS,YAAYvpB,QAAQnV,UAI1C,MAAMylG,eAAiBtwF,QAAQnV,QAC/B,GAAIylG,eAAgB,CAClB,IAAI5xF,MAAQwxF,aAAkBA,aAAF,KAAqB,GACjDxxF,OAAU,KAAG,UAAA0xB,OAAM6/D,iBAAiBvzH,EAAG,QAAO,UAAA0zD,OAAM6/D,iBAAiBtzH,EAAG,MACxEisD,kBAAS14C,OACP,oCACEitB,UAAWozF,uBAAcvwF,QACzB5vB,MAAO,CAAE5P,SAAU,WAAYkE,KAAMmlD,eAAe3gD,KAAKxM,EAAGiO,IAAKk/C,eAAe3gD,KAAKvM,IACpF+hC,OAEH4xF,kBAIN,CAAC7xH,KAAKk5C,SAAUgR,gBAGZ6nE,cAAgBt0H,OAAO+jB,SAAWmB,MAAMnB,SAAWpkB,SAASokB,OAElE,OACE,6BAAC0uG,WAAD,KACE,6BAAC,sBAAD,CAAc12E,YAAaA,mBAAaE,YAAaA,aACnD,6BAAC,0BAAD,CACEzc,KAAMA,KAAKj4B,MACX6oC,SAAWwE,UAAa5b,WAAW,CAAEwG,KAAM,CAAEj4B,MAAOqtC,YACpDlD,WAAY,CAAEhvC,OAAQ,QACtB88C,WAAYkzE,YACZthF,YAAY,uDACZH,UAAQ,KAGVxZ,QAEE68F,aACF,6BAAC,oBAAD,+DAEA,6BAAChqE,MAAD,KACE,6BAAC,kCAAD,KACG,EAAGpoD,YAAOQ,iBACT,6BAAC,sBAAD,CACE0R,IAAKy2C,eACL1pC,KAAK,UACLjf,MAAOA,MACPQ,OAAQA,OACRmL,IAAM,GAAE3L,SAASQ,SACjB65B,QAASA,QACTh6B,KAAMA,QAIZ,6BAAC,6BAAD,CAAgBguD,SAAO,EAACj8C,YAAaoK,YAAanK,UAAWmK,YAAaA,YAAaA,eAlBzF,6BAAC,oBAAD,kCAyBR0U,mBAAmB8I,UAAY,qBAC/B9I,mBAAmByB,cAAgB,CAAE2K,KAAM,CAAEj4B,MAAO,K,cAErC,QAAAmwC,MAAI,kBAActkB,qB,wDC1WjCsb,OAAOE,QAAU,g0F,2JCsBV,SAA6C2lF,eAA4CC,YAC9F,SAASC,4BAA4Bp1H,OACnC,MAAM,aAAEq1H,cAAgCr1H,MAAfs1H,W,mkBAAzB,CAAwCt1H,MAAxC,mBACOo3B,OAAQm+F,WAAah1H,MAAMyB,SAAmBmzH,YAC/CK,0BAA4Bj1H,MAAM8H,YAAaotH,YACnDF,WAAU,UAAAztF,MAAK2tF,UAAUz1G,OAAOm1G,YAAc,OAC7C,IAKG1tC,MAAQlnF,MAAMq6C,OAAO,IACrB86E,cAAgBz6F,SAASq4C,kBAAkB,CAC/Cl8C,cACAm8C,QAAShzE,MAAM8H,YACb,KACEo/E,MAAMn4D,QAAU,GACT3S,KAAK0pG,OAEd,CAAC5+B,QAEH/U,WAAYnyE,MAAM8H,YAChB,CAACmwE,KAAMpgD,WACLqvD,MAAMn4D,QAAQ8I,QAAQ9B,OAASmxD,MAAMn4D,QAAQ8I,QAAQ9B,QAAU,GAC/DmxD,MAAMn4D,QAAQ8I,QAAQ9B,OAAO2S,KAAK7Q,SAC3BogD,MAET,CAACiP,UAICD,SAAU,SAAAnqC,mBAAkB,CAACq4E,gBAAgB,GAC7CC,YAAcluC,MAAMn4D,QAG1B,OAFAm4D,MAAMn4D,QAAU,GAGd,oBAAC4lG,eAAD,YACMI,WADN,CAEEvgH,IAAKsgH,aACL5tC,MAAOkuC,YACPjuC,iBAAkB8tC,0BAClBhuC,QAASA,WAKf,OAAO,iCACLjnF,MAAM0iF,WAAW,CAACjjF,MAAO+U,MAChB,oBAACqgH,4BAAD,YAAiCp1H,MAAjC,CAAwCq1H,aAActgH,QAE/DmgH,iBAhEJ,I,IAAA,uB,IAAA,4B,iCACA,+BACA,sDAEA,2DAEA,gC,4qBCdA7lF,OAAOE,QAAU,q+I,sICiHF,UAAgB,YAC7BtgC,YAD6B,SAE7B5O,SAF6B,QAG7BmnF,QAH6B,YAI7BG,YAJ6B,WAK7BlsE,WAL6B,kBAM7BkiD,kBAN6B,SAO7B9mC,SAP6B,MAQ7B4wD,MAR6B,YAS7B/qC,YAT6B,UAU7BorC,UAV6B,cAW7BW,cAX6B,oBAY7BhvE,oBAZ6B,eAa7Bi1D,eAb6B,WAc7B/0C,WAd6B,OAe7BvC,OAf6B,WAgB7B0mC,WAhB6B,WAiB7BF,WAjB6B,iBAkB7B8pB,iBAlB6B,OAmB7BjuD,OACAA,QAAQ,wBACNm8F,wBADM,YAENj/F,YAFM,aAGNC,aAHM,wBAINi4D,wBAJM,eAKNgnC,eALM,wBAMN/+F,wBANM,UAONC,UAPM,0BAQNw4D,0BAA4B,OARtB,cASNumC,cATM,oBAUN7+F,oBAVM,iBAWN4rB,iBAAmBE,2CAAoBK,SAASl7C,MAX1C,cAYN8uB,iBAGF,MAAOib,WAAYk+B,gBAAiB,SAAAnuE,UAAS,IACvC+zH,cAAe,SAAAn7E,WACf,sBAAEjX,wBAA0B,wCAC5B,gBAAElM,gBAAF,mBAAmB0N,qBAAuB,kCACzCxe,MAAOqvG,WAAY,SAAAh0H,WAAS,IAC5BquE,cAAeD,mBAAoB,SAAApuE,WAAkB,IACrDstF,eAAgB2mC,oBAAqB,SAAAj0H,UAAS,IAAM,IAAIk0H,gCACxDC,YAAaC,iBAAkB,SAAAp0H,UAAsB,CAC1D+pE,aAAc,OACdE,cAAe,CAAEx0D,WAAOkC,EAAW4K,SAAK5K,MAEnC08G,oBAAqBvvE,yBAA0B,SAAA9kD,eAAiB2X,GAEjE28G,iBAAkB,cAAAC,kBAClB,eAAElpD,eAAF,WAAkBjlB,WAAlB,qBAA8BmlB,qBAA9B,kBAAoDC,kBAApD,mBAAuEF,oBAAuBgpD,iBAE7F1+G,EAAGi0C,cAAe,SAAA2qE,YAAYr1H,GAAMA,EAAI,EAAG,GAC5Cs1H,gBAAiB,SAAA77E,QAAuB,OACvC87E,eAAgBC,oBAAqB,SAAA30H,eAA0B2X,IAC/Di9G,oBAAqBC,yBAA0B,SAAA70H,eAA+B2X,GAC/Ek9C,eAAiB+/D,qBAAuBA,oBAAoB//D,gBAElE,SAAA9S,iBACE,KACE,IAAK8S,eACH,OAEF,MAAM8H,oBAAqB,4BAAAm4D,2CAA0CjgE,eAAgBlzB,uBACjFg7B,oBACFx5B,mBAAmBw5B,qBAIvB,CAAC9H,iBAIH,MAAM,aAAEkgE,aAAF,kBAAgBC,oBAAsB,SAAAv8F,SAC1C,KAAM,CACJs8F,aAAc,IAAIE,sBAClBD,kBAAmB,IAAIE,6BAEzB,KAIF,SAAAz8F,SACE,KACEs8F,aAAaI,iBAAiBtrE,cAEhC,CAACkrE,aAAclrE,cAGjB,MAAM,gBACJwU,gBADI,qCAEJ+2D,qCAFI,4BAGJC,4BAHI,qBAIJl3D,uBACE,SAAA1lC,SACF,KAAM,CACJ48F,4BAA6B,IAAIl1H,IAC/BiK,OAAO06B,QAAO,cAAAvU,kBAAiBE,gBAAgBuB,oBAAoBkB,6BAErEmrC,iBAAiB,cAAA9tC,kBACd+3C,uBACAt2C,oBAAoBk6D,sBACvBkpC,sCAAsC,cAAA7kG,kBACnC+3C,uBACAt2C,oBAAoBsjG,0CACvBn3D,sBAAsB,cAAA5tC,kBACnB+3C,uBACAt2C,oBAAoBujG,uBAEzB,KAGI,2BAAEr3D,2BAA4B+D,iBAAkB7D,wBAA0B,6CAAiC,CAC/G22D,0BACAK,0EACAx5D,wBAII+xC,gBAAiB,SAAAr0D,gBAAelkB,QAGhCkpC,iBAAkB,SAAA7lC,SACtB,IAAMk1E,eAAejiF,OAAQ4I,OAAU+gG,4BAA4BzkH,IAAI0jB,MAAM4B,WAC7E,CAACy3E,eAAgB0nB,+BAGb,QACJj+D,QADI,2BAEJ+I,2BAFI,+BAGJU,+BAHI,4BAIJhB,4BAJI,2BAKJ4C,2BALI,iBAMJte,iBANI,aAOJua,aAPI,iBAQJuD,iBARI,0BASJtC,0BATI,mBAUJC,mBAVI,oBAWJ6D,oBAXI,wBAYJhf,wBAZI,0BAaJC,0BAbI,uBAcJoc,uBAdI,kBAeJnc,kBAfI,mBAgBJC,qBACE,yBAAa,CACfsZ,sDACAvpC,wBACAwpC,0CACAvpC,0BACAqb,sBACAnb,wBAAyBA,yBAA2B,GACpDgmB,eAAgBwjB,gBAChB3mC,sBACAymC,4CACAvd,kCACA7rB,4BACAqpC,mCAGF,SAAAj4D,WAAU,IAAMs/E,iBAAiB9lB,oBAAqB,CAACA,mBAAoB8lB,mBAC3E,MAAM,SAAE8vC,WAAa,gCAEflpD,QAAS,SAAA7zC,SACb,KAKE,GAHI+sD,SACFuvC,aAAaU,SAEVhwC,MACH,OAEF,MAAMiwC,SAAW95D,WAAWh2B,gBAC1B/Q,WAAY,cAAAtE,kBAAiBE,gBAAgBuB,oBAAoBiF,oBACjEnhB,GAEFi/G,aAAaY,YAAYH,UACzBT,aAAaa,cAAch6D,WAAY85D,UACvCX,aAAac,oBAAoBhC,gBACjCkB,aAAae,6BAA6Bn2D,2BAC1Co1D,aAAagB,iBAAiB/gG,eAG9B,MAAMukF,cAAe,aAAAp9D,mBAAkB/mB,QACjCwwC,gBAAiB,sBAAUhG,mBAAqB52C,MAASuwF,aAAavwF,OAY5E,OAXA+rG,aAAaxB,UAAU3tD,gBAEvBmvD,aAAa5xF,mBAAmB1N,iBAChCs/F,aAAaiB,SAASvwC,OACtBsvC,aAAakB,eAAetwC,aAC5BovC,aAAapiH,SAGbqiH,kBAAkBY,cAAch6D,WAAY85D,UAC5CV,kBAAkBkB,sBAAsBv2D,0BAA0B,QAAU,IAErE+1D,UAET,CACElwC,QACAC,MACA7pB,WACA/mC,SACAkgG,aACAS,SACA3B,eACAl0D,0BACA3qC,cACAI,OACAwqC,mBACAnqC,gBACAkwD,YACAqvC,oBAIEmB,oBAAqB,SAAA9vH,aACzB,CAAC+vH,UAAsB9nC,GAAgBp3E,QACrCo2E,eAAe8oC,WAAW9nC,GAAIp3E,MAC9B2yC,eAEF,CAACyjC,iBAGGv4B,WAAY,SAAAt8B,SAAQ,IAAmC,SAA7B07F,YAAYpqD,cAA2B2qD,iBAAmB2B,+BAAkB,CAC1G3B,eACAP,YAAYpqD,eAGRqc,mBAAoB,SAAAxtC,QAAO,CAC/B3rC,wBACA0X,YACA+vG,8BACAyB,sCACA9nD,4BACA12C,sBACAi9F,wCACAx/F,cACAH,sBAAuBA,oBACvB8/B,sBAEFqxB,kBAAkB94D,QAAU,CAC1BrgB,wBACA0X,YACA+vG,8BACAyB,sCACA9nD,4BACA12C,sBACAi9F,wCACAx/F,cACAH,sBAAuBA,oBACvB8/B,qBAGF,MAAMuhE,aAAc,SAAAjwH,aAAY,CAAC+vH,UAAsB9nC,GAAgBp3E,QACrE,IAAKA,KACH,OAEF,MACEw9G,eAAgB6B,sBAChBJ,mBAAoBK,2BAClBpwC,kBAAkB94D,QAEhBmpG,iBAAmBhC,eAAennG,SAAWmnG,eAAennG,QAAQ8oG,WACpE9rD,cAAgBmqD,eAAennG,SAAWmnG,eAAennG,QAAQg9C,cACvE,GAAImsD,kBAAoBnsD,cACtB,OAAOmsD,iBAAiBnoC,GAAIp3E,MACnBq/G,wBAA0BF,gCACnCG,0BAA0BJ,UAAW9nC,GAAIp3E,OAE1C,KAEG,QACJwoB,QADI,uBAEJg3F,uBAFI,cAGJt5G,cAHI,qBAIJu5G,qBAJI,YAKJ1jH,YALI,YAMJoK,YANI,UAOJnK,UAPI,sBAQJ8hD,sBARI,eASJozC,eATI,cAUJ/a,cAVI,iBAWJupC,iBAXI,YAYJC,cACE,SAAAp+F,SACF,KACS,CACLiH,QAAS,CAAC4uD,GAAgBp3E,QAExB,GAAIkvE,kBAAkB94D,QAAQynC,UAC5B,OAEF,MAAMmzC,gBAAmBhxF,MAAQA,KAAK7B,SAAY,GAC5C8yF,gBAAkB,CAAEn5F,QAASs/E,GAAGt/E,QAASD,QAASu/E,GAAGv/E,SAC5B,IAA3Bm5F,gBAAgBxlF,OAClBmyG,4BAAuBl9G,GACa,IAA3BuwF,gBAAgBxlF,OAEzBmyG,uBAAuB,CAAEhgE,eAAgBqzC,gBAAgB,GAAIA,gCAAiBC,kCAG9E0sB,uBAAuB,CAAEhgE,oBAAgBl9C,EAAWuwF,gCAAiBC,mCAGzEuuB,uBAAyBpoC,KACvB,IAAKylC,aAAazmG,QAChB,OAEF,MAAMthB,OAAWsiF,GAAGtiF,OAEhB+nH,aAAazmG,QAAQwpG,SAAS9qH,SAChCoiE,kBAAiB,IAGrBhxD,cAAe,CAACkxE,GAAgBp3E,OAAyBo/G,YAAY,gBAAiBhoC,GAAIp3E,MAC1Fy/G,qBAAuBroC,KACjBylC,aAAazmG,SACfymG,aAAazmG,QAAQ0hB,SAGzB/7B,YAAa,CAACq7E,GAAgBp3E,OAAyBo/G,YAAY,cAAehoC,GAAIp3E,MACtFmG,YAAa,CAACixE,GAAgBp3E,OAAyBo/G,YAAY,cAAehoC,GAAIp3E,MACtFhE,UAAW,CAACo7E,GAAgBp3E,OAAyBo/G,YAAY,YAAahoC,GAAIp3E,MAClF89C,sBAAuB,IAAM6/D,4BAAuBl9G,GACpDywF,eAAiB2uB,aACflC,uBAAuB,cAAD,GAAMzuC,kBAAkB94D,QAAQsnG,oBAAhC,CAAqD//D,eAAgBkiE,eAC7F1pC,cAAgB/uF,UAAwB21H,kBAAkB,IAAIC,8BAAe51H,WAC7Eu4H,YAAa,IAAM7C,UAAU5tC,kBAAkB94D,QAAQ3I,OACvDiyG,iBAAkB,KAChB,MAAQ3pH,YAAayuD,mBAAoB/jC,WAAYq/F,mBAAsB5wC,kBAAkB94D,QAC7F0pG,kBAAkB,CAAE/pH,YAAa,cAAF,GAAOyuD,mBAAP,CAA2B9wD,aAAc8wD,mBAAmB9wD,gBACvF6pH,eAAennG,SAAWouC,mBAAmB9wD,aAC/C6pH,eAAennG,QAAQuW,WAK/B,CAACyyF,cAGGr3F,iBAAkB,SAAAxG,SACtB,KACE,MAAM6gE,SAA0D,CAC9D,EAAK,KACHs9B,oBAEFt3F,OAASrwB,IACPA,EAAEmwB,iBACFu1F,kBAAkB,MAClBL,gBAAgBtoD,sBAAqB,GACjC18D,SAAS6+B,eAAiB7+B,SAAS6+B,gBAAkB4lF,aAAazmG,SACpEhe,SAAS6+B,cAAckB,QAG3Bs4C,EAAI14E,IACFA,EAAEmwB,iBAEErK,UACF4C,WAAW,CAAE5C,WAAW,GAAS,CAAEqG,iBAAiB,IAGtDgzC,kBAAkBC,gBAItBirB,EAAcrqF,IACZ,GAAIA,EAAEgoH,SAAWhoH,EAAE6tB,QAAS,CAG1B,GAFA7tB,EAAEmwB,iBACFk1F,gBAAgBtoD,sBAAqB,IAChCsoD,gBAAgBnoD,iBAAmBmoD,gBAAgBnoD,eAAe7+C,QACrE,OAEFgnG,gBAAgBnoD,eAAe7+C,QAAQqhB,YAG3C,OAAO2qD,UAET,CAACvkE,UAAW4C,WAAY28F,gBAAiBjmD,cAAeuoD,mBAGpDM,iBAAkB,SAAAz+F,SAAQ,IAAMhf,WAAWy9G,gBAAgBl5G,OAAO,CAAC+2G,aAAcC,oBAAqB,CAC1Gv7G,WAAWy9G,gBACXnC,aACAC,oBAGImC,WAAapiE,UAAY,YAAc,IAEvC,aAAEqiE,aAAF,oBAAgBC,sBAAwB,SAAA5+F,SAC5C,KAAM,CACJ2+F,cAAc,cAAA7mG,kBAAiBE,gBAAgBuB,oBAAoBolG,aACnEC,oBAAqB,CAAEC,YAAY,sBAAAC,sBAAuB,SAAW,aAEvE,IAGIC,eAAgB,SAAAl+E,gBAAey7E,aAAa0C,YAC5CC,eAAgB,SAAAp+E,gBAAeqmB,0BAA0B,cAAgB,IACzEg4D,YAAa,SAAAl/F,SACjB,IACE2+F,cACE,6BAACA,aAAD,CACE39G,WAAYi+G,cACZE,MAAOJ,cACP7yG,MAAOA,MACP/Z,cAAeqC,YAAYrC,cAGjC,CAACwsH,aAAcnqH,YAAYrC,YAAa+Z,MAAO+yG,cAAeF,gBAGhE,OACE,oCACEzkH,IAAKghH,aACLr0F,QAASg3F,uBACT9jH,UAAW,EACXgtB,UAAWC,sBAAOuW,UAClBvjC,MAAO,CAAEwvB,OAAQ80F,YACjBhiF,YAAU,gBACV,6BAAC,qBAAD,CAAalW,gBAAiBA,kBAC9B,6BAAC,sBAAD,CACE0b,UAAQ,EACRD,YAAaA,YACbE,YACE,0DACE,6BAAC,MAAA4zC,KAAD,CACE/rD,QAAQ,2GACRwxB,KAAM4/D,eAAiB,6BAAC,wBAAD,MAAyB,6BAAC,8BAAD,MAChDn0F,QAAS,IAAM/H,WAAW,CAAEk8F,gBAAiBA,kBAH/C,mBAMA,6BAAC,MAAArlC,KAAD,CACE/rD,QAAQ,2DACRwxB,KAAM2/D,wBAA0B,6BAAC,wBAAD,MAAyB,6BAAC,8BAAD,MACzDl0F,QAAS,IAAM/H,WAAW,CAAEi8F,yBAA0BA,2BAHxD,2BASN,oCAAK/gH,MAAK,iBAAOwkH,oBAAP,CAA4Bp0H,SAAU,WAAYpC,MAAO,OAAQQ,OAAQ,UAChF0yH,aAAazmG,SACZ,6BAAC,mBAAD,CACE4wC,2BAA4BA,2BAC5BvpC,YAAaA,YACbs5C,gBAAiB8lD,aAAazmG,QAAQmiB,aACtCy+B,eAAgB6lD,aAAazmG,QAAQuqG,YACrCjjG,aAAcA,aACdirC,4BAA6BA,4BAC7B4C,2BAA4BA,2BAC5B5B,+BAAgCA,+BAChC1c,iBAAkBA,iBAClBwyE,qBAAsBA,qBACtBlyE,wBAAyBA,wBACzBC,0BAA2BA,0BAC3Boc,uBAAwBA,uBACxBnc,kBAAmBA,kBACnBC,mBAAoBA,mBACpB/D,iBAAkBA,iBAClB9rB,UAAWA,UACX2pC,aAAcA,aACd/mC,WAAYA,WACZwoC,2BAA4BA,2BAC5B8B,iBAAkBA,iBAClBnd,uBAAwBA,uBACxBspB,iBAAkBA,iBAClBC,cAAeA,cACfp+B,WAAYA,WACZk+B,cAAeA,cACf/W,QAASA,QACTqM,oBAAqBA,sBAGxB4wD,qBACC,6BAAC,4BAAD,CACEA,oBAAqBA,oBACrBlwE,iBAAkBA,iBAClBW,uBAAwBA,uBACxBgzE,oBACE/C,aAAagD,WAAW1D,oBAAoBrrG,OAC5C+rG,aAAagD,WAAW1D,oBAAoBrrG,MAAMgvG,cAAc,GAElErgG,WAAYA,WACZ3C,cAAeA,iBAIrB,oCAAK4K,UAAWC,sBAAOo4F,OACrB,6BAAC,eAAD,CACEzrH,IAAM,IAAE45E,kBAAkB94D,QAAQ2H,oBAAsB,SAAW,cACnE2+F,0BAA2BA,wBAC3B3mH,YAAaA,YACb64E,YAAaA,UACboxC,gBAAiBA,gBACjBz/G,oBAAqBA,oBACrBioB,QAASA,QACTtiB,cAAeA,cACfnK,YAAaA,YACboK,YAAaA,YACbnK,UAAWA,UACXm4D,eAAgBA,eAChBjlB,WAAYA,WACZmlB,qBAAsBA,qBACtBC,kBAAmBA,kBACnBF,mBAAoBA,oBACnBqsD,WACAt5H,SACD,6BAAC,eAAA65H,aAAD,KAAe5qC,eAAehvF,UAC9B,oCAAKuU,MAAOwkH,qBACV,6BAAC,uBAAD,UACEpqH,YAAaA,YACb0X,MAAOA,MACP+vG,eAAgBA,eAChB3/D,UAAWA,UACX4G,kBAAmBA,kBACnB9mC,SAAUA,SACVigC,gBAAiBD,gBAAkBA,eAAe7+C,QAAU6+C,eAAe7+C,OAAO8+C,gBAClFgxB,UAAWA,UACXquC,YAAaA,YACbM,eAAgBA,eAChBhuC,cAAeA,cACfhvE,oBAAqBA,oBACrBwd,sBAAuBA,oBACvB+/B,sBAAuBA,sBACvB0X,eAAgBA,eAChB0gB,oBAAqBunC,kBACrBtnC,cAAeA,cACf8qC,mBAAoBvB,iBACpBwB,cAAevB,YACfvpC,eAAgBA,eAChB31D,WAAYA,WACZk9B,eAAgBA,eAChB04B,0BAA2BA,0BAC3B6mC,eAAgBA,eAChBN,cAAeA,cACfh4D,WAAYA,WACZF,WAAYA,WACZ0Q,OAAQA,QACJgoD,mBAGPM,qBACCA,oBAAoB1sB,gBAAgBxlF,OAAS,IAC5CkyG,oBAAoB//D,gBACnB,6BAAC,cAAAwjE,uBAAD,CACElwB,gBAAiBysB,oBAAoBzsB,gBACrCC,eAAgBA,eAChBF,gBAAiB0sB,oBAAoB1sB,mBAG1Cz0F,MA9oBX,4EACA,kEACA,O,4WAAA,yBAUA,wCAUA,gEACA,8DACA,8BACA,+DACA,4DACA,sEACA,oCACA,oEAGA,eADA,kDACA,2BAEA,eADA,kDACA,2BACA,4EACA,gEACA,iEACA,gEACA,sCACA,oDAIA,sEACA,6DACA,iDACA,oFAEA,oBADA,kDACA,mDACA,yDAIA,QADA,iDACA,0BACA,6CACA,oC,kjCCvBe,WACb,MAAM3N,SAAU,SAAAC,YAAiCuP,sCAC3CgjH,aAAc,SAAA1/E,QAAO,GAE3B,GADA0/E,YAAYhrG,QAAUgrG,YAAYhrG,QAAU,EACxCxnB,QAAQ+R,gBAAgBnW,KAAM,CAChC,MAAM,MAAE62H,OAAUzyH,QAAQ+R,gBAAgBnW,MAxB9C,SAAkB62H,OAChB,GAAIA,MAAMC,YAAc,IACtB,MAAM,IAAIr0H,MAAO,mDAAkDo0H,MAAMC,aAE3E,GAAID,MAAME,cAAgB,IACxB,MAAM,IAAIt0H,MAAO,qDAAoDo0H,MAAME,eAE7E,GAAIF,MAAMG,aAAe,IACvB,MAAM,IAAIv0H,MAAO,qDAAoDo0H,MAAMG,cAI7E,GAAIH,MAAMI,YAAc,IACtB,MAAM,IAAIx0H,MAAO,mDAAkDo0H,MAAMI,aAYzEttB,CAASktB,OACT,MAAMK,aAAeL,MAAMM,sBAAN,SAA6CjuD,QAAQ,GACpEkuD,YAAcP,MAAMQ,qBAAN,SAA4CnuD,QAAQ,GACxE,OACE,oCAAK/3D,MAAOA,OACV,oDAAeylH,YAAYhrG,SAC3B,oDACYirG,MAAMC,YADlB,KACiCM,WADjC,QAGA,qDACaP,MAAMG,aADnB,KACmCE,YADnC,QAGA,qDAAgBL,MAAME,eACtB,oDAAeF,MAAMI,cAI3B,OAAO,MAzDT,W,4WAAA,yBACA,wCAEA,MAAM9lH,MAAQ,CACZ5P,SAAU,WACV4Z,OAAQ,EACRC,MAAO,EACPnZ,gBAAiB,qBACjB0iD,QAAS,EACTtpC,WAAY,c,sICuBC,UAAkB,cAAEswE,cAAF,eAAiBC,eAAjB,0BAAiCC,4BAChE,MAAM,WAAE51D,YAAep5B,MAAMwH,WAAW0uD,wBAAiB,GACnDn2D,SAAsBgvF,eAAehvF,UACpC06H,cAAeC,kBAAoB16H,MAAMyB,SAAsB,KAAM,iBAAAk5H,kBAAiB56H,WAM7F,OAFAgvF,eAAev+C,SAHf,WACEkqF,kBAAiB,iBAAAC,kBAAiB56H,YAKlC,wCACE,oBAAC,wBAAD,CACEgD,OAAQisF,0BACRrnF,MAAO8yH,cACPn3E,eAAiBs3E,gBAAmBxhG,WAAW,CAAE41D,0BAA2B4rC,iBAC5EpqF,SAAWqqF,mBACLA,mBACFH,iBAAiBG,kBACjB/rC,eAAc,iBAAAgsC,kBAAiBD,qBAGnC72E,cAAe+2E,oCACf,oBAAC,gBAAD,CACEh5F,OAAK,EACLmC,QAAQ,gBACR/C,QAAS,KACPivD,mBAAUC,MAAK,iBAAA2qC,oBAAmBP,cAAezrC,8BAJrD,SASF,oBAAC54B,KAAD,KACE,oBAAC,cAAA3gB,OAAD,sBACA,oBAAC,cAAAzR,OAAD,MAAS,iBAAAi3F,yBAAwBR,eAAepuD,QAAQ,GAAxD,OAEF,yBAAG/3D,MAAO,CAAEsyD,UAAW,IACrB,0DAC2B,qCAD3B,qC,oBAnER,U,4WAAA,yBAEA,mBADA,yBACA,gDAEA,yDACA,+DACA,kEACA,sCACA,wCACA,yCAMA,4D,kFAIO,MAAMxQ,KAAO/xB,0BAAO2e,GAAI;;;;oKCbxB,SAA0BjjD,UAC/B,OAAOA,SAASqX,IAAKjX,MACZA,KAAKC,OAAOgX,IAAK3H,QAAD,CAAc7O,EAAG6O,MAAMA,MAAM,GAAI5O,EAAG4O,MAAMA,MAAM,Q,yBAIpE,SAA0BgrH,eAE/B,OAAOA,cAAcrjH,IAAI,CAAC8jH,iBAAkBt4G,OAC1C,MAAM+I,QAAU,IAAInB,uBAAS,GAAE5H,KAE/B,OADA+I,QAAQvrB,OAAS86H,iBAAiB9jH,IAAI,EAAGxW,IAAGC,OAAQ,IAAI0pB,4BAAa,CAAC3pB,EAAGC,EAAG,KACrE8qB,W,2BAeJ,SAA4B8uG,cAA4BzrC,2BAC7D,OAAOA,4BAA8B/rC,4BAAYpiC,KALnD,SAAsB45G,eACpB,OAAO55G,KAAKsjC,UAAUs2E,cAAe,KAAM,GAIaU,CAAaV,eAZvE,SAAsBA,eACpB,IAAKA,cAAct2G,SAAWs2G,cAAc,GAAGt2G,OAC7C,MAAO,GAET,OAAO++B,cAAKiB,UAAUs2E,eAQgEW,CAAaX,gB,gCAI9F,SAAiCA,eACtC,OAAOA,cAAcvxF,OAAO,CAACrlB,KAAMw3G,WAAYz4G,OAC7C,GAAIy4G,WAAWl3G,OAAS,EACtB,IAAK,IAAIxjB,EAAI,EAAGA,EAAI06H,WAAWl3G,OAAS,EAAGxjB,IACzCkjB,MAAQzkB,KAAKgtE,MAAMivD,WAAW16H,EAAI,GAAGC,EAAIy6H,WAAW16H,GAAGC,EAAGy6H,WAAW16H,EAAI,GAAGE,EAAIw6H,WAAW16H,GAAGE,GAGlG,OAAOgjB,MACN,IA7CL,I,IAAA,wCAEA,0CAEA,O,IAAA,4B,+KCJA,gEACA,O,4WAAA,yBAGA,aAFA,yBAEA,yBACA,8DACA,6DACA,gEACA,iEACA,mEACA,gEACA,gEACA,+DACA,iEACA,8D,+FAyJe7jB,eAAM6jB,MA/HrB,UAAuB,oBACrB6S,oBADqB,YAErBhoB,YAFqB,MAGrB0X,MAHqB,UAIrBowC,UAJqB,eAKrB2/D,eALqB,kBAMrB/4D,kBANqB,SAOrB9mC,SAPqB,gBAQrBigC,gBARqB,UASrBgxB,UATqB,YAUrBquC,YAVqB,eAWrBM,eAXqB,cAYrBhuC,cAZqB,oBAarBhvE,oBAbqB,sBAcrBu9C,sBAdqB,eAerB0X,eAfqB,eAgBrB0nD,eAhBqB,oBAiBrBhnC,oBAjBqB,cAkBrBC,cAlBqB,mBAmBrB8qC,mBAnBqB,cAoBrBC,cApBqB,eAqBrB9qC,eArBqB,OAsBrBhhB,OAtBqB,WAuBrB30C,WAvBqB,eAwBrBw0C,eAxBqB,WAyBrB/lB,WAzBqB,kBA0BrBolB,kBA1BqB,eA2BrBH,eA3BqB,mBA4BrBC,mBA5BqB,eA6BrBzW,eA7BqB,0BA8BrB04B,0BA9BqB,cA+BrBthB,cA/BqB,qBAgCrBV,qBAhCqB,sBAiCrBW,sBAjCqB,cAkCrB4nD,cAlCqB,WAmCrBh4D,WAnCqB,qBAoCrBkQ,qBApCqB,WAqCrBpQ,aAEA,MAAMi+D,4BAA6B,SAAAphG,SACjC,KACE,MAAMlD,wBAAyB,cAAAhF,kBAAiBE,gBAAgBuB,oBAAoBuD,uBACpF,OACE,oCAAKqK,WAAW,uBAAGC,sBAAO21B,QAAS31B,sBAAOi6F,eACxC,6BAACvkG,uBAAD,CAAwBqmC,WAAYA,eAI1C,CAACA,aAGH,OACE,0DACE,6BAAC,uBAAD,CACE7oD,IAAK0hH,eACL1qD,aAAcoqD,YAAYpqD,aAC1BE,cAAekqD,YAAYlqD,cAC3BD,oBAAqBoqD,iBAEvB,oCAAKx0F,WAAW,uBAAGC,sBAAOqD,QAASrD,sBAAO/iB,QACxC,oCAAK8iB,UAAWC,sBAAO21B,SACrB,6BAAC,oBAAD,CACE6V,eAAgBA,eAChBW,qBAAsBA,qBACtB5lB,WAAYA,WACZ6lB,cAAeA,cACfV,qBAAsBA,qBACtBC,kBAAmBA,kBACnBW,eAAgBA,eAChBD,sBAAuBA,sBACvBZ,mBAAoBA,mBACpB7zD,oBAAqBA,oBACrBxK,YAAaA,YACb2uD,WAAYA,WACZ0Q,OAAQA,OACRI,eAAgBA,kBAGpB,oCAAK9sC,UAAWC,sBAAO21B,SACrB,6BAAC,yBAAD,CACEoG,WAAYA,WACZm+D,WAAYllG,eAAsBld,EAClCgkD,kBAAmBA,kBACnB+Q,eAAgBA,kBAGpB,6BAAC,qBAAD,CACEynD,YAAaA,YACb6F,cAAevF,eAAennG,QAC9B1iB,YAAaqC,YAAYrC,YACzB+Z,MAAOA,MACPwzG,mBAAoBA,mBACpBC,cAAeA,gBAEhB3D,eAAennG,SAAWmnG,eAAennG,QAAQ2sG,gBAClD,6BAAC,sBAAD,CACEllE,UAAWA,UACXD,gBAAiBA,gBACjBE,sBAAuBA,sBACvBH,eAAgBA,iBAElB,6BAAC,sBAAD,CACEw4B,cAAeA,cACfC,eAAgBA,eAChB31D,WAAYA,WACZ41D,0BAA2BA,0BAC3BH,oBAAqBA,sBAEvB,6BAAC,oBAAD,CACEngF,YAAaA,YACb6uD,WAAYA,WACZH,kBAAmBA,kBACnB9mC,SAAUA,SACVixD,UAAWA,UACXW,cAAeA,cACfhvE,oBAAqBA,oBACrBq8G,gBAAiBA,cACjB7+F,oBAAqBA,sBAEtB4kG,6BAED5sH,YAAYrC,aAAekpH,eAAiB,6BAAC,mBAAD,CAAW7mH,YAAaA,cACtE,6BAAC,uBAAD,CAAeg9D,cAAekqD,YAAYlqD,oB,gKCxEjC,UAAoB,YACjCh9D,YADiC,WAEjC6uD,WAFiC,kBAGjCH,kBAHiC,SAIjC9mC,SAJiC,UAKjCixD,UALiC,cAMjCW,cANiC,oBAOjChvE,oBAPiC,cAQjCq8G,cARiC,oBASjC7+F,oBATiC,mBAUjCggC,qBAEA,MAAOC,YAAaC,gBAAkB52D,MAAMyB,SAASi1D,qBAC/C,kBAAE15B,kBAAF,WAAqB5D,YAAep5B,MAAMwH,WAAW0uD,wBAAiB,IACrEylE,KAAMC,SAAW57H,MAAMyB,UAAkB,IAE1C,OAAEgM,OAAF,aAAUC,cAAiBgB,YAC3BvB,cAAgB0xD,oCAAqB1xD,cAAcuB,aAEnDmtH,gBADW9uH,eAAKgrB,IAAIjsB,UAAW2B,OAAQV,eAAK+xD,QAAQhzD,UAAW4B,aAAcouH,WAAY3uH,gBAC9DiK,IAAK2kH,MAASA,IAAI1vD,QAAQ,IAiB3D,OACE,oBAAC,0BAAD,CACEnoC,QAAQ,SACRwxB,KACE,oBAAC,cAAD,CAAMphD,MAAO,CAAE1K,MAAO8sB,oBAAsB1sB,sBAAOilF,OAAS,UAC1D,oBAAC,uBAAD,OAGJ5tD,UAAWC,sBAAO21B,QAClBN,YAAaA,YACbO,YAAcC,gBAAmBP,eAAeO,iBAChD,oBAAC,kBAAAC,UAAD,CAAW3sC,KAhHc,UAiHvB,oBAAC,cAAD,CAAMgX,KAAG,EAACntB,MAAO,CAAEs9B,SA5GO,MA6GxB,oBAAC,cAAD,CAAMnI,KAAG,EAAC+K,SAAO,GACf,oBAAC,gBAAD,CACEtQ,QAAQ,mBACRnC,OAAK,EACLZ,QAAS,KACPivD,mBAAUC,KAAKxvE,KAAKsjC,UAAUz1C,YAAa,KAAM,MAJrD,QAQA,oBAAC,gBAAD,CACE2zB,WAAYklD,UACZrjD,QAASqjD,UAAY,+CAAiD,+BACtEpmD,QAAS,IAAMy6F,SAASD,OACvBA,KAAO,OAAS,QAEnB,oBAAC,gBAAD,CAAQz3F,QAAQ,yCAAyC/C,QA3C3C,KACtBnE,kBAAkBqrD,8BAAS/rD,UAAYpD,QAUrC,iBAAYA,OAAZ,CAAoBxqB,aARG,4BAAAu5E,iCAAgC,CACrD3pB,gBAAiB5vD,YACjB6vD,eAAgBhB,WAChBiB,aAAcloC,SACdmoC,sBAAuBrB,kBACvBsB,YAAaxlC,OAAO5C,SACpBqoC,qBAAsBzlC,OAAOkkC,yBAkCzB,SAIDu+D,OAASp0C,UACR,oBAAC,gBAAAy0C,2BAAD,CACEj5H,OAAO,OACP4E,MAAO+G,YACP8hC,SAAW8sB,gBAAmBlkC,WAAW,CAAE1qB,YAAa4uD,iBACxDtZ,cAAei4E,mCAGjB,oBAAC,cAAD,CAAMx6F,KAAG,GACP,oBAACy6F,gBAAD,CAAiBxtH,YAAaA,YAAaw5E,cAAeA,gBAC1D,oBAAC,cAAD,CAAMzmD,KAAG,GACP,oBAAC20B,KAAD,CAAM9hD,MAAO,CAAE0tB,aAAc,IAC3B,oBAAC,iBAAD,CAAS6f,UAAU,MAAMD,SAAS,kDAChC,oBAAC,cAAAnM,OAAD,oBAEF,oBAAC,cAAAzR,OAAD,KACE,6BACEziB,KAAK,WACLonC,QAASjyB,oBACT8Z,SAAU,IACRxT,kBAAkBqrD,8BAAS/rD,UAAYpD,QAAD,iBACjCA,OADiC,CAEpCxqB,wBACAgoB,qBAAsBA,2BAMhC,oBAAC0/B,KAAD,CAAM9hD,MAAO,CAAE0tB,aAAc,IAC3B,oBAAC,cAAAyT,OAAD,CAAQnhC,MAAO5F,YAAYrC,YAAc,CAAEzC,MAAOI,sBAAOs+F,WAAc,IAAvE,mBACA,oBAAC,cAAAtkE,OAAD,KACE,6BACEziB,KAAK,WACL8gB,SAAU3zB,YAAYrC,YACtBs8C,QAAS4sE,cACT/kF,SAAU,IAAMpX,WAAW,CAAEm8F,eAAgBA,oBAIlDA,gBAAkB7mH,YAAYrC,aAC7B,oBAAC+pD,KAAD,CAAM9hD,MAAO,CAAE6nH,YA5Kb,IA4KuCn6F,aAAc,IACrD,oBAAC,cAAAgC,OAAD,KACE,oBAAC,gBAAAuhB,UAAD,CACEzT,WAAY,CAAExvC,MAAO,KACrBqF,MAAO,CAAE/G,EAAGi7H,gBAAgB,GAAIh7H,EAAGg7H,gBAAgB,IACnDrrF,SAAW7tC,OACT,MAAMy5H,OAAS,CAACz5H,KAAK/B,EAAG+B,KAAK9B,EAAG,GAE1Bw7H,gBAAkBtvH,eAAK+xD,QAC3B,CAAC,EAAG,EAAG,GACP/xD,eAAKkuG,IAAInvG,UAAWswH,OAAQ1tH,YAAYjB,QACxCquH,UACAj9D,oCAAqB1xD,cAAcuB,eAEhC,UAAAigC,SAAQjgC,YAAYhB,aAAc2uH,kBACrCnjH,oBAAoB,cAAD,GAAMxK,YAAN,CAAmBhB,aAAc2uH,oBAGxDr4E,cAAes4E,kCAMxBhmG,SACC,oBAAC8/B,KAAD,KACE,oBAAC,cAAA3gB,OAAD,yBACA,oBAAC,cAAAzR,OAAD,KACE,gCAAO1N,UACN8mC,mBAAqB,sBAI1B,gDAAmB,cAAAprC,kBAAiBE,gBAAgBuB,oBAAoBiF,mBAAxE,U,+BAzOhB,qEACA,mCACA,+BACA,sDACA,wCACA,iEAEA,yDACA,qEACA,uDACA,sDACA,+DACA,yDACA,0CACA,sCACA,oCACA,+CACA,wCACA,gEACA,oDAIA,+DACA,4D,8jCAE+B,SAE/B,MACM5sB,UAAY,CAAC,EAAG,EAAG,GACnBgwH,UAAYjwH,OAAOs2C,OAAO,CAAC,EAAG,EAAG,IAGjCiU,KAAO/xB,0BAAO2e,GAAI;;;EA0BxB,SAASk5E,iBAAgB,YAAExtH,YAAF,cAAew5E,gBACtC,OACE,wCACGr8E,OAAOwtC,KAAK3qC,aACVi7C,OACAvyC,IAAKnJ,MACJ,IAAIvE,IAAMgF,YAAYT,KAQtB,MAPY,gBAARA,IACFvE,IAAMgF,YAAYT,KAAO,OAAS,QACzBpE,MAAMo7C,QAAQv2C,YAAYT,MACnCvE,IAAMgF,YAAYT,KAAKmJ,IAAKxW,GAAMA,EAAEyrE,QAAQ,IAAI53B,KAAK,MAChB,iBAArB/lC,YAAYT,OAC5BvE,IAAMgF,YAAYT,KAAKo+D,QAAQ,IAE1B,CAACp+D,IAAKvE,OAEd0N,IAAI,EAAEnJ,IAAKvE,OACV,oBAAC0sD,KAAD,CAAMnoD,IAAKA,KACT,oBAAC,cAAAwnC,OAAD,CAAQnzC,MAjDA,KAiDqB2L,IAA7B,KADF,IAC8C,oBAAC,cAAA+1B,OAAD,KAASt6B,KAC5C,gBAARuE,KACC,oBAAC,gBAAD,CACEkzB,QAAS+mD,cACThkD,QAAQ,kFAFV,c,sICpEC,UAAmB,YAAEx1B,cAClC,MAAM,OAAEjB,OAAF,aAAUC,aAAV,SAAwBnB,SAAxB,YAAkCI,aAAgB+B,YAClDvB,cAAgB0xD,oCAAqB1xD,cAAcuB,aAEnD6tH,eAAiB,CAAC,EAAG,EAAG,GAC9BxvH,eAAKgrB,IAAIwkG,eAAgBxvH,eAAK+xD,QAAQy9D,eAAgB7uH,aAAc,CAAC,EAAG,EAAG,IAAKP,eAAgBM,QAGhG,MAAM0W,OAAS,IAAO5X,SAChBtB,YAAc,CAAC,EAAG,EAAG,EAAG,GACxBiY,MAAQ/V,cAAgBR,YAE9BM,eAAK6xD,QAAQ7zD,YAAaA,aAAciY,OAExC,MAAMs5G,UAAY,CAAC17H,EAAG27H,kBACpB,MAAMz2G,UAAY,KAAQzZ,UAAY,EAAIkwH,gBAC1C,MAAO,CACL51F,OAAQ,CACNC,UAAU,cAAA9U,kBAAiB0G,mBAC3BzkB,MAAO,CAAE+nC,IAAK,EAAGC,KAAM,IAEzB16B,KAAM,EACN1P,OAAQ,EACR0F,GAAI,GACJmrD,GAAI,GACJpiE,KAAM,CACJoE,SAAU,CAAE9D,EAAG27H,eAAe,GAAI17H,EAAG07H,eAAe,GAAIz7H,KACxDmK,YAAa,CACXrK,EAAGqK,YAAY,GACfpK,EAAGoK,YAAY,GACfnK,EAAGmK,YAAY,GACf5B,EAAG4B,YAAY,KAGnB7K,OAAQ,CACN,CAAEQ,GAAIujB,QAAU,EAAI,GAAMs4G,gBAAiB57H,EAAG,EAAGC,EAAG,GACpD,CAAEF,EAAGujB,QAAU,EAAI,GAAMs4G,gBAAiB57H,EAAG,EAAGC,EAAG,GACnD,CAAEF,EAAG,EAAGC,GAAIsjB,QAAU,EAAI,GAAMs4G,gBAAiB37H,EAAG,GACpD,CAAEF,EAAG,EAAGC,EAAGsjB,QAAU,EAAI,GAAMs4G,gBAAiB37H,EAAG,IAErDO,MAAO,CAAET,EAAGolB,UAAWnlB,EAAGmlB,UAAWllB,EAAGklB,aAI5C,OACE,6BAAC,eAAAiD,MAAD,KACG,CAAC,cAAD,GAEMuzG,UAAU,IAAM,IAFtB,CAGG5yH,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,KAHjC,iBAMM01H,UAAU,KAAM,GANtB,CAOG5yH,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,QA/DxC,I,IAAA,mCACA,Q,IAAA,yB,iCACA,wCAEA,oC,+tBCJA,qEACA,2DACA,4DACA,8DACA,+BACA,O,4WAAA,yBACA,+DACA,iEAGA,gEACA,yDACA,sDACA,oCACA,+D,kFAaA,MAAM41H,eAAkB/rG,MAASA,KAAKoW,GAAGxvB,GAEnColH,YAAet/D,aACnB,MAAM0jB,KAAe,CACnB67C,MAAO,GACP/8B,MAAO,IAGT,IAAK,MAAM94D,MAAMs2B,WACX0jB,KAAK8e,MAAM94D,GAAGxvB,MAGlBwpE,KAAK8e,MAAM94D,GAAGxvB,IAAM,CAClBwvB,MACAjnC,SAAU,GACVuD,MAAO,IAKX,IAAK,MAAM0jC,MAAMs2B,WACf,GAAIt2B,GAAGlB,OAAQ,CACUk7C,KAAK8e,MAAM94D,GAAGlB,OAAOtuB,IAC7BzX,SAAS4oC,KAAKq4C,KAAK8e,MAAM94D,GAAGxvB,UAE3CwpE,KAAK67C,MAAMl0F,KAAKq4C,KAAK8e,MAAM94D,GAAGxvB,KAKlC,MAAMslH,SAAahxH,OAAO06B,OAAOw6C,KAAK8e,OAEtC,IAAK,MAAMlvE,QAAQksG,SACjBlsG,KAAK7wB,UAAW,UAAAsoE,QAAOz3C,KAAK7wB,SAAU48H,gBAExC37C,KAAK67C,OAAQ,UAAAx0D,QAAO2Y,KAAK67C,MAAOF,gBAGhC,MAAMI,SAAW,CAACnsG,KAAkBttB,SAClCstB,KAAKttB,MAAQA,MACbstB,KAAK7wB,SAAS04C,QAASyiB,OAAU6hE,SAAS7hE,MAAO53D,MAAQ,KAI3D,OAFA09E,KAAK67C,MAAMpkF,QAASjX,MAASu7F,SAASv7F,KAAM,IAErCw/C,MAUT,SAAUg8C,eAAel9B,OACvB,IAAK,MAAMlvE,QAAQkvE,YACXlvE,WACCosG,eAAepsG,KAAK7wB,UAI/B,SAASyxC,YAAY5gB,MACnB,MAAO,GAAGqsG,OAAoB,EAAbrsG,KAAKttB,OAAastB,KAAKoW,GAAGxvB,GAG7C,MAAM4iG,UAAY91E,0BAAO2e,GAAI;;;;;EAOvBi6E,sBAAuB,cAAAjrG,kBAAiBE,gBAAgBuB,oBAAoBkF,4B,cAc1D,SAAA9U,MAAapkB,QACnC,MAAM,WAAE49D,WAAF,WAAcm+D,WAAd,kBAA0Bp+D,kBAA1B,eAA6C+Q,gBAAmB1uE,OAC/Dy9H,mBAAoBC,wBAAyB,SAAA17H,WAAS,IACtD27H,SAAUC,cAAe,SAAA57H,WAAS,IAClC67H,kBAAmBC,uBAAwB,SAAA97H,eAAS2X,GAErDokH,OAASb,YAAYt/D,WAAW92B,UAChCs2F,SAAWhzH,MAAMwuC,KAAK0kF,eAAeS,OAAOZ,QAC5Ca,iCAAmCZ,UAAYA,SAAS14G,SAAW84G,qBACnES,iBAAmBb,UAAYA,SAAS,IAAMA,SAAS,GAAG91F,IAAM81F,SAAS,GAAG91F,GAAGxvB,GAE/EioC,cAAe,SAAAzO,aAEf4sF,gCAAiC,SAAA71H,aACrC,IACS21H,iCAAmCC,iBAAmBT,qBAE/D,CAACQ,iCAAkCC,mBAG/BE,wBAAyB,SAAA91H,aAC7B,IACO0zH,WAKOp+D,kBAGL,WAFE,qBALHkgE,kBACM,UAASA,kBAEX,UAASK,iCAMrB,CAACnC,WAAYp+D,kBAAmBkgE,kBAAmBK,iCAG/CE,qBAAsB,SAAA/1H,aAC1B,IACO0zH,WAKOp+D,kBAGL+Q,gBAAe,GAFbA,eAAeqtD,YAAY,GAJzBrtD,eADLmvD,mBAGkBK,kCAM1B,CAACnC,WAAY8B,kBAAmBnvD,eAAgBwvD,+BAAgCvgE,oBAG5E0gE,eAAgB,SAAAh2H,aACpB,CAACyP,GAAYiG,KAAaugH,oBACxBR,qBAAqBhmH,KAAOomH,sCAAmCvkH,EAAY7B,IAC3E42D,eAAe52D,GAAI6lD,mBACnB2gE,iBAAiBjtF,QAEnB,CAACysF,qBAAsBI,+BAAgCxvD,eAAgB/Q,oBAGnE4gE,eAAgB,SAAAl2H,aACnBioC,QACCA,MAAMlP,iBACNs8F,uBAAsB,GAClB39E,aAAazwB,SACfywB,aAAazwB,QAAQ0hB,SAGzB,CAAC0sF,sBAAuB39E,eAIpBy+E,uBAAwB,SAAAn2H,cAC5B,UAAAo2H,UAAS,KACPb,aAAY,IACX,KACH,CAACA,cAGGj9F,cAAe,SAAAt4B,aACnB,KACEm2H,sBAAsBE,SACtBd,aAAY,IAEd,CAACY,sBAAuBZ,cAGpBe,qBAAuB5C,YAAcA,aAAemC,iCACpDU,cAAqC,MAArBf,mBAA6BJ,oBAAsBkB,qBACnEE,gBAAkB9C,YAAc8B,kBAChC7rF,aAAe6sF,gBAAkB,CAAEv3F,GAAI,CAAExvB,GAAI+mH,iBAAmBj7H,MAAO,QAAM+V,EAEnF,OACE,6BAAC+gG,UAAD,CACE/5E,aAAcA,aACdC,aAAc49F,sBACd3pH,MAAO,CAAE1K,MAAO4xH,gBAAapiH,EAAYpP,sBAAOs+F,YAC/C+1B,eACC,6BAAC,sBAAD,CACE7pH,IAAKgrC,aACL7xB,MAAOkvG,SACPvrF,aAAcorF,eACdnrF,YAAaA,YACbE,aAAcA,aACdD,YAAaC,aAAeF,YAAYE,cAAgB,wBACxDf,SAAUotF,cACVnsF,mBAAmB,EACnBC,SAAU,EACVnC,cAAY,EACZ4B,UAAQ,EACRQ,UAAW,CAIT+0B,UAAW,GAEbhyD,OAAQ,KACNuoH,uBAAsB,GACtBE,aAAY,MAIjBgB,cACC,6BAAC,cAAD,CAAMl9F,QAAS68F,eACb,6BAAC,kBAAD,OAEAZ,SACF,6BAAC,cAAD,CACEl5F,QAAS,wBACT/C,QAAS68F,cACT51E,aAAc,CAAEvG,UAAW,OAC3BvtC,MAAO,CAAE1K,MAAO,UAChB,6BAAC,kBAAD,OAEA,KACJ,6BAAC,gBAAD,CAAQw+C,aAAc,CAAEvG,UAAW,OAAS1gB,QAAS08F,oBAAqB35F,QAAS05F,0BACjF,6BAAC,cAAD,CAAMtpH,MAAO,CAAE1K,MAAO4xH,WAAaxxH,sBAAOilF,OAAS,UAChD7xB,kBAAoB,6BAAC,oBAAD,MAAyB,6BAAC,uBAAD,UApJlC,CAACm3C,UAAW/9F,aAChC,IAAKA,UAAUglH,WAAY,CACzB,MAAMgC,OAASb,YAAYnmH,UAAU6mD,WAAW92B,UAC1Cs2F,SAAWhzH,MAAMwuC,KAAK0kF,eAAeS,OAAOZ,QAElD,GADyCC,UAAYA,SAAS14G,SAAW84G,qBAEvE,OAAO,EAGX,OAAO,yBAAa1oB,UAAW/9F,a,uKC9GjC,sDACA,yDACA,2DACA,M,4WAAA,yBAEA,yDACA,sDAEA,eADA,kDACA,mDACA,+D,+FAwDexW,MAAM6jB,MA7CrB,UAAqB,cACnB43G,cACA7F,aAAa,aAAEpqD,cAFI,MAGnBplD,MAHmB,mBAInBwzG,mBAJmB,cAKnBC,cALmB,YAMnBxtH,aAAc,IAEd,MAAMkyH,cAAgBlyH,YAAc,sBAAwB,sBACtD0/D,cAAiC,gBAAjBP,cAAmD,iBAAjBA,aACxD,OACE,2BAAKnqC,UAAWC,sBAAO21B,SACrB,oBAAC,gBAAD,CAAQ/yB,QAASq6F,cAAep9F,QAASy4F,oBACvC,oBAAC,cAAD,CAAMtlH,MAAO,CAAE1K,MAAOyC,YAAcrC,sBAAOilF,OAAS,UAClD,oBAAC,iBAAD,QAGJ,oBAAC,gBAAD,CACE5sD,SAAUh2B,YACV63B,QACE73B,YACI,0CACA0/D,cACA,mBACA,mBAEN5qC,QAASs6F,cAAgBA,cAAc+C,wBAAqBplH,GAC5D,oBAAC,cAAD,CACE9E,MAAO,CACL1K,MAAOmiE,cAAgB/hE,sBAAOilF,OAAS5iF,iBAAc+M,EAAY,UAEnE,oBAAC,eAAD,SAGHlE,M,gKCpCQ,UAAyBw2D,eAAe,MAAEx0D,MAAF,IAAS8M,OAC9D,MAAM2F,QAAU,GACVrE,MAAQ,GACd,GAAIpO,MAAO,CACT,MAAMunH,WAAa,cAAH,GAAQvnH,OAQxB,GANAyS,QAAQ+e,KAAR,iBACKg2F,cADL,CAEEnnH,GAAI,iBACJjX,KAAM,cAAF,CAAIoE,SAAU+5H,YAAeE,gBAG/B36G,IAAK,CACP,MAAM46G,SAAW,cAAH,GAAQ56G,KACtBsB,MAAMojB,KAAN,iBACKg2F,cADL,CAEEnnH,GAAI,gBACJnX,OAAQ,CAAC8W,MAAO8M,KAChB1jB,KAAM,cAAF,GAAOq+H,YAAP,CAAoBj6H,SAAU,CAAE9D,EAAG,EAAGC,EAAG,EAAGC,EAAG,KACnDO,MAAO,CAAET,EA7BQ,GA6BKC,EAAG,EAAGC,EAAG,GAC/BygB,KAAM,KAGRoI,QAAQ+e,KAAR,iBACKg2F,cADL,CAEEnnH,GAAI,eACJjX,KAAM,cAAF,CAAIoE,SAAUk6H,UAAaD,iBAKrC,OACE,0DACGr5G,MAAMnB,QAAU,6BAAC,eAAA8E,MAAD,KAAQ3D,OACxBqE,QAAQxF,QAAU,6BAAC,eAAAyF,QAAD,KAAUD,WApDnC,I,IAAA,Q,IAAA,yB,iCACA,wC,glBAMA,MAGM+0G,cAAqB7yH,OAAOs2C,OAAO,CACvC5gC,KAAM,EACN1P,OAAQ,EACRxQ,MAAO,CAAET,EANgB,GAMDC,EANC,GAMcC,EAAG,IAC1C8I,MAAO,CAAEtK,EAAG,EAAGC,EAAG,GAAKC,EAAG,EAAGsH,EAAG,KAE5B63H,YAAmB9yH,OAAOs2C,OAAO,CAAEl3C,YAAa,CAAErK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGuI,EAAG,M,yMCjB7E,mCAGA,oCACA,oEACA,4CACA,+CAKA,SAJA,kDAIA,mDACA,yCACA,8DACA,gCACA,kEACA,8B,kqBAQO,SAASw1H,0BAA0BvnG,IAAUwnG,sBAClD,MAAO,CACLv9G,KAAM,IACNslB,OAAQvP,IAAIO,QAAQgP,OACpBvmC,MAAM,cAAA0xB,kBACHE,gBACAuB,oBAAoBmE,eAAeN,IAAKwnG,sBAC3Cz9H,MAAO09H,mCACPn1H,OAAO,cAAAooB,kBACJE,gBACAuB,oBAAoBwE,6BAA6BX,IAAIvB,Q,gBAuB7C,MAA6C,4CACxC,IADwC,+BAEtC,IAFsC,+HAKpC,IALoC,mEASpC,CACpBm3D,gBAAiB,GACjBD,sBAAuB,IAAI9zE,IAC3Bg0E,wBAAyB,IAAIh0E,IAC7B6lH,sBAAuB,IAAI7lH,IAC3Bse,gBAAiB,IAAIte,MAdmC,qCAgBP,IAhBO,2CAiBlB,CACtC6lH,sBAAuB,IAAIp9H,MAlB6B,4BAoBnD,IApBmD,4CAqB5B,MArB4B,6BAsBlD,IAtBkD,kCAuBb,IAvBa,uEAyBrC,MAzBqC,sCA0BhB,IA1BgB,sCA2B5B,MA3B4B,qCA6B7B,IA7B6B,yCA+BzB,IA/ByB,yFAiCvC,GAjCuC,8BAkCzC,IAAIq9H,iBAlCqC,sCAsC5B,IAAIr9H,KAtCwB,wCA0Cd,IA1Cc,qCA4C1C,CAACy7D,WAAwB6vB,mBACvCh/E,KAAKmvD,WAAaA,WAClBnvD,KAAKg/E,gBAAkBA,gBACvBh/E,KAAKspB,OAAO01D,gBAAkBA,kBA/C0B,0CA2HrC,CAACh2D,gBAAuB,MAC3C,MAAM,eAAEC,eAAF,eAAkBC,iBAAmB,cAAApF,kBACxCE,gBACAuB,oBAAoBwD,iCACnBC,gBACAhpB,KAAKipB,eACLjpB,KAAKkpB,eACLlpB,KAAK2oB,QAET3oB,KAAKipB,eAAiBA,eACtBjpB,KAAKkpB,eAAiBA,iBArIkC,sCAgKzC,CAACrB,MAAe8B,WAC/B3pB,KAAKspB,OAAOC,gBAAgBC,IAAI3B,MAAO8B,SACvC3pB,KAAKgxH,yBAlKmD,4CAgNnC,CAACnpG,MAAetvB,UACrC,MAAM,SAAEqgC,UAAargC,OAAOogC,OAE5B,IAAKC,SAAU,CAGb,OAFc54B,KAAKixH,UAAUjxH,KAAKspB,OAAOy1D,sBAAuBl3D,OAC1DgvC,WAAWhtC,IAAItxB,OAAOi8D,IACrB,KAGT,GAAI57B,WAAa54B,KAAKg/E,gBAGpB,MAAO,CACLxoF,SAAU,cAAF,GAAO+B,OAAOnG,KAAKoE,UAC3BuG,YAAa,cAAF,GAAOxE,OAAOnG,KAAK2K,cAMlCiD,KAAKkxH,kBAAkBrpG,OACvB,MAAMspG,cAAgBnxH,KAAKixH,UAAUjxH,KAAKspB,OAAOwnG,sBAAuBjpG,OACxEspG,cAAct6D,WAAWhtC,IAAItxB,OAAOi8D,IACpC28D,cAAcC,SAASvnG,IAAI+O,UAE3B,MAAMxmC,KAAO4N,KAAKmvD,WAAW9gD,OAAM,QAAA0iD,aAAax4D,OAAOnG,KAAMwmC,SAAU54B,KAAKg/E,iBAC5E,IAAK5sF,KAAM,CACT,MAAMi/H,kBAAoBrxH,KAAKixH,UAAUjxH,KAAKspB,OAAO21D,wBAAyBp3D,OAC9EwpG,kBAAkBx6D,WAAWhtC,IAAItxB,OAAOi8D,IACxC68D,kBAAkBD,SAASvnG,IAAI+O,UAEjC,OAAOxmC,OA/OiD,2CAkPpC,CAACy1B,MAAe8B,WACpC,IAAK,IAAIl3B,EAAI,EAAGA,EAAIk3B,QAAQ2kC,QAAQr4C,OAAQxjB,IAC1CuN,KAAKsxH,eAAezpG,MAAO8B,QAAQ2kC,QAAQ77D,MApPW,6CAoUlC,CAACo1B,MAAe8B,WACtC,MAAM,SAAEiP,UAAajP,QAAQgP,OAE7B,IAAKC,SAEH,YADA54B,KAAKixH,UAAUjxH,KAAKspB,OAAOy1D,sBAAuBl3D,OAIpD,GAAI+Q,WAAa54B,KAAKg/E,gBAAiB,CACrCh/E,KAAKkxH,kBAAkBrpG,OACT7nB,KAAKixH,UAAUjxH,KAAKspB,OAAOwnG,sBAAuBjpG,OAC1DupG,SAASvnG,IAAI+O,UAGrB,IAAIxmC,MAAO,QAAA2+D,aAEX,GADA3+D,KAAO4N,KAAKmvD,WAAW9gD,MAAMjc,KAAMA,KAAMwmC,SAAU54B,KAAKg/E,kBACnD5sF,KAAM,CAGT,YAFc4N,KAAKixH,UAAUjxH,KAAKspB,OAAO21D,wBAAyBp3D,OAC5DupG,SAASvnG,IAAI+O,UAIrB,MAEMrc,KAAQ,GAAEsL,SAAS8B,QAAQtW,QAI1B/W,MAAO4M,MAAO,cAAA4a,kBAClBE,gBACAuB,oBAAoB0E,uBAAuBpC,OAExC0pG,cAAgB,cAAH,GACd5nG,QADc,CAEjBrtB,YACA4M,QACAmK,KAdW,IAeXkJ,UACAnqB,YAIF,GAA6C,IAAzCm/H,cAAcz4H,KAAKsO,OAAO5Q,SAAS5D,GAAWoN,KAAK4wH,sBAAwB5wH,KAAKwX,QAAS,CAC3F,MAAMg6G,aAAeD,cAAcz4H,KAC7B24H,iBAAmBD,aAAapqH,OAAO5Q,SAC7C+6H,cAAcz4H,KAAd,iBACK04H,aADL,CAEEpqH,OAAQ,cAAF,GACDoqH,aAAapqH,OADZ,CAEJ5Q,SAAU,cAAF,GAAOi7H,iBAAP,CAAyB7+H,EAAGoN,KAAK4wH,qBAAqBp6H,SAAS5D,QAI7EoN,KAAKsrH,WAAWzjG,OAAOo8C,WAAWp8C,MAAO0pG,iBAzXe,gDA4X/B,CAAC1pG,MAAe8B,QAActW,QACvD,MAAMq+G,YAAa,QAAA3gE,aACb3+D,KAAO4N,KAAKmvD,WAAW9gD,MAAMqjH,WAAYA,WAAY/nG,QAAQgP,OAAOC,SAAU54B,KAAKg/E,iBACzF,IAAK5sF,KAAM,CAGT,YAFc4N,KAAKixH,UAAUjxH,KAAKspB,OAAO21D,wBAAyBp3D,OAC5DupG,SAASvnG,IAAIF,QAAQgP,OAAOC,UAIpC,MAAM+4F,eAAiB3xH,KAAK4xH,eAAe/pG,QAAU7nB,KAAK4xH,eAAe/pG,OAAOkhB,UAC1EwoF,cAAgB,cAAH,GACd5nG,QADc,CAEjBpN,KAAO,GAAEsL,SAAS8B,QAAQtW,OAC1BA,UACAjhB,UAIAy/H,cAA6B3mH,IAAnBymH,gBAA+B,QAAAG,SAAQH,qBAAkBzmH,IAGrElL,KAAKsrH,WAAWzjG,OAAOo8C,WAAWp8C,MAAO0pG,iBAjZe,sCAoZxCr4C,cAChBl5E,KAAKU,OAAO02B,QAEZp3B,KAAK+xH,OAAS74C,YAId,IAAK,MAAMn5E,OAAOC,KAAKsrH,WAAY,CACftrH,KAAKsrH,WAAWvrH,KACxBiyH,SAAShyH,KAAK+xH,WA7Z8B,uCAqbxC,CAAClqG,MAAeuB,OAChC,MAAM,QAAEO,QAAF,SAAWF,UAAaL,IACxB3C,4BAA6B,cAAA3C,kBAAiBE,gBAAgBuB,oBAAoBkB,2BAExF,OAAQgD,UACN,KAAKhD,2BAA2BC,mCAC9B1mB,KAAKsxH,eAAezpG,MAAO8B,SAC3B,MACF,KAAKlD,2BAA2BE,yCAC9B3mB,KAAKiyH,oBAAoBpqG,MAAO8B,SAChC,MACF,KAAKlD,2BAA2BD,sBAE9BxmB,KAAKsrH,WAAWzjG,OAAOo8C,WAAWp8C,MAAO8oG,0BAA0BvnG,IAAKppB,KAAK4wH,uBAC7E,MACF,KAAKnqG,2BAA2BI,iCAE9B7mB,KAAKkyH,sBAAsBrqG,MAAO8B,SAClC,MACF,KAAKlD,2BAA2BF,qBAC9BvmB,KAAKmyH,yBAAyBtqG,MAAO8B,QAAS,KAC9C,MACF,KAAKlD,2BAA2BG,gCAC9B5mB,KAAKmyH,yBAAyBtqG,MAAO8B,QAAS,KAC9C,MACF,KAAKlD,2BAA2BK,uCAAwC,CAEtE,MAAM,QAAErJ,SAAYkM,QACpB,GAA8B,IAA1BlM,QAAQvrB,OAAO+jB,OACjB,MAEF,MAAMqrF,WAAa,cAAH,GACX33E,QADW,CAEdz3B,OAAQurB,QAAQvrB,OAChBkgI,QAAQ,EACRj/H,MAAO,CAAET,EAAG,IACZgJ,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,KAEhCoH,KAAKmyH,yBAAyBtqG,MAAOy5E,WAAY,GACjD,MAEF,QAAS,CACP,MAAM,qBAAEsvB,qBAAF,WAAwBtF,WAAxB,OAAoChiG,OAApC,iBAA4C+oG,iBAA5C,eAA8DppG,gBAAmBjpB,MACvF,cAAA8jB,kBACGE,gBACAuB,oBAAoB4D,eACnBtB,MACAuB,IACA,CACEkpG,mBAAoBtyH,KAAKiyH,oBACzBM,wBAAyBvyH,KAAKmyH,0BAEhC,CAAEvB,0CAAsBtF,sBAAYhiG,cAAQ+oG,kCAAkBppG,oCAzed,qCA+ezCpB,QACf,MAAM6gF,SAAW1oG,KAAKg5E,MAAMnxD,QAAU7nB,KAAKqyH,iBAAiBxqG,OAC5D,GAAK6gF,SAAL,CAIA1oG,KAAKspB,OAAOy1D,sBAAsBza,OAAOz8C,OACzC7nB,KAAKspB,OAAO21D,wBAAwB3a,OAAOz8C,OAC3C7nB,KAAKspB,OAAOwnG,sBAAsBxsD,OAAOz8C,OACzC7nB,KAAKspB,OAAOC,gBAAgB+6C,OAAOz8C,OACnC7nB,KAAKsrH,WAAWzjG,OAAS7nB,KAAKsrH,WAAWzjG,QAAU,IAAI2qG,0BACvDxyH,KAAKsrH,WAAWzjG,OAAOmqG,SAAShyH,KAAK+xH,QACrC/xH,KAAKsrH,WAAWzjG,OAAO4qG,QAEvB,IAAK,IAAIhgI,EAAI,EAAGA,EAAIi2G,SAASzyF,OAAQxjB,IACnCuN,KAAK0yH,gBAAgB7qG,MAAO6gF,SAASj2G,OA5czCu2H,QACE,IAAK,MAAMnhG,SAAS7nB,KAAK2oB,OAAQ,CAC/B,MAAMgqG,UAAY3yH,KAAKsrH,WAAWzjG,MAAMtL,MACpCo2G,WACFA,UAAUF,SAKhBvJ,YAAYH,UACN/oH,KAAK4yH,YAAc7J,WACrB/oH,KAAK6yH,oBAAoB/B,sBAAsB9H,QAC/ChpH,KAAKspB,OAAS,CACZ01D,gBAAiB,GACjBD,sBAAuB,IAAI9zE,IAC3Bg0E,wBAAyB,IAAIh0E,IAC7B6lH,sBAAuB,IAAI7lH,IAC3Bse,gBAAiB,IAAIte,KAEvBjL,KAAKgxH,wBAEPhxH,KAAK4yH,UAAY7J,SAGnBO,iBAAiBrsF,UACfj9B,KAAK4xH,eAAiB30F,SAIxB6pF,UAAUn+F,QACR,MAAMmqG,cAAgB9yH,KAAK2oB,OAAO1J,OAAQ4I,QAAWc,OAAOwe,KAAM4rF,OAAUA,MAAMx2G,OAASsL,MAAMtL,OAEjGvc,KAAK2oB,OAASA,OAAO8yB,MAAK,wBAAY,SAGtCz7C,KAAKg5E,MAAQ,GAEb85C,cAAcxoF,QAASziB,QACrB,MAAM8qG,UAAY3yH,KAAKsrH,WAAWzjG,MAAMtL,MACpCo2G,YACFA,UAAUF,eACHzyH,KAAKsrH,WAAWzjG,MAAMtL,SAKnCgtG,SAASvwC,OACP,GAAIh5E,KAAKg5E,QAAUA,MAAnB,CAGAh5E,KAAKg5E,MAAQA,MACb,IAAK,MAAMnxD,SAAS7nB,KAAK2oB,OACnBd,MAAMtL,QAAQy8D,OAChBh5E,KAAKkpB,eAAeW,IAAIhC,MAAMtL,MAKlC5e,OAAOkzD,OAAO7wD,KAAKqyH,iBAAkBr5C,QAGvCowC,kBAAkB5xG,SAChBxX,KAAKwX,QAAUA,QAGjBw7G,qBAAqBn8D,YACnB72D,KAAKizH,kBAAoBp8D,WAG3BwyD,6BAA6Bn2D,2BAC3BlzD,KAAKkzD,2BAA4B,UAAApjD,WAAUojD,0BAA4B2D,YAAe,IAAInjE,IAAImjE,aAgBhGq8D,YACE,MAAM,sBAAEn0C,sBAAF,wBAAyBE,wBAAzB,sBAAkD6xC,sBAAlD,gBAAyEvnG,iBAAoBvpB,KAAKspB,OACxG,OACiC,IAA/By1D,sBAAsBn7D,MACW,IAAjCq7D,wBAAwBr7D,MACO,IAA/BktG,sBAAsBltG,MACG,IAAzB2F,gBAAgB3F,KAIpB8kG,iBAAiBphD,UACftnE,KAAKmzH,eAAiB7rD,SAGxB2pD,UAAU/nH,IAAgC2e,OACxC,IAAIwQ,OAASnvB,IAAIU,IAAIie,OAMrB,OALKwQ,SACHA,OAAS,CAAEw+B,WAAY,IAAInjE,IAAO09H,SAAU,IAAI19H,KAChDwV,IAAIsgB,IAAI3B,MAAOwQ,SAEjBr4B,KAAKgxH,uBACE34F,OAST24F,uBACEhxH,KAAKq7E,eAAgB,oBAAA+3C,uBAAsBpzH,KAAKspB,QAC5CtpB,KAAKmzH,gBACPnzH,KAAKmzH,iBAKTE,kBAAkBxrG,MAAetL,OAC3B,UAAA0qB,MAAKjnC,KAAKs+E,cAAgB9pB,IAAOA,GAAG3sC,QAAUA,OAAS2sC,GAAGj4C,OAASA,QAGvEvc,KAAKs+E,cAAgBt+E,KAAKs+E,cAAc/sE,OAAO,CAAC,CAAEsW,YAAOtL,aACrDvc,KAAKmzH,gBACPnzH,KAAKmzH,kBAKTG,mBAAmBzrG,MAAetL,MAChC,OAAIvc,KAAKkzD,0BAGJlzD,KAAKkzD,0BAA0BrrC,QAAU7nB,KAAKkzD,0BAA0BrrC,OAAO1jB,IAAIoY,OAC3C,MAAzCvc,KAAKkzD,0BAA0BrrC,QAG5B,UAAAof,MAAKjnC,KAAKizH,kBAAoBz+D,IAAOA,GAAG3sC,QAAUA,OAAS2sC,GAAGj4C,OAASA,MAGhF20G,kBAAkBrpG,OACX7nB,KAAK6yH,oBAAoB/B,sBAAsB3sH,IAAI0jB,SACtD7nB,KAAK6yH,oBAAoB/B,sBAAsBjnG,IAAIhC,QACnD,6BACG,SAAQA,sBACT,kIACA,OACA,SA6CNypG,eAAezpG,MAAe8B,SACxBA,QAAQ6qC,IACVx0D,KAAKqzH,kBAAkBxrG,MAAO8B,QAAQ6qC,IAOxC,MAAMj4C,KAAQ,GAAEsL,SAAS8B,QAAQ6qC,MAAM7qC,QAAQtgB,KAC/C,OAAQsgB,QAAQhmB,QACd,KAAK,EACH,MACF,KAAK,EAEH,YADA3D,KAAKuzH,eAAe1rG,MAAO,iCAE7B,KAAK,EAEH,YADA7nB,KAAKsrH,WAAWzjG,OAAO2rG,aAAaj3G,MAEtC,KAAK,EAEH,YADAvc,KAAKsrH,WAAWzjG,OAAO4rG,YAEzB,QAEE,YADAzzH,KAAKuzH,eAAe1rG,MAAQ,4BAA2B8B,QAAQhmB,QAInE,MAAMvR,KAAO4N,KAAK0zH,qBAAqB7rG,MAAO8B,SAC9C,IAAKv3B,KACH,OAEF,MAAMmG,OAAS,cAAH,GAAQoxB,QAAR,CAAiBpN,UAAMnqB,aAE7B,OAAEF,QAAYqG,QACd,SAAE/B,UAAapE,KAErB,IAAIuhI,KAAOziH,OAAO0iH,iBAGd1hI,QAAUA,OAAO+jB,OACnB/jB,OAAOo4C,QAAS/oC,QACd,MAAM7O,EAAI6O,MAAM7O,EAAI8D,SAAS9D,EACvBC,EAAI4O,MAAM5O,EAAI6D,SAAS7D,EACvBC,EAAI2O,MAAM3O,EAAI4D,SAAS5D,EAC7B+gI,KAAOziI,KAAK8D,IAAI2+H,KAAMpyH,MAAM3O,GAC5BoN,KAAKU,OAAOyQ,OAAO,CAAEze,IAAGC,IAAGC,SAI7B+gI,KAAOziI,KAAK8D,IAAI2+H,KAAMn9H,SAAS5D,GAC/BoN,KAAKU,OAAOyQ,OAAO3a,WAKR,IAATm9H,MAAc3zH,KAAKwX,SAAWxX,KAAK4wH,uBACrCp6H,SAAS5D,EAAIoN,KAAK4wH,qBAAqBp6H,SAAS5D,GAMlD2F,OAAOmD,OAAQ,cAAAooB,kBACZE,gBACAuB,oBAAoB6E,eAAevC,MAAOtvB,OAAOmD,OAGpD,MAAM,cAAE6+C,eAAkBv6C,KAAK4xH,eAAe/pG,QAAU,GACpD0yB,gBACFhiD,OAAOmD,OAAQ,uBAAAo4D,mBAAkBvZ,eACjChiD,OAAOuD,OAAS,IAGlBkE,KAAKsrH,WAAWzjG,OAAOgsG,UAAUhsG,MAAOtvB,QAiG1C2N,SACElG,KAAK4wH,sBACH,cAAA9sG,kBACGE,gBACAuB,oBAAoByE,iBAAiBhqB,KAAKg5E,QAAUh5E,KAAK4wH,qBAE1D5wH,KAAK4wH,sBAAwB5wH,KAAK4wH,qBAAqBp6H,UACzDwJ,KAAKU,OAAOyQ,OAAOnR,KAAK4wH,qBAAqBp6H,UAE/C,IAAK,MAAMqxB,SAAS7nB,KAAKkpB,eACvB,IACElpB,KAAK8zH,cAAcjsG,OACnB,MAAOjd,OACP5K,KAAKuzH,eAAe1rG,MAAOjd,MAAM+9B,YAGrC3oC,KAAKkpB,eAAe8/F,QAgFtBgC,WACE,MAAO,CACLtqH,OAAQV,KAAKU,OACbkwH,qBAAsB5wH,KAAK4wH,sBAI/BmD,cAAclqG,KACZ,IAAK,MAAMhC,SAAS7nB,KAAK2oB,OAAQ,CAC/B,MAAMgqG,UAAY3yH,KAAKsrH,WAAWzjG,MAAMtL,MACxC,IAAKo2G,UACH,SAEF,MAAMqB,aAAerB,UAAUpH,cAC/B,IAAK,MAAM5hG,WAAWqqG,aAAc,CAClC,MAAMz7H,OAAcoxB,QACpB,GAAIpxB,OAAOi8D,KACJx0D,KAAKszH,mBAAmBzrG,MAAMtL,KAAMhkB,OAAOi8D,IAC9C,SAKJ,MAAMv3B,SAAWj9B,KAAK4xH,eAAe/pG,MAAMtL,MACvC0gB,WACF1kC,OAAO0kC,SAAWA,UAEpBj9B,KAAKi0H,sBAAsBpqG,IAAKhC,MAAOtvB,UAK7C07H,sBAAsBpqG,IAAsBhC,MAAcz0B,gBACxD,IAAImF,OAASnF,eACb,OAAQmF,OAAO8a,MACb,KAAK,EACL,KAAK,EACL,KAAK,EACH9a,OAAS,cAAH,GAAQA,OAAR,CAAgBrG,YAAQgZ,IAC9B,MACF,KAAK,EACH3S,OAAS,cAAH,GAAQA,OAAR,CAAgB/C,UAAW,eACjC,MACF,KAAK,EACH+C,OAAS,cAAH,GAAQA,OAAR,CAAgB/C,UAAW,UAGrC+C,OAAS,cAAH,GAAQA,OAAR,CAAgB8vD,gBAAiB,CAAExgC,MAAOA,MAAMtL,QAGtD,MAAM,gBAAEg9E,iBAAoBv5F,KAAK4xH,eAAe/pG,MAAMtL,OAAS,GAG/D,OAAQhkB,OAAO8a,MACb,KAAK,EAAG,OAAOwW,IAAIqqG,MAAM37H,QACzB,KAAK,EAAG,OAAOsxB,IAAIsqG,KAAK57H,QACxB,KAAK,EAAG,OAAOsxB,IAAIuqG,OAAO77H,QAC1B,KAAK,EAAG,OAAOsxB,IAAIwqG,SAAS97H,QAC5B,KAAK,EACH,OAAIghG,kBAAoBC,qDACf3vE,IAAIyqG,gBAAgB/7H,QAEtBsxB,IAAI0qG,UAAUh8H,QACvB,KAAK,EACH,OAAIghG,kBAAoBC,qDACf3vE,IAAIyqG,gBAAgB/7H,QAEtBsxB,IAAI2qG,SAASj8H,QACtB,KAAK,EAAG,OAAOsxB,IAAI4qG,SAASl8H,QAC5B,KAAK,EAAG,OAAOsxB,IAAI/M,WAAWvkB,QAC9B,KAAK,EAAG,OAAOsxB,IAAI33B,OAAOqG,QAC1B,KAAK,EAAG,OAAOsxB,IAAIpyB,KAAKc,QAExB,KAAK,GAAI,OAAOsxB,IAAI6qG,aAAan8H,QACjC,KAAK,IAAK,OAAOsxB,IAAIzG,KAAK7qB,QAC1B,KAAK,IAAK,OAAOsxB,IAAI8qG,WAAWp8H,QAChC,KAAK,IAAK,OAAOsxB,IAAI+qG,WAAWr8H,QAChC,KAAK,IAAK,OAAOsxB,IAAIgrG,UAAUt8H,QAC/B,KAAK,IAAK,OAAOsxB,IAAIirG,cAAcv8H,QACnC,KAAK,IAAK,OAAOsxB,IAAIkrG,kBAAkBx8H,QACvC,SACE,cAAAurB,kBACGE,gBACAuB,oBAAoBqE,qBAAqBC,IAAKhC,MAAMtL,KAAMhkB,OAAQyH,KAAKuzH,oB,6IC9oBlF,I,IAAA,gCACA,O,IAAA,0B,qMAIA,MAAMv/E,UAAY,CAAElG,IAAK,EAAGC,KAAM,GAElC,MAAMinF,oBAIJv6H,YAAYkvB,QAAyB2yB,aAAmB,kFACtDt8C,KAAK2pB,QAAUA,QACf3pB,KAAKs8C,YAAcA,YAMrBnrC,OAAOwY,QAAyB2yB,aAC9Bt8C,KAAK2pB,QAAUA,QACf3pB,KAAKs8C,YAAcA,YAGrB24E,UAAU/7C,aAER,IAAKA,YACH,OAAO,EAET,MAAM24C,SAAW7xH,KAAKk1H,cACtB,IAAKrD,SAGH,OAAO,EAGT,GAAI7mB,iBAASQ,QAAQqmB,SAAU79E,WAE7B,OAAO,EAKT,MAAMmhF,UAAYnqB,iBAASnhF,IAAI7pB,KAAKs8C,YAAau1E,UAEjD,OAAO7mB,iBAASoqB,cAAcl8C,YAAai8C,WAG7CD,cAEE,OADiBl1H,KAAK2pB,QACRkoG,SAKhBwD,cACE,QAASr1H,KAAKk1H,e,gBAMH,MAAuB,6CACQ,IAAIjqH,KADZ,6BAEtB,CAAE6iC,IAAK,EAAGC,KAAM,IAE9BikF,SAASsD,OACP,IAAKA,MACH,OAG0BtqB,iBAASoqB,cAAcp1H,KAAKs1H,MAAOA,SAG7Dt1H,KAAKsuD,QAAQhkB,QAAQ,CAAC/xC,OAAQwH,OACKirG,iBAASoqB,cAAc78H,OAAO+jD,YAAag5E,QAE1Et1H,KAAKsuD,QAAQgW,OAAOvkE,OAGxBC,KAAKyyH,SAEPzyH,KAAKs1H,MAAQA,MAGf7C,QAEEzyH,KAAKsuD,QAAQhkB,QAAQ,CAAC/xC,OAAQwH,OACvBxH,OAAO88H,eACVr1H,KAAKsuD,QAAQgW,OAAOvkE,OAK1Bw1H,SAASx1H,IAAauP,MACpB,MAAMkmH,SAAWx1H,KAAKsuD,QAAQ1kD,IAAI7J,KAC9By1H,SACFA,SAASrkH,OAAO7B,KAAMtP,KAAKs1H,OAE3Bt1H,KAAKsuD,QAAQ9kC,IAAIzpB,IAAK,IAAIi1H,oBAAoB1lH,KAAMtP,KAAKs1H,QAI7DzB,UAAUhsG,MAAetvB,QACvB,MAAM,KAAEgkB,MAAShkB,OACjB,IAAKgkB,KACH,OAAOtY,QAAQ2G,MAAM,wCAAyCrS,QAEhEyH,KAAKu1H,SAASh5G,KAAMhkB,QAGtBi7H,aAAaj3G,MACX,IAAKA,KACH,OAAOtY,QAAQ2G,MAAM,4CAEvB5K,KAAKsuD,QAAQgW,OAAO/nD,MAGtBk3G,YACEzzH,KAAKsuD,QAAQ06D,QAGf/kD,WAAWp8C,MAAe8B,SACxB,GAAIA,QAAQkoG,SAAU,CAGpB7xH,KAAKsuD,QAAQgW,OAAOz8C,OAGpB,MAAM9nB,IAAO,GAAE8nB,SAASs9C,cAAKC,OAC7BplE,KAAKu1H,SAASx1H,IAAK4pB,aACd,CAGL,IAAK,MAAM5pB,OAAOC,KAAKsuD,QAAQnjB,OACI,IAA7BprC,IAAI+qC,QAAWjjB,MAAF,MACf7nB,KAAKsuD,QAAQgW,OAAOvkE,KAGxBC,KAAKu1H,SAAS1tG,MAAO8B,UAIzB4hG,cACE,MAAMxxH,OAAS,GASf,OARAiG,KAAKsuD,QAAQhkB,QAAQ,CAAC/xC,OAAQwH,OAExBxH,OAAO88H,eAAiB98H,OAAO08H,UAAUj1H,KAAKs1H,OAChDt1H,KAAKsuD,QAAQgW,OAAOvkE,KAEpBhG,OAAOygC,KAAKjiC,OAAOoxB,WAGhB5vB,U,iTCrJX,MAAMkX,MAAM,yCACIC,OAAO0iH,kBADX,2BAEI1iH,OAAOukH,kBAGrBtkH,OAAO1X,OACLuG,KAAKhL,IAAM9D,KAAK8D,IAAIgL,KAAKhL,IAAKyE,OAC9BuG,KAAK0jB,IAAMxyB,KAAKwyB,IAAI1jB,KAAK0jB,IAAKjqB,OAGhC29B,QACEp3B,KAAKhL,IAAMkc,OAAO0iH,iBAClB5zH,KAAK0jB,IAAMxS,OAAOukH,kB,gBAKP,MAKbh7H,cAAc,mGACZuF,KAAKtN,EAAI,IAAIue,MACbjR,KAAKrN,EAAI,IAAIse,MACbjR,KAAKpN,EAAI,IAAIqe,MAIfE,OAAO5P,OACLvB,KAAKtN,EAAEye,OAAO5P,MAAM7O,GACpBsN,KAAKrN,EAAEwe,OAAO5P,MAAM5O,GACpBqN,KAAKpN,EAAEue,OAAO5P,MAAM3O,GAGtBwkC,QACEp3B,KAAKtN,EAAE0kC,QACPp3B,KAAKrN,EAAEykC,QACPp3B,KAAKpN,EAAEwkC,W,6ICzCX,oCACA,+BACA,O,4WAAA,yBACA,iEAGA,yDACA,gEACA,wDACA,sCACA,iDACA,+CAEA,yCACA,8C,kqBAEA,MAAMwgC,qBAAuBzhC,0BAAO2e,GAAI;gBACxBh5C,6BAAOu8D;WACZv8D,6BAAOw8D;;EAGZT,OAAS1hC,0BAAOoiC,EAAG;;;;;;EAQnBT,UAAY3hC,0BAAOnb,CAAE;;EAIrB06G,eAAiBv/F,0BAAO2e,GAAI;WACvBh5C,6BAAOw8D;;EAIlB,SAASF,YAAW,SAClB3uC,SADkB,iBAElBksG,iBAFkB,YAGlBtiE,YAHkB,cAIlB1sB,cAJkB,iBAKlBC,iBALkB,SAMlB3J,SANkB,UAOlBzD,YAUA,MAAMkQ,QAAS,uBAAAR,gCAA+Bzf,UAC9C,IAAKigB,OACH,MAAM,IAAIhyC,MAAO,0CAAyC+xB,UAG5D,OACE,6BAAC,uBAAD,KACE,6BAACisG,eAAD,KACE,6BAAChsF,OAAD,CACE/f,QAASgsG,iBACThvF,cAAeA,cACf1J,SAAUA,SACV2J,iBAAkBA,mBAEpB,6BAAC,gBAAD,CACEzT,UAAU,0BACV/sB,MAAO,CAAEsyD,UAAW,GACpBzlC,QAAS,KAAM,0BACb,MAAM2iG,yBAA0B,wDAAAh9D,iCAAgCp/B,kBAAhC,uDAA4Cg/B,mBAAoB,GAChG5xB,iBAAiBgvF,wBAAwBviE,gBAL7C,uB,aA6GOvhE,eAAM6jB,MAtFrB,UAA4B,oBAC1BiyG,oBACAA,qBAAqB,SAAEn+F,SAAUlN,KAAMid,WAFb,iBAG1Bke,iBAH0B,WAI1BxsB,WAJ0B,oBAK1BmgG,oBAL0B,uBAM1BhzE,uBAN0B,cAO1B9vB,gBAEA,MAAMqe,kBAAmB,SAAAhtC,aACtBqjC,WACyB,mBAAbA,WAA2B,UAAAotB,SAAQptB,UAE5C/R,WAAW,CAAE3C,eAAe,UAAA1S,MAAK0S,cAAe,CAACiR,cAGnDtO,WAAW,CACT3C,cAAe,cAAF,GACRA,cADQ,CAEX,CAACiR,WAAgC,mBAAbyD,SAA0BA,SAAS1U,cAAciR,YAAc,IAAMyD,cAI/F,CAAC/R,WAAYsO,UAAWjR,gBAGpBoe,eAAgB,SAAA/sC,aACpB,CAACqhC,UAAmBxhC,SAClBmtC,iBAAkBG,aAAD,iBAAuBA,YAAvB,CAAoC,CAAC9L,WAAYxhC,UAEpE,CAACmtC,mBAGGysB,YAAc75B,UAAUvC,WAAW+6B,uCAAwB,EAAI,EAC/D6jE,iBAAmC,IAAhBxiE,YAAoB75B,UAAUmY,OAAOqgB,sCAAqB/7C,QAAUujB,UAEvFs8F,WACJ,6BAAC19D,WAAD,CACEu9D,iBAAkBtK,oBAClBh4D,YAAaA,YACb5pC,SAAUA,SACVkd,cAAeA,cACfC,iBAAkBA,iBAClB3J,SAAU1U,cAAciR,YAAc,GACtCA,UAAWq8F,mBAGf,OACE,6BAAC,cAAAE,sBAAD,KACE,6BAAC,eAAD,CACEC,eAAgB,IAAM39E,4BAAuBntC,GAC7C+qH,aAAc,CACZvlH,UAAW,sBACXD,SAAU,IACV6iC,QAAS,OACT+sB,cAAe,WAEjB,6BAACzI,qBAAD,KACE,6BAACC,OAAD,KAAS+vD,oBAAoBrrG,MAC7B,6BAACu7C,UAAD,KAAY8vD,oBAAoBn+F,UAC/BiuB,iBACC,oCAAKvkB,UAAU,iBACb,6BAAC,MAAA4kC,KAAD,CACEm+D,UAAY,GAAE7iE,YACd/wB,SAAWkxD,SACT,MAAM2iC,oBACO,MAAX3iC,OAAiBqiC,iBAAoB,GAAE7jE,wCAAuB6jE,mBAChEx9E,uBAAuB,CAAE5uB,kBAAUlN,KAAM45G,wBAE3C,6BAAC,MAAAp+D,KAAKG,QAAN,CAAc/K,IAAK,OAAQptD,IAAK,KAC7B+1H,YAEH,6BAAC,MAAA/9D,KAAKG,QAAN,CAAc/K,IAAK6E,sCAAsBjyD,IAAK,KAC3C+1H,cAKPA,iB,qGClLZ,8MAAIpiB,SAAW/1G,OAAOkzD,QAAU,SAAUtxD,QAAU,IAAK,IAAI9M,EAAI,EAAGA,EAAI4Z,UAAU4J,OAAQxjB,IAAK,CAAE,IAAImgH,OAASvmG,UAAU5Z,GAAI,IAAK,IAAIsN,OAAO6yG,OAAcj1G,OAAOg2G,UAAUC,eAAeC,KAAKjB,OAAQ7yG,OAAQR,OAAOQ,KAAO6yG,OAAO7yG,MAAY,OAAOR,QAKvO,mCACd,IAAI,OACF6zB,OAAS,IACPo1C,KACAj3E,MAPN,SAAkCu/C,IAAK3F,MAAQ,IAAI5rC,OAAS,GAAI,IAAK,IAAI9M,KAAKq+C,IAAW3F,KAAKL,QAAQr4C,IAAM,GAAkBkL,OAAOg2G,UAAUC,eAAeC,KAAK/iE,IAAKr+C,KAAc8M,OAAO9M,GAAKq+C,IAAIr+C,IAAM,OAAO8M,OAOrMu0G,CAAyBtrC,KAAM,CAAC,WAE5C,OAAO,6CAAMlpB,cACX,MACAo0D,SAAS,CAAEt/G,MAAO,MAAOQ,OAAQ,MAAOm/G,QAAS,cAAe9qG,KAAM,OAAQ+qG,MAAO,8BAAgCziH,OACrH,6CAAM+tD,cAAc,UAAW,CAAEu3B,GAAI,UAAWC,GAAI,UAAWsrC,GAAI,SAAUC,GAAI,QAASp5G,KAAM,YAChG,6CAAMq2C,cAAc,OAAQ,CAAE93C,EAAG,mFAAoFyB,KAAM,YAC3H,6CAAMq2C,cACJ,OACA,CAAEj2C,GAAI,IAAKJ,KAAM,QACjB,6CAAMq2C,cAAc,OAAQ,CAAE93C,EAAG,yJAEnC,6CAAM83C,cAAc,OAAQ,CAAE93C,EAAG,uoBAAwoByB,KAAM,UAAW3T,KAAM,YAChsB,6CAAMgqD,cAAc,SAAU,CAAEu3B,GAAI,SAAUC,GAAI,SAAU1lF,EAAG,SAAU6X,KAAM,UAAWkkF,OAAQ,UAAWC,YAAa,MAC1H,6CAAM9tC,cAAc,SAAU,CAAEu3B,GAAI,SAAUC,GAAI,SAAU1lF,EAAG,SAAU6X,KAAM,UAAWkkF,OAAQ,UAAWC,YAAa,MAC1H,6CAAM9tC,cAAc,OAAQ,CAAE5sD,EAAG,UAAWC,EAAG,UAAWyB,MAAO,QAASQ,OAAQ,SAAUwtH,GAAI,OAAQppF,UAAW,kCAAmC/vB,KAAM,UAAWkkF,OAAQ,UAAWC,YAAa,MACvM,6CAAM9tC,cAAc,OAAQ,CAAE93C,EAAG,2DAA4D2lF,OAAQ,UAAWC,YAAa,MAC7H,6CAAM9tC,cACJ,OACA,CAAEj2C,GAAI,IAAKJ,KAAM,QACjB,6CAAMq2C,cAAc,OAAQ,CAAE93C,EAAG,sJAEnC,6CAAM83C,cAAc,OAAQ,CAAE93C,EAAG,w6BAAy6ByB,KAAM,UAAW3T,KAAM,YACj+B,6CAAMgqD,cAAc,OAAQ,CAAE93C,EAAG,+EAAgF2lF,OAAQ,UAAWC,YAAa,IAAK6mB,cAAe,a,kLCyH1J,SAASmiB,iBAAgB,2BACtC3kE,2BADsC,eAEtCja,eAFsC,SAGtC5lD,SAHsC,2BAItC8hE,2BAJsC,WAKtClwB,WALsC,+BAMtC4wB,+BANsC,4BAOtChB,4BAPsC,2BAQtC4C,2BARsC,iBAStCte,iBATsC,UAUtCvD,UAVsC,iBAWtCqhB,iBAXsC,uBAYtCnd,uBAZsC,wBAatCL,wBAbsC,0BActCC,0BAdsC,uBAetCoc,uBAfsC,kBAgBtCnc,kBAhBsC,mBAiBtCC,mBAjBsC,iBAkBtC/D,iBAlBsC,MAmBtChgD,QAEA,MAAMiiI,WAAajiI,MA1IS,GA2I5B,OAAOxC,SACJqtB,OAAO,EAAGlf,WAAUi2D,2BAA2Bj2D,MAC/CmJ,IAAKoG,OACJ,MAAM,IAAEvP,IAAF,kBAAO63C,mBAAsBtoC,KAC7ByoC,gBAAkBL,iBACpB,CAAC0b,4BAA4B9jD,KAAM,GAAI8jD,4BAA4B9jD,KAAM,IACzE,CAAC8jD,4BAA4B9jD,KAAM,IAEjCwoC,sBAAwBC,gBAAgB,KAAMA,gBAAgB,IAC9Du+E,cAAgBhnH,KAAKqoC,kBAAkB,IAAMroC,KAAKqoC,kBAAkB,GAEpEse,YAAc7hB,mBAAqBE,2CAAoBO,cAAcp7C,MACrEy8D,cAAgB9hB,mBAAqBE,2CAAoBM,eAAen7C,MAG9E,GAAIm+C,oBAAuBqe,cAAgBne,oBAAwBoe,gBAAkBogE,eACnF,OAAO,KAGT,MAAMC,aAA6B,UAAdjnH,KAAK+D,KAAmB/D,KAAK1d,SAAW,GACvD4nC,UAA0B,UAAdlqB,KAAK+D,KAAmB/D,KAAKkqB,UAAY,GAErDg9F,eACU,UAAdlnH,KAAK+D,KACDojH,kBAAkB,CAChBhlE,sDACAja,8BACA4c,8DACAhB,wDACA1b,kCACAj1B,KAAMnT,KACN2mD,0BAEF,GAEAroB,SAAW,GACbpU,WACFoU,SAASpT,KACP,6BAACk8F,WAAD,CAAY32H,IAAK6tC,SAAS33B,QACxB,6BAAC0gH,aAAD,KACE,0CACE,uCACE,iDACA,uCACE,uCAAKn9F,aAGM,UAAdlqB,KAAK+D,MAAoB/D,KAAKma,UAC7B,uCACE,gDACA,uCACE,uCAAKna,KAAKma,gBAStBna,KAAK2nD,aACPrpB,SAASpT,KAAK,6BAACo8F,mBAAD,CAAoB72H,IAAK6tC,SAAS33B,QAAS3G,KAAK2nD,cAGhE,MAAMvxC,MACJ,6BAAC,qBAAD,UACE8xB,eAAgBA,eAChBc,sBAAuBob,2BAA2B3zD,KAClDyjC,WAAYA,WACZiU,YAAa8+E,aAAatgH,OAAS,GAAKugH,eAAevgH,OAAS,EAChEyhC,iBAAkBA,iBAClBvD,UAAWA,UACX1xB,KAAMnT,KACNwoC,mBAAoBA,mBACpBM,YAAaod,iBAAiBlmD,KAAKvP,KACnCs4C,uBAAwBA,uBACxBL,wBAAyBA,wBACzBC,0BAA2BA,0BAC3BC,kBAAmBA,kBACnBC,mBAAoBA,mBACpBJ,gBAAiBA,gBACjB3jD,MAAOiiI,YACFzoF,SAAS33B,OAAS,CAAE23B,wBAAa1iC,IAIpCgsD,cAAgB,GA4CtB,MA3CkB,UAAd5nD,KAAK+D,MAAoBmjH,eAAevgH,OAAS,GACnDihD,cAAc18B,SACT,iCAAqB,CACtB5oC,SAAU4kI,eAAe/6E,MAAK,wBAAY,cAC1C2X,wDACA4C,sDACAte,kCACAvD,oBACA6D,gDACAqc,8CACAwB,UAAWvmD,KACXlb,MAAOiiI,WACP77E,sBACGkZ,2BAA2B3zD,MAAQ2zD,2BAA2B3zD,KAAKy6C,uBAA0B,GAChGhX,yBAIF+yF,cACFr/D,cAAc18B,QACT47F,gBAAgB,CACjB3kE,sDACAja,8BACA5lD,SAAU2kI,aACVnjE,wDACA4C,sDACA5B,8DACA1c,kCACAvD,oBACA6D,gDACAC,oDACAoc,8CACAnc,oCACAC,sCACA/D,kCACAohB,kCACAnd,8CACAqb,sDACAt/D,MAAOiiI,WACP7yF,yB,8ZAIN,EACEzjC,QACA2lB,aACIwxC,cAAcjhD,OAAS,CAAErkB,SAAUslE,oBAAkBhsD,EAH3D,CAKEipB,UAAW2jB,uBAGd74B,OAAO+zB,U,+DAjTZ,mCACA,sDACA,iEAEA,wEACA,+DAgBA,wCACA,4DACA,iDACA,yCACA,8DACA,8C,qhBAE8B,GAEvB,MAAMoH,SAAWjkB,0BAAO2e,GAAI;;;4BAI5B,MAAMuuB,QAAUltC,0BAAO2e,GAAI;;;0BAKlC,MAAM4hF,WAAavgG,0BAAO2e,GAAI;;;;;;;;EASxB8hF,oBAAqB,6BAAOF,WAAY;;;EAKxCC,aAAexgG,0BAAO8uD,KAAM;;;;;;;;;;;aAWrBnpF,6BAAOm/C;;EA4Bb,SAASw7E,mBAAkB,2BAChChlE,2BADgC,eAEhCja,eAFgC,+BAGhC4c,+BAHgC,4BAIhChB,4BAJgC,iBAKhC1b,iBALgC,KAMhCj1B,KANgC,YAOhCwzC,cAUA,MAAMz8B,UAAY/W,KAAK+W,UACjBq9F,kBAAoB,IAAInjI,IAAK8lC,WAAai4B,2BAA2Bj4B,YAAe,IACpFs9F,qBAAuB,IAAIpjI,IAC9B8lC,WAAake,kBAAoB+Z,2BAA4B,GAAEO,wCAAuBx4B,cAAiB,IAEpGu9F,kBAAmB,UAAA19F,MAAK,IAAI19B,MAAMwuC,KAAK0sF,sBAAuBl7H,MAAMwuC,KAAK2sF,wBACzEE,QAAUt/E,iBAAmB,CAAC,EAAG,GAAK,CAAC,GAC7C,OAAO,sBAAUq/E,iBAAmBhlE,YAClC,MAAMklE,cAAe,gBAAAzjE,iBAAgB,CAAEh6B,oBAAWu4B,sBAC5Cla,YAAa,gBAAA2b,iBAAgB,CAAEh6B,oBAAWu4B,oBAAWgB,iBAAiB,IACtEmkE,cAAgB,CACpBn3H,IAAKk3H,aACLp/E,sBACAka,oBACApa,kBAAmBq/E,QAAQ9tH,IAAKoxC,WAChB,IAAdA,UAAkBw8E,qBAAqB3yH,IAAI4tD,WAAa8kE,kBAAkB1yH,IAAI4tD,YAEhFolE,gBAAiBH,QAAQ9tH,IACtBoxC,WACC9C,eAAerzC,IAAkB,IAAdm2C,UAAkBzC,WAAao/E,eAClD7iE,+BAA+B56B,UAAW8gB,YAE9C88E,uBAAwBJ,QAAQ9tH,IAAKoxC,WAAc8Y,4BAA4B3wC,KAAM63B,UAAWyX,aAG5F6qB,QAAUs6C,cAAcE,uBAAuB,IAAMF,cAAcE,uBAAuB,GAEhG,IAAI30G,KAAKm1B,oBAAqBqe,aAAgB2mB,QAG9C,OAAOs6C,kB,sICjGI,UAA8B,SAC3CtlI,SAD2C,4BAE3CwhE,4BAF2C,2BAG3C4C,2BAH2C,iBAI3Cte,iBAJ2C,UAK3CvD,UAL2C,sBAM3CqG,sBAN2C,wBAO3CxC,wBAP2C,uBAQ3Cqc,uBAR2C,UAS3CwB,UAT2C,MAU3CzhE,MAV2C,WAW3CovC,aAEA,OAAO5xC,SACJqtB,OAAO,EAAGlf,WAAUi2D,2BAA2Bj2D,MAC/CmJ,IAAI,EAAGnJ,QAAKgyD,oBAAWolE,gCAAiBx/E,oCAAmBy/E,kDAC1D,MAAMt/E,sBAAwBs/E,uBAAuB,KAAMA,uBAAuB,IAC5Ev+E,SAAWzkD,OAAS+/C,UAAY,EAAmB,EAAf2E,yBA5CtB,GA6Cdu+E,mBAAqBxhE,UAAUle,kBAAkB,IAAMke,UAAUle,kBAAkB,GACnFoB,aAAerB,iBAAyC,EAAtBsB,sCAA0BA,sCAE5Ds+E,eAAiBz+E,UADEw+E,mBAAqBt+E,aAAew+E,uBAAYA,wBACpBC,GAG/C38E,mBACoB,QAAxBgb,UAAUr8B,WAA+C,cAAxBq8B,UAAUr8B,UAA4B,cAAgB,cAEnF9T,MACJ,6BAAC,aAAA8zB,aAAD,CACEC,eAAgB3B,mBAChB1xC,MAAO,CACLhS,MAAOykD,SACP/jB,WAAa,UAEf,6BAAC,aAAA4kB,MAAD,KACE,6BAAC,kBAAD,CACEvF,UAAWA,UACX1jC,SAAU6mH,eACVjjG,YAAa09B,UACbv4B,UAAW,GACXmgB,WAAYnW,cAGhB,6BAAC,aAAA2W,cAAD,KACGk9E,oBACC,6BAAC,aAAAj9E,SAAD,KACGzC,kBAAkBzuC,IAAI,CAACmxC,UAAWgZ,cACjC,6BAAC,0BAAD,CACEhZ,UAAWA,UACXt6C,IAAKszD,YACL7/B,SAAW,qBAAoBzzB,aAAaszD,cAC5C5Y,QAAS08E,gBAAgB9jE,aACzBzY,YAAa,IAAM5C,wBAAwBj4C,IAAKszD,YAAawC,UAAUr8B,WACvEkhB,SAAU,IAAM2Z,uBAAuB,CAAE76B,UAAWq8B,UAAUr8B,UAAWu4B,oBAAWsB,0BACpF9Y,cAAeC,sBAAsB6Y,aACrCxY,mBAAoBA,mBACpBpB,iBAAkB29E,uBAAuB/jE,iBAKjD,6BAAC,aAAAhY,oBAAD,QAIN,MAAO,CAAEt7C,QAAK2lB,gBA3GpB,0DAEA,4DAEA,qCACA,uCAQA,kB,4WAAA,4B,0NCOe,UAAuB,UAAE27D,UAAY,GAAd,WAAkB1nC,WAAa,KACnE,IAAKA,WACH,OAAO0nC,UAGT,OACE,6BAACo2C,eAAD,KACE,6BAAC,6BAAD,CACEC,YAAU,EACVC,mBAvBoB,6BAwBpBC,YAAa,CAACj+E,YACdk+E,gBAAiBx2C,cA/BzB,0DACA,uEACA,iEAEA,8C,kFAEA,MACMo2C,eAAiBthG,0BAAOC,IAAK;KADP;aAGft6B,6BAAOo3B;;;;yIC+BL,UAA4B,SAAE0a,SAAF,KAAYn2C,KAAZ,cAAkBkqF,cAAlB,MAAiCv7E,MAAjC,gBAAwC0xH,kBACjF,MAAMC,aAAe7mI,KAAKwyB,IAAI,EAAGjsB,KAAKwe,QAAU0rE,eApCX,KAqC/Bq2C,UAAYvgI,KAAKk6C,OAAO,EAAGomF,cAC3BE,QAAUxgI,KAAKk6C,OAAOomF,cAEtBG,KACJ,oBAACC,oBAAD,CAAqB/xH,MAAOA,OAC1B,oBAACgyH,OAAD,KAASJ,WACT,oBAACK,KAAD,KAAOJ,UAGX,OAAOrqF,SACL,oBAAC,iBAAD,CAAS8F,SAAU9F,SAAU+F,UAAU,SAAS+0C,aAAcovC,iBAC3DI,MAGHA,M,mEAxDJ,U,4WAAA,yBACA,iEAEA,yD,kHAEuC,GAEhC,MAAMC,oBAAsBhiG,0BAAO2e,GAAI;;;;;kDAO9C,MAAMsjF,OAASjiG,0BAAO2e,GAAI;;;;;EAOpBujF,KAAOliG,0BAAO2e,GAAI;;;;;;;;;yIC2BT,UAA2B,UACxCxsB,UADwC,gBAExCu5C,gBAFwC,WAGxC32C,WAHwC,iBAIxCy2C,iBAJwC,eAKxCe,eALwC,cAMxCd,gBAEA,OACE,6BAAC02D,mBAAD,KACE,6BAACt+E,aAAD,CACE5zC,MAAO,CACLlP,gBAAiB2qE,gBAAkB,cAAgB,UACnDkwB,QAASlwB,gBAAkB,IAAM,IACjCqhD,WAAa,sBAEf,6BAAC,cAAD,CACEhpE,aAAc,CAAEvG,UAAW,MAAOD,SAAU,6BAAC,0BAAD,CAAkBvI,KAAM,CAAC,QACrE3X,SAAS,oBACT8/C,OAAQzR,gBACR/nB,MAAI,EACJ+I,QAAM,EACN5vB,QAAS,IAAM0uC,kBAAkBC,gBACjC,6BAAC,gBAAD,QAGJ,6BAAC5nB,aAAD,CACE5zC,MAAO,CACL4yB,UAAY,iBAAgB6oC,gBAAkB,EAAI,QAClDkwB,QAASlwB,gBAAkB,IAAM,IACjCqhD,WAAa,uBACbwB,cAAe7iD,gBAAkB,QAAU,SAE7C,6BAAC,cAAD,CACE3nB,aAAc,CAAEvG,UAAW,MAAOD,SAAU,oBAC5C7f,OAAK,EACLimB,MAAI,EACJw5B,OAAQhrD,UACR2K,QAAS,KAEP0uC,kBAAiB,GACjBz2C,WAAW,CAAE5C,WAAYA,WAAa,CAAEqG,iBAAiB,KAE3DvoB,MAAO,CAAE1K,MAAO4sB,UAAYxsB,6BAAO+9C,UAAY/9C,6BAAO23G,QACtD,6BAAC,aAAD,QAGH/wC,gBACC,6BAAC,iBAAD,CAAShvB,SAAS,6CAA6CC,UAAU,OACvE,6BAAC4kF,aAAD,S,+BAjGV,8DACA,uDACA,sDACA,iEAGA,sDACA,oEACA,yDACA,8C,0GAE+B,GAC/B,MAAMD,mBAAqBniG,0BAAO2e,GAAI;;;YADP;;EAQzByjF,aAAepiG,0BAAO2e,GAAI;;;;;;;sBAOVh5C,6BAAOm+C;EAIvBD,aAAe7jB,0BAAO2e,GAAI;;;;;;;yICrBjB,UAA0C,aACvDwzE,aADuD,WAEvDn5D,WAFuD,qCAGvDw5D,uCAEA,MAAM,SAAEI,WAAa,gCACfyP,oBAAqB,SAAA5pF,mBAAkB,CAACm6E,WAAW,GAEnD0P,gBAAkBtpE,WACrB92B,SACAnvB,IAAI,EAAGG,SAASA,IAChB4V,OAAO+zB,SACJ0lF,iBAAkB,SAAAvsF,QAAiBssF,iBACzC,GAAID,mBAGFE,gBAAgB73G,QAAU43G,oBACrB,CACL,MAAME,gBAAiB,UAAAv4F,YAAWq4F,gBAAiBC,gBAAgB73G,SAK/D83G,eAAe1iH,SACjByiH,gBAAgB73G,QAAU,IAAI63G,gBAAgB73G,WAAY83G,iBAG9D,MAAMC,aAAeF,gBAAgB73G,QAE/B4wC,4BAA6B,SAAAzlC,SACjC,KACE,MAAMjyB,O,8ZAAS,CAAH,GAAQ4uH,sCACpB,kBAA8BL,aAAahqC,cAAe,OAA/C,KAAE/hE,KAAF,MAAQsL,OAAuC,KACxD9tB,OAAO8tB,OAAS9tB,OAAO8tB,QAAU,GACjC9tB,OAAO8tB,OAAO2S,KAAKje,MAKrB,OAHIq8G,aAAa3iH,SACflc,OAAO,OAAS6+H,cAEX7+H,QAET,CAAC6+H,aAActQ,aAAahqC,cAAeqqC,uCAGvCnzD,kBAAmB,SAAAxpC,SACvB,KAAM,UAAA6sG,SAAQvQ,aAAajtC,cAAe,CAAC5hF,MAAO+/B,aAAc,gBAAAg6B,iBAAgB,CAAEh6B,uBAClF,CAAC8uF,aAAajtC,gBAGVy9C,sBAAuB,SAAApqF,aAAY8mB,kBAEzC,MAAO,CAAE/D,sDAA4B+D,iBAAkBsjE,uBA5DzD,I,IAAA,+BACA,8BAGA,wCACA,oB,IAAA,2B,iCACA,gC,mTCNA,uCAMA,kB,8VAHA,4BAGA,yB,glBAEA,MAAMC,eAAiB,CAAErmI,EAAG,EAAGC,EAAG,EAAGC,EAAG,GAClComI,kBAAoB,CAAEtmI,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGuI,EAAG,GAE3C89H,mBAAqB,CACzB5vH,GAAI,GACJsvB,OAAQ,CACNC,SAAU,GACV7yB,MAAO,CACL+nC,IAAK,EACLC,KAAM,IAGVymB,GAAI,UACJnhD,KAAM,EACN1P,OAAQ,GAGJu1H,kBAAoB,CAAExmI,EAAG,GAAKC,EAAG,IAAMC,EAAG,KAO1CumI,YAAct6H,eAAKu6H,WAAW,EAAG,EAAG,GAQpCC,WAA0B,CAAC,cAAD,GAEzBJ,mBAFyB,CAG5B9lI,MAAO,cAAF,GAAO+lI,mBACZ9mI,KAAM,CACJoE,SAAU,cAAF,GAAOuiI,gBACfh8H,YAAa,cAAF,GAAOi8H,oBAEpB3vH,GAAI,IACJ3N,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,GAC9B0gI,WAAYz6H,eAAKu6H,WAAW,EAAG,EAAG,KAVN,iBAazBH,mBAbyB,CAc5B9lI,MAAO,cAAF,GAAO+lI,mBACZ9mI,KAAM,CACJoE,SAAU,cAAF,GAAOuiI,gBACfh8H,YAAa,cAAF,GAAOi8H,oBAEpB3vH,GAAI,IACJ3N,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,GAC9B0gI,WAAYz6H,eAAKu6H,WAAW,EAAG,EAAG,KArBN,iBAwBzBH,mBAxByB,CAyB5B9lI,MAAO,cAAF,GAAO+lI,mBACZ9mI,KAAM,CACJoE,SAAU,cAAF,GAAOuiI,gBACfh8H,YAAa,cAAF,GAAOi8H,oBAEpB3vH,GAAI,IACJ3N,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,GAC9B0gI,WAAYz6H,eAAKu6H,WAAW,EAAG,EAAG,MAIhCG,gBAAkB,CAAC,EAAG,EAAG,EAAG,GAoB5BC,oBAAsB,CAACnwH,GAAY2vB,UAAsBgmD,kBACtDq6C,WAAWnwH,IAAKuwH,MAnBa,EAACpwH,GAAY2vB,UAAsBygG,KAAYz6C,mBACnF,MAAM,WAAEs6C,WAAYjwH,GAAIqwH,QAAWD,KACnC16H,eAAK46H,WAAWJ,gBAAiBJ,YAAaG,YAC9C,MAAMlnI,KAAO,CACXoE,SAAU,cAAF,GAAOuiI,gBACfh8H,YAAa,CAAErK,EAAG6mI,gBAAgB,GAAI5mI,EAAG4mI,gBAAgB,GAAI3mI,EAAG2mI,gBAAgB,GAAIp+H,EAAGo+H,gBAAgB,KAKzG,OAFAvgG,UAAU3qB,MAAMjc,KAAMA,KAAM4sF,iBAE5B,iBACKy6C,KADL,CAEEpwH,GAAK,GAAEA,MAAMqwH,aACbn9G,KAAO,GAAElT,MAAMqwH,aACftnI,aAK8BwnI,CAA8BvwH,GAAI2vB,UAAWygG,KAAMz6C,kBAG/E66C,kBAAoB,CAACxwH,GAAY2vB,UAAsBgmD,mBAC3D,MAAM86C,SA1Ec,CACpBtjI,SAAU,cAAF,GAAOuiI,gBACfh8H,YAAa,cAAF,GAAOi8H,oBA4ElB,OAHAhgG,UAAU3qB,MAAMyrH,SAAUA,SAAU96C,iBAEpC86C,SAAStjI,SAAS5D,EAAIknI,SAAStjI,SAAS5D,EAAI,IACrC,CACL+lC,OAAQ,CACNC,SAAU,GACV7yB,MAAO,CACL+nC,IAAK,EACLC,KAAM,IAGVymB,GAAI,UACJ7wD,OAAQ,EACRxQ,MAAO,CAAET,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACxB8I,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,GAC9ByQ,GAAOA,GAAF,QACLkT,KAASlT,GAAF,QACPjX,KAAM0nI,SACNzmH,KAAM0mH,kCAAiBC,iBACvBviI,KAAM4R,KAIJ4wH,gBAAkB,CAAC,EAAG,EAAG,GAEzBC,cAAgB,cAAH,GAAQlB,mBAErBmB,wBAA0B,CAAC9wH,GAAY2vB,UAAsBgmD,mBACjE,MAAM,OAAErnD,QAAWqB,UACnB,IAAKrB,SAAWA,OAAOJ,MACrB,MAAO,GAIT,GADAp4B,eAAK44B,eAAekiG,gBAAiBjhG,UAAU1B,QAC3Cz4B,eAAKoX,OAAOgkH,kBAAoB,EAElC,MAAO,GAGT,MAAMG,UAAyB,CAAE5jI,SAAU,cAAF,GAAOuiI,gBAAkBh8H,YAAam9H,eAC/ElhG,UAAU3qB,MAAM+rH,UAAWA,UAAWp7C,iBAEtC,MAAMq7C,WAAa,CAAE7jI,SAAU,cAAF,GAAOuiI,gBAAkBh8H,YAAam9H,eAGnE,OAFAviG,OAAOtpB,MAAMgsH,WAAYA,WAAYr7C,iBAE9B,CAAC,cAAD,GAEAi6C,mBAFA,CAGH7mI,KAAM,CACJoE,SAAU,cAAF,GAAOuiI,gBACfh8H,YAAa,cAAF,GAAOi8H,oBAEpB3vH,GAAOA,GAAF,sBACL3N,MAAO,CAAEtK,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGsH,EAAG,GAC9B1G,OAAQ,CAACkoI,UAAU5jI,SAAU6jI,WAAW7jI,UACxCrD,MAAO,CAELT,EAAG,IACHC,EAAG,IACHC,EAAG,S,gBAMI,MAAkD,yIAGxC,IAHwC,qCAK/C,CAACu8D,WAAwB6vB,mBACvCh/E,KAAKmvD,WAAaA,WAClBnvD,KAAKg/E,gBAAkBA,kBAPsC,qCAqC9Cn1D,MACf,MAAM,WAAE+oC,WAAF,WAAczD,YAAenvD,KACnC,GAAKmvD,WAGL,IAAK,MAAMpvD,OAAO6yD,WAAY,CAC5B,MAAM55B,UAAYh5B,KAAKmvD,WAAWvlD,IAAI7J,KACjCi5B,UAAUzB,OAKfv3B,KAAKs6H,uBAAuBzwG,IAAK9pB,IAAKi5B,UAAWh5B,KAAKg/E,oBAvC1Ds7C,uBAAuBzwG,IAAsBxgB,GAAY2vB,UAAsBgmD,iBAC7E,IAAKhmD,UAAUvB,mBAAmBunD,iBAChC,OAEF,MAAMu7C,oBAAgC,IACjCf,oBAAoBnwH,GAAI2vB,UAAWgmD,oBACnCm7C,wBAAwB9wH,GAAI2vB,UAAWgmD,iBAC1C66C,kBAAkBxwH,GAAI2vB,UAAWgmD,kBAEnC,IAAK,MAAMzmF,UAAUgiI,oBACnB,OAAQhiI,OAAO8a,MACb,KAAK,EACHwW,IAAIqqG,MAAM37H,QACV,MACF,KAAK,EACHsxB,IAAIpyB,KAAKc,QACT,MACF,QACE0L,QAAQ06B,KAAK,qCAAsCpmC,SAK3DkxH,sBAAsB72D,YACpB5yD,KAAK4yD,WAAaA,c,sIC3HP,UAAe,QAC5B3/B,QAD4B,wBAE5Bk0F,wBAF4B,SAG5Bv1H,SAH4B,oBAI5BoZ,oBAJ4B,YAK5BxK,YACAA,aAAa,YAAErC,aANa,UAO5Bk7E,UAP4B,gBAQ5BoxC,gBAR4B,cAS5B95G,cAT4B,YAU5BnK,YAV4B,YAW5BoK,YAX4B,UAY5BnK,UAZ4B,qBAa5Bq4D,qBAb4B,WAc5BnlB,WAd4B,eAe5BilB,eAf4B,mBAgB5BC,mBAhB4B,kBAiB5BE,oBAEA,MAAMttE,sBAAuB,SAAAu6B,SAAQ,KAAM,iBAAA7yB,qCAAoC,GAAI,IACnF,YAlDF,SAAoBsxH,iBAClB,MAAMn8D,QAAU,GACVqkE,UAAY,GAgBlB,OAfA,cAAA7uG,kBACGE,gBACAuB,oBAAoBkD,oBAAoB6hB,QAASnK,QAC3CmuB,QAAQnuB,SACXmuB,QAAQnuB,OAAS,IAEnBwyF,UAAUxyF,OAAUq6F,GAAMlsE,QAAQnuB,OAAO3F,KAAKggG,KAGlD/P,gBAAgBngF,QAASmwF,WACnBA,UACFA,SAAS1G,cAAgBpB,aAItBrkE,QAoDHosE,CAAWjQ,kBApBT,MACJyJ,MADI,KAEJC,KAFI,SAGJM,SAHI,SAIJJ,SAJI,cAKJS,cALI,KAMJ1xG,KANI,kBAOJ2xG,kBAPI,UAQJF,UARI,gBASJP,gBATI,SAUJE,SAVI,UAWJD,UAXI,WAYJI,WAZI,OAaJziI,OAbI,WAcJ0iI,WAdI,OAeJR,OAfI,WAgBJt3G,WAhBI,KAiBJrlB,KAjBI,aAkBJi9H,cAlBF,YAmBK3iI,K,mkBAnBL,oOAqBM4oI,mBAAoB,cAAA72G,kBACvBE,gBACAuB,oBAAoBmD,wBAAwB32B,MAEzC6oI,aAAc,cAAAC,WAAU,CAC5BpjI,KAAOA,KACPqnE,0CACAnlB,sBACAilB,8BACAC,sCACAE,sCAII+7D,sBADwB,wBAAAriC,wBAAuB,iBACAsiC,yBAAiBC,sBAIhEC,YAAa,wBAAAxiC,wBAAuB,cAC1C,IAAIyiC,aAAe,GACfC,gBAAkB,IAAI3G,YAAaD,WACnC0G,aACFC,cAAe,iBAAAE,kCAAiCD,iBAChDA,gBAAkB,IAGpB,OACE,6BAAC,eAAAnqH,UAAD,CACExQ,YAAaA,YACb8K,2BAA4B+tE,UAC5BgiD,WAAW,gCACXrwH,oBAAqBA,oBAIrBkE,uBAAwB,CAAC,cAAe,cAAe,aACvD+jB,QAASA,QACTtiB,cAAeA,cACfnK,YAAaA,YACboK,YAAaA,YACbnK,UAAWA,WACV7U,SACD,6BAAC,UAAA0pI,eAAD,CAAgBC,YAAa,GAAIn4G,MAChCu3G,kBACD,6BAAC,eAAA5/G,MAAD,KAAQogH,iBACR,6BAAC,eAAAK,OAAD,KAAStH,OACT,6BAAC,eAAAuH,OAAD,KAASvpI,QACT,6BAAC4oI,qBAAD,KAAuBnG,YACvB,6BAAC,eAAA/0G,UAAD,KAAY80G,cACZ,6BAAC,eAAAh5G,QAAD,KAAU,IAAI04G,UAAWt3G,aACzB,6BAAC,eAAAtH,UAAD,KAAY6+G,UACZ,6BAAC,eAAAqH,MAAD,KAAQ,IAAIvH,QAASM,WACrB,6BAAC,UAAAkH,YAAD,KAAc/G,YACd,6BAAC,UAAAgH,WAAD,KAAa/G,WACb,6BAAC,eAAAgH,OAAD,CACEN,WAAY,GACZ/nI,SAAUsoI,SACVC,uBAAwB,GACxBz7G,oBAAqB6mG,yBACpByT,aAEH,6BAAC,eAAAoB,eAAD,KAAiBlH,eACjB,6BAAC,eAAA/5G,MAAD,CAAOtpB,qBAAsBA,sBAAuB,IAAIsjI,qBAAsBmG,eAC9E,6BAAC,UAAAe,iBAAD,KAAmB3H,mBAtLzB,I,IAAA,O,4WAAA,yBACA,wCAgBA,yCACA,+CACA,oCACA,oCAQA,sCACA,oB,IAAA,2B,iCA2CA,MAAMwH,SAGG,IAAIngI,MAAMma,IAAiB7M,OAAOC,IAAI,CAACC,EAAG1W,IAAM4sD,OAAO68E,cAFhD,GAEsEzpI,K,+JCjE/E,SACL67D,SAEA,MAAM6tE,cAAgB,GAIhBC,QAAS,UAAAxvB,SACbt+C,QACA,EAAGn7D,YAAOqhE,MAAInhD,aAAY,MAAKmhD,WAAWnhD,eAAelgB,MAAMT,YAAYS,MAAMR,YAAYQ,MAAMP,KAGrG,IAAK,MAAOyW,GAAYgzH,eAAuB,UAAAC,SAAQF,QAAS,CAC9D,MAAMG,YAAcF,YAAY,GAC1BvgI,OAAS,GACTu+B,UAAY,GACZi+D,gBAAkB,GAClBh+E,MAAQ,GACd,IAAK,MAAMqP,WAAW0yG,YAAa,CACjC,MAAM,OAAEnqI,QAAWy3B,QACnB,IAAI6yG,eAAiB,GAOnBA,eANED,YAAYlpH,OAAS0mH,kCAAiB0C,WAMvBC,KAAKxqI,SAAUy3B,QAAQyoG,QAIvBuK,iBAAiBzqI,QAEpC0qI,OAAOviG,UAAWmiG,gBAClBK,WAAW/gI,OAAQ6tB,QAAQjuB,OAASknF,wBAAOK,MAAOu5C,eAAevmH,QAIjE4mH,WAAWvkC,gBAAiB3uE,QAAS6yG,eAAevmH,OAAS,GAC7D4mH,WAAWviH,MAAOqP,QAAQv3B,KAAMoqI,eAAevmH,OAAS,GAI1D,MAAM,OAAE0iB,OAAF,OAAUh1B,OAAV,GAAkB6wD,GAAlB,MAAsBrhE,OAAUopI,YACtCJ,cAAc3hG,KACX,CACC7B,cACAh1B,cACA6wD,MACArhE,YACAf,MAAM,QAAA2+D,aACNj1D,cACA5J,OAAQmoC,UACR/f,YACAg+E,gCACAjvF,MACAgK,KAAM0mH,kCAAiB+C,oBACvBtnI,UAAW,UAKjB,OAAO2mI,eAxET,mCAGA,yCACA,gCAuEA,SAASS,OAAUG,KAAWC,MAC5BA,KAAK1yF,QAASmU,GAAMs+E,KAAKviG,KAAKikB,IAMhC,SAASo+E,WAAcz/H,IAAU3D,MAAUogB,GACzC,IAAK,IAAIpnB,EAAI,EAAGA,EAAIonB,IAAKpnB,EACvB2K,IAAIo9B,KAAK/gC,OASb,SAASijI,KAAQt/H,IAAUsc,aACzB,GAAItc,IAAI6Y,OAAS,EACf,MAAO,GAET,MAAMlc,OAAS,GAETkjI,cAAgBvjH,YAActc,IAAI6Y,OAAS7Y,IAAI6Y,OAAS,EAC9D,IAAK,IAAIld,MAAQ,EAAGA,MAAQkkI,cAAelkI,QACzCgB,OAAOygC,KAAKp9B,IAAIrE,OAAQqE,KAAKrE,MAAQ,GAAKqE,IAAI6Y,SAEhD,OAAOlc,OAMT,SAAS4iI,iBAAoBzqI,QAI3B,OAHIA,OAAO+jB,OAAS,GAAM,GACxB/jB,OAAO07D,MAEF17D,S,gwBClHT,mEACA,8DACA,kEACA,+DACA,kEACA,oE,iOCLA,uCACA,sDACA,wCAEA,4DACA,+C,+qBAOeJ,eAAM6jB,MAAK,UAAqB,SAAE/jB,WAC/C,MAAMsrI,OAAS,GACT5uE,QAAU,GAgChB,OA/BA18D,SAAS04C,QAAQ,CAAC/xC,OAAQ9F,KACxB,GAAI8F,OAAO0kC,UAAY1kC,OAAO0kC,SAAS+8D,YAAa,CAClD,MAAM,KAAE5nG,KAAF,SAAQ6qC,SAAR,gBAAkBorB,iBAAoB9vD,OAC5C2kI,OAAO1iG,KAAK,6BAAC,kBAAD,CAAUz6B,IAAKtN,GAAI,CAAEL,UAAMkK,MAAO2gC,SAAS3gC,OAAS,EAAG+rD,uCAC9D,CACL,MAAM,SAAEprB,UAAa1kC,OACjB0kC,UAAYA,SAASvhC,OAAmC,iBAAnBuhC,SAASvhC,QAChDnD,OAAS,cAAH,GAAQA,OAAR,CAAgBmD,OAAO,uBAAAo4D,mBAAkB72B,SAASvhC,UAGtDuhC,UAAYA,SAASrZ,OACvBrrB,OAAS,cAAH,GACDA,OADC,CAEJpF,MAAO,CACLT,EAAGuqC,SAASrZ,KAAK+1E,YAAcphG,OAAOpF,MAAMT,EAC5CC,EAAGsqC,SAASrZ,KAAKi2E,WAAathG,OAAOpF,MAAMR,EAC3CC,EAAGqqC,SAASrZ,KAAKxN,YAAc7d,OAAOpF,MAAMP,MAKlD,MAAM65D,KAAM,iBAAAxxD,aAAY1C,OAAOnG,KAAKoE,UAC9BuG,aAAc,iBAAA7B,mBAAkB3C,OAAOnG,KAAK2K,aAC5CyH,IAAM3F,eAAKs+H,cAAc,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAIpgI,aAE/CqgI,SAAWv+H,eAAKw+H,YAAY,CAAC,EAAG,EAAG,GAAI5wE,IAAKjoD,IAAK,MACjD84H,UAAYz+H,eAAKw+H,YAAY,CAAC,EAAG,EAAG,GAAI5wE,IAAKjoD,KAAM,KACzD8pD,QAAQ9zB,KAAR,iBAAkBjiC,OAAlB,CAA0BrG,OAAQ,EAAC,iBAAAkJ,aAAYkiI,YAAY,iBAAAliI,aAAYgiI,iBAIpEF,OAAO3rH,OAAO,6BAAC,eAAAiqH,OAAD,CAAQz7H,IAAI,UAAUuuD,a,gKCE9B,UACb18D,UAAU,KAAEQ,KAAF,MAAQkK,MAAQ,EAAhB,MAAmBnJ,MAAQ,CAAET,EAAG,IAAMC,EAAG,IAAMC,EAAG,KAAlD,gBAA0Dy1D,mBAEpE,OAAO,6BAAC,eAAAk1E,UAAD,CAAWnkI,MAAOokI,cAAe,CAAEprI,UAAMkK,YAAOnJ,YAAOk1D,mCAnDhE,uCACA,sDACA,wCAEA,4D,kqBAGAnuD,eAAesjI,eACb,MAAMrjI,eAAiBC,MAAMqjI,mBAC7B,IAAKtjI,SAAS82F,GACZ,MAAM,IAAIv5F,MAAO,6BAA4ByC,SAASE,QAExD,MAAMjB,YAAc,iBAAAkB,gBAAeH,SAAS4X,eACtC4/E,MAAQ,IAAIv4F,MAAMsZ,KAAKi/E,OAGvB54D,YAAc,CAAC,EAAG,EAAG,GAO3B,OANAl6B,eAAKmhC,KAAKjH,YAAa3/B,MAAMsZ,KAAKK,UAAU,GAAG/d,IAAKoE,MAAMsZ,KAAKK,UAAU,GAAG2Q,IAAK,IACjF7kB,eAAK1L,MAAM4lC,YAAaA,aAAc44D,MAAM,GAAGx+F,MAAM,IACrD4lC,YAAY,IAAM,UAClBA,YAAY,IAAM,UAClB44D,MAAM,GAAN,iBAAgBA,MAAM,GAAtB,CAA0B54D,0BAE1B,iBACK3/B,MADL,CAEEsZ,KAAM,cAAF,GACCtZ,MAAMsZ,KADP,CAEFi/E,YAGA+rC,SAAUtkI,MAAMsZ,KAAKgrH,SAASx0H,IAAKmZ,SAAD,iBAC7BA,QAD6B,CAEhCs7G,UAAW1qH,sBAAsB2qH,gB,kDCvCzCh9F,OAAOE,QAAU,sBAA0B,wC,sICkE5B,SAAoBvvC,OACjC,OAAO,oBAAC,eAAA8W,QAAD,UAAS5W,qBAAsByiB,iDAAsC3iB,MAArE,CAA4EG,YAAamjI,cA3DlG,mCACA,M,4WAAA,yBACA,wCAQA,oC,wQAGA,MAAMA,UAAa5/H,OACjB,iBAAAwH,UAAS,CACPjH,UAAW,SACXmH,MAAM,cAAAmnB,kBAAiBE,gBAAgBuB,oBAAoBc,cAC3DvU,KAAO,iOAaPrc,SAAU,CACRkuB,UAAW,CAACtqB,QAAS9H,QAAWA,MAAM0rC,UAAY1rC,MAAM0rC,SAAStZ,WAAc,EAC/Ek6G,SAAU,CAACxkI,QAAS9H,QAAWA,MAAM0rC,UAA0C,WAA9B1rC,MAAM0rC,SAASqL,aAA4B,EAG5FtyC,SAAU,CAACqD,QAAS9H,UAAYA,MAAMmK,MAEtCoiI,UAAW7oI,KAAK8e,KAAK,aACrBgqH,gBAAiB9oI,KAAK8e,KAAK,mBAC3BiqH,UAAW/oI,KAAK8e,KAAK,aACrBkqH,UAAWhpI,KAAK8e,KAAK,cAGvBxd,WAAY,CACVwC,MAAO,CAACM,QAAS9H,SAAU,UAAAotE,OAAMptE,MAAM2sI,OAAOjoH,QAC9C0oD,MAAO1pE,KAAK8e,KAAK,UACjBoqH,UAAW,CAAC9kI,QAAS9H,QACnBA,MAAM6sI,YAAYnoH,SAAW1kB,MAAM2sI,OAAOjoH,OACtC1kB,MAAM6sI,YACN,IAAI5rI,aAAajB,MAAM2sI,OAAOjoH,QAAQhN,KAAK,GACjDgL,YAAa,CAAC5a,QAAS9H,QAAU,IAAIoK,MAAMpK,MAAM2sI,OAAOjoH,QAAQhN,KAAK1X,MAAMmK,OAAS,CAAC,EAAG,EAAG,EAAG,KAGhGpF,MAAOrB,KAAK8e,KAAK,oB,sICuEN,SAAwBxiB,OAErC,OAAO,oBAAC,eAAA8W,QAAD,UAAS5W,qBAAsB,MAAUF,MAAzC,CAAgDG,YAAa2sI,mBA9HtE,U,4WAAA,yBACA,wCAEA,oCACA,iC,wQAGA,MAAMA,eAAkBppI,OAGtB,MAAM82D,eAAiB92D,KAAK0B,OAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAE/DqnH,MAAQ,IAAIsgB,oBAAarpI,MACzBspI,gBAAkB,GAExB,OAAO,iBAAA9hI,UAAS,CACdjH,UAAW,iBAEXmH,KAAO,i5BAgCPmV,KAAO,6nBAqBPvc,MAAOiH,4BAEPrH,MAAO,CAAEC,QAAQ,EAAME,MAAM,GAE7BiB,WAAY,CACVgL,MAAOwqD,gBAGTt2D,SAAU,CACRrB,MAAOa,KAAK8e,KAAK,cACjBnf,OAAQK,KAAK8e,KAAK,eAClB/f,WAAYiB,KAAK8e,KAAK,mBAEtBzX,MAAO,CAACjD,QAAc9H,QACbA,MAAM+K,OAAS,GAExB2D,OAAQ,CAAC5G,QAAc9H,SACd,iBAAA0J,aAAY1J,MAAMuH,KAAKsO,OAAO5Q,UAEvCuG,YAAa,CAAC1D,QAAc9H,SAC1B,MAAM,EAAEmB,EAAF,EAAKC,EAAL,EAAQC,EAAR,EAAWuI,GAAM5J,MAAMuH,KAAKsO,OAAOrK,YACzC,MAAO,CAACrK,EAAGC,EAAGC,EAAGuI,IAEnBqjI,QAAS,CAACnlI,QAAc9H,SACtB,MAAMitI,SAAU,cAAA16G,kBACbE,gBACAuB,oBAAoB2E,cAAc34B,MAAM2X,KAE3C,OAAIq1H,gBAAgBC,WAIpBD,gBAAgBC,SAAWvpI,KAAK6uF,QAAQ,CACtCjvF,OAAQ,OACRwe,KAAM,QACN0wE,QAAQ,EACRtvF,KAAM+pI,QACNpqI,MAAO,IACPQ,OAAQ,KATD2pI,gBAAgBC,UAa3B/pI,KAAM,CAAC4E,QAAc9H,QACZysH,MAAMp0G,IAAIrY,QAIrB+E,MAAO,M,sICFI,eAAmD,IAA9B,SAAE1E,UAA4B,KAAfG,K,mkBAAe,oBAChE,MAAM0sI,eAAiB7sI,SAASsX,IAAIs3B,sCACpC,OACE,oBAAC,eAAAn4B,QAAD,UAAS5W,qBAAsBitI,+BAAmC3sI,KAAlE,CAAwEL,YAAaitI,aAClFF,iBAxHP,I,IAAA,M,4WAAA,yBACA,wCASA,Y,IAAA,2B,iCACA,6C,w1BAGA,MAAME,WAAc1pI,OAClB,MAAM2pI,mBAAoB,iBAAAniI,UAAS,CACjCjH,UAAW,SACXmH,KAAO,kcAmBPmV,KAAO,gcAgBPvb,WAAY,CACVC,SAAUvB,KAAK8e,KAAK,UACpBrY,MAAOzG,KAAK8e,KAAK,WAGnBte,SAAU,CACRkuB,UAAW,CAACtqB,QAAS9H,SAAU,oBAC7B,OAAO,wBAAAA,MAAM0rC,gBAAN,2CAAgBtZ,YAAa,GAEtCk6G,SAAU,CAACxkI,QAAS9H,SAAU,sCAC5B,QAAO,yBAAAA,MAAM0rC,gBAAN,6CAAgBqL,aAA4C,YAA/B,yBAAA/2C,MAAM0rC,gBAAN,6CAAgBqL,cAIxDhyC,MAAO,CAAC+C,QAAS9H,QACRA,MAAMW,OAAO+jB,OAAS,IAI3B3iB,QAAU2B,KAAK2pI,mBAErB,OAAQrtI,QACN+B,QAAQ/B,SAIZ,SAASmtI,8BAQPntI,MAAYob,iBAAsCd,iBAClD,OAAO,sBAAUta,MAAQwiB,OAIvB,GAD4BlI,gBAAgBs7B,KAAK,EAAG59B,iBAAaA,SAAWwK,MAE1E,OAAO,KAET,MAAMC,WAAa,cAAH,GAAQD,MAClBO,cAAgBpjB,KAAKq0C,KAAKxxB,KAAK7hB,OAAO+jB,OAAS,GACrD,GAAI3B,cAAgB,EAClB,OAAO,KAET,MAAMC,SAAW5H,iBAAiBoH,KAAMO,eAClCG,UAAY,GAUlB,OATAF,SAAS+1B,QAAS5uC,QAChB+Y,UAAU+lB,KAAgB,IAAX9+B,MAAM,IACrB+Y,UAAU+lB,KAAgB,IAAX9+B,MAAM,IACrB+Y,UAAU+lB,KAAgB,IAAX9+B,MAAM,MAEvBsY,WAAWlY,OAAS2Y,UAEpBT,WAAWipB,SAAWjpB,WAAWipB,SAAX,iBAA2BjpB,WAAWipB,UAAa,GACzEjpB,WAAWipB,SAAStZ,UAAmD,GAAtC3P,WAAWipB,SAAStZ,WAAa,GAC3D3P,e,sIC+LI,eAAmD,IAA9B,SAAEpiB,UAA4B,KAAfG,K,mkBAAe,oBAChE,MAAM8sI,aAAc,SAAA1yF,QAAO,IAAIlhC,KAC/B4zH,YAAYh+G,SAAU,eAAAi+G,mBAAkBD,YAAYh+G,QAASjvB,UAC7D,MAAM6sI,eAAiB,IAAII,YAAYh+G,QAAQwX,UAAUnvB,IAAK61H,SAAYA,QAAQxmI,QAClF,OACE,6BAAC,eAAA8P,QAAD,UAAS5W,qBAAsBitI,+BAAmC3sI,KAAlE,CAAwEL,YAAaitI,aAClFF,iBAnTP,W,4WAAA,yBACA,wCASA,mCACA,wCACA,uCAEA,qEACA,4DACA,oD,06BAGA,MAcME,WAAc1pI,OAGlB,MAAM+pI,oBAAsB,IAAIC,2BAC1BC,iBAAmB,IAAID,2BAEvBE,gBAAkB,CAACnhB,MAA0BohB,gBACjD,MAAM,OAAEzoI,OAAF,OAAUsJ,OAAV,OAAkBkY,QAAWinH,aACnC,IAAIC,SAAWrhB,MAAMp0G,IAAIw1H,cAmBzB,OAjBGC,UACDA,SAASD,aAAazoI,SAAWA,QACjC0oI,SAASp/H,SAAWqrD,oBAAarrD,QACjCo/H,SAASlnH,SAAWmzC,oBAAanzC,SAKjCknH,SAAW,CACTD,0BACAzoI,OAAQ1B,KAAK0B,OAAOA,QACpBsJ,OAAQqrD,oBAAarrD,OACrBkY,OAAQmzC,oBAAanzC,OACrBvhB,QAAS,GAEXonH,MAAMx0F,IAAI41G,aAAcC,WAEnBA,UAGHT,mBAAoB,iBAAAniI,UAAS,CACjCjH,UAAW,SACXmH,KAAO,63EAoFPmV,KAAO,qrBAmBPvb,WAAY,CACVC,SAAU,CAAC6C,QAAS9H,QACX4tI,gBAAgBH,oBAAqBztI,MAAMw6D,gBAEpDrwD,MAAO,CAACrC,QAAS9H,SACf,MAAM,aAAEu6D,aAAF,SAAgB7uB,UAAa1rC,OAC7B,UAAEksC,WAAcR,SACtB,GAAI6uB,aAKF,OAAOA,aAQT,MAAM5uD,YAAeugC,WAAgC,SAAnBA,UAAU/V,KAAyCn2B,MAAM2L,YAA7B3L,MAAMw6D,eACpE,OAAOozE,gBAAgBD,iBAAkBhiI,eAI7CzH,SAAU,CACRkuB,UAAW,CAACtqB,QAAS9H,SAAU,oBAC7B,OAAO,wBAAAA,MAAM0rC,gBAAN,2CAAgBtZ,YAAa,GAEtCk6G,SAAU,CAACxkI,QAAS9H,SAAU,sCAC5B,QAAO,yBAAAA,MAAM0rC,gBAAN,6CAAgBqL,aAA4C,YAA/B,yBAAA/2C,MAAM0rC,gBAAN,6CAAgBqL,aAEtD7K,UAAW,CAACpkC,QAAS9H,SACnB,MAAM,SAAE0rC,SAAF,aAAYC,aAAZ,aAA0B4uB,cAAiBv6D,MACjD,GAAIu6D,aAEF,OAxLa,EA0Lf,MAAM,UAAEruB,WAAcR,SACtB,MAAuB,SAAnBQ,UAAU/V,KA5LE,EA8Lc,aAAnB+V,UAAU/V,KA3LD,EA6LU,YAAnB+V,UAAU/V,KA5LF,EA+LZwV,aAlMQ,GACA,GAmMjBQ,UAAW,CAACrkC,QAAS9H,SACnB,MAAM,UAAEksC,WAAclsC,MAAM0rC,SAC5B,OAAO,gBAAAL,eAAca,UAAUC,WAAaC,+CAE9C2hG,iBAAkB,CAACjmI,QAAS9H,SAC1B,MAAM,UAAEksC,WAAclsC,MAAM0rC,SAC5B,OAAO,gBAAAL,eAAca,UAAU6B,UAAY3B,+CAE7C4hG,iBAAkB,CAAClmI,QAAS9H,SAC1B,MAAM,UAAEksC,WAAclsC,MAAM0rC,SAC5B,OAAO,gBAAAL,eAAca,UAAU+B,UAAY7B,+CAE7CG,mBAAoB,CAACzkC,QAAS9H,QACrBA,MAAM26D,cAEfluB,mBAAoB,CAAC3kC,QAAS9H,QACrBA,MAAM66D,eAIjB91D,MAAO,CAAC+C,QAAS9H,QACRA,MAAM8pC,aAIX/nC,QAAU2B,KAAK2pI,mBAErB,OAAQrtI,QAENytI,oBAAoBQ,cACpBN,iBAAiBM,cAGjBlsI,QAAQ/B,OAIRytI,oBAAoBS,eACpBP,iBAAiBO,iBAIrB,SAASf,8BASPntI,MAAYob,iBAAsCd,iBAClD,OAAO,sBAAUta,MAAQwiB,OAIvB,GAD4BlI,gBAAgBs7B,KAAK,EAAG59B,iBAAaA,SAAWwK,MAE1E,OAAO,KAET,MAAMC,WAAa,cAAH,GAAQD,OAClB,MAAE3f,MAAF,OAASQ,QAAWmf,KAC1B,IAAK3f,QAAUQ,OACb,OAAO,KAET,MAAM0f,cAAgBpjB,KAAKq0C,KAAKnxC,MAAQQ,QACxC,GAAI0f,cAAgB,EAClB,OAAO,KAET,MAAMC,SAAW5H,iBAAiBoH,KAAMO,eAClCG,UAAY,GAUlB,OATAF,SAAS+1B,QAAS5uC,QAChB+Y,UAAU+lB,KAAgB,IAAX9+B,MAAM,IACrB+Y,UAAU+lB,KAAgB,IAAX9+B,MAAM,IACrB+Y,UAAU+lB,KAAgB,IAAX9+B,MAAM,MAEvBsY,WAAW83C,aAAer3C,UAE1BT,WAAWipB,SAAWjpB,WAAWipB,SAAX,iBAA2BjpB,WAAWipB,UAAa,GACzEjpB,WAAWipB,SAAStZ,UAAmD,GAAtC3P,WAAWipB,SAAStZ,WAAa,GAC3D3P,e,gJC/RJ,SACLwhH,SACAlnE,SAEA,MAAMuwE,YAAc,IAAI5zH,IAexB,OAdAqjD,QAAQhkB,QAAS/xC,SACf,IAAIwmI,QAAUvJ,SAAS5rH,IAAIrR,OAAO9D,MAI7BsqI,UAAY,UAAAt+F,SAAQloC,OAAO0kC,SAAU8hG,QAAQ9hG,WAAa1kC,OAAOuzD,eAAiBizE,QAAQjzE,eAC7FizE,QAAU,CACRxmI,QAAQ,gBAAAmnI,cAAannI,QACrB0kC,SAAU1kC,OAAO0kC,SACjB6uB,aAAcvzD,OAAOuzD,eAGzB+yE,YAAYr1G,IAAIjxB,OAAO9D,KAAMsqI,WAExBF,a,uBAKF,SAAwB7gB,MAAwCzlH,QAA6C,eAClH,0BAAOylH,MAAMp0G,IAAIrR,OAAO9D,aAAxB,sBAAO,WAAwB8D,QAjCjC,mCAEA,yC,iUCGe,MAAwB,8CAC1B,IAAI0S,KADsB,iCAEzB,IAAIA,KAIhBu0H,cACEx/H,KAAK2/H,UAAY3/H,KAAK4/H,SACtB5/H,KAAK4/H,SAAW,IAAI30H,IAItBrB,IAAI7J,KACF,MAAM,OAAEpJ,QAAWoJ,IACnB,IAAIy1H,SAAWx1H,KAAK4/H,SAASh2H,IAAIjT,QACjC,OAAI6+H,WAIJA,SAAWx1H,KAAK2/H,UAAU/1H,IAAIjT,QAC1B6+H,UAKFx1H,KAAKwpB,IAAIzpB,IAAKy1H,UACdx1H,KAAK2/H,UAAUr7D,OAAO3tE,QACf6+H,UAIF,MAIThsG,IAAIzpB,IAAmBtG,OACrB,MAAM+7H,SAAWx1H,KAAK4/H,SAASh2H,IAAI7J,IAAIpJ,QACvC,GAAI6+H,SAAU,CACZ,GAAIA,WAAa/7H,MAEf,OAKFuG,KAAK6/H,cAAcrK,UAErBx1H,KAAK4/H,SAASp2G,IAAIzpB,IAAIpJ,OAAQ8C,OAIhCgmI,eACEz/H,KAAK2/H,UAAUr1F,QAAQtqC,KAAK6/H,eAC5B7/H,KAAK2/H,UAAU3W,QAGjB6W,cAAcC,QACZ,MAAM,OAAEnpI,QAAWmpI,OACfnpI,OAEFA,OAAO4W,UAEPtJ,QAAQ06B,KAAK,wBAAyBmhG,W,sICL7B,eAAwD,IAA9B,SAAEluI,UAA4B,KAAfG,K,mkBAAe,oBACrE,OACE,oBAACD,MAAM+qD,SAAP,KAEE,oBAAC,eAAA9hC,MAAD,UAAOtpB,qBAAsByiB,iDAAsCniB,MAChEH,UAEH,oBAAC,eAAAguB,UAAD,UAAWnuB,qBAAsBsuI,8BAAkChuI,MAKhEH,SAASsX,IAAKg4C,M,8ZAAD,IAAgBA,KAAhB,CAAsB9tD,eAAgB8tD,KAAM8+E,oBAAoB,QA1EtF,+DACA,0DACA,+DACA,M,4WAAA,yBACA,wC,8fAkBA,SAASD,6BAA6BxuI,MAAeob,iBAAkBd,iBAErE,MAAM7Z,UAAYT,MACf2X,IAAKg4C,OAEJ,MAAMhvD,QAAS,mBACbgvD,KAAKhvD,OAAOgX,IAAK3H,QAAW,iBAAApP,eAAcoP,QAAS,iBAAAtG,aAAYsG,OAASA,OACxE,EAAE7O,EAAGC,EAAGC,KAAQ,GAAEF,KAAKC,KAAKC,KAG9B,GAAIV,OAAO+jB,OAAS,EAClB,OAAO,KAGT,IAAIgqH,YACJ,IACEA,aAAc,wBAAG/tI,QACjB,MAAO0Y,OAEP,OADA3G,QAAQ2G,MAAMA,OACP,KAIT,MAAMs1H,gBAAiB,oBAAQD,YAAa,EAAEE,OAAQC,OAAQC,UACrD,CAACnuI,OAAOiuI,QAASjuI,OAAOkuI,QAASluI,OAAOmuI,UAE3CC,eAAyC,iBAAjBp/E,KAAKxlD,MAAMtK,EAAiB8vD,KAAKxlD,OAAQ,iBAAAD,YAAWylD,KAAKxlD,OACvF,MAAO,CACLtJ,KAAM8uD,KAAK9uD,KACXe,MAAO+tD,KAAK/tD,MACZuI,MAAO4kI,eACPpuI,OAAQguI,eACR9sI,eAAgB8tD,KAAK9tD,kBAGxB6rB,OAAO+zB,SAEV,OAAO,iBAAA3/C,wCAAuCrB,UAAW2a,iBAAkBd,mB,6IC5D7E,4EACA,2DACA,M,4WAAA,yBAEA,oCACA,8DAEA,yC,2gBAIA,SAAkC46G,gBAChC,MAAMrpD,kBAAkBtrE,MAAMsvC,cAAsF,iEAInG,CAAE+tB,WAAY,IAAIoxE,sBAEjC,gCAAgCj4H,UAAkBk4H,WAChD,MAAM,MAAExnD,MAAF,QAASD,SAAYzwE,UAC3B,IAAI,WAAE6mD,YAAeqxE,UACjBznD,UACF5pB,WAAa,IAAIoxE,sBAGnB,cAAAz8G,kBACGE,gBACAuB,oBAAoB4E,YAAY6uD,MAAO7pB,YAE1C,MAAMsxE,IAAMznD,MAAMS,kCAClB,GAAIgnD,IACF,IAAK,MAAMr3G,OAAOq3G,IAChB,IAAK,MAAM5nG,MAAMzP,IAAIO,QAAQwlC,WACvBt2B,GAAGJ,kBAAmB,cAAA3U,kBAAiBE,gBAAgBuB,oBAAoBm7G,mBAC7EvxE,WAAW52B,QAAQM,IAK3B,MAAM8nG,WAAa3nD,MAAMU,yCACzB,GAAIinD,WACF,IAAK,MAAMv3G,OAAOu3G,WAChB,IAAK,MAAM9nG,MAAMzP,IAAIO,QAAQwlC,WAC3BA,WAAW52B,QAAQM,IAKzB,MAAO,CAAEs2B,uBAGXjpD,SAEE,OAAO,oBAACugH,eAAD,YAAoBzmH,KAAKzO,MAAzB,CAAgC+U,IAAKtG,KAAKzO,MAAMq1H,aAAcz3D,WAAYnvD,KAAKhC,MAAMmxD,eAGhG,OA7C4E,gBACtEiO,UADsE,cAEpD,kBAAiBqpD,eAAepyF,aAAeoyF,eAAelqG,MAAQ,OAFlB,gBACtE6gD,UADsE,eAGpD,CAAE6mB,MAAO28C,mBAAUC,OA0CpC,iCACL/uI,MAAM0iF,WAAW,CAACjjF,MAAO+U,MAChB,oBAAC82D,UAAD,YAAe7rE,MAAf,CAAsBq1H,aAActgH,QAE7CmgH,iB,uLC5DY,u1B,sICKD,SAAwB77B,MAAak2C,gBAClD,MAAMC,iBAAmB58G,oBAAQ,MAC3B68G,gBAAkB78G,oBAAQ,MAShC,GARAymE,MAAM3qC,QAAQghF,SAASF,kBACvBn2C,MAAM3qC,QAAQghF,SAASD,kBACvB,gCAA2Bp2C,OAG3BA,MAAMs2C,SAASluG,OAAOitB,QAAQwE,WAAa,GAC3CmmC,MAAMs2C,SAASluG,OAAOitB,QAAQwE,WAAWnR,SAAU,EAErB,IAA1Bs3C,MAAM3qC,QAAQ3pD,QAChB,MAAM,IAAIoB,MACR,gKAjBN,6DAEA,uE,0NCAe,SAAoCkzF,OACjDA,MAAMs2C,SAASC,eAAiBv2C,MAAMs2C,SAASE,QAC/Cx2C,MAAMy2C,YAAYF,eAAiBv2C,MAAMy2C,YAAYD,QAAQxE,OAAO,CAClEvhC,KAAKimC,MACH,IAAIC,WAAa,EACjB,MAAMC,KAAOxhI,KAAKyhI,UACZvvI,OAASsvI,KAAK/sI,MAAQ,GACtBqH,OAASkE,KAAK0hI,aAAa5lI,OAC3B6lI,KAAO3hI,KAAK+qE,MAAM9B,WAClB,sBAAEpkB,uBAA0B7kD,KAAK+qE,MAAMt8C,QAAQwxB,SAAW,GAC5D4E,uBACF28E,KAAKv/E,QAAQ2/E,UAAUt3F,QAAS71C,OACzBA,KAAKi2F,MAAMm3C,YACdptI,KAAKi2F,MAAMm3C,UAAYptI,KAAKi2F,MAAM/3F,GAEpC8B,KAAKi2F,MAAM/3F,EAAI8B,KAAKi2F,MAAMm3C,UAAYh9E,wBAG1C,MAAMi9E,iBAAmBN,KAAKv/E,QAAQ2/E,UAAU3iH,OAAQxqB,OAC9C4I,MAAM5I,KAAKi2F,MAAM/3F,IAG3B,SAAS2iF,SAASC,UAAU,QAAEtzB,UAC5BA,QAAQyoC,MAAM6D,YAAchZ,SAG9B,GAAKz5E,OAAL,CAKA,IAAK,IAAIrJ,EAAI,EAAGA,GAAKqJ,OAAOma,OAAQxjB,IAC9BqJ,OAAOrJ,EAAI,KAAOqJ,OAAOrJ,KAC3B6iF,SAASx5E,OAAOrJ,EAAI,GAAI+uI,MACxBA,KAAKv/E,QAAQ2/E,UAAYE,iBAAiBnyG,MAAM4xG,WAAY9uI,GAC5D+uI,KAAKv/E,QAAQo5C,OACbkmC,WAAa9uI,EAAI,GAIrB+uI,KAAKv/E,QAAQ2/E,UAAYE,iBAAiBnyG,MAAM4xG,YAChDC,KAAKv/E,QAAQo5C,OACbmmC,KAAKv/E,QAAQ2/E,UAAYE,iBAEzB5vI,OAAOo4C,QAAS/oC,QACdA,MAAM85F,KAAKsmC,aAlBX/2C,MAAMy2C,YAAYD,QAAQztB,UAAUtY,KAAKwY,KAAK7zG,KAAMshI","file":"hooks_bundle.js","sourcesContent":["// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { mat3 } from \"gl-matrix\";\n\nimport type { Vec3, Vec4 } from \"../types\";\n\nconst scratch = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n// gl-matrix clone of three.js Euler.setFromQuaternion\n// assumes default XYZ order\nexport default function eulerFromQuaternion(out: number[], q: Vec4): Vec3 {\n  const m = mat3.fromQuat(scratch, q);\n  const m11 = m[0], m12 = m[3], m13 = m[6]; // prettier-ignore\n  const             m22 = m[4], m23 = m[7]; // prettier-ignore\n  const             m32 = m[5], m33 = m[8]; // prettier-ignore\n\n  out[1] = Math.asin(m13 < -1 ? -1 : m13 > 1 ? 1 : m13);\n  if (Math.abs(m13) < 0.99999) {\n    out[0] = Math.atan2(-m23, m33);\n    out[2] = Math.atan2(-m12, m11);\n  } else {\n    out[0] = Math.atan2(m32, m22);\n    out[2] = 0;\n  }\n  return (out: any);\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { Color, Point, Orientation, ReglCommand, Vec4, Vec3 } from \"../types\";\n\nconst rotateGLSL = `\n  uniform vec3 _position;\n  uniform vec4 _rotation;\n\n  // rotate a 3d point v by a rotation quaternion q\n  vec3 rotate(vec3 v, vec4 q) {\n    vec3 temp = cross(q.xyz, v) + q.w * v;\n    return v + (2.0 * cross(q.xyz, temp));\n  }\n\n  vec3 applyPose(vec3 point) {\n    // rotate the point and then add the position of the pose\n    return rotate(point, _rotation) + _position;\n  }\n`;\n\nconst DEFAULT_TEXT_COLOR = { r: 1, g: 1, b: 1, a: 1 };\n\nexport const pointToVec3 = ({ x, y, z }: Point): Vec3 => {\n  return [x, y, z];\n};\nexport const orientationToVec4 = ({ x, y, z, w }: Orientation): Vec4 => {\n  return [x, y, z, w];\n};\n\nexport const vec3ToPoint = ([x, y, z]: Vec3): Point => ({ x, y, z });\n\nexport const vec4ToOrientation = ([x, y, z, w]: Vec4): Orientation => ({ x, y, z, w });\n\nexport const pointToVec3Array = (points: Point[]) => {\n  const result = new Float32Array(points.length * 3);\n  let i = 0;\n  for (const { x, y, z } of points) {\n    result[i++] = x;\n    result[i++] = y;\n    result[i++] = z;\n  }\n  return result;\n};\n\nexport const toRGBA = (val: Color) => {\n  return [val.r, val.g, val.b, val.a];\n};\n\nexport const vec4ToRGBA = (color: Vec4): Color => ({ r: color[0], g: color[1], b: color[2], a: color[3] });\n\nexport const toColor = (val: Color | Vec4): Color => (Array.isArray(val) ? vec4ToRGBA(val) : val);\n\nexport function getCSSColor(color: Color = DEFAULT_TEXT_COLOR) {\n  const { r, g, b, a } = color;\n  return `rgba(${(r * 255).toFixed()}, ${(g * 255).toFixed()}, ${(b * 255).toFixed()}, ${a.toFixed(3)})`;\n}\n\nconst toRGBAArray = (colors: $ReadOnlyArray<Color>): Float32Array => {\n  const result = new Float32Array(colors.length * 4);\n  let i = 0;\n  for (const { r, g, b, a } of colors) {\n    result[i++] = r;\n    result[i++] = g;\n    result[i++] = b;\n    result[i++] = a;\n  }\n  return result;\n};\n\nconst constantRGBAArray = (count: number, { r, g, b, a }: Color): Float32Array => {\n  const result = new Float32Array(count * 4);\n  for (let i = 0; i < count; i++) {\n    result[4 * i + 0] = r;\n    result[4 * i + 1] = g;\n    result[4 * i + 2] = b;\n    result[4 * i + 3] = a;\n  }\n  return result;\n};\n\n// default blend func params to be mixed into regl commands\nexport const defaultReglBlend = {\n  enable: true,\n  // this is the same gl.BlendFunc used by three.js by default\n  func: {\n    src: \"src alpha\",\n    dst: \"one minus src alpha\",\n    srcAlpha: 1,\n    dstAlpha: \"one minus src alpha\",\n  },\n  equation: {\n    rgb: \"add\",\n    alpha: \"add\",\n  },\n};\n\nexport const defaultReglDepth = {\n  enable: true,\n  mask: true,\n};\n\nexport const defaultDepth = {\n  enable: (context: any, props: any) => (props.depth && props.depth.enable) || defaultReglDepth.enable,\n  mask: (context: any, props: any) => (props.depth && props.depth.mask) || defaultReglDepth.mask,\n};\n\nexport const defaultBlend = {\n  ...defaultReglBlend,\n  enable: (context: any, props: any) => (props.blend && props.blend.enable) || defaultReglBlend.enable,\n  func: (context: any, props: any) => (props.blend && props.blend.func) || defaultReglBlend.func,\n};\n\n// TODO: deprecating, remove before 1.x release\nexport const blend = defaultBlend;\n\n// takes a regl command definition object and injects\n// position and rotation from the object pose and also\n// inserts some glsl helpers to apply the pose to points in a fragment shader\nexport function withPose(command: ReglCommand): ReglCommand {\n  const { vert, uniforms } = command;\n  const newVert = vert.replace(\"#WITH_POSE\", rotateGLSL);\n  const newUniforms = {\n    ...uniforms,\n    _position: (context, props) => {\n      const { position } = props.pose;\n      return Array.isArray(position) ? position : pointToVec3(position);\n    },\n    _rotation: (context, props) => {\n      const { orientation: r } = props.pose;\n      return Array.isArray(r) ? r : [r.x, r.y, r.z, r.w];\n    },\n  };\n  return {\n    ...command,\n    vert: newVert,\n    uniforms: newUniforms,\n  };\n}\n\nexport function getVertexColors({\n  colors,\n  color,\n  points,\n}: {\n  colors?: $ReadOnlyArray<Color> | $ReadOnlyArray<Vec4>,\n  color: Color,\n  points: $ReadOnlyArray<Point>,\n}): Float32Array | $ReadOnlyArray<Vec4> {\n  if ((!colors || !colors.length) && color) {\n    return constantRGBAArray(points.length, color);\n  }\n  if (colors) {\n    // $FlowFixMe this will go away once we consolidate getVertexColors and colorBuffer\n    return shouldConvert(colors) ? toRGBAArray(colors) : colors;\n  }\n  return [];\n}\n\nfunction hasNestedArrays(arr: any[]) {\n  return arr.length && Array.isArray(arr[0]);\n}\n\n// Returns a function which accepts a single color, an array of colors, and the number of instances,\n// and returns a color attribute buffer for use in regl.\n// If there are multiple colors in the colors array, one color will be assigned to each instance.\n// In the case of a single color, the same color will be used for all instances.\nexport function colorBuffer(regl: any) {\n  const buffer = regl.buffer({\n    usage: \"dynamic\",\n    data: [],\n  });\n\n  return function(color: any, colors: any, length: number) {\n    let data, divisor;\n    if (!colors || !colors.length) {\n      data = shouldConvert(color) ? toRGBA(color) : color;\n      divisor = length;\n    } else {\n      data = shouldConvert(colors) ? toRGBAArray(colors) : colors;\n      divisor = 1;\n    }\n    return {\n      buffer: buffer({\n        usage: \"dynamic\",\n        data,\n      }),\n      divisor,\n    };\n  };\n}\n\n// used to determine if the input/array of inputs is an object like {r: 0, g: 0, b: 0} or [0,0,0]\nexport function shouldConvert(props: any) {\n  if (!props || hasNestedArrays(props) || !isNaN(props[0])) {\n    return false;\n  }\n  return true;\n}\n\nexport function intToRGB(i: number = 0): Vec4 {\n  const r = ((i >> 16) & 255) / 255;\n  const g = ((i >> 8) & 255) / 255;\n  const b = (i & 255) / 255;\n  return [r, g, b, 1];\n}\n\nexport function getIdFromColor(rgb: Vec4): number {\n  const r = rgb[0] * 255;\n  const g = rgb[1] * 255;\n  const b = rgb[2] * 255;\n  return b | (g << 8) | (r << 16);\n}\n\nexport function getIdFromPixel(rgb: Uint8Array): number {\n  const r = rgb[0];\n  const g = rgb[1];\n  const b = rgb[2];\n  return b | (g << 8) | (r << 16);\n}\n\n// gl-matrix clone of three.js Vector3.setFromSpherical\n// phi: polar angle (between poles, 0 - pi)\n// theta: azimuthal angle (around equator, 0 - 2pi)\nexport function fromSpherical(out: number[], r: number, theta: number, phi: number): Vec3 {\n  const rSinPhi = r * Math.sin(phi);\n  out[0] = rSinPhi * Math.sin(theta);\n  out[1] = r * Math.cos(phi);\n  out[2] = rSinPhi * Math.cos(theta);\n  return (out: any);\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { Cube } from \"../types\";\nimport fromGeometry from \"../utils/fromGeometry\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\nconst cubes = fromGeometry(\n  [\n    // bottom face corners\n    [-0.5, -0.5, -0.5],\n    [-0.5, 0.5, -0.5],\n    [0.5, -0.5, -0.5],\n    [0.5, 0.5, -0.5],\n    // top face corners\n    [-0.5, -0.5, 0.5],\n    [-0.5, 0.5, 0.5],\n    [0.5, -0.5, 0.5],\n    [0.5, 0.5, 0.5],\n  ],\n  [\n    // bottom\n    [0, 1, 2],\n    [1, 2, 3],\n    // top\n    [4, 5, 6],\n    [5, 6, 7],\n    // left\n    [0, 2, 4],\n    [2, 4, 6],\n    // right\n    [1, 3, 5],\n    [3, 5, 7],\n    //front\n    [2, 3, 6],\n    [3, 6, 7],\n    //back\n    [0, 1, 4],\n    [1, 4, 5],\n  ]\n);\n\nconst getChildrenForHitmap = createInstancedGetChildrenForHitmap(1);\nexport default function Cubes(props: { ...CommonCommandProps, children: Cube[] }) {\n  return <Command getChildrenForHitmap={getChildrenForHitmap} {...props} reglCommand={cubes} />;\n}\n","// @flow\n\n//  Copyright (c) 2019-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport type { Line, Point, Vec3, Scale, GetChildrenForHitmap, SphereList } from \"../../types\";\nimport { vec4ToRGBA, vec3ToPoint } from \"../../utils/commandUtils\";\nimport Lines from \"../Lines\";\nimport Spheres from \"../Spheres\";\n\nexport function multiplyScale(scale: Scale, factor: number): Scale {\n  return { x: scale.x * factor, y: scale.y * factor, z: scale.z * factor };\n}\n\nexport const DEFAULT_COLOR = [1, 1, 1, 1];\nexport const ACTIVE_POLYGON_COLOR = [0.8, 0, 0.8, 1];\nexport const ACTIVE_POINT_COLOR = [1, 0.2, 1, 1];\nexport const LINE_STRIP = \"line strip\";\nconst POINT_SIZE_FACTOR = 1.3;\nexport const DRAW_SCALE = { x: 0.1, y: 0.1, z: 0.1 };\nexport const DRAW_POINT_SCALE = multiplyScale(DRAW_SCALE, POINT_SIZE_FACTOR);\nexport const HITMAP_SCALE = { x: 0.5, y: 0.5, z: 0.5 };\nexport const HITMAP_POINT_SCALE = multiplyScale(HITMAP_SCALE, POINT_SIZE_FACTOR);\nexport const POSE = {\n  position: { x: 0, y: 0, z: 0 },\n  orientation: { x: 0, y: 0, z: 0, w: 0 },\n};\n\nlet count = 1;\n\nexport class PolygonPoint {\n  id: number;\n  point: Vec3;\n  active: boolean = false;\n\n  constructor(points: Vec3) {\n    this.id = count++;\n    this.point = points;\n  }\n}\n\nexport class Polygon {\n  id: number;\n  name: string;\n  points: PolygonPoint[] = [];\n  active: boolean = false;\n\n  constructor(name: string = \"\") {\n    this.name = name;\n    this.id = count++;\n  }\n}\n\nexport type DrawPolygonType = Polygon;\n\ntype Props = {\n  children: DrawPolygonType[],\n};\n\nconst polygonLinesGetChildrenForHitmap: GetChildrenForHitmap = <T: any>(\n  props: T,\n  assignNextColors,\n  excludedObjects\n) => {\n  // This is almost identical to the default nonInstancedGetChildrenForHitmap, with changes marked.\n  return props\n    .map((prop) => {\n      if (excludedObjects.some(({ object }) => object === prop)) {\n        return null;\n      }\n      const hitmapProp = { ...prop };\n      // Change from original: pass the original marker as a callback object instead of this marker.\n      const [hitmapColor] = assignNextColors(prop.originalMarker, 1);\n      // Change from original: increase scale for hitmap\n      hitmapProp.scale = HITMAP_SCALE;\n\n      hitmapProp.color = hitmapColor;\n      if (hitmapProp.colors && hitmapProp.points && hitmapProp.points.length) {\n        hitmapProp.colors = new Array(hitmapProp.points.length).fill(hitmapColor);\n      }\n      return hitmapProp;\n    })\n    .filter(Boolean);\n};\n\n/**\n * Draw the polygon lines\n */\nclass PolygonLines extends React.Component<Props> {\n  render() {\n    const polygons = this.props.children;\n    const lines: Line[] = [];\n    for (const poly of polygons) {\n      const color = poly.active ? ACTIVE_POLYGON_COLOR : DEFAULT_COLOR;\n      const points: (Point | Vec3)[] = poly.points.map(({ point }) => vec3ToPoint(point));\n\n      lines.push({\n        primitive: LINE_STRIP,\n        pose: POSE,\n        points,\n        scale: DRAW_SCALE,\n        color: vec4ToRGBA(color),\n        originalMarker: poly,\n      });\n    }\n\n    return <Lines getChildrenForHitmap={polygonLinesGetChildrenForHitmap}>{lines}</Lines>;\n  }\n}\n\nconst polygonPointsGetChildrenForHitmap: GetChildrenForHitmap = <T: any>(\n  props: T,\n  assignNextColors,\n  excludedObjects\n) => {\n  // This is similar to the default nonInstancedGetChildrenForHitmap, with changes marked.\n  return props\n    .map((prop) => {\n      if (excludedObjects.some(({ object }) => object === prop)) {\n        return null;\n      }\n      const hitmapProp = { ...prop };\n      // Change from original: assign a non-instanced color to each point color, even though this marker uses\n      // instancing.\n      // This is so that we can have a unique callback object for each point.\n      hitmapProp.colors = hitmapProp.colors.map((color, index) => {\n        return assignNextColors(prop.originalMarkers[index], 1);\n      });\n      // Change from original: increase scale for hitmap\n      hitmapProp.scale = HITMAP_POINT_SCALE;\n      return hitmapProp;\n    })\n    .filter(Boolean);\n};\n\n/**\n * Draw the polygon points at the end of each lines\n */\nclass PolygonPoints extends React.Component<Props> {\n  render() {\n    const polygons = this.props.children;\n    const points = [];\n    const colors = [];\n    const originalMarkers = [];\n\n    for (const poly of polygons) {\n      const color = poly.active ? ACTIVE_POLYGON_COLOR : DEFAULT_COLOR;\n      for (const point of poly.points) {\n        const convertedPoint = vec3ToPoint(point.point);\n        points.push(convertedPoint);\n        colors.push(point.active ? ACTIVE_POINT_COLOR : color);\n        originalMarkers.push(point);\n      }\n    }\n\n    const sphereList: SphereList = {\n      points,\n      colors,\n      pose: POSE,\n      scale: DRAW_POINT_SCALE,\n      originalMarkers,\n    };\n\n    return <Spheres getChildrenForHitmap={polygonPointsGetChildrenForHitmap}>{[sphereList]}</Spheres>;\n  }\n}\n\nexport default function DrawPolygons({ children: polygons = [] }: Props) {\n  if (polygons.length === 0) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <PolygonLines>{polygons}</PolygonLines>\n      <PolygonPoints>{polygons}</PolygonPoints>\n    </React.Fragment>\n  );\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport earcut from \"earcut\";\nimport React from \"react\";\n\nimport type { Vec3, Point, PolygonType } from \"../types\";\nimport { shouldConvert, pointToVec3 } from \"../utils/commandUtils\";\nimport { getChildrenForHitmapWithOriginalMarker } from \"../utils/getChildrenForHitmapDefaults\";\nimport Triangles from \"./Triangles\";\n\nconst NO_POSE = {\n  position: { x: 0, y: 0, z: 0 },\n  orientation: { x: 0, y: 0, z: 0, w: 0 },\n};\n\nconst DEFAULT_SCALE = { x: 1, y: 1, z: 1 };\n\nfunction flatten3D(points: Vec3[]): Float32Array {\n  const array = new Float32Array(points.length * 3);\n  for (let i = 0; i < points.length; i++) {\n    const [x, y, z] = points[i];\n    array[i * 3] = x;\n    array[i * 3 + 1] = y;\n    array[i * 3 + 2] = z;\n  }\n  return array;\n}\n\nfunction getEarcutPoints(points: Vec3[]): (Vec3 | Point)[] {\n  const flattenedPoints = flatten3D(points);\n  const indices = earcut(flattenedPoints, null, 3);\n  const newPoints = [];\n  for (let i = 0; i < indices.length; i++) {\n    const originalIndex = indices[i];\n    newPoints.push(points[originalIndex]);\n  }\n  return newPoints;\n}\n\ntype Props = {\n  children: PolygonType[],\n};\n\n// command to draw a filled polygon\nfunction FilledPolygons({ children: polygons = [], ...rest }: Props) {\n  const triangles = polygons.map((poly) => {\n    // $FlowFixMe flow doesn't know how shouldConvert works\n    const points: Vec3[] = shouldConvert(poly.points) ? poly.points.map(pointToVec3) : poly.points;\n    const pose = poly.pose ? poly.pose : NO_POSE;\n    const earcutPoints = getEarcutPoints(points);\n    return {\n      ...poly,\n      points: earcutPoints,\n      pose,\n      scale: DEFAULT_SCALE,\n      originalMarker: poly,\n    };\n  });\n\n  // Overwrite the triangle's default getChildrenForHitmap because we want to event as if each triangle is a single\n  // polygon.\n  return (\n    <Triangles getChildrenForHitmap={getChildrenForHitmapWithOriginalMarker} {...rest}>\n      {triangles}\n    </Triangles>\n  );\n}\n\nexport default FilledPolygons;\n","// @flow\n\nimport TinySDF from \"@mapbox/tiny-sdf\";\nimport memoizeOne from \"memoize-one\";\nimport React, { useState } from \"react\";\n\nimport type { Color } from \"../types\";\nimport { defaultBlend, defaultDepth, toColor } from \"../utils/commandUtils\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\nimport { isColorDark, type TextMarker } from \"./Text\";\n\n// The GLText command renders text from a Signed Distance Field texture.\n// There are many external resources about SDFs and text rendering in WebGL, including:\n// https://steamcdn-a.akamaihd.net/apps/valve/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\n// https://blog.mapbox.com/drawing-text-with-signed-distance-fields-in-mapbox-gl-b0933af6f817\n// http://hack.chrons.me/opengl-text-rendering/\n// https://stackoverflow.com/questions/25956272/better-quality-text-in-webgl\n//\n// Approach\n// ========\n// Characters from the font are measured using a <canvas> and the SDFs are drawn into a texture up front\n// (and whenever new characters are being rendered). Then one instanced draw call is made with an instance\n// per character which reads from the corresponding place in the texture atlas.\n//\n// Possible future improvements\n// ============================\n// - Allow customization of font style, maybe highlight ranges.\n// - Consider a solid rectangular background instead of an outline. This is challenging because the\n//   instances currently overlap, so there will be z-fighting, but might be possible using the stencil buffer and multiple draw calls.\n// - Somehow support kerning and more advanced font metrics. However, the web font APIs may not\n//   provide support for this. Some font info could be generated/stored offline, possibly including the atlas.\n// - Explore multi-channel SDFs.\n\ntype TextMarkerProps = TextMarker & {\n  billboard?: ?boolean,\n  highlightedIndices?: Array<number>,\n  highlightColor?: ?Color,\n};\ntype Props = {\n  ...CommonCommandProps,\n  children: $ReadOnlyArray<TextMarkerProps>,\n  autoBackgroundColor?: boolean,\n  scaleInvariantFontSize?: number,\n  resolution?: number,\n  alphabet?: string[],\n};\n\ntype CharacterLocations = {\n  [char: string]: {|\n    x: number,\n    y: number,\n    width: number,\n  |},\n};\n\n// Font size used in rendering the atlas. This is independent of the `scale` of the rendered text.\nconst MIN_RESOLUTION = 40;\nconst DEFAULT_RESOLUTION = 160;\nconst SDF_RADIUS = 8;\nconst CUTOFF = 0.25;\nconst BUFFER = 10;\n\nconst BG_COLOR_LIGHT = Object.freeze({ r: 1, g: 1, b: 1, a: 1 });\nconst BG_COLOR_DARK = Object.freeze({ r: 0, g: 0, b: 0, a: 1 });\n\nconst memoizedCreateCanvas = memoizeOne((font) => {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  ctx.font = font;\n  return ctx;\n});\n\nconst hashMarkerPosition = (marker: TextMarker): string => {\n  const { x, y, z } = marker.pose.position;\n  // The hash is a simple string with all three components\n  return `x${x}y${y}z${z}`;\n};\n\nconst getMarkerYOffset = (offsets: Map<string, number>, marker: TextMarker) => {\n  return offsets.get(hashMarkerPosition(marker)) || 0;\n};\n\nconst setMarkerYOffset = (offsets: Map<string, number>, marker: TextMarker, yOffset: number) => {\n  offsets.set(hashMarkerPosition(marker), yOffset);\n};\n\n// Build a single font atlas: a texture containing all characters and position/size data for each character.\nconst createMemoizedBuildAtlas = () =>\n  memoizeOne(\n    // We update charSet mutably but monotonically. Pass in the size to invalidate the cache.\n    (\n      charSet: Set<string>,\n      _setSize,\n      resolution: number,\n      atlasTexture: any,\n      maxAtlasWidth: number\n    ): CharacterLocations => {\n      const tinySDF = new TinySDF(resolution, BUFFER, SDF_RADIUS, CUTOFF, \"sans-serif\", \"normal\");\n      const ctx = memoizedCreateCanvas(`${resolution}px sans-serif`);\n\n      let textureWidth = 0;\n      const rowHeight = resolution + 2 * BUFFER;\n      const charInfo = {};\n\n      // Measure and assign positions to all characters\n      let x = 0;\n      let y = 0;\n      for (const char of charSet) {\n        const width = ctx.measureText(char).width;\n        const dx = Math.ceil(width) + 2 * BUFFER;\n        if (x + dx > maxAtlasWidth) {\n          x = 0;\n          y += rowHeight;\n        }\n        charInfo[char] = { x, y, width };\n        x += dx;\n        textureWidth = Math.max(textureWidth, x);\n      }\n\n      const textureHeight = y + rowHeight;\n      const textureData = new Uint8Array(textureWidth * textureHeight);\n\n      // Use tiny-sdf to create SDF images for each character and copy them into a single texture\n      for (const char of charSet) {\n        const { x, y } = charInfo[char];\n        const data = tinySDF.draw(char);\n        for (let i = 0; i < tinySDF.size; i++) {\n          for (let j = 0; j < tinySDF.size; j++) {\n            // if this character is near the right edge, we don't actually copy the whole square of data\n            if (x + j < textureWidth) {\n              textureData[textureWidth * (y + i) + x + j] = data[i * tinySDF.size + j];\n            }\n          }\n        }\n      }\n\n      atlasTexture({\n        data: textureData,\n        width: textureWidth,\n        height: textureHeight,\n        format: \"alpha\",\n        wrap: \"clamp\",\n        mag: \"linear\",\n        min: \"linear\",\n      });\n      return charInfo;\n    }\n  );\n\nconst vert = `\n  precision mediump float;\n\n  uniform mat4 projection, view, billboardRotation;\n  uniform float fontSize;\n  uniform vec2 atlasSize;\n  uniform bool scaleInvariant;\n  uniform float scaleInvariantSize;\n  uniform float viewportHeight;\n  uniform float viewportWidth;\n  uniform bool isPerspective;\n  uniform float cameraFovY;\n\n  // per-vertex attributes\n  attribute vec2 texCoord;\n  attribute vec2 position;\n\n  // per-instance (character) attributes\n  attribute vec2 srcOffset;\n  attribute float srcWidth;\n  attribute vec2 destOffset;\n\n  // per-marker attributes\n  attribute vec3 scale;\n  attribute float billboard;\n  attribute vec2 alignmentOffset;\n  attribute float enableBackground;\n  attribute float enableHighlight;\n  attribute vec4 foregroundColor;\n  attribute vec4 backgroundColor;\n  attribute vec4 highlightColor;\n  attribute vec3 posePosition;\n  attribute vec4 poseOrientation;\n\n  varying vec2 vTexCoord;\n  varying float vEnableBackground;\n  varying vec4 vForegroundColor;\n  varying vec4 vBackgroundColor;\n  varying vec4 vHighlightColor;\n  varying float vEnableHighlight;\n  varying float vBillboard;\n\n  // rotate a 3d point v by a rotation quaternion q\n  // like applyPose(), but we need to use a custom per-instance pose\n  vec3 rotate(vec3 v, vec4 q) {\n    vec3 temp = cross(q.xyz, v) + q.w * v;\n    return v + (2.0 * cross(q.xyz, temp));\n  }\n\n  vec4 computeVertexPosition(vec3 markerPos) {\n    vec3 pos;\n    if (billboard == 1.0) {\n      pos = (billboardRotation * vec4(markerPos, 1.0)).xyz + posePosition;\n    } else {\n      pos = rotate(markerPos, poseOrientation) + posePosition;\n    }\n    return projection * view * vec4(pos, 1.0);\n  }\n\n  void main () {\n    // Scale invariance only works for billboards\n    bool scaleInvariantEnabled = scaleInvariant && billboard == 1.0;\n\n    vec2 srcSize = vec2(srcWidth, fontSize);\n    vec3 markerSpacePos = vec3((destOffset + position * srcSize + alignmentOffset) / fontSize, 0);\n\n    if (!scaleInvariantEnabled) {\n      // Apply marker scale only when scale invariance is disabled\n      markerSpacePos *= scale;\n    } else {\n      // If scale invariance is enabled, the text will be rendered at a constant\n      // scale regardless of the zoom level.\n      // The given scaleInvariantSize is in pixels. We need to scale it based on\n      // the current canvas resolution to get the proper dimensions later in NDC\n      float scaleInvariantFactor = scaleInvariantSize / viewportHeight;\n      if (isPerspective) {\n        // When using a perspective projection, the effect is achieved by using\n        // the w-component for scaling, which is obtained by first projecting\n        // the marker position into clip space.\n        gl_Position = computeVertexPosition(markerSpacePos);\n        scaleInvariantFactor *= gl_Position.w;\n        // We also need to take into account the camera's half vertical FOV\n        scaleInvariantFactor *= cameraFovY;\n      } else {\n        // Compute inverse aspect ratio\n        float invAspect = viewportHeight / viewportWidth;\n        // When using orthographic projection, the scaling factor is obtain from\n        // the camera projection itself.\n        // We also need applied the inverse aspect ratio\n        scaleInvariantFactor *= 2.0 * invAspect / length(projection[0].xyz);\n      }\n      // Apply scale invariant factor\n      markerSpacePos *= scaleInvariantFactor;\n    }\n\n    // Compute final vertex position\n    gl_Position = computeVertexPosition(markerSpacePos);\n\n    vTexCoord = (srcOffset + texCoord * srcSize) / atlasSize;\n    vEnableBackground = enableBackground;\n    vForegroundColor = foregroundColor;\n    vBackgroundColor = backgroundColor;\n    vHighlightColor = highlightColor;\n    vEnableHighlight = enableHighlight;\n    vBillboard = billboard;\n  }\n`;\n\nconst frag = `\n  #extension GL_OES_standard_derivatives : enable\n  precision mediump float;\n  uniform mat4 projection;\n  uniform sampler2D atlas;\n  uniform float cutoff;\n  uniform bool scaleInvariant;\n  uniform float scaleInvariantSize;\n  uniform bool isHitmap;\n\n  varying vec2 vTexCoord;\n  varying float vEnableBackground;\n  varying vec4 vForegroundColor;\n  varying vec4 vBackgroundColor;\n  varying vec4 vHighlightColor;\n  varying float vEnableHighlight;\n  varying float vBillboard;\n\n  void main() {\n    float dist = texture2D(atlas, vTexCoord).a;\n\n    // fwidth(dist) is used to provide some anti-aliasing. However it's currently only used\n    // when the solid background is enabled, because the alpha blending and\n    // depth test don't work together nicely for partially-transparent pixels.\n    float edgeStep = smoothstep(1.0 - cutoff - fwidth(dist), 1.0 - cutoff, dist);\n\n    if (scaleInvariant && vBillboard == 1.0 && scaleInvariantSize <= 20.0) {\n      // If scale invariant is enabled and scaleInvariantSize is \"too small\", do not interpolate\n      // the raw distance value since at such small scale, the SDF approach causes some\n      // visual artifacts.\n      // The value used for checking if scaleInvariantSize is \"too small\" is arbitrary and\n      // was defined after some experimentation.\n      edgeStep = dist;\n    }\n\n    if (isHitmap) {\n      // When rendering for the hitmap buffer, we draw flat polygons using the foreground color\n      // instead of the actual glyphs. This way we increase the selection range and provide a\n      // better user experience.\n      gl_FragColor = vForegroundColor;\n    } else if (vEnableHighlight > 0.5) {\n      gl_FragColor = mix(vHighlightColor, vec4(0, 0, 0, 1), edgeStep);\n    } else if (vEnableBackground > 0.5) {\n      gl_FragColor = mix(vBackgroundColor, vForegroundColor, edgeStep);\n    } else {\n      gl_FragColor = vForegroundColor;\n      gl_FragColor.a *= edgeStep;\n    }\n\n    if (gl_FragColor.a == 0.) {\n      discard;\n    }\n  }\n`;\n\nfunction makeTextCommand(alphabet?: string[]) {\n  // Keep the set of rendered characters around so we don't have to rebuild the font atlas too often.\n  const charSet = new Set(alphabet || []);\n  const memoizedBuildAtlas = createMemoizedBuildAtlas();\n\n  const command = (regl: any) => {\n    const atlasTexture = regl.texture();\n\n    const drawText = regl({\n      // When using scale invariance, we want the text to be drawn on top\n      // of other elements. This is achieved by disabling depth testing\n      // In addition, make sure the <GLText /> command is the last one\n      // being rendered.\n      depth: {\n        enable: (ctx, props) => (props.scaleInvariant ? false : defaultDepth.enable(ctx, props)),\n        mask: (ctx, props) => (props.scaleInvariant ? false : defaultDepth.mask(ctx, props)),\n      },\n      blend: defaultBlend,\n      primitive: \"triangle strip\",\n      vert,\n      frag,\n      uniforms: {\n        atlas: atlasTexture,\n        atlasSize: () => [atlasTexture.width, atlasTexture.height],\n        fontSize: regl.prop(\"resolution\"),\n        cutoff: CUTOFF,\n        scaleInvariant: regl.prop(\"scaleInvariant\"),\n        scaleInvariantSize: regl.prop(\"scaleInvariantSize\"),\n        isHitmap: regl.prop(\"isHitmap\"),\n        viewportHeight: regl.context(\"viewportHeight\"),\n        viewportWidth: regl.context(\"viewportWidth\"),\n        isPerspective: regl.context(\"isPerspective\"),\n        cameraFovY: regl.context(\"fovy\"),\n      },\n      instances: regl.prop(\"instances\"),\n      count: 4,\n      attributes: {\n        position: [[0, 0], [0, -1], [1, 0], [1, -1]],\n        texCoord: [[0, 0], [0, 1], [1, 0], [1, 1]], // flipped\n        srcOffset: (ctx, props) => ({ buffer: props.srcOffsets, divisor: 1 }),\n        destOffset: (ctx, props) => ({ buffer: props.destOffsets, divisor: 1 }),\n        srcWidth: (ctx, props) => ({ buffer: props.srcWidths, divisor: 1 }),\n        scale: (ctx, props) => ({ buffer: props.scale, divisor: 1 }),\n        alignmentOffset: (ctx, props) => ({ buffer: props.alignmentOffset, divisor: 1 }),\n        billboard: (ctx, props) => ({ buffer: props.billboard, divisor: 1 }),\n        foregroundColor: (ctx, props) => ({ buffer: props.foregroundColor, divisor: 1 }),\n        backgroundColor: (ctx, props) => ({ buffer: props.backgroundColor, divisor: 1 }),\n        highlightColor: (ctx, props) => ({ buffer: props.highlightColor, divisor: 1 }),\n        enableBackground: (ctx, props) => ({ buffer: props.enableBackground, divisor: 1 }),\n        enableHighlight: (ctx, props) => ({ buffer: props.enableHighlight, divisor: 1 }),\n        posePosition: (ctx, props) => ({ buffer: props.posePosition, divisor: 1 }),\n        poseOrientation: (ctx, props) => ({ buffer: props.poseOrientation, divisor: 1 }),\n      },\n    });\n\n    return (props: $ReadOnlyArray<TextMarkerProps>, isHitmap: boolean) => {\n      let estimatedInstances = 0;\n      for (const { text } of props) {\n        if (typeof text !== \"string\") {\n          throw new Error(`Expected typeof 'text' to be a string. But got type '${typeof text}' instead.`);\n        }\n\n        for (const char of text) {\n          ++estimatedInstances;\n          charSet.add(char);\n        }\n      }\n      // See http://webglstats.com/webgl/parameter/MAX_TEXTURE_SIZE - everyone has at least min 2048 texture size, and\n      // almost everyone has at least 4096. With a 2048 width we have ~900 height with a full character set.\n      const maxAtlasWidth: number = regl.limits.maxTextureSize || 2048;\n      const charInfo = memoizedBuildAtlas(charSet, charSet.size, command.resolution, atlasTexture, maxAtlasWidth);\n\n      const destOffsets = new Float32Array(estimatedInstances * 2);\n      const srcWidths = new Float32Array(estimatedInstances);\n      const srcOffsets = new Float32Array(estimatedInstances * 2);\n\n      // These don't vary across characters within a marker, but the divisor can't be dynamic so we have to duplicate the data for each character.\n      const alignmentOffset = new Float32Array(estimatedInstances * 2);\n      const scale = new Float32Array(estimatedInstances * 3);\n      const foregroundColor = new Float32Array(estimatedInstances * 4);\n      const backgroundColor = new Float32Array(estimatedInstances * 4);\n      const highlightColor = new Float32Array(estimatedInstances * 4);\n      const enableBackground = new Float32Array(estimatedInstances);\n      const billboard = new Float32Array(estimatedInstances);\n      const posePosition = new Float32Array(estimatedInstances * 3);\n      const poseOrientation = new Float32Array(estimatedInstances * 4);\n      const enableHighlight = new Float32Array(estimatedInstances);\n\n      let totalInstances = 0;\n\n      // Markers sharing the same position will be rendered in multiple lines.\n      // We keep track of offsets for the y-coordinate.\n      // We cannot use same value comparison here, so the\n      // key of the map is a hash based on the marker's position\n      // (see hashMarkerPosition() above).\n      const yOffsets = new Map<string, number>();\n\n      for (const marker of props) {\n        let totalWidth = 0;\n        let x = 0;\n        let y = getMarkerYOffset(yOffsets, marker);\n        let markerInstances = 0;\n        let lineCount = 1; // every text has at least one line\n\n        // If we need to render text for hitmap framebuffer, we only render the polygons using\n        // the foreground color (which needs to be converted to RGBA since it's a vec4).\n        // See comment on fragment shader above\n        const fgColor = toColor(\n          isHitmap ? marker.color || [0, 0, 0, 1] : marker.colors?.[0] || marker.color || BG_COLOR_LIGHT\n        );\n        const outline = marker.colors?.[1] != null || command.autoBackgroundColor;\n        const bgColor = toColor(\n          marker.colors?.[1] || (command.autoBackgroundColor && isColorDark(fgColor) ? BG_COLOR_LIGHT : BG_COLOR_DARK)\n        );\n        const hlColor = marker?.highlightColor || { r: 1, b: 0, g: 1, a: 1 };\n\n        for (let i = 0; i < marker.text.length; i++) {\n          const char = marker.text[i];\n          if (char === \"\\n\") {\n            x = 0;\n            // Make sure every line in the text is offsetted correctly\n            y += command.resolution;\n            lineCount++;\n            continue;\n          }\n          const info = charInfo[char];\n          const index = totalInstances + markerInstances;\n\n          // Calculate per-character attributes\n          destOffsets[2 * index + 0] = x;\n          destOffsets[2 * index + 1] = -y;\n          srcOffsets[2 * index + 0] = info.x + BUFFER;\n          // In order to make sure there's enough room for glyphs' descenders (i.e. 'g'),\n          // we need to apply an extra offset based on the font resolution.\n          // The value used to compute the offset is a result of experimentation.\n          srcOffsets[2 * index + 1] = info.y + BUFFER + 0.05 * command.resolution;\n          srcWidths[index] = info.width;\n\n          x += info.width;\n          totalWidth = Math.max(totalWidth, x);\n\n          // Copy per-marker attributes. These are duplicated per character so that we can draw\n          // all characters from all markers in a single draw call.\n\n          billboard[index] = marker.billboard ?? true ? 1 : 0;\n\n          scale[3 * index + 0] = marker.scale.x;\n          scale[3 * index + 1] = marker.scale.y;\n          scale[3 * index + 2] = marker.scale.z;\n\n          posePosition[3 * index + 0] = marker.pose.position.x;\n          posePosition[3 * index + 1] = marker.pose.position.y;\n          posePosition[3 * index + 2] = marker.pose.position.z;\n\n          poseOrientation[4 * index + 0] = marker.pose.orientation.x;\n          poseOrientation[4 * index + 1] = marker.pose.orientation.y;\n          poseOrientation[4 * index + 2] = marker.pose.orientation.z;\n          poseOrientation[4 * index + 3] = marker.pose.orientation.w;\n\n          foregroundColor[4 * index + 0] = fgColor.r;\n          foregroundColor[4 * index + 1] = fgColor.g;\n          foregroundColor[4 * index + 2] = fgColor.b;\n          foregroundColor[4 * index + 3] = fgColor.a;\n\n          backgroundColor[4 * index + 0] = bgColor.r;\n          backgroundColor[4 * index + 1] = bgColor.g;\n          backgroundColor[4 * index + 2] = bgColor.b;\n          backgroundColor[4 * index + 3] = bgColor.a;\n\n          highlightColor[4 * index + 0] = hlColor.r;\n          highlightColor[4 * index + 1] = hlColor.g;\n          highlightColor[4 * index + 2] = hlColor.b;\n          highlightColor[4 * index + 3] = hlColor.a;\n\n          enableHighlight[index] = marker.highlightedIndices && marker.highlightedIndices.includes(i) ? 1 : 0;\n\n          enableBackground[index] = outline ? 1 : 0;\n\n          ++markerInstances;\n        }\n\n        const totalHeight = y + command.resolution;\n        for (let i = 0; i < markerInstances; i++) {\n          alignmentOffset[2 * (totalInstances + i) + 0] = -totalWidth / 2;\n          alignmentOffset[2 * (totalInstances + i) + 1] = totalHeight / 2;\n        }\n\n        // Compute the y-coordinate's offset for the next overlapped marker, if any.\n        // Basically, we add as many offsets as numbers of lines in the marker's text.\n        // Since the y-coordinate is inverted when computing destOffset[] a few lines above\n        // we need an additional command.resolution offset (precomputed in totalHeight).\n        setMarkerYOffset(yOffsets, marker, totalHeight + lineCount * command.resolution);\n\n        totalInstances += markerInstances;\n      }\n\n      drawText({\n        instances: totalInstances,\n\n        isHitmap: !!isHitmap,\n        scaleInvariant: command.scaleInvariant,\n        resolution: command.resolution,\n        scaleInvariantSize: command.scaleInvariantSize,\n\n        // per-character\n        srcOffsets,\n        destOffsets,\n        srcWidths,\n\n        // per-marker\n        alignmentOffset,\n        billboard,\n        enableBackground,\n        enableHighlight,\n        foregroundColor,\n        backgroundColor,\n        highlightColor,\n        poseOrientation,\n        posePosition,\n        scale,\n      });\n    };\n  };\n  command.autoBackgroundColor = false;\n  return command;\n}\n\nexport default function GLText(props: Props) {\n  const [command] = useState(() => makeTextCommand(props.alphabet));\n  // HACK: Worldview doesn't provide an easy way to pass a command-level prop into the regl commands,\n  // so just attach it to the command object for now.\n  command.autoBackgroundColor = props.autoBackgroundColor;\n  command.resolution = Math.max(MIN_RESOLUTION, props.resolution || DEFAULT_RESOLUTION);\n  command.scaleInvariant = props.scaleInvariantFontSize != null;\n  command.scaleInvariantSize = props.scaleInvariantFontSize ?? 0;\n  const getChildrenForHitmap = createInstancedGetChildrenForHitmap(1);\n\n  return <Command getChildrenForHitmap={getChildrenForHitmap} reglCommand={command} {...props} />;\n}\n","// @flow\n\n//  Copyright (c) 2019-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { mat4 } from \"gl-matrix\";\nimport memoizeWeak from \"memoize-weak\";\nimport React, { useContext, useState, useEffect, useCallback, useDebugValue } from \"react\";\n\nimport type { Pose, Scale, MouseHandler } from \"../types\";\nimport { defaultBlend, pointToVec3, orientationToVec4 } from \"../utils/commandUtils\";\nimport { getChildrenForHitmapWithOriginalMarker } from \"../utils/getChildrenForHitmapDefaults\";\nimport parseGLB, { type GLBModel } from \"../utils/parseGLB\";\nimport WorldviewReactContext from \"../WorldviewReactContext\";\nimport Command from \"./Command\";\n\nfunction glConstantToRegl(value: ?number): ?string {\n  if (value === undefined) {\n    return undefined;\n  }\n  // prettier-ignore\n  switch (value) {\n    // min/mag filters\n    case WebGLRenderingContext.NEAREST: return \"nearest\";\n    case WebGLRenderingContext.LINEAR: return \"linear\";\n    case WebGLRenderingContext.NEAREST_MIPMAP_NEAREST: return \"nearest mipmap nearest\";\n    case WebGLRenderingContext.NEAREST_MIPMAP_LINEAR: return \"nearest mipmap linear\";\n    case WebGLRenderingContext.LINEAR_MIPMAP_NEAREST: return \"linear mipmap nearest\";\n    case WebGLRenderingContext.LINEAR_MIPMAP_LINEAR: return \"linear mipmap linear\";\n    // texture wrapping modes\n    case WebGLRenderingContext.REPEAT: return \"repeat\";\n    case WebGLRenderingContext.CLAMP_TO_EDGE: return \"clamp\";\n    case WebGLRenderingContext.MIRRORED_REPEAT: return \"mirror\";\n  }\n  throw new Error(`unhandled constant value ${JSON.stringify(value)}`);\n}\n\nconst drawModel = (regl) => {\n  const command = regl({\n    primitive: \"triangles\",\n    blend: defaultBlend,\n    uniforms: {\n      globalAlpha: regl.context(\"globalAlpha\"),\n      poseMatrix: regl.context(\"poseMatrix\"),\n\n      baseColorTexture: regl.prop(\"baseColorTexture\"),\n      baseColorFactor: regl.prop(\"baseColorFactor\"),\n      nodeMatrix: regl.prop(\"nodeMatrix\"),\n      \"light.direction\": [0, 0, -1],\n      \"light.ambientIntensity\": 0.5,\n      \"light.diffuseIntensity\": 0.5,\n      hitmapColor: regl.context(\"hitmapColor\"),\n      isHitmap: regl.context(\"isHitmap\"),\n    },\n    attributes: {\n      position: regl.prop(\"positions\"),\n      normal: regl.prop(\"normals\"),\n      texCoord: regl.prop(\"texCoords\"),\n    },\n    elements: regl.prop(\"indices\"),\n    vert: `\n  uniform mat4 projection, view;\n  uniform mat4 nodeMatrix;\n  uniform mat4 poseMatrix;\n  attribute vec3 position, normal;\n  varying vec3 vNormal;\n  attribute vec2 texCoord;\n  varying vec2 vTexCoord;\n\n  void main() {\n    // using the projection matrix for normals breaks lighting for orthographic mode\n    mat4 mv = view * poseMatrix * nodeMatrix;\n    vNormal = normalize((mv * vec4(normal, 0)).xyz);\n    vTexCoord = texCoord;\n    gl_Position = projection * mv * vec4(position, 1);\n  }\n  `,\n    frag: `\n  precision mediump float;\n  uniform bool isHitmap;\n  uniform vec4 hitmapColor;\n  uniform float globalAlpha;\n  uniform sampler2D baseColorTexture;\n  uniform vec4 baseColorFactor;\n  varying mediump vec2 vTexCoord;\n  varying mediump vec3 vNormal;\n\n  // Basic directional lighting from:\n  // http://ogldev.atspace.co.uk/www/tutorial18/tutorial18.html\n  struct DirectionalLight {\n    mediump vec3 direction;\n    lowp float ambientIntensity;\n    lowp float diffuseIntensity;\n  };\n  uniform DirectionalLight light;\n\n  void main() {\n    vec4 baseColor = texture2D(baseColorTexture, vTexCoord) * baseColorFactor;\n    float diffuse = light.diffuseIntensity * max(0.0, dot(vNormal, -light.direction));\n    gl_FragColor = isHitmap ? hitmapColor : vec4((light.ambientIntensity + diffuse) * baseColor.rgb, baseColor.a * globalAlpha);\n  }\n  `,\n  });\n\n  // default values for when baseColorTexture is not specified\n  const singleTexCoord = regl.buffer([0, 0]);\n  const whiteTexture = regl.texture({\n    data: [255, 255, 255, 255],\n    width: 1,\n    height: 1,\n  });\n\n  // build the draw calls needed to draw the model. This will happen whenever the model changes.\n  const getDrawCalls = memoizeWeak((model: GLBModel) => {\n    // upload textures to the GPU\n    const { accessors } = model;\n    const textures =\n      model.json.textures &&\n      model.json.textures.map((textureInfo) => {\n        const sampler = model.json.samplers[textureInfo.sampler];\n        const bitmap = model.images && model.images[textureInfo.source];\n        const texture = regl.texture({\n          data: bitmap,\n          min: glConstantToRegl(sampler.minFilter),\n          mag: glConstantToRegl(sampler.magFilter),\n          wrapS: glConstantToRegl(sampler.wrapS),\n          wrapT: glConstantToRegl(sampler.wrapT),\n        });\n        return texture;\n      });\n    if (model.images) {\n      model.images.forEach((bitmap: ImageBitmap) => bitmap.close());\n    }\n\n    const drawCalls = [];\n    // helper to draw the primitives comprising a mesh\n    function drawMesh(mesh, nodeMatrix) {\n      for (const primitive of mesh.primitives) {\n        const material = model.json.materials[primitive.material];\n        const texInfo = material.pbrMetallicRoughness.baseColorTexture;\n        if (!accessors) {\n          throw new Error(\"Error decoding GLB model: Missing `accessors` in JSON data\");\n        }\n        drawCalls.push({\n          indices: accessors[primitive.indices],\n          positions: accessors[primitive.attributes.POSITION],\n          normals: accessors[primitive.attributes.NORMAL],\n          texCoords: texInfo\n            ? accessors[primitive.attributes[`TEXCOORD_${texInfo.texCoord || 0}`]]\n            : { divisor: 1, buffer: singleTexCoord },\n          baseColorTexture: texInfo ? textures[texInfo.index] : whiteTexture,\n          baseColorFactor: material.pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1],\n          nodeMatrix,\n        });\n      }\n    }\n\n    // helper to draw all the meshes contained in a node and its child nodes\n    function drawNode(node, parentMatrix) {\n      const nodeMatrix = node.matrix\n        ? mat4.clone(node.matrix)\n        : mat4.fromRotationTranslationScale(\n            mat4.create(),\n            node.rotation || [0, 0, 0, 1],\n            node.translation || [0, 0, 0],\n            node.scale || [1, 1, 1]\n          );\n      mat4.mul(nodeMatrix, parentMatrix, nodeMatrix);\n      if (node.mesh != null) {\n        drawMesh(model.json.meshes[node.mesh], nodeMatrix);\n      }\n      if (node.children) {\n        for (const childIdx of node.children) {\n          drawNode(model.json.nodes[childIdx], nodeMatrix);\n        }\n      }\n    }\n\n    // finally, draw each of the main scene's nodes\n    for (const nodeIdx of model.json.scenes[model.json.scene].nodes) {\n      const rootTransform = mat4.create();\n      mat4.rotateX(rootTransform, rootTransform, Math.PI / 2);\n      mat4.rotateY(rootTransform, rootTransform, Math.PI / 2);\n      drawNode(model.json.nodes[nodeIdx], rootTransform);\n    }\n    return drawCalls;\n  });\n\n  // create a regl command to set the context for each draw call\n  const withContext = regl({\n    context: {\n      poseMatrix: (context, props) =>\n        mat4.fromRotationTranslationScale(\n          mat4.create(),\n          orientationToVec4(props.pose.orientation),\n          pointToVec3(props.pose.position),\n          props.scale ? pointToVec3(props.scale) : [1, 1, 1]\n        ),\n      globalAlpha: (context, props) => (props.alpha == null ? 1 : props.alpha),\n      hitmapColor: (context, props) => props.color || [0, 0, 0, 1],\n      isHitmap: (context, props) => !!props.isHitmap,\n    },\n  });\n\n  return (props, isHitmap) => {\n    const drawCalls = getDrawCalls(props.model);\n    withContext(isHitmap ? { ...props, isHitmap } : props, () => {\n      command(drawCalls);\n    });\n  };\n};\n\ntype Props = {|\n  model: string | (() => Promise<GLBModel>),\n  onClick?: MouseHandler,\n  onDoubleClick?: MouseHandler,\n  onMouseDown?: MouseHandler,\n  onMouseMove?: MouseHandler,\n  onMouseUp?: MouseHandler,\n  children: {\n    pose: Pose,\n    scale: Scale,\n    alpha?: ?number,\n  },\n|};\n\nfunction useAsyncValue<T>(fn: () => Promise<T>, deps: ?(any[])): ?T {\n  const [value, setValue] = useState<?T>();\n  useEffect(\n    useCallback(() => {\n      let unloaded = false;\n      fn().then((result) => {\n        if (!unloaded) {\n          setValue(result);\n        }\n      });\n      return () => {\n        unloaded = true;\n        setValue(undefined);\n      };\n    }, deps || [fn]),\n    deps || [fn]\n  );\n  return value;\n}\n\nfunction useModel(model: string | (() => Promise<GLBModel>)): ?GLBModel {\n  useDebugValue(model);\n  return useAsyncValue(\n    async () => {\n      if (typeof model === \"function\") {\n        return model();\n      }\n      if (typeof model === \"string\") {\n        const response = await fetch(model);\n        if (!response.ok) {\n          throw new Error(`failed to fetch GLTF model: ${response.status}`);\n        }\n        return parseGLB(await response.arrayBuffer());\n      }\n\n      /*:: (model: empty) */\n      throw new Error(`unsupported model prop: ${typeof model}`);\n    },\n    [model]\n  );\n}\n\nexport default function GLTFScene(props: Props) {\n  const { children, model, ...rest } = props;\n\n  const context = useContext(WorldviewReactContext);\n  const loadedModel = useModel(model);\n  useEffect(\n    () => {\n      if (context) {\n        context.onDirty();\n      }\n    },\n    [context, loadedModel]\n  );\n\n  if (!loadedModel) {\n    return null;\n  }\n\n  return (\n    <Command {...rest} reglCommand={drawModel} getChildrenForHitmap={getChildrenForHitmapWithOriginalMarker}>\n      {{ ...children, model: loadedModel, originalMarker: children }}\n    </Command>\n  );\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { PointType, Regl } from \"../types\";\nimport { getVertexColors, pointToVec3, withPose } from \"../utils/commandUtils\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\nconst points = (regl: Regl) => {\n  const [min, max] = regl.limits.pointSizeDims;\n  return withPose({\n    primitive: \"points\",\n    vert: `\n    precision mediump float;\n\n    #WITH_POSE\n\n    uniform mat4 projection, view;\n    uniform float pointSize;\n\n    attribute vec3 point;\n    attribute vec4 color;\n    varying vec4 fragColor;\n    void main () {\n      gl_PointSize = pointSize;\n      vec3 pos = applyPose(point);\n      gl_Position = projection * view * vec4(pos, 1);\n      fragColor = color;\n    }\n    `,\n    frag: `\n    precision mediump float;\n    varying vec4 fragColor;\n    void main () {\n      gl_FragColor = vec4(fragColor.x, fragColor.y, fragColor.z, 1);\n    }\n    `,\n    attributes: {\n      point: (context, props) => {\n        return props.points.map((point) => (Array.isArray(point) ? point : pointToVec3(point)));\n      },\n      color: (context, props) => {\n        const colors = getVertexColors(props);\n        return colors;\n      },\n    },\n\n    uniforms: {\n      pointSize: (context, props) => {\n        const size = props.scale.x || 1;\n        return Math.min(max, Math.max(min, size));\n      },\n    },\n\n    count: regl.prop(\"points.length\"),\n  });\n};\n\nconst getChildrenForHitmap = createInstancedGetChildrenForHitmap(1);\nexport default function Points(props: { ...CommonCommandProps, children: PointType[] }) {\n  return <Command getChildrenForHitmap={getChildrenForHitmap} {...props} reglCommand={points} />;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nclass BoundingBox {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n  width: number;\n  height: number;\n\n  constructor(left: number, top: number) {\n    this.left = left;\n    this.top = top;\n    this.right = -left;\n    this.bottom = -top;\n    this.width = Math.abs(left) * 2;\n    this.height = Math.abs(top) * 2;\n  }\n}\n\nexport default function getOrthographicBounds(zDistance: number, width: number, height: number): BoundingBox {\n  const aspect = width / height;\n  // never go below ground level\n  const distanceToGround = Math.abs(zDistance);\n  const left = (-distanceToGround / 2) * aspect;\n  const top = distanceToGround / 2;\n  return new BoundingBox(left, top);\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\n// Copied from Jam3/camera-project\n// in order to replace gl-vec4 dependency with gl-matrix\n\nimport { vec4 } from \"gl-matrix\";\n\nimport type { Vec3, Vec4, Mat4 } from \"../types\";\n\nconst NEAR_RANGE = 0;\nconst FAR_RANGE = 1;\nconst tmp4 = [0, 0, 0, 0];\n\nexport default function cameraProject(out: any, vec: Vec3, viewport: Vec4, combinedProjView: Mat4): Vec4 {\n  const vX = viewport[0],\n    vY = viewport[1],\n    vWidth = viewport[2],\n    vHeight = viewport[3],\n    n = NEAR_RANGE,\n    f = FAR_RANGE;\n\n  // convert: clip space -> NDC -> window coords\n  // implicit 1.0 for w component\n  vec4.set(tmp4, vec[0], vec[1], vec[2], 1.0);\n\n  // transform into clip space\n  vec4.transformMat4(tmp4, tmp4, combinedProjView);\n\n  // now transform into NDC\n  const w = tmp4[3];\n  if (w !== 0) {\n    // how to handle infinity here?\n    tmp4[0] = tmp4[0] / w;\n    tmp4[1] = tmp4[1] / w;\n    tmp4[2] = tmp4[2] / w;\n  }\n\n  // and finally into window coordinates\n  // the foruth component is (1/clip.w)\n  // which is the same as gl_FragCoord.w\n  out[0] = vX + (vWidth / 2) * tmp4[0] + (0 + vWidth / 2);\n  out[1] = vY + (vHeight / 2) * tmp4[1] + (0 + vHeight / 2);\n  out[2] = ((f - n) / 2) * tmp4[2] + (f + n) / 2;\n  out[3] = w === 0 ? 0 : 1 / w;\n  return out;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { vec3, quat, mat4 } from \"gl-matrix\";\nimport { createSelector } from \"reselect\";\n\nimport type { CameraState, Vec4, Vec3, Mat4 } from \"../types\";\nimport { fromSpherical } from \"../utils/commandUtils\";\n\nconst UNIT_X_VECTOR = Object.freeze([1, 0, 0]);\n\n// reusable arrays for intermediate calculations\nconst TEMP_VEC3 = [0, 0, 0];\nconst TEMP_MAT = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst TEMP_QUAT = [0, 0, 0, 0];\n\nconst stateSelector = (state: CameraState) => state;\n\nconst perspectiveSelector = createSelector(\n  stateSelector,\n  ({ perspective }) => perspective\n);\nconst distanceSelector = createSelector(\n  stateSelector,\n  ({ distance }) => distance\n);\nconst phiSelector = createSelector(\n  stateSelector,\n  ({ phi }) => phi\n);\nconst thetaOffsetSelector = createSelector(\n  stateSelector,\n  ({ thetaOffset }) => thetaOffset\n);\nconst targetOrientationSelector = createSelector(\n  stateSelector,\n  ({ targetOrientation }) => targetOrientation\n);\n\n// the heading direction of the target\nconst targetHeadingSelector: (CameraState) => number = createSelector(\n  targetOrientationSelector,\n  (targetOrientation) => {\n    const out = vec3.transformQuat(TEMP_VEC3, UNIT_X_VECTOR, targetOrientation);\n    const heading = -Math.atan2(out[1], out[0]);\n    return heading;\n  }\n);\n\n// orientation of the camera\nconst orientationSelector: (CameraState) => Vec4 = createSelector(\n  perspectiveSelector,\n  phiSelector,\n  thetaOffsetSelector,\n  (perspective, phi, thetaOffset) => {\n    const result = quat.identity([0, 0, 0, 0]);\n    quat.rotateZ(result, result, -thetaOffset);\n\n    // phi is ignored in 2D mode\n    if (perspective) {\n      quat.rotateX(result, result, phi);\n    }\n    return result;\n  }\n);\n\n// position of the camera\nconst positionSelector: (CameraState) => Vec3 = createSelector(\n  thetaOffsetSelector,\n  phiSelector,\n  distanceSelector,\n  (thetaOffset, phi, distance) => {\n    const position = fromSpherical([], distance, thetaOffset, phi);\n\n    // poles are on the y-axis in spherical coordinates; rearrange so they are on the z axis\n    const [x, y, z] = position;\n    position[0] = -x;\n    position[1] = -z;\n    position[2] = y;\n\n    return position;\n  }\n);\n\n/*\nGet the view matrix, which transforms points from world coordinates to camera coordinates.\n\nAn equivalent and easier way to think about this transformation is that it takes the camera from\nits actual position/orientation in the world, and moves it to have position=0,0,0 and orientation=0,0,0,1.\n\nWe build up this transformation in 5 steps as demonstrated below:\n   T = target\n   < = direction of target\n   * = target with offset (position that the camera is looking at)\n   C = camera (always points toward *)\n\nStarting point: actual positions in world coordinates\n\n  |      *\n  |  <T   C\n  |\n  +--------\n\nStep 1: translate target to the origin\n\n  |\n  |  *\n <T---C----\n\nStep 2: rotate around the origin so the target points forward\n(Here we use the target's heading only, ignoring other components of its rotation)\n\n  |\n  ^\n  T--------\n  |\n  | *\n  C\n\nStep 3: translate the target-with-offset point to be at the origin\n\n ^\n T|\n  |\n  *--------\n C|\n  |\n\n\nStep 4: translate the camera to be at the origin\n(Steps 3 and 4 are both translations, but they're kept separate because it's easier\nto conceptualize: 3 uses the targetOffset and 4 uses the distance+thetaOffset+phi.)\n\n ^\n T\n |\n |*\n C--------\n |\n\nStep 5: rotate the camera to point forward\n\n \\\n  T  |\n     *\n     C--------\n     |\n\n*/\nconst viewSelector: (CameraState) => Mat4 = createSelector(\n  stateSelector,\n  orientationSelector,\n  positionSelector,\n  targetHeadingSelector,\n  ({ target, targetOffset, perspective }, orientation, position, targetHeading) => {\n    const m = mat4.identity([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n\n    // apply the steps described above in reverse because we use right-multiplication\n\n    // 5. rotate camera to point forward\n    mat4.multiply(m, m, mat4.fromQuat(TEMP_MAT, quat.invert(TEMP_QUAT, orientation)));\n\n    // 4. move camera to the origin\n    if (perspective) {\n      mat4.translate(m, m, vec3.negate(TEMP_VEC3, position));\n    }\n\n    // 3. move center to the origin\n    mat4.translate(m, m, vec3.negate(TEMP_VEC3, targetOffset));\n\n    // 2. rotate target to point forward\n    mat4.rotateZ(m, m, targetHeading);\n\n    // 1. move target to the origin\n    vec3.negate(TEMP_VEC3, target);\n    if (!perspective) {\n      // if using orthographic camera ensure the distance from \"ground\"\n      // stays large so no reasonably tall item goes past the camera\n      TEMP_VEC3[2] = -2500;\n    }\n    mat4.translate(m, m, TEMP_VEC3);\n\n    return m;\n  }\n);\n\nconst billboardRotation: (CameraState) => Mat4 = createSelector(\n  orientationSelector,\n  targetHeadingSelector,\n  (orientation, targetHeading) => {\n    const m = mat4.identity(mat4.create());\n    mat4.rotateZ(m, m, -targetHeading);\n    mat4.multiply(m, m, mat4.fromQuat(TEMP_MAT, orientation));\n    return m;\n  }\n);\n\nexport default {\n  orientation: orientationSelector,\n  position: positionSelector,\n  targetHeading: targetHeadingSelector,\n  view: viewSelector,\n  billboardRotation,\n};\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { vec3, quat } from \"gl-matrix\";\n\nimport type { Vec2, Vec3, Vec4 } from \"../types\";\nimport selectors from \"./cameraStateSelectors\";\n\nexport type CameraState = {|\n  distance: number,\n  perspective: boolean,\n  phi: number,\n  target: Vec3,\n  targetOffset: Vec3,\n  targetOrientation: Vec4,\n  thetaOffset: number,\n  fovy: number,\n  near: number,\n  far: number,\n|};\n\n//  we use up on the +z axis\nconst UNIT_Z_VECTOR = Object.freeze([0, 0, 1]);\n// reusable array for intermediate calculations\nconst TEMP_QUAT = [0, 0, 0, 0];\n\nexport const DEFAULT_CAMERA_STATE: CameraState = {\n  distance: 75,\n  perspective: true,\n  phi: Math.PI / 4,\n  target: [0, 0, 0],\n  targetOffset: [0, 0, 0],\n  targetOrientation: [0, 0, 0, 1],\n  thetaOffset: 0,\n  fovy: Math.PI / 4,\n  near: 0.01,\n  far: 5000,\n};\n\nfunction distanceAfterZoom(startingDistance: number, zoomPercent: number): number {\n  // keep distance above 0 so that percentage-based zoom always works\n  return Math.max(0.001, startingDistance * (1 - zoomPercent / 100));\n}\n\nexport default class CameraStore {\n  state: CameraState;\n\n  _onChange: (CameraState) => void;\n\n  constructor(\n    handler: (CameraState) => void = () => {},\n    initialCameraState: $Shape<CameraState> = DEFAULT_CAMERA_STATE\n  ) {\n    this._onChange = handler;\n    this.setCameraState(initialCameraState);\n  }\n\n  setCameraState = (state: $Shape<CameraState>) => {\n    // Fill in missing properties from DEFAULT_CAMERA_STATE.\n    // Mutate the `state` parameter instead of copying -- this\n    // matches the previous behavior of this method, which didn't\n    // fill in missing properties but also didn't copy `state`.\n    for (const [key, value] of Object.entries(DEFAULT_CAMERA_STATE)) {\n      if (state[key] == null) {\n        state[key] = value;\n      }\n    }\n    // `state` must be a valid CameraState now, because we filled in\n    // missing properties from DEFAULT_CAMERA_STATE.\n    this.state = (state: any);\n  };\n\n  cameraRotate = ([x, y]: Vec2) => {\n    // This can happen in 2D mode, when both e.movementX and e.movementY are evaluated as negative and mouseX move is 0\n    if (x === 0 && y === 0) {\n      return;\n    }\n    const { thetaOffset, phi } = this.state;\n    this.setCameraState({\n      ...this.state,\n      thetaOffset: thetaOffset - x,\n      phi: Math.max(0, Math.min(phi + y, Math.PI)),\n    });\n    this._onChange(this.state);\n  };\n\n  // move the camera along x, y axis; do not move up/down\n  cameraMove = ([x, y]: Vec2) => {\n    // moveX and moveY both be 0 sometimes\n    if (x === 0 && y === 0) {\n      return;\n    }\n\n    const { targetOffset, thetaOffset } = this.state;\n\n    // rotate around z axis so the offset is in the target's reference frame\n    const result = [x, y, 0];\n    const offset = vec3.transformQuat(result, result, quat.setAxisAngle(TEMP_QUAT, UNIT_Z_VECTOR, -thetaOffset));\n\n    this.setCameraState({\n      ...this.state,\n      targetOffset: vec3.add(offset, targetOffset, offset),\n    });\n    this._onChange(this.state);\n  };\n\n  cameraZoom = (zoomPercent: number) => {\n    const { distance } = this.state;\n    const newDistance: number = distanceAfterZoom(distance, zoomPercent);\n    if (distance === newDistance) {\n      return;\n    }\n\n    this.setCameraState({\n      ...this.state,\n      distance: newDistance,\n    });\n    this._onChange(this.state);\n  };\n}\n\nexport { selectors };\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { mat4 } from \"gl-matrix\";\n\nimport type { Vec3, Mat4, CameraCommand, Viewport } from \"../types\";\nimport getOrthographicBounds from \"../utils/getOrthographicBounds\";\nimport project from \"./cameraProject\";\nimport { selectors, DEFAULT_CAMERA_STATE, type CameraState } from \"./CameraStore\";\n\nconst TEMP_MAT = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n// This is the regl command which encapsulates the camera projection and view matrices.\n// It adds the matrices to the regl context so they can be used by other commands.\nexport default (regl: any) => {\n  return class Camera implements CameraCommand {\n    viewportWidth: number = 0;\n    viewportHeight: number = 0;\n    cameraState: CameraState = DEFAULT_CAMERA_STATE;\n\n    getProjection(): Mat4 {\n      const { near, far, distance, fovy } = this.cameraState;\n      if (!this.cameraState.perspective) {\n        const bounds = getOrthographicBounds(distance, this.viewportWidth, this.viewportHeight);\n        const { left, right, bottom, top } = bounds;\n        return mat4.ortho([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], left, right, bottom, top, near, far);\n      }\n      const aspect = this.viewportWidth / this.viewportHeight;\n      return mat4.perspective([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], fovy, aspect, near, far);\n    }\n\n    getView(): Mat4 {\n      return selectors.view(this.cameraState);\n    }\n\n    // convert a point in 3D space to a point on the screen\n    toScreenCoord(viewport: Viewport, point: Vec3) {\n      const projection = this.getProjection();\n      const view = selectors.view(this.cameraState);\n      const combinedProjView = mat4.multiply(TEMP_MAT, projection, view);\n      const [x, y, z, w] = project([], point, viewport, combinedProjView);\n      if (z < 0 || z > 1 || w < 0) {\n        // resulting point is outside the window depth range\n        return undefined;\n      }\n      const diffY = viewport[3] + viewport[1];\n      const diffX = viewport[0];\n      // move the x value over based on the left of the viewport\n      // and move the y value over based on the bottom of the viewport\n      return [x - diffX, diffY - y, z];\n    }\n\n    draw = regl({\n      // adds context variables to the regl context so they are accessible from commands\n      context: {\n        // use functions, not lambdas here to make sure we can access\n        // the regl supplied this scope: http://regl.party/api#this\n        projection(context, props) {\n          const { viewportWidth, viewportHeight } = context;\n          // save these variables on the camera instance\n          // because we need them for raycasting\n          this.viewportWidth = viewportWidth;\n          this.viewportHeight = viewportHeight;\n          this.cameraState = props;\n          return this.getProjection();\n        },\n\n        view(context, props) {\n          return this.getView();\n        },\n\n        // inverse of the view rotation, used for making objects always face the camera\n        billboardRotation(context, props) {\n          return selectors.billboardRotation(this.cameraState);\n        },\n\n        isPerspective(context, props) {\n          return this.cameraState.perspective;\n        },\n\n        fovy(context, props) {\n          return this.cameraState.fovy;\n        },\n      },\n\n      // adds view and projection as uniforms to every command\n      // and makes them available in the shaders\n      uniforms: {\n        view: regl.context(\"view\"),\n        billboardRotation: regl.context(\"billboardRotation\"),\n        projection: regl.context(\"projection\"),\n      },\n    });\n  };\n};\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport normalizeWheel from \"normalize-wheel\";\nimport * as React from \"react\";\n\nimport type { CameraKeyMap, CameraAction, Vec2 } from \"../types\";\nimport getOrthographicBounds from \"../utils/getOrthographicBounds\";\nimport CameraStore from \"./CameraStore\";\n\nconst PAN_SPEED = 4;\nconst MOUSE_ZOOM_SPEED = 0.3;\nconst KEYBOARD_MOVE_SPEED = 0.3;\nconst KEYBOARD_ZOOM_SPEED = 150;\nconst KEYBOARD_SPIN_SPEED = 1.5;\n\nconst DEFAULT_KEYMAP: CameraKeyMap = {\n  KeyA: \"moveLeft\",\n  KeyD: \"moveRight\",\n  KeyE: \"rotateRight\",\n  KeyF: \"tiltUp\",\n  KeyQ: \"rotateLeft\",\n  KeyR: \"tiltDown\",\n  KeyS: \"moveDown\",\n  KeyW: \"moveUp\",\n  KeyX: \"zoomOut\",\n  KeyZ: \"zoomIn\",\n};\n\ntype KeyMotion = { x?: number, y?: number, zoom?: number, yaw?: number, tilt?: number };\n\ntype Props = {|\n  cameraStore: CameraStore,\n  keyMap?: CameraKeyMap,\n  shiftKeys: boolean,\n  children?: React.ChildrenArray<React.Element<any> | null>,\n|};\n\n// attaches mouse and keyboard listeners to allow for moving the camera on user input\nexport default class CameraListener extends React.Component<Props> {\n  _keyTimer: ?AnimationFrameID;\n  _keys: Set<string> = new Set();\n  _buttons: Set<number> = new Set();\n  _listeners = [];\n  _shiftKey = false;\n  _metaKey = false;\n  _ctrlKey = false;\n\n  _el: ?HTMLDivElement;\n  _rect: ClientRect | DOMRect;\n  _initialMouse: Vec2;\n\n  componentDidMount() {\n    const { _el } = this;\n    if (!_el) {\n      return;\n    }\n\n    this._rect = _el.getBoundingClientRect();\n    const listen = (target: any, name: string, fn) => {\n      target.addEventListener(name, fn);\n      this._listeners.push({ target, name, fn });\n    };\n    listen(document, \"blur\", this._onBlur);\n    listen(window, \"mouseup\", this._onWindowMouseUp);\n    _el.addEventListener(\"wheel\", this._onWheel, { passive: false });\n  }\n\n  componentWillUnmount() {\n    this._listeners.forEach((listener) => {\n      listener.target.removeEventListener(listener.name, listener.fn);\n    });\n    this._endDragging();\n    const { _el } = this;\n    if (!_el) {\n      return;\n    }\n    _el.removeEventListener(\"wheel\", this._onWheel, { passive: false });\n  }\n\n  _getMouseOnScreen = (mouse: MouseEvent) => {\n    const { clientX, clientY } = mouse;\n    const { top, left, width, height } = this._rect;\n    const x = (clientX - left) / width;\n    const y = (clientY - top) / height;\n    return [x, y];\n  };\n\n  _onMouseDown = (e: MouseEvent) => {\n    const { _el } = this;\n    if (!_el) {\n      return;\n    }\n\n    e.preventDefault();\n    this._buttons.add(e.button);\n    _el.focus();\n    this._rect = _el.getBoundingClientRect();\n    this._initialMouse = this._getMouseOnScreen(e);\n    this.startDragging(e);\n  };\n\n  _isLeftMouseDown() {\n    return this._buttons.has(0);\n  }\n\n  _isRightMouseDown() {\n    return this._buttons.has(2);\n  }\n\n  _getMagnitude(base: number = 1) {\n    return this._shiftKey ? base / 10 : base;\n  }\n\n  _getMoveMagnitude() {\n    // avoid interference with drawing tools\n    if (this._ctrlKey) {\n      return { x: 0, y: 0 };\n    }\n\n    const {\n      cameraStore: {\n        state: { distance, perspective },\n      },\n    } = this.props;\n    if (perspective) {\n      // in perspective mode its more like flying, so move by the magnitude\n      // we use the camera distance as a heuristic\n      return { x: distance, y: distance };\n    }\n    // in orthographic mode we know the exact viewable area\n    // which is a square so we can move exactly percentage within it\n    const { width, height } = this._rect;\n    const bounds = getOrthographicBounds(distance, width, height);\n    return { x: bounds.width, y: bounds.height };\n  }\n\n  _onWindowMouseMove = (e: MouseEvent) => {\n    if (!this._buttons.size) {\n      return;\n    }\n    this._shiftKey = e.shiftKey;\n    const {\n      cameraStore: {\n        cameraMove,\n        cameraRotate,\n        state: { perspective },\n      },\n    } = this.props;\n\n    // compute the amount the mouse has moved\n    let moveX, moveY;\n    const mouse = this._getMouseOnScreen(e);\n    // when pointer lock is enabled, we get movementX and movementY (with direction reversed)\n    // instead of the screenX/screenY changing... except, when using synergy, they come through\n    // like regular mousemove events.\n    if ((document: any).pointerLockElement && (e.movementX || e.movementY)) {\n      moveX = -e.movementX / this._rect.width;\n      moveY = -e.movementY / this._rect.height;\n    } else {\n      moveX = this._initialMouse[0] - mouse[0];\n      moveY = this._initialMouse[1] - mouse[1];\n    }\n    this._initialMouse = mouse;\n\n    if (this._isRightMouseDown()) {\n      const magnitude = this._getMagnitude(PAN_SPEED);\n      // in orthographic mode, flip the direction of rotation so \"left\" means \"counterclockwise\"\n      const x = (perspective ? moveX : -moveX) * magnitude;\n      // do not rotate vertically in orthograhpic mode\n      const y = perspective ? moveY * magnitude : 0;\n      cameraRotate([x, y]);\n    }\n\n    if (this._isLeftMouseDown()) {\n      const { x, y } = this._getMoveMagnitude();\n      cameraMove([this._getMagnitude(moveX * x), this._getMagnitude(-moveY * y)]);\n    }\n  };\n\n  _onMouseUp = (e: MouseEvent) => {\n    this._buttons.delete(e.button);\n    this._endDragging();\n  };\n\n  _onWindowMouseUp = (e: MouseEvent) => {\n    const { _el } = this;\n    if (!_el) {\n      return;\n    }\n\n    // do nothing if this container had a mouseup, because we catch it in the onMouseUp handler\n    if (_el.contains((e.target: any)) || e.target === _el) {\n      return;\n    }\n    // If mouseup triggers on the window outside this container, clear any active interactions.\n    // This will allow a mouseup outside the browser window to be handled; otherwise the mouse\n    // \"sticks\" in a down position until another click on this element is received.\n    this._buttons.clear();\n    this._endDragging();\n  };\n\n  startDragging(e: MouseEvent) {\n    if (e.button !== 0 && this._el && typeof this._el.requestPointerLock === \"function\") {\n      this._el.requestPointerLock();\n    }\n    window.addEventListener(\"mousemove\", this._onWindowMouseMove);\n  }\n\n  _endDragging() {\n    window.removeEventListener(\"mousemove\", this._onWindowMouseMove);\n    if (typeof (document: any).exitPointerLock === \"function\") {\n      (document: any).exitPointerLock();\n    }\n  }\n\n  _getKeyMotion = (code: string): ?KeyMotion => {\n    const moveSpeed = this._getMagnitude(KEYBOARD_MOVE_SPEED);\n    const zoomSpeed = this._getMagnitude(KEYBOARD_ZOOM_SPEED);\n    const spinSpeed = this._getMagnitude(KEYBOARD_SPIN_SPEED);\n    const { keyMap, shiftKeys } = this.props;\n    const action: CameraAction | false = (keyMap && keyMap[code]) || DEFAULT_KEYMAP[code] || false;\n\n    if (this._shiftKey && !shiftKeys) {\n      return null;\n    }\n\n    switch (action) {\n      case \"moveRight\":\n        return { x: moveSpeed };\n      case \"moveLeft\":\n        return { x: -moveSpeed };\n      case \"moveUp\":\n        return { y: moveSpeed };\n      case \"moveDown\":\n        return { y: -moveSpeed };\n      case \"zoomIn\":\n        return { zoom: zoomSpeed };\n      case \"zoomOut\":\n        return { zoom: -zoomSpeed };\n      case \"rotateLeft\":\n        return { yaw: -spinSpeed };\n      case \"rotateRight\":\n        return { yaw: spinSpeed };\n      case \"tiltUp\":\n        return { tilt: -spinSpeed };\n      case \"tiltDown\":\n        return { tilt: spinSpeed };\n      case false:\n        return null;\n      default:\n        (action: empty);\n        console.warn(\"Unrecognized key action:\", action);\n        return null;\n    }\n  };\n\n  _moveKeyboard(dt: number) {\n    const motion = { x: 0, y: 0, zoom: 0, yaw: 0, tilt: 0 };\n    this._keys.forEach((code) => {\n      const { x = 0, y = 0, zoom = 0, yaw = 0, tilt = 0 } = this._getKeyMotion(code) || {};\n      motion.x += x;\n      motion.y += y;\n      motion.zoom += zoom;\n      motion.yaw += yaw;\n      motion.tilt += tilt;\n    });\n\n    const {\n      cameraStore: {\n        cameraMove,\n        cameraRotate,\n        cameraZoom,\n        state: { perspective },\n      },\n    } = this.props;\n\n    if (motion.x || motion.y) {\n      const { x, y } = this._getMoveMagnitude();\n      cameraMove([motion.x * x * dt, motion.y * y * dt]);\n    }\n    if (motion.yaw || (perspective && motion.tilt)) {\n      cameraRotate([motion.yaw * dt, perspective ? motion.tilt * dt : 0]);\n    }\n    if (motion.zoom) {\n      cameraZoom(motion.zoom * dt);\n    }\n  }\n\n  _startKeyTimer(lastStamp: ?number) {\n    if (this._keyTimer) {\n      return;\n    }\n    this._keyTimer = requestAnimationFrame((stamp) => {\n      this._moveKeyboard((lastStamp ? stamp - lastStamp : 0) / 1000);\n      this._keyTimer = undefined;\n\n      // Only start the timer if keys are still pressed.\n      // We do this rather than stopping the timer in onKeyUp, because keys held\n      // sometimes actually trigger repeated keyup/keydown, rather than just repeated keydown.\n      // By checking currently-down keys in the requestAnimationFrame callback, we give the browser enough time to\n      // handle both the keyup and keydown before checking whether we should restart the timer.\n      if (this._keys.size) {\n        this._startKeyTimer(stamp);\n      }\n    });\n  }\n\n  _stopKeyTimer() {\n    if (this._keyTimer) {\n      cancelAnimationFrame(this._keyTimer);\n    }\n    this._keyTimer = undefined;\n  }\n\n  _onKeyDown = (e: SyntheticKeyboardEvent<HTMLDivElement>) => {\n    const { keyMap } = this.props;\n    this._shiftKey = e.shiftKey;\n    this._metaKey = e.metaKey;\n    this._ctrlKey = e.ctrlKey;\n    const code = ((e.nativeEvent: any): KeyboardEvent).code;\n\n    // ignore repeated keydown events\n    if (e.repeat || this._keys.has(code)) {\n      e.stopPropagation();\n      e.preventDefault();\n      return;\n    }\n\n    if (e.altKey || e.ctrlKey || e.metaKey) {\n      // we don't currently handle these modifiers\n      return;\n    }\n\n    // allow null, false, or empty keymappings which explicitly cancel Worldview from processing that key\n    if (keyMap && code in keyMap && !keyMap[code]) {\n      return false;\n    }\n\n    // if we respond to this key, start the update timer\n    if (this._getKeyMotion(code)) {\n      this._keys.add(code);\n      this._startKeyTimer();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  _onKeyUp = (e: SyntheticKeyboardEvent<HTMLDivElement>) => {\n    this._shiftKey = e.shiftKey;\n    this._metaKey = e.metaKey;\n    this._ctrlKey = e.ctrlKey;\n\n    this._keys.delete(((e.nativeEvent: any): KeyboardEvent).code);\n  };\n\n  _onWheel = (e: WheelEvent) => {\n    // stop the wheel event here, as wheel propagation through the entire dom\n    // can cause the browser to slow down & thrash\n    e.preventDefault();\n    e.stopPropagation();\n    this._shiftKey = e.shiftKey;\n\n    // with osx trackpad scrolling, slow to medium pixelY is around +/- 1 to 10\n    // external mouse wheels generally come in higher values around +/- 30 to 50\n    const { pixelX, pixelY } = normalizeWheel(e);\n\n    // shift+scroll on an external mouse may scroll in the X direction instead of Y\n    const wheelAmount = pixelY || pixelX;\n\n    // we use positive value to indicate zooming in\n    // and negative value to zoom out, so reverse the direction of the wheel\n    const dir = Math.sign(wheelAmount) * -1;\n    const amount = Math.abs(wheelAmount);\n    // restrict zoom percentage per tick to between 1 & 50 percent\n    const percentage = Math.max(1, Math.min(amount, 50));\n\n    // support shift+wheel magnitude adjustment\n    const zoomPercentage = this._getMagnitude(percentage * dir * MOUSE_ZOOM_SPEED);\n    this.props.cameraStore.cameraZoom(zoomPercentage);\n  };\n\n  // make sure all movements stop if the document loses focus by resetting modifier keys\n  // to their 'off' position\n  // (e.g. ctrl+tab leaving the page should not leave the ctrl key in the 'on' position)\n  _onBlur = (e: MouseEvent) => {\n    this._keys = new Set();\n    this._ctrlKey = false;\n    this._shiftKey = false;\n    this._metaKey = false;\n    this._stopKeyTimer();\n  };\n\n  _onContextMenu = (e: MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  render() {\n    const { children } = this.props;\n    return (\n      <div\n        tabIndex={0}\n        style={{ outline: \"none\" }}\n        draggable\n        ref={(el) => (this._el = el)}\n        onMouseDown={this._onMouseDown}\n        onMouseUp={this._onMouseUp}\n        onBlur={this._onBlur}\n        onContextMenu={this._onContextMenu}\n        onKeyDown={this._onKeyDown}\n        onKeyUp={this._onKeyUp}>\n        {children}\n      </div>\n    );\n  }\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport function getNodeEnv() {\n  return process && process.env && process.env.NODE_ENV;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { vec3, mat4 } from \"gl-matrix\";\n\nimport type { CameraCommand, Vec3 } from \"../types\";\n\ntype ClickInfo = { clientX: number, clientY: number, width: number, height: number };\n\nconst tempVec = [0, 0, 0];\nconst tempMat = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport class Ray {\n  origin: Vec3;\n  dir: Vec3;\n  point: Vec3;\n\n  constructor(origin: Vec3, dir: Vec3, point: Vec3) {\n    this.origin = origin;\n    this.dir = dir;\n    this.point = point;\n  }\n\n  distanceToPoint(point: Vec3) {\n    return vec3.distance(this.origin, point);\n  }\n\n  // https://commons.apache.org/proper/commons-math/javadocs/api-3.6/src-html/org/apache/commons/math3/geometry/euclidean/threed/Plane.html#line.394\n  planeIntersection(planeCoordinate: Vec3, planeNormal: Vec3): ?Vec3 {\n    const d = vec3.dot(planeNormal, planeCoordinate);\n    const cosine = vec3.dot(planeNormal, this.dir);\n\n    if (cosine === 0) {\n      return null;\n    }\n\n    const x = (d - vec3.dot(planeNormal, this.origin)) / cosine;\n    const contact = vec3.add([0, 0, 0], this.origin, vec3.scale(tempVec, this.dir, x));\n    return contact;\n  }\n}\n\n// adapted from https://github.com/regl-project/regl/blob/master/example/raycast.js\nexport function getRayFromClick(camera: CameraCommand, { clientX, clientY, width, height }: ClickInfo) {\n  const projectionMatrix = camera.getProjection();\n  const viewMatrix = camera.getView();\n\n  const vp = mat4.multiply(tempMat, projectionMatrix, viewMatrix);\n  const invVp = mat4.invert(tempMat, vp);\n\n  const mouseX = (2.0 * clientX) / width - 1.0;\n  const mouseY = (-2.0 * clientY) / height + 1.0;\n  // get a single point on the camera ray.\n  const rayPoint = vec3.transformMat4([0, 0, 0], [mouseX, mouseY, 0.0], invVp);\n\n  // get the position of the camera.\n  const rayOrigin = vec3.transformMat4([0, 0, 0], [0, 0, 0], mat4.invert(tempMat, viewMatrix));\n  const rayDir = vec3.normalize([0, 0, 0], vec3.subtract(tempVec, rayPoint, rayOrigin));\n\n  return new Ray(rayOrigin, rayDir, rayPoint);\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport { type WorldviewContextType } from \"./WorldviewContext\";\n\n// $FlowFixMe\nexport default React.createContext((undefined: WorldviewContextType | void));\n","// @flow\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type {\n  ComponentMouseHandler,\n  GetChildrenForHitmap,\n  MouseEventEnum,\n  RawCommand,\n  Color,\n  Point,\n  MouseEventObject,\n} from \"../types\";\nimport { getNodeEnv } from \"../utils/common\";\nimport { Ray } from \"../utils/Raycast\";\nimport { type WorldviewContextType } from \"../WorldviewContext\";\nimport WorldviewReactContext from \"../WorldviewReactContext\";\n\nexport const SUPPORTED_MOUSE_EVENTS = [\"onClick\", \"onMouseUp\", \"onMouseMove\", \"onMouseDown\", \"onDoubleClick\"];\n\nexport type MarkerDefault = {\n  id?: number,\n  points?: Point[],\n  color?: Color,\n};\n\nexport type CommonCommandProps = {\n  [MouseEventEnum]: ComponentMouseHandler,\n  layerIndex?: number,\n  getChildrenForHitmap?: GetChildrenForHitmap,\n};\n\ntype Props<T> = {\n  ...CommonCommandProps,\n  children?: T[] | T,\n  // Deprecated, but here for backwards compatibility\n  drawProps?: T[],\n  reglCommand: RawCommand<T>,\n};\n\nexport type CommandProps<T> = Props<T>;\n\n// Component to dispatch children (for drawing) and hitmap props and a reglCommand to the render loop to render with regl.\nexport default class Command<T> extends React.Component<Props<T>> {\n  context: ?WorldviewContextType;\n  static displayName = \"Command\";\n\n  constructor(props: Props<T>) {\n    super(props);\n    // In development put a check in to make sure the reglCommand prop is not mutated.\n    // Similar to how react checks for unsupported or deprecated calls in a development build.\n    if (getNodeEnv() !== \"production\") {\n      // $FlowFixMe\n      this.shouldComponentUpdate = (nextProps: Props) => {\n        if (nextProps.reglCommand !== this.props.reglCommand) {\n          console.error(\"Changing the regl command prop on a <Command /> is not supported.\");\n        }\n        return true;\n      };\n    }\n  }\n\n  componentDidMount() {\n    const context = this.context;\n    if (!context) {\n      return;\n    }\n    context.onMount(this, this.props.reglCommand);\n    this._updateContext();\n  }\n\n  componentDidUpdate() {\n    this._updateContext();\n  }\n\n  componentWillUnmount() {\n    const context = this.context;\n    if (!context) {\n      return;\n    }\n    context.onUnmount(this);\n  }\n\n  _updateContext() {\n    const context = this.context;\n    if (!context) {\n      return;\n    }\n\n    const { reglCommand, layerIndex, getChildrenForHitmap } = this.props;\n    const children = this.props.children || this.props.drawProps;\n    if (children == null) {\n      return;\n    }\n    context.registerDrawCall({\n      instance: this,\n      reglCommand,\n      children,\n      layerIndex,\n      getChildrenForHitmap,\n    });\n  }\n\n  handleMouseEvent(\n    objects: MouseEventObject[],\n    ray: Ray,\n    e: SyntheticMouseEvent<HTMLCanvasElement>,\n    mouseEventName: MouseEventEnum\n  ) {\n    const mouseHandler = this.props[mouseEventName];\n    if (!mouseHandler || !objects.length) {\n      return;\n    }\n    mouseHandler(e, { ray, objects });\n  }\n\n  render() {\n    return (\n      <WorldviewReactContext.Consumer>\n        {(ctx: ?WorldviewContextType) => {\n          if (ctx) {\n            this.context = ctx;\n          }\n          return null;\n        }}\n      </WorldviewReactContext.Consumer>\n    );\n  }\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport last from \"lodash/last\";\n\nimport Command from \"../commands/Command\";\nimport type { ObjectHitmapId, Vec4, MouseEventObject } from \"../types\";\nimport { intToRGB } from \"./commandUtils\";\n\nfunction fillArray(start: number, length: number): number[] {\n  return new Array(length).fill(0).map((_, index) => start + index);\n}\n\ntype CommandType = Command<any>;\n\n/*\n * This object manages the mapping between objects that are rendered into the scene and their IDs.\n * It supplies an API for generating IDs for a rendered object and then accessing those objects based on their ID.\n */\nexport default class HitmapObjectIdManager {\n  _objectsByObjectHitmapIdMap: { [ObjectHitmapId]: Object } = {};\n  _commandsByObjectMap: Map<Object, CommandType> = new Map();\n  _nextObjectHitmapId = 1;\n  _instanceIndexByObjectHitmapIdMap: { [ObjectHitmapId]: number } = {};\n\n  assignNextColors = (command: CommandType, object: Object, count: number): Vec4[] => {\n    if (count < 1) {\n      throw new Error(\"Must get at least 1 id\");\n    }\n\n    const ids: ObjectHitmapId[] = fillArray(this._nextObjectHitmapId, count);\n    this._nextObjectHitmapId = last(ids) + 1;\n\n    // Instanced rendering - add to the instanced ID map.\n    if (count > 1) {\n      ids.forEach((id, index) => {\n        this._instanceIndexByObjectHitmapIdMap[id] = index;\n      });\n    }\n\n    // Store the mapping of ID to original marker object\n    for (const id of ids) {\n      this._objectsByObjectHitmapIdMap[id] = object;\n    }\n    this._commandsByObjectMap.set(object, command);\n\n    // Return colors from the IDs.\n    const colors = ids.map((id) => intToRGB(id));\n    return colors;\n  };\n\n  getObjectByObjectHitmapId = (objectHitmapId: ObjectHitmapId): MouseEventObject => {\n    return {\n      object: this._objectsByObjectHitmapIdMap[objectHitmapId],\n      instanceIndex: this._instanceIndexByObjectHitmapIdMap[objectHitmapId],\n    };\n  };\n\n  getCommandForObject = (object: Object): ?CommandType => {\n    return this._commandsByObjectMap.get(object);\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { signal, type Signal } from \"./signal\";\n\ntype QueuedFn = ((...args: any[]) => Promise<any>) & { currentPromise: ?Promise<any> };\n\n// Wait for the previous promise to resolve before starting the next call to the function.\nexport default function queuePromise(fn: (...args: any[]) => Promise<any>): QueuedFn {\n  // Whether we are currently waiting for a promise returned by `fn` to resolve.\n  let calling = false;\n  // The list of calls made to the function was made while a call was in progress.\n  const nextCalls: {| args: any[], promise: Signal<any> |}[] = [];\n\n  function queuedFn(...args) {\n    if (calling) {\n      const returnPromise = signal();\n      nextCalls.push({ args, promise: returnPromise });\n      return returnPromise;\n    }\n    return start(...args);\n  }\n\n  function start(...args) {\n    calling = true;\n\n    const promise = fn(...args).finally(() => {\n      calling = false;\n      queuedFn.currentPromise = undefined;\n      if (nextCalls.length) {\n        const { promise: nextPromise, args: nextArgs } = nextCalls.shift();\n        start(...nextArgs)\n          .then((result) => nextPromise.resolve(result))\n          .catch((error) => nextPromise.reject(error));\n      }\n    });\n    queuedFn.currentPromise = promise;\n\n    return promise;\n  }\n\n  return queuedFn;\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport type Signal<T> = Promise<T> & {\n  resolve: (T) => void,\n  reject: (Error) => void,\n};\n\nexport function signal<T>(): Signal<T> {\n  let resolve;\n  let reject;\n  const promise: any = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  promise.resolve = resolve;\n  promise.reject = reject;\n  return promise;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport createREGL from \"regl\";\nimport shallowequal from \"shallowequal\";\n\nimport { camera, CameraStore } from \"./camera/index\";\nimport Command from \"./commands/Command\";\nimport type {\n  Dimensions,\n  RawCommand,\n  CompiledReglCommand,\n  CameraCommand,\n  Vec4,\n  CameraState,\n  MouseEventObject,\n  GetChildrenForHitmap,\n  AssignNextColorsFn,\n} from \"./types\";\nimport { getIdFromPixel, intToRGB } from \"./utils/commandUtils\";\nimport { getNodeEnv } from \"./utils/common\";\nimport HitmapObjectIdManager from \"./utils/HitmapObjectIdManager\";\nimport queuePromise from \"./utils/queuePromise\";\nimport { getRayFromClick } from \"./utils/Raycast\";\n\ntype Props = any;\n\ntype ConstructorArgs = {\n  dimension: Dimensions,\n  canvasBackgroundColor: Vec4,\n  cameraState: CameraState,\n  defaultCameraState?: CameraState,\n  onCameraStateChange: ?(CameraState) => void,\n};\n\ntype InitializedData = {\n  _fbo: any,\n  regl: any,\n  camera: CameraCommand,\n};\n\nexport type DrawInput = {\n  instance: Command<any>,\n  reglCommand: RawCommand<any>,\n  children: Props,\n  layerIndex: ?number,\n  getChildrenForHitmap: ?GetChildrenForHitmap,\n};\n\nexport type PaintFn = () => void;\n\nexport type WorldviewContextType = {\n  onMount(instance: Command<any>, command: RawCommand<any>): void,\n  registerDrawCall(drawInput: DrawInput): void,\n  registerPaintCallback(PaintFn): void,\n  unregisterPaintCallback(PaintFn): void,\n  onUnmount(instance: Command<any>): void,\n  onDirty(): void,\n  +dimension: Dimensions,\n  +initializedData: ?InitializedData,\n};\n\n// Compile instructions with an initialized regl context into a regl command.\n// If the instructions are a function, pass the context to the instructions and compile the result\n// of the function; otherwise, compile the instructions directly\nfunction compile<T>(regl: any, cmd: RawCommand<T>): CompiledReglCommand<T> {\n  const src = cmd(regl);\n  return typeof src === \"function\" ? src : regl(src);\n}\n\n// This is made available to every Command component as `this.context`.\n// It contains all the regl interaction code and is responsible for collecting and executing\n// draw calls, hitmap calls, and raycasting.\n\nexport class WorldviewContext {\n  _commands: Set<RawCommand<any>> = new Set();\n  _compiled: Map<Function, CompiledReglCommand<any>> = new Map();\n  _drawCalls: Map<React.Component<any>, DrawInput> = new Map();\n  _frame: ?AnimationFrameID;\n  _paintCalls: Map<PaintFn, PaintFn> = new Map();\n  _hitmapObjectIdManager: HitmapObjectIdManager = new HitmapObjectIdManager();\n  _cachedReadHitmapCall: ?{\n    arguments: any[],\n    result: Array<[MouseEventObject, Command<any>]>,\n  } = undefined;\n  // store every compiled command object compiled for debugging purposes\n  reglCommandObjects: { stats: { count: number } }[] = [];\n  counters: { paint?: number, render?: number } = {};\n  dimension: Dimensions;\n  onDirty: () => void;\n  cameraStore: CameraStore;\n  canvasBackgroundColor: Vec4 = [0, 0, 0, 1];\n  // group all initialized data together so it can be checked for existence to verify initialization is complete\n  initializedData: ?InitializedData;\n\n  constructor({ dimension, canvasBackgroundColor, cameraState, onCameraStateChange }: ConstructorArgs) {\n    // used for children to call paint() directly\n    this.dimension = dimension;\n    this.canvasBackgroundColor = canvasBackgroundColor;\n    this.cameraStore = new CameraStore((cameraState: CameraState) => {\n      if (onCameraStateChange) {\n        onCameraStateChange(cameraState);\n      } else {\n        // this must be called for Worldview with defaultCameraState prop\n        this.paint();\n      }\n    }, cameraState);\n  }\n\n  initialize(canvas: HTMLCanvasElement) {\n    if (this.initializedData) {\n      throw new Error(\"can not initialize regl twice\");\n    }\n\n    const regl = this._instrumentCommands(\n      createREGL({\n        canvas,\n        extensions: [\n          \"angle_instanced_arrays\",\n          \"oes_texture_float\",\n          \"oes_element_index_uint\",\n          \"oes_standard_derivatives\",\n        ],\n        profile: getNodeEnv() !== \"production\",\n      })\n    );\n    // compile any components which mounted before regl is initialized\n    this._commands.forEach((uncompiledCommand) => {\n      const compiledCommand = compile(regl, uncompiledCommand);\n      this._compiled.set(uncompiledCommand, compiledCommand);\n    });\n\n    const Camera = compile(regl, camera);\n    const compiledCameraCommand = new Camera();\n    // framebuffer object from regl context\n    const fbo = regl.framebuffer({\n      width: Math.round(this.dimension.width),\n      height: Math.round(this.dimension.height),\n    });\n\n    this.initializedData = {\n      _fbo: fbo,\n      camera: compiledCameraCommand,\n      regl,\n    };\n  }\n\n  destroy() {\n    if (this.initializedData) {\n      this.initializedData.regl.destroy();\n    }\n    if (this._frame) {\n      cancelAnimationFrame(this._frame);\n    }\n  }\n\n  // compile a command when it is first mounted, and try to register in _commands and _compiled maps\n  onMount(instance: React.Component<any>, command: RawCommand<any>) {\n    const { initializedData } = this;\n    // do nothing if regl hasn't been initialized yet\n    if (!initializedData || this._commands.has(command)) {\n      return;\n    }\n    this._commands.add(command);\n\n    // for components that mount after regl is initialized\n    this._compiled.set(command, compile(initializedData.regl, command));\n  }\n\n  // unregister children hitmap and draw calls\n  onUnmount(instance: React.Component<any>) {\n    this._drawCalls.delete(instance);\n  }\n\n  unregisterPaintCallback(paintFn: PaintFn) {\n    this._paintCalls.delete(paintFn);\n  }\n\n  registerDrawCall(drawInput: DrawInput) {\n    this._drawCalls.set(drawInput.instance, drawInput);\n  }\n\n  registerPaintCallback(paintFn: PaintFn) {\n    this._paintCalls.set(paintFn, paintFn);\n  }\n\n  setDimension(dimension: Dimensions) {\n    this.dimension = dimension;\n  }\n\n  raycast = (canvasX: number, canvasY: number) => {\n    if (!this.initializedData) {\n      return undefined;\n    }\n\n    const { width, height } = this.dimension;\n    return getRayFromClick(this.initializedData.camera, {\n      clientX: canvasX,\n      clientY: canvasY,\n      width,\n      height,\n    });\n  };\n\n  paint() {\n    try {\n      this._paint();\n    } catch (error) {\n      // Regl automatically tries to reconnect when losing the canvas 3d context.\n      // We should log this error, but it's not important to throw it.\n      if (error.message === \"(regl) context lost\") {\n        console.warn(error);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  _paint() {\n    const start = Date.now();\n    this.reglCommandObjects.forEach((cmd) => (cmd.stats.count = 0));\n    if (!this.initializedData) {\n      return;\n    }\n    this._cachedReadHitmapCall = null; // clear the cache every time we paint\n    const { regl, camera } = this.initializedData;\n    this._clearCanvas(regl);\n    camera.draw(this.cameraStore.state, () => {\n      const x = Date.now();\n      this._drawInput();\n      this.counters.paint = Date.now() - x;\n    });\n\n    this._paintCalls.forEach((paintCall) => {\n      paintCall();\n    });\n    this.counters.render = Date.now() - start;\n    this._frame = undefined;\n  }\n\n  onDirty = () => {\n    if (undefined === this._frame) {\n      this._frame = requestAnimationFrame(() => this.paint());\n    }\n  };\n\n  readHitmap = queuePromise(\n    (\n      canvasX: number,\n      canvasY: number,\n      enableStackedObjectEvents: boolean,\n      maxStackedObjectCount: number\n    ): Promise<Array<[MouseEventObject, Command<any>]>> => {\n      if (!this.initializedData) {\n        return Promise.reject(new Error(\"regl data not initialized yet\"));\n      }\n      const args = [canvasX, canvasY, enableStackedObjectEvents, maxStackedObjectCount];\n\n      const cachedReadHitmapCall = this._cachedReadHitmapCall;\n      if (cachedReadHitmapCall) {\n        if (shallowequal(cachedReadHitmapCall.arguments, args)) {\n          // Make sure that we aren't returning the exact object identity of the mouseEventObject - we don't know what\n          // callers have done with it.\n          const result = cachedReadHitmapCall.result.map(([mouseEventObject, command]) => [\n            { ...mouseEventObject },\n            command,\n          ]);\n          return Promise.resolve(result);\n        }\n        this._cachedReadHitmapCall = undefined;\n      }\n\n      const { regl, camera, _fbo } = this.initializedData;\n      const { width, height } = this.dimension;\n\n      const x = canvasX;\n      // 0,0 corresponds to the bottom left in the webgl context, but the top left in window coordinates\n      const y = height - canvasY;\n\n      // regl will only resize the framebuffer if the size changed\n      // it uses floored whole pixel values\n      _fbo.resize(Math.floor(width), Math.floor(height));\n\n      return new Promise((resolve) => {\n        // tell regl to use a framebuffer for this render\n        regl({ framebuffer: _fbo })(() => {\n          // clear the framebuffer\n          regl.clear({ color: intToRGB(0), depth: 1 });\n          let currentObjectId = 0;\n          const excludedObjects = [];\n          const mouseEventsWithCommands = [];\n          let counter = 0;\n\n          camera.draw(this.cameraStore.state, () => {\n            // Every iteration in this loop clears the framebuffer, draws the hitmap objects that have NOT already been\n            // seen to the framebuffer, and then reads the pixel under the cursor to find the object on top.\n            // If `enableStackedObjectEvents` is false, we only do this iteration once - we only resolve with 0 or 1\n            // objects.\n            do {\n              if (counter >= maxStackedObjectCount) {\n                // Provide a max number of layers so this while loop doesn't crash the page.\n                console.error(\n                  `Hit ${maxStackedObjectCount} iterations. There is either a bug or that number of rendered hitmap layers under the mouse cursor.`\n                );\n                break;\n              }\n              counter++;\n              regl.clear({ color: intToRGB(0), depth: 1 });\n              this._drawInput(true, excludedObjects);\n\n              // it's possible to get x/y values outside the framebuffer size\n              // if the mouse quickly leaves the draw area during a read operation\n              // reading outside the bounds of the framebuffer causes errors\n              // and puts regl into a bad internal state.\n              // https://github.com/regl-project/regl/blob/28fbf71c871498c608d9ec741d47e34d44af0eb5/lib/read.js#L57\n              if (x < Math.floor(width) && y < Math.floor(height) && x >= 0 && y >= 0) {\n                const pixel = new Uint8Array(4);\n\n                // read pixel value from the frame buffer\n                regl.read({\n                  x,\n                  y,\n                  width: 1,\n                  height: 1,\n                  data: pixel,\n                });\n\n                currentObjectId = getIdFromPixel(pixel);\n                const mouseEventObject = this._hitmapObjectIdManager.getObjectByObjectHitmapId(currentObjectId);\n\n                // Check an error case: if we see an ID/color that we don't know about, it means that some command is\n                // drawing a color into the hitmap that it shouldn't be.\n                if (currentObjectId > 0 && !mouseEventObject) {\n                  console.error(\n                    `Clicked on an unknown object with id ${currentObjectId}. This likely means that a command is painting an incorrect color into the hitmap.`\n                  );\n                }\n                // Check an error case: if we've already seen this object, then the getHitmapFromChildren function\n                // is not respecting the excludedObjects correctly and we should notify the user of a bug.\n                if (\n                  excludedObjects.some(\n                    ({ object, instanceIndex }) =>\n                      object === mouseEventObject.object && instanceIndex === mouseEventObject.instanceIndex\n                  )\n                ) {\n                  console.error(\n                    `Saw object twice when reading from hitmap. There is likely an error in getHitmapFromChildren`,\n                    mouseEventObject\n                  );\n                  break;\n                }\n\n                if (currentObjectId > 0 && mouseEventObject.object) {\n                  const command = this._hitmapObjectIdManager.getCommandForObject(mouseEventObject.object);\n                  excludedObjects.push(mouseEventObject);\n                  if (command) {\n                    mouseEventsWithCommands.push([mouseEventObject, command]);\n                  }\n                }\n              }\n              // If we haven't enabled stacked object events, break out of the loop immediately.\n              // eslint-disable-next-line no-unmodified-loop-condition\n            } while (currentObjectId !== 0 && enableStackedObjectEvents);\n\n            this._cachedReadHitmapCall = {\n              arguments: args,\n              result: mouseEventsWithCommands,\n            };\n            resolve(mouseEventsWithCommands);\n          });\n        });\n      });\n    }\n  );\n\n  _drawInput = (isHitmap?: boolean, excludedObjects?: MouseEventObject[]) => {\n    if (isHitmap) {\n      this._hitmapObjectIdManager = new HitmapObjectIdManager();\n    }\n\n    const drawCalls = Array.from(this._drawCalls.values()).sort((a, b) => (a.layerIndex || 0) - (b.layerIndex || 0));\n    drawCalls.forEach((drawInput: DrawInput) => {\n      const { reglCommand, children, instance, getChildrenForHitmap } = drawInput;\n      if (!children) {\n        return console.debug(`${isHitmap ? \"hitmap\" : \"\"} draw skipped, props was falsy`, drawInput);\n      }\n      const cmd = this._compiled.get(reglCommand);\n      if (!cmd) {\n        return console.warn(\"could not find draw command for\", instance ? instance.constructor.displayName : \"Unknown\");\n      }\n      // draw hitmap\n      if (isHitmap && getChildrenForHitmap) {\n        const assignNextColorsFn: AssignNextColorsFn = (...rest) => {\n          return this._hitmapObjectIdManager.assignNextColors(instance, ...rest);\n        };\n        const hitmapProps = getChildrenForHitmap(children, assignNextColorsFn, excludedObjects || []);\n        if (hitmapProps) {\n          cmd(hitmapProps, true);\n        }\n      } else if (!isHitmap) {\n        cmd(children, false);\n      }\n    });\n  };\n\n  _clearCanvas = (regl: any) => {\n    // Since we aren't using regl.frame and only rendering when we need to,\n    // we need to tell regl to update its internal state.\n    regl.poll();\n    regl.clear({\n      color: this.canvasBackgroundColor,\n      depth: 1,\n    });\n  };\n\n  _instrumentCommands(regl: any) {\n    if (getNodeEnv() === \"production\") {\n      return regl;\n    }\n    return new Proxy(regl, {\n      apply: (target, thisArg, args) => {\n        const command = target(...args);\n        if (typeof command.stats === \"object\") {\n          this.reglCommandObjects.push(command);\n        }\n        return command;\n      },\n    });\n  }\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport mapValues from \"lodash/mapValues\";\nimport pickBy from \"lodash/pickBy\";\nimport * as React from \"react\";\nimport ContainerDimensions from \"react-container-dimensions\";\n\nimport { CameraListener, DEFAULT_CAMERA_STATE } from \"./camera/index\";\nimport Command from \"./commands/Command\";\nimport type {\n  MouseHandler,\n  Dimensions,\n  Vec4,\n  CameraState,\n  CameraKeyMap,\n  MouseEventEnum,\n  MouseEventObject,\n} from \"./types\";\nimport aggregate from \"./utils/aggregate\";\nimport { getNodeEnv } from \"./utils/common\";\nimport { Ray } from \"./utils/Raycast\";\nimport { WorldviewContext } from \"./WorldviewContext\";\nimport WorldviewReactContext from \"./WorldviewReactContext\";\n\nconst DEFAULT_BACKGROUND_COLOR = [0, 0, 0, 1];\nexport const DEFAULT_MOUSE_CLICK_RADIUS = 3;\nconst DEFAULT_MAX_NUMBER_OF_HITMAP_LAYERS = 100;\n\nexport type BaseProps = {|\n  keyMap?: CameraKeyMap,\n  shiftKeys: boolean,\n  backgroundColor?: Vec4,\n  // (Deprecated) rendering the hitmap on mouse move is expensive, so disable it by default\n  hitmapOnMouseMove?: boolean,\n  // Disable hitmap generation for specific mouse events\n  // For example, if you want to disable hitmap generating on drag, use: [\"onMouseDown\", \"onMouseMove\", \"onMouseUp\"]\n  disableHitmapForEvents?: MouseEventEnum[],\n  // getting events for objects stacked on top of each other is expensive, so disable it by default\n  enableStackedObjectEvents?: boolean,\n  // allow users to specify the max stacked object count\n  maxStackedObjectCount: number,\n  showDebug?: boolean,\n  children?: React.Node,\n  style: { [styleAttribute: string]: number | string },\n\n  cameraState?: $Shape<CameraState>,\n  onCameraStateChange?: (CameraState) => void,\n  defaultCameraState?: $Shape<CameraState>,\n  // interactions\n  onDoubleClick?: MouseHandler,\n  onMouseDown?: MouseHandler,\n  onMouseUp?: MouseHandler,\n  onMouseMove?: MouseHandler,\n  onClick?: MouseHandler,\n  ...Dimensions,\n|};\n\ntype State = {|\n  worldviewContext: WorldviewContext,\n|};\n\nfunction handleWorldviewMouseInteraction(\n  objects: MouseEventObject[],\n  ray: Ray,\n  e: SyntheticMouseEvent<HTMLCanvasElement>,\n  handler: MouseHandler\n) {\n  const args = { ray, objects };\n\n  try {\n    handler(e, args);\n  } catch (err) {\n    console.error(\"Error during mouse handler\", err);\n  }\n}\n\n// responsible for camera and scene state management\n// takes in children that declaritively define what should be rendered\nexport class WorldviewBase extends React.Component<BaseProps, State> {\n  _canvas: { current: HTMLCanvasElement | null } = React.createRef();\n  _tick: AnimationFrameID | void;\n  _dragStartPos: ?{ x: number, y: number } = null;\n\n  static defaultProps = {\n    maxStackedObjectCount: DEFAULT_MAX_NUMBER_OF_HITMAP_LAYERS,\n    backgroundColor: DEFAULT_BACKGROUND_COLOR,\n    shiftKeys: true,\n    style: {},\n  };\n\n  constructor(props: BaseProps) {\n    super(props);\n    const {\n      width,\n      height,\n      top,\n      left,\n      backgroundColor,\n      onCameraStateChange,\n      cameraState,\n      defaultCameraState,\n      hitmapOnMouseMove,\n      disableHitmapForEvents,\n    } = props;\n    if (onCameraStateChange) {\n      if (!cameraState) {\n        console.warn(\n          \"You provided `onCameraStateChange` without `cameraState`. Use Worldview as a controlled component with `cameraState` and `onCameraStateChange`, or uncontrolled with `defaultCameraState`.\"\n        );\n      }\n      if (cameraState && defaultCameraState) {\n        console.warn(\"You provided both `cameraState` and `defaultCameraState`. `defaultCameraState` will be ignored.\");\n      }\n    } else {\n      if (cameraState) {\n        console.warn(\n          \"You provided `cameraState` without an `onCameraStateChange` handler. This will prevent moving the camera. If the camera should be movable, use `defaultCameraState`, otherwise set `onCameraStateChange`.\"\n        );\n      }\n    }\n\n    if (hitmapOnMouseMove) {\n      if (disableHitmapForEvents) {\n        throw new Error(\n          \"Property 'hitmapOnMouseMove' is deprectated and will be ignored when used along with 'disableHitmapForEvents'.\"\n        );\n      } else {\n        console.warn(\n          \"Property 'hitmapOnMouseMove' is deprectated. Please use 'disableHitmapForEvents' property instead.\"\n        );\n      }\n    }\n\n    this.state = {\n      worldviewContext: new WorldviewContext({\n        dimension: { width, height, top, left },\n        canvasBackgroundColor: backgroundColor || DEFAULT_BACKGROUND_COLOR,\n        // DEFAULT_CAMERA_STATE is applied if both `cameraState` and `defaultCameraState` are not present\n        cameraState: props.cameraState || props.defaultCameraState || DEFAULT_CAMERA_STATE,\n        onCameraStateChange: props.onCameraStateChange || undefined,\n      }),\n    };\n  }\n\n  static getDerivedStateFromProps({ width, height, top, left }: BaseProps, { worldviewContext }: State) {\n    worldviewContext.setDimension({ width, height, top, left });\n    return null;\n  }\n\n  componentDidMount() {\n    if (!this._canvas.current) {\n      return console.warn(\"missing canvas element\");\n    }\n    const { worldviewContext } = this.state;\n    worldviewContext.initialize(this._canvas.current);\n    // trigger rendering in children that require camera to be present, e.g. Text component\n    this.setState({}); //eslint-disable-line\n    // call paint to set the correct viewportWidth and viewportHeight for camera so non-regl components\n    // such as Text can get the correct screen coordinates for the first render\n    worldviewContext.paint();\n  }\n\n  componentWillUnmount() {\n    if (this._tick) {\n      cancelAnimationFrame(this._tick);\n    }\n    this.state.worldviewContext.destroy();\n  }\n\n  componentDidUpdate() {\n    const { worldviewContext } = this.state;\n    // update internal cameraState\n    if (this.props.cameraState) {\n      worldviewContext.cameraStore.setCameraState(this.props.cameraState);\n    }\n    worldviewContext.onDirty();\n  }\n\n  _onDoubleClick = (e: SyntheticMouseEvent<HTMLCanvasElement>) => {\n    this._onMouseInteraction(e, \"onDoubleClick\");\n  };\n\n  _onMouseDown = (e: SyntheticMouseEvent<HTMLCanvasElement>) => {\n    this._dragStartPos = { x: e.clientX, y: e.clientY };\n    this._onMouseInteraction(e, \"onMouseDown\");\n  };\n\n  _onMouseMove = (e: SyntheticMouseEvent<HTMLCanvasElement>) => {\n    this._onMouseInteraction(e, \"onMouseMove\");\n  };\n\n  _onMouseUp = (e: SyntheticMouseEvent<HTMLCanvasElement>) => {\n    this._onMouseInteraction(e, \"onMouseUp\");\n    const { _dragStartPos } = this;\n    if (_dragStartPos) {\n      const deltaX = e.clientX - _dragStartPos.x;\n      const deltaY = e.clientY - _dragStartPos.y;\n      const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n      if (distance < DEFAULT_MOUSE_CLICK_RADIUS) {\n        this._onMouseInteraction(e, \"onClick\");\n      }\n      this._dragStartPos = null;\n    }\n  };\n\n  _onMouseInteraction = (e: SyntheticMouseEvent<HTMLCanvasElement>, mouseEventName: MouseEventEnum) => {\n    const { worldviewContext } = this.state;\n    const worldviewHandler = this.props[mouseEventName];\n\n    if (!(e.target instanceof window.HTMLElement) || e.button !== 0) {\n      return;\n    }\n\n    const { top: clientTop, left: clientLeft } = e.target.getBoundingClientRect();\n    const { clientX, clientY } = e;\n\n    const canvasX = clientX - clientLeft;\n    const canvasY = clientY - clientTop;\n    const ray = worldviewContext.raycast(canvasX, canvasY);\n    if (!ray) {\n      return;\n    }\n\n    // Rendering the hitmap is expensive, so we should disable it for some events.\n    // If 'disableHitmapForEvents' is provided, we ignore any events contained in that property.\n    // Otherwise, we ignore 'onMouseMove' events by default unless 'hitmapOnMouseMove' is 'true'\n    const { hitmapOnMouseMove, disableHitmapForEvents = hitmapOnMouseMove ? [] : [\"onMouseMove\"] } = this.props;\n    if (disableHitmapForEvents.includes(mouseEventName)) {\n      if (worldviewHandler) {\n        return handleWorldviewMouseInteraction([], ray, e, worldviewHandler);\n      }\n      return;\n    }\n\n    // reading hitmap is async so we need to persist the event to use later in the event handler\n    (e: any).persist();\n    worldviewContext\n      .readHitmap(canvasX, canvasY, !!this.props.enableStackedObjectEvents, this.props.maxStackedObjectCount)\n      .then((mouseEventsWithCommands) => {\n        const mouseEventsByCommand: Map<Command<any>, Array<MouseEventObject>> = aggregate(mouseEventsWithCommands);\n        for (const [command, mouseEvents] of mouseEventsByCommand.entries()) {\n          command.handleMouseEvent(mouseEvents, ray, e, mouseEventName);\n          if (e.isPropagationStopped()) {\n            break;\n          }\n        }\n        if (worldviewHandler && !e.isPropagationStopped()) {\n          const mouseEvents = mouseEventsWithCommands.map(([mouseEventObject]) => mouseEventObject);\n          handleWorldviewMouseInteraction(mouseEvents, ray, e, worldviewHandler);\n        }\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n  };\n\n  _renderDebug() {\n    const { worldviewContext } = this.state;\n    const initializedData = worldviewContext.initializedData;\n\n    if (getNodeEnv() === \"production\" || !initializedData) {\n      return null;\n    }\n    const { regl } = initializedData;\n    const mem = window.performance.memory;\n    const style = {\n      bottom: 5,\n      right: 10,\n      width: 200,\n      position: \"absolute\",\n      backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n      color: \"white\",\n      fontFamily: \"monospace\",\n      fontSize: 10,\n    };\n    const { counters, reglCommandObjects } = worldviewContext;\n    const data = mapValues(counters, (val) => `${val} ms`);\n    data[\"draw calls\"] = reglCommandObjects.reduce((total, cmd) => total + cmd.stats.count, 0);\n    if (mem) {\n      data[\"heap used\"] = `${((mem.usedJSHeapSize / mem.jsHeapSizeLimit) * 100).toFixed(3)}%`;\n    }\n\n    Object.assign(data, pickBy(regl.stats, (val) => typeof val === \"number\" && val !== 0));\n    if (regl.stats.bufferCount > 1000) {\n      throw new Error(\"Memory leak: Buffer count > 1000.\");\n    }\n\n    const rows = Object.keys(data).map((key) => {\n      return (\n        <tr key={key} style={{ backgroundColor: \"transparent\", border: \"none\" }}>\n          <td style={{ paddingRight: 10, border: \"none\" }}>{key}</td>\n          <td style={{ width: \"100%\", border: \"none\" }}>{data[key]}</td>\n        </tr>\n      );\n    });\n    return (\n      <table style={style}>\n        <tbody>{rows}</tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const { width, height, showDebug, keyMap, shiftKeys, style, cameraState, onCameraStateChange } = this.props;\n    const { worldviewContext } = this.state;\n    // If we are supplied controlled camera state and no onCameraStateChange callback\n    // then there is a 'fixed' camera from outside of worldview itself.\n    const isFixedCamera = cameraState && !onCameraStateChange;\n    const canvasHtml = (\n      <React.Fragment>\n        <canvas\n          style={{ width, height, maxWidth: \"100%\", maxHeight: \"100%\" }}\n          width={width}\n          height={height}\n          ref={this._canvas}\n          onMouseUp={this._onMouseUp}\n          onMouseDown={this._onMouseDown}\n          onDoubleClick={this._onDoubleClick}\n          onMouseMove={this._onMouseMove}\n        />\n        {showDebug && this._renderDebug()}\n      </React.Fragment>\n    );\n\n    return (\n      <div style={{ position: \"relative\", overflow: \"hidden\", ...style }}>\n        {/* skip rendering CameraListener if Worldview has a fixed camera */}\n        {isFixedCamera ? (\n          canvasHtml\n        ) : (\n          <CameraListener cameraStore={worldviewContext.cameraStore} keyMap={keyMap} shiftKeys={shiftKeys}>\n            {canvasHtml}\n          </CameraListener>\n        )}\n        {worldviewContext.initializedData && (\n          <WorldviewReactContext.Provider value={worldviewContext}>\n            {this.props.children}\n          </WorldviewReactContext.Provider>\n        )}\n      </div>\n    );\n  }\n}\n\nexport type Props = $Diff<React.ElementConfig<typeof WorldviewBase>, Dimensions>;\n\nconst Worldview = (props: Props) => (\n  <ContainerDimensions>\n    {({ width, height, left, top }) => <WorldviewBase width={width} height={height} left={left} top={top} {...props} />}\n  </ContainerDimensions>\n);\n\nWorldview.displayName = \"Worldview\";\n\nexport default Worldview;\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\n// Takes an array of [value, key] and aggregates across the keys. Results in a Map of [key, values[]], in order of the\n// keys as seen in the array.\nexport default function aggregate<T, K>(array: Array<[T, K]>): Map<K, T[]> {\n  const aggregationMap = new Map<K, T[]>();\n  array.forEach(([item, key]) => {\n    const existingItems = aggregationMap.get(key) || [];\n    existingItems.push(item);\n    if (!aggregationMap.has(key)) {\n      aggregationMap.set(key, existingItems);\n    }\n  });\n  return aggregationMap;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { Point } from \"../types\";\n\n// a single min/max value\nclass Bound {\n  min: number;\n  max: number;\n\n  constructor() {\n    this.min = Number.MAX_SAFE_INTEGER;\n    this.max = Number.MIN_SAFE_INTEGER;\n  }\n  // update the bound based on a value\n  update(value: number) {\n    this.min = Math.min(this.min, value);\n    this.max = Math.max(this.max, value);\n  }\n}\n\n// represents x, y, and z min & max bounds for a 3d scene\nexport default class Bounds {\n  x: Bound;\n  y: Bound;\n  z: Bound;\n\n  constructor() {\n    this.x = new Bound();\n    this.y = new Bound();\n    this.z = new Bound();\n  }\n\n  // update the bounds based on a point\n  update(point: Point) {\n    this.x.update(point.x);\n    this.y.update(point.y);\n    this.z.update(point.z);\n  }\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { ReglCommand, Vec3 } from \"../types\";\nimport { withPose, pointToVec3, defaultBlend, defaultDepth, shouldConvert, colorBuffer } from \"./commandUtils\";\n\n// Creates a regl command factory which will render any geometry described by point positions\n// and elements (indexes into the array of positions), and apply the object's pose, scale, and color to it.\nexport default (positions: Vec3[], elements: Vec3[]) => (regl: any): ReglCommand => {\n  const vertexArray = Float32Array.from([].concat(...positions));\n\n  if (elements.some((face) => face.some((i) => i < 0 || i >= 1 << 16))) {\n    throw new Error(\"Element index out of bounds for Uint16\");\n  }\n  const elementsArray = Uint16Array.from([].concat(...elements));\n\n  const buff = regl.buffer({\n    // tell the gpu this buffer's contents will change frequently\n    usage: \"dynamic\",\n    data: [],\n  });\n  const colorBuff = colorBuffer(regl);\n\n  return withPose({\n    vert: `\n    precision mediump float;\n    attribute vec3 point;\n    attribute vec3 offset;\n    attribute vec4 color;\n    uniform mat4 projection, view;\n    uniform vec3 scale;\n    varying vec4 vColor;\n\n    #WITH_POSE\n\n    void main () {\n      vec3 p = applyPose(scale * point) + offset;\n      vColor = color;\n      gl_Position = projection * view * vec4(p, 1);\n    }\n    `,\n    frag: `\n    precision mediump float;\n    varying vec4 vColor;\n    void main () {\n      gl_FragColor = vColor;\n    }`,\n\n    attributes: {\n      point: vertexArray,\n      color: (context, props) => {\n        return colorBuff(props.color, props.colors, props.points ? props.points.length : 1);\n      },\n\n      offset: (context, props) => {\n        const points = shouldConvert(props.points) ? props.points.map(pointToVec3) : props.points || [0, 0, 0];\n        return {\n          buffer: buff({\n            usage: \"dynamic\",\n            data: points,\n          }),\n          divisor: 1,\n        };\n      },\n    },\n\n    elements: elementsArray,\n\n    depth: defaultDepth,\n    blend: defaultBlend,\n\n    uniforms: {\n      scale: (context, props) => (shouldConvert(props.scale) ? pointToVec3(props.scale) : props.scale),\n    },\n\n    count: elementsArray.length,\n\n    instances: (context, props) => (props.points ? props.points.length : 1),\n  });\n};\n","// @flow\n\n//  Copyright (c) 2019-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\ntype TypedArray = Int8Array | Uint8Array | Int16Array | Uint16Array | Uint32Array | Float32Array;\n\nexport type GLBModel = {\n  json: Object,\n  accessors?: TypedArray[],\n  images?: ImageBitmap[],\n};\n\n// Parse a GLB file: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0\n//\n// Returns an object containing the raw json data as well as parsed images (Image) and\n// accessors (TypedArray).\nexport default async function parseGLB(arrayBuffer: ArrayBuffer): Promise<GLBModel> {\n  const data = new DataView(arrayBuffer);\n  let offset = 0;\n\n  function readUint32() {\n    const value = data.getUint32(offset, true);\n    offset += 4;\n    return value;\n  }\n\n  // magic header\n  const magic = readUint32();\n  if (magic !== 0x46546c67) {\n    throw new Error(`incorrect magic value 0x${magic.toString(16)}`);\n  }\n\n  // Binary glTF version\n  const version = readUint32();\n  if (version !== 2) {\n    throw new Error(`incorrect version ${version}`);\n  }\n\n  // total file length\n  const totalLength = readUint32();\n  if (totalLength !== data.byteLength) {\n    throw new Error(`length ${totalLength} doesn't match response length ${data.byteLength}`);\n  }\n\n  function findNextChunkOfType(type) {\n    do {\n      const chunkLength = readUint32();\n      const chunkType = readUint32();\n      if (chunkType === type) {\n        const chunkData = new DataView(data.buffer, offset, chunkLength);\n        offset += chunkLength;\n        return chunkData;\n      }\n      offset += chunkLength;\n    } while (offset < totalLength);\n  }\n\n  const jsonData = findNextChunkOfType(/* JSON */ 0x4e4f534a);\n  if (!jsonData) {\n    throw new Error(\"no JSON chunk found\");\n  }\n\n  const json = JSON.parse(new TextDecoder().decode(jsonData));\n\n  const binary = findNextChunkOfType(/* BIN */ 0x004e4942);\n  if (!binary) {\n    return { json };\n  }\n\n  if (json.buffers[0].uri !== undefined) {\n    throw new Error(\"expected GLB-stored buffer\");\n  }\n\n  // create a TypedArray for each accessor\n  const accessors = json.accessors.map((accessorInfo) => {\n    let arrayType;\n    // prettier-ignore\n    switch (accessorInfo.componentType) {\n      case WebGLRenderingContext.BYTE: arrayType = Int8Array; break;\n      case WebGLRenderingContext.UNSIGNED_BYTE: arrayType = Uint8Array; break;\n      case WebGLRenderingContext.SHORT: arrayType = Int16Array; break;\n      case WebGLRenderingContext.UNSIGNED_SHORT: arrayType = Uint16Array; break;\n      case WebGLRenderingContext.UNSIGNED_INT: arrayType = Uint32Array; break;\n      case WebGLRenderingContext.FLOAT: arrayType = Float32Array; break;\n      default:\n        throw new Error(`unrecognized componentType ${accessorInfo.componentType}`);\n    }\n    let numComponents;\n    // prettier-ignore\n    switch (accessorInfo.type) {\n      case \"SCALAR\": numComponents = 1; break;\n      case \"VEC2\": numComponents = 2; break;\n      case \"VEC3\": numComponents = 3; break;\n      case \"VEC4\": numComponents = 4; break;\n      case \"MAT2\": numComponents = 4; break;\n      case \"MAT3\": numComponents = 9; break;\n      case \"MAT4\": numComponents = 16; break;\n      default:\n        throw new Error(`unrecognized type ${accessorInfo.type}`);\n    }\n    const bufferView = json.bufferViews[accessorInfo.bufferView];\n    if (bufferView.buffer !== 0) {\n      throw new Error(\"only GLB-stored buffers are supported\");\n    }\n    if (bufferView.byteLength % arrayType.BYTES_PER_ELEMENT !== 0) {\n      throw new Error(\"bufferView.byteLength mismatch\");\n    }\n    return new arrayType(\n      binary.buffer,\n      binary.byteOffset + (bufferView.byteOffset || 0) + (accessorInfo.byteOffset || 0),\n      accessorInfo.count * numComponents\n    );\n  });\n\n  // load embedded images\n  const images =\n    json.images &&\n    (await Promise.all(\n      json.images.map((imgInfo) => {\n        const bufferView = json.bufferViews[imgInfo.bufferView];\n        const data = new DataView(binary.buffer, binary.byteOffset + bufferView.byteOffset, bufferView.byteLength);\n        return self.createImageBitmap(new Blob([data], { type: imgInfo.mimeType }));\n      })\n    ));\n\n  return { json, accessors, images };\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { AssignNextColorsFn, MouseEventObject } from \"../types\";\n\nfunction nonInstancedGetChildrenForHitmapFromSingleProp<T: any>(\n  prop: T,\n  assignNextColors: AssignNextColorsFn,\n  excludedObjects: MouseEventObject[],\n  useOriginalMarkerProp: boolean = false\n): ?T {\n  // The marker that we send to event callbacks.\n  const eventCallbackMarker = useOriginalMarkerProp ? prop.originalMarker : prop;\n  if (excludedObjects.some(({ object }) => object === eventCallbackMarker)) {\n    return null;\n  }\n  const hitmapProp = { ...prop };\n  const [hitmapColor] = assignNextColors(eventCallbackMarker, 1);\n  hitmapProp.color = hitmapColor;\n  if (hitmapProp.colors && hitmapProp.points && hitmapProp.points.length) {\n    hitmapProp.colors = new Array(hitmapProp.points.length).fill(hitmapColor);\n  }\n  return hitmapProp;\n}\n\nexport const nonInstancedGetChildrenForHitmap = <T: any>(\n  props: T,\n  assignNextColors: AssignNextColorsFn,\n  excludedObjects: MouseEventObject[]\n): ?T => {\n  if (Array.isArray(props)) {\n    return props\n      .map((prop) => nonInstancedGetChildrenForHitmapFromSingleProp(prop, assignNextColors, excludedObjects))\n      .filter(Boolean);\n  }\n  return nonInstancedGetChildrenForHitmapFromSingleProp(props, assignNextColors, excludedObjects);\n};\n\n// Almost identical to nonInstancedGetChildrenForHitmap, but instead the object passed to event callbacks is the object\n// at `prop.originalMarker`, not just `prop`.\nexport const getChildrenForHitmapWithOriginalMarker = <T: any>(\n  props: T,\n  assignNextColors: AssignNextColorsFn,\n  excludedObjects: MouseEventObject[]\n) => {\n  if (Array.isArray(props)) {\n    return props\n      .map((prop) => nonInstancedGetChildrenForHitmapFromSingleProp(prop, assignNextColors, excludedObjects, true))\n      .filter(Boolean);\n  }\n  return nonInstancedGetChildrenForHitmapFromSingleProp(props, assignNextColors, excludedObjects, true);\n};\n\nfunction instancedGetChildrenForHitmapFromSingleProp<T: any>(\n  prop: T,\n  assignNextColors: AssignNextColorsFn,\n  excludedObjects: MouseEventObject[],\n  pointCountPerInstance\n): ?T {\n  const matchedExcludedObjects = excludedObjects.filter(({ object, instanceIndex }) => object === prop);\n  const filteredIndices = matchedExcludedObjects\n    .map(({ object, instanceIndex }) => instanceIndex)\n    .filter((instanceIndex) => typeof instanceIndex === \"number\");\n  const hitmapProp = { ...prop };\n  const instanceCount = (hitmapProp.points && Math.ceil(hitmapProp.points.length / pointCountPerInstance)) || 1;\n  // This returns 1 color per instance.\n  const idColors = assignNextColors(prop, instanceCount);\n  const startColor = idColors[0];\n  // We have to map these instance colors to `pointCountPerInstance` number of points\n  if (hitmapProp.points && hitmapProp.points.length) {\n    const allColors = new Array(hitmapProp.points.length).fill().map(() => startColor);\n    for (let i = 0; i < instanceCount; i++) {\n      for (let j = 0; j < pointCountPerInstance; j++) {\n        const idx = i * pointCountPerInstance + j;\n        if (idx < allColors.length) {\n          allColors[idx] = idColors[i];\n        }\n      }\n    }\n    hitmapProp.colors = allColors;\n    if (filteredIndices.length) {\n      hitmapProp.points = hitmapProp.points.filter(\n        (_, index) => !filteredIndices.includes(Math.floor(index / pointCountPerInstance))\n      );\n      hitmapProp.colors = hitmapProp.colors.filter(\n        (_, index) => !filteredIndices.includes(Math.floor(index / pointCountPerInstance))\n      );\n    } else if (matchedExcludedObjects.length) {\n      // if we don't have instance indices, just filter out the whole object.\n      return null;\n    }\n  } else {\n    hitmapProp.color = startColor;\n    if (matchedExcludedObjects.length) {\n      return null;\n    }\n  }\n  return hitmapProp;\n}\n\nexport const createInstancedGetChildrenForHitmap = (pointCountPerInstance: number) => <T: any>(\n  props: T,\n  assignNextColors: AssignNextColorsFn,\n  excludedObjects: MouseEventObject[]\n): ?T => {\n  if (Array.isArray(props)) {\n    return props\n      .map((prop) =>\n        instancedGetChildrenForHitmapFromSingleProp(prop, assignNextColors, excludedObjects, pointCountPerInstance)\n      )\n      .filter(Boolean);\n  }\n  return instancedGetChildrenForHitmapFromSingleProp(props, assignNextColors, excludedObjects, pointCountPerInstance);\n};\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { Cylinder } from \"../types\";\nimport fromGeometry from \"../utils/fromGeometry\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\nexport function createCylinderGeometry(numSegments: number, cone: boolean) {\n  // \"poles\" are the centers of top/bottom faces\n  const northPole = [0, 0, 0.5];\n  const southPole = [0, 0, -0.5];\n\n  const points = [northPole, southPole];\n\n  // Keep side faces separate from top/bottom to improve appearance for semi-transparent colors.\n  // We don't have a good approach to transparency right now but this is a small improvement over mixing the faces.\n  const sideFaces = [];\n  const endCapFaces = [];\n\n  for (let i = 0; i < numSegments; i++) {\n    const theta = (2 * Math.PI * i) / numSegments;\n    const x = 0.5 * Math.cos(theta);\n    const y = 0.5 * Math.sin(theta);\n    points.push([x, y, 0.5], [x, y, -0.5]);\n\n    const bottomLeftPt = points.length - 1;\n    const topRightPt = cone ? 0 : i + 1 === numSegments ? 2 : points.length;\n    const bottomRightPt = i + 1 === numSegments ? 3 : points.length + 1;\n    sideFaces.push([bottomLeftPt, topRightPt, bottomRightPt]);\n    endCapFaces.push([bottomLeftPt, bottomRightPt, 1]);\n    if (!cone) {\n      const topLeftPt = points.length - 2;\n      sideFaces.push([topLeftPt, bottomLeftPt, topRightPt]);\n      endCapFaces.push([topLeftPt, topRightPt, 0]);\n    }\n  }\n  return { points, sideFaces, endCapFaces };\n}\n\nconst { points, sideFaces, endCapFaces } = createCylinderGeometry(30, false);\n\nconst cylinders = fromGeometry(points, sideFaces.concat(endCapFaces));\n\nconst getChildrenForHitmap = createInstancedGetChildrenForHitmap(1);\nexport default function Cylinders(props: { ...CommonCommandProps, children: Cylinder[] }) {\n  return <Command getChildrenForHitmap={getChildrenForHitmap} {...props} reglCommand={cylinders} />;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { Cone } from \"../types\";\nimport fromGeometry from \"../utils/fromGeometry\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\nimport { createCylinderGeometry } from \"./Cylinders\";\n\nconst { points, sideFaces, endCapFaces } = createCylinderGeometry(30, true);\n\nconst cones = fromGeometry(points, sideFaces.concat(endCapFaces));\n\nconst getChildrenForHitmap = createInstancedGetChildrenForHitmap(1);\nexport default function Cones(props: { ...CommonCommandProps, children: Cone[] }) {\n  return <Command getChildrenForHitmap={getChildrenForHitmap} {...props} reglCommand={cones} />;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { vec3, quat } from \"gl-matrix\";\nimport omit from \"lodash/omit\";\nimport React, { memo, Fragment } from \"react\";\n\nimport type { Arrow } from \"../types\";\nimport { pointToVec3, vec3ToPoint, orientationToVec4, vec4ToOrientation } from \"../utils/commandUtils\";\nimport { getChildrenForHitmapWithOriginalMarker } from \"../utils/getChildrenForHitmapDefaults\";\nimport type { CommonCommandProps } from \"./Command\";\nimport Cones from \"./Cones\";\nimport Cylinders from \"./Cylinders\";\n\nconst UNIT_X_VECTOR = Object.freeze([0, 0, 1]);\n\ntype Props = {\n  ...CommonCommandProps,\n  children: Arrow[],\n};\n\nfunction Arrows(props: Props) {\n  const passedProps = omit(props, \"children\");\n  const cylinders = [];\n  const cones = [];\n  for (const marker of props.children) {\n    let shaftWidthX;\n    let shaftWidthY;\n    let shaftLength;\n    let headWidthX;\n    let headWidthY;\n    let headLength;\n\n    let basePosition;\n    let orientation;\n    let dir;\n    if (marker.points && marker.points.length === 2) {\n      const [start, end] = marker.points;\n      basePosition = [start.x, start.y, start.z];\n      const tipPosition = [end.x, end.y, end.z];\n      const length = vec3.distance(basePosition, tipPosition);\n\n      dir = vec3.subtract([0, 0, 0], tipPosition, basePosition);\n      vec3.normalize(dir, dir);\n      orientation = quat.rotationTo([0, 0, 0, 0], UNIT_X_VECTOR, dir);\n\n      headWidthX = headWidthY = marker.scale.y;\n      headLength = marker.scale.z || length * 0.3;\n      shaftWidthX = shaftWidthY = marker.scale.x;\n      shaftLength = length - headLength;\n    } else {\n      basePosition = pointToVec3(marker.pose.position);\n      orientation = orientationToVec4(marker.pose.orientation);\n      quat.rotateY(orientation, orientation, Math.PI / 2);\n      dir = vec3.transformQuat([0, 0, 0], UNIT_X_VECTOR, orientation);\n\n      shaftWidthX = marker.scale.y || 1;\n      shaftWidthY = marker.scale.z || 1;\n      headWidthX = 2 * shaftWidthX;\n      headWidthY = 2 * shaftWidthY;\n\n      // these magic numbers taken from\n      // https://github.com/ros-visualization/rviz/blob/57325fa075893de70f234f4676cdd08b411858ff/src/rviz/default_plugin/markers/arrow_marker.cpp#L113\n      headLength = 0.23 * (marker.scale.x || 1);\n      shaftLength = 0.77 * (marker.scale.x || 1);\n    }\n\n    const shaftPosition = vec3.scaleAndAdd([0, 0, 0], basePosition, dir, shaftLength / 2);\n    const headPosition = vec3.scaleAndAdd([0, 0, 0], basePosition, dir, shaftLength + headLength / 2);\n\n    cylinders.push({\n      // Set the original marker so we can use it in mouse events\n      originalMarker: marker,\n      scale: { x: shaftWidthX, y: shaftWidthY, z: shaftLength },\n      color: marker.color,\n      pose: {\n        position: vec3ToPoint(shaftPosition),\n        orientation: vec4ToOrientation(orientation),\n      },\n    });\n    cones.push({\n      // Set the original marker so we can use it in mouse events\n      originalMarker: marker,\n      scale: { x: headWidthX, y: headWidthY, z: headLength },\n      color: marker.color,\n      pose: {\n        position: vec3ToPoint(headPosition),\n        orientation: vec4ToOrientation(orientation),\n      },\n    });\n  }\n\n  return (\n    <Fragment>\n      <Cylinders getChildrenForHitmap={getChildrenForHitmapWithOriginalMarker} {...passedProps}>\n        {cylinders}\n      </Cylinders>\n      <Cones getChildrenForHitmap={getChildrenForHitmapWithOriginalMarker} {...passedProps}>\n        {cones}\n      </Cones>\n    </Fragment>\n  );\n}\n\nexport default memo<Props>(Arrows);\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport flatten from \"lodash/flatten\";\nimport * as React from \"react\";\n\nimport type { Line, Vec4, Color, Pose } from \"../types\";\nimport { defaultBlend, withPose, toRGBA, shouldConvert, pointToVec3 } from \"../utils/commandUtils\";\nimport { nonInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\n/*\nTriangle-based line drawing.\n\n4 points (a strip of 2 triangles) are drawn for each segment of the line using instanced arrays.\nEach of the 4 points has a distinct \"point type\" which informs how the input point is offset to\nyield the vertices of the triangle.\n\nPassing the input point as an attribute with {divisor: 1} tells GL to use each point for 1 instance,\nthen move on to the next point -- something like `points.map((p) => draw2Triangles(p))`.\n\n4 attributes are used so the vertex shader can see 4 input points at once (reading from the same\nbuffer with different offsets). This is because the positions of the TL/BL endpoints depend on the\nangle ABC, and the positions of TR/BR depend on the angle BCD.\n\nRoughly the segment looks like:\n\n     TL   -   -   -  .TR\n      |          ,.-' |\nA - - B - - -,.-' - - C - - D\n      |  ,.-'         |\n     BL-' -   -   -   BR\n\nWhen two adjacent segments form an obtuse angle, we draw a miter join:\n\n                      TR/TL.\n                 , '   _/|   ' .\n             , '     _/  |       ' .\n         , '       _/    C           ' .\n     , '         _/      |               ' .\n   TL          _/        |        ______,----'TR\n    \\        _/       ,BR/BL.----'            /\n     B     _/    , '          ' .            D\n      \\  _/ , '                   ' .       /\n       BL'                            ' . BR\n\nBut when the angle gets too sharp, we switch to a \"fold\" join, where the two segments overlap at\nthe corner:\n\n        ,TR/BL---C--BR/TL\n       ,    |.\\__  ,     .\n      ,     | .  \\,_      .\n     ,      |  . ,  \\_     .\n    ,       |   ,     \\__   .\n   ,        |  , .       \\__ .\n  TL._      | ,   .        _.TR\n      'B._  |,     .   _.C'\n          'BL       BR'\n\n(A regular bevel join without any overlaps is harder to achieve without artifacts in the sharp-angle\nedge cases.)\n\n*/\n\nconst FLOAT_BYTES = Float32Array.BYTES_PER_ELEMENT;\nconst POINT_BYTES = 3 * FLOAT_BYTES;\nconst DEFAULT_MONOCHROME_COLOR = [1, 1, 1, 0.2];\n\n// The four points forming the triangles' vertices.\n// Values do not matter, they just need to be distinct.\nconst POINT_TYPES = { BL: 0, TR: 1, BR: 2, TL: 3 };\nconst VERTICES_PER_INSTANCE = Object.keys(POINT_TYPES).length;\n\nconst vert = `\nprecision mediump float;\n\nattribute float pointType;\n\n// per-instance attributes\nattribute vec4 colorB;\nattribute vec4 colorC;\nattribute vec3 positionA;\nattribute vec3 positionB;\nattribute vec3 positionC;\nattribute vec3 positionD;\n// per-instance pose attributes\nattribute vec3 posePosition;\nattribute vec4 poseRotation;\n\nuniform mat4 projection, view;\nuniform float viewportWidth;\nuniform float viewportHeight;\nuniform float alpha;\nuniform float thickness;\nuniform bool joined;\nuniform bool scaleInvariant;\n\nvarying vec4 vColor;\n\n${Object.keys(POINT_TYPES)\n  .map((k) => `const float POINT_${k} = ${POINT_TYPES[k]}.0;`)\n  .join(\"\\n\")}\n\n#WITH_POSE\n\nvec3 applyPoseInstance(vec3 point, vec4 rotation, vec3 position) {\n  // rotate the point and then add the position of the pose\n  // this function is defined in WITH_POSE\n  return rotate(point, rotation) + position;\n}\n\nvec2 rotateCCW(vec2 v) {\n  return vec2(-v.y, v.x);\n}\n\nvec2 normalizeOrZero(vec2 v) {\n  return length(v) < 0.00001 ? vec2(0, 0) : normalize(v);\n}\n\nvoid setPosition(vec4 proj, vec2 offset) {\n  gl_Position = proj;\n\n  offset *= thickness / 2.;\n\n  if (scaleInvariant) {\n    // The given thickness is a number of pixels on screen. Divide x by width/2 and\n    // y by height/2 so that they correspond to pixel distances when scaled from clip space to NDC.\n    offset.x /= viewportWidth / 2.0;\n    offset.y /= viewportHeight / 2.0;\n    // Compensate for automatic division by w\n    offset *= proj.w;\n  } else {\n    // The line thickness should be scaled the same way the camera scales other distances.\n    // projection[0].xyz is the result of projecting a unit x-vector, so its length represents\n    // how much distances are scaled by the camera projection.\n    offset *= length(projection[0].xyz);\n    offset.y *= viewportWidth / viewportHeight;\n  }\n\n  gl_Position.xy += offset;\n}\n\nvoid main () {\n  bool isStart = positionA == positionB;\n  bool isEnd = positionC == positionD;\n  bool isLeft = (pointType == POINT_TL || pointType == POINT_BL);\n  bool isTop = (pointType == POINT_TL || pointType == POINT_TR);\n  bool isEndpoint = isLeft ? isStart : isEnd;\n\n  float scale = isTop ? 1. : -1.;\n\n  mat4 projView = projection * view;\n  vec4 projA = projView * vec4(applyPose(applyPoseInstance(positionA, poseRotation, posePosition)), 1);\n  vec4 projB = projView * vec4(applyPose(applyPoseInstance(positionB, poseRotation, posePosition)), 1);\n  vec4 projC = projView * vec4(applyPose(applyPoseInstance(positionC, poseRotation, posePosition)), 1);\n  vec4 projD = projView * vec4(applyPose(applyPoseInstance(positionD, poseRotation, posePosition)), 1);\n\n  vec2 aspectVec = vec2(viewportWidth / viewportHeight, 1.0);\n  vec2 screenA = projA.xy / projA.w * aspectVec;\n  vec2 screenB = projB.xy / projB.w * aspectVec;\n  vec2 screenC = projC.xy / projC.w * aspectVec;\n  vec2 screenD = projD.xy / projD.w * aspectVec;\n\n  vec2 dirAB = normalizeOrZero(screenB - screenA);\n  vec2 dirBC = normalizeOrZero(screenC - screenB);\n  vec2 dirCD = normalizeOrZero(screenD - screenC);\n\n  vec2 perpAB = rotateCCW(dirAB); // vector perpendicular to AB\n  vec2 perpBC = rotateCCW(dirBC); // vector perpendicular to BC\n\n  vColor = isLeft ? colorB : colorC;\n  vColor.a *= alpha;\n\n  vec4 proj = isLeft ? projB : projC;\n\n  // simple case: non-joined line list\n  if (!joined || isEndpoint) {\n    setPosition(proj, scale * perpBC);\n    return;\n  }\n\n  // clamp to prevent rounding errors from breaking the sqrt()s below\n  float cosB = clamp(-dot(dirAB, dirBC), -1., 1.);\n  float cosC = clamp(-dot(dirBC, dirCD), -1., 1.);\n\n  bool tooSharpB = cosB > 0.01;\n  bool tooSharpC = cosC > 0.01;\n  bool tooSharp = isLeft ? tooSharpB : tooSharpC;\n\n  bool turningRightB = dot(dirAB, rotateCCW(dirBC)) > 0.;\n  bool turningRightC = dot(dirBC, rotateCCW(dirCD)) > 0.;\n  bool turningRight = isLeft ? turningRightB : turningRightC;\n\n  if (tooSharp) {\n    // \"fold join\"\n    vec2 perp = isLeft ? perpAB : perpBC;\n    vec2 dir = isLeft ? dirAB : dirBC;\n    float scalePerp = isLeft ? -1. : 1.;\n    float scaleDir = (turningRight == isLeft) ? 1. : -1.;\n    float tanHalfB = sqrt((1. - cosB) / (1. + cosB));\n    float tanHalfC = sqrt((1. - cosC) / (1. + cosC));\n    float tanHalf = isLeft ? tanHalfB : tanHalfC;\n    setPosition(proj, scale * (scalePerp * perp + scaleDir * dir * tanHalf));\n  } else {\n    // miter join\n    vec2 bisectorB = rotateCCW(normalize(dirAB + dirBC)); // angle bisector of ABC\n    vec2 bisectorC = rotateCCW(normalize(dirBC + dirCD)); // angle bisector of BCD\n    vec2 bisector = isLeft ? bisectorB : bisectorC;\n    float sinHalfB = sqrt((1. - cosB) / 2.);\n    float sinHalfC = sqrt((1. - cosC) / 2.);\n    float sinHalf = isLeft ? sinHalfB : sinHalfC;\n    setPosition(proj, scale * bisector / sinHalf);\n  }\n}\n`;\n\nconst frag = `\nprecision mediump float;\nvarying vec4 vColor;\nvoid main () {\n  gl_FragColor = vColor;\n}\n`;\n\nfunction pointsEqual(a, b) {\n  const [ax, ay, az] = shouldConvert(a) ? pointToVec3(a) : a;\n  const [bx, by, bz] = shouldConvert(b) ? pointToVec3(b) : b;\n  return ax === bx && ay === by && az === bz;\n}\n\nconst lines = (regl: any) => {\n  // The point type attribute, reused for each instance\n  const pointTypeBuffer = regl.buffer({\n    type: \"uint16\",\n    usage: \"static\",\n    data: [POINT_TYPES.TL, POINT_TYPES.BL, POINT_TYPES.TR, POINT_TYPES.BR],\n  });\n  const debugColorBuffer = regl.buffer({\n    type: \"float\",\n    usage: \"static\",\n    data: [\n      [0, 1, 1, 1], // cyan\n      [1, 0, 0, 1], // red\n      [0, 1, 0, 1], // green\n      [1, 0, 1, 1], // magenta\n    ],\n  });\n  // The pose position and rotation buffers contain the identity position/rotation, for use when we don't have instanced\n  // poses.\n  const defaultPosePositionBuffer = regl.buffer({\n    type: \"float\",\n    usage: \"static\",\n    data: flatten(new Array(VERTICES_PER_INSTANCE).fill([0, 0, 0])),\n  });\n  const defaultPoseRotationBuffer = regl.buffer({\n    type: \"float\",\n    usage: \"static\",\n    // Rotation array identity is [x: 0, y: 0, z: 0, w: 1]\n    data: flatten(new Array(VERTICES_PER_INSTANCE).fill([0, 0, 0, 1])),\n  });\n\n  // The buffers used for input position & color data\n  const colorBuffer = regl.buffer({ type: \"float\" });\n\n  // All invocations of the vertex shader share data from the positions buffer, but with different\n  // offsets. However, when offset and stride are combined, 3 or 4 attributes reading from the same\n  // buffer produces incorrect results on certain Lenovo hardware running Ubuntu. As a workaround,\n  // we upload the same data into two buffers and have only two attributes reading from each buffer.\n  const positionBuffer1 = regl.buffer({ type: \"float\" });\n  const positionBuffer2 = regl.buffer({ type: \"float\" });\n\n  const posePositionBuffer = regl.buffer({ type: \"float\" });\n  const poseRotationBuffer = regl.buffer({ type: \"float\" });\n\n  const command = regl(\n    withPose({\n      vert,\n      frag,\n      blend: defaultBlend,\n      uniforms: {\n        thickness: regl.prop(\"scale.x\"),\n        viewportWidth: regl.context(\"viewportWidth\"),\n        viewportHeight: regl.context(\"viewportHeight\"),\n        alpha: regl.prop(\"alpha\"),\n        joined: regl.prop(\"joined\"),\n        scaleInvariant: regl.prop(\"scaleInvariant\"),\n      },\n      attributes: {\n        pointType: pointTypeBuffer,\n        colorB: (context, { joined, monochrome, debug }) => ({\n          buffer: debug ? debugColorBuffer : colorBuffer,\n          offset: 0,\n          stride: (joined || monochrome || debug ? 1 : 2) * 4 * FLOAT_BYTES,\n          divisor: monochrome || debug ? 0 : 1,\n        }),\n        colorC: (context, { joined, monochrome, debug }) => ({\n          buffer: debug ? debugColorBuffer : colorBuffer,\n          offset: monochrome || debug ? 0 : 4 * FLOAT_BYTES,\n          stride: (joined || monochrome || debug ? 1 : 2) * 4 * FLOAT_BYTES,\n          divisor: monochrome || debug ? 0 : 1,\n        }),\n        positionA: (context, { joined }) => ({\n          buffer: positionBuffer1,\n          offset: 0,\n          stride: (joined ? 1 : 2) * POINT_BYTES,\n          divisor: 1,\n        }),\n        positionB: (context, { joined }) => ({\n          buffer: positionBuffer1,\n          offset: POINT_BYTES,\n          stride: (joined ? 1 : 2) * POINT_BYTES,\n          divisor: 1,\n        }),\n        positionC: (context, { joined }) => ({\n          buffer: positionBuffer2,\n          offset: 2 * POINT_BYTES,\n          stride: (joined ? 1 : 2) * POINT_BYTES,\n          divisor: 1,\n        }),\n        positionD: (context, { joined }) => ({\n          buffer: positionBuffer2,\n          offset: 3 * POINT_BYTES,\n          stride: (joined ? 1 : 2) * POINT_BYTES,\n          divisor: 1,\n        }),\n        posePosition: (context, { hasInstancedPoses }) => ({\n          buffer: hasInstancedPoses ? posePositionBuffer : defaultPosePositionBuffer,\n          divisor: hasInstancedPoses ? 1 : 0,\n        }),\n        poseRotation: (context, { hasInstancedPoses }) => ({\n          buffer: hasInstancedPoses ? poseRotationBuffer : defaultPoseRotationBuffer,\n          divisor: hasInstancedPoses ? 1 : 0,\n        }),\n      },\n      count: VERTICES_PER_INSTANCE,\n      instances: regl.prop(\"instances\"),\n      primitive: regl.prop(\"primitive\"),\n    })\n  );\n\n  let colorArray = new Float32Array(VERTICES_PER_INSTANCE * 4);\n  let pointArray = new Float32Array(0);\n  let allocatedPoints = 0;\n  let positionArray = new Float32Array(0);\n  let rotationArray = new Float32Array(0);\n\n  function fillPointArray(points: any[], alreadyClosed: boolean, shouldClose: boolean) {\n    const numTotalPoints = points.length + (shouldClose ? 3 : 2);\n    if (allocatedPoints < numTotalPoints) {\n      pointArray = new Float32Array(numTotalPoints * 3);\n      allocatedPoints = numTotalPoints;\n    }\n    points.forEach((point, i) => {\n      const [x, y, z] = shouldConvert(point) ? pointToVec3(point) : point;\n      const off = 3 + i * 3;\n      pointArray[off + 0] = x;\n      pointArray[off + 1] = y;\n      pointArray[off + 2] = z;\n    });\n\n    // The \"prior\" point (A) and \"next\" point (D) need to be set when rendering the first & last\n    // segments, so we copy data from the last point(s) to the beginning of the array, and from the\n    // first point(s) to the end of the array.\n    const n = numTotalPoints * 3;\n    if (alreadyClosed) {\n      // First and last points already match; \"prior\" should be the second-to-last\n      // and \"next\" should be the second.\n      pointArray.copyWithin(0, n - 9, n - 6);\n      pointArray.copyWithin(n - 3, 6, 9);\n    } else if (shouldClose) {\n      // First point is being reused after last point; first *two* points need to be copied at the end\n      pointArray.copyWithin(0, n - 9, n - 6);\n      pointArray.copyWithin(n - 6, 3, 9);\n    } else {\n      // Endpoints are separate; just duplicate first & last points, resulting in square-looking endcaps\n      pointArray.copyWithin(0, 3, 6);\n      pointArray.copyWithin(n - 3, n - 6, n - 3);\n    }\n  }\n\n  function fillPoseArrays(instances: number, poses: Pose[]): ?Error {\n    if (positionArray.length < instances * 3) {\n      positionArray = new Float32Array(instances * 3);\n      rotationArray = new Float32Array(instances * 4);\n    }\n    for (let index = 0; index < poses.length; index++) {\n      const positionOffset = index * 3;\n      const rotationOffset = index * 4;\n      const { position, orientation: r } = poses[index];\n      const convertedPosition = Array.isArray(position) ? position : pointToVec3(position);\n      positionArray[positionOffset + 0] = convertedPosition[0];\n      positionArray[positionOffset + 1] = convertedPosition[1];\n      positionArray[positionOffset + 2] = convertedPosition[2];\n\n      const convertedRotation = Array.isArray(r) ? r : [r.x, r.y, r.z, r.w];\n      rotationArray[rotationOffset + 0] = convertedRotation[0];\n      rotationArray[rotationOffset + 1] = convertedRotation[1];\n      rotationArray[rotationOffset + 2] = convertedRotation[2];\n      rotationArray[rotationOffset + 3] = convertedRotation[3];\n    }\n  }\n\n  function convertColors(colors: any): Vec4[] {\n    return shouldConvert(colors) ? colors.map(toRGBA) : colors;\n  }\n\n  function fillColorArray(\n    color: ?Color | ?Vec4,\n    colors: ?((Color | Vec4)[]),\n    monochrome: boolean,\n    shouldClose: boolean\n  ) {\n    if (monochrome) {\n      if (colorArray.length < VERTICES_PER_INSTANCE * 4) {\n        colorArray = new Float32Array(VERTICES_PER_INSTANCE * 4);\n      }\n      const monochromeColor = color || DEFAULT_MONOCHROME_COLOR;\n      const [convertedMonochromeColor] = convertColors([monochromeColor]);\n      const [r, g, b, a] = convertedMonochromeColor;\n      for (let index = 0; index < VERTICES_PER_INSTANCE; index++) {\n        const offset = index * 4;\n        colorArray[offset + 0] = r;\n        colorArray[offset + 1] = g;\n        colorArray[offset + 2] = b;\n        colorArray[offset + 3] = a;\n      }\n    } else if (colors) {\n      const length = shouldClose ? colors.length + 1 : colors.length;\n      if (colorArray.length < length * 4) {\n        colorArray = new Float32Array(length * 4);\n      }\n      const convertedColors = convertColors(colors);\n      for (let index = 0; index < convertedColors.length; index++) {\n        const offset = index * 4;\n        const [r, g, b, a] = convertedColors[index];\n        colorArray[offset + 0] = r;\n        colorArray[offset + 1] = g;\n        colorArray[offset + 2] = b;\n        colorArray[offset + 3] = a;\n      }\n\n      if (shouldClose) {\n        const [r, g, b, a] = convertedColors[0];\n        const lastIndex = length - 1;\n        colorArray[lastIndex * 4 + 0] = r;\n        colorArray[lastIndex * 4 + 1] = g;\n        colorArray[lastIndex * 4 + 2] = b;\n        colorArray[lastIndex * 4 + 3] = a;\n      }\n    }\n  }\n\n  // Disable depth for debug rendering (so lines stay visible)\n  const render = (debug, commands) => {\n    if (debug) {\n      regl({ depth: { enable: false } })(commands);\n    } else {\n      commands();\n    }\n  };\n\n  // Render one line list/strip\n  function renderLine(props) {\n    const { debug, primitive = \"lines\", scaleInvariant = false } = props;\n    const numInputPoints = props.points.length;\n\n    if (numInputPoints < 2) {\n      return;\n    }\n\n    const alreadyClosed = numInputPoints > 2 && pointsEqual(props.points[0], props.points[numInputPoints - 1]);\n    // whether the first point needs to be duplicated after the last point\n    const shouldClose = !alreadyClosed && props.closed;\n\n    fillPointArray(props.points, alreadyClosed, shouldClose);\n    positionBuffer1({ data: pointArray, usage: \"dynamic\" });\n    positionBuffer2({ data: pointArray, usage: \"dynamic\" });\n\n    const monochrome = !(props.colors && props.colors.length);\n    fillColorArray(props.color, props.colors, monochrome, shouldClose);\n    colorBuffer({ data: colorArray, usage: \"dynamic\" });\n\n    const joined = primitive === \"line strip\";\n    const effectiveNumPoints = numInputPoints + (shouldClose ? 1 : 0);\n    const instances = joined ? effectiveNumPoints - 1 : Math.floor(effectiveNumPoints / 2);\n\n    // fill instanced pose buffers\n    const { poses } = props;\n    const hasInstancedPoses = !!poses && poses.length > 0;\n    if (hasInstancedPoses && poses) {\n      if (instances !== poses.length) {\n        console.error(`Expected ${instances} poses but given ${poses.length} poses: will result in webgl error.`);\n        return;\n      }\n      fillPoseArrays(instances, poses);\n      posePositionBuffer({ data: positionArray, usage: \"dynamic\" });\n      poseRotationBuffer({ data: rotationArray, usage: \"dynamic\" });\n    }\n\n    render(debug, () => {\n      // Use Object.assign because it's actually faster than babel's object spread polyfill.\n      command(\n        Object.assign({}, props, {\n          joined,\n          primitive: \"triangle strip\",\n          alpha: debug ? 0.2 : 1,\n          monochrome,\n          instances,\n          scaleInvariant,\n          hasInstancedPoses,\n        })\n      );\n      if (debug) {\n        command(\n          Object.assign({}, props, {\n            joined,\n            primitive: \"line strip\",\n            alpha: 1,\n            monochrome,\n            instances,\n            scaleInvariant,\n            hasInstancedPoses,\n          })\n        );\n      }\n    });\n  }\n\n  return (inProps: any) => {\n    if (Array.isArray(inProps)) {\n      inProps.forEach(renderLine);\n    } else {\n      renderLine(inProps);\n    }\n  };\n};\n\nexport default function Lines(props: { ...CommonCommandProps, children: Line[] }) {\n  return <Command getChildrenForHitmap={nonInstancedGetChildrenForHitmap} {...props} reglCommand={lines} />;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport type { Point, Vec3, Line } from \"../types\";\nimport Lines from \"./Lines\";\n\nconst pointToVec3 = (p: Vec3): Point => ({\n  x: p[0],\n  y: p[1],\n  z: p[2],\n});\n\nconst scale = 100;\nconst x = 1 * scale;\nconst xAxisPoints = [[-x, 0, 0], [x, 0, 0]].map(pointToVec3);\nconst yAxisPoints = [[0, -100, 0], [0, 100, 0]].map(pointToVec3);\nconst zAxisPoints = [[0, 0, -100], [0, 0, 100]].map(pointToVec3);\nconst pose = {\n  orientation: { x: 0, y: 0, z: 0, w: 0 },\n  position: { x: 0, y: 0, z: 0 },\n};\nconst xAxis = {\n  pose,\n  points: xAxisPoints,\n  scale: { x: 0.5, y: 0.5, z: 0.5 },\n  color: { r: 0.95, g: 0.26, b: 0.4, a: 1 },\n};\nconst yAxis = {\n  pose,\n  points: yAxisPoints,\n  scale: { x: 0.5, y: 0.5, z: 0.5 },\n  color: { r: 0.02, g: 0.82, b: 0.49, a: 1 },\n};\nconst zAxis = {\n  pose,\n  points: zAxisPoints,\n  scale: { x: 0.5, y: 0.5, z: 0.5 },\n  color: { r: 0.11, g: 0.51, b: 0.92, a: 1 },\n};\n\ntype Axis = Line;\n\ntype Props = {\n  children: Axis[],\n};\n\n// Renders lines along the x, y, and z axes; useful for debugging.\nexport default class Axes extends React.Component<Props> {\n  static defaultProps: Props = {\n    children: [xAxis, yAxis, zAxis],\n  };\n\n  render() {\n    return <Lines>{this.props.children}</Lines>;\n  }\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { SphereList } from \"../types\";\nimport fromGeometry from \"../utils/fromGeometry\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\nconst NUM_PARALLELS = 15;\nconst NUM_MERIDIANS = 15;\nconst RADIUS = 0.5;\n\nconst northPole = [0, 0, RADIUS];\nconst southPole = [0, 0, -RADIUS];\nconst points = [northPole, southPole];\nconst faces = [];\n\nfor (let i = 0; i < NUM_PARALLELS; i++) {\n  for (let j = 0; j < NUM_MERIDIANS; j++) {\n    const phi = ((i + 1) / (NUM_PARALLELS + 1)) * Math.PI;\n    const z = RADIUS * Math.cos(phi);\n    const width = RADIUS * Math.sin(phi);\n    const theta = (j * 2 * Math.PI) / NUM_MERIDIANS;\n    const x = width * Math.cos(theta);\n    const y = width * Math.sin(theta);\n    points.push([x, y, z]);\n    if (j > 0) {\n      // connect to previous parallel (or north pole)\n      const prevMeridianPt = i === 0 ? 0 : points.length - 1 - NUM_MERIDIANS;\n      faces.push([points.length - 2, points.length - 1, prevMeridianPt]);\n      if (i > 0) {\n        faces.push([points.length - 2, prevMeridianPt - 1, prevMeridianPt]);\n      }\n    }\n  }\n  // connect to previous parallel (or north pole)\n  const prevMeridianPt = i === 0 ? 0 : points.length - 2 * NUM_MERIDIANS;\n  faces.push([points.length - 1, points.length - NUM_MERIDIANS, prevMeridianPt]);\n  if (i > 0) {\n    faces.push([points.length - 1, points.length - NUM_MERIDIANS - 1, prevMeridianPt]);\n  }\n}\n// connect last parallel to south pole\nfor (let j = 0; j < NUM_MERIDIANS; j++) {\n  const pt = points.length - NUM_MERIDIANS + j;\n  const prevPt = j === 0 ? points.length - 1 : pt - 1;\n  faces.push([pt, prevPt, 1]);\n}\n\nconst spheres = fromGeometry(points, faces);\n\nconst getChildrenForHitmap = createInstancedGetChildrenForHitmap(1);\nexport default function Spheres(props: { ...CommonCommandProps, children: SphereList[] }) {\n  return <Command getChildrenForHitmap={getChildrenForHitmap} {...props} reglCommand={spheres} />;\n}\n","// @flow\n\n//  Copyright (c) 2019-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport distance from \"distance-to-line-segment\";\n\nimport type { Vec3, MouseHandler } from \"../../types\";\nimport { PolygonPoint, Polygon } from \"./index\";\n\ntype OptionalZPoint = {\n  x: number,\n  y: number,\n  z?: number,\n};\n\ntype PolygonAddCommand = {\n  points: OptionalZPoint[],\n  name?: string,\n};\n\nfunction areEqual(point1: PolygonPoint, point2: PolygonPoint) {\n  const [x1, y1, z1] = point1.point;\n  const [x2, y2, z2] = point2.point;\n  return x1 === x2 && y1 === y2 && z1 === z2;\n}\n\nfunction isClosed(polygon: Polygon): boolean {\n  const { points } = polygon;\n  for (let i = 0; i < points.length - 1; i++) {\n    if (areEqual(points[i], points[i + 1])) {\n      return true;\n    }\n  }\n  const firstPoint = points[0];\n  const lastPoint = points[points.length - 1];\n  return areEqual(firstPoint, lastPoint);\n}\n\n// Has listeners you can pass to Worldview for mouse interactions\n// internally builds a list of polygons and modifies the polygons\n// based on mouse & keyboard interactions. For now we use mututation internally\n// instead of immutability to keep the number of allocations lower and make\n// the implementation a bit more straightforward\n\nexport default class PolygonBuilder {\n  mouseDown: boolean = false;\n  polygons: Polygon[];\n  onChange: () => void = () => {};\n  activePolygon: ?Polygon;\n  activePoint: ?PolygonPoint;\n  mouseDownPoint: Vec3;\n\n  constructor(polygons: Polygon[] = []) {\n    this.polygons = polygons;\n  }\n\n  isActivePolygonClosed(): boolean {\n    return !!this.activePolygon && isClosed(this.activePolygon);\n  }\n\n  // adds a polygon to the builder, transforming it into the internal representation\n  addPolygon(cmd: PolygonAddCommand): void {\n    const { points, name } = cmd;\n    if (points.length < 3) {\n      return;\n    }\n    // clear any selections\n    this.selectObject();\n\n    const polygon = new Polygon(name);\n    polygon.points = points.map((p) => new PolygonPoint([p.x, p.y, p.z || 0]));\n    if (!isClosed(polygon)) {\n      polygon.points.push(polygon.points[0]);\n    }\n    this.polygons.push(polygon);\n  }\n\n  // push a new point - either adds to the active polygon\n  // or creates a new polygon at this point\n  pushPoint(point: Vec3): void {\n    const { activePolygon } = this;\n    if (activePolygon) {\n      // do not push a point on a closed polygon\n      if (!isClosed(activePolygon)) {\n        const newPoint = new PolygonPoint(point);\n        activePolygon.points.push(newPoint);\n        this.selectObject(newPoint);\n        return;\n      }\n    }\n\n    const polygon = new Polygon();\n    polygon.points.push(new PolygonPoint(point));\n    const floatingPoint = new PolygonPoint(point);\n    polygon.points.push(floatingPoint);\n    this.polygons.push(polygon);\n    this.selectObject(floatingPoint);\n    this.onChange();\n  }\n\n  // updates the active point to the new position\n  updateActivePoint(point: Vec3): void {\n    if (this.activePoint) {\n      this.activePoint.point = point;\n      this.onChange();\n    }\n  }\n\n  // closes the active polygon by either deleting it if\n  // is only 2 points (no \"single sided\" polygons...)\n  // or inserts an 'overlap' point by making the first point\n  // and last point a reference to the same point in the list\n  // this structure of overlap is similar to the structure used by geoJSON\n  // though \"left to right\" ordering is not enforced\n  closeActivePolygon(): void {\n    const polygon = this.activePolygon;\n    if (!polygon) {\n      return;\n    }\n\n    // remove single lines\n    if (polygon.points.length === 2) {\n      this.deletePolygon(polygon);\n    } else {\n      polygon.points.push(polygon.points[0]);\n    }\n    this.onChange();\n  }\n\n  // mouse move handler - should be added to Worldview as a prop\n  onMouseMove: MouseHandler = (e, args) => {\n    // prevent the camera from responding to move if we\n    // have an active object being edited\n    if (this.activePolygon) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //const cursor = e.ctrlKey ? 'crosshair' : '';\n    //document.body.style.cursor = cursor;\n\n    if (!this.mouseDown) {\n      return;\n    }\n    if (!args) {\n      return;\n    }\n\n    // early return to only raycast when mouse moves during interaction\n    if (!this.activePoint && !this.activePolygon) {\n      return;\n    }\n\n    const { ray } = args;\n    const point = ray.planeIntersection([0, 0, 0], [0, 0, 1]);\n    // satisfy flow\n    if (!point) {\n      return;\n    }\n\n    // satisfy flow\n    const { activePolygon } = this;\n\n    if (this.activePoint) {\n      this.updateActivePoint(point);\n    } else if (activePolygon && this.mouseDownPoint) {\n      // move polygon\n      const [pointX, pointY] = point;\n      const [mouseX, mouseY] = this.mouseDownPoint;\n      // figure out how far the mouse has moved\n      const dX = pointX - mouseX;\n      const dY = pointY - mouseY;\n\n      // save the new mouse position as for the next computation\n      this.mouseDownPoint = point;\n\n      // only update the 'overlap' point once\n      const uniquePoints = activePolygon.points.reduce((acc, point) => {\n        if (!acc.includes(point)) {\n          acc.push(point);\n        }\n        return acc;\n      }, []);\n\n      // adjust each point's location\n      for (const polygonPoint of uniquePoints) {\n        const { point } = polygonPoint;\n        point[0] = point[0] + dX;\n        point[1] = point[1] + dY;\n      }\n\n      this.onChange();\n    }\n  };\n\n  // deletes a polygon\n  deletePolygon(polygon: Polygon): void {\n    this.polygons = this.polygons.filter((poly) => poly !== polygon);\n    this.activePolygon = null;\n  }\n\n  // deletes a point in the active polygon\n  // if the point is the 'overlap point' create a new one\n  // also deletes the entire polygon if the polygon becomes a 1-sided polygon\n  deletePoint(point: PolygonPoint): void {\n    const { activePolygon } = this;\n    if (!activePolygon) {\n      return;\n    }\n    const newPoints = activePolygon.points.filter((p) => p.id !== point.id);\n    // if the 'overlap' point is deleted, create a new start/end overlap point\n    if (newPoints.length === activePolygon.points.length - 2) {\n      newPoints.push(newPoints[0]);\n    }\n    activePolygon.points = newPoints;\n    this.activePoint = null;\n    if (activePolygon.points.length < 4) {\n      this.deletePolygon(activePolygon);\n    }\n    this.onChange();\n  }\n\n  // key down handler - to be passed to Worldview as a prop\n  onKeyDown = (e: KeyboardEvent): void => {\n    // only respond to key events if we have a selected polygon\n    const { activePolygon } = this;\n    if (!activePolygon) {\n      return;\n    }\n\n    switch (e.key) {\n      case \"Delete\":\n      case \"Backspace\":\n        if (this.activePoint) {\n          this.deletePoint(this.activePoint);\n        } else {\n          this.deletePolygon(activePolygon);\n        }\n        this.onChange();\n        break;\n      default:\n        break;\n    }\n  };\n\n  // select either a point or polygon by id\n  selectObject(object?: Polygon | PolygonPoint) {\n    // clear out any previously active objects\n    this.activePolygon = null;\n    if (this.activePoint) {\n      this.activePoint.active = false;\n    }\n    this.activePoint = null;\n\n    for (const polygon of this.polygons) {\n      let isActive = polygon === object;\n      polygon.active = isActive;\n      if (isActive) {\n        this.activePolygon = polygon;\n      }\n      for (const point of polygon.points) {\n        if (point === object) {\n          // if a point is selected, activate both it\n          // and the polygon it belongs to\n          this.activePoint = point;\n          point.active = true;\n          polygon.active = true;\n          this.activePolygon = polygon;\n          isActive = true;\n        }\n      }\n    }\n\n    this.onChange();\n  }\n\n  // mouse up handler - to be passed to Worldview as a prop\n  onMouseUp: MouseHandler = (e, args) => {\n    if (!e.ctrlKey) {\n      this.mouseDown = false;\n    }\n  };\n\n  // double click handler - to be passed to Worldview as a prop\n  onDoubleClick: MouseHandler = (e, args) => {\n    // satisfy flow\n    if (!args) {\n      return;\n    }\n    if (!args.objects.length) {\n      return;\n    }\n\n    this.selectObject(args.objects[0].object);\n\n    // if a point was double-clicked, delete it\n    if (this.activePoint) {\n      this.deletePoint(this.activePoint);\n      return;\n    }\n\n    // otherwise insert a new point into the nearest line of the active polygon\n    const { activePolygon } = this;\n\n    // if no polygon is active, don't do anything w/ the double-click\n    if (!activePolygon) {\n      return;\n    }\n\n    let shortestDistance = Number.MAX_SAFE_INTEGER;\n    let shortestIndex = -1;\n    const { ray } = args;\n    const point = ray.planeIntersection([0, 0, 0], [0, 0, 1]);\n    if (!point) {\n      return;\n    }\n    const [px, py] = point;\n\n    // find the closest line segment of the active polygon\n    const { points } = activePolygon;\n    for (let i = 0; i < points.length - 1; i++) {\n      const point1 = points[i];\n      const point2 = points[i + 1];\n      const [x1, y1] = point1.point;\n      const [x2, y2] = point2.point;\n\n      // distance.squared is faster since we don't care about the\n      // actual distance, just which line produces the shortest distance\n      const dist = distance.squared(x1, y1, x2, y2, px, py);\n      if (dist < shortestDistance) {\n        shortestDistance = dist;\n        shortestIndex = i;\n      }\n    }\n\n    // insert a new point in the nearest line\n    if (shortestIndex > -1) {\n      const newPoint = new PolygonPoint(point);\n      activePolygon.points.splice(shortestIndex + 1, 0, newPoint);\n      this.activePoint = newPoint;\n    }\n    this.onChange();\n  };\n\n  // mouse down handler - to be passed to Worldview as a prop\n  onMouseDown: MouseHandler = (e, args) => {\n    if (!args) {\n      return;\n    }\n    const { ray } = args;\n\n    const point = ray.planeIntersection([0, 0, 0], [0, 0, 1]);\n\n    // satisfy flow but raycasting should always work\n    if (!point) {\n      return;\n    }\n\n    const isFirstClick = !this.mouseDown;\n    this.mouseDown = true;\n    this.mouseDownPoint = point;\n    const isCtrlClick = e.ctrlKey;\n\n    // single click or click+drag is for selection & moving\n    if (isFirstClick && !isCtrlClick) {\n      const clickObject = args.objects[0];\n      this.selectObject(clickObject && clickObject.object);\n      return this.onChange();\n    }\n\n    // ctrl+click always inserts a point\n    if (isCtrlClick) {\n      this.pushPoint(point);\n      return this.onChange();\n    }\n\n    // if mouse was down & we have a non-control click, close the active polygon\n    this.closeActivePolygon();\n    return this.onChange();\n  };\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { Regl, TriangleList } from \"../types\";\nimport {\n  defaultBlend,\n  getVertexColors,\n  pointToVec3Array,\n  shouldConvert,\n  toRGBA,\n  withPose,\n} from \"../utils/commandUtils\";\nimport { createInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\n// TODO(Audrey): default to the actual regl defaults before 1.x release\nconst defaultSingleColorDepth = { enable: true, mask: false };\nconst defaultVetexColorDepth = {\n  enable: true,\n  mask: true,\n  func: \"<=\",\n};\n\nconst singleColor = (regl) =>\n  withPose({\n    primitive: \"triangles\",\n    vert: `\n  precision mediump float;\n\n  attribute vec3 point;\n\n  uniform mat4 projection, view;\n\n  #WITH_POSE\n\n  void main () {\n    vec3 pos = applyPose(point);\n    gl_Position = projection * view * vec4(pos, 1);\n  }\n  `,\n    frag: `\n  precision mediump float;\n  uniform vec4 color;\n  void main () {\n    gl_FragColor = color;\n  }\n  `,\n    attributes: {\n      point: (context, props) => {\n        if (shouldConvert(props.points)) {\n          return pointToVec3Array(props.points);\n        }\n        return props.points;\n      },\n      color: (context, props) => {\n        if (shouldConvert(props.colors) || shouldConvert(props.color)) {\n          return getVertexColors(props);\n        }\n        return props.color || props.colors;\n      },\n    },\n    uniforms: {\n      color: (context, props) => {\n        if (shouldConvert(props.color)) {\n          return toRGBA(props.color);\n        }\n        return props.color;\n      },\n    },\n    // can pass in { enable: true, depth: false } to turn off depth to prevent flicker\n    // because multiple items are rendered to the same z plane\n    depth: {\n      enable: (context, props) => {\n        return (props.depth && props.depth.enable) || defaultSingleColorDepth.enable;\n      },\n      mask: (context, props) => {\n        return (props.depth && props.depth.mask) || defaultSingleColorDepth.mask;\n      },\n    },\n    blend: defaultBlend,\n\n    count: (context, props) => props.points.length,\n  });\n\nconst vertexColors = (regl) =>\n  withPose({\n    primitive: \"triangles\",\n    vert: `\n  precision mediump float;\n\n  attribute vec3 point;\n  attribute vec4 color;\n\n  uniform mat4 projection, view;\n\n  varying vec4 vColor;\n\n  #WITH_POSE\n\n  void main () {\n    vec3 pos = applyPose(point);\n    vColor = color;\n    gl_Position = projection * view * vec4(pos, 1);\n  }\n  `,\n    frag: `\n  precision mediump float;\n  varying vec4 vColor;\n  void main () {\n    gl_FragColor = vColor;\n  }\n  `,\n    attributes: {\n      point: (context, props) => {\n        if (shouldConvert(props.points)) {\n          return pointToVec3Array(props.points);\n        }\n        return props.points;\n      },\n      color: (context, props) => {\n        if (shouldConvert(props.colors) || shouldConvert(props.color)) {\n          return getVertexColors(props);\n        }\n        return props.color || props.colors;\n      },\n    },\n\n    depth: {\n      enable: (context, props) => {\n        return (props.depth && props.depth.enable) || defaultVetexColorDepth.enable;\n      },\n      mask: (context, props) => {\n        return (props.depth && props.depth.mask) || defaultVetexColorDepth.mask;\n      },\n    },\n    blend: defaultBlend,\n\n    count: (context, props) => props.points.length,\n  });\n\n// command to render triangle lists optionally supporting vertex colors for each triangle\nconst triangles = (regl: Regl) => {\n  const single = regl(singleColor(regl));\n  const vertex = regl(vertexColors(regl));\n  return (props: any, isHitmap: boolean) => {\n    const items: TriangleList[] = Array.isArray(props) ? props : [props];\n    const singleColorItems = [];\n    const vertexColorItems = [];\n    items.forEach((item) => {\n      // If the item has onlyRenderInHitmap set, only render it in the hitmap.\n      if (isHitmap || !item.onlyRenderInHitmap) {\n        if (item.colors && item.colors.length) {\n          vertexColorItems.push(item);\n        } else {\n          singleColorItems.push(item);\n        }\n      }\n    });\n\n    single(singleColorItems);\n    vertex(vertexColorItems);\n  };\n};\n\nconst getChildrenForHitmap = createInstancedGetChildrenForHitmap(3);\nexport default function Triangles(props: { ...CommonCommandProps, children: TriangleList[] }) {\n  return <Command getChildrenForHitmap={getChildrenForHitmap} {...props} reglCommand={triangles} />;\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport type { Point, CameraCommand, Dimensions, Color, Pose, Scale, Vec4 } from \"../types\";\nimport { getCSSColor, toColor } from \"../utils/commandUtils\";\nimport { type WorldviewContextType } from \"../WorldviewContext\";\nimport WorldviewReactContext from \"../WorldviewReactContext\";\n\nconst BG_COLOR_LIGHT = \"#ffffff\";\nconst BG_COLOR_DARK = \"rgba(0,0,0,0.8)\";\nconst BRIGHTNESS_THRESHOLD = 128;\nconst DEFAULT_TEXT_COLOR = { r: 1, g: 1, b: 1, a: 1 };\nconst DEFAULT_BG_COLOR = { r: 0, g: 0, b: 0, a: 0.8 };\n\nexport type TextMarker = {\n  name?: string,\n  pose: Pose,\n  scale: Scale,\n  color?: Color | Vec4,\n  colors?: (Color | Vec4)[],\n  text: string,\n};\n\nlet cssHasBeenInserted = false;\nfunction insertGlobalCss() {\n  if (cssHasBeenInserted) {\n    return;\n  }\n  const style = document.createElement(\"style\");\n  style.innerHTML = `\n    .regl-worldview-text-wrapper {\n      position: absolute;\n      white-space: nowrap;\n      z-index: 100;\n      pointer-events: none;\n      top: 0;\n      left: 0;\n      will-change: transform;\n    }\n    .regl-worldview-text-inner {\n      position: relative;\n      left: -50%;\n      top: -0.5em;\n      white-space: pre-line;\n    }\n  `;\n  if (document.body) {\n    document.body.appendChild(style);\n  }\n  cssHasBeenInserted = true;\n}\n\nexport function isColorDark({ r, g, b }: Color): boolean {\n  // ITU-R BT.709 https://en.wikipedia.org/wiki/Rec._709\n  // 0.2126 * 255 * r + 0.7152 * 255 * g + 0.0722 * 255 * b\n  const luma = 54.213 * r + 182.376 * g + 18.411 * b;\n  return luma < BRIGHTNESS_THRESHOLD;\n}\n\nfunction isColorEqual(a: Color, b: Color): boolean {\n  return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\n}\n\nclass TextElement {\n  wrapper = document.createElement(\"span\");\n  _inner = document.createElement(\"span\");\n  _text = document.createTextNode(\"\");\n  // store prev colors to improve perf\n  _prevTextColor: Color = DEFAULT_TEXT_COLOR;\n  _prevBgColor: ?Color = DEFAULT_BG_COLOR;\n  _prevAutoBackgroundColor: ?boolean = null;\n\n  constructor() {\n    insertGlobalCss();\n    this.wrapper.className = \"regl-worldview-text-wrapper\";\n    this._inner.className = \"regl-worldview-text-inner\";\n    this.wrapper.appendChild(this._inner);\n    this._inner.appendChild(this._text);\n    this.wrapper.style.color = getCSSColor(DEFAULT_TEXT_COLOR);\n  }\n\n  update(marker: TextMarker, left: number, top: number, autoBackgroundColor?: boolean) {\n    this.wrapper.style.transform = `translate(${left.toFixed()}px,${top.toFixed()}px)`;\n    const { color, colors = [] } = marker;\n    const hasBgColor = colors.length >= 2;\n    const textColor = toColor(hasBgColor ? colors[0] : color || [0, 0, 0, 1]);\n\n    if (textColor) {\n      const backgroundColor = toColor(colors[1]);\n      if (!isColorEqual(this._prevTextColor, textColor)) {\n        this._prevTextColor = textColor;\n        this.wrapper.style.color = getCSSColor(textColor);\n      }\n\n      if (!autoBackgroundColor && autoBackgroundColor !== this._prevAutoBackgroundColor) {\n        // remove background color if autoBackgroundColor has changed\n        this._inner.style.background = \"transparent\";\n        this._prevBgColor = null;\n      } else {\n        if (\n          autoBackgroundColor &&\n          (!this._prevBgColor || (this._prevBgColor && !isColorEqual(textColor, this._prevBgColor)))\n        ) {\n          // update background color with automatic dark/light color\n          this._prevBgColor = textColor;\n          const isTextColorDark = isColorDark(textColor);\n          const hexBgColor = isTextColorDark ? BG_COLOR_LIGHT : BG_COLOR_DARK;\n          this._inner.style.background = hexBgColor;\n        } else if (hasBgColor && this._prevBgColor && !isColorEqual(backgroundColor, this._prevBgColor)) {\n          // update background color with colors[1] data\n          this._prevBgColor = backgroundColor;\n          this._inner.style.background = getCSSColor(backgroundColor);\n        }\n      }\n    }\n    this._prevAutoBackgroundColor = autoBackgroundColor;\n\n    if (this._text.textContent !== marker.text) {\n      this._text.textContent = marker.text || \"\";\n    }\n  }\n}\n\ntype Props = {\n  children: TextMarker[],\n  autoBackgroundColor?: boolean,\n};\n\n// Render text on a scene using DOM nodes, similar to the Overlay command.\n// Implementation uses manual DOM manipulation to avoid the performance hit from React tree reconciliation.\nexport default class Text extends React.Component<Props> {\n  _context: ?WorldviewContextType;\n  _textComponents: Map<string | TextMarker, TextElement> = new Map();\n  _textContainerRef: { current: HTMLDivElement | null } = React.createRef();\n\n  static defaultProps = {\n    children: [],\n  };\n\n  componentDidMount() {\n    if (this._context) {\n      this._context.registerPaintCallback(this.paint);\n    }\n  }\n\n  componentWillUnmount = () => {\n    if (this._context) {\n      this._context.unregisterPaintCallback(this.paint);\n    }\n  };\n\n  paint = () => {\n    const context = this._context;\n    const textComponents = this._textComponents;\n    const { children: markers, autoBackgroundColor } = this.props;\n    const { current: textContainer } = this._textContainerRef;\n    const initializedData = context && context.initializedData;\n\n    if (!textContainer || !context || !initializedData) {\n      return;\n    }\n    const {\n      dimension,\n      dimension: { width, height },\n    } = context;\n    const { camera } = initializedData;\n\n    const componentsToRemove = new Set(textComponents.keys());\n\n    for (const marker of markers) {\n      const { pose, name } = marker;\n      const { position } = pose;\n      const coord = this.project(position, camera, dimension);\n      if (!coord) {\n        continue;\n      }\n\n      const [left, top] = coord;\n      if (left < -10 || top < -10 || left > width + 10 || top > height + 10) {\n        continue;\n      }\n\n      let el = textComponents.get(name || marker);\n      if (el) {\n        componentsToRemove.delete(name || marker);\n      } else {\n        el = new TextElement();\n        textComponents.set(name || marker, el);\n        textContainer.appendChild(el.wrapper);\n      }\n\n      el.update(marker, left, top, autoBackgroundColor);\n    }\n\n    for (const key of componentsToRemove) {\n      const el = textComponents.get(key);\n      if (!el) {\n        continue;\n      }\n      el.wrapper.remove();\n      textComponents.delete(key);\n    }\n  };\n\n  project = (point: Point, camera: CameraCommand, dimension: Dimensions) => {\n    const vec = [point.x, point.y, point.z];\n    const { left, top, width, height } = dimension;\n    const viewport = [left, top, width, height];\n    return camera.toScreenCoord(viewport, vec);\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div ref={this._textContainerRef} />\n        <WorldviewReactContext.Consumer>\n          {(ctx: ?WorldviewContextType) => {\n            if (ctx) {\n              this._context = ctx;\n            }\n            return null;\n          }}\n        </WorldviewReactContext.Consumer>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport { withPose } from \"../utils/commandUtils\";\nimport { nonInstancedGetChildrenForHitmap } from \"../utils/getChildrenForHitmapDefaults\";\nimport Command, { type CommonCommandProps } from \"./Command\";\n\nconst DEFAULT_GRID_COLOR = [0.3, 0.3, 0.3, 1];\n\nexport function grid() {\n  return withPose({\n    vert: `\n    precision mediump float;\n    uniform mat4 projection, view;\n\n    attribute vec3 point;\n    attribute vec4 color;\n    varying vec4 fragColor;\n\n    void main () {\n      fragColor = color;\n      vec3 p = point;\n      gl_Position = projection * view * vec4(p, 1);\n    }\n    `,\n    frag: `\n      precision mediump float;\n      varying vec4 fragColor;\n      void main () {\n        gl_FragColor = fragColor;\n      }\n    `,\n    primitive: \"lines\",\n    attributes: {\n      point: (context, props) => {\n        const points = [];\n        const bound = props.count;\n        for (let i = -props.count; i < props.count; i++) {\n          points.push([-bound, i, 0]);\n          points.push([bound, i, 0]);\n          points.push([i, -bound, 0]);\n          points.push([i, bound, 0]);\n        }\n        return points;\n      },\n      color: (context, props) => {\n        const color = props.color || DEFAULT_GRID_COLOR;\n        return new Array(props.count * 4 * 2).fill(color);\n      },\n    },\n    count: (context, props) => {\n      // 8 points per count\n      const count = props.count * 4 * 2;\n      return count;\n    },\n  });\n}\n\ntype Props = {\n  ...CommonCommandProps,\n  count: number,\n};\n\n// useful for rendering a grid for debugging in stories\n\nexport default function Grid({ count, ...rest }: Props) {\n  const children = { count };\n  return (\n    <Command getChildrenForHitmap={nonInstancedGetChildrenForHitmap} {...rest} reglCommand={grid}>\n      {children}\n    </Command>\n  );\n}\n\nGrid.defaultProps = { count: 6 };\n","// @flow\n\n//  Copyright (c) 2018-present, GM Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { Point, Vec3, Dimensions, Pose } from \"../types\";\nimport { type WorldviewContextType } from \"../WorldviewContext\";\nimport WorldviewReactContext from \"../WorldviewReactContext\";\n\ntype PoseObj = { pose: Pose };\ntype RenderItemInput<T: PoseObj> = {\n  item: T,\n  coordinates: ?Vec3,\n  index: number,\n  dimension: Dimensions,\n};\n\ntype Props<T: PoseObj> = {\n  children: T[],\n  renderItem: (RenderItemInput<T>) => React.Node,\n};\n\ntype State = {\n  items: React.Node[],\n};\n\n// A command that renders arbitrary DOM nodes on top of the Worldview 3D scene.\n// It supplies coordinates to the `renderItem` prop for positioning DOM nodes relative to the canvas.\nexport default class Overlay<T: PoseObj> extends React.Component<Props<T>, State> {\n  _context: ?WorldviewContextType;\n  state = { items: [] };\n\n  componentDidMount() {\n    if (this._context) {\n      this._context.registerPaintCallback(this.paint);\n    }\n  }\n\n  componentWillUnmount = () => {\n    if (this._context) {\n      this._context.unregisterPaintCallback(this.paint);\n    }\n  };\n\n  paint = () => {\n    const context = this._context;\n    const dimension = context && context.dimension;\n    const { renderItem, children } = this.props;\n    if (!context || !dimension) {\n      return;\n    }\n    const items = children.map((item, index) => {\n      const coordinates = this.project(item.pose.position, context);\n      return renderItem({ item, index, coordinates, dimension });\n    });\n    this.setState({ items });\n  };\n\n  project = (point: Point, context: ?WorldviewContextType): ?Vec3 => {\n    if (!context || !context.initializedData) {\n      return;\n    }\n    const { dimension } = context;\n    const { camera } = context.initializedData;\n\n    const vec = [point.x, point.y, point.z];\n    const { left, top, width, height } = dimension;\n    const viewport = [left, top, width, height];\n    return camera.toScreenCoord(viewport, vec);\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <WorldviewReactContext.Consumer>\n          {(ctx: ?WorldviewContextType) => {\n            if (ctx) {\n              this._context = ctx;\n            }\n            return this.state.items;\n          }}\n        </WorldviewReactContext.Consumer>\n      </React.Fragment>\n    );\n  }\n}\n","/* eslint-disable header/header */\n\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport memoize from \"lodash/memoize\";\n\nimport { getGlobalHooks } from \"./loadWebviz\";\nimport { DIAGNOSTIC_TOPIC } from \"./util/globalConstants\";\n\n/*\nWe've split this code out seperately from the rest of the hooks so that we can lazy load these components by\nlazily importing this file at runtime.\n*/\n\nexport function panelsByCategory() {\n  const DiagnosticStatusPanel = require(\"webviz-core/src/panels/diagnostics/DiagnosticStatusPanel\").default;\n  const DiagnosticSummary = require(\"webviz-core/src/panels/diagnostics/DiagnosticSummary\").default;\n  const GlobalVariables = require(\"webviz-core/src/panels/GlobalVariables\").default;\n  const GlobalVariableSlider = require(\"webviz-core/src/panels/GlobalVariableSlider\").default;\n  const ImageViewPanel = require(\"webviz-core/src/panels/ImageView\").default;\n  const Internals = require(\"webviz-core/src/panels/Internals\").default;\n  const NodePlayground = require(\"webviz-core/src/panels/NodePlayground\").default;\n  const Note = require(\"webviz-core/src/panels/Note\").default;\n  const NumberOfRenders = require(\"webviz-core/src/panels/NumberOfRenders\").default;\n  const PlaybackPerformance = require(\"webviz-core/src/panels/PlaybackPerformance\").default;\n  const Plot = require(\"webviz-core/src/panels/Plot\").default;\n  const Publish = require(\"webviz-core/src/panels/Publish\").default;\n  const RawMessages = require(\"webviz-core/src/panels/RawMessages\").default;\n  const Rosout = require(\"webviz-core/src/panels/Rosout\").default;\n  const SourceInfo = require(\"webviz-core/src/panels/SourceInfo\").default;\n  const StateTransitions = require(\"webviz-core/src/panels/StateTransitions\").default;\n  const SubscribeToList = require(\"webviz-core/src/panels/SubscribeToList\").default;\n  const Tab = require(\"webviz-core/src/panels/Tab\").default;\n  const TwoDimensionalPlot = require(\"webviz-core/src/panels/TwoDimensionalPlot\").default;\n  const ThreeDimensionalViz = require(\"webviz-core/src/panels/ThreeDimensionalViz\").default;\n  const { ndash } = require(\"webviz-core/src/util/entities\");\n\n  const ros = [\n    { title: \"2D Plot\", component: TwoDimensionalPlot },\n    { title: \"3D\", component: ThreeDimensionalViz },\n    { title: `Diagnostics ${ndash} Summary`, component: DiagnosticSummary },\n    { title: `Diagnostics ${ndash} Detail`, component: DiagnosticStatusPanel },\n    { title: \"Image\", component: ImageViewPanel },\n    { title: \"Plot\", component: Plot },\n    { title: \"Publish\", component: Publish },\n    { title: \"Raw Messages\", component: RawMessages },\n    { title: \"rosout\", component: Rosout },\n    { title: \"State Transitions\", component: StateTransitions },\n  ];\n\n  const utilities = [\n    { title: \"Global Variables\", component: GlobalVariables },\n    { title: \"Global Variable Slider\", component: GlobalVariableSlider },\n    { title: \"Node Playground\", component: NodePlayground },\n    { title: \"Notes\", component: Note },\n    { title: \"Tab\", component: Tab },\n    { title: \"Webviz Internals\", component: Internals },\n    { title: \"Data Source Info\", component: SourceInfo },\n  ];\n\n  const debugging = [\n    { title: \"Number of Renders\", component: NumberOfRenders },\n    { title: \"Playback Performance\", component: PlaybackPerformance },\n    { title: \"Subscribe to List\", component: SubscribeToList },\n  ];\n\n  return { ros, utilities, debugging };\n}\n\nexport function perPanelHooks() {\n  const BlurIcon = require(\"@mdi/svg/svg/blur.svg\").default;\n  const GridIcon = require(\"@mdi/svg/svg/grid.svg\").default;\n  const HexagonIcon = require(\"@mdi/svg/svg/hexagon.svg\").default;\n  const HexagonMultipleIcon = require(\"@mdi/svg/svg/hexagon-multiple.svg\").default;\n  const PentagonOutlineIcon = require(\"@mdi/svg/svg/pentagon-outline.svg\").default;\n  const RadarIcon = require(\"@mdi/svg/svg/radar.svg\").default;\n  const RobotIcon = require(\"@mdi/svg/svg/robot.svg\").default;\n  const LaserScanVert = require(\"webviz-core/src/panels/ThreeDimensionalViz/LaserScanVert\").default;\n  const { defaultMapPalette } = require(\"webviz-core/src/panels/ThreeDimensionalViz/commands/utils\");\n  const { POINT_CLOUD_DATATYPE, POSE_STAMPED_DATATYPE } = require(\"webviz-core/src/util/globalConstants\");\n\n  const SUPPORTED_MARKER_DATATYPES = {\n    // generally supported datatypes\n    VISUALIZATION_MSGS_MARKER_DATATYPE: \"visualization_msgs/Marker\",\n    VISUALIZATION_MSGS_MARKER_ARRAY_DATATYPE: \"visualization_msgs/MarkerArray\",\n    POSE_STAMPED_DATATYPE,\n    POINT_CLOUD_DATATYPE,\n    SENSOR_MSGS_LASER_SCAN_DATATYPE: \"sensor_msgs/LaserScan\",\n    NAV_MSGS_OCCUPANCY_GRID_DATATYPE: \"nav_msgs/OccupancyGrid\",\n    GEOMETRY_MSGS_POLYGON_STAMPED_DATATYPE: \"geometry_msgs/PolygonStamped\",\n  };\n\n  return {\n    DiagnosticSummary: {\n      defaultConfig: {\n        pinnedIds: [],\n        hardwareIdFilter: \"\",\n        topicToRender: DIAGNOSTIC_TOPIC,\n      },\n    },\n    ImageView: {\n      defaultConfig: {\n        cameraTopic: \"\",\n        enabledMarkerTopics: [],\n        customMarkerTopicOptions: [],\n        scale: 0.2,\n        transformMarkers: false,\n        synchronize: false,\n        mode: \"fit\",\n        zoomPercentage: 100,\n        offset: [0, 0],\n      },\n      imageMarkerDatatypes: [\"visualization_msgs/ImageMarker\"],\n      canTransformMarkersByTopic: (topic) => !topic.includes(\"rect\"),\n    },\n    GlobalVariableSlider: {\n      getVariableSpecificOutput: () => null,\n    },\n    StateTransitions: { defaultConfig: { paths: [] }, customStateTransitionColors: {} },\n    ThreeDimensionalViz: {\n      defaultConfig: {\n        checkedKeys: [\"name:Topics\"],\n        expandedKeys: [\"name:Topics\"],\n        followTf: null,\n        cameraState: {},\n        modifiedNamespaceTopics: [],\n        pinTopics: false,\n        topicSettings: {},\n        autoSyncCameraState: false,\n      },\n      SUPPORTED_MARKER_DATATYPES,\n      allSupportedMarkers: [\n        \"arrow\",\n        \"cube\",\n        \"cubeList\",\n        \"cylinder\",\n        \"filledPolygon\",\n        \"grid\",\n        \"instancedLineList\",\n        \"laserScan\",\n        \"linedConvexHull\",\n        \"lineList\",\n        \"lineStrip\",\n        \"pointcloud\",\n        \"points\",\n        \"poseMarker\",\n        \"sphere\",\n        \"sphereList\",\n        \"text\",\n        \"triangleList\",\n      ],\n      renderAdditionalMarkers: () => {},\n      topics: [],\n      iconsByDatatype: {\n        \"visualization_msgs/Marker\": HexagonIcon,\n        \"visualization_msgs/MarkerArray\": HexagonMultipleIcon,\n        \"nav_msgs/OccupancyGrid\": GridIcon,\n        \"sensor_msgs/LaserScan\": RadarIcon,\n        \"geometry_msgs/PolygonStamped\": PentagonOutlineIcon,\n        [POINT_CLOUD_DATATYPE]: BlurIcon,\n        [POSE_STAMPED_DATATYPE]: RobotIcon,\n      },\n      // TODO(Audrey): remove icons config after topic group release\n      icons: {},\n      AdditionalToolbarItems: () => null,\n      LaserScanVert,\n      setGlobalVariablesInSceneBuilder: (globalVariables, selectionState, topicsToRender) => ({\n        selectionState,\n        topicsToRender,\n      }),\n      consumeMessage: (topic, msg, consumeMethods, { errors }) => {\n        errors.topicsWithError.set(topic, `Unrecognized topic datatype for scene: ${msg.datatype}`);\n      },\n      getMessagePose: (msg) => msg.message.pose,\n      addMarkerToCollector(add, topic, marker, setTopicError) {\n        setTopicError(topic, `Unsupported marker type: ${marker.type}`);\n      },\n      getSyntheticArrowMarkerColor: () => ({ r: 0, g: 0, b: 1, a: 0.5 }),\n      getFlattenedPose: () => undefined,\n      getOccupancyGridValues: (topic) => [0.5, \"map\"],\n      getMapPalette() {\n        return defaultMapPalette;\n      },\n      consumePose: () => {},\n      getMarkerColor: (topic, markerColor) => markerColor,\n      hasBlacklistTopics: () => false,\n      ungroupedNodesCategory: \"Topics\",\n      rootTransformFrame: \"map\",\n      defaultFollowTransformFrame: null,\n      skipTransformFrame: null,\n    },\n    RawMessages: { docLinkFunction: () => undefined },\n    installChartJs: () => {\n      require(\"webviz-core/src/util/installChartjs\").default();\n    },\n  };\n}\n\n// Helper function to bypass lazy fetch when running tests\nexport function testSetup() {\n  const hooks = getGlobalHooks();\n  hooks.panelsByCategory = memoize(() => {\n    return panelsByCategory();\n  });\n  hooks.perPanelHooks = memoize(() => {\n    return perPanelHooks();\n  });\n  hooks.areHooksImported = () => true;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport BorderAllIcon from \"@mdi/svg/svg/border-all.svg\";\nimport CloseIcon from \"@mdi/svg/svg/close.svg\";\nimport ExpandAllOutlineIcon from \"@mdi/svg/svg/expand-all-outline.svg\";\nimport FullscreenIcon from \"@mdi/svg/svg/fullscreen.svg\";\nimport GridLargeIcon from \"@mdi/svg/svg/grid-large.svg\";\nimport TrashCanOutlineIcon from \"@mdi/svg/svg/trash-can-outline.svg\";\nimport cx from \"classnames\";\nimport { last } from \"lodash\";\nimport React, { useState, useCallback, useContext, useMemo, type ComponentType } from \"react\";\nimport DocumentEvents from \"react-document-events\";\nimport {\n  getLeaves,\n  getNodeAtPath,\n  updateTree,\n  getPathFromNode,\n  getOtherBranch,\n  isParent,\n  MosaicContext,\n  MosaicWindowContext,\n  type MosaicRootActions,\n  type MosaicWindowActions,\n} from \"react-mosaic-component\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport styles from \"./Panel.module.scss\";\nimport { addSelectedPanelId, removeSelectedPanelId, setSelectedPanelIds } from \"webviz-core/src/actions/mosaic\";\nimport { savePanelConfigs, saveFullPanelConfig, changePanelLayout } from \"webviz-core/src/actions/panels\";\nimport Button from \"webviz-core/src/components/Button\";\nimport ErrorBoundary from \"webviz-core/src/components/ErrorBoundary\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport KeyListener from \"webviz-core/src/components/KeyListener\";\nimport PanelContext from \"webviz-core/src/components/PanelContext\";\nimport MosaicDragHandle from \"webviz-core/src/components/PanelToolbar/MosaicDragHandle\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport PanelList, { getPanelsByType } from \"webviz-core/src/panels/PanelList\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport type {\n  EditHistoryOptions,\n  SaveConfigsPayload,\n  SaveFullConfigPayload,\n  PanelConfig,\n  SaveConfig,\n} from \"webviz-core/src/types/panels\";\nimport type { RosDatatypes } from \"webviz-core/src/types/RosDatatypes\";\nimport { TAB_PANEL_TYPE } from \"webviz-core/src/util/globalConstants\";\nimport {\n  groupPanelsOutput,\n  createTabsOutput,\n  getPanelTypeFromId,\n  getPanelIdForType,\n  updateTabPanelLayout,\n} from \"webviz-core/src/util/layout\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\ntype Props<Config> = { childId?: string, config?: Config, saveConfig?: (Config) => void, tabId?: string };\ntype ActionProps = {|\n  savePanelConfigs: (SaveConfigsPayload) => void,\n  saveFullPanelConfig: (SaveFullConfigPayload) => PanelConfig,\n  changePanelLayout: (panels: any) => void,\n  addSelectedPanelId: (panelId: string) => void,\n  removeSelectedPanelId: (panelId: string) => void,\n  setSelectedPanelIds: (panelIds: string[]) => void,\n|};\ninterface PanelStatics<Config> {\n  panelType: string;\n  defaultConfig: Config;\n}\n\n// HOC that wraps panel in an error boundary and flex box.\n// Gives panel a `config` and `saveConfig`.\n//   export default Panel(MyPanelComponent)\n//\n// `config` comes from Redux, but in stories / tests you can pass in your own:\n//   `<MyPanel config={…} />`\nexport default function Panel<Config: PanelConfig>(\n  PanelComponent: (\n    | ComponentType<{}>\n    | ComponentType<\n        $Shape<{\n          config: Config,\n          saveConfig: SaveConfig<Config>,\n          openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n          topics: Topic[],\n          capabilities: string[],\n          datatypes: RosDatatypes,\n          isHovered: boolean,\n        }>\n      >\n  ) &\n    PanelStatics<Config>\n  // TODO(JP): Add `& PanelStatics<Config>` to the return type when we have figured out\n  // https://stackoverflow.com/questions/52508434/adding-static-variable-to-union-of-class-types\n): ComponentType<Props<Config>> {\n  function ConnectedPanel(props: Props<Config>) {\n    const { childId, config: originalConfig, saveConfig, tabId } = props;\n    const { mosaicActions }: { mosaicActions: MosaicRootActions } = useContext(MosaicContext);\n    const { mosaicWindowActions }: { mosaicWindowActions: MosaicWindowActions } = useContext(MosaicWindowContext);\n\n    const layout = useSelector(({ panels }) => panels.layout);\n    const savedProps = useSelector(({ panels }) => panels.savedProps);\n    const selectedPanelIds = useSelector((state) => state.mosaic.selectedPanelIds);\n    const isSelected = selectedPanelIds.includes(childId);\n\n    const validSelectedPanelIds = useMemo(\n      () => selectedPanelIds.filter((panelId) => getPanelTypeFromId(panelId) !== TAB_PANEL_TYPE),\n      [selectedPanelIds]\n    );\n    const isOnlyPanel = useMemo(() => (tabId ? false : !isParent(layout)), [layout, tabId]);\n    const config = savedProps[childId] || originalConfig || {};\n\n    const { topics, datatypes, capabilities } = PanelAPI.useDataSourceInfo();\n    const dispatch = useDispatch();\n    const actions: ActionProps = useMemo(\n      () =>\n        bindActionCreators(\n          {\n            savePanelConfigs,\n            saveFullPanelConfig,\n            changePanelLayout,\n            addSelectedPanelId,\n            removeSelectedPanelId,\n            setSelectedPanelIds,\n          },\n          dispatch\n        ),\n      [dispatch]\n    );\n\n    const [quickActionsKeyPressed, setQuickActionsKeyPressed] = useState(false);\n    const [shiftKeyPressed, setShiftKeyPressed] = useState(false);\n    const [cmdKeyPressed, setCmdKeyPressed] = useState(false);\n    const [fullScreen, setFullScreen] = useState(false);\n    const [isHovered, setIsHovered] = useState(false);\n    const [fullScreenLocked, setFullScreenLocked] = useState(false);\n    const [showTabPanelSelectionWarning, setShowTabPanelSelectionWarning] = useState(false);\n\n    const panelsByType = useMemo(() => getPanelsByType(), []);\n    const type = PanelComponent.panelType;\n    const title = useMemo(() => panelsByType[type]?.title, [panelsByType, type]);\n    const panelComponentConfig = useMemo(() => ({ ...PanelComponent.defaultConfig, ...config }), [config]);\n\n    const isTabPanel = useMemo(() => childId && getPanelTypeFromId(childId) === TAB_PANEL_TYPE, [childId]);\n\n    // Mix partial config with current config or `defaultConfig`\n    const saveCompleteConfig = useCallback(\n      (configToSave: $Shape<Config>, options: ?{ keepLayoutInUrl?: boolean, historyOptions?: EditHistoryOptions }) => {\n        if (saveConfig) {\n          saveConfig(configToSave);\n        }\n        if (childId) {\n          actions.savePanelConfigs({\n            silent: !!options?.keepLayoutInUrl,\n            configs: [{ id: childId, config: configToSave, defaultConfig: PanelComponent.defaultConfig }],\n            historyOptions: options?.historyOptions,\n          });\n        }\n      },\n      [actions, childId, saveConfig]\n    );\n\n    const updatePanelConfig = useCallback(\n      (panelType: string, perPanelFunc: (PanelConfig) => PanelConfig, historyOptions?: EditHistoryOptions) => {\n        actions.saveFullPanelConfig({ panelType, perPanelFunc, historyOptions });\n      },\n      [actions]\n    );\n\n    // Open a panel next to the current panel, of the specified `panelType`.\n    // If such a panel already exists, we update it with the new props.\n    const openSiblingPanel = useCallback(\n      (panelType: string, siblingConfigCreator: (PanelConfig) => PanelConfig) => {\n        const siblingComponent = PanelList.getComponentForType(panelType);\n        if (!siblingComponent) {\n          return;\n        }\n        const siblingDefaultConfig = siblingComponent.defaultConfig;\n        const ownPath = mosaicWindowActions.getPath();\n\n        // Try to find a sibling summary panel and update it with the `siblingConfig`\n        const siblingPathEnd = last(ownPath) ? getOtherBranch(last(ownPath)) : \"second\";\n        const siblingPath = ownPath.slice(0, -1).concat(siblingPathEnd);\n        const siblingId = getNodeAtPath(mosaicActions.getRoot(), siblingPath);\n        if (typeof siblingId === \"string\" && getPanelTypeFromId(siblingId) === panelType) {\n          const siblingConfig: PanelConfig = { ...siblingDefaultConfig, ...savedProps[siblingId] };\n          actions.savePanelConfigs({\n            configs: [\n              { id: siblingId, config: siblingConfigCreator(siblingConfig), defaultConfig: siblingDefaultConfig },\n            ],\n          });\n          return;\n        }\n\n        // Otherwise, open new panel\n        const newPanelPath = ownPath.concat(\"second\");\n        mosaicWindowActions.split({ type: panelType }).then(() => {\n          const newPanelId = getNodeAtPath(mosaicActions.getRoot(), newPanelPath);\n          actions.savePanelConfigs({\n            configs: [\n              {\n                id: newPanelId,\n                config: siblingConfigCreator(siblingDefaultConfig),\n                defaultConfig: siblingDefaultConfig,\n              },\n            ],\n          });\n        });\n      },\n      [actions, mosaicActions, mosaicWindowActions, savedProps]\n    );\n\n    const onOverlayClick = useCallback(\n      (e) => {\n        if (!fullScreen && quickActionsKeyPressed) {\n          setFullScreen(true);\n          if (shiftKeyPressed) {\n            setFullScreenLocked(true);\n          }\n        }\n\n        // If user clicks a 1st panel, select it\n        // If user clicks a 2nd+ panel without pressing `Cmd`, clear previous selections & select clicked panel\n        if (!e.metaKey) {\n          // Unless we are a Tab panel or in a Tab panel\n          if (tabId || isTabPanel) {\n            return;\n          }\n          if (childId) {\n            actions.setSelectedPanelIds([childId]);\n          }\n          return;\n        }\n\n        // Show a warning if we are pressing `Cmd` and clicking a Tab panel\n        // Don't select any panels\n        if (tabId || isTabPanel) {\n          setShowTabPanelSelectionWarning(true);\n          return;\n        }\n\n        if (selectedPanelIds.includes(childId)) {\n          // If clicked panel is already selected, deselect\n          actions.setSelectedPanelIds(selectedPanelIds.filter((panelId) => panelId !== childId));\n        } else if (childId) {\n          // Otherwise, select clicked panel, while deselecting any already-selected Tab panels\n          // (when panels are grouped to create a Tab panel, that new Tab panel is automatically \"selected\")\n          actions.setSelectedPanelIds(\n            selectedPanelIds.filter((panelId) => getPanelTypeFromId(panelId) !== TAB_PANEL_TYPE).concat([childId])\n          );\n        }\n      },\n      [\n        setShowTabPanelSelectionWarning,\n        fullScreen,\n        quickActionsKeyPressed,\n        selectedPanelIds,\n        tabId,\n        isTabPanel,\n        childId,\n        shiftKeyPressed,\n        actions,\n      ]\n    );\n\n    const createTabPanel = useCallback(\n      (tabPanelId, changePanelPayload, saveConfigsPayload) => {\n        actions.changePanelLayout(changePanelPayload);\n        actions.savePanelConfigs(saveConfigsPayload);\n        actions.setSelectedPanelIds([tabPanelId]);\n      },\n      [actions]\n    );\n\n    const groupPanels = useCallback(\n      () => {\n        const { tabPanelId, changePanelPayload, saveConfigsPayload } = groupPanelsOutput(\n          childId,\n          layout,\n          validSelectedPanelIds\n        );\n        createTabPanel(tabPanelId, changePanelPayload, saveConfigsPayload);\n      },\n      [childId, layout, createTabPanel, validSelectedPanelIds]\n    );\n\n    const createTabs = useCallback(\n      () => {\n        const { tabPanelId, changePanelPayload, saveConfigsPayload } = createTabsOutput(\n          childId,\n          layout,\n          validSelectedPanelIds\n        );\n        createTabPanel(tabPanelId, changePanelPayload, saveConfigsPayload);\n      },\n      [childId, layout, createTabPanel, validSelectedPanelIds]\n    );\n\n    const { closePanel, splitPanel } = useMemo(\n      () => ({\n        closePanel: () => {\n          mosaicActions.remove(mosaicWindowActions.getPath());\n        },\n        splitPanel: () => {\n          if (tabId) {\n            const newId = getPanelIdForType(PanelComponent.panelType);\n            const activeTabLayout = savedProps[tabId].tabs[savedProps[tabId].activeTabIdx].layout;\n            const pathToPanelInTab = getPathFromNode(childId, activeTabLayout);\n            const newTabLayout = updateTree(activeTabLayout, [\n              { path: pathToPanelInTab, spec: { $set: { first: childId, second: newId, direction: \"row\" } } },\n            ]);\n            const newTabConfig = updateTabPanelLayout(newTabLayout, savedProps[tabId]);\n            actions.savePanelConfigs({ configs: [{ id: tabId, config: newTabConfig }, { id: newId, config }] });\n          } else {\n            mosaicWindowActions.split({ type: PanelComponent.panelType });\n          }\n        },\n      }),\n      [actions, childId, config, mosaicActions, mosaicWindowActions, savedProps, tabId]\n    );\n\n    const { onMouseEnter, onMouseLeave, onMouseMove, enterFullscreen, exitFullScreen } = useMemo(\n      () => ({\n        onMouseEnter: () => setIsHovered(true),\n        onMouseLeave: () => setIsHovered(false),\n        onMouseMove: (e) => {\n          if (e.metaKey !== cmdKeyPressed) {\n            setCmdKeyPressed(e.metaKey);\n          }\n        },\n        enterFullscreen: () => {\n          setFullScreen(true);\n          setFullScreenLocked(true);\n        },\n        exitFullScreen: () => {\n          setFullScreen(false);\n          setFullScreenLocked(false);\n        },\n      }),\n      [cmdKeyPressed]\n    );\n\n    const onReleaseQuickActionsKey = useCallback(\n      () => {\n        setQuickActionsKeyPressed(false);\n        if (fullScreen && !fullScreenLocked) {\n          exitFullScreen();\n        }\n      },\n      [exitFullScreen, fullScreen, fullScreenLocked]\n    );\n\n    const { keyUpHandlers, keyDownHandlers } = useMemo(\n      () => ({\n        keyUpHandlers: {\n          \"`\": () => onReleaseQuickActionsKey(),\n          \"~\": () => onReleaseQuickActionsKey(),\n          Shift: () => setShiftKeyPressed(false),\n          Meta: () => {\n            setCmdKeyPressed(false);\n            setShowTabPanelSelectionWarning(false);\n          },\n        },\n        keyDownHandlers: {\n          a: (e) => {\n            e.preventDefault();\n            if (cmdKeyPressed) {\n              actions.setSelectedPanelIds(getLeaves(layout));\n            }\n          },\n          \"`\": () => setQuickActionsKeyPressed(true),\n          \"~\": () => setQuickActionsKeyPressed(true),\n          Shift: () => setShiftKeyPressed(true),\n          Escape: () => exitFullScreen(),\n          Meta: () => {\n            setCmdKeyPressed(true);\n            setShowTabPanelSelectionWarning(false);\n          },\n        },\n      }),\n      [actions, cmdKeyPressed, exitFullScreen, layout, onReleaseQuickActionsKey]\n    );\n    return (\n      // $FlowFixMe - bug prevents requiring panelType on PanelComponent: https://stackoverflow.com/q/52508434/23649\n      <PanelContext.Provider\n        value={{\n          type,\n          id: childId,\n          title,\n          config,\n          saveConfig: saveCompleteConfig,\n          updatePanelConfig,\n          openSiblingPanel,\n          enterFullscreen,\n          isHovered,\n          tabId,\n        }}>\n        {/* Ensure user exits full-screen mode when leaving window, even if key is still pressed down */}\n        <DocumentEvents target={window} enabled onBlur={exitFullScreen} />\n        <KeyListener global keyUpHandlers={keyUpHandlers} keyDownHandlers={keyDownHandlers} />\n        <Flex\n          onClick={onOverlayClick}\n          onMouseEnter={onMouseEnter}\n          onMouseLeave={onMouseLeave}\n          onMouseMove={onMouseMove}\n          style={{ border: `2px solid ${isSelected ? colors.BLUE : \"transparent\"}` }}\n          className={cx({ [styles.root]: true, [styles.rootFullScreen]: fullScreen })}\n          col\n          dataTest={`panel-mouseenter-container ${childId || \"\"}`}\n          clip>\n          {fullScreen ? <div className={styles.notClickable} /> : null}\n          {isSelected && !fullScreen && validSelectedPanelIds.length > 1 && (\n            <div data-tab-options className={styles.tabActionsOverlay}>\n              <Button style={{ backgroundColor: colors.BLUE }} onClick={groupPanels}>\n                <Icon small style={{ marginBottom: 5 }}>\n                  <BorderAllIcon />\n                </Icon>\n                Group in tab\n              </Button>\n              <Button style={{ backgroundColor: colors.BLUE }} onClick={createTabs}>\n                <Icon small style={{ marginBottom: 5 }}>\n                  <ExpandAllOutlineIcon />\n                </Icon>\n                Create {selectedPanelIds.length} tabs\n              </Button>\n            </div>\n          )}\n          {showTabPanelSelectionWarning && (\n            <div data-tab-options-no-op className={styles.prohibitedSelection}>\n              Cannot group Tab panels with other panels\n            </div>\n          )}\n          {type !== TAB_PANEL_TYPE && quickActionsKeyPressed && !fullScreen && (\n            <div className={styles.quickActionsOverlay} data-panel-overlay>\n              <MosaicDragHandle tabId={tabId}>\n                <>\n                  <div>\n                    <FullscreenIcon />\n                    {shiftKeyPressed ? \"Lock fullscreen\" : \"Fullscreen (Shift+click to lock)\"}\n                  </div>\n                  <div>\n                    <Button onClick={closePanel} disabled={isOnlyPanel}>\n                      <TrashCanOutlineIcon />\n                      Remove\n                    </Button>\n                    <Button onClick={splitPanel}>\n                      <GridLargeIcon />\n                      Split\n                    </Button>\n                  </div>\n                  {!isOnlyPanel && <p>Drag to move</p>}\n                </>\n              </MosaicDragHandle>\n            </div>\n          )}\n          {fullScreen ? (\n            <button className={styles.exitFullScreen} onClick={exitFullScreen} data-panel-overlay-exit>\n              <CloseIcon /> <span>Exit fullscreen</span>\n            </button>\n          ) : null}\n          <ErrorBoundary>\n            <PanelComponent\n              config={panelComponentConfig}\n              saveConfig={saveCompleteConfig}\n              openSiblingPanel={openSiblingPanel}\n              topics={[...topics]}\n              datatypes={datatypes}\n              capabilities={capabilities}\n              isHovered={isHovered}\n            />\n          </ErrorBoundary>\n        </Flex>\n      </PanelContext.Provider>\n    );\n  }\n  ConnectedPanel.displayName = `Panel(${PanelComponent.displayName || PanelComponent.name || \"\"})`;\n\n  const MemoizedConnectedPanel = React.memo(ConnectedPanel);\n  // $FlowFixMe - doesn't know underlying memoized PanelComponent's interface\n  MemoizedConnectedPanel.defaultConfig = PanelComponent.defaultConfig;\n  // $FlowFixMe - doesn't know underlying memoized PanelComponent's interface\n  MemoizedConnectedPanel.panelType = PanelComponent.panelType;\n  return MemoizedConnectedPanel;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport GlobalVariableName from \"../GlobalVariableName\";\nimport { getLinkedGlobalVariable } from \"../interactionUtils\";\nimport useLinkedGlobalVariables, { type LinkedGlobalVariable } from \"../useLinkedGlobalVariables\";\nimport LinkToGlobalVariable from \"./LinkToGlobalVariable\";\nimport UnlinkGlobalVariable from \"./UnlinkGlobalVariable\";\nimport UnlinkGlobalVariables from \"./UnlinkGlobalVariables\";\nimport UnlinkWrapper from \"./UnlinkWrapper\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\nconst SWrapper = styled.span`\n  display: inline-flex;\n  align-items: center;\n`;\nexport const SPath = styled.span`\n  opacity: 0.8;\n`;\nexport const SP = styled.p`\n  line-height: 1.4;\n  margin-bottom: 12px;\n`;\nexport const SGlobalVariableLink = styled.span`\n  height: 15px;\n  flex-direction: row;\n  display: inline-flex;\n  align-items: center;\n  word-break: normal;\n  .icon {\n    color: ${colors.highlight};\n  }\n  .link-icon {\n    opacity: 0.2;\n    display: none;\n  }\n  .highlight {\n    opacity: 1;\n    display: inline;\n  }\n  &:hover {\n    .link-icon {\n      opacity: 1;\n    }\n  }\n`;\n\nexport const SGlobalVariableForm = styled.form`\n  background-color: ${colors.toolbar};\n  margin-left: -16px;\n  padding: 12px;\n  width: 240px;\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\n  pointer-events: auto;\n  flex: 0 0 auto;\n  border-radius: 8px;\n  overflow-wrap: break-word;\n`;\n\nconst SValue = styled.span`\n  padding: 0;\n`;\n\ntype Props = {\n  addLinkTooltip?: React.Node,\n  hasNestedValue?: boolean,\n  highlight?: boolean,\n  label?: string,\n  linkedGlobalVariable?: ?LinkedGlobalVariable,\n  markerKeyPath?: string[],\n  nestedValueStyle?: any,\n  onlyRenderAddLink?: boolean,\n  style?: any,\n  topic?: string,\n  unlinkTooltip?: React.Node,\n  variableValue?: any,\n};\n\nexport default function GlobalVariableLink({\n  addLinkTooltip,\n  hasNestedValue,\n  highlight,\n  label,\n  linkedGlobalVariable,\n  markerKeyPath,\n  nestedValueStyle = { marginLeft: 8 },\n  onlyRenderAddLink,\n  style = { marginLeft: 4 },\n  topic,\n  unlinkTooltip,\n  variableValue = null,\n}: Props) {\n  const { linkedGlobalVariables } = useLinkedGlobalVariables();\n  let linkedGlobalVariableLocal: ?LinkedGlobalVariable = linkedGlobalVariable;\n  if (!linkedGlobalVariableLocal && topic && markerKeyPath) {\n    linkedGlobalVariableLocal = getLinkedGlobalVariable({\n      topic,\n      markerKeyPath,\n      linkedGlobalVariables,\n    });\n  }\n\n  const isArrayBuffer = ArrayBuffer.isView(variableValue);\n  const renderUnlink = !!linkedGlobalVariableLocal;\n  const addToLinkedGlobalVariable = topic && markerKeyPath ? { topic, markerKeyPath, variableValue } : null;\n  const renderAddLink = !renderUnlink && !isArrayBuffer && addToLinkedGlobalVariable;\n  if (!(renderUnlink || renderAddLink)) {\n    return null;\n  }\n\n  const arrayBufferStyle = isArrayBuffer ? style : { cursor: \"pointer\" };\n  let wrapperStyle = hasNestedValue ? nestedValueStyle : style;\n  wrapperStyle = { ...arrayBufferStyle, ...wrapperStyle };\n\n  return (\n    <SWrapper>\n      {label && <SValue>{label}</SValue>}\n      <SGlobalVariableLink style={wrapperStyle}>\n        {linkedGlobalVariableLocal && !onlyRenderAddLink && (\n          <UnlinkWrapper\n            linkedGlobalVariable={linkedGlobalVariableLocal}\n            name={linkedGlobalVariableLocal.name}\n            tooltip={unlinkTooltip}>\n            {({ setIsOpen, linkedGlobalVariable: linkedVar }) => (\n              <UnlinkGlobalVariable linkedGlobalVariable={linkedVar} setIsOpen={setIsOpen} />\n            )}\n          </UnlinkWrapper>\n        )}\n        {renderAddLink && addToLinkedGlobalVariable && (\n          <LinkToGlobalVariable\n            highlight={highlight}\n            tooltip={addLinkTooltip}\n            addToLinkedGlobalVariable={addToLinkedGlobalVariable}\n          />\n        )}\n      </SGlobalVariableLink>\n    </SWrapper>\n  );\n}\n\nexport { GlobalVariableName, UnlinkGlobalVariables };\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport { setGlobalVariables, overwriteGlobalVariables } from \"webviz-core/src/actions/panels\";\n\nexport type GlobalVariables = { [string]: any };\n\nexport default function useGlobalVariables(): {|\n  globalVariables: GlobalVariables,\n  setGlobalVariables: (GlobalVariables) => void,\n  overwriteGlobalVariables: (GlobalVariables) => void,\n|} {\n  const globalVariables = useSelector((state) => state.panels.globalVariables);\n  const dispatch = useDispatch();\n  return {\n    globalVariables,\n    ...bindActionCreators({ setGlobalVariables, overwriteGlobalVariables }, dispatch),\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport { setLinkedGlobalVariables } from \"webviz-core/src/actions/panels\";\n\nexport type LinkedGlobalVariable = {\n  topic: string,\n  markerKeyPath: string[],\n  name: string,\n};\n\nexport type LinkedGlobalVariables = LinkedGlobalVariable[];\n\nexport default function useLinkedGlobalVariables(): {|\n  linkedGlobalVariables: LinkedGlobalVariables,\n  setLinkedGlobalVariables: (LinkedGlobalVariables) => void,\n|} {\n  const linkedGlobalVariables = useSelector((state) => state.panels.linkedGlobalVariables);\n  const dispatch = useDispatch();\n  return {\n    linkedGlobalVariables,\n    ...bindActionCreators({ setLinkedGlobalVariables }, dispatch),\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { mat4, vec3, quat } from \"gl-matrix\";\nimport type { Mat4 } from \"gl-matrix\";\n\nimport type { TF, MutablePose, Pose, Point, Orientation } from \"webviz-core/src/types/Messages\";\n\n// allocate some temporary variables\n// so we can copy/in out of them during tf application\n// this reduces GC as this code gets called lot\nconst tempMat = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst tempPos = [0, 0, 0];\nconst tempScale = [0, 0, 0];\nconst tempOrient = [0, 0, 0, 0];\n\nfunction stripLeadingSlash(name: string) {\n  return name.startsWith(\"/\") ? name.slice(1) : name;\n}\n\nexport class Transform {\n  id: string;\n  matrix: Mat4 = mat4.create();\n  parent: ?Transform;\n  valid = false;\n\n  constructor(id: string) {\n    this.id = stripLeadingSlash(id);\n  }\n\n  reset() {\n    mat4.identity(this.matrix);\n    this.valid = true;\n  }\n\n  set(position: Point, orientation: Orientation) {\n    mat4.fromRotationTranslation(\n      this.matrix,\n      quat.set(tempOrient, orientation.x, orientation.y, orientation.z, orientation.w),\n      vec3.set(tempPos, position.x, position.y, position.z)\n    );\n    this.valid = true;\n  }\n\n  isChildOfTransform(rootId: string): boolean {\n    rootId = stripLeadingSlash(rootId);\n    if (!this.parent) {\n      return this.id === rootId;\n    }\n    return this.parent.isChildOfTransform(rootId);\n  }\n\n  rootTransform(): Transform {\n    if (!this.parent) {\n      return this;\n    }\n    return this.parent.rootTransform();\n  }\n\n  apply(output: MutablePose, input: Pose, rootId: string): ?MutablePose {\n    rootId = stripLeadingSlash(rootId);\n    if (this.id === rootId) {\n      output.position.x = input.position.x;\n      output.position.y = input.position.y;\n      output.position.z = input.position.z;\n      output.orientation.x = input.orientation.x;\n      output.orientation.y = input.orientation.y;\n      output.orientation.z = input.orientation.z;\n      output.orientation.w = input.orientation.w;\n      return output;\n    }\n    if (!this.valid) {\n      return null;\n    }\n    if (!this.isChildOfTransform(rootId)) {\n      // Can't apply if this transform doesn't map to the root transform.\n      return null;\n    }\n\n    const { position, orientation } = input;\n    // set a transform matrix from the input pose\n    mat4.fromRotationTranslation(\n      tempMat,\n      quat.set(tempOrient, orientation.x, orientation.y, orientation.z, orientation.w),\n      vec3.set(tempPos, position.x, position.y, position.z)\n    );\n\n    // set transform matrix to (our matrix * pose transform matrix)\n    mat4.multiply(tempMat, this.matrix, tempMat);\n\n    // copy the transform matrix components out into temp variables\n    mat4.getTranslation(tempPos, tempMat);\n\n    // Normalize the values in the matrix by the scale. This ensures that we get the correct rotation\n    // out even if the scale isn't 1 in each axis. The logic from this comes from the threejs\n    // implementation and an SO answer:\n    // - https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js#L790-L815\n    // - https://math.stackexchange.com/a/1463487\n    mat4.getScaling(tempScale, tempMat);\n    if (mat4.determinant(tempMat) < 0) {\n      tempScale[0] *= -1;\n    }\n    vec3.inverse(tempScale, tempScale);\n    mat4.scale(tempMat, tempMat, tempScale);\n\n    mat4.getRotation(tempOrient, tempMat);\n\n    // mutate the output w/ the temp values\n    output.position.x = tempPos[0];\n    output.position.y = tempPos[1];\n    output.position.z = tempPos[2];\n    output.orientation.x = tempOrient[0];\n    output.orientation.y = tempOrient[1];\n    output.orientation.z = tempOrient[2];\n    output.orientation.w = tempOrient[3];\n\n    if (!this.parent) {\n      return output;\n    }\n    return this.parent.apply(output, output, rootId);\n  }\n}\n\nclass TfStore {\n  storage = {};\n  get(key: string): Transform {\n    key = stripLeadingSlash(key);\n    let result = this.storage[key];\n    if (result) {\n      return result;\n    }\n    result = new Transform(key);\n    this.storage[key] = result;\n    return result;\n  }\n\n  values = (): Array<Transform> => ((Object.values(this.storage): any): Array<Transform>);\n}\n\nexport default class Transforms {\n  storage = new TfStore();\n\n  // consume a tf message\n  consume(tfMessage: TF) {\n    // child_frame_id is the id of the tf\n    const id = tfMessage.child_frame_id;\n    const parentId = tfMessage.header.frame_id;\n    const tf = this.storage.get(id);\n    const { rotation, translation } = tfMessage.transform;\n    tf.set(translation, rotation);\n    tf.parent = this.storage.get(parentId);\n  }\n\n  // Apply the tf hierarchy to the original pose and update the pose supplied in the output parameter.\n  // This follows the same calling conventions in the gl-mat4 lib, which takes an 'out' parameter as their first argument.\n  // This allows the caller to decide if they want to update the pose by reference\n  // (by reference by supplying it as both the first and second arguments)\n  // or return a new one by calling with apply({ position: { }, orientation: {} }, original).\n  // Returns the output pose, or the input pose if no transform was needed, or null if the transform\n  // is not available -- the return value must not be ignored.\n  apply(output: MutablePose, original: Pose, frameId: string, rootId: string): ?MutablePose {\n    const tf = this.storage.get(frameId);\n    return tf.apply(output, original, rootId);\n  }\n\n  rootOfTransform(transformID: string): Transform {\n    return this.get(transformID).rootTransform();\n  }\n\n  get = (key: string) => this.storage.get(key);\n  values = (): Array<Transform> => this.storage.values();\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { memoize, uniq } from \"lodash\";\nimport { Parser, Grammar } from \"nearley\";\n\nimport type { RosPath } from \"./constants\";\nimport grammar from \"./grammar.ne\";\nimport filterMap from \"webviz-core/src/filterMap\";\n\nconst grammarObj = Grammar.fromCompiled(grammar);\n\nconst parseRosPath: (path: string) => ?RosPath = memoize(\n  (path: string): ?RosPath => {\n    // Need to create a new Parser object for every new string to parse (should be cheap).\n    const parser = new Parser(grammarObj);\n    try {\n      return parser.feed(path).results[0];\n    } catch (_) {\n      return undefined;\n    }\n  }\n);\nexport default parseRosPath;\n\nexport function getTopicsFromPaths(paths: string[]): string[] {\n  return uniq(\n    filterMap(paths, (path) => {\n      const rosPath = parseRosPath(path);\n      return rosPath ? rosPath.topicName : undefined;\n    })\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport Interactions from \"./Interactions\";\n\nexport * from \"./Interactions\";\nexport { default as InteractionContextMenu } from \"./InteractionContextMenu\";\nexport { default as GlobalVariableLink, UnlinkGlobalVariables } from \"./GlobalVariableLink\";\nexport * from \"./types\";\n\nexport default Interactions;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { omit, isEqual, difference } from \"lodash\";\nimport microMemoize from \"micro-memoize\";\nimport { type MouseEventObject } from \"regl-worldview\";\n\nimport { type FieldReader, Float32Reader, Int32Reader, Uint16Reader, Int16Reader, Uint8Reader } from \"./Readers\";\nimport log from \"webviz-core/src/panels/ThreeDimensionalViz/logger\";\nimport {\n  DEFAULT_FLAT_COLOR,\n  type PointCloudSettings,\n  type ColorMode,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor\";\nimport type { PointCloud2, PointField } from \"webviz-core/src/types/Messages\";\nimport { lerp } from \"webviz-core/src/util\";\n\nconst EMPTY_ARRAY = [];\nconst REQUIRED_FLOAT32_FIELDS = [\"x\", \"y\", \"z\"];\nexport const DATATYPE = {\n  uint8: 2,\n  uint16: 4,\n  int16: 3,\n  int32: 5,\n  float32: 7,\n};\n\nexport type FieldOffsetsAndReaders = {\n  [name: string]: { datatype: string, offset: number, reader: ?FieldReader },\n};\n\nexport function getReader(datatype: number, offset: number) {\n  switch (datatype) {\n    case DATATYPE.float32:\n      return new Float32Reader(offset);\n    case DATATYPE.uint8:\n      return new Uint8Reader(offset);\n    case DATATYPE.uint16:\n      return new Uint16Reader(offset);\n    case DATATYPE.int16:\n      return new Int16Reader(offset);\n    case DATATYPE.int32:\n      return new Int32Reader(offset);\n    default:\n      log.error(\"Unsupported datatype\", datatype);\n  }\n}\n\nexport function getFieldOffsetsAndReaders(fields: $ReadOnlyArray<PointField>): FieldOffsetsAndReaders {\n  const result = {};\n  for (const { name, datatype, offset = 0 } of fields) {\n    result[name] = { datatype, offset, reader: getReader(datatype, offset) };\n  }\n  return result;\n}\n\nexport function parseHexColor(color: string) {\n  console.assert(color.length === 7);\n  return parseInt(color.slice(1), 16);\n}\n\nexport function mapMarker(marker: PointCloud2 & { settings?: PointCloudSettings }, decodeAllFields?: boolean) {\n  // http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html\n  const { fields, data, width, row_step, height, point_step, settings = {}, is_bigendian } = marker;\n  const offsetsAndReaders = getFieldOffsetsAndReaders(fields);\n\n  for (const float32Field of REQUIRED_FLOAT32_FIELDS) {\n    if (!offsetsAndReaders[float32Field]) {\n      log.error(`point cloud is missing field '${float32Field}'`);\n      return { points: [], colors: [] };\n    } else if (offsetsAndReaders[float32Field].datatype !== DATATYPE.float32) {\n      log.error(`expected '${float32Field}' to be a float32 field (found ${offsetsAndReaders[float32Field].datatype})`);\n      return { points: [], colors: [] };\n    }\n  }\n  const {\n    x: { offset: xOffset },\n    y: { offset: yOffset },\n    z: { offset: zOffset },\n    rgb: { offset: rgbOffset } = {},\n  } = offsetsAndReaders;\n\n  const colorMode: ColorMode = settings.colorMode\n    ? settings.colorMode\n    : rgbOffset != null\n    ? { mode: \"rgb\" }\n    : { mode: \"flat\", flatColor: DEFAULT_FLAT_COLOR };\n\n  const points = new Uint8Array(width * height * 12);\n  const colors = new Uint8Array(width * height * 3);\n\n  let autoMinValue = true;\n  let autoMaxValue = true;\n  let minColorFieldValue = Infinity;\n  let maxColorFieldValue = -Infinity;\n  if (colorMode.mode === \"gradient\" || colorMode.mode === \"rainbow\") {\n    if (colorMode.minValue != null) {\n      autoMinValue = false;\n      minColorFieldValue = colorMode.minValue;\n    }\n    if (colorMode.maxValue != null) {\n      autoMaxValue = false;\n      maxColorFieldValue = colorMode.maxValue;\n    }\n  }\n\n  // the field \"rgb\" has a special parsing code path - it's packed into the first three bytes of a float32\n  // so if the colorField is rgb don't use a reader - its faster to just read the value directly\n  // it also is the default rendering option if no custom colorField is specified\n  const useRGB = colorMode.mode === \"rgb\" && rgbOffset != null;\n\n  const useFlatColor = colorMode.mode === \"flat\";\n  const parsedFlatColor = colorMode.mode === \"flat\" ? parseHexColor(colorMode.flatColor) : 0;\n  const flatColorR = (parsedFlatColor >> 16) & 0xff;\n  const flatColorG = (parsedFlatColor >> 8) & 0xff;\n  const flatColorB = parsedFlatColor & 0xff;\n\n  const colorFieldReader =\n    colorMode.mode === \"rainbow\" || colorMode.mode === \"gradient\"\n      ? offsetsAndReaders[colorMode.colorField]?.reader\n      : null;\n  if (colorMode.colorField && !colorFieldReader) {\n    log.warn(`color field ${colorMode.colorField} not found in point cloud`);\n  }\n  const colorFieldValues = colorFieldReader ? new Float64Array(width * height) : EMPTY_ARRAY;\n\n  let pointCount = 0;\n  for (let row = 0; row < height; row++) {\n    for (let col = 0; col < width; col++) {\n      const pointDataStart = row * row_step + col * point_step;\n      const x1 = data[pointDataStart + xOffset];\n      const x2 = data[pointDataStart + xOffset + 1];\n      const x3 = data[pointDataStart + xOffset + 2];\n      const x4 = data[pointDataStart + xOffset + 3];\n\n      // if the value is NaN then don't count this point\n      // this is to support non-dense point clouds\n      // https://answers.ros.org/question/234455/pointcloud2-and-pointfield/\n      if ((x4 & 0x7f) === 0x7f && (x3 & 0x80) === 0x80) {\n        continue;\n      }\n\n      const pointStart = pointCount * 12;\n\n      // add x point\n      points[pointStart] = x1;\n      points[pointStart + 1] = x2;\n      points[pointStart + 2] = x3;\n      points[pointStart + 3] = x4;\n\n      // add y point\n      points[pointStart + 4] = data[pointDataStart + yOffset];\n      points[pointStart + 5] = data[pointDataStart + yOffset + 1];\n      points[pointStart + 6] = data[pointDataStart + yOffset + 2];\n      points[pointStart + 7] = data[pointDataStart + yOffset + 3];\n\n      // add z point\n      points[pointStart + 8] = data[pointDataStart + zOffset];\n      points[pointStart + 9] = data[pointDataStart + zOffset + 1];\n      points[pointStart + 10] = data[pointDataStart + zOffset + 2];\n      points[pointStart + 11] = data[pointDataStart + zOffset + 3];\n\n      // add color\n      const colorStart = pointCount * 3;\n      if (useFlatColor) {\n        colors[colorStart] = flatColorR;\n        colors[colorStart + 1] = flatColorG;\n        colors[colorStart + 2] = flatColorB;\n      } else if (useRGB) {\n        // In case of little endianess, colors are in BGR format\n        colors[colorStart + 0] = data[pointDataStart + rgbOffset + (is_bigendian ? 0 : 2)];\n        colors[colorStart + 1] = data[pointDataStart + rgbOffset + 1];\n        colors[colorStart + 2] = data[pointDataStart + rgbOffset + (is_bigendian ? 2 : 0)];\n      } else if (colorFieldReader) {\n        const colorFieldValue = colorFieldReader.read(data, pointDataStart);\n        colorFieldValues[pointCount] = colorFieldValue;\n        if (!Number.isNaN(colorFieldValue)) {\n          if (autoMinValue) {\n            minColorFieldValue = Math.min(minColorFieldValue, colorFieldValue);\n          }\n          if (autoMaxValue) {\n            maxColorFieldValue = Math.max(maxColorFieldValue, colorFieldValue);\n          }\n        }\n      } else {\n        throw new Error(`unexpected color mode ${colorMode.mode}`);\n      }\n      pointCount++;\n    }\n  }\n\n  if (colorFieldReader) {\n    // if min and max are equal set the diff to something huge\n    // so when we divide by it we effectively get zero.\n    // taken from http://docs.ros.org/jade/api/rviz/html/c++/point__cloud__transformers_8cpp_source.html\n    // line 132\n    const colorFieldRange = maxColorFieldValue - minColorFieldValue || Infinity;\n\n    // we need to loop through colorField values again now that we know min/max\n    // and assign a color to the pointCloud for each colorField value\n\n    // use custom gradient\n    if (colorMode.mode === \"gradient\") {\n      const parsedMinColor = parseHexColor(colorMode.minColor);\n      const parsedMaxColor = parseHexColor(colorMode.maxColor);\n      for (let i = 0; i < pointCount; i++) {\n        const offset = i * 3;\n        const val = colorFieldValues[i];\n        const pct = Math.max(0, Math.min((val - minColorFieldValue) / colorFieldRange, 1));\n\n        const minR = (parsedMinColor >> 16) & 0xff;\n        const minG = (parsedMinColor >> 8) & 0xff;\n        const minB = parsedMinColor & 0xff;\n\n        const maxR = (parsedMaxColor >> 16) & 0xff;\n        const maxG = (parsedMaxColor >> 8) & 0xff;\n        const maxB = parsedMaxColor & 0xff;\n\n        colors[offset] = lerp(pct, minR, maxR);\n        colors[offset + 1] = lerp(pct, minG, maxG);\n        colors[offset + 2] = lerp(pct, minB, maxB);\n      }\n    }\n    // use rainbow\n    else if (colorMode.mode === \"rainbow\") {\n      for (let i = 0; i < pointCount; i++) {\n        const offset = i * 3;\n        const val = colorFieldValues[i];\n        const pct = Math.max(0, Math.min((val - minColorFieldValue) / colorFieldRange, 1));\n        setRainbowColor(colors, offset, pct);\n      }\n    } else {\n      throw new Error(`unexpected color mode ${colorMode.mode}`);\n    }\n  }\n\n  return {\n    ...marker,\n    points: new Float32Array(points.buffer, 0, pointCount * 3),\n    colors,\n  };\n}\n\nexport type ClickedInfo = {\n  clickedPoint: number[],\n  clickedPointColor?: number[],\n  additionalFieldValues?: { [name: string]: ?number },\n};\n\n// extract clicked point's position, color and additional field values to display in the UI\nexport function getClickedInfo(maybeFullyDecodedMarker: MouseEventObject, instanceIndex: ?number): ?ClickedInfo {\n  const { points, colors, fields, ...rest } = maybeFullyDecodedMarker;\n  const allPoints: number[] = points || [];\n  let result: ?ClickedInfo;\n  if (allPoints.length && instanceIndex != null && instanceIndex >= 0 && instanceIndex * 3 < allPoints.length) {\n    result = { clickedPoint: [] };\n    const baseIdx = instanceIndex * 3;\n    result.clickedPoint.push(allPoints[baseIdx]);\n    result.clickedPoint.push(allPoints[baseIdx + 1]);\n    result.clickedPoint.push(allPoints[baseIdx + 2]);\n    const allColors: number[] = colors || [];\n    const baseColorR = allColors[baseIdx];\n    const baseColorG = allColors[baseIdx + 1];\n    const baseColorB = allColors[baseIdx + 2];\n    if (baseColorR && baseColorG && baseColorB) {\n      result.clickedPointColor = [baseColorR, baseColorG, baseColorB, 1];\n    }\n    const additionalField = getAdditionalFieldNames(fields);\n    if (additionalField.length) {\n      result.additionalFieldValues = additionalField.reduce((memo, fieldName) => {\n        if (rest[fieldName]) {\n          memo[fieldName] = rest[fieldName][instanceIndex];\n        }\n        return memo;\n      }, {});\n    }\n  }\n  return result;\n}\n\nexport function getAdditionalFieldNames(fields: $ReadOnlyArray<PointField>): string[] {\n  const allFields = fields.map((field) => field.name);\n  return difference(allFields, [\"rgb\", \"x\", \"y\", \"z\"]);\n}\n\nexport function decodeAdditionalFields(marker: PointCloud2): { [fieldName: string]: number[] } {\n  const { fields, data, width, row_step, height, point_step } = marker;\n  const offsets = getFieldOffsetsAndReaders(fields);\n  if (!offsets) {\n    return {};\n  }\n\n  let pointCount = 0;\n  const additionalField = getAdditionalFieldNames(fields);\n  const otherFieldsValues = additionalField.reduce((memo, name) => {\n    memo[name] = new Array(width * height);\n    return memo;\n  }, {});\n  for (let row = 0; row < height; row++) {\n    const dataOffset = row * row_step;\n    for (let col = 0; col < width; col++) {\n      const dataStart = col * point_step + dataOffset;\n      for (const fieldName of additionalField) {\n        const reader = offsets[fieldName].reader;\n        if (reader) {\n          const fieldValue = reader.read(data, dataStart);\n          otherFieldsValues[fieldName][pointCount] = fieldValue;\n        }\n      }\n      // increase point count by 1\n      pointCount++;\n    }\n  }\n\n  return {\n    ...omit(marker, \"data\"), // no need to include data since all fields have been decoded\n    ...otherFieldsValues,\n  };\n}\n\n// taken from http://docs.ros.org/jade/api/rviz/html/c++/point__cloud__transformers_8cpp_source.html\n// line 47\nexport function setRainbowColor(colors: Uint8Array | number[], offset: number, pct: number) {\n  const h = (1 - pct) * 5.0 + 1.0;\n  const i = Math.floor(h);\n  let f = h % 1.0;\n  // if i is even\n  if ((i & 1) === 0) {\n    f = 1 - f;\n  }\n  const n = 1 - f;\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  if (i <= 1) {\n    r = n;\n    g = 0;\n    b = 1;\n  } else if (i === 2) {\n    r = 0;\n    g = n;\n    b = 1;\n  } else if (i === 3) {\n    r = 0;\n    g = 1;\n    b = n;\n  } else if (i === 4) {\n    r = n;\n    g = 1;\n    b = 0;\n  } else {\n    r = 1;\n    g = n;\n    b = 0;\n  }\n  colors[offset] = r * 255;\n  colors[offset + 1] = g * 255;\n  colors[offset + 2] = b * 255;\n}\n\n// Compare `data` field by reference because the same marker msg contains the same binary data,\n// and `settings` field by deep-equality check since it's recreated whenever Layout re-renders.\nconst isPointCloudEqual = (a, b) => {\n  return a.data === b.data && isEqual(a.settings, b.settings);\n};\n\nexport const memoizedMapMarker = microMemoize(mapMarker, { isEqual: isPointCloudEqual, maxSize: 30 });\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Layout.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Layout.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Layout.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nexport function isTypicalFilterName(name: string) {\n  return /^id$|_id$|I[dD]$/.test(name);\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport cx from \"classnames\";\nimport { maxBy } from \"lodash\";\nimport React, { PureComponent } from \"react\";\nimport ReactAutocomplete from \"react-autocomplete\";\nimport { createPortal } from \"react-dom\";\nimport textWidth from \"text-width\";\n\nimport styles from \"./Autocomplete.module.scss\";\nimport fuzzyFilter from \"webviz-core/src/util/fuzzyFilter\";\n\nconst fontFamily = \"'Inter UI', -apple-system, BlinkMacSystemFont, sans-serif\";\nconst fontSize = 12;\nfunction measureText(text: string): number {\n  return textWidth(text, { family: fontFamily, size: fontSize }) + 3;\n}\n\nconst rowHeight = parseInt(styles.rowHeight);\n\n// <Autocomplete> is a Webviz-specific autocomplete with support for things like multiple\n// autocompletes that seamlessly transition into each other, e.g. when building more complex\n// strings like in the Plot panel.\n//\n// The multiple autocompletes doesn't work super well with react-autocomplete, so we have to\n// reimplement some of its behaviour to make things work properly, such as the `_ignoreBlur`\n// stuff. Mostly, though, we can lean on react-autocomplete to do the heavy lifting.\n//\n// For future reference, the reason `<ReactAutocomplete>` (and we) has to do `_ignoreBlur`, is that\n// when you select an item from the autocomplete menu by clicking, it first triggers a `blur` event\n// on the `<input>`, before triggering a `click` event. If we wouldn't ignore that `blur` event,\n// we'd hide the menu before the `click` event even has a chance of getting fired. So the `blur`\n// event has to be ignored, and the subsequent `focus` event also has to be ignored since it's kind\n// of a \"false\" focus event. (In our case we just don't bother with ignoring the `focus` event since\n// it doesn't cause any problems.)\ntype AutocompleteProps = {|\n  items: mixed[],\n  getItemValue: (mixed) => string,\n  getItemText: (mixed) => string,\n  filterText?: string,\n  value?: string,\n  selectedItem: ?mixed,\n  onChange: (SyntheticInputEvent<HTMLInputElement>, string) => void,\n  onSelect: (string, mixed, Autocomplete) => void, // eslint-disable-line no-use-before-define\n  onBlur?: () => void,\n  hasError: ?boolean,\n  autocompleteKey?: ?string,\n  placeholder?: ?string,\n  autoSize?: boolean,\n  sortWhenFiltering: boolean,\n  clearOnFocus: boolean, // only for uncontrolled use (when onChange is not set)\n  minWidth: number,\n  menuStyle?: any,\n  inputStyle?: any,\n  disableAutoSelect?: boolean,\n|};\n\ntype AutocompleteState = {|\n  focused: boolean,\n  showAllItems: boolean,\n  value?: string,\n|};\n\nfunction defaultGetText(name: string) {\n  return function(item: mixed) {\n    if (typeof item === \"string\") {\n      return item;\n    } else if (item && typeof item === \"object\" && typeof item.value === \"string\") {\n      return item.value;\n    }\n    throw new Error(`you need to provide an implementation of ${name}`);\n  };\n}\n\nexport default class Autocomplete extends PureComponent<AutocompleteProps, AutocompleteState> {\n  _autocomplete: { current: null | Autocomplete };\n  _ignoreFocus: boolean = false;\n  _ignoreBlur: boolean = false;\n\n  static defaultProps = {\n    getItemText: defaultGetText(\"getItemText\"),\n    getItemValue: defaultGetText(\"getItemValue\"),\n    sortWhenFiltering: true,\n    clearOnFocus: false,\n    minWidth: 100,\n  };\n\n  constructor(props: AutocompleteProps) {\n    super(props);\n    this._autocomplete = React.createRef<ReactAutocomplete>();\n    this.state = { focused: false, showAllItems: false };\n  }\n\n  // When we lose the scrollbar, we can safely set `showAllItems: false` again, because all items\n  // will be in view anyway. We cannot set it to false earlier, as `<ReactAutocomplete>` may have a\n  // reference to the highlighted element, which can cause an error if we hide it.\n  componentDidUpdate() {\n    if (\n      this._autocomplete.current &&\n      this._autocomplete.current.refs.menu &&\n      this._autocomplete.current.refs.menu.scrollHeight <= this._autocomplete.current.refs.menu.clientHeight &&\n      this.state.showAllItems\n    ) {\n      this.setState({ showAllItems: false });\n    }\n  }\n\n  setSelectionRange(selectionStart: number, selectionEnd: number) {\n    if (this._autocomplete.current && this._autocomplete.current.refs.input) {\n      this._autocomplete.current.refs.input.setSelectionRange(selectionStart, selectionEnd);\n    }\n    this.setState({ focused: true });\n  }\n\n  focus() {\n    if (this._autocomplete.current && this._autocomplete.current.refs.input) {\n      this._autocomplete.current.refs.input.focus();\n    }\n  }\n\n  blur() {\n    if (this._autocomplete.current && this._autocomplete.current.refs.input) {\n      this._autocomplete.current.refs.input.blur();\n    }\n    this._ignoreBlur = false;\n    this.setState({ focused: false });\n    if (this.props.onBlur) {\n      this.props.onBlur();\n    }\n  }\n\n  _onFocus = () => {\n    if (this._ignoreFocus) {\n      return;\n    }\n    const { clearOnFocus } = this.props;\n    if (\n      this._autocomplete.current &&\n      this._autocomplete.current.refs.input &&\n      document.activeElement === this._autocomplete.current.refs.input\n    ) {\n      this.setState({ focused: true });\n      if (clearOnFocus) {\n        this.setState({ value: \"\" });\n      }\n    }\n  };\n\n  // Wait for a mouseup event, and check in the mouseup event if anything was actually selected, or\n  // if it just was a click without a drag. In the latter case, select everything. This is very\n  // similar to how, say, the browser bar in Chrome behaves.\n  _onMouseDown = (event: SyntheticMouseEvent<HTMLInputElement>) => {\n    if (this.props.disableAutoSelect) {\n      return;\n    }\n    if (this.state.focused) {\n      return;\n    }\n    const onMouseUp = (e: MouseEvent) => {\n      document.removeEventListener(\"mouseup\", onMouseUp, true);\n\n      if (\n        this._autocomplete.current &&\n        this._autocomplete.current.refs.input &&\n        // Make sure that the element is actually still focused.\n        document.activeElement === this._autocomplete.current.refs.input\n      ) {\n        if (\n          this._autocomplete.current.refs.input.selectionStart === this._autocomplete.current.refs.input.selectionEnd\n        ) {\n          this._autocomplete.current.refs.input.select();\n          e.stopPropagation();\n          e.preventDefault();\n        }\n        // Also set `state.focused` for good measure, since we know here that we're focused.\n        this.setState({ focused: true });\n      }\n    };\n    document.addEventListener(\"mouseup\", onMouseUp, true);\n  };\n\n  _onBlur = () => {\n    if (this._ignoreBlur) {\n      return;\n    }\n    if (\n      this._autocomplete.current &&\n      this._autocomplete.current.refs.input &&\n      document.activeElement === this._autocomplete.current.refs.input\n    ) {\n      // Bail if we actually still are focused.\n      return;\n    }\n    this.setState({ focused: false, value: undefined });\n    if (this.props.onBlur) {\n      this.props.onBlur();\n    }\n  };\n\n  _onChange = (event: SyntheticInputEvent<HTMLInputElement>) => {\n    if (this.props.onChange) {\n      this.props.onChange(event, event.target.value);\n    } else {\n      this.setState({ value: event.target.value });\n    }\n  };\n\n  // Make sure the input field gets focused again after selecting, in case we're doing multiple\n  // autocompletes. We pass in `this` to `onSelect` in case the user of this component wants to call\n  // `blur()`.\n  _onSelect = (value: string, item: any) => {\n    if (this._autocomplete.current && this._autocomplete.current.refs.input) {\n      this._autocomplete.current.refs.input.focus();\n      this.setState({ focused: true, value: undefined }, () => {\n        this.props.onSelect(value, item, this);\n      });\n    }\n  };\n\n  // When scrolling down by even a little bit, just show all items. In most cases people won't\n  // do this and instead will type more text to narrow down their autocomplete.\n  _onScroll = (event: SyntheticMouseEvent<HTMLDivElement>) => {\n    if (event.currentTarget.scrollTop > 0) {\n      // Never set `showAllItems` to false here, as `<ReactAutocomplete>` may have a reference to\n      // the highlighted element. We only set it back to false in `componentDidUpdate`.\n      this.setState({ showAllItems: true });\n    }\n  };\n\n  _onKeyDown = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Escape\" || (event.key === \"Enter\" && this.props.items.length === 0)) {\n      this.blur();\n    }\n  };\n\n  render() {\n    const {\n      autocompleteKey,\n      autoSize,\n      getItemValue,\n      getItemText,\n      items,\n      placeholder,\n      selectedItem,\n      value = this.state.value ?? (selectedItem ? getItemText(selectedItem) : null),\n      filterText = value,\n      sortWhenFiltering,\n      minWidth,\n      menuStyle = {},\n      inputStyle = {},\n    } = this.props;\n    const autocompleteItems = fuzzyFilter(items, filterText, getItemText, sortWhenFiltering);\n\n    const { hasError = autocompleteItems.length === 0 } = this.props;\n\n    const open = this.state.focused && autocompleteItems.length > 0;\n    if (!open) {\n      this._ignoreBlur = false;\n    }\n\n    const selectedItemValue = selectedItem != null ? getItemValue(selectedItem) : null;\n    return (\n      <ReactAutocomplete\n        open={open}\n        items={autocompleteItems}\n        getItemValue={getItemValue}\n        renderItem={(item, isHighlighted) => {\n          const itemValue = getItemValue(item);\n          return (\n            <div\n              key={itemValue}\n              data-highlighted={isHighlighted}\n              data-test-auto-item\n              className={cx(styles.autocompleteItem, {\n                [styles.highlighted]: isHighlighted,\n                [styles.selected]: selectedItemValue != null && itemValue === selectedItemValue,\n              })}>\n              {getItemText(item)}\n            </div>\n          );\n        }}\n        onChange={this._onChange}\n        onSelect={this._onSelect}\n        value={value || \"\"}\n        inputProps={{\n          className: cx(styles.input, { [styles.inputError]: hasError }),\n          autoCorrect: \"off\",\n          autoCapitalize: \"off\",\n          spellCheck: \"false\",\n          placeholder,\n          style: {\n            ...inputStyle,\n            fontFamily,\n            fontSize,\n            width: autoSize ? Math.max(measureText(value || placeholder || \"\"), minWidth) : \"100%\",\n          },\n          onFocus: this._onFocus,\n          onBlur: this._onBlur,\n          onMouseDown: this._onMouseDown,\n          onKeyDown: this._onKeyDown,\n        }}\n        renderMenu={(menuItems, val, style) => {\n          // Hacky virtualization. Either don't show all menuItems (typical when the user is still\n          // typing in the autcomplete), or do show them all (once the user scrolls). Not the most\n          // sophisticated, but good enough!\n          const maxNumberOfItems = Math.ceil(window.innerHeight / rowHeight + 10);\n          const menuItemsToShow =\n            this.state.showAllItems || menuItems.length <= maxNumberOfItems * 2\n              ? menuItems\n              : menuItems.slice(0, maxNumberOfItems).concat(menuItems.slice(-maxNumberOfItems));\n\n          // The longest string might not be the widest (e.g. \"|||\" vs \"www\"), but this is\n          // quite a bit faster, so we throw in a nice padding and call it good enough! :-)\n          const width = measureText(getItemText(maxBy(autocompleteItems, (item) => getItemText(item).length))) + 50;\n          const maxHeight = `calc(100vh - 10px - ${style.top}px)`;\n\n          return (\n            <div\n              className={styles.root}\n              key={autocompleteKey /* So we scroll to the top when selecting */}\n              style={\n                // If the autocomplete would fall off the screen, pin it to the right.\n                style.left + width <= window.innerWidth\n                  ? { ...menuStyle, ...style, width, maxWidth: \"100%\", maxHeight }\n                  : { ...menuStyle, ...style, width, maxWidth: \"100%\", maxHeight, left: \"auto\", right: 0 }\n              }\n              onScroll={this._onScroll}>\n              {/* Have to wrap onMouseEnter and onMouseLeave in a separate <div>, as react-autocomplete\n               * would override them on the root <div>. */}\n              <div onMouseEnter={() => (this._ignoreBlur = true)} onMouseLeave={() => (this._ignoreBlur = false)}>\n                {menuItemsToShow}\n              </div>\n            </div>\n          );\n        }}\n        renderMenuWrapper={(menu) => document.body && createPortal(menu, document.body)}\n        ref={this._autocomplete}\n        wrapperStyle={{ flex: \"1 1 auto\", overflow: \"hidden\", marginLeft: 6 }}\n      />\n    );\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { keyBy } from \"lodash\";\nimport memoize from \"micro-memoize\";\n\nimport {\n  type LinkedGlobalVariables,\n  type LinkedGlobalVariable,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/useLinkedGlobalVariables\";\n\nexport function getTopicWithPath({ topic, markerKeyPath }: { topic: string, markerKeyPath: string[] }): string {\n  return `${topic}.${getPath(markerKeyPath)}`;\n}\n\nexport function getPath(markerKeyPath: string[]): string {\n  return [...markerKeyPath].reverse().join(\".\");\n}\n\nexport function getLinkedGlobalVariableKeyByTopicWithPath(\n  linkedGlobalVariables: LinkedGlobalVariables\n): { [string]: LinkedGlobalVariable } {\n  return keyBy(linkedGlobalVariables, ({ topic, markerKeyPath }) => getTopicWithPath({ topic, markerKeyPath }));\n}\n\nconst memoizedGetLinkedVariablesKeyByTopicWithPath = memoize(getLinkedGlobalVariableKeyByTopicWithPath);\n\nexport function getLinkedGlobalVariable({\n  topic,\n  markerKeyPath,\n  linkedGlobalVariables,\n}: {\n  topic: string,\n  markerKeyPath: string[],\n  linkedGlobalVariables: LinkedGlobalVariables,\n}): ?LinkedGlobalVariable {\n  const linkedGlobalVariablesKeyByTopicWithPath = memoizedGetLinkedVariablesKeyByTopicWithPath(linkedGlobalVariables);\n  const topicWithPath = getTopicWithPath({ topic, markerKeyPath });\n  return linkedGlobalVariablesKeyByTopicWithPath[topicWithPath];\n}\n\nfunction getLinkedGlobalVariablesKeyByName(linkedGlobalVariables: LinkedGlobalVariables) {\n  return linkedGlobalVariables.reduce((memo, { name, topic, markerKeyPath }) => {\n    if (!memo[name]) {\n      memo[name] = [];\n    }\n    memo[name].push({ topic, markerKeyPath, name });\n    return memo;\n  }, {});\n}\n\nexport const memoizedGetLinkedGlobalVariablesKeyByName = memoize(getLinkedGlobalVariablesKeyByName);\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nimport { CommonPointSettings, CommonDecaySettings, type TopicSettingsEditorProps } from \".\";\nimport { SLabel, SInput } from \"./common\";\nimport ColorPicker from \"webviz-core/src/components/ColorPicker\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport GradientPicker from \"webviz-core/src/components/GradientPicker\";\nimport Radio from \"webviz-core/src/components/Radio\";\nimport SegmentedControl from \"webviz-core/src/components/SegmentedControl\";\nimport { Select, Option } from \"webviz-core/src/components/Select\";\nimport type { PointCloud2 } from \"webviz-core/src/types/Messages\";\n\nexport type ColorMode =\n  | {| mode: \"rgb\" |}\n  | {| mode: \"flat\", flatColor: string |}\n  | {|\n      mode: \"gradient\",\n      colorField: string,\n      minColor: string,\n      maxColor: string,\n      minValue?: number,\n      maxValue?: number,\n    |}\n  | {|\n      mode: \"rainbow\",\n      colorField: string,\n      minValue?: number,\n      maxValue?: number,\n    |};\n\nexport const DEFAULT_FLAT_COLOR = \"#ffffff\";\n\nexport type PointCloudSettings = {|\n  pointSize?: ?number,\n  pointShape?: ?string,\n  decayTime?: ?number,\n\n  colorMode: ?ColorMode,\n|};\n\nconst SValueRangeInput = styled(SInput).attrs({ type: \"number\", placeholder: \"auto\" })`\n  width: 0px;\n  margin-left: 8px;\n  flex: 1 1 auto;\n`;\n\nconst RainbowText = React.memo(function RainbowText({ children: text }: { children: string }) {\n  const result = [];\n  for (let i = 0; i < text.length; i++) {\n    result.push(\n      // Rainbow gradient goes from magenta (300) to red (0)\n      <span key={i} style={{ color: `hsl(${300 - 300 * (i / (text.length - 1))}, 100%, 60%)` }}>\n        {text[i]}\n      </span>\n    );\n  }\n  return result;\n});\n\nexport default function PointCloudSettingsEditor(props: TopicSettingsEditorProps<PointCloud2, PointCloudSettings>) {\n  const { message, settings = {}, onFieldChange, onSettingsChange } = props;\n\n  const onColorModeChange = useCallback(\n    (newValue: ?ColorMode | ((?ColorMode) => ?ColorMode)) => {\n      onSettingsChange((newSettings) => ({\n        ...newSettings,\n        colorMode: typeof newValue === \"function\" ? newValue(newSettings.colorMode) : newValue,\n      }));\n    },\n    [onSettingsChange]\n  );\n\n  const hasRGB = message && message.fields && message.fields.some(({ name }) => name === \"rgb\");\n  const defaultColorField = message && message.fields && message.fields.find(({ name }) => name !== \"rgb\")?.name;\n  const colorMode: ColorMode = settings.colorMode\n    ? settings.colorMode\n    : hasRGB\n    ? { mode: \"rgb\" }\n    : { mode: \"flat\", flatColor: DEFAULT_FLAT_COLOR };\n\n  return (\n    <Flex col>\n      <CommonPointSettings settings={settings} defaultPointSize={2} onFieldChange={onFieldChange} />\n      <CommonDecaySettings settings={settings} onFieldChange={onFieldChange} />\n\n      <SLabel>Color by</SLabel>\n      <Flex row style={{ justifyContent: \"space-between\", marginBottom: \"8px\" }}>\n        <SegmentedControl\n          selectedId={colorMode.mode === \"flat\" ? \"flat\" : \"data\"}\n          onChange={(id) =>\n            onColorModeChange((newColorMode) =>\n              id === \"flat\"\n                ? {\n                    mode: \"flat\",\n                    flatColor:\n                      newColorMode && newColorMode.mode === \"gradient\" ? newColorMode.minColor : DEFAULT_FLAT_COLOR,\n                  }\n                : hasRGB\n                ? { mode: \"rgb\" }\n                : defaultColorField\n                ? { mode: \"rainbow\", colorField: defaultColorField }\n                : null\n            )\n          }\n          options={[{ id: \"flat\", label: \"Flat\" }, { id: \"data\", label: \"Point data\" }]}\n        />\n\n        <Flex row style={{ margin: \"2px 0 2px 12px\", alignItems: \"center\" }}>\n          {colorMode.mode === \"flat\" ? (\n            // For flat mode, pick a single color\n            <ColorPicker\n              color={colorMode.flatColor}\n              onChange={(flatColor) => onColorModeChange({ mode: \"flat\", flatColor })}\n            />\n          ) : (\n            // Otherwise, choose a field from the point cloud to color by\n            <Select\n              text={colorMode.mode === \"rgb\" ? \"rgb\" : colorMode.colorField}\n              value={colorMode.mode === \"rgb\" ? \"rgb\" : colorMode.colorField}\n              onChange={(value) =>\n                onColorModeChange(\n                  (newColorMode): ColorMode => {\n                    if (value === \"rgb\") {\n                      return { mode: \"rgb\" };\n                    }\n                    if (newColorMode && newColorMode.mode === \"gradient\") {\n                      return { ...newColorMode, colorField: value };\n                    }\n                    if (newColorMode && newColorMode.mode === \"rainbow\") {\n                      return { ...newColorMode, colorField: value };\n                    }\n                    return { mode: \"rainbow\", colorField: value };\n                  }\n                )\n              }>\n              {!message\n                ? []\n                : message.fields.map(({ name }) => (\n                    <Option key={name} value={name}>\n                      {name}\n                    </Option>\n                  ))}\n            </Select>\n          )}\n        </Flex>\n      </Flex>\n\n      {(colorMode.mode === \"gradient\" || colorMode.mode === \"rainbow\") && (\n        <Flex col style={{ marginBottom: \"8px\" }}>\n          <SLabel>Value range</SLabel>\n          <Flex row style={{ marginLeft: \"8px\" }}>\n            <Flex row style={{ flex: \"1 1 100%\", alignItems: \"baseline\", marginRight: \"20px\" }}>\n              Min\n              <SValueRangeInput\n                value={colorMode.minValue ?? \"\"}\n                onChange={({ target: { value } }) =>\n                  onColorModeChange((newColorMode: any) => ({\n                    ...newColorMode,\n                    minValue: value === \"\" ? null : +value,\n                  }))\n                }\n              />\n            </Flex>\n            <Flex row style={{ flex: \"1 1 100%\", alignItems: \"baseline\" }}>\n              Max\n              <SValueRangeInput\n                value={colorMode.maxValue ?? \"\"}\n                onChange={({ target: { value } }) =>\n                  onColorModeChange((newColorMode: any) => ({\n                    ...newColorMode,\n                    maxValue: value === \"\" ? null : +value,\n                  }))\n                }\n              />\n            </Flex>\n          </Flex>\n          <Radio\n            selectedId={colorMode.mode}\n            onChange={(id) =>\n              onColorModeChange(({ colorField, minValue, maxValue }: any) =>\n                id === \"rainbow\"\n                  ? { mode: \"rainbow\", colorField, minValue, maxValue }\n                  : { mode: \"gradient\", colorField, minValue, maxValue, minColor: \"#0000ff\", maxColor: \"#ff0000\" }\n              )\n            }\n            options={[\n              {\n                id: \"rainbow\",\n                label: colorMode.mode === \"rainbow\" ? <RainbowText>Rainbow</RainbowText> : \"Rainbow\",\n              },\n              { id: \"gradient\", label: \"Custom gradient\" },\n            ]}\n          />\n        </Flex>\n      )}\n      {colorMode.mode === \"gradient\" && (\n        <div style={{ margin: \"8px\" }}>\n          <GradientPicker\n            minColor={colorMode.minColor}\n            maxColor={colorMode.maxColor}\n            onChange={({ minColor, maxColor }) =>\n              onColorModeChange((newColorMode) => ({ mode: \"gradient\", ...newColorMode, minColor, maxColor }))\n            }\n          />\n        </div>\n      )}\n    </Flex>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { upperFirst } from \"lodash\";\nimport React, { useCallback, type ComponentType } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport { SLabel, SDescription, SInput } from \"./common\";\nimport LaserScanSettingsEditor from \"./LaserScanSettingsEditor\";\nimport MarkerSettingsEditor from \"./MarkerSettingsEditor\";\nimport PointCloudSettingsEditor from \"./PointCloudSettingsEditor\";\nimport PoseSettingsEditor from \"./PoseSettingsEditor\";\nimport styles from \"./TopicSettingsEditor.module.scss\";\nimport ErrorBoundary from \"webviz-core/src/components/ErrorBoundary\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport { Select, Option } from \"webviz-core/src/components/Select\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport { POINT_CLOUD_DATATYPE, POSE_STAMPED_DATATYPE, LASER_SCAN_DATATYPE } from \"webviz-core/src/util/globalConstants\";\n\nexport const LINED_CONVEX_HULL_RENDERING_SETTING = \"LinedConvexHull\";\n\nexport function CommonPointSettings({\n  defaultPointSize,\n  defaultPointShape = \"circle\",\n  settings,\n  onFieldChange,\n}: {\n  defaultPointSize: number,\n  defaultPointShape?: string,\n  settings: {\n    pointSize?: ?number,\n    pointShape?: ?string,\n  },\n  onFieldChange: (name: string, value: any) => void,\n}) {\n  const pointSizeVal = settings.pointSize === undefined ? \"\" : settings.pointSize;\n\n  const pointShape = settings.pointShape;\n  const pointShapeVal = pointShape ? pointShape : defaultPointShape;\n  const pointShapeOpts = [\"circle\", \"square\"].map((field) => (\n    <Option key={field} value={field}>\n      {upperFirst(field)}\n    </Option>\n  ));\n\n  return (\n    <Flex col>\n      <SLabel>Point size</SLabel>\n      <SInput\n        data-test=\"point-size-input\"\n        type=\"number\"\n        placeholder={defaultPointSize.toString()}\n        value={pointSizeVal}\n        min={1}\n        max={50}\n        step={1}\n        onChange={(e) => {\n          const isInputValid = !isNaN(parseFloat(e.target.value));\n          onFieldChange(\"pointSize\", isInputValid ? parseFloat(e.target.value) : undefined);\n        }}\n      />\n\n      <SLabel>Point shape</SLabel>\n      <Select\n        text={upperFirst(pointShapeVal)}\n        value={pointShapeVal}\n        onChange={(value) => onFieldChange(\"pointShape\", value)}>\n        {pointShapeOpts}\n      </Select>\n    </Flex>\n  );\n}\n\nexport function CommonDecaySettings({\n  settings,\n  onFieldChange,\n}: {\n  settings: { decayTime?: ?number },\n  onFieldChange: (name: string, value: any) => any,\n}) {\n  const decayTime = settings.decayTime;\n  const decayTimeValue = decayTime === undefined ? \"\" : decayTime;\n\n  return (\n    <Flex col>\n      <SLabel>Decay time (seconds)</SLabel>\n      <SDescription>When set to 0, only the latest received data will be displayed.</SDescription>\n      <SInput\n        type=\"number\"\n        placeholder=\"0\"\n        value={decayTimeValue}\n        min={0}\n        step={0.1}\n        onChange={(e) => {\n          const isInputValid = !isNaN(parseFloat(e.target.value));\n          onFieldChange(\"decayTime\", isInputValid ? parseFloat(e.target.value) : undefined);\n        }}\n      />\n    </Flex>\n  );\n}\n\nexport type TopicSettingsEditorProps<Msg, Settings: {}> = {|\n  message: ?Msg,\n  settings: Settings,\n  onFieldChange: (name: string, value: any) => void,\n  onSettingsChange: ({} | (({}) => {})) => void,\n|};\n\nexport function topicSettingsEditorForDatatype(datatype: string): ?ComponentType<TopicSettingsEditorProps<any, any>> {\n  const editors = {\n    [POINT_CLOUD_DATATYPE]: PointCloudSettingsEditor,\n    [POSE_STAMPED_DATATYPE]: PoseSettingsEditor,\n    [LASER_SCAN_DATATYPE]: LaserScanSettingsEditor,\n    \"visualization_msgs/Marker\": MarkerSettingsEditor,\n    \"visualization_msgs/MarkerArray\": MarkerSettingsEditor,\n    ...getGlobalHooks().perPanelHooks().ThreeDimensionalViz.topicSettingsEditors,\n  };\n  return editors[datatype];\n}\n\nexport function canEditDatatype(datatype: string) {\n  return topicSettingsEditorForDatatype(datatype) != null;\n}\n\ntype Props = {|\n  topic: Topic,\n  message: any,\n  settings: ?{},\n  onSettingsChange: ({}) => void,\n|};\n\nconst TopicSettingsEditor = React.memo<Props>(function TopicSettingsEditor({\n  topic,\n  message,\n  settings,\n  onSettingsChange,\n}: Props) {\n  const onFieldChange = useCallback(\n    (fieldName: string, value: any) => {\n      onSettingsChange((newSettings) => ({ ...newSettings, [fieldName]: value }));\n    },\n    [onSettingsChange]\n  );\n\n  const Editor = topicSettingsEditorForDatatype(topic.datatype);\n  if (!Editor) {\n    throw new Error(`No topic settings editor available for ${topic.datatype}`);\n  }\n\n  return (\n    <div className={styles.container}>\n      <h3 className={styles.topicName}>{topic.name}</h3>\n      <h4 className={styles.datatype}>\n        <tt>{topic.datatype}</tt>\n      </h4>\n      <ErrorBoundary>\n        <Editor\n          message={message}\n          settings={settings || {}}\n          onFieldChange={onFieldChange}\n          onSettingsChange={onSettingsChange}\n        />\n      </ErrorBoundary>\n      <button onClick={() => onSettingsChange({})}>Reset to defaults</button>\n    </div>\n  );\n});\n\nexport default hot(TopicSettingsEditor);\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { truncate } from \"lodash\";\nimport type { Time } from \"rosbag\";\n\nimport { type DiagnosticsBuffer } from \"webviz-core/src/panels/diagnostics/DiagnosticsHistory\";\nimport type { Header } from \"webviz-core/src/types/Messages\";\n\n// Trim the message if it's too long. We sometimes get crazy massive messages here that can\n// otherwise crash our entire UI. I looked at a bunch of messages manually and they are typically\n// way smaller than 5KB, so this is a very generous maximum. But feel free to increase it more if\n// necessary. Exported for tests.\nexport const MAX_STRING_LENGTH = 5000; // 5KB\n\nexport const LEVELS: { OK: 0, WARN: 1, ERROR: 2, STALE: 3 } = { OK: 0, WARN: 1, ERROR: 2, STALE: 3 };\n\nexport const LEVEL_NAMES = {\n  [0]: \"ok\",\n  [1]: \"warn\",\n  [2]: \"error\",\n  [3]: \"stale\",\n};\n\nopaque type _DiagnosticId = string;\ninterface ToString {\n  toString(): string;\n}\n\nexport type DiagnosticId = _DiagnosticId & ToString;\n\nexport type Level = $Values<typeof LEVELS>;\n\nexport type KeyValue = {| key: string, value: string |};\n\nexport type DiagnosticStatusMessage = {|\n  name: string,\n  hardware_id: string,\n  level: Level,\n  message?: string,\n  values?: KeyValue[],\n|};\n\nexport type DiagnosticInfo = {|\n  status: DiagnosticStatusMessage,\n  stamp: Time,\n  id: DiagnosticId,\n  displayName: string,\n|};\n\nexport type DiagnosticStatusArray = {|\n  header: Header,\n  status: DiagnosticStatusMessage[],\n|};\n\nexport type DiagnosticsById = Map<DiagnosticId, DiagnosticInfo>;\nexport type DiagnosticsByLevel = {| [Level]: DiagnosticsById |};\n\nexport function getDiagnosticId(status: DiagnosticStatusMessage): DiagnosticId {\n  // Remove leading slash from hardware_id if present.\n  let hardware_id = status.hardware_id;\n  if (hardware_id.startsWith(\"/\")) {\n    hardware_id = hardware_id.substring(1);\n  }\n  return `|${hardware_id}|${status.name}|`;\n}\n\nexport function getDisplayName(hardwareId: string, name: string) {\n  if (name.indexOf(hardwareId) === 0) {\n    return name;\n  }\n  return `${hardwareId}: ${name}`;\n}\n\n// ensures the diagnostic status message's name consists of both the hardware id and the name\nexport function computeDiagnosticInfo(status: DiagnosticStatusMessage, stamp: Time): DiagnosticInfo {\n  const displayName = getDisplayName(status.hardware_id, status.name);\n  if (status.values && status.values.some(({ value }) => value.length > MAX_STRING_LENGTH)) {\n    status = {\n      ...status,\n      values: status.values\n        ? status.values.map((kv) =>\n            kv.value.length > MAX_STRING_LENGTH\n              ? { key: kv.key, value: truncate(kv.value, { length: MAX_STRING_LENGTH }) }\n              : kv\n          )\n        : undefined,\n    };\n  }\n\n  return {\n    status,\n    stamp,\n    id: getDiagnosticId(status),\n    displayName,\n  };\n}\n\nexport function getNodesByLevel(buffer: DiagnosticsBuffer, hardwareIdFilter: string, level: any): DiagnosticInfo[] {\n  if (!hardwareIdFilter) {\n    return Array.from(buffer.diagnosticsByLevel[level].values());\n  }\n  const nodeArray = [];\n  buffer.diagnosticsByLevel[level].forEach((value) => {\n    if (value.displayName.startsWith(hardwareIdFilter)) {\n      nodeArray.push(value);\n    }\n  });\n  return nodeArray;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { compact, uniq } from \"lodash\";\nimport memoizeWeak from \"memoize-weak\";\nimport React, { useEffect, useCallback, useMemo, useRef } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport helpContent from \"./index.help.md\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport { type MessageHistoryItemsByPath } from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport { getTopicsFromPaths } from \"webviz-core/src/components/MessagePathSyntax/parseRosPath\";\nimport { useDecodeMessagePathsForMessagesByTopic } from \"webviz-core/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport { getTooltipItemForMessageHistoryItem } from \"webviz-core/src/components/TimeBasedChart\";\nimport { useBlocksByTopic, useDataSourceInfo, useMessagesByTopic } from \"webviz-core/src/PanelAPI\";\nimport type { BasePlotPath, PlotPath } from \"webviz-core/src/panels/Plot/internalTypes\";\nimport PlotChart, { getDatasetsAndTooltips, type PlotDataByPath } from \"webviz-core/src/panels/Plot/PlotChart\";\nimport PlotLegend from \"webviz-core/src/panels/Plot/PlotLegend\";\nimport PlotMenu from \"webviz-core/src/panels/Plot/PlotMenu\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\nimport { useShallowMemo } from \"webviz-core/src/util/hooks\";\n\nexport const plotableRosTypes = [\n  \"bool\",\n  \"int8\",\n  \"uint8\",\n  \"int16\",\n  \"uint16\",\n  \"int32\",\n  \"uint32\",\n  \"int64\",\n  \"uint64\",\n  \"float32\",\n  \"float64\",\n  \"time\",\n  \"duration\",\n  \"string\",\n];\n\nexport type PlotConfig = {\n  paths: PlotPath[],\n  minYValue: string,\n  maxYValue: string,\n  showLegend: boolean,\n  xAxisVal: \"timestamp\" | \"index\" | \"custom\",\n  xAxisPath?: BasePlotPath,\n};\n\nexport function openSiblingPlotPanel(\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n  topicName: string\n) {\n  openSiblingPanel(\n    \"Plot\",\n    (config: PlotConfig) =>\n      ({\n        ...config,\n        paths: uniq(\n          config.paths\n            .concat([{ value: topicName, enabled: true, timestampMethod: \"receiveTime\" }])\n            .filter(({ value }) => value)\n        ),\n      }: PlotConfig)\n  );\n}\n\ntype Props = {\n  config: PlotConfig,\n  saveConfig: ($Shape<PlotConfig>) => void,\n};\n\n// messagePathItems contains the whole parsed message, and we don't need to cache all of that.\n// Instead, throw away everything but what we need (the timestamps).\nconst getPlotDataByPath = (itemsByPath: MessageHistoryItemsByPath): PlotDataByPath => {\n  const ret: PlotDataByPath = {};\n  Object.keys(itemsByPath).forEach((path) => {\n    ret[path] = itemsByPath[path].map(getTooltipItemForMessageHistoryItem);\n  });\n  return ret;\n};\n\nconst getMessagePathItemsForBlock = memoizeWeak(\n  (decodeMessagePathsForMessagesByTopic, binaryBlock, messageReadersByTopic): { [path: string]: any } => {\n    const parsedBlock = {};\n    Object.keys(binaryBlock).forEach((topic) => {\n      const reader = messageReadersByTopic[topic];\n      parsedBlock[topic] = binaryBlock[topic].map((message) => ({\n        ...message,\n        message: reader.readMessage(Buffer.from(message.message)),\n      }));\n    });\n    return getPlotDataByPath(decodeMessagePathsForMessagesByTopic(parsedBlock));\n  }\n);\n\nfunction getBlockItemsByPath(decodeMessagePathsForMessagesByTopic, messageReadersByTopic, blocks) {\n  const ret = {};\n  blocks.forEach((block) => {\n    const messagePathItemsForBlock = getMessagePathItemsForBlock(\n      decodeMessagePathsForMessagesByTopic,\n      block,\n      messageReadersByTopic\n    );\n    // TODO(steel): We should not interpolate across non-adjacent blocks. Find some way of leaving\n    // a gap in the chart. Could insert NaN values in between. We will likely need to loop over all\n    // paths here, not just over paths present in the block.\n    Object.keys(messagePathItemsForBlock).forEach((path) => {\n      const existingItems = ret[path] || [];\n      for (const item of messagePathItemsForBlock[path]) {\n        existingItems.push(item);\n      }\n      ret[path] = existingItems;\n    });\n  });\n  return ret;\n}\n\nfunction Plot(props: Props) {\n  const { saveConfig, config } = props;\n  const { paths: yAxisPaths, minYValue, maxYValue, showLegend, xAxisVal, xAxisPath } = config;\n  // Note that the below values are refs since they are only used in callbacks and are not rendered anywhere.\n  const currentMinY = useRef(null);\n  const currentMaxY = useRef(null);\n\n  const saveCurrentYs = useCallback((minY: number, maxY: number) => {\n    currentMinY.current = minY;\n    currentMaxY.current = maxY;\n  }, []);\n\n  const setMinMax = useCallback(\n    () =>\n      saveConfig({\n        minYValue: currentMinY.current != null ? currentMinY.current.toString() : \"\",\n        maxYValue: currentMaxY.current != null ? currentMaxY.current.toString() : \"\",\n      }),\n    [currentMaxY, currentMinY, saveConfig]\n  );\n\n  useEffect(() => {\n    if (!yAxisPaths.length) {\n      saveConfig({ paths: [{ value: \"\", enabled: true, timestampMethod: \"receiveTime\" }] });\n    }\n  });\n\n  const historySize = xAxisVal === \"index\" ? 1 : Infinity;\n\n  const allPaths = yAxisPaths.map(({ value }) => value).concat(compact([xAxisPath?.value]));\n  const memoizedPaths: string[] = useShallowMemo<string[]>(allPaths);\n  const subscribeTopics = useMemo(() => getTopicsFromPaths(memoizedPaths), [memoizedPaths]);\n  const messagesByTopic = useMessagesByTopic({ topics: subscribeTopics, historySize });\n\n  const decodeMessagePathsForMessagesByTopic = useDecodeMessagePathsForMessagesByTopic(memoizedPaths);\n\n  // NOTE: This does some unnecessary work: The items that are present in the blocks are stored by\n  // path here, and that data will just be ignored below as the block data overrides the streaming\n  // fallback. This repeated work won't happen when we have an appropriate subscription type.\n  const streamedItemsByPath = useMemo(() => getPlotDataByPath(decodeMessagePathsForMessagesByTopic(messagesByTopic)), [\n    decodeMessagePathsForMessagesByTopic,\n    messagesByTopic,\n  ]);\n\n  const { messageReadersByTopic, blocks } = useBlocksByTopic(subscribeTopics);\n  const blockItemsByPath = getBlockItemsByPath(decodeMessagePathsForMessagesByTopic, messageReadersByTopic, blocks);\n  const { startTime } = useDataSourceInfo();\n  // Don't filter out disabled paths when passing into getDatasetsAndTooltips, because we still want\n  // easy access to the history when turning the disabled paths back on.\n  const { datasets, tooltips } = getDatasetsAndTooltips(\n    yAxisPaths,\n    { ...streamedItemsByPath, ...blockItemsByPath },\n    startTime || { sec: 0, nsec: 0 },\n    xAxisVal,\n    xAxisPath\n  );\n\n  return (\n    <Flex col clip center style={{ position: \"relative\" }}>\n      <PanelToolbar\n        helpContent={helpContent}\n        floating\n        menuContent={\n          <PlotMenu\n            minYValue={minYValue}\n            maxYValue={maxYValue}\n            saveConfig={saveConfig}\n            setMinMax={setMinMax}\n            datasets={datasets}\n            xAxisVal={xAxisVal}\n            tooltips={tooltips}\n          />\n        }\n      />\n      <PlotChart\n        paths={yAxisPaths}\n        minYValue={parseFloat(minYValue)}\n        maxYValue={parseFloat(maxYValue)}\n        saveCurrentYs={saveCurrentYs}\n        datasets={datasets}\n        tooltips={tooltips}\n        xAxisVal={xAxisVal}\n      />\n      <PlotLegend\n        paths={yAxisPaths}\n        saveConfig={saveConfig}\n        showLegend={showLegend}\n        xAxisVal={xAxisVal}\n        xAxisPath={xAxisPath}\n      />\n    </Flex>\n  );\n}\nPlot.panelType = \"Plot\";\nPlot.defaultConfig = {\n  paths: [{ value: \"\", enabled: true, timestampMethod: \"receiveTime\" }],\n  minYValue: \"\",\n  maxYValue: \"\",\n  showLegend: true,\n  xAxisVal: \"timestamp\",\n};\n\nexport default hot(Panel<PlotConfig>(Plot));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { isEqual } from \"lodash\";\nimport { useCallback, useMemo, useRef } from \"react\";\n\nimport { type MessagePathFilter } from \"./constants\";\nimport { messagePathStructures } from \"./messagePathsForDatatype\";\nimport type { MessagePathStructureItem, RosPath } from \"webviz-core/src/components/MessagePathSyntax/constants\";\nimport { isTypicalFilterName } from \"webviz-core/src/components/MessagePathSyntax/isTypicalFilterName\";\nimport parseRosPath from \"webviz-core/src/components/MessagePathSyntax/parseRosPath\";\nimport useGlobalVariables, { type GlobalVariables } from \"webviz-core/src/hooks/useGlobalVariables\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Message, Topic } from \"webviz-core/src/players/types\";\nimport type { RosDatatypes } from \"webviz-core/src/types/RosDatatypes\";\nimport { useChangeDetector, useDeepMemo, useShallowMemo } from \"webviz-core/src/util/hooks\";\nimport { enumValuesByDatatypeAndField, topicsByTopicName } from \"webviz-core/src/util/selectors\";\n\nexport type MessagePathDataItem = {|\n  value: mixed, // The actual value.\n  // TODO(JP): Maybe this should just be a simple path without nice ids, and then have a separate function\n  // to generate \"nice ids\". Because they might not always be reliable and we might want to use different\n  // kinds of \"nice ids\" for different purposes, e.g. `[10]{id==5}{other_id=123}` for tooltips (more information)\n  // but `[:]{other_id==123}` for line graphs (more likely to match values).\n  path: string, // The path to get to this value. Tries to use \"nice ids\" like `[:]{some_id==123}` wherever possible.\n  constantName?: ?string, // The name of the constant that the value matches up with, if any.\n|};\n\n// Given a set of message paths, this returns a function that you can call to resolve a single path\n// and message to an array of `MessagePathDataItem` objects. The array+objects will be the same by\n// reference, as long as topics/datatypes/global variables haven't changed in the meantime.\nexport function useCachedGetMessagePathDataItems(\n  paths: string[]\n): (path: string, message: Message) => ?(MessagePathDataItem[]) {\n  const { topics: providerTopics, datatypes } = PanelAPI.useDataSourceInfo();\n  const { globalVariables } = useGlobalVariables();\n  const memoizedPaths: string[] = useShallowMemo<string[]>(paths);\n\n  // We first fill in global variables in the paths, so we can later see which paths have really\n  // changed when the global variables have changed.\n  const unmemoizedFilledInPaths: { [string]: RosPath } = useMemo(\n    () => {\n      const filledInPaths = {};\n      for (const path of memoizedPaths) {\n        const rosPath = parseRosPath(path);\n        if (rosPath) {\n          filledInPaths[path] = fillInGlobalVariablesInPath(rosPath, globalVariables);\n        }\n      }\n      return filledInPaths;\n    },\n    [globalVariables, memoizedPaths]\n  );\n  const memoizedFilledInPaths = useDeepMemo<{ [string]: RosPath }>(unmemoizedFilledInPaths);\n\n  // Cache MessagePathDataItem arrays by Message. We need to clear out this cache whenever\n  // the topics or datatypes change, since that's what getMessagePathDataItems\n  // depends on, outside of the message+path.\n  const cachesByPath = useRef<{\n    [string]: {| filledInPath: RosPath, weakMap: WeakMap<Message, ?(MessagePathDataItem[])> |},\n  }>({});\n  if (useChangeDetector([providerTopics, datatypes], true)) {\n    cachesByPath.current = {};\n  }\n  // When the filled in paths changed, then that means that either the path string changed, or a\n  // relevant global variable changed. Delete the caches for where the `filledInPath` doesn't match\n  // any more.\n  if (useChangeDetector([memoizedFilledInPaths], false)) {\n    for (const path of Object.keys(cachesByPath.current)) {\n      const filledInPath = memoizedFilledInPaths[path];\n      if (!filledInPath || !isEqual(cachesByPath.current[path].filledInPath, filledInPath)) {\n        delete cachesByPath.current[path];\n      }\n    }\n  }\n\n  return useCallback(\n    (path: string, message: Message): ?(MessagePathDataItem[]) => {\n      if (!memoizedPaths.includes(path)) {\n        throw new Error(`path (${path}) was not in the list of cached paths`);\n      }\n      const filledInPath = memoizedFilledInPaths[path];\n      if (!filledInPath) {\n        return;\n      }\n      if (!cachesByPath.current[path]) {\n        cachesByPath.current[path] = { filledInPath, weakMap: new WeakMap() };\n      }\n      const { weakMap } = cachesByPath.current[path];\n      if (!weakMap.has(message)) {\n        const messagePathDataItems = getMessagePathDataItems(message, filledInPath, providerTopics, datatypes);\n        weakMap.set(message, messagePathDataItems);\n        return messagePathDataItems;\n      }\n      const messagePathDataItems = weakMap.get(message);\n      return messagePathDataItems;\n    },\n    [datatypes, memoizedFilledInPaths, memoizedPaths, providerTopics]\n  );\n}\n\nfunction filterMatches(filter: MessagePathFilter, value: any) {\n  if (typeof filter.value === \"object\") {\n    throw new Error(\"filterMatches only works on paths where global variables have been filled in\");\n  }\n\n  let currentValue = value;\n  for (const name of filter.path) {\n    currentValue = currentValue[name];\n    if (currentValue == null) {\n      return false;\n    }\n  }\n\n  // Test equality using `==` so we can be forgiving for comparing booleans with integers,\n  // comparing numbers with strings, and so on.\n  // eslint-disable-next-line eqeqeq\n  return currentValue == filter.value;\n}\n\nexport function fillInGlobalVariablesInPath(rosPath: RosPath, globalVariables: GlobalVariables): RosPath {\n  return {\n    ...rosPath,\n    messagePath: rosPath.messagePath.map((messagePathPart) => {\n      if (messagePathPart.type === \"slice\") {\n        const start =\n          typeof messagePathPart.start === \"object\"\n            ? Number(globalVariables[messagePathPart.start.variableName])\n            : messagePathPart.start;\n        const end =\n          typeof messagePathPart.end === \"object\"\n            ? Number(globalVariables[messagePathPart.end.variableName])\n            : messagePathPart.end;\n\n        return {\n          ...messagePathPart,\n          start: isNaN(start) ? 0 : start,\n          end: isNaN(end) ? Infinity : end,\n        };\n      } else if (messagePathPart.type === \"filter\" && typeof messagePathPart.value === \"object\") {\n        let value;\n        const variable = globalVariables[messagePathPart.value.variableName];\n        if (typeof variable === \"number\" || typeof variable === \"string\") {\n          value = variable;\n        }\n        return { ...messagePathPart, value };\n      }\n\n      (messagePathPart.type: \"name\" | \"filter\");\n      return messagePathPart;\n    }),\n  };\n}\n\n// Get a new item that has `queriedData` set to the values and paths as queried by `rosPath`.\n// Exported just for tests.\nexport function getMessagePathDataItems(\n  message: Message,\n  filledInPath: RosPath,\n  providerTopics: $ReadOnlyArray<Topic>,\n  datatypes: RosDatatypes\n): ?(MessagePathDataItem[]) {\n  const structures = messagePathStructures(datatypes);\n  const topic = topicsByTopicName(providerTopics)[filledInPath.topicName];\n\n  // We don't care about messages that don't match the topic we're looking for.\n  if (!topic || message.topic !== filledInPath.topicName) {\n    return;\n  }\n\n  // Apply top-level filters first. If a message matches all top-level filters, then this function\n  // will *always* return a history item, so this is our only chance to return nothing.\n  for (const item of filledInPath.messagePath) {\n    if (item.type === \"filter\") {\n      if (!filterMatches(item, message.message)) {\n        return [];\n      }\n    } else {\n      break;\n    }\n  }\n\n  const queriedData = [];\n  // Traverse the message (via `value`) and the `messagePath` at the same time. Also keep track\n  // of a `path` string that we should show in the tooltip of the point.\n  function traverse(value: any, pathIndex: number, path: string, structureItem: MessagePathStructureItem) {\n    if (value === undefined || structureItem === undefined) {\n      return;\n    }\n    const pathItem = filledInPath.messagePath[pathIndex];\n    const nextPathItem = filledInPath.messagePath[pathIndex + 1];\n    if (!pathItem) {\n      // If we're at the end of the `messagePath`, we're done! Just store the point.\n      let constantName: ?string;\n      const prevPathItem = filledInPath.messagePath[pathIndex - 1];\n      if (prevPathItem && prevPathItem.type === \"name\") {\n        const fieldName = prevPathItem.name;\n        const enumMap = enumValuesByDatatypeAndField(datatypes)[structureItem.datatype];\n        if (enumMap && enumMap[fieldName]) {\n          constantName = enumMap[fieldName][value];\n        }\n      }\n      queriedData.push({ value, path, constantName });\n    } else if (pathItem.type === \"name\" && structureItem.structureType === \"message\") {\n      // If the `pathItem` is a name, we're traversing down using that name.\n      traverse(\n        value[pathItem.name],\n        pathIndex + 1,\n        `${path}.${pathItem.name}`,\n        structureItem.nextByName[pathItem.name]\n      );\n    } else if (pathItem.type === \"slice\" && structureItem.structureType === \"array\") {\n      const { start, end } = pathItem;\n      if (typeof start === \"object\" || typeof end === \"object\") {\n        throw new Error(\"getMessagePathDataItems  only works on paths where global variables have been filled in\");\n      }\n      const startIdx: number = start;\n      const endIdx: number = end;\n      if (isNaN(startIdx) || isNaN(endIdx)) {\n        return;\n      }\n\n      // If the `pathItem` is a slice, iterate over all the relevant elements in the array.\n      for (let i = startIdx; i <= Math.min(endIdx, value.length - 1); i++) {\n        const index = i >= 0 ? i : value.length + i;\n        if (value[index] === undefined) {\n          continue;\n        }\n        // Ideally show something like `/topic.object[:]{some_id=123}` for the path, but fall\n        // back to `/topic.object[10]` if necessary. In any case, make sure that the user can\n        // actually identify where the value came from.\n        let newPath;\n        if (nextPathItem && nextPathItem.type === \"filter\") {\n          // If we have a filter set after this, it will update the path appropriately.\n          newPath = `${path}[:]`;\n        } else {\n          // See if `value[index]` has a property that we typically filter on. If so, show that.\n          const name = Object.keys(value[index]).find((key) => isTypicalFilterName(key));\n          if (name) {\n            newPath = `${path}[:]{${name}==${value[index][name]}}`;\n          } else {\n            // Use `i` here instead of `index`, since it's only different when `i` is negative,\n            // and in that case it's probably more useful to show to the user how many elements\n            // from the end of the array this data is, since they clearly are thinking in that way\n            // (otherwise they wouldn't have chosen a negative slice).\n            newPath = `${path}[${i}]`;\n          }\n        }\n        traverse(value[index], pathIndex + 1, newPath, structureItem.next);\n      }\n    } else if (pathItem.type === \"filter\") {\n      if (filterMatches(pathItem, value)) {\n        traverse(value, pathIndex + 1, `${path}{${pathItem.repr}}`, structureItem);\n      }\n    } else {\n      console.warn(`Unknown pathItem.type ${pathItem.type} for structureType: ${structureItem.structureType}`);\n    }\n  }\n  traverse(message.message, 0, filledInPath.topicName, structures[topic.datatype]);\n  return queriedData;\n}\n\nexport const useDecodeMessagePathsForMessagesByTopic = (paths: string[]) => {\n  const memoizedPaths = useShallowMemo<string[]>(paths);\n  const cachedGetMessagePathDataItems = useCachedGetMessagePathDataItems(memoizedPaths);\n  // Note: Let callers define their own memoization scheme for messagesByTopic. For regular playback\n  // useMemo might be appropriate, but weakMemo will likely better for blocks.\n  return useCallback(\n    (messagesByTopic: $ReadOnly<{ [topicName: string]: $ReadOnlyArray<Message> }>) => {\n      const obj = {};\n      for (const path of memoizedPaths) {\n        // Create an array for invalid paths, and valid paths with entries in messagesByTopic\n        const rosPath = parseRosPath(path);\n        if (!rosPath) {\n          obj[path] = [];\n          continue;\n        }\n        if (!messagesByTopic[rosPath.topicName]) {\n          // For the playback pipeline messagesByTopic will always include an entry for every topic.\n          // For the blocks, missing entries are semantically interesting, and should result in\n          // missing (not empty) entries in the output so that information is communicated\n          // downstream.\n          continue;\n        }\n        obj[path] = [];\n\n        for (const message of messagesByTopic[rosPath.topicName]) {\n          // Add the item (if it exists) to the array.\n          const queriedData = cachedGetMessagePathDataItems(path, message);\n          if (queriedData) {\n            obj[path].push({ message, queriedData });\n          }\n        }\n      }\n      return obj;\n    },\n    [memoizedPaths, cachedGetMessagePathDataItems]\n  );\n};\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport MenuDownIcon from \"@mdi/svg/svg/menu-down.svg\";\nimport cx from \"classnames\";\nimport { flatten, partition } from \"lodash\";\nimport * as React from \"react\";\n\nimport type { RosPath, RosPrimitive } from \"./constants\";\nimport styles from \"./MessagePathInput.module.scss\";\nimport {\n  type StructureTraversalResult,\n  traverseStructure,\n  messagePathStructures,\n  messagePathsForDatatype,\n  validTerminatingStructureItem,\n} from \"./messagePathsForDatatype\";\nimport parseRosPath from \"./parseRosPath\";\nimport Autocomplete from \"webviz-core/src/components/Autocomplete\";\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport useGlobalVariables, { type GlobalVariables } from \"webviz-core/src/hooks/useGlobalVariables\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport type { RosDatatypes } from \"webviz-core/src/types/RosDatatypes\";\nimport { getTopicNames, topicsByTopicName } from \"webviz-core/src/util/selectors\";\nimport type { TimestampMethod } from \"webviz-core/src/util/time\";\n\n// To show an input field with an autocomplete so the user can enter message paths, use:\n//\n//  <MessagePathInput path={this.state.path} onChange={path => this.setState({ path })} />\n//\n// To limit the autocomplete items to only certain types of values, you can use\n//\n//  <MessagePathInput types={[\"message\", \"array\", \"primitives\"]} />\n//\n// Or use actual ROS primitive types:\n//\n//  <MessagePathInput types={[\"uint16\", \"float64\"]} />\n//\n// If you don't use timestamps, you might want to hide the warning icon that we show when selecting\n// a topic that has no header: `<MessagePathInput hideTimestampWarning>`.\n//\n// If you are rendering many input fields, you might want to use `<MessagePathInput index={5}>`,\n// which gets passed down to `<MessagePathInput onChange>` as the second parameter, so you can\n// avoid creating anonymous functions on every render (which will prevent the component from\n// rendering unnecessarily).\n\nfunction topicHasNoHeaderStamp(topic: Topic, datatypes: RosDatatypes): boolean {\n  const structureTraversalResult = traverseStructure(messagePathStructures(datatypes)[topic.datatype], [\n    { type: \"name\", name: \"header\" },\n    { type: \"name\", name: \"stamp\" },\n  ]);\n\n  return (\n    !structureTraversalResult.valid || !validTerminatingStructureItem(structureTraversalResult.structureItem, [\"time\"])\n  );\n}\n\nfunction getFirstInvalidVariableFromRosPath(\n  rosPath: RosPath,\n  globalVariables: GlobalVariables\n): ?{| variableName: string, loc: number |} {\n  const { messagePath } = rosPath;\n  return messagePath\n    .map((path) => {\n      const globalVars = Object.keys(globalVariables);\n      if (path.type === \"filter\" && typeof path.value === \"object\" && !globalVars.includes(path.value.variableName)) {\n        return { variableName: path.value.variableName, loc: path.valueLoc };\n      }\n\n      if (path.type === \"slice\" && typeof path.start === \"object\" && !globalVars.includes(path.start.variableName)) {\n        return { variableName: path.start.variableName, loc: path.start.startLoc };\n      }\n\n      if (path.type === \"slice\" && typeof path.end === \"object\" && !globalVars.includes(path.end.variableName)) {\n        return { variableName: path.end.variableName, loc: path.end.startLoc };\n      }\n      return undefined;\n    })\n    .find(Boolean);\n}\n\nfunction getExamplePrimitive(primitiveType: RosPrimitive) {\n  switch (primitiveType) {\n    case \"string\":\n      return '\"\"';\n    case \"bool\":\n      return \"true\";\n    case \"float32\":\n    case \"float64\":\n    case \"uint8\":\n    case \"uint16\":\n    case \"uint32\":\n    case \"uint64\":\n    case \"int8\":\n    case \"int16\":\n    case \"int32\":\n    case \"int64\":\n      return \"0\";\n    case \"duration\":\n    case \"time\":\n      return \"\";\n    default:\n      (primitiveType: empty);\n      return \"\";\n  }\n}\n\ntype MessagePathInputBaseProps = {\n  path: string, // A path of the form `/topic.some_field[:]{id==42}.x`\n  index?: number, // Optional index field which gets passed to `onChange` (so you don't have to create anonymous functions)\n  onChange: (value: string, index: ?number) => void,\n  validTypes?: string[], // Valid types, like \"message\", \"array\", or \"primitive\", or a ROS primitive like \"float64\"\n  noMultiSlices?: boolean, // Don't suggest slices with multiple values `[:]`, only single values like `[0]`.\n  autoSize?: boolean,\n  placeholder?: string,\n  inputStyle?: any,\n  disableAutocomplete?: boolean, // Treat this as a normal input, with no autocomplete.\n\n  timestampMethod?: TimestampMethod,\n  onTimestampMethodChange?: (TimestampMethod, index: ?number) => void,\n};\ntype MessagePathInputProps = MessagePathInputBaseProps & {\n  topics: $ReadOnlyArray<Topic>,\n  datatypes: RosDatatypes,\n  prioritizedDatatype?: ?string,\n  globalVariables: GlobalVariables,\n};\ntype MessagePathInputState = {| focused: boolean |};\nclass MessagePathInputUnconnected extends React.PureComponent<MessagePathInputProps, MessagePathInputState> {\n  _input: ?HTMLInputElement;\n\n  constructor(props: MessagePathInputProps) {\n    super(props);\n    this.state = { focused: false };\n  }\n\n  _onChange = (event: SyntheticInputEvent<HTMLInputElement>, value: string) => {\n    // When typing a \"{\" character, also  insert a \"}\", so you get an\n    // autocomplete window immediately for selecting a filter name.\n    // $FlowFixMe\n    if (event.nativeEvent.data === \"{\") {\n      const newCursorPosition = event.target.selectionEnd;\n      value = `${value.slice(0, newCursorPosition)}}${value.slice(newCursorPosition)}`;\n\n      const target = event.target;\n      setImmediate(() => target.setSelectionRange(newCursorPosition, newCursorPosition));\n    }\n    this.props.onChange(value, this.props.index);\n  };\n\n  _onTimestampMethodChange = (value: TimestampMethod) => {\n    if (this.props.onTimestampMethodChange) {\n      this.props.onTimestampMethodChange(value, this.props.index);\n    }\n  };\n\n  _onSelect = (\n    value: string,\n    autocomplete: Autocomplete,\n    autocompleteType: ?(\"topicName\" | \"messagePath\" | \"globalVariables\"),\n    autocompleteRange: {| start: number, end: number |}\n  ) => {\n    // If we're dealing with a topic name, and we cannot validly end in a message type,\n    // add a \".\" so the user can keep typing to autocomplete the message path.\n    const keepGoingAfterTopicName =\n      autocompleteType === \"topicName\" && this.props.validTypes && !this.props.validTypes.includes(\"message\");\n    if (keepGoingAfterTopicName) {\n      value += \".\";\n    }\n    this.props.onChange(\n      this.props.path.substr(0, autocompleteRange.start) + value + this.props.path.substr(autocompleteRange.end),\n      this.props.index\n    );\n    // We want to continue typing if we're dealing with a topic name,\n    // or if we just autocompleted something with a filter (because we might want to\n    // edit that filter), or if the autocomplete already has a filter (because we might\n    // have just autocompleted a name inside that filter).\n    if (keepGoingAfterTopicName || value.includes(\"{\") || this.props.path.includes(\"{\")) {\n      const newCursorPosition = autocompleteRange.start + value.length;\n      setImmediate(() => autocomplete.setSelectionRange(newCursorPosition, newCursorPosition));\n    } else {\n      autocomplete.blur();\n    }\n  };\n\n  render() {\n    const {\n      path,\n      topics,\n      datatypes,\n      prioritizedDatatype,\n      validTypes,\n      autoSize,\n      placeholder,\n      noMultiSlices,\n      timestampMethod,\n      inputStyle,\n      disableAutocomplete,\n      globalVariables,\n    } = this.props;\n\n    const rosPath = parseRosPath(path);\n    let autocompleteType: ?(\"topicName\" | \"messagePath\" | \"globalVariables\");\n    let topic: ?Topic;\n    let structureTraversalResult: ?StructureTraversalResult;\n    if (rosPath) {\n      const { topicName } = rosPath;\n      topic = topics.find(({ name }) => name === topicName);\n\n      if (topic) {\n        structureTraversalResult = traverseStructure(\n          messagePathStructures(datatypes)[topic.datatype],\n          rosPath.messagePath\n        );\n      }\n\n      if (!topic) {\n        autocompleteType = \"topicName\";\n      } else if (\n        !structureTraversalResult ||\n        !structureTraversalResult.valid ||\n        !validTerminatingStructureItem(structureTraversalResult.structureItem, validTypes)\n      ) {\n        autocompleteType = \"messagePath\";\n      }\n    } else {\n      autocompleteType = \"topicName\";\n    }\n\n    let autocompleteItems = [];\n    let autocompleteFilterText = \"\";\n    let autocompleteRange = { start: 0, end: Infinity };\n    if (disableAutocomplete) {\n      autocompleteItems = [];\n    } else if (autocompleteType === \"topicName\") {\n      autocompleteItems = getTopicNames(topics);\n      autocompleteFilterText = path;\n    } else if (autocompleteType === \"messagePath\" && topic /*:: && rosPath */) {\n      if (\n        structureTraversalResult &&\n        !structureTraversalResult.valid &&\n        structureTraversalResult.msgPathPart &&\n        structureTraversalResult.msgPathPart.type === \"filter\" &&\n        structureTraversalResult.structureItem &&\n        structureTraversalResult.structureItem.structureType === \"message\"\n      ) {\n        const { msgPathPart } = structureTraversalResult;\n\n        // Provide filter suggestions for primitive values, since they're the only kinds of values\n        // that can be filtered on.\n        // TODO: add support for nested paths to primitives, such as \"/some_topic{foo.bar==3}\".\n        for (const name of Object.keys(structureTraversalResult.structureItem.nextByName)) {\n          const item = structureTraversalResult.structureItem.nextByName[name];\n          if (item.structureType === \"primitive\") {\n            autocompleteItems.push(`${name}==${getExamplePrimitive(item.primitiveType)}`);\n          }\n        }\n\n        autocompleteFilterText = msgPathPart.path.join(\".\");\n        autocompleteRange = {\n          start: msgPathPart.nameLoc,\n          end: msgPathPart.nameLoc + autocompleteFilterText.length,\n        };\n      } else {\n        autocompleteItems = messagePathsForDatatype(topic.datatype, datatypes, validTypes, noMultiSlices).filter(\n          // .header.seq is pretty useless but shows up everryyywhere.\n          (msgPath) => msgPath !== \"\" && !msgPath.endsWith(\".header.seq\")\n        );\n\n        // Exclude any initial filters (\"/topic{foo=='bar'}\") from the range that will be replaced\n        // when the user chooses a new message path.\n        let initialFilterLength = 0;\n        for (const item of rosPath.messagePath) {\n          if (item.type === \"filter\") {\n            initialFilterLength += item.repr.length + 2; // add { and }\n          } else {\n            break;\n          }\n        }\n\n        autocompleteRange = { start: topic.name.length + initialFilterLength, end: Infinity };\n        // Filter out filters (hah!) in a pretty crude way, so autocomplete still works\n        // when already having specified a filter and you want to see what other object\n        // names you can complete it with. Kind of an edge case, and this doesn't work\n        // ideally (because it will remove your existing filter if you actually select\n        // the autocomplete item), but it's easy to do for now, and nice to have.\n        autocompleteFilterText = path.substr(topic.name.length).replace(/\\{[^}]*\\}/g, \"\");\n      }\n    } else if (rosPath) {\n      const invalidGlobalVariablesVariable = getFirstInvalidVariableFromRosPath(rosPath, globalVariables);\n\n      if (invalidGlobalVariablesVariable) {\n        autocompleteType = \"globalVariables\";\n        autocompleteItems = Object.keys(globalVariables).map((key) => `$${key}`);\n        autocompleteRange = {\n          start: invalidGlobalVariablesVariable.loc,\n          end: invalidGlobalVariablesVariable.loc + invalidGlobalVariablesVariable.variableName.length + 1,\n        };\n        autocompleteFilterText = invalidGlobalVariablesVariable.variableName;\n      }\n    }\n\n    const noHeaderStamp = topic && topicHasNoHeaderStamp(topic, datatypes);\n    const orderedAutocompleteItems = prioritizedDatatype\n      ? flatten(\n          partition(autocompleteItems, (item) => topicsByTopicName(topics)[item]?.datatype === prioritizedDatatype)\n        )\n      : autocompleteItems;\n\n    return (\n      <div style={{ display: \"flex\", flex: \"1 1 auto\", minWidth: 0, justifyContent: \"space-between\" }}>\n        <Autocomplete\n          items={orderedAutocompleteItems}\n          filterText={autocompleteFilterText}\n          value={path}\n          onChange={this._onChange}\n          onSelect={(value: string, item: any, autocomplete: Autocomplete) =>\n            this._onSelect(value, autocomplete, autocompleteType, autocompleteRange)\n          }\n          hasError={!!autocompleteType && !disableAutocomplete}\n          autocompleteKey={autocompleteType}\n          placeholder={placeholder || \"/some/topic.msgs[0].field\"}\n          autoSize={autoSize}\n          inputStyle={inputStyle}\n          // Disable autoselect since people often construct complex queries, and it's very annoying\n          // to have the entire input selected whenever you want to make a change to a part it.\n          disableAutoSelect\n        />\n\n        {timestampMethod && (\n          <div className={styles.timestampMethodDropdownContainer}>\n            <Dropdown\n              onChange={this._onTimestampMethodChange}\n              value={timestampMethod}\n              toggleComponent={\n                <Tooltip contents=\"Timestamp used for x-axis\" placement=\"top\">\n                  <div\n                    className={cx({\n                      [styles.timestampMethodDropdown]: true,\n                      [styles.timestampMethodDropdownError]: timestampMethod === \"headerStamp\" && noHeaderStamp,\n                    })}>\n                    {timestampMethod === \"receiveTime\" ? \"(receive time)\" : \"(header.stamp)\"}\n                    <Icon style={{ position: \"relative\", top: 2, marginLeft: 2 }}>\n                      <MenuDownIcon />\n                    </Icon>\n                  </div>\n                </Tooltip>\n              }>\n              {/* $FlowFixMe - \"value\" is needed for <Dropdown>, but it's not part of <Tooltip>. */}\n              <Tooltip\n                value=\"receiveTime\"\n                placement=\"right\"\n                contents=\"ROS-time at which the message was received and recorded\">\n                <span>receive time</span>\n              </Tooltip>\n              {/* $FlowFixMe - \"value\" is needed for <Dropdown>, but it's not part of <Tooltip>. */}\n              <Tooltip\n                value=\"headerStamp\"\n                placement=\"below\"\n                contents={\n                  <div style={{ maxWidth: 200, lineHeight: \"normal\" }}>\n                    Value of the header.stamp field. Can mean different things for different topics. Be sure you know\n                    what this value means before using it.\n                    {noHeaderStamp && (\n                      <div className={styles.timestampItemError}>(header.stamp is not present in this topic)</div>\n                    )}\n                  </div>\n                }>\n                <span\n                  className={cx({\n                    [styles.timestampItemError]: noHeaderStamp,\n                  })}>\n                  header.stamp\n                </span>\n              </Tooltip>\n            </Dropdown>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default React.memo<MessagePathInputBaseProps>(function MessagePathInput(props: MessagePathInputBaseProps) {\n  const { globalVariables } = useGlobalVariables();\n  const { datatypes, topics } = PanelAPI.useDataSourceInfo();\n  return (\n    <MessagePathInputUnconnected {...props} topics={topics} datatypes={datatypes} globalVariables={globalVariables} />\n  );\n});\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { type Node, useMemo } from \"react\";\nimport type { Time } from \"rosbag\";\n\nimport { getTopicsFromPaths } from \"webviz-core/src/components/MessagePathSyntax/parseRosPath\";\nimport {\n  type MessagePathDataItem,\n  useDecodeMessagePathsForMessagesByTopic,\n} from \"webviz-core/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Message } from \"webviz-core/src/players/types\";\nimport { useShallowMemo } from \"webviz-core/src/util/hooks\";\n\nexport type MessageHistoryItem = {\n  queriedData: MessagePathDataItem[],\n  message: Message,\n};\n\nexport type MessageHistoryItemsByPath = $ReadOnly<{ [string]: $ReadOnlyArray<MessageHistoryItem> }>;\n\nexport type MessageHistoryData = {|\n  itemsByPath: MessageHistoryItemsByPath,\n  startTime: Time,\n|};\n\ntype Props = {|\n  children: (MessageHistoryData) => Node,\n  paths: string[],\n  historySize?: number,\n|};\n\nconst ZERO_TIME = Object.freeze({ sec: 0, nsec: 0 });\n\n// DEPRECATED in favor of PanelAPI.useMessagesByTopic and useCachedGetMessagePathDataItems.\n//\n// Be sure to pass in a new render function when you want to force a rerender.\n// So you probably don't want to do `<MessageHistoryDEPRECATED>{this._renderSomething}</MessageHistoryDEPRECATED>`.\n// This might be a bit counterintuitive but we do this since performance matters here.\nexport default React.memo<Props>(function MessageHistoryDEPRECATED({ children, paths, historySize }: Props) {\n  const { startTime } = PanelAPI.useDataSourceInfo();\n  const memoizedPaths: string[] = useShallowMemo<string[]>(paths);\n  const subscribeTopics = useMemo(() => getTopicsFromPaths(memoizedPaths), [memoizedPaths]);\n\n  const messagesByTopic = PanelAPI.useMessagesByTopic({\n    topics: subscribeTopics,\n    historySize: historySize || Infinity,\n  });\n\n  const decodeMessagePathsForMessagesByTopic = useDecodeMessagePathsForMessagesByTopic(memoizedPaths);\n  const itemsByPath = useMemo(() => decodeMessagePathsForMessagesByTopic(messagesByTopic), [\n    decodeMessagePathsForMessagesByTopic,\n    messagesByTopic,\n  ]);\n\n  return useMemo(() => children({ itemsByPath, startTime: startTime || ZERO_TIME }), [\n    children,\n    itemsByPath,\n    startTime,\n  ]);\n});\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport styled from \"styled-components\";\n\nexport const SLabel = styled.label`\n  display: block;\n  font-size: 14px;\n  margin: 6px 2px;\n  text-decoration: ${(props) => (props.strikethrough ? \"line-through\" : null)};\n`;\nexport const SDescription = styled.label`\n  display: block;\n  margin: 6px 2px;\n  opacity: 0.8;\n  line-height: 1.2;\n`;\n\nexport const SInput = styled.input`\n  flex: 1 1 auto;\n  margin-bottom: 8px;\n`;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\n\nimport { type Save3DConfig } from \"..\";\n\nexport const TOPIC_DISPLAY_MODES = {\n  SHOW_ALL: {\n    value: \"SHOW_ALL\",\n    label: \"All\",\n  },\n  SHOW_AVAILABLE: {\n    value: \"SHOW_AVAILABLE\",\n    label: \"Available\",\n  },\n  SHOW_SELECTED: {\n    value: \"SHOW_SELECTED\",\n    label: \"Visible\",\n  },\n};\n\nconst DEFAULT_DISPLAY_MODE = TOPIC_DISPLAY_MODES.SHOW_ALL.value;\nconst DEFAULT_BTN_WIDTH = 88; // Width for the longest selected option in dropdown.\nconst XS_WIDTH_BTN_WIDTH = 48;\n\nconst dropdownOptions = Object.keys(TOPIC_DISPLAY_MODES)\n  .filter((item) => item !== \"SHOW_TREE\")\n  .map((key) => ({\n    label: TOPIC_DISPLAY_MODES[key].label,\n    value: TOPIC_DISPLAY_MODES[key].value,\n  }));\n\nexport type TopicDisplayMode = $Keys<typeof TOPIC_DISPLAY_MODES>;\n\nconst STopicViewModeSelector = styled.div`\n  div {\n    button {\n      justify-content: space-between;\n      line-height: 1.4;\n    }\n  }\n`;\ntype Props = {|\n  isXSWidth: boolean,\n  topicDisplayMode: TopicDisplayMode,\n  saveConfig: Save3DConfig,\n|};\n\nexport default function TopicViewModeSelector({\n  isXSWidth,\n  topicDisplayMode: topicDisplayModeProp,\n  saveConfig,\n}: Props) {\n  const topicDisplayMode = TOPIC_DISPLAY_MODES[topicDisplayModeProp] ? topicDisplayModeProp : DEFAULT_DISPLAY_MODE;\n  return (\n    <STopicViewModeSelector>\n      <Dropdown\n        btnStyle={{ width: isXSWidth ? XS_WIDTH_BTN_WIDTH : DEFAULT_BTN_WIDTH }}\n        position=\"below\"\n        value={topicDisplayMode}\n        text={TOPIC_DISPLAY_MODES[topicDisplayMode].label}\n        onChange={(newValue) => saveConfig({ topicDisplayMode: newValue }, { keepLayoutInUrl: true })}>\n        {dropdownOptions.map(({ label, value }) => (\n          <option value={value} key={value}>\n            {label}\n          </option>\n        ))}\n      </Dropdown>\n    </STopicViewModeSelector>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { isEqual } from \"lodash\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport { validationErrorToString, type ValidationResult } from \"webviz-core/src/components/validators\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport YAML from \"webviz-core/src/util/yaml\";\n\nconst { useState, useCallback, useRef, useLayoutEffect, useEffect } = React;\n\nexport const EDIT_FORMAT = { JSON: \"json\", YAML: \"yaml\" };\n\nconst SEditBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 200px;\n  max-height: 800px;\n`;\n// TODO(Audrey): work with design to update Dropdown UI\nconst STransparentDropdownButton = styled.div`\n  padding-top: 6px;\n  display: inline-flex;\n  button {\n    background: transparent;\n    display: inline-flex;\n  }\n`;\nconst StyledTextarea = styled.textarea`\n  flex: 1 1 auto;\n  resize: none;\n`;\nconst SError = styled.div`\n  color: ${colors.red};\n  padding: 8px 4px;\n`;\n\ntype Value = any;\ntype OnChange = (obj: any) => void;\ntype ParseAndStringifyFn = {\n  stringify: (obj: any) => string,\n  parse: (val: string) => any,\n};\nexport type EditFormat = $Values<typeof EDIT_FORMAT>;\nexport type BaseProps = {\n  dataValidator?: (data: any) => ?ValidationResult,\n  inputStyle?: { [attr: string]: string | number },\n  onChange?: OnChange,\n  onError?: (err: string) => void,\n  value: Value,\n};\ntype Props = BaseProps & {\n  format: EditFormat,\n  children?: React.Node, // addition UI next to the format select\n  onSelectFormat?: (format: EditFormat) => void,\n};\n\n/**\n * The base component for ValidatedInput which handles the value change, data validation\n * and data stringifying/parsing. Any external value change will cause the input string to change\n * and trigger new validations. Only valid internal value change will call onChange. Any data processing\n * and validation error will trigger onError.\n */\nexport function ValidatedInputBase({\n  dataValidator = (data) => {},\n  inputStyle = {},\n  onChange,\n  onError,\n  parse,\n  stringify,\n  value,\n}: BaseProps & ParseAndStringifyFn) {\n  const [error, setError] = useState<string>(\"\");\n  const [inputStr, setInputStr] = useState<string>(\"\");\n  const prevIncomingVal = useRef(\"\");\n  const inputRef = useRef<?HTMLTextAreaElement>(null);\n  const [isEditing, setIsEditing] = useState<boolean>(false);\n\n  // validate the input string, and setError or call onChange if needed\n  const memorizedInputValidation = useCallback(\n    (newInputVal: string, onChangeFcn?: OnChange) => {\n      let newVal;\n      let newError;\n      // parse the empty string directly as empty array or object for validation and onChange callback\n      if (newInputVal.trim() === \"\") {\n        newVal = Array.isArray(value) ? [] : {};\n      } else {\n        try {\n          newVal = parse(newInputVal);\n        } catch (e) {\n          newError = e.message;\n        }\n      }\n\n      if (newError) {\n        setError(newError);\n        return;\n      }\n      setError(\"\"); // clear the previous error\n      const validationResult = dataValidator(newVal);\n      if (validationResult) {\n        setError(validationErrorToString(validationResult));\n        return;\n      }\n      if (onChangeFcn) {\n        onChangeFcn(newVal);\n      }\n    },\n    [dataValidator, parse, value]\n  );\n\n  // when not in editing mode, whenever the incoming value changes, we'll compare the new value with prevIncomingVal, and reset local state values if they are different\n  useLayoutEffect(\n    () => {\n      if (!isEditing && value !== prevIncomingVal.current) {\n        if (isEqual(value, prevIncomingVal.current)) {\n          return;\n        }\n        let newVal = \"\";\n        let newError;\n        try {\n          newVal = stringify(value);\n        } catch (e) {\n          newError = `Error stringifying the new value, using \"\" as default. ${e.message}`;\n        }\n        setInputStr(newVal);\n        prevIncomingVal.current = value;\n        if (newError) {\n          setError(newError);\n          return;\n        }\n        // try to validate if successfully stringified the new value\n        memorizedInputValidation(newVal);\n      }\n    },\n    [value, stringify, memorizedInputValidation, isEditing]\n  );\n\n  const handleChange = useCallback(\n    (e) => {\n      const val = e.currentTarget && e.currentTarget.value;\n      if (!isEditing) {\n        setIsEditing(true);\n      }\n      setInputStr(val);\n      memorizedInputValidation(val, onChange);\n    },\n    [isEditing, memorizedInputValidation, onChange]\n  );\n\n  useEffect(\n    () => {\n      if (onError && error) {\n        onError(error);\n      }\n    },\n    [error, onError]\n  );\n\n  // scroll to the bottom when the text gets too long\n  useLayoutEffect(\n    () => {\n      if (!isEditing) {\n        const inputElem = inputRef.current;\n        if (inputElem) {\n          inputElem.scrollTop = inputElem.scrollHeight;\n        }\n      }\n    },\n    [isEditing, inputStr] // update whenever inputStr changes\n  );\n\n  return (\n    <>\n      <StyledTextarea\n        data-test=\"validated-input\"\n        style={inputStyle}\n        ref={inputRef}\n        value={inputStr}\n        onChange={handleChange}\n      />\n      {error && <SError>{error}</SError>}\n    </>\n  );\n}\n\nfunction JsonInput(props: BaseProps) {\n  function stringify(val) {\n    return JSON.stringify(val, null, 2);\n  }\n  return <ValidatedInputBase parse={JSON.parse} stringify={stringify} {...props} />;\n}\n\nexport function YamlInput(props: BaseProps) {\n  return <ValidatedInputBase parse={YAML.parse} stringify={YAML.stringify} {...props} />;\n}\n\n// An enhanced input component that allows editing values in json or yaml format with custom validations\nexport default function ValidatedInput({ format = EDIT_FORMAT.JSON, onSelectFormat, children, ...rest }: Props) {\n  const InputComponent = format === EDIT_FORMAT.JSON ? JsonInput : YamlInput;\n  return (\n    <Flex col>\n      <Flex row reverse>\n        {children}\n        <STransparentDropdownButton>\n          <Dropdown position=\"right\" value={format} text={format.toUpperCase()} onChange={onSelectFormat}>\n            {Object.keys(EDIT_FORMAT).map((key) => (\n              <option value={EDIT_FORMAT[key]} key={key}>\n                {key}\n              </option>\n            ))}\n          </Dropdown>\n        </STransparentDropdownButton>\n      </Flex>\n      <SEditBox>\n        <InputComponent {...rest} />\n      </SEditBox>\n    </Flex>\n  );\n}\n\n// For component consumers that don't care about maintaining the editFormat state, use this instead\nexport function UncontrolledValidatedInput({ format = EDIT_FORMAT.YAML, ...rest }: Props) {\n  const [editFormat, setEditFormat] = React.useState<EditFormat>(format);\n  return <ValidatedInput {...rest} format={editFormat} onSelectFormat={(newFormat) => setEditFormat(newFormat)} />;\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport AlertCircleIcon from \"@mdi/svg/svg/alert-circle.svg\";\nimport LeadPencilIcon from \"@mdi/svg/svg/lead-pencil.svg\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport NodeName from \"./NodeName\";\nimport { TREE_SPACING } from \"./TopicTree\";\nimport TreeNodeDotMenu, { DOT_MENU_WIDTH } from \"./TreeNodeDotMenu\";\nimport type { TreeNode, ToggleNode, ToggleNodeByColumn, DerivedCustomSettings, SetCurrentEditingTopic } from \"./types\";\nimport VisibilityToggle, { TOGGLE_WRAPPER_SIZE, TOPIC_ROW_PADDING } from \"./VisibilityToggle\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { canEditDatatype } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const ICON_SIZE = 22;\nconst MAX_GROUP_ERROR_WIDTH = 64;\nexport const ROW_CONTENT_HEIGHT = 24;\n\nexport const ROW_HEIGHT = 30;\n\nexport const STreeNodeRow = styled.div`\n  color: ${(props: { visibleInScene: boolean }) => (props.visibleInScene ? \"unset\" : colors.TEXT_MUTED)};\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport const SLeft = styled.div`\n  display: flex;\n  align-items: center;\n  flex: 1;\n  min-height: ${TOGGLE_WRAPPER_SIZE}px;\n  padding: ${TOPIC_ROW_PADDING}px 0px;\n`;\n\nconst SErrorCount = styled.small`\n  color: ${colors.RED};\n  width: ${MAX_GROUP_ERROR_WIDTH}px;\n`;\n\nconst SIconWrapper = styled.div`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: ${ICON_SIZE}px;\n  height: ${ICON_SIZE}px;\n`;\n\nconst SErrorList = styled.ul`\n  max-width: 240px;\n  word-wrap: break-word;\n  padding-left: 16px;\n`;\n\nconst SErrorItem = styled.li`\n  list-style: outside;\n`;\n\nexport const SRightActions = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nexport const SToggles = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nexport const SDotMenuPlaceholder = styled.span`\n  width: ${DOT_MENU_WIDTH}px;\n  height: ${ROW_HEIGHT}px;\n`;\n\ntype Props = {|\n  checkedKeysSet: Set<string>,\n  hasChildren: boolean,\n  hasFeatureColumn: boolean,\n  isXSWidth: boolean,\n  node: TreeNode,\n  nodeVisibleInScene: boolean,\n  visibleByColumn: (?boolean)[],\n  toggleCheckAllAncestors: ToggleNodeByColumn,\n  toggleCheckAllDescendants: ToggleNodeByColumn,\n  toggleNodeChecked: ToggleNodeByColumn,\n  toggleNodeExpanded: ToggleNode,\n  sceneErrors: ?(string[]),\n  setCurrentEditingTopic: SetCurrentEditingTopic,\n  derivedCustomSettings: ?DerivedCustomSettings,\n  width: number,\n  filterText: string,\n  tooltips?: React.Node[],\n|};\n\nexport default function TreeNodeRow({\n  checkedKeysSet,\n  hasChildren,\n  hasFeatureColumn,\n  isXSWidth,\n  node,\n  node: { availableByColumn, providerAvailable, name, key, featureKey },\n  nodeVisibleInScene,\n  visibleByColumn,\n  toggleCheckAllAncestors,\n  toggleCheckAllDescendants,\n  toggleNodeChecked,\n  toggleNodeExpanded,\n  sceneErrors,\n  setCurrentEditingTopic,\n  derivedCustomSettings,\n  width,\n  filterText,\n  tooltips,\n}: Props) {\n  const topicName = node.type === \"topic\" ? node.topicName : \"\";\n  const datatype = node.type === \"topic\" ? node.datatype : undefined;\n\n  const isDefaultSettings = derivedCustomSettings?.isDefaultSettings || !derivedCustomSettings;\n  const showTopicSettings = topicName && datatype && canEditDatatype(datatype);\n  const showTopicSettingsChanged = showTopicSettings && !isDefaultSettings;\n\n  const showTopicError = node.type === \"topic\" && sceneErrors && sceneErrors.length > 0;\n  const showGroupError = node.type === \"group\" && sceneErrors && sceneErrors.length > 0;\n\n  const rowWidth = width - (isXSWidth ? 0 : TREE_SPACING * 2);\n\n  const togglesWidth = hasFeatureColumn ? TOGGLE_WRAPPER_SIZE * 2 : TOGGLE_WRAPPER_SIZE;\n  const rightActionWidth = providerAvailable ? togglesWidth + DOT_MENU_WIDTH : DOT_MENU_WIDTH;\n  // -8px to add some spacing between the name and right action area.\n  let maxNodeNameWidth = rowWidth - rightActionWidth - 8;\n\n  if (showTopicSettingsChanged) {\n    maxNodeNameWidth -= ICON_SIZE;\n  }\n  if (showGroupError) {\n    maxNodeNameWidth -= MAX_GROUP_ERROR_WIDTH;\n  }\n  if (showTopicError) {\n    maxNodeNameWidth -= ICON_SIZE;\n  }\n\n  const errorTooltip = sceneErrors && (\n    <SErrorList>\n      {sceneErrors.map((errStr) => (\n        <SErrorItem key={errStr}>{errStr}</SErrorItem>\n      ))}\n    </SErrorList>\n  );\n\n  return (\n    <STreeNodeRow visibleInScene={nodeVisibleInScene} style={{ width: rowWidth }}>\n      <SLeft\n        style={{ cursor: hasChildren && !filterText ? \"pointer\" : \"default\" }}\n        data-test={`name~${key}`}\n        onClick={hasChildren ? () => toggleNodeExpanded(key) : undefined}>\n        <NodeName\n          isXSWidth={isXSWidth}\n          maxWidth={maxNodeNameWidth}\n          displayName={name || topicName}\n          tooltips={tooltips}\n          topicName={topicName}\n          searchText={filterText}\n        />\n        {showTopicSettingsChanged && datatype && (\n          <Icon\n            style={{ padding: \"0 4px\", color: colors.HIGHLIGHT }}\n            fade\n            tooltip=\"Topic settings edited\"\n            onClick={() => setCurrentEditingTopic({ name: topicName, datatype })}>\n            <LeadPencilIcon />\n          </Icon>\n        )}\n        {showGroupError && errorTooltip && sceneErrors && (\n          <Tooltip contents={errorTooltip} placement=\"top\">\n            <SErrorCount>{`${sceneErrors.length} ${sceneErrors.length === 1 ? \"error\" : \"errors\"}`}</SErrorCount>\n          </Tooltip>\n        )}\n        {showTopicError && errorTooltip && (\n          <SIconWrapper>\n            <Icon\n              style={{ color: colors.RED, fontSize: 14, display: \"inline-flex\", alignItems: \"center\" }}\n              small\n              tooltipProps={{ placement: \"top\" }}\n              tooltip={errorTooltip}\n              onClick={(e) => e.stopPropagation()}>\n              <AlertCircleIcon />\n            </Icon>\n          </SIconWrapper>\n        )}\n      </SLeft>\n\n      <SRightActions>\n        {providerAvailable && (\n          <SToggles>\n            {availableByColumn.map((available, columnIdx) => (\n              <VisibilityToggle\n                available={available}\n                dataTest={`visibility-toggle~${key}~column${columnIdx}`}\n                key={columnIdx}\n                overrideColor={(derivedCustomSettings?.overrideColorByColumn || [])[columnIdx]}\n                checked={checkedKeysSet.has(columnIdx === 1 ? featureKey : key)}\n                onToggle={() => toggleNodeChecked(key, columnIdx)}\n                onShiftToggle={() => toggleCheckAllDescendants(key, columnIdx)}\n                onAltToggle={() => toggleCheckAllAncestors(key, columnIdx)}\n                unavailableTooltip={\n                  node.type === \"group\" ? \"None of the topics in this group are currently available\" : \"Unavailable\"\n                }\n                visibleInScene={!!visibleByColumn[columnIdx]}\n              />\n            ))}\n          </SToggles>\n        )}\n        <TreeNodeDotMenu\n          datatype={showTopicSettings ? datatype : undefined}\n          disableBaseColumn={!availableByColumn[0]}\n          disableFeatureColumn={!availableByColumn[1]}\n          hasFeatureColumn={hasFeatureColumn && availableByColumn[1]}\n          nodeKey={key}\n          setCurrentEditingTopic={setCurrentEditingTopic}\n          toggleCheckAllAncestors={toggleCheckAllAncestors}\n          toggleCheckAllDescendants={toggleCheckAllDescendants}\n          topicName={topicName}\n        />\n      </SRightActions>\n    </STreeNodeRow>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { memoize } from \"lodash\";\nimport memoizeWeak from \"memoize-weak\";\n\nimport {\n  type MessagePathPart,\n  rosPrimitives,\n  type RosPrimitive,\n  type MessagePathStructureItem,\n  type MessagePathStructureItemMessage,\n} from \"./constants\";\nimport { isTypicalFilterName } from \"webviz-core/src/components/MessagePathSyntax/isTypicalFilterName\";\nimport type { RosDatatypes } from \"webviz-core/src/types/RosDatatypes\";\nimport naturalSort from \"webviz-core/src/util/naturalSort\";\n\n// Generate an easily navigable flat structure given some `datatypes`. We cache\n// this loosely as `datatypes` don't change after the player has connected.\n// The structure looks something like this:\n//\n// {\n//   \"/datatype/name\": {\n//     structureType: \"message\",\n//     nextByName: {\n//       \"some-sub-field\": {\n//         structureType: \"primitive\",\n//         primitiveType: \"uint8\",\n//       }\n//       \"some-boolean-array-sub-field\": {\n//         structureType: \"array\",\n//         next: {\n//           structureType: \"primitive\",\n//           primitiveType: \"bool\"\n//         }\n//       }\n//     }\n//   }\n// }\nlet lastDatatypes;\nlet lastStructures;\nexport function messagePathStructures(datatypes: RosDatatypes): { [string]: MessagePathStructureItemMessage } {\n  if (lastDatatypes !== datatypes) {\n    lastDatatypes = undefined;\n    const structureFor = memoize(\n      (datatype: string): MessagePathStructureItemMessage => {\n        const nextByName: { [string]: MessagePathStructureItem } = {};\n        const rosDatatype = datatypes[datatype];\n        if (!rosDatatype) {\n          throw new Error(`datatype not found: \"${datatype}\"`);\n        }\n        rosDatatype.fields.forEach((msgField) => {\n          if (msgField.isConstant) {\n            return;\n          }\n\n          const next = rosPrimitives.includes(msgField.type)\n            ? {\n                structureType: \"primitive\",\n                primitiveType: ((msgField.type: any): RosPrimitive), // Flow doesn't understand includes()\n                datatype,\n              }\n            : structureFor(msgField.type);\n\n          if (msgField.isArray) {\n            nextByName[msgField.name] = { structureType: \"array\", next, datatype };\n          } else {\n            nextByName[msgField.name] = next;\n          }\n        });\n        return { structureType: \"message\", nextByName, datatype };\n      }\n    );\n\n    lastStructures = {};\n    Object.keys(datatypes).forEach((datatype) => {\n      lastStructures[datatype] = structureFor(datatype);\n    });\n    lastDatatypes = datatypes; // Set at the very end, in case there's an error earlier.\n  }\n  return lastStructures;\n}\n\nexport function validTerminatingStructureItem(\n  structureItem: ?MessagePathStructureItem,\n  validTypes: ?(string[])\n): boolean {\n  return (\n    !!structureItem &&\n    (!validTypes ||\n      validTypes.includes(structureItem.structureType) ||\n      (structureItem.structureType === \"primitive\" && validTypes.includes(structureItem.primitiveType)))\n  );\n}\n\n// Given a datatype, the array of datatypes, and a list of valid types,\n// list out all valid strings for the `messagePath` part of the path (sorted).\nexport function messagePathsForDatatype(\n  datatype: string,\n  datatypes: RosDatatypes,\n  validTypes: ?(string[]),\n  noMultiSlices: ?boolean\n): string[] {\n  const messagePaths = [];\n  function traverse(structureItem: MessagePathStructureItem, builtString: string) {\n    if (validTerminatingStructureItem(structureItem, validTypes)) {\n      messagePaths.push(builtString);\n    }\n    if (structureItem.structureType === \"message\") {\n      for (const name of Object.keys(structureItem.nextByName)) {\n        traverse(structureItem.nextByName[name], `${builtString}.${name}`);\n      }\n    } else if (structureItem.structureType === \"array\") {\n      if (structureItem.next.structureType === \"message\") {\n        // When we have an array of messages, you probably want to filter on\n        // some field, like `/topic.object{some_id=123}`. If we can't find a\n        // typical filter name, fall back to `/topic.object[0]`.\n        const typicalFilterName = Object.keys(structureItem.next.nextByName).find((key) => isTypicalFilterName(key));\n        if (typicalFilterName) {\n          traverse(structureItem.next, `${builtString}[:]{${typicalFilterName}==0}`);\n        } else {\n          traverse(structureItem.next, `${builtString}[0]`);\n        }\n      } else if (!noMultiSlices) {\n        // When dealing with an array of primitives, you likely just want a\n        // scatter plot (if we can do multi-slices).\n        traverse(structureItem.next, `${builtString}[:]`);\n      } else {\n        traverse(structureItem.next, `${builtString}[0]`);\n      }\n    }\n  }\n  const structureItem = messagePathStructures(datatypes)[datatype];\n  if (!structureItem) {\n    throw new Error(`datatype not found \"${datatype}\"`);\n  }\n  traverse(structureItem, \"\");\n  return messagePaths.sort(naturalSort());\n}\n\nexport type StructureTraversalResult = {|\n  valid: boolean,\n  msgPathPart: ?MessagePathPart,\n  structureItem: ?MessagePathStructureItem,\n|};\n\n// Traverse down the structure given a `messagePath`. Return if the path\n// is valid, given the structure, `validTypes`, and `noMultiSlices`.\n//\n// We return the `msgPathPart` that was invalid to determine what sort\n// of autocomplete we should show.\n//\n// We use memoizeWeak because it works with multiple arguments (lodash's memoize\n// does not) and does not hold onto objects as strongly (it uses WeakMap).\nexport const traverseStructure = memoizeWeak(\n  (structureItem: ?MessagePathStructureItem, messagePath: MessagePathPart[]): StructureTraversalResult => {\n    if (!structureItem) {\n      return { valid: false, msgPathPart: undefined, structureItem: undefined };\n    }\n    for (const msgPathPart: MessagePathPart of messagePath) {\n      if (!structureItem) {\n        return { valid: false, msgPathPart, structureItem };\n      }\n      if (msgPathPart.type === \"name\") {\n        if (structureItem.structureType !== \"message\") {\n          return { valid: false, msgPathPart, structureItem };\n        }\n        structureItem = structureItem.nextByName[msgPathPart.name];\n      } else if (msgPathPart.type === \"slice\") {\n        if (structureItem.structureType !== \"array\") {\n          return { valid: false, msgPathPart, structureItem };\n        }\n        structureItem = structureItem.next;\n      } else if (msgPathPart.type === \"filter\") {\n        if (structureItem.structureType !== \"message\" || msgPathPart.path.length === 0 || msgPathPart.value == null) {\n          return { valid: false, msgPathPart, structureItem };\n        }\n        let currentItem = structureItem;\n        for (const name of msgPathPart.path) {\n          if (currentItem.structureType !== \"message\") {\n            return { valid: false, msgPathPart, structureItem };\n          }\n          currentItem = currentItem.nextByName[name];\n          if (currentItem == null) {\n            return { valid: false, msgPathPart, structureItem };\n          }\n        }\n      } else {\n        (msgPathPart.type: empty);\n        throw new Error(`Invalid msgPathPart.type: ${msgPathPart.type}`);\n      }\n    }\n    return { valid: true, msgPathPart: undefined, structureItem };\n  }\n);\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { max, min, flatten } from \"lodash\";\nimport React, { memo, useEffect, useCallback, useState, useRef } from \"react\";\nimport DocumentEvents from \"react-document-events\";\nimport ReactDOM from \"react-dom\";\nimport type { Time } from \"rosbag\";\nimport styled from \"styled-components\";\n\nimport TimeBasedChartTooltip from \"./TimeBasedChartTooltip\";\nimport Button from \"webviz-core/src/components/Button\";\nimport createSyncingComponent from \"webviz-core/src/components/createSyncingComponent\";\nimport KeyListener from \"webviz-core/src/components/KeyListener\";\nimport type { MessageHistoryItem } from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport type { MessagePathDataItem } from \"webviz-core/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems\";\nimport { useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport ChartComponent, { type HoveredElement, type ScaleOptions } from \"webviz-core/src/components/ReactChartjs\";\nimport TimeBasedChartLegend from \"webviz-core/src/components/TimeBasedChart/TimeBasedChartLegend\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport mixins from \"webviz-core/src/styles/mixins.module.scss\";\n\ntype Bounds = {| minX: ?number, maxX: ?number |};\nconst SyncTimeAxis = createSyncingComponent<Bounds, Bounds>(\"SyncTimeAxis\", (dataItems: Bounds[]) => ({\n  minX: min(dataItems.map(({ minX }) => (minX == null ? undefined : minX))),\n  maxX: max(dataItems.map(({ maxX }) => (maxX == null ? undefined : maxX))),\n}));\n\nexport type TooltipItem = {|\n  queriedData: MessagePathDataItem[],\n  receiveTime: Time,\n  headerStamp: ?Time,\n|};\n\nexport const getTooltipItemForMessageHistoryItem = (item: MessageHistoryItem): TooltipItem => ({\n  queriedData: item.queriedData,\n  receiveTime: item.message.receiveTime,\n  headerStamp: item.message.message?.header?.stamp,\n});\n\nexport type TimeBasedChartTooltipData = {|\n  x: number,\n  y: number | string,\n  datasetKey?: string,\n  item: TooltipItem,\n  path: string,\n  value: number | boolean | string,\n  constantName?: ?string,\n  startTime: Time,\n|};\n\nexport type DataPoint = {|\n  x: number,\n  y: number | string,\n  label?: string,\n  labelColor?: string,\n|};\n\nconst SRoot = styled.div`\n  position: relative;\n`;\n\nconst SResetZoom = styled.div`\n  position: absolute;\n  bottom: 33px;\n  right: 10px;\n`;\n\nconst SBar = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  margin-left: -1px;\n  background: yellow;\n  pointer-events: none;\n  opacity: 0.7;\n  display: none;\n  // \"display\" and \"left\" are set by JS, but outside of React.\n`;\n\nconst SLegend = styled.div`\n  display: flex;\n  width: 10%;\n  min-width: 90px;\n  overflow-y: auto;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: start;\n  padding: 30px 0px 10px 0px;\n`;\n\nconst MemoizedTooltips = memo<{}>(function Tooltips() {\n  return (\n    <React.Fragment>\n      <Tooltip contents={<div>Hold v to only scroll vertically</div>} delay={0}>\n        <div style={{ position: \"absolute\", left: 0, top: 0, width: 30, bottom: 0 }} />\n      </Tooltip>\n      <Tooltip placement=\"top\" contents={<div>Hold h to only scroll horizontally</div>} delay={0}>\n        <div style={{ position: \"absolute\", left: 0, right: 0, height: 30, bottom: 0 }} />\n      </Tooltip>\n    </React.Fragment>\n  );\n});\n\ntype Props = {|\n  type: \"scatter\" | \"multicolorLine\",\n  width: number,\n  height: number,\n  zoom: boolean,\n  data: any,\n  tooltips?: TimeBasedChartTooltipData[],\n  xAxes?: any,\n  yAxes: any,\n  annotations?: any[],\n  drawLegend?: boolean,\n  isSynced?: boolean,\n  canToggleLines?: boolean,\n  toggleLine?: (datasetId: string | typeof undefined, lineToHide: string) => void,\n  linesToHide?: { [string]: boolean },\n  datasetId?: string,\n  onClick?: (SyntheticMouseEvent<HTMLCanvasElement>, datalabel: ?any) => void,\n  saveCurrentYs?: (minY: number, maxY: number) => void,\n  xAxisVal?: \"timestamp\" | \"index\" | \"custom\",\n  plugins?: any,\n  scaleOptions?: ?ScaleOptions,\n|};\n\n// Create a chart with any y-axis but with an x-axis that shows time since the\n// start of the bag, and which is kept in sync with other instances of this\n// component. Uses chart.js internally, with a zoom/pan plugin, and with our\n// standard tooltips.\nexport default memo<Props>(function TimeBasedChart(props: Props) {\n  const chartComponent = useRef<?ChartComponent>(null);\n  const tooltip = useRef<?HTMLDivElement>(null);\n  const hasUnmounted = useRef<boolean>(false);\n  const bar = useRef<?HTMLDivElement>(null);\n\n  const [hasUserPanOrZoomed, setHasUserPannedOrZoomed] = useState(false);\n  const [, forceUpdate] = useState();\n\n  const onVisibilityChange = useCallback(\n    () => {\n      if (document.visibilityState === \"visible\") {\n        // HACK: There is a Chrome bug that causes 2d canvas elements to get cleared when the page\n        // becomes hidden on certain hardware:\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=588434\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=591374\n        // We can hack around this by forcing a re-render when the page becomes visible again.\n        // There may be other canvases that this affects, but these seemed like the most important.\n        // Ideally we can find a global workaround but we're not sure there is one — can't just\n        // twiddle the width/height attribute of the canvas as suggested in one of the comments on\n        // a chrome bug; it seems like you really have to redraw the frame from scratch.\n        forceUpdate();\n      }\n    },\n    [forceUpdate]\n  );\n  useEffect(\n    () => {\n      document.addEventListener(\"visibilitychange\", onVisibilityChange);\n      return () => {\n        document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n      };\n    },\n    [onVisibilityChange]\n  );\n\n  const pauseFrame = useMessagePipeline(useCallback((messagePipeline) => messagePipeline.pauseFrame, []));\n\n  const onChartUpdate = useCallback(\n    () => {\n      const resumeFrame = pauseFrame(\"TimeBasedChart\");\n      return () => {\n        resumeFrame();\n      };\n    },\n    [pauseFrame]\n  );\n\n  const { saveCurrentYs, yAxes } = props;\n  const yAxisScaleId = yAxes[0]?.id;\n  const onScaleBoundsUpdate = useCallback(\n    (scales) => {\n      const firstYScale = scales.find(({ id }) => id === yAxisScaleId);\n      if (firstYScale && saveCurrentYs && typeof firstYScale.min === \"number\" && typeof firstYScale.max === \"number\") {\n        saveCurrentYs(firstYScale.min, firstYScale.max);\n      }\n    },\n    [yAxisScaleId, saveCurrentYs]\n  );\n\n  const onPanZoom = useCallback(\n    () => {\n      if (!hasUserPanOrZoomed) {\n        setHasUserPannedOrZoomed(true);\n      }\n    },\n    [hasUserPanOrZoomed, setHasUserPannedOrZoomed]\n  );\n\n  const onResetZoom = useCallback(\n    () => {\n      if (chartComponent.current) {\n        chartComponent.current.resetZoom();\n        setHasUserPannedOrZoomed(false);\n      }\n    },\n    [setHasUserPannedOrZoomed]\n  );\n\n  const [hasVerticalExclusiveZoom, setHasVerticalExclusiveZoom] = useState<boolean>(false);\n  const [hasHorizontalExclusiveZoom, setHasHorizontalExclusiveZoom] = useState<boolean>(false);\n  let zoomMode = \"xy\";\n  if (hasVerticalExclusiveZoom && hasHorizontalExclusiveZoom) {\n    zoomMode = \"xy\";\n  } else if (hasVerticalExclusiveZoom) {\n    zoomMode = \"y\";\n  } else if (hasHorizontalExclusiveZoom) {\n    zoomMode = \"x\";\n  }\n  const keyDownHandlers = React.useMemo(\n    () => ({\n      v: () => setHasVerticalExclusiveZoom(true),\n      h: () => setHasHorizontalExclusiveZoom(true),\n    }),\n    [setHasVerticalExclusiveZoom, setHasHorizontalExclusiveZoom]\n  );\n  const keyUphandlers = React.useMemo(\n    () => ({\n      v: () => setHasVerticalExclusiveZoom(false),\n      h: () => setHasHorizontalExclusiveZoom(false),\n    }),\n    [setHasVerticalExclusiveZoom, setHasHorizontalExclusiveZoom]\n  );\n\n  const removeTooltip = useCallback(() => {\n    if (tooltip.current) {\n      ReactDOM.unmountComponentAtNode(tooltip.current);\n    }\n    if (tooltip.current && tooltip.current.parentNode) {\n      // Satisfy flow.\n      tooltip.current.parentNode.removeChild(tooltip.current);\n      tooltip.current = null;\n    }\n  }, []);\n  // Always clean up tooltips when unmounting.\n  useEffect(\n    () => {\n      return () => {\n        hasUnmounted.current = true;\n        removeTooltip();\n      };\n    },\n    [removeTooltip]\n  );\n\n  const tooltips = props.tooltips || [];\n  // We use a custom tooltip so we can style it more nicely, and so that it can break\n  // out of the bounds of the canvas, in case the panel is small.\n  const updateTooltip = useCallback(\n    (currentChartComponent: ChartComponent, canvas: HTMLCanvasElement, tooltipItem: ?HoveredElement) => {\n      // This is an async callback, so it can fire after this component is unmounted. Make sure that we remove the\n      // tooltip if this fires after unmount.\n      if (!tooltipItem || hasUnmounted.current) {\n        return removeTooltip();\n      }\n\n      // We have to iterate through all of the tooltips every time the user hovers over a point. However, the cost of\n      // running this search is small (< 10ms even with many tooltips) compared to the cost of indexing tooltips by\n      // coordinates and we care more about render time than tooltip responsiveness.\n      const tooltipData = tooltips.find(\n        (_tooltip) => _tooltip.x === tooltipItem.data.x && String(_tooltip.y) === String(tooltipItem.data.y)\n      );\n      if (!tooltipData) {\n        return removeTooltip();\n      }\n\n      if (!tooltip.current) {\n        tooltip.current = document.createElement(\"div\");\n        if (canvas.parentNode) {\n          canvas.parentNode.appendChild(tooltip.current);\n        }\n      }\n\n      if (tooltip.current) {\n        ReactDOM.render(\n          <TimeBasedChartTooltip tooltip={tooltipData}>\n            <div style={{ position: \"absolute\", left: tooltipItem.view.x, top: tooltipItem.view.y }} />\n          </TimeBasedChartTooltip>,\n          tooltip.current\n        );\n      }\n    },\n    [removeTooltip, tooltips]\n  );\n\n  const onMouseMove = useCallback(\n    async (event: MouseEvent) => {\n      const currentChartComponent = chartComponent.current;\n      if (!currentChartComponent || !currentChartComponent.canvas) {\n        removeTooltip();\n        if (bar.current && bar.current.style) {\n          bar.current.style.display = \"none\";\n        }\n        return;\n      }\n      const { canvas } = currentChartComponent;\n      const canvasRect = canvas.getBoundingClientRect();\n      if (\n        event.pageX < canvasRect.left ||\n        event.pageX > canvasRect.right ||\n        event.pageY < canvasRect.top ||\n        event.pageY > canvasRect.bottom\n      ) {\n        removeTooltip();\n        if (bar.current && bar.current.style) {\n          bar.current.style.display = \"none\";\n        }\n        return;\n      }\n\n      const xMousePosition = event.pageX - canvasRect.left;\n      if (bar.current && bar.current.style) {\n        bar.current.style.display = \"block\";\n        bar.current.style.left = `${xMousePosition}px`;\n      }\n\n      const isTargetingCanvas = event.target === canvas;\n      if (!isTargetingCanvas) {\n        removeTooltip();\n        return;\n      }\n\n      if (tooltips && tooltips.length) {\n        const tooltipElement = await currentChartComponent.getElementAtXAxis(event);\n        updateTooltip(currentChartComponent, canvas, tooltipElement);\n      } else {\n        removeTooltip();\n      }\n    },\n    [updateTooltip, removeTooltip, tooltips]\n  );\n\n  const getChartjsOptions = (minX: ?number, maxX: ?number) => {\n    const { xAxes } = props;\n    const plugins = props.plugins || {};\n    const annotations = props.annotations || [];\n\n    // We create these objects every time so that they can be modified.\n    const defaultXTicksSettings = {\n      fontFamily: mixins.monospaceFont,\n      fontSize: 10,\n      fontColor: \"#eee\",\n      maxRotation: 0,\n    };\n    const defaultYTicksSettings = {\n      fontFamily: mixins.monospaceFont,\n      fontSize: 10,\n      fontColor: \"#eee\",\n      padding: 0,\n    };\n    const defaultXAxis = {\n      ticks: defaultXTicksSettings,\n      gridLines: { color: \"rgba(255, 255, 255, 0.2)\", zeroLineColor: \"rgba(255, 255, 255, 0.2)\" },\n    };\n\n    const options = {\n      maintainAspectRatio: false,\n      animation: { duration: 0 },\n      responsiveAnimationDuration: 0,\n      legend: { display: false },\n      // Disable splines, they seem to cause weird rendering artifacts:\n      elements: { line: { tension: 0 } },\n      hover: {\n        intersect: false,\n        mode: \"x\",\n      },\n      tooltips: {\n        intersect: false,\n        mode: \"x\",\n        enabled: false, // Disable native tooltips since we use custom ones.\n      },\n      scales: {\n        xAxes: xAxes\n          ? xAxes.map((xAxis) => {\n              const axis = {\n                ...defaultXAxis,\n                ...xAxis,\n                ticks: {\n                  ...defaultXTicksSettings,\n                  ...xAxis.ticks,\n                },\n              };\n              return axis;\n            })\n          : [defaultXAxis],\n        yAxes: yAxes.map((yAxis) => {\n          const ticks = {\n            ...defaultYTicksSettings,\n            ...yAxis.ticks,\n          };\n          // If the user is manually panning or zooming, don't constrain the y-axis\n          if (hasUserPanOrZoomed) {\n            delete ticks.min;\n            delete ticks.max;\n          }\n\n          return {\n            ...yAxis,\n            ticks,\n          };\n        }),\n      },\n      plugins,\n      annotation: { annotations },\n    };\n    if (!hasUserPanOrZoomed) {\n      // $FlowFixMe\n      options.scales.xAxes[0].ticks.min = minX;\n      // $FlowFixMe\n      options.scales.xAxes[0].ticks.max = maxX;\n    }\n    return options;\n  };\n\n  const {\n    datasetId,\n    type,\n    width,\n    height,\n    drawLegend,\n    canToggleLines,\n    toggleLine,\n    data,\n    isSynced,\n    onClick,\n    linesToHide = {},\n    scaleOptions,\n  } = props;\n  const xAxisVal = props.xAxisVal || \"timestamp\";\n  const xVals = flatten(data.datasets.map(({ data: pts }) => (pts.length > 1 ? pts.map(({ x }) => x) : undefined)));\n  const [minX, maxX] = [min(xVals), max(xVals)];\n\n  const chartProps = {\n    type,\n    width,\n    height,\n    key: `${width}x${height}`,\n    ref: chartComponent,\n    data: { ...data, datasets: data.datasets.filter((dataset) => !linesToHide[dataset.label]) },\n    onScaleBoundsUpdate,\n    onPanZoom,\n    onClick,\n    zoomOptions: {\n      ...ChartComponent.defaultProps.zoomOptions,\n      enabled: props.zoom,\n      mode: zoomMode,\n    },\n    scaleOptions,\n    onChartUpdate,\n  };\n\n  const hasData = chartProps.data.datasets.some((dataset) => dataset.data.length);\n\n  return (\n    <div style={{ display: \"flex\", width: \"100%\" }}>\n      <div style={{ display: \"flex\", width }}>\n        <SRoot onDoubleClick={onResetZoom}>\n          <SBar ref={bar} />\n\n          {/* only sync when using x-axis timestamp and actually plotting data. */}\n          {isSynced && xAxisVal === \"timestamp\" && hasData ? (\n            <SyncTimeAxis data={{ minX, maxX }}>\n              {(syncedMinMax) => {\n                const syncedMinX = syncedMinMax.minX != null ? min([minX, syncedMinMax.minX]) : minX;\n                const syncedMaxX = syncedMinMax.maxX != null ? max([maxX, syncedMinMax.maxX]) : maxX;\n                return <ChartComponent {...chartProps} options={getChartjsOptions(syncedMinX, syncedMaxX)} />;\n              }}\n            </SyncTimeAxis>\n          ) : (\n            <ChartComponent {...chartProps} options={getChartjsOptions(minX, maxX)} />\n          )}\n\n          {hasUserPanOrZoomed && (\n            <SResetZoom>\n              <Button tooltip=\"(shortcut: double-click)\" onClick={onResetZoom}>\n                reset view\n              </Button>\n            </SResetZoom>\n          )}\n\n          {/* Handle tooltips while dragging by checking all document events. */}\n          <DocumentEvents capture onMouseDown={onMouseMove} onMouseUp={onMouseMove} onMouseMove={onMouseMove} />\n          <KeyListener global keyDownHandlers={keyDownHandlers} keyUpHandlers={keyUphandlers} />\n        </SRoot>\n      </div>\n      {props.zoom && <MemoizedTooltips />}\n      {drawLegend && (\n        <SLegend>\n          <TimeBasedChartLegend\n            datasetId={datasetId}\n            canToggleLines={canToggleLines}\n            datasets={data.datasets}\n            linesToHide={linesToHide}\n            toggleLine={toggleLine || (() => {})}\n          />\n        </SLegend>\n      )}\n    </div>\n  );\n});\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { memoize } from \"lodash\";\nimport tinycolor from \"tinycolor2\";\n\nimport { toolsColorScheme } from \"webviz-core/src/util/toolsColorScheme\";\n\n// Inspired by the \"light\" scheme from https://personal.sron.nl/~pault/#sec:qualitative\n// but using our standard tools colors.\nexport const lineColors = [\n  toolsColorScheme.blue.medium,\n  toolsColorScheme.orange.medium,\n  toolsColorScheme.yellow.medium,\n  toolsColorScheme.purple.dark,\n  toolsColorScheme.cyan.medium,\n  toolsColorScheme.green.medium,\n  toolsColorScheme.paleGreen.medium,\n  \"#DDDDDD\",\n];\n\nexport const lightColor: (_: string) => string = memoize(\n  (color: string): string =>\n    tinycolor(color)\n      .brighten(15)\n      .toString()\n);\n\nexport const darkColor: (_: string) => string = memoize(\n  (color: string): string =>\n    tinycolor(color)\n      .darken(30)\n      .toString()\n);\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport styled from \"styled-components\";\n\nexport const PanelToolbarLabel = styled.label`\n  display: block;\n  padding-bottom: 5px;\n`;\n\nexport const PanelToolbarInput = styled.input`\n  width: 100%;\n  margin: 0;\n`;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { uniq } from \"lodash\";\nimport * as React from \"react\";\nimport Dimensions from \"react-container-dimensions\";\nimport { hot } from \"react-hot-loader/root\";\nimport stringHash from \"string-hash\";\nimport styled, { css } from \"styled-components\";\nimport tinycolor from \"tinycolor2\";\n\nimport helpContent from \"./index.help.md\";\nimport Button from \"webviz-core/src/components/Button\";\nimport MessageHistoryDEPRECATED, { type MessageHistoryData } from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport MessagePathInput from \"webviz-core/src/components/MessagePathSyntax/MessagePathInput\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport TimeBasedChart, {\n  getTooltipItemForMessageHistoryItem,\n  type TimeBasedChartTooltipData,\n  type DataPoint,\n} from \"webviz-core/src/components/TimeBasedChart\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport mixins from \"webviz-core/src/styles/mixins.module.scss\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\nimport { positiveModulo } from \"webviz-core/src/util\";\nimport { darkColor, lineColors } from \"webviz-core/src/util/plotColors\";\nimport type { TimestampMethod } from \"webviz-core/src/util/time\";\nimport { subtractTimes, toSec } from \"webviz-core/src/util/time\";\nimport { grey } from \"webviz-core/src/util/toolsColorScheme\";\n\nexport const transitionableRosTypes = [\n  \"bool\",\n  \"int8\",\n  \"uint8\",\n  \"int16\",\n  \"uint16\",\n  \"int32\",\n  \"uint32\",\n  \"int64\",\n  \"uint64\",\n  \"string\",\n];\n\nconst fontFamily = \"'Inter UI', -apple-system, sans-serif\";\nconst fontSize = 10;\nconst fontWeight = \"bold\";\n\nconst SRoot = styled.div`\n  display: flex;\n  flex-grow: 1;\n  z-index: 0; // create new stacking context\n  overflow: hidden;\n`;\n\nconst SAddButton = styled.div`\n  position: absolute;\n  top: 30px;\n  right: 5px;\n  opacity: ${(props) => (props.show ? 1 : 0)};\n  transition: opacity 0.1s ease-in-out;\n  z-index: 1;\n`;\n\nconst SChartContainerOuter = styled.div`\n  width: 100%;\n  flex-grow: 1;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst SChartContainerInner = styled.div`\n  position: relative;\n  margin-top: 10px;\n`;\n\nconst inputColor = tinycolor(colors.toolbar)\n  .setAlpha(0.7)\n  .toHexString();\nconst inputColorBright = tinycolor(colors.toolbar)\n  .lighten(8)\n  .toHexString();\nconst inputLeft = 20;\nconst SInputContainer = styled.div`\n  display: flex;\n  position: absolute;\n  padding-left: ${inputLeft}px;\n  margin-top: -2px;\n  height: 20px;\n  padding-right: 4px;\n  max-width: calc(100% - ${inputLeft}px);\n  min-width: min(100%, 150px); // Don't let it get too small.\n  overflow: hidden;\n  line-height: 20px;\n\n  &:hover {\n    background: ${inputColor};\n  }\n\n  // Move over the first input on hover for the toolbar.\n  ${(props) =>\n    props.shrink &&\n    css`\n      max-width: calc(100% - 150px);\n    `}\n`;\n\nconst SInputDelete = styled.div`\n  display: none;\n  position: absolute;\n  left: ${inputLeft}px;\n  transform: translateX(-100%);\n  user-select: none;\n  height: 20px;\n  line-height: 20px;\n  padding: 0 6px;\n  background: ${inputColor};\n  cursor: pointer;\n\n  &:hover {\n    background ${inputColorBright};\n  }\n\n  ${SInputContainer}:hover & {\n    display: block;\n  }\n`;\n\nconst yAxes = [\n  {\n    ticks: {\n      fontFamily: mixins.monospaceFont,\n      fontSize: 10,\n      fontColor: \"#eee\",\n      maxRotation: 0,\n    },\n    type: \"category\",\n    offset: true,\n  },\n];\n\nconst plugins = {\n  datalabels: {\n    anchor: \"center\",\n    align: -45,\n    offset: 6,\n    clip: true,\n    font: {\n      family: fontFamily,\n      size: fontSize,\n      weight: fontWeight,\n    },\n  },\n  multicolorLineYOffset: 6,\n};\n\nconst scaleOptions = {\n  // Hide all y-axis ticks since each bar on the y-axis is just a separate path.\n  yAxisTicks: \"hide\",\n};\n\nexport type StateTransitionPath = { value: string, timestampMethod: TimestampMethod };\nexport type StateTransitionConfig = { paths: StateTransitionPath[] };\n\nexport function openSiblingStateTransitionsPanel(\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n  topicName: string\n) {\n  openSiblingPanel(\"StateTransitions\", (config: StateTransitionConfig) => {\n    return ({\n      ...config,\n      paths: uniq(config.paths.concat([{ value: topicName, enabled: true, timestampMethod: \"receiveTime\" }])),\n    }: StateTransitionConfig);\n  });\n}\n\ntype Props = {\n  config: StateTransitionConfig,\n  saveConfig: ($Shape<StateTransitionConfig>) => void,\n  isHovered: boolean,\n};\n\nclass StateTransitions extends React.PureComponent<Props> {\n  static panelType = \"StateTransitions\";\n  static defaultConfig = { paths: [] };\n\n  _onInputChange = (value: string, index: ?number) => {\n    if (index == null) {\n      throw new Error(\"index not set\");\n    }\n    const newPaths = this.props.config.paths.slice();\n    newPaths[index] = { ...newPaths[index], value: value.trim() };\n    this.props.saveConfig({ paths: newPaths });\n  };\n\n  _onInputTimestampMethodChange = (value: TimestampMethod, index: ?number) => {\n    if (index == null) {\n      throw new Error(\"index not set\");\n    }\n    const newPaths = this.props.config.paths.slice();\n    newPaths[index] = { ...newPaths[index], timestampMethod: value };\n    this.props.saveConfig({ paths: newPaths });\n  };\n\n  render() {\n    const { paths } = this.props.config;\n    const onlyTopicsHeight = paths.length * 55;\n    const heightPerTopic = onlyTopicsHeight / paths.length;\n    const xAxisHeight = 30;\n    const height = Math.max(80, onlyTopicsHeight + xAxisHeight);\n\n    return (\n      <SRoot>\n        <PanelToolbar floating helpContent={helpContent} />\n        <SAddButton show={this.props.isHovered}>\n          <Button\n            onClick={() =>\n              this.props.saveConfig({\n                paths: [...this.props.config.paths, { value: \"\", timestampMethod: \"receiveTime\" }],\n              })\n            }>\n            add\n          </Button>\n        </SAddButton>\n        <MessageHistoryDEPRECATED paths={paths.map(({ value }) => value)}>\n          {({ itemsByPath, startTime }: MessageHistoryData) => {\n            const tooltips = [];\n            const data = {\n              yLabels: paths.map((_path, pathIndex) => pathIndex.toString()),\n              datasets: paths.map(({ value: path, timestampMethod }, pathIndex) => {\n                const dataItem = {\n                  borderWidth: 10,\n                  colors: [undefined], // First should be undefined to make sure we don't color in the bar before the change.\n                  data: [],\n                  fill: false,\n                  label: pathIndex.toString(),\n                  key: pathIndex.toString(),\n                  pointBackgroundColor: [],\n                  pointBorderColor: \"transparent\",\n                  pointHoverRadius: 3,\n                  pointRadius: 1.25,\n                  pointStyle: \"circle\",\n                  showLine: true,\n                  datalabels: {\n                    display: [],\n                  },\n                };\n                const baseColors = getGlobalHooks().perPanelHooks().StateTransitions.customStateTransitionColors[\n                  path\n                ] || [grey, ...lineColors];\n                let previousValue, previousTimestamp;\n                for (let index = 0; index < itemsByPath[path].length; index++) {\n                  const item = getTooltipItemForMessageHistoryItem(itemsByPath[path][index]);\n                  if (item.queriedData.length !== 1) {\n                    continue;\n                  }\n\n                  const timestamp = timestampMethod === \"headerStamp\" ? item.headerStamp : item.receiveTime;\n                  if (!timestamp) {\n                    continue;\n                  }\n\n                  const { constantName, value } = item.queriedData[0];\n\n                  // Skip duplicates.\n                  if (\n                    previousTimestamp &&\n                    toSec(subtractTimes(previousTimestamp, timestamp)) === 0 &&\n                    previousValue === value\n                  ) {\n                    continue;\n                  }\n                  previousTimestamp = timestamp;\n\n                  // Skip anything that cannot be cast to a number or is a string.\n                  if (Number.isNaN(value) && typeof value !== \"string\") {\n                    continue;\n                  }\n\n                  if (typeof value !== \"number\" && typeof value !== \"boolean\" && typeof value !== \"string\") {\n                    continue;\n                  }\n\n                  const valueForColor = typeof value === \"string\" ? stringHash(value) : Math.round(Number(value));\n                  const color = baseColors[positiveModulo(valueForColor, Object.values(baseColors).length)];\n                  // We add all points, colors, tooltips, etc to the *beginning* of the list, not the end. When\n                  // datalabels overlap we usually care about the later ones (further right). By putting those points\n                  // first in the list, we prioritize datalabels there when the library does its autoclipping.\n                  dataItem.pointBackgroundColor.unshift(darkColor(color));\n                  dataItem.colors.unshift(color);\n                  const label = constantName ? `${constantName} (${String(value)})` : String(value);\n                  const x = toSec(subtractTimes(timestamp, startTime));\n                  const y = pathIndex.toString();\n                  const tooltip: TimeBasedChartTooltipData = {\n                    x,\n                    y,\n                    item,\n                    path,\n                    value,\n                    constantName,\n                    startTime,\n                  };\n                  tooltips.unshift(tooltip);\n                  const dataPoint: DataPoint = { x, y };\n                  const showDatalabel = previousValue === undefined || previousValue !== value;\n                  // Use \"auto\" here so that the datalabels library can clip datalabels if they overlap.\n                  dataItem.datalabels.display.unshift(showDatalabel ? \"auto\" : false);\n                  if (showDatalabel) {\n                    dataPoint.label = label;\n                    dataPoint.labelColor = color;\n                  }\n                  dataItem.data.unshift(dataPoint);\n                  previousValue = value;\n                }\n                return dataItem;\n              }),\n            };\n\n            const marginRight = 20;\n\n            return (\n              <SChartContainerOuter>\n                <Dimensions>\n                  {({ width }) => (\n                    <SChartContainerInner style={{ width: width - marginRight, height }}>\n                      <TimeBasedChart\n                        zoom\n                        isSynced\n                        width={width - marginRight}\n                        height={height}\n                        data={data}\n                        type=\"multicolorLine\"\n                        yAxes={yAxes}\n                        plugins={plugins}\n                        scaleOptions={scaleOptions}\n                        tooltips={tooltips}\n                      />\n\n                      {paths.map(({ value: path, timestampMethod }, index) => (\n                        <SInputContainer\n                          key={index}\n                          style={{ top: index * heightPerTopic }}\n                          shrink={index === 0 && this.props.isHovered}>\n                          <SInputDelete\n                            onClick={() => {\n                              const newPaths = this.props.config.paths.slice();\n                              newPaths.splice(index, 1);\n                              this.props.saveConfig({ paths: newPaths });\n                            }}>\n                            ✕\n                          </SInputDelete>\n                          <MessagePathInput\n                            path={path}\n                            onChange={this._onInputChange}\n                            index={index}\n                            autoSize\n                            validTypes={transitionableRosTypes}\n                            noMultiSlices\n                            timestampMethod={timestampMethod}\n                            onTimestampMethodChange={this._onInputTimestampMethodChange}\n                          />\n                        </SInputContainer>\n                      ))}\n                    </SChartContainerInner>\n                  )}\n                </Dimensions>\n              </SChartContainerOuter>\n            );\n          }}\n        </MessageHistoryDEPRECATED>\n      </SRoot>\n    );\n  }\n}\n\nexport default hot(Panel<StateTransitionConfig>(StateTransitions));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport CheckIcon from \"@mdi/svg/svg/check.svg\";\nimport DatabaseIcon from \"@mdi/svg/svg/database.svg\";\nimport { uniq } from \"lodash\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport styles from \"webviz-core/src/components/PanelToolbar/index.module.scss\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport type TopicGroup = {\n  suffix: string,\n  datatype: string,\n};\n\ntype Props = {\n  onChange: (topic: string) => void,\n  topicToRender: string,\n  topics: $ReadOnlyArray<Topic>,\n  // Use either one of these:\n  // singleTopicDatatype only supports a single datatype (search and select based on datatype)\n  // topicsGroups selects the \"parent\" path of a group of topics (if either of the group topics suffixes+datatypes match)\n  singleTopicDatatype?: string,\n  topicsGroups?: TopicGroup[],\n  defaultTopicToRender: string,\n};\n\nconst SDiv = styled.div`\n  display: flex;\n  cursor: pointer;\n  padding: 8px;\n  height: 32px;\n`;\n\nconst SSpan = styled.span`\n  flex: flex-start;\n  min-width: 150px;\n  height: 17px;\n`;\n\nconst SIconSpan = styled.span`\n  flex: flex-end;\n  svg {\n    fill: white;\n    width: 15px;\n    height: 15px;\n  }\n`;\n\nexport default function TopicToRenderMenu({\n  onChange,\n  topicToRender,\n  topics,\n  topicsGroups,\n  singleTopicDatatype,\n  defaultTopicToRender,\n}: Props) {\n  if (topicsGroups && singleTopicDatatype) {\n    throw new Error(\"Cannot set both topicsGroups and singleTopicDatatype\");\n  }\n  if (!topicsGroups && !singleTopicDatatype) {\n    throw new Error(\"Must set either topicsGroups or singleTopicDatatype\");\n  }\n  const availableTopics: string[] = [];\n  for (const topic of topics) {\n    if (topicsGroups) {\n      for (const topicGroup of topicsGroups) {\n        if (topic.name.endsWith(topicGroup.suffix) && topic.datatype === topicGroup.datatype) {\n          const parentTopic = topic.name.slice(0, topic.name.length - topicGroup.suffix.length);\n          availableTopics.push(parentTopic);\n        }\n      }\n    } else {\n      if (topic.datatype === singleTopicDatatype) {\n        availableTopics.push(topic.name);\n      }\n    }\n  }\n  // Keeps only the first occurrence of each topic.\n  const renderTopics: string[] = uniq([defaultTopicToRender, ...availableTopics, topicToRender]);\n  const parentTopicSpan = (topic: string, available: boolean) => {\n    const topicDiv = topic ? topic : <span style={{ fontStyle: \"italic\" }}>Default</span>;\n    return (\n      <span>\n        {topicDiv}\n        {available ? \"\" : \" (not available)\"}\n      </span>\n    );\n  };\n\n  return (\n    <Dropdown\n      toggleComponent={\n        <Icon\n          fade\n          tooltip={\n            topicsGroups\n              ? `Parent topics selected by topic suffixes:\\n ${topicsGroups.map((group) => group.suffix).join(\"\\n\")}`\n              : `Topics selected by datatype: ${singleTopicDatatype || \"\"}` // add || \"\" is to fix flow here\n          }\n          tooltipProps={{ placement: \"top\" }}\n          style={{ color: topicToRender === defaultTopicToRender ? colors.LIGHT1 : colors.ORANGE }}\n          dataTest={\"topic-set\"}>\n          <DatabaseIcon className={styles.icon} />\n        </Icon>\n      }>\n      {renderTopics.map((topic, idx) => (\n        <SDiv\n          style={topicToRender === topic ? { backgroundColor: \"rgba(59, 46, 118, 0.6)\" } : {}}\n          key={topic}\n          onClick={() => {\n            onChange(topic);\n          }}>\n          <SSpan>{parentTopicSpan(topic, availableTopics.includes(topic))}</SSpan>\n          {topicToRender === topic ? (\n            <SIconSpan>\n              <CheckIcon />\n            </SIconSpan>\n          ) : null}\n        </SDiv>\n      ))}\n    </Dropdown>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CursorDefault from \"@mdi/svg/svg/cursor-default.svg\";\nimport * as React from \"react\";\nimport { type MouseEventObject } from \"regl-worldview\";\nimport styled from \"styled-components\";\n\nimport GeneralInfo from \"./GeneralInfo\";\nimport LinkedGlobalVariableList from \"./LinkedGlobalVariableList\";\nimport ObjectDetails from \"./ObjectDetails\";\nimport PointCloudDetails from \"./PointCloudDetails\";\nimport type { InteractionData } from \"./types\";\nimport useLinkedGlobalVariables from \"./useLinkedGlobalVariables\";\nimport Checkbox from \"webviz-core/src/components/Checkbox\";\nimport ExpandingToolbar, { ToolGroup, ToolGroupFixedSizePane } from \"webviz-core/src/components/ExpandingToolbar\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport PanelContext from \"webviz-core/src/components/PanelContext\";\nimport { decodeAdditionalFields } from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder\";\nimport styles from \"webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\";\nimport type { SaveConfig, PanelConfig } from \"webviz-core/src/types/panels\";\nimport { useChangeDetector } from \"webviz-core/src/util/hooks\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const SRow = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0;\n  margin: 4px 0;\n`;\nexport const SLabel = styled.label`\n  width: ${(props) => (props.width ? `${props.width}px` : \"80px\")};\n  margin: 4px 0;\n  font-size: 10px;\n`;\nexport const SValue = styled.div`\n  color: ${colors.HIGHLIGHT};\n  word-break: break-word;\n`;\nexport const SEmptyState = styled.div`\n  color: ${colors.TEXT_MUTED};\n  line-height: 1.4;\n  margin-bottom: 8px;\n`;\n\nexport const OBJECT_TAB_TYPE = \"Clicked object\";\nexport const LINKED_VARIABLES_TAB_TYPE = \"Linked variables\";\nexport type TabType = typeof OBJECT_TAB_TYPE | typeof LINKED_VARIABLES_TAB_TYPE;\n\ntype Props = {\n  defaultSelectedTab?: ?TabType, // for UI testing\n  interactionData: ?InteractionData,\n  isDrawing: boolean,\n  onClearSelectedObject: () => void,\n  selectedObject: ?MouseEventObject,\n};\n\ntype PropsWithConfig = Props & {\n  disableAutoOpenClickedObject: boolean,\n  saveConfig: SaveConfig<PanelConfig>,\n};\n\nconst InteractionsBaseComponent = React.memo<PropsWithConfig>(function InteractionsBaseComponent({\n  selectedObject,\n  interactionData,\n  isDrawing,\n  onClearSelectedObject,\n  defaultSelectedTab,\n  disableAutoOpenClickedObject,\n  saveConfig,\n}: PropsWithConfig) {\n  const [selectedTab, setSelectedTab] = React.useState<?TabType>(defaultSelectedTab);\n  const selectedObjectChanged = useChangeDetector([selectedObject], !!selectedObject);\n  React.useEffect(\n    () => {\n      if (!disableAutoOpenClickedObject && !isDrawing) {\n        // auto open Object tab if the object changed, the tab is not already open, and the user is not drawing\n        if (selectedObjectChanged && selectedTab !== OBJECT_TAB_TYPE) {\n          setSelectedTab(OBJECT_TAB_TYPE);\n        } else if (!selectedObject && selectedTab === OBJECT_TAB_TYPE) {\n          // auto collapse the Object pane when there is no object and auto open is enabled\n          setSelectedTab(null);\n        }\n      }\n    },\n    [disableAutoOpenClickedObject, selectedObjectChanged, selectedTab, selectedObject, isDrawing]\n  );\n\n  const { object } = selectedObject || {};\n  const isPointCloud = object && object.type === 102;\n  const maybeFullyDecodedObject = React.useMemo(\n    () => (isPointCloud ? { ...selectedObject, object: decodeAdditionalFields(object) } : selectedObject),\n    [isPointCloud, object, selectedObject]\n  );\n\n  const { linkedGlobalVariables } = useLinkedGlobalVariables();\n\n  return (\n    <ExpandingToolbar\n      tooltip=\"Clicked objects and linked variables\"\n      icon={\n        <Icon style={{ color: \"white\" }}>\n          <CursorDefault />\n        </Icon>\n      }\n      className={styles.buttons}\n      selectedTab={selectedTab}\n      onSelectTab={(newSelectedTab) => {\n        if (disableAutoOpenClickedObject && object && !newSelectedTab) {\n          // automatically unselect object if the user force close the tab when disableAutoOpenClickedObject is enabled\n          onClearSelectedObject();\n        }\n        setSelectedTab(newSelectedTab);\n      }}>\n      <ToolGroup name={OBJECT_TAB_TYPE}>\n        <ToolGroupFixedSizePane>\n          {selectedObject ? (\n            <>\n              {interactionData && <GeneralInfo selectedObject={selectedObject} interactionData={interactionData} />}\n              {isPointCloud && (\n                <PointCloudDetails selectedObject={maybeFullyDecodedObject} interactionData={interactionData} />\n              )}\n              <ObjectDetails\n                linkedGlobalVariables={linkedGlobalVariables}\n                selectedObject={maybeFullyDecodedObject}\n                interactionData={interactionData}\n              />\n            </>\n          ) : (\n            <SEmptyState>Click an object in the 3D view to select it.</SEmptyState>\n          )}\n          <Checkbox\n            label=\"Open this panel automatically\"\n            checked={!disableAutoOpenClickedObject}\n            onChange={() => saveConfig({ disableAutoOpenClickedObject: !disableAutoOpenClickedObject })}\n          />\n        </ToolGroupFixedSizePane>\n      </ToolGroup>\n      <ToolGroup name={LINKED_VARIABLES_TAB_TYPE}>\n        <ToolGroupFixedSizePane>\n          <LinkedGlobalVariableList linkedGlobalVariables={linkedGlobalVariables} />\n        </ToolGroupFixedSizePane>\n      </ToolGroup>\n    </ExpandingToolbar>\n  );\n});\n\n// Wrap the Interactions so that we don't rerender every time any part of the PanelContext config changes, but just the\n// one value that we care about.\nexport default function Interactions(props: Props) {\n  const { saveConfig, config: { disableAutoOpenClickedObject } = {} } = React.useContext(PanelContext) || {};\n  return (\n    <InteractionsBaseComponent\n      {...props}\n      saveConfig={saveConfig}\n      disableAutoOpenClickedObject={disableAutoOpenClickedObject}\n    />\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { every, uniq, keyBy, isEmpty } from \"lodash\";\n\nimport { isTypicalFilterName } from \"webviz-core/src/components/MessagePathSyntax/isTypicalFilterName\";\nimport { jsonTreeTheme } from \"webviz-core/src/util/globalConstants\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const diffArrow = \"->\";\nexport const diffLabels = {\n  ADDED: { labelText: \"WEBVIZ_DIFF___ADDED\", color: colors.DARK6, backgroundColor: \"#182924\", indicator: \"+\" },\n  DELETED: { labelText: \"WEBVIZ_DIFF___DELETED\", color: colors.DARK6, backgroundColor: \"#3d2327\", indicator: \"-\" },\n  CHANGED: { labelText: \"WEBVIZ_DIFF___CHANGED\", color: jsonTreeTheme.base0B },\n  ID: { labelText: \"WEBVIZ_DIFF___ID\" },\n};\n\n// $FlowFixMe - Flow doesn't understand `Object.values`.\nexport const diffLabelsByLabelText = keyBy(Object.values(diffLabels), \"labelText\");\n\nexport default function getDiff(\n  before: mixed,\n  after: mixed,\n  idLabel: ?string = null,\n  showFullMessageForDiff: boolean = false\n) {\n  if (Array.isArray(before) && Array.isArray(after)) {\n    let idToCompareWith: ?string;\n    const allItems = before.concat(after);\n    if (allItems[0] && typeof allItems[0] === \"object\") {\n      let candidateIdsToCompareWith = {};\n      if (allItems[0].id != null) {\n        candidateIdsToCompareWith.id = { before: [], after: [] };\n      }\n      for (const key in allItems[0]) {\n        if (isTypicalFilterName(key)) {\n          candidateIdsToCompareWith[key] = { before: [], after: [] };\n        }\n      }\n      if (!every(allItems, (item) => item && typeof item === \"object\")) {\n        candidateIdsToCompareWith = {};\n      }\n      for (const idKey in candidateIdsToCompareWith) {\n        for (const beforeItem of before) {\n          // $FlowFixMe - we know beforeItem is an object at this point\n          if (beforeItem[idKey] != null) {\n            candidateIdsToCompareWith[idKey].before.push(beforeItem[idKey]);\n          }\n        }\n      }\n      for (const idKey in candidateIdsToCompareWith) {\n        for (const afterItem of after) {\n          // $FlowFixMe - we know afterItem is an object at this point\n          if (afterItem[idKey] != null) {\n            candidateIdsToCompareWith[idKey].after.push(afterItem[idKey]);\n          }\n        }\n      }\n      for (const idKey in candidateIdsToCompareWith) {\n        const { before: candidateIdBefore, after: candidateIdAfter } = candidateIdsToCompareWith[idKey];\n        if (uniq(candidateIdBefore).length === before.length && uniq(candidateIdAfter).length === after.length) {\n          idToCompareWith = idKey;\n          break;\n        }\n      }\n    }\n\n    if (idToCompareWith) {\n      const unmatchedAfterById = keyBy(after, idToCompareWith);\n      const diff = [];\n      for (const beforeItem of before) {\n        if (!beforeItem || typeof beforeItem !== \"object\") {\n          throw new Error(\"beforeItem is invalid; should have checked this earlier\");\n        }\n        const id = beforeItem[idToCompareWith];\n        const innerDiff = getDiff(beforeItem, unmatchedAfterById[id], idToCompareWith, showFullMessageForDiff);\n        delete unmatchedAfterById[id];\n        if (!isEmpty(innerDiff)) {\n          const isDeleted =\n            Object.keys(innerDiff).length === 1 && Object.keys(innerDiff)[0] === diffLabels.DELETED.labelText;\n          diff.push(isDeleted ? innerDiff : { [diffLabels.ID.labelText]: { [idToCompareWith]: id }, ...innerDiff });\n        }\n      }\n      for (const afterItem of Object.values(unmatchedAfterById)) {\n        const innerDiff = getDiff(undefined, afterItem, idToCompareWith, showFullMessageForDiff);\n        if (!isEmpty(innerDiff)) {\n          diff.push(innerDiff);\n        }\n      }\n      return diff;\n    }\n  }\n\n  if (before && after && typeof before === \"object\" && typeof after === \"object\") {\n    const diff = {};\n    const allKeys = Object.keys(before).concat(Object.keys(after));\n    for (const key of uniq(allKeys)) {\n      const innerDiff = getDiff(before[key], after[key], null, showFullMessageForDiff);\n      if (!isEmpty(innerDiff)) {\n        diff[key] = innerDiff;\n      } else if (showFullMessageForDiff) {\n        diff[key] = before[key];\n      }\n    }\n    return diff;\n  }\n\n  if (before === after) {\n    return undefined;\n  }\n  if (before === undefined) {\n    const afterIsNotObj = Array.isArray(after) || typeof after !== \"object\";\n    if (!idLabel || afterIsNotObj) {\n      return { [diffLabels.ADDED.labelText]: after };\n    }\n    const idLabelObj = { [diffLabels.ID.labelText]: { [idLabel]: { ...after }[idLabel] } };\n    return { [diffLabels.ADDED.labelText]: { ...idLabelObj, ...after } };\n  }\n  if (after === undefined) {\n    const beforeIsNotObj = Array.isArray(before) || typeof before !== \"object\";\n    if (!idLabel || beforeIsNotObj) {\n      return { [diffLabels.DELETED.labelText]: before };\n    }\n    const idLabelObj = { [diffLabels.ID.labelText]: { [idLabel]: { ...before }[idLabel] } };\n    return { [diffLabels.DELETED.labelText]: { ...idLabelObj, ...before } };\n  }\n  return {\n    [diffLabels.CHANGED.labelText]: `${JSON.stringify(before) || \"\"} ${diffArrow} ${JSON.stringify(after) || \"\"}`,\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { VertexBuffer } from \"./types\";\nimport {\n  DATATYPE,\n  type FieldOffsetsAndReaders,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder\";\nimport { type FieldReader, Uint8Reader } from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/Readers\";\nimport { type ColorMode } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor\";\n\nexport const FLOAT_SIZE = Float32Array.BYTES_PER_ELEMENT;\n\n// Reinterpret a buffer of bytes as a buffer of float values\nexport function reinterpretBufferToFloat(buffer: Uint8Array): Float32Array {\n  return new Float32Array(new Uint8Array(buffer).buffer, 0, buffer.length / Float32Array.BYTES_PER_ELEMENT);\n}\n\n// Expand a buffer of byte values, transforming each value into a float\nexport function expandBufferToFloat(buffer: Uint8Array): Float32Array {\n  return new Float32Array(buffer);\n}\n\n// Utility function to get values from vertex buffers.\n// Since data is stored as floats, we need to divide both offset and stride\n// to get the actual values within the buffer\nexport function getVertexValue(buffer: VertexBuffer, index: number): number {\n  const data = buffer.buffer;\n  const offset = buffer.offset;\n  const stride = buffer.stride;\n  return data[index * stride + offset];\n}\n\n// Utility function to get multiple consecutive values from vertex buffers.\nexport function getVertexValues(buffer: VertexBuffer, index: number, count: number): number[] {\n  const ret = [];\n  const data = buffer.buffer;\n  const offset = buffer.offset;\n  const stride = buffer.stride;\n  for (let i = 0; i < count; i++) {\n    ret.push(data[index * stride + offset + i]);\n  }\n  return ret;\n}\n\n// The number of points in a buffer is equal to the length of the buffer\n// divided by the number of float values in each vertex\nexport function getVertexCount(buffer: VertexBuffer): number {\n  return buffer.buffer.length / buffer.stride;\n}\n\n// Utility function to check if the size of each vertex in a buffer is\n// supported by WebGL 1.0. The maximum stride size is 255 bytes.\n// Also, stride must be a multiple of sizeof(float) in order for us\n// to reinterpret the data buffer\nfunction hasValidStride(stride: number): boolean {\n  return stride <= 255 && stride % FLOAT_SIZE === 0;\n}\n\n// This is a fallback function to extract values from data buffers\n// It's used on some cases where we cannot send the data as is to the GPU,\n// either because we ended up with an unsupported vertex size (see hasValidStride())\n// or because the color field has a datatype that is not easy to work with in shaders\n// This function always returns a Float32Array with three values for each point\n// in the cloud since it might be used for both colors and/or positions.\nfunction extractValues({\n  data,\n  readers,\n  pointCount,\n  stride,\n}: {\n  data: Uint8Array,\n  readers: (?FieldReader)[],\n  pointCount: number,\n  stride: number,\n}): VertexBuffer {\n  const COMPONENT_COUNT = 3;\n  const buffer = new Float32Array(COMPONENT_COUNT * pointCount);\n  for (let i = 0; i < pointCount; i++) {\n    const pointStart = i * stride;\n    for (let j = 0; j < readers.length; j++) {\n      const reader = readers[j];\n      let value = Number.NaN;\n      if (reader != null) {\n        value = reader.read(data, pointStart);\n      }\n      buffer[i * COMPONENT_COUNT + j] = value;\n    }\n  }\n  return {\n    buffer,\n    offset: 0,\n    stride: COMPONENT_COUNT,\n  };\n}\n\nexport function createPositionBuffer({\n  data,\n  fields,\n  pointCount,\n  stride,\n}: {|\n  data: Uint8Array,\n  fields: FieldOffsetsAndReaders,\n  pointCount: number,\n  stride: number,\n|}): VertexBuffer {\n  // Check if all position components are stored next to each other\n  const positionIsValid =\n    fields.y.offset - fields.x.offset === FLOAT_SIZE && fields.z.offset - fields.y.offset === FLOAT_SIZE;\n  if (positionIsValid && hasValidStride(stride)) {\n    // Create a VBO for positions by recasting the data array into a float array\n    // This will give us the correct values for (x,y,z) tuples.\n    // This way we don't need to traverse the array in order to get the [x, y, z] values\n    // We're paying a memory cost in order to achieve the best performance.\n    return {\n      buffer: reinterpretBufferToFloat(data),\n      // Divide by sizeof(float) since offset and stride are defined based on number of\n      // float values, not bytes\n      offset: fields.x.offset / FLOAT_SIZE,\n      stride: stride / FLOAT_SIZE,\n    };\n  }\n\n  // We cannot use positions as is from data buffer. Extract them.\n  console.info(`Vertex buffer stride will be too big (${stride}). Extracting positions from data in CPU`);\n  return extractValues({\n    data,\n    readers: [fields.x.reader, fields.y.reader, fields.z.reader],\n    pointCount,\n    stride,\n  });\n}\n\nexport function createColorBuffer({\n  data,\n  fields,\n  colorMode,\n  pointCount,\n  stride,\n}: {|\n  data: Uint8Array,\n  fields: FieldOffsetsAndReaders,\n  colorMode: ColorMode,\n  pointCount: number,\n  stride: number,\n|}): ?VertexBuffer {\n  if (colorMode.mode === \"flat\") {\n    // If color mode is \"flat\", we don't need a color buffer since\n    // we'll be using a constant value\n    return null;\n  }\n\n  if (colorMode.mode === \"rgb\") {\n    const rgbOffset = fields.rgb.offset || 0;\n    if (hasValidStride(FLOAT_SIZE * stride)) {\n      return {\n        // RGB colors are encoded in a single 4-byte tuple and unfortunately we cannot extract\n        // them in shaders by just reinterpreting the data buffer.\n        // In addition, the supported WebGL implementation constraints VBOs to be of type float,\n        // so we cannot send the data as is. Then, we're converting the data array into a float\n        // array, transforming each byte value into a float.\n        // We're definitely paying a memory cost here\n        buffer: expandBufferToFloat(data),\n        // No need to divide/multiply by sizeof(float) here since now every byte value\n        // in data array is transformed to a float value.\n        offset: rgbOffset, //< float values from the start of each vertex\n        stride, //< float values between vertices\n      };\n    }\n    // stride is too big. Extract colors from data\n    console.info(`Vertex buffer stride will be too big (${4 * stride}). Extracting RGB colors from data in CPU`);\n    return extractValues({\n      data,\n      readers: [new Uint8Reader(rgbOffset + 0), new Uint8Reader(rgbOffset + 1), new Uint8Reader(rgbOffset + 2)],\n      stride,\n      pointCount,\n    });\n  }\n\n  const colorField = fields[colorMode.colorField || \"rgb\"];\n\n  // If the color is computed from any of the other float fields (i.e. x positions)\n  // we can do the same trick as for positions, with just a different offset\n  // based on the selected color field. We also need to make sure the offset\n  // memory alignment is correct (that is, it's divisible by sizeof(float)). There\n  // might be other values previous to this one that have different memory alignments.\n  if (colorField.datatype === DATATYPE.float32 && colorField.offset % FLOAT_SIZE === 0 && hasValidStride(stride)) {\n    return {\n      buffer: reinterpretBufferToFloat(data),\n      // Divide by sizeof(float) since offset and stride are defined based on number of\n      // float values, not bytes\n      offset: colorField.offset / FLOAT_SIZE, //< float values from the start of each vertex\n      stride: stride / FLOAT_SIZE, //< float values between vertices\n    };\n  }\n\n  // Color datatype is not float or stride is too big\n  // Just extract color data from buffer using CPU\n  console.info(\"Cannot reinterpret data. Extracting color buffer using CPU\");\n  return extractValues({\n    data,\n    readers: [colorField.reader],\n    stride,\n    pointCount,\n  });\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { createPositionBuffer, createColorBuffer, getVertexCount, getVertexValue } from \"./buffers\";\nimport type { PointCloudMarker } from \"./types\";\nimport { getFieldOffsetsAndReaders } from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder\";\nimport {\n  DEFAULT_FLAT_COLOR,\n  type ColorMode,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor\";\n\nexport function parseHexColor(color: string) {\n  const parsedFlatColor = parseInt(color.slice(1), 16);\n  return [(parsedFlatColor >> 16) & 0xff, (parsedFlatColor >> 8) & 0xff, parsedFlatColor & 0xff, 1];\n}\n\n// Decode a marker and generate position and color buffers for rendering\n// The resulting marker should be memoized for better performance\nexport function decodeMarker(marker: PointCloudMarker) {\n  const { fields = [], settings = {}, point_step: stride, width, height, hitmapColors, data } = marker;\n  const offsetsAndReaders = getFieldOffsetsAndReaders(fields);\n  const { rgb: { offset: rgbOffset } = {} } = offsetsAndReaders;\n\n  // Calculate the number of points in the cloud.\n  // Do not use data.length, since it doesn't work with sparse point clouds.\n  const pointCount = width * height;\n\n  const colorMode: ColorMode = settings.colorMode\n    ? settings.colorMode\n    : rgbOffset != null\n    ? { mode: \"rgb\" }\n    : { mode: \"flat\", flatColor: DEFAULT_FLAT_COLOR };\n\n  const isHitmap = !!hitmapColors;\n\n  const positionBuffer = createPositionBuffer({\n    data,\n    fields: offsetsAndReaders,\n    pointCount,\n    stride,\n  });\n\n  // If hitmapColors are provided, we don't need a colorBuffer\n  // This check will also avoid computing min/max values on CPU\n  // since they're not needed for hitmap.\n  const colorBuffer = isHitmap\n    ? null\n    : createColorBuffer({\n        data,\n        fields: offsetsAndReaders,\n        colorMode,\n        pointCount,\n        stride,\n      });\n\n  let minColorValue: number = Number.POSITIVE_INFINITY;\n  let maxColorValue: number = Number.NEGATIVE_INFINITY;\n\n  // For some color modes, we need to compute min/max values for the selected color field\n  // Unfortunately, we cannot do this in GPU and we need to traverse the color array to\n  // fetch the required values.\n  // These calculations can be ignored if we're rendering to the hitmap\n  if (colorBuffer && !isHitmap && (colorMode.mode === \"gradient\" || colorMode.mode === \"rainbow\")) {\n    let hasMinValue = false;\n    if (colorMode.minValue) {\n      hasMinValue = true;\n      minColorValue = colorMode.minValue;\n    }\n    let hasMaxValue = false;\n    if (colorMode.maxValue) {\n      hasMaxValue = true;\n      maxColorValue = colorMode.maxValue;\n    }\n    // It's possible for colorMode to provide min/max values (which may be different than\n    // the actual min/max values in the color buffer).\n    if (!hasMinValue || !hasMaxValue) {\n      for (let i = 0; i < getVertexCount(colorBuffer); i++) {\n        const pos = getVertexValue(positionBuffer, i);\n        if (Number.isNaN(pos)) {\n          // if the position is NaN then don't count this point\n          // this is to support non-dense point clouds\n          // https://answers.ros.org/question/234455/pointcloud2-and-pointfield/\n          continue;\n        }\n        const value = getVertexValue(colorBuffer, i);\n        if (!Number.isNaN(value)) {\n          if (!hasMinValue && value < minColorValue) {\n            minColorValue = value;\n          }\n          if (!hasMaxValue && value > maxColorValue) {\n            maxColorValue = value;\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    ...marker,\n    // Make sure settings are always available\n    settings: {\n      ...settings,\n      colorMode,\n    },\n    pointCount,\n    positionBuffer,\n    colorBuffer,\n    minColorValue,\n    maxColorValue,\n    hitmapColors,\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ArrowCollapseIcon from \"@mdi/svg/svg/arrow-collapse.svg\";\nimport cx from \"classnames\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport styles from \"./ExpandingToolbar.module.scss\";\nimport Button from \"webviz-core/src/components/Button\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\n\nconst PANE_WIDTH = 268;\nconst PANE_HEIGHT = 240;\n\nexport const SToolGroupFixedSizePane = styled.div`\n  overflow-x: hidden;\n  overflow-y: auto;\n  padding: 8px 0;\n`;\n\nexport function ToolGroup<T>({ children }: { name: T, children: React.Node }) {\n  return children;\n}\n\nexport function ToolGroupFixedSizePane({ children }: { children: React.Node }) {\n  return (\n    <SToolGroupFixedSizePane style={{ width: PANE_WIDTH - 28, height: PANE_HEIGHT }}>\n      {children}\n    </SToolGroupFixedSizePane>\n  );\n}\n\ntype Props<T: string> = {|\n  // $FlowFixMe typeof does not work with generics well, getting \"`typeof` can only be used to get the type of variables\"\n  children: React.ChildrenArray<React.Element<typeof ToolGroup<T>>>,\n  className?: ?string,\n  icon: React.Node,\n  onSelectTab: (name: ?T) => void,\n  selectedTab: ?T, // collapse the toolbar if selectedTab is null\n  tooltip: string,\n  style?: StyleObj,\n|};\n\nexport default function ExpandingToolbar<T: string>({\n  children,\n  className,\n  icon,\n  onSelectTab,\n  selectedTab,\n  tooltip,\n  style,\n}: Props<T>) {\n  const expanded = !!selectedTab;\n  if (!expanded) {\n    let selectedTabLocal = selectedTab;\n    if (!selectedTabLocal) {\n      // default to the first child's name if no tab is selected\n      React.Children.forEach(children, (child) => {\n        if (!selectedTabLocal) {\n          selectedTabLocal = child.props.name;\n        }\n      });\n    }\n    return (\n      <div className={className}>\n        <Button tooltip={tooltip} onClick={() => onSelectTab(selectedTabLocal)}>\n          <Icon>{icon}</Icon>\n        </Button>\n      </div>\n    );\n  }\n  let selectedChild;\n  React.Children.forEach(children, (child) => {\n    if (!selectedChild || child.props.name === selectedTab) {\n      selectedChild = child;\n    }\n  });\n  return (\n    <div className={cx(className, styles.expanded)}>\n      <Flex row className={styles.tabBar}>\n        {React.Children.map(children, (child) => {\n          return (\n            <Button\n              className={cx(styles.tab, { [styles.selected]: child === selectedChild })}\n              onClick={() => onSelectTab(child.props.name)}>\n              {child.props.name}\n            </Button>\n          );\n        })}\n        <div className={styles.spaceSeparator} />\n        <Button onClick={() => onSelectTab(null)}>\n          <Icon>\n            <ArrowCollapseIcon />\n          </Icon>\n        </Button>\n      </Flex>\n      <div className={styles.tabBody} style={style}>\n        {selectedChild}\n      </div>\n    </div>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport clamp from \"lodash/clamp\";\n\nimport CameraModel from \"./CameraModel\";\nimport type { Topic, Message } from \"webviz-core/src/players/types\";\nimport type { CameraInfo } from \"webviz-core/src/types/Messages\";\n\n// The OffscreenCanvas type is not yet in Flow. It's similar to, but more restrictive than HTMLCanvasElement.\n// TODO: change this to the Flow definition once it's been added.\nexport type OffscreenCanvas = HTMLCanvasElement;\n\nexport type Dimensions = {| width: number, height: number |};\n\nexport type MarkerOption = {\n  topic: string,\n  name: string,\n};\n\nexport type RawMarkerData = {|\n  markers: Message[],\n  scale: number,\n  transformMarkers: boolean,\n  cameraInfo: ?CameraInfo,\n|};\n\nexport type MarkerData = ?{|\n  markers: Message[],\n  originalWidth: ?number, // null means no scaling is needed (use the image's size)\n  originalHeight: ?number, // null means no scaling is needed (use the image's size)\n  cameraModel: ?CameraModel, // null means no transformation is needed\n|};\n\nexport function getMarkerOptions(\n  imageTopic: string,\n  topics: $ReadOnlyArray<Topic>,\n  allCameraNamespaces: string[],\n  imageMarkerDatatypes: string[]\n): string[] {\n  const results = [];\n  const cameraNamespace = getCameraNamespace(imageTopic);\n  for (const { name, datatype } of topics) {\n    if (\n      cameraNamespace &&\n      (name.startsWith(cameraNamespace) || name.startsWith(`/old${cameraNamespace}`)) &&\n      imageMarkerDatatypes.includes(datatype)\n    ) {\n      results.push(name);\n    }\n  }\n  return results.sort();\n}\n\nexport function getRelatedMarkerTopics(enabledMarkerTopics: string[], availableMarkerTopics: string[]): string[] {\n  return availableMarkerTopics.filter((topic) => {\n    return enabledMarkerTopics.some((enabledTopic) => topic.endsWith(enabledTopic.split(\"/\").pop()));\n  });\n}\n\n// get the sensor_msgs/CameraInfo topic associated with an image topic\nexport function getCameraInfoTopic(imageTopic: string): ?string {\n  const cameraNamespace = getCameraNamespace(imageTopic);\n  if (cameraNamespace) {\n    return `${cameraNamespace}/camera_info`;\n  }\n  return null;\n}\n\nexport function getCameraNamespace(topicName: string): ?string {\n  let splitTopic = topicName.split(\"/\");\n  // Remove the last part of the selected topic to get the camera namespace.\n  splitTopic.pop();\n  splitTopic = splitTopic.filter((topicPart) => topicPart !== \"old\");\n\n  // Since there is a leading slash in the topicName, splitTopic will always have at least one empty string to start.\n  // If we can't find the namespace, return null.\n  return splitTopic.length > 1 ? splitTopic.join(\"/\") : null;\n}\n\n// group topics by the first component of their name\nexport function groupTopics(topics: Topic[]): Map<string, Topic[]> {\n  const imageTopicsByNamespace: Map<string, Topic[]> = new Map();\n  for (const topic of topics) {\n    const key = getCameraNamespace(topic.name) || topic.name;\n    const vals = imageTopicsByNamespace.get(key);\n    if (vals) {\n      vals.push(topic);\n    } else {\n      imageTopicsByNamespace.set(key, [topic]);\n    }\n  }\n  return imageTopicsByNamespace;\n}\n\n// check if we pan out of bounds with the given top, left, right, bottom\n// x, y, scale is the state after we pan\n// if out of bound, return newX and newY satisfying the bounds\n// else, return the original x and y\nexport function checkOutOfBounds(\n  x: number,\n  y: number,\n  outsideWidth: number,\n  outsideHeight: number,\n  insideWidth: number,\n  insideHeight: number\n): number[] {\n  const leftX = 0;\n  const topY = 0;\n  const rightX = outsideWidth - insideWidth;\n  const bottomY = outsideHeight - insideHeight;\n  return [\n    clamp(x, Math.min(leftX, rightX), Math.max(leftX, rightX)),\n    clamp(y, Math.min(topY, bottomY), Math.max(topY, bottomY)),\n  ];\n}\n\nexport function buildMarkerData(rawMarkerData: RawMarkerData): ?MarkerData {\n  const { markers, scale, transformMarkers, cameraInfo } = rawMarkerData;\n  if (markers.length === 0) {\n    return {\n      markers,\n      cameraModel: null,\n      originalHeight: undefined,\n      originalWidth: undefined,\n    };\n  }\n  let cameraModel;\n  if (transformMarkers) {\n    if (!cameraInfo) {\n      return null;\n    }\n    cameraModel = new CameraModel(cameraInfo);\n  }\n\n  // Markers can only be rendered if we know the original size of the image.\n  let originalWidth;\n  let originalHeight;\n  if (cameraInfo && cameraInfo.width && cameraInfo.height) {\n    // Prefer using CameraInfo can be used to determine the image size.\n    originalWidth = cameraInfo.width;\n    originalHeight = cameraInfo.height;\n  } else if (scale === 1) {\n    // Otherwise, if scale === 1, the image was not downsampled, so the size of the bitmap is accurate.\n    originalWidth = undefined;\n    originalHeight = undefined;\n  } else {\n    return null;\n  }\n\n  return {\n    markers,\n    cameraModel,\n    originalWidth,\n    originalHeight,\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { createContext } from \"react\";\n\nexport const TAB_DRAG_TYPE = \"TAB\";\nexport type DraggingTabItem = { type: typeof TAB_DRAG_TYPE, tabIndex: number, panelId: string };\nexport type DraggingTabPanelState = {\n  item: ?DraggingTabItem,\n  isOver: boolean,\n};\n\nexport type TabActions = {|\n  addTab: () => void,\n  removeTab: (tabIndex: number) => void,\n  selectTab: (tabIndex: number) => void,\n  setTabTitle: (tabIndex: number, title: string) => void,\n|};\n\n// It allows nested TabPanels to know if their parent tab is being dragged.\n// This allows us to prevent situations where the parent tab is dragged into a child tab.\nexport const TabDndContext = createContext<{\n  preventTabDrop: boolean,\n}>({ preventTabDrop: false });\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { vec3 } from \"gl-matrix\";\nimport { mergeWith, get } from \"lodash\";\nimport { useRef } from \"react\";\nimport {\n  type CameraState,\n  type Vec3,\n  type Vec4,\n  type MouseEventObject,\n  cameraStateSelectors,\n  DEFAULT_CAMERA_STATE,\n} from \"regl-worldview\";\n\nimport { type GlobalVariables } from \"webviz-core/src/hooks/useGlobalVariables\";\nimport { type LinkedGlobalVariables } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/useLinkedGlobalVariables\";\nimport Transforms from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport { emptyPose } from \"webviz-core/src/util/Pose\";\n\nexport type TargetPose = { target: Vec3, targetOrientation: Vec4 };\n\nconst ZOOM_LEVEL_URL_PARAM = \"zoom\";\n\nfunction getZoomDistanceFromURLParam(): number | void {\n  const params = new URLSearchParams(location && location.search);\n  if (params.has(ZOOM_LEVEL_URL_PARAM)) {\n    return parseFloat(params.get(ZOOM_LEVEL_URL_PARAM));\n  }\n}\n\n// Get the camera target position and orientation\nexport function getTargetPose(followTf?: string | false, transforms: Transforms) {\n  if (followTf) {\n    let pose = emptyPose();\n    pose = transforms.apply(pose, pose, followTf, transforms.rootOfTransform(followTf).id);\n    if (pose) {\n      const { x: px, y: py, z: pz } = pose.position;\n      const { x: ox, y: oy, z: oz, w: ow } = pose.orientation;\n      return {\n        target: [px, py, pz],\n        targetOrientation: [ox, oy, oz, ow],\n      };\n    }\n  }\n  return null;\n}\n\nexport function useComputedCameraState({\n  currentCameraState,\n  followTf,\n  followOrientation,\n  transforms,\n}: {\n  currentCameraState: $Shape<CameraState>,\n  followTf?: string | false,\n  followOrientation?: boolean,\n  transforms: Transforms,\n}): { cameraState: CameraState, targetPose: ?TargetPose } {\n  let newCameraState = { ...currentCameraState };\n  const targetPose = getTargetPose(followTf, transforms);\n  // Store last seen target pose because the target may become available/unavailable over time as\n  // the player changes, and we want to avoid moving the camera when it disappears.\n  const lastTargetPoseRef = useRef<?TargetPose>(null);\n  const lastTargetPose = lastTargetPoseRef.current;\n  // Recompute cameraState based on the new inputs at each render\n  if (targetPose) {\n    lastTargetPoseRef.current = targetPose;\n    newCameraState.target = targetPose.target;\n    if (followOrientation) {\n      newCameraState.targetOrientation = targetPose.targetOrientation;\n    }\n  } else if (followTf && lastTargetPose) {\n    // If follow is enabled but no target is available (such as when seeking), keep the camera\n    // position the same as it would have been by reusing the last seen target pose.\n    newCameraState.target = lastTargetPose.target;\n    if (followOrientation) {\n      newCameraState.targetOrientation = lastTargetPose.targetOrientation;\n    }\n  }\n  // Read the distance from URL when World is first loaded with empty cameraState distance in savedProps\n  if (currentCameraState.distance == null) {\n    newCameraState.distance = getZoomDistanceFromURLParam();\n  }\n\n  newCameraState = mergeWith(newCameraState, DEFAULT_CAMERA_STATE, (objVal, srcVal) => objVal ?? srcVal);\n\n  return { cameraState: newCameraState, targetPose: targetPose || lastTargetPose };\n}\n\nexport function getUpdatedGlobalVariablesBySelectedObject(\n  selectedObject: MouseEventObject,\n  linkedGlobalVariables: LinkedGlobalVariables\n): ?GlobalVariables {\n  const interactionData = selectedObject && selectedObject.object.interactionData;\n  const objectTopic = interactionData && interactionData.topic;\n  if (!linkedGlobalVariables.length || !objectTopic) {\n    return;\n  }\n  const newGlobalVariables = {};\n  linkedGlobalVariables.forEach(({ topic, markerKeyPath, name }) => {\n    if (objectTopic === topic) {\n      const objectForPath = get(selectedObject.object, [...markerKeyPath].reverse());\n      newGlobalVariables[name] = objectForPath;\n    }\n  });\n  return newGlobalVariables;\n}\n\n// Return targetOffset and thetaOffset that would yield the same camera position as the\n// given offsets if the target were (0,0,0) and targetOrientation were identity.\nfunction getEquivalentOffsetsWithoutTarget(\n  offsets: { +targetOffset: Vec3, +thetaOffset: number },\n  targetPose: { +target: Vec3, +targetOrientation: Vec4 },\n  followOrientation?: boolean\n): { targetOffset: Vec3, thetaOffset: number } {\n  const heading = followOrientation\n    ? cameraStateSelectors.targetHeading({ targetOrientation: targetPose.targetOrientation })\n    : 0;\n  const targetOffset = vec3.rotateZ([0, 0, 0], offsets.targetOffset, [0, 0, 0], -heading);\n  vec3.add(targetOffset, targetOffset, targetPose.target);\n  const thetaOffset = offsets.thetaOffset + heading;\n  return { targetOffset, thetaOffset };\n}\n\nexport function getNewCameraStateOnFollowChange({\n  prevCameraState,\n  prevTargetPose,\n  prevFollowTf,\n  prevFollowOrientation,\n  newFollowTf,\n  newFollowOrientation,\n}: {|\n  prevCameraState: CameraState,\n  prevTargetPose: ?TargetPose,\n  prevFollowTf: ?(string | false),\n  prevFollowOrientation: ?boolean,\n  newFollowTf: ?(string | false),\n  newFollowOrientation: ?boolean,\n|}): CameraState {\n  const newCameraState = { ...prevCameraState };\n  if (newFollowTf) {\n    // When switching to follow orientation, adjust thetaOffset to preserve camera rotation.\n    if (newFollowOrientation && !prevFollowOrientation && prevTargetPose) {\n      const heading = cameraStateSelectors.targetHeading({\n        targetOrientation: prevTargetPose.targetOrientation,\n      });\n      newCameraState.targetOffset = vec3.rotateZ(\n        [0, 0, 0],\n        newCameraState.targetOffset || DEFAULT_CAMERA_STATE.targetOffset,\n        [0, 0, 0],\n        heading\n      );\n      newCameraState.thetaOffset -= heading;\n    }\n    // When following a frame for the first time, snap to the origin.\n    if (!prevFollowTf) {\n      newCameraState.targetOffset = [0, 0, 0];\n    }\n  } else if (prevFollowTf && prevTargetPose) {\n    // When unfollowing, preserve the camera position and orientation.\n    Object.assign(\n      newCameraState,\n      getEquivalentOffsetsWithoutTarget(\n        {\n          targetOffset: prevCameraState.targetOffset || DEFAULT_CAMERA_STATE.targetOffset,\n          thetaOffset: prevCameraState.thetaOffset || DEFAULT_CAMERA_STATE.thetaOffset,\n        },\n        prevTargetPose,\n        !!prevFollowOrientation\n      ),\n      { target: [0, 0, 0] }\n    );\n  }\n\n  return newCameraState;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { MutablePose, Orientation, Point } from \"webviz-core/src/types/Messages\";\n\n// contains backing classes for point, orientation, and pose\n// because we create them a _lot_\nclass PointClass {\n  x: number;\n  y: number;\n  z: number;\n\n  static empty() {\n    // $FlowFixMe: Classes are inexact in flow.\n    const point = new PointClass();\n    point.x = 0;\n    point.y = 0;\n    point.z = 0;\n    return point;\n  }\n}\n\nclass OrientationClass {\n  x: number;\n  y: number;\n  z: number;\n  w: number;\n\n  static empty() {\n    // $FlowFixMe: Classes are inexact in flow.\n    const orientation = new OrientationClass();\n    orientation.x = 0;\n    orientation.y = 0;\n    orientation.z = 0;\n    orientation.w = 1;\n    return orientation;\n  }\n}\n\nclass PoseClass {\n  position: Point;\n  orientation: Orientation;\n}\n\n// create a new empty pose object\nexport function emptyPose(): MutablePose {\n  // $FlowFixMe: Classes are inexact in flow.\n  const pose = new PoseClass();\n  pose.position = PointClass.empty();\n  pose.orientation = OrientationClass.empty();\n  return pose;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { difference, keyBy, uniq, mapValues, xor, isEqual, flatten } from \"lodash\";\nimport { useMemo, useCallback, useRef } from \"react\";\nimport tinyColor from \"tinycolor2\";\nimport { useDebounce } from \"use-debounce\";\n\nimport type { TreeNode, TopicTreeConfig, UseTreeInput, UseTreeOutput, DerivedCustomSettingsByKey } from \"./types\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport { parseColorSetting } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/TopicSettingsEditor\";\nimport { TOPIC_DISPLAY_MODES } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicViewModeSelector\";\nimport { SECOND_SOURCE_PREFIX } from \"webviz-core/src/util/globalConstants\";\nimport { useShallowMemo } from \"webviz-core/src/util/hooks\";\n\nconst UNCATEGORIZED_NAME = \"(Uncategorized)\";\n\n// TODO(Audrey): opaque type for node keys: https://flow.org/en/docs/types/opaque-types/\nexport function generateNodeKey({\n  topicName,\n  name,\n  namespace,\n  isFeatureColumn,\n}: {|\n  topicName?: ?string,\n  name?: ?string,\n  namespace?: ?string,\n  isFeatureColumn?: boolean,\n|}): string {\n  const prefixedTopicName = topicName\n    ? isFeatureColumn\n      ? `${SECOND_SOURCE_PREFIX}${topicName}`\n      : topicName\n    : undefined;\n  if (namespace) {\n    if (prefixedTopicName) {\n      return `ns:${prefixedTopicName}:${namespace}`;\n    }\n    throw new Error(\n      \"Incorrect input for generating the node key. If a namespace is present, then the topicName must be present\"\n    );\n  }\n  if (prefixedTopicName) {\n    return `t:${prefixedTopicName}`;\n  }\n  if (name) {\n    return isFeatureColumn ? `name_2:${name}` : `name:${name}`;\n  }\n\n  throw new Error(`Incorrect input for generating the node key. Either topicName or name must be present.`);\n}\n\n// Recursive function to generate the tree nodes from config data.\nexport function generateTreeNode(\n  { children = [], topicName, name, description }: TopicTreeConfig,\n  {\n    availableTopicsNamesSet,\n    parentKey,\n    datatypesByTopic,\n    hasFeatureColumn,\n  }: {|\n    availableTopicsNamesSet: Set<string>,\n    datatypesByTopic: { [topicName: string]: string },\n    parentKey: ?string,\n    hasFeatureColumn: boolean,\n  |}\n): TreeNode {\n  const key = generateNodeKey({ name, topicName });\n  const featureKey = generateNodeKey({ name, topicName, isFeatureColumn: true });\n  const providerAvailable = availableTopicsNamesSet.size > 0;\n\n  if (topicName) {\n    const datatype = datatypesByTopic[topicName];\n    return {\n      type: \"topic\",\n      key,\n      featureKey,\n      topicName,\n      availableByColumn: hasFeatureColumn\n        ? [availableTopicsNamesSet.has(topicName), availableTopicsNamesSet.has(`${SECOND_SOURCE_PREFIX}${topicName}`)]\n        : [availableTopicsNamesSet.has(topicName)],\n      providerAvailable,\n      ...(parentKey ? { parentKey } : undefined),\n      ...(name ? { name } : undefined),\n      ...(datatype ? { datatype } : undefined),\n      ...(description ? { description } : undefined),\n    };\n  }\n  if (name) {\n    const childrenNodes = children.map((config) =>\n      generateTreeNode(config, {\n        availableTopicsNamesSet,\n        // First level children's parent key is undefined, not `root`.\n        parentKey: name === \"root\" ? undefined : key,\n        datatypesByTopic,\n        hasFeatureColumn,\n      })\n    );\n    return {\n      key,\n      featureKey,\n      name,\n      type: \"group\",\n      // A group node is available when some children nodes are available.\n      availableByColumn: hasFeatureColumn\n        ? [\n            childrenNodes.some((node) => node.availableByColumn[0]),\n            childrenNodes.some((node) => node.availableByColumn[1]),\n          ]\n        : [childrenNodes.some((node) => node.availableByColumn[0])],\n      providerAvailable,\n      children: childrenNodes,\n      ...(parentKey ? { parentKey } : undefined),\n    };\n  }\n  throw new Error(`Incorrect topic tree config. Either topicName or name must be present.`);\n}\n\nexport function* flattenNode<T: TreeNode | TopicTreeConfig>(node: T): Generator<T, void, void> {\n  yield node;\n  if (node.children) {\n    for (const subNode of node.children) {\n      yield* flattenNode(subNode);\n    }\n  }\n}\n\nexport function getBaseKey(key: string): string {\n  return key.replace(SECOND_SOURCE_PREFIX, \"\").replace(\"name_2:\", \"name:\");\n}\n\nexport default function useTree({\n  availableNamespacesByTopic,\n  checkedKeys,\n  defaultTopicSettings,\n  expandedKeys,\n  filterText,\n  modifiedNamespaceTopics,\n  providerTopics,\n  saveConfig,\n  sceneErrorsByTopicKey,\n  topicDisplayMode,\n  topicSettings,\n  topicTreeConfig,\n}: UseTreeInput): UseTreeOutput {\n  const topicTreeTopics = useMemo(\n    () =>\n      Array.from(flattenNode(topicTreeConfig))\n        .map((node) => (node.topicName && !node.namespace ? node.topicName : undefined))\n        .filter(Boolean),\n    [topicTreeConfig]\n  );\n\n  const hasFeatureColumn = useMemo(() => providerTopics.some(({ name }) => name.startsWith(SECOND_SOURCE_PREFIX)), [\n    providerTopics,\n  ]);\n\n  const rootTreeNode = useMemo(\n    (): TreeNode => {\n      const allTopicNames = providerTopics.map((topic) => topic.name);\n      const nonPrefixedTopicNames = uniq(allTopicNames.map((name) => name.replace(SECOND_SOURCE_PREFIX, \"\")));\n      const availableTopicsNamesSet = new Set(allTopicNames);\n\n      // Precompute uncategorized topics to add to the transformedTreeConfig before generating the TreeNodes.\n      const uncategorizedTopicNames = difference(nonPrefixedTopicNames, topicTreeTopics);\n      const datatypesByTopic = mapValues(keyBy(providerTopics, \"name\"), (item) => item.datatype);\n\n      const newChildren = [...(topicTreeConfig.children || [])];\n      if (uncategorizedTopicNames.length) {\n        // Add uncategorized group node to root config.\n        newChildren.push({\n          name: UNCATEGORIZED_NAME,\n          children: uncategorizedTopicNames.map((topicName) => ({ topicName })),\n        });\n      }\n      // Generate the rootTreeNode. Don't mutate the original treeConfig, just make a copy with newChildren.\n      return generateTreeNode(\n        { ...topicTreeConfig, children: newChildren },\n        { parentKey: undefined, datatypesByTopic, availableTopicsNamesSet, hasFeatureColumn }\n      );\n    },\n    [hasFeatureColumn, providerTopics, topicTreeConfig, topicTreeTopics]\n  );\n\n  const nodesByKey = useMemo(\n    () => {\n      const flattenNodes = Array.from(flattenNode(rootTreeNode));\n      return keyBy(flattenNodes, \"key\");\n    },\n    [rootTreeNode]\n  );\n\n  const selections = useMemo(\n    () => {\n      const checkedKeysSet = new Set(checkedKeys);\n      // Memoize node selections for extracting topic/namespace selections and checking node's visibility state.\n      const isSelectedMemo: { [string]: boolean } = {};\n\n      // Check if a node is selected and fill in the isSelectedMemo cache for future access.\n      function isSelected(baseKey: ?string, isFeatureColumn: boolean): boolean {\n        // Only topic node or top level group node may not have parentKey, and if we reached this level,\n        // the descendants nodes should already been selected. Specifically, if a node key is included in the checkedKeys\n        // and it doesn't have any parent node, it's considered to be selected.\n        if (!baseKey) {\n          return true;\n        }\n\n        const node = nodesByKey[baseKey];\n        const featureKey = node?.featureKey || baseKey;\n\n        if (node) {\n          if (!isFeatureColumn && isSelectedMemo[baseKey] === undefined) {\n            isSelectedMemo[baseKey] = checkedKeysSet.has(baseKey) && isSelected(node.parentKey, isFeatureColumn);\n          } else if (isFeatureColumn && isSelectedMemo[featureKey] === undefined) {\n            isSelectedMemo[featureKey] = checkedKeysSet.has(featureKey) && isSelected(node.parentKey, isFeatureColumn);\n          }\n        }\n        return isSelectedMemo[isFeatureColumn ? featureKey : baseKey];\n      }\n\n      const selectedTopicNamesSet = new Set(\n        filterMap(checkedKeys, (key) => {\n          if (!key.startsWith(\"t:\") || !isSelected(getBaseKey(key), key.includes(SECOND_SOURCE_PREFIX))) {\n            return;\n          }\n          return key.substr(\"t:\".length);\n        })\n      );\n\n      // Add namespace selections if a topic has any namespaces modified. Any topics that don't have\n      // the namespaces set in selectedNamespacesByTopic will have the namespaces turned on by default.\n      const selectedNamespacesByTopic = (modifiedNamespaceTopics || []).reduce(\n        (memo, topicName) => ({ ...memo, [topicName]: [] }),\n        {}\n      );\n\n      // Go through the checked namespace keys, split the key to topicName + namespace, and\n      // collect the namespaces if the topic is selected.\n      checkedKeys.forEach((key) => {\n        if (!key.startsWith(\"ns:\")) {\n          return;\n        }\n        const [_, topicName, namespace] = key.split(\":\");\n        if (!topicName || !namespace) {\n          throw new Error(`Incorrect checkedNode in panelConfig: ${key}`);\n        }\n        if (selectedTopicNamesSet.has(topicName)) {\n          if (!selectedNamespacesByTopic[topicName]) {\n            selectedNamespacesByTopic[topicName] = [];\n          }\n          selectedNamespacesByTopic[topicName].push(namespace);\n        }\n      });\n\n      // Returns whether a node/namespace is rendered in the 3d scene. Keep it inside useMemo since it needs to acces the same isSelectedMemo.\n      // A node is visible if it's available, itself and all ancestor nodes are selected.\n      function getIsTreeNodeVisibleInScene(node: TreeNode, columnIndex: number, namespace?: string): boolean {\n        const baseKey = getBaseKey(node.key);\n        const isFeatureColumn = columnIndex === 1;\n        if (namespace && node.type === \"topic\") {\n          const prefixedTopicName =\n            node.type === \"topic\"\n              ? isFeatureColumn\n                ? `${SECOND_SOURCE_PREFIX}${node.topicName}`\n                : node.topicName\n              : undefined;\n\n          const prefixedNamespaceKey = generateNodeKey({ topicName: node.topicName, namespace, isFeatureColumn });\n          const namespaceChecked =\n            checkedKeysSet.has(prefixedNamespaceKey) ||\n            !!(prefixedTopicName && !selectedNamespacesByTopic[prefixedTopicName]);\n\n          return namespaceChecked && !!node.availableByColumn[columnIndex] && isSelected(baseKey, isFeatureColumn);\n        }\n        return !!node.availableByColumn[columnIndex] && isSelected(baseKey, isFeatureColumn);\n      }\n      return {\n        selectedTopicNames: Array.from(selectedTopicNamesSet),\n        selectedNamespacesByTopic,\n        getIsTreeNodeVisibleInScene,\n      };\n    },\n    [checkedKeys, modifiedNamespaceTopics, nodesByKey]\n  );\n\n  const { selectedTopicNames, selectedNamespacesByTopic, getIsTreeNodeVisibleInScene } = selections;\n\n  // Memoize topic names to prevent subscription update when expanding/collapsing nodes.\n  const memoizedSelectedTopicNames = useShallowMemo(selectedTopicNames);\n\n  const derivedCustomSettingsByKey = useMemo(\n    (): DerivedCustomSettingsByKey => {\n      const result = {};\n      for (const [topicName, settings] of Object.entries(topicSettings)) {\n        const isFeatureTopic = topicName.startsWith(SECOND_SOURCE_PREFIX);\n        const columnIndex = isFeatureTopic ? 1 : 0;\n        const baseTopicName = isFeatureTopic ? topicName.replace(SECOND_SOURCE_PREFIX, \"\") : topicName;\n        const key = generateNodeKey({ topicName: baseTopicName });\n\n        let isDefaultSettings = false;\n        // If any topic has default settings, compare settings with default settings to determine if settings has changed.\n        if (defaultTopicSettings[topicName]) {\n          isDefaultSettings = isEqual(settings, defaultTopicSettings[topicName]);\n        }\n        if (!result[key]) {\n          result[key] = { isDefaultSettings };\n        } else {\n          // Both base and feature have to be default settings for `isDefaultSettings` to be true.\n          result[key] = { ...result[key], isDefaultSettings: isDefaultSettings && result[key].isDefaultSettings };\n        }\n        // $FlowFixMe some settings have overideColor field\n        if (settings.overrideColor) {\n          const rgba = parseColorSetting(settings.overrideColor);\n          if (!result[key].overrideColorByColumn) {\n            result[key].overrideColorByColumn = [undefined, undefined];\n          }\n          result[key].overrideColorByColumn[columnIndex] = tinyColor.fromRatio(rgba).toRgbString();\n        }\n      }\n      return result;\n    },\n    [defaultTopicSettings, topicSettings]\n  );\n\n  const checkedNamespacesByTopicName = useMemo(\n    () => {\n      const checkedNamespaces = filterMap(checkedKeys, (item) => {\n        if (item.startsWith(\"ns:\")) {\n          const [_, topicName, namespace] = item.split(\":\");\n          return { topicName, namespace };\n        }\n      });\n      return keyBy(checkedNamespaces, \"topicName\");\n    },\n    [checkedKeys]\n  );\n\n  // A namespace is checked by default if none of the namespaces are in the checkedKeys and the selection is not modified.\n  const getIsNamespaceCheckedByDefault = useCallback(\n    (topicName: string, columnIndex) =>\n      !modifiedNamespaceTopics.includes(topicName) &&\n      !checkedNamespacesByTopicName[columnIndex === 1 ? `${SECOND_SOURCE_PREFIX}${topicName}` : topicName],\n    [checkedNamespacesByTopicName, modifiedNamespaceTopics]\n  );\n\n  const toggleNamespaceChecked = useCallback(\n    ({ topicName, namespace, columnIndex }: {| topicName: string, namespace: string, columnIndex: number |}) => {\n      const isFeatureColumn = columnIndex === 1;\n      const prefixedNamespaceKey = generateNodeKey({ topicName, namespace, isFeatureColumn });\n\n      const prefixedTopicName = isFeatureColumn ? `${SECOND_SOURCE_PREFIX}${topicName}` : topicName;\n      const isNamespaceCheckedByDefault = getIsNamespaceCheckedByDefault(topicName, columnIndex);\n\n      let newCheckedKeys;\n      if (isNamespaceCheckedByDefault) {\n        // Add all other namespaces under the topic to the checked keys.\n        const allNsKeys = (availableNamespacesByTopic[prefixedTopicName] || []).map((ns) =>\n          generateNodeKey({ topicName, namespace: ns, isFeatureColumn })\n        );\n        const otherNamespaceKeys = difference(allNsKeys, [prefixedNamespaceKey]);\n        newCheckedKeys = [...checkedKeys, ...otherNamespaceKeys];\n      } else {\n        newCheckedKeys = xor(checkedKeys, [prefixedNamespaceKey]);\n      }\n\n      saveConfig({\n        checkedKeys: newCheckedKeys,\n        modifiedNamespaceTopics: uniq([...modifiedNamespaceTopics, prefixedTopicName]),\n      });\n    },\n    [availableNamespacesByTopic, checkedKeys, getIsNamespaceCheckedByDefault, modifiedNamespaceTopics, saveConfig]\n  );\n\n  const toggleNodeChecked = useCallback(\n    (nodeKey: string, columnIndex: number) => {\n      const key = columnIndex === 1 ? nodesByKey[nodeKey].featureKey : nodeKey;\n      saveConfig({ checkedKeys: xor(checkedKeys, [key]) });\n    },\n    [checkedKeys, nodesByKey, saveConfig]\n  );\n\n  const toggleCheckAllDescendants = useCallback(\n    (nodeKey: string, columnIndex: number) => {\n      const node = nodesByKey[nodeKey];\n      const isFeatureColumn = columnIndex === 1;\n      const keyWithPrefix = isFeatureColumn ? node.featureKey : nodeKey;\n      const isNowChecked = !checkedKeys.includes(keyWithPrefix);\n      const nodeAndChildren = Array.from(flattenNode(node));\n      const nodeAndChildrenKeys = nodeAndChildren.map((item) => (isFeatureColumn ? item.featureKey : item.key));\n      const topicNames = nodeAndChildren.map((item) => (item.type === \"topic\" ? item.topicName : null)).filter(Boolean);\n      const namespaceChildrenKeys = flatten(\n        topicNames.map((topicName) =>\n          (availableNamespacesByTopic[isFeatureColumn ? `${SECOND_SOURCE_PREFIX}${topicName}` : topicName] || []).map(\n            (namespace) => generateNodeKey({ topicName, namespace, isFeatureColumn })\n          )\n        )\n      );\n\n      let newModififiedNamespaceTopics = [...modifiedNamespaceTopics];\n      topicNames.forEach((topicName) => {\n        const prefixedTopicName = isFeatureColumn ? `${SECOND_SOURCE_PREFIX}${topicName}` : topicName;\n        if (availableNamespacesByTopic[prefixedTopicName]) {\n          newModififiedNamespaceTopics.push(prefixedTopicName);\n        }\n      });\n      newModififiedNamespaceTopics = isEqual(newModififiedNamespaceTopics, modifiedNamespaceTopics)\n        ? modifiedNamespaceTopics\n        : uniq(newModififiedNamespaceTopics);\n\n      const nodeKeysToToggle = [...nodeAndChildrenKeys, ...namespaceChildrenKeys];\n      // Toggle all children nodes' checked state to be the same as the new checked state for the node.\n      saveConfig({\n        modifiedNamespaceTopics: newModififiedNamespaceTopics,\n        checkedKeys: isNowChecked\n          ? uniq([...checkedKeys, ...nodeKeysToToggle])\n          : difference(checkedKeys, nodeKeysToToggle),\n      });\n    },\n    [availableNamespacesByTopic, checkedKeys, modifiedNamespaceTopics, nodesByKey, saveConfig]\n  );\n\n  const toggleCheckAllAncestors = useCallback(\n    (nodeKey: string, columnIndex: number, namespaceParentTopicName?: string) => {\n      const isFeatureColumn = columnIndex === 1;\n      const node = nodesByKey[nodeKey];\n      let keyWithPrefix = isFeatureColumn && node ? node.featureKey : nodeKey;\n      const prefixedTopicName =\n        isFeatureColumn && namespaceParentTopicName\n          ? `${SECOND_SOURCE_PREFIX}${namespaceParentTopicName}`\n          : namespaceParentTopicName;\n\n      let newModififiedNamespaceTopics = modifiedNamespaceTopics;\n      if (namespaceParentTopicName && prefixedTopicName) {\n        if (!modifiedNamespaceTopics.includes(prefixedTopicName)) {\n          newModififiedNamespaceTopics = [...modifiedNamespaceTopics, prefixedTopicName];\n        }\n        const namespace = nodeKey.split(\":\").pop();\n        keyWithPrefix = generateNodeKey({ topicName: namespaceParentTopicName, namespace, isFeatureColumn });\n      }\n\n      let prevChecked = checkedKeys.includes(keyWithPrefix);\n      let newCheckedKeys = [...checkedKeys];\n      if (!prevChecked && namespaceParentTopicName) {\n        prevChecked = getIsNamespaceCheckedByDefault(namespaceParentTopicName, columnIndex);\n        if (prevChecked && prefixedTopicName) {\n          // Add all namespaces under the topic if it's checked by default.\n          const allNsKeys = (availableNamespacesByTopic[prefixedTopicName] || []).map((ns) =>\n            generateNodeKey({ topicName: namespaceParentTopicName, namespace: ns, isFeatureColumn })\n          );\n          newCheckedKeys = [...checkedKeys, ...allNsKeys];\n        }\n      }\n      const isNowChecked = !prevChecked;\n\n      const nodeAndAncestorKeys: string[] = [keyWithPrefix];\n      let parentKey = namespaceParentTopicName\n        ? generateNodeKey({ topicName: namespaceParentTopicName })\n        : node?.parentKey;\n\n      while (parentKey) {\n        const keyToToggle = isFeatureColumn ? nodesByKey[parentKey]?.featureKey : parentKey;\n        if (keyToToggle) {\n          nodeAndAncestorKeys.push(keyToToggle);\n        }\n        parentKey = nodesByKey[parentKey]?.parentKey;\n      }\n      // Toggle all ancestor nodes' checked state to be the same as the new checked state for the node.\n      saveConfig({\n        modifiedNamespaceTopics: newModififiedNamespaceTopics,\n        checkedKeys: isNowChecked\n          ? uniq([...newCheckedKeys, ...nodeAndAncestorKeys])\n          : difference(newCheckedKeys, nodeAndAncestorKeys),\n      });\n    },\n    [\n      availableNamespacesByTopic,\n      checkedKeys,\n      getIsNamespaceCheckedByDefault,\n      modifiedNamespaceTopics,\n      nodesByKey,\n      saveConfig,\n    ]\n  );\n\n  const filterTextRef = useRef(filterText);\n  filterTextRef.current = filterText;\n  const toggleNodeExpanded = useCallback(\n    (nodeKey: string) => {\n      // Don't allow any toggling expansion when filtering because we automatically expand all nodes.\n      if (!filterTextRef.current) {\n        saveConfig({ expandedKeys: xor(expandedKeys, [nodeKey]) }, { keepLayoutInUrl: true });\n      }\n    },\n    [expandedKeys, saveConfig]\n  );\n\n  const sceneErrorsByKey = useMemo(\n    () => {\n      const result = {};\n\n      function collectGroupErrors(groupKey: ?string, errors: string[]) {\n        if (!groupKey) {\n          return;\n        }\n        let nodeKey: ?string = groupKey;\n        while (nodeKey && nodesByKey[nodeKey]) {\n          if (!result[nodeKey]) {\n            result[nodeKey] = [];\n          }\n          result[nodeKey].push(...errors);\n          nodeKey = nodesByKey[nodeKey].parentKey;\n        }\n      }\n\n      for (const [topicKey, errors] of Object.entries(sceneErrorsByTopicKey)) {\n        const baseKey = getBaseKey(topicKey);\n        if (!result[baseKey]) {\n          result[baseKey] = [];\n        }\n        const errorsWithTopicName = ((errors: any): string[]).map((err) => `${topicKey.substr(\"t:\".length)}: ${err}`);\n        result[baseKey].push(...(hasFeatureColumn ? errorsWithTopicName : errors));\n        const topicNode = nodesByKey[baseKey];\n        collectGroupErrors(topicNode?.parentKey, errorsWithTopicName);\n      }\n      return result;\n    },\n    [hasFeatureColumn, nodesByKey, sceneErrorsByTopicKey]\n  );\n\n  const [debouncedFilterText] = useDebounce(filterText, 150);\n  const { getIsTreeNodeVisibleInTree } = useMemo(\n    () => {\n      const showVisible = topicDisplayMode === TOPIC_DISPLAY_MODES.SHOW_SELECTED.value;\n      const showAvailable = topicDisplayMode === TOPIC_DISPLAY_MODES.SHOW_AVAILABLE.value;\n      const providerAvailable = providerTopics.length > 0;\n\n      let hasCalculatedVisibility = false;\n      // This stores whether the row has been marked as visible, so that we don't do extra work.\n      const isVisibleByKey: { [string]: boolean } = {};\n\n      const searchText = debouncedFilterText.toLowerCase().trim();\n      function getIfTextMatches(node: TreeNode): boolean {\n        // Never match the root node.\n        if (node.name === \"root\") {\n          return false;\n        } else if (node.type === \"group\") {\n          // Group node\n          return node.name != null && node.name.toLowerCase().includes(searchText);\n        }\n        // Topic node, without namespace\n        return (\n          node.topicName.toLowerCase().includes(searchText) ||\n          (node.name != null && node.name.toLowerCase().includes(searchText)) ||\n          (hasFeatureColumn && `${SECOND_SOURCE_PREFIX}${node.topicName}`.toLowerCase().includes(searchText))\n        );\n      }\n\n      // Calculates whether a node is visible. This is a recursive function intended to be run on the root node.\n      function calculateIsVisible(node: TreeNode, isAncestorVisible: boolean): boolean {\n        // When the user is viewing available/visible nodes, we can skip setting the visibility for the children of\n        // unavailable/invisible nodes since they are not going to be rendered.\n        if (providerAvailable && node.name !== \"root\") {\n          const unavailable = hasFeatureColumn\n            ? !node.availableByColumn[0] && !node.availableByColumn[1]\n            : !node.availableByColumn[0];\n          const invisibleInScene = hasFeatureColumn\n            ? !getIsTreeNodeVisibleInScene(node, 0) && !getIsTreeNodeVisibleInScene(node, 1)\n            : !getIsTreeNodeVisibleInScene(node, 0);\n\n          if ((showAvailable && unavailable) || (showVisible && invisibleInScene)) {\n            isVisibleByKey[node.key] = false;\n            return false;\n          }\n        }\n        // Whether the ancestor is visible, or the current node matches the search text.\n        const isAncestorOrCurrentVisible = isAncestorVisible || getIfTextMatches(node);\n        let isChildVisible = false;\n\n        if (node.type === \"topic\") {\n          // Topic node: check if any namespace matches.\n          const namespaces =\n            availableNamespacesByTopic[node.topicName] ||\n            (hasFeatureColumn && availableNamespacesByTopic[`${SECOND_SOURCE_PREFIX}${node.topicName}`]) ||\n            [];\n\n          for (const namespace of namespaces) {\n            const thisNamespacesMatches = namespace.toLowerCase().includes(searchText);\n            isVisibleByKey[generateNodeKey({ topicName: node.topicName, namespace })] =\n              isAncestorOrCurrentVisible || thisNamespacesMatches;\n            isChildVisible = thisNamespacesMatches || isChildVisible;\n          }\n        } else {\n          // Group node: recurse and check if any children are visible.\n          for (const child of node.children) {\n            isChildVisible = calculateIsVisible(child, isAncestorOrCurrentVisible) || isChildVisible;\n          }\n        }\n        const isVisible = isAncestorOrCurrentVisible || isChildVisible;\n        isVisibleByKey[node.key] = isVisible;\n        return isVisible;\n      }\n\n      function getIsTreeNodeVisible(key: string): boolean {\n        if (!searchText) {\n          return true;\n        }\n\n        // Calculate the row visibility for all rows if we don't already have it stored.\n        if (!hasCalculatedVisibility) {\n          calculateIsVisible(rootTreeNode, false);\n          hasCalculatedVisibility = true;\n        }\n\n        return !!isVisibleByKey[key];\n      }\n\n      return { getIsTreeNodeVisibleInTree: getIsTreeNodeVisible };\n    },\n    [\n      topicDisplayMode,\n      providerTopics.length,\n      debouncedFilterText,\n      getIsTreeNodeVisibleInScene,\n      availableNamespacesByTopic,\n      rootTreeNode,\n      hasFeatureColumn,\n    ]\n  );\n\n  const { allKeys, shouldExpandAllKeys } = useMemo(\n    () => {\n      return {\n        allKeys: Object.keys(nodesByKey),\n        shouldExpandAllKeys: !!debouncedFilterText,\n      };\n    },\n    [debouncedFilterText, nodesByKey]\n  );\n\n  return {\n    allKeys,\n    derivedCustomSettingsByKey,\n    getIsNamespaceCheckedByDefault,\n    getIsTreeNodeVisibleInScene,\n    getIsTreeNodeVisibleInTree,\n    hasFeatureColumn,\n    nodesByKey, // For testing.\n    rootTreeNode,\n    sceneErrorsByKey,\n    selectedNamespacesByTopic,\n    selectedTopicNames: memoizedSelectedTopicNames,\n    shouldExpandAllKeys,\n    toggleCheckAllAncestors,\n    toggleCheckAllDescendants,\n    toggleNamespaceChecked,\n    toggleNodeChecked,\n    toggleNodeExpanded,\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { Tabs } from \"antd\";\nimport { get } from \"lodash\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport { getSettingsByColumnWithDefaults } from \"./topicGroupsMigrations\";\nimport type { TopicItem, TopicGroupType, OnTopicGroupsChange } from \"./types\";\nimport Button from \"webviz-core/src/components/Button\";\nimport ErrorBoundary from \"webviz-core/src/components/ErrorBoundary\";\nimport { topicSettingsEditorForDatatype } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst STopicSettingsEditor = styled.div`\n  background: ${colors.TOOLBAR};\n  color: ${colors.TEXT};\n  padding: 16px;\n`;\nconst STitle = styled.h3`\n  font-size: 20px;\n  word-wrap: break-word;\n`;\n\nconst SDatatype = styled.p`\n  padding-bottom: 12px;\n`;\n\nconst STabWrapper = styled.div`\n  color: ${colors.TEXT};\n`;\n\n// TODO(Audrey): use tinyColor instead\n// Parse color saved into topic settings into {r, g, b, a} form.\nexport function parseColorSetting(rgba: ?string, divisor?: number = 255) {\n  const [r = 255, g = 255, b = 255, a = 1] = (rgba || \"\")\n    .split(\",\")\n    .map(parseFloat)\n    .map((x) => (isNaN(x) ? undefined : x));\n  return { r: r / divisor, g: g / divisor, b: b / divisor, a };\n}\n\ntype Props = {|\n  objectPath: string,\n  onTopicGroupsChange: OnTopicGroupsChange,\n  sceneCollectorMsgForTopicSetting: any,\n|};\n\nfunction MainEditor({\n  columnIndex,\n  objectPath,\n  onTopicGroupsChange,\n  sceneCollectorMsgForTopicSetting,\n  topicItem,\n  topicItem: {\n    topicName,\n    settingsByColumn,\n    derivedFields: { displayName, datatype, prefixByColumn },\n  },\n}: {|\n  ...Props,\n  columnIndex: number,\n  topicItem: TopicItem,\n|}) {\n  if (!datatype) {\n    return null;\n  }\n  const settings = (settingsByColumn && settingsByColumn[columnIndex]) || {};\n  const Editor = topicSettingsEditorForDatatype(datatype);\n  if (!Editor) {\n    throw new Error(`No topic settings editor available for ${datatype}`);\n  }\n\n  return (\n    <ErrorBoundary>\n      <>\n        <Editor\n          message={sceneCollectorMsgForTopicSetting}\n          onFieldChange={(fieldName, value) => {\n            const newSettings = {\n              ...settings,\n              [fieldName]: value,\n            };\n            onTopicGroupsChange(`${objectPath}.settingsByColumn[${columnIndex}]`, newSettings);\n          }}\n          settings={settings}\n          onSettingsChange={(newSettings) => {\n            const newSettingsToSave = typeof newSettings === \"function\" ? newSettings(settings) : newSettings;\n            onTopicGroupsChange(`${objectPath}.settingsByColumn[${columnIndex}]`, newSettingsToSave);\n          }}\n        />\n        <Button\n          className=\"test-reset-settings-btn\"\n          style={{ marginTop: 8 }}\n          onClick={() => {\n            const defaultSettings = getSettingsByColumnWithDefaults(topicName)?.settingsByColumn || [];\n            onTopicGroupsChange(`${objectPath}.settingsByColumn[${columnIndex}]`, defaultSettings[columnIndex]);\n          }}>\n          Reset to defaults\n        </Button>\n      </>\n    </ErrorBoundary>\n  );\n}\nexport default function TopicSettingsEditor({\n  objectPath,\n  onTopicGroupsChange,\n  sceneCollectorMsgForTopicSetting,\n  topicGroups,\n  dataTestDefaultTabKey,\n}: {|\n  ...Props,\n  topicGroups: TopicGroupType[],\n  dataTestDefaultTabKey?: string,\n|}) {\n  const topicItem: TopicItem = get(topicGroups, objectPath);\n  const {\n    topicName,\n    derivedFields: { prefixByColumn, datatype },\n  } = topicItem;\n\n  if (!datatype) {\n    return null;\n  }\n\n  return (\n    <STopicSettingsEditor>\n      <STitle> {topicName}</STitle>\n      <SDatatype>{datatype}</SDatatype>\n      <div className=\"ant-component\">\n        <Tabs defaultActiveKey={dataTestDefaultTabKey || \"0\"}>\n          {prefixByColumn.map((prefix, columnIndex) => (\n            <Tabs.TabPane tab={prefix || \"base\"} key={columnIndex}>\n              <STabWrapper>\n                <MainEditor\n                  columnIndex={columnIndex}\n                  objectPath={objectPath}\n                  onTopicGroupsChange={onTopicGroupsChange}\n                  sceneCollectorMsgForTopicSetting={sceneCollectorMsgForTopicSetting}\n                  topicItem={topicItem}\n                />\n              </STabWrapper>\n            </Tabs.TabPane>\n          ))}\n        </Tabs>\n      </div>\n    </STopicSettingsEditor>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { sortBy, flatten, keyBy, mapValues, omit, isEqual, compact } from \"lodash\";\nimport microMemoize from \"micro-memoize\";\n\nimport { DEFAULT_IMPORTED_GROUP_NAME } from \"./constants\";\nimport {\n  ALL_DATA_SOURCE_PREFIXES,\n  TOPIC_CONFIG,\n  removeTopicPrefixes,\n  BASE_DATA_SOURCE_PREFIXES,\n  FEATURE_DATA_SOURCE_PREFIXES,\n} from \"./topicGroupsUtils\";\nimport type { TopicGroupConfig, VisibilityByColumn, NamespacesByColumn, SettingsByColumn } from \"./types\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport type { TopicTreeConfig } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/types\";\n\nfunction getSelectionsFromCheckedKeys(\n  checkedKeys: string[]\n): {\n  selectedTopics: string[],\n  selectedExtensions: string[],\n  selectedNamespacesByTopic: { [topicName: string]: string[] },\n  selectedNamesSet: Set<string>,\n} {\n  const selectedExtensions = [];\n  const selectedTopics = [];\n  const selectedNamespacesByTopic = {};\n  const selectedNamesSet = new Set();\n  checkedKeys.forEach((item) => {\n    if (item.startsWith(\"t:\")) {\n      selectedTopics.push(item.substr(\"t:\".length));\n    } else if (item.startsWith(\"/\")) {\n      selectedTopics.push(item);\n    } else if (item.startsWith(\"x:\")) {\n      selectedExtensions.push(item.substr(\"x:\".length));\n    } else if (item.startsWith(\"ns:\")) {\n      const [topic, namespace] = item.substr(\"ns:\".length).split(\":\");\n      if (topic && namespace) {\n        selectedNamespacesByTopic[topic] = selectedNamespacesByTopic[topic] || [];\n        selectedNamespacesByTopic[topic].push(namespace);\n      }\n    } else if (item.startsWith(\"name:\")) {\n      selectedNamesSet.add(item.substr(\"name:\".length));\n    } else {\n      // Some checked node names do not start with `name:`\n      selectedNamesSet.add(item);\n    }\n  });\n  return { selectedExtensions, selectedTopics, selectedNamespacesByTopic, selectedNamesSet };\n}\n\n// Generate a list of parent names for each topic so that we know the topic is selected only if all parent names are selected\nfunction* generateParentNamesByTopic(\n  item: TopicTreeConfig,\n  parentNames: string[]\n): Generator<{| topic: string, parentNames: string[] |}, void, void> {\n  const childrenItems = item.children;\n  if (!childrenItems && item.topicName) {\n    yield { topic: item.topicName, parentNames };\n  }\n  if (childrenItems) {\n    for (const subItem of childrenItems) {\n      yield* generateParentNamesByTopic(subItem, parentNames.concat(item.name ? [item.name] : []));\n    }\n  }\n}\n\n// Memoize the parentNamesByTopic since it only needs to be computed once.\nconst getParentNamesByTopic = microMemoize(\n  (topicConfig): { [topicName: string]: string[] } => {\n    const items = flatten(topicConfig.children.map((item) => Array.from(generateParentNamesByTopic(item, []))));\n    return mapValues(keyBy(items, \"topic\"), ({ parentNames }) => parentNames);\n  }\n);\n\nfunction dataSourcePrefixToColumnIndex(dataSourcePrefix: string): number {\n  return FEATURE_DATA_SOURCE_PREFIXES.includes(dataSourcePrefix) ? 1 : 0;\n}\n\n// TODO(steel): This code (generateLegacyIdItems, getLegacyIdItems and migrateLegacyIds) was copied\n// from a migration to break an import-link from main-repo code to the migrations directory. The\n// migration code is tested in the migrations directory, but not here.  This code should be moved\n// into a \"real\" migration. It remains here to unblock a release.\ntype LegacyIdItem = {| legacyId: string, topic: string |} | {| legacyId: string, name: string |};\nfunction* generateLegacyIdItems(item: TopicTreeConfig): Generator<LegacyIdItem, void, void> {\n  const { children, name, topicName, legacyIds } = item;\n  if (legacyIds) {\n    if (topicName) {\n      yield* legacyIds.map((legacyId) => ({ legacyId, topic: topicName }));\n    } else if (name) {\n      yield* legacyIds.map((legacyId) => ({ legacyId, name }));\n    }\n  }\n  if (children) {\n    for (const subItem of children) {\n      yield* generateLegacyIdItems(subItem);\n    }\n  }\n}\n\nconst getLegacyIdItems = microMemoize(\n  (topicConfig): LegacyIdItem[] => {\n    return flatten(topicConfig.children.map((item) => Array.from(generateLegacyIdItems(item))));\n  }\n);\n\nexport function migrateLegacyIds(checkedKeys: string[]): string[] {\n  const legacyIdItems = getLegacyIdItems(TOPIC_CONFIG);\n  const newCheckedNameOrTopicByOldNames = {};\n  for (const { topic, name, legacyId } of legacyIdItems) {\n    if (name) {\n      newCheckedNameOrTopicByOldNames[`${legacyId}`] = `name:${name}`;\n      newCheckedNameOrTopicByOldNames[`name:${legacyId}`] = `name:${name}`;\n    }\n    if (topic) {\n      newCheckedNameOrTopicByOldNames[`t:${legacyId}`] = `t:${topic}`;\n      // If both name and topic are present, only use topic as the new checkedName\n      newCheckedNameOrTopicByOldNames[`${legacyId}`] = `t:${topic}`;\n    }\n  }\n  return checkedKeys.map((node) => newCheckedNameOrTopicByOldNames[node] || node);\n}\n\ntype MigrateInput = {|\n  topicGroupDisplayName?: string,\n  topicSettings?: ?{ [topicName: string]: any },\n  checkedKeys?: ?(string[]),\n  modifiedNamespaceTopics?: ?(string[]),\n|};\n// Create a new topic group called 'My Topics' and related fields based the old config\nexport function migratePanelConfigToTopicGroupConfig({\n  topicGroupDisplayName = DEFAULT_IMPORTED_GROUP_NAME,\n  topicSettings,\n  checkedKeys,\n  modifiedNamespaceTopics,\n}: MigrateInput): TopicGroupConfig {\n  if (!checkedKeys) {\n    return {\n      displayName: topicGroupDisplayName,\n      visibilityByColumn: [true, true],\n      expanded: true,\n      items: [],\n    };\n  }\n\n  const migratedCheckedKeys = migrateLegacyIds(checkedKeys);\n  const {\n    selectedExtensions,\n    selectedTopics,\n    selectedNamespacesByTopic,\n    selectedNamesSet,\n  } = getSelectionsFromCheckedKeys(migratedCheckedKeys);\n  const parentNamesByTopic = getParentNamesByTopic(TOPIC_CONFIG);\n  const nonPrefixedTopics = removeTopicPrefixes(selectedTopics);\n\n  let items = nonPrefixedTopics\n    .map((topicName) => {\n      const visibilityByColumn = [false, false];\n      let settingsByColumn;\n      let selectedNamespacesByColumn;\n\n      for (const dataSourcePrefix of ALL_DATA_SOURCE_PREFIXES) {\n        const prefixedTopicName = `${dataSourcePrefix}${topicName}`;\n        const columnIndex = dataSourcePrefixToColumnIndex(dataSourcePrefix);\n        // a topic is selected if it's checked and all it's parent names are checked as well\n        const isTopicSelected =\n          selectedTopics.includes(prefixedTopicName) &&\n          (parentNamesByTopic[prefixedTopicName] || [\"(Uncategorized)\"]).every((parentName) =>\n            selectedNamesSet.has(parentName)\n          );\n        if (isTopicSelected) {\n          // migrate visibility\n          visibilityByColumn[columnIndex] = true;\n\n          // migrate settings, no need to migrate topic settings for topics that are not selected\n          if (topicSettings && topicSettings[prefixedTopicName]) {\n            settingsByColumn = settingsByColumn || [undefined, undefined];\n            settingsByColumn[columnIndex] = topicSettings[prefixedTopicName];\n          }\n\n          // migrate topic namespaces, always set the selectedNamespacesByColumn field when the namespaces are modified\n          if (\n            (modifiedNamespaceTopics && modifiedNamespaceTopics.includes(prefixedTopicName)) ||\n            selectedNamespacesByTopic[prefixedTopicName]\n          ) {\n            // Default to `undefined` will select all namespaces\n            selectedNamespacesByColumn = selectedNamespacesByColumn || [undefined, undefined];\n            if (selectedNamespacesByTopic[prefixedTopicName]) {\n              selectedNamespacesByColumn[columnIndex] = selectedNamespacesByTopic[prefixedTopicName];\n            }\n          }\n        }\n      }\n\n      // only selected the visible topics\n      return isEqual(visibilityByColumn, [false, false])\n        ? undefined\n        : {\n            topicName,\n            visibilityByColumn,\n            // Auto expanded any topics with selected namespaces.\n            ...(selectedNamespacesByColumn && flatten(compact(selectedNamespacesByColumn)).length > 0\n              ? { expanded: true }\n              : undefined),\n            ...(settingsByColumn ? { settingsByColumn } : undefined),\n            ...(selectedNamespacesByColumn ? { selectedNamespacesByColumn } : undefined),\n          };\n    })\n    .filter(Boolean);\n\n  const selectedMetadataNamespaces = [];\n  const selectedTfNamespaces = [];\n  for (const extension of selectedExtensions) {\n    if (extension.startsWith(\"TF\")) {\n      selectedTfNamespaces.push(extension.substr(\"TF.\".length));\n    } else {\n      selectedMetadataNamespaces.push(extension);\n    }\n  }\n\n  // TODO(Audrey): order the items based on the order of the tree\n  // If any of the tf or metadata names are selected, we'll enable the topic and all namespaces by default.\n  if (selectedTfNamespaces.length) {\n    items.push({\n      topicName: \"/tf\",\n      selectedNamespacesByColumn: [selectedTfNamespaces, []],\n      visibilityByColumn: [true, false],\n    });\n  }\n\n  items = sortBy(items, [\"topicName\"]);\n\n  if (selectedMetadataNamespaces.length) {\n    items.unshift({\n      topicName: \"/metadata\",\n      selectedNamespacesByColumn: [selectedMetadataNamespaces, []],\n      visibilityByColumn: [true, false],\n    });\n  }\n\n  return {\n    displayName: topicGroupDisplayName,\n    visibilityByColumn: [true, true],\n    expanded: true,\n    items,\n  };\n}\n\ntype VisibilityBySource = { [dataSourcePrefix: string]: boolean };\ntype NamespacesBySource = { [dataSourcePrefix: string]: string[] };\ntype SettingsBySource = { [dataSourcePrefix: string]: any };\n\nfunction getGroupVisibilityByColumn(visibilityByColumn: ?VisibilityByColumn): VisibilityByColumn {\n  if (visibilityByColumn) {\n    return visibilityByColumn;\n  }\n  // Since the prefixes changed quite a bit, it's simpler to always make the base and feature column\n  // visible by default\n  return [true, true];\n}\n\nfunction getTopicVisibilityByColumn(\n  visibilityByColumn: ?VisibilityByColumn,\n  visibilityBySource: VisibilityBySource\n): boolean[] {\n  if (visibilityByColumn) {\n    return visibilityByColumn;\n  }\n  const isBaseVisible = BASE_DATA_SOURCE_PREFIXES.some((prefix) => !!visibilityBySource[prefix]);\n  const isFeatureVisible = FEATURE_DATA_SOURCE_PREFIXES.some((prefix) => !!visibilityBySource[prefix]);\n  return [isBaseVisible, isFeatureVisible];\n}\n\nfunction getTopicSelectedNamespacesByColumn(\n  selectedNamespacesByColumn: ?NamespacesByColumn,\n  namespacesBySource: NamespacesBySource\n): ?{| selectedNamespacesByColumn: NamespacesByColumn |} {\n  let baseNamespaces = [];\n  BASE_DATA_SOURCE_PREFIXES.forEach((prefix) => {\n    if (namespacesBySource[prefix]) {\n      baseNamespaces = namespacesBySource[prefix];\n    }\n  });\n  let featureNamespaces = [];\n  FEATURE_DATA_SOURCE_PREFIXES.forEach((prefix) => {\n    if (namespacesBySource[prefix]) {\n      featureNamespaces = namespacesBySource[prefix];\n    }\n  });\n  if (isEqual(baseNamespaces, []) && isEqual(featureNamespaces, [])) {\n    return undefined;\n  }\n\n  return { selectedNamespacesByColumn: [baseNamespaces, featureNamespaces] };\n}\n\nfunction getTopicSettingsByColumn(\n  settingsByColumn: ?SettingsByColumn,\n  settingsBySource: SettingsBySource\n): ?{| settingsByColumn: SettingsByColumn |} {\n  if (settingsByColumn) {\n    return { settingsByColumn };\n  }\n  let baseSettings = {};\n  BASE_DATA_SOURCE_PREFIXES.forEach((prefix) => {\n    if (settingsBySource[prefix]) {\n      baseSettings = settingsBySource[prefix];\n    }\n  });\n  let featureSettings = {};\n  FEATURE_DATA_SOURCE_PREFIXES.forEach((prefix) => {\n    if (settingsBySource[prefix]) {\n      featureSettings = settingsBySource[prefix];\n    }\n  });\n  if (isEqual(baseSettings, {}) && isEqual(featureSettings, {})) {\n    return undefined;\n  }\n\n  return {\n    settingsByColumn: [\n      isEqual(baseSettings, {}) ? undefined : baseSettings,\n      isEqual(featureSettings, {}) ? undefined : featureSettings,\n    ],\n  };\n}\n\nexport function migrateTopicGroupFromBySourceToByColumn(topicGroups: any): TopicGroupConfig[] {\n  return topicGroups.map((group) => {\n    return {\n      ...omit(group, [\"visibilityBySource\"]),\n      visibilityByColumn: getGroupVisibilityByColumn(group.visibilityByColumn),\n      items: group.items.map((item) => {\n        return {\n          ...omit(item, [\"visibilityBySource\", \"selectedNamespacesBySource\", \"settingsBySource\"]),\n          visibilityByColumn: getTopicVisibilityByColumn(\n            item.visibilityByColumn,\n            item.visibilityBySource || { \"\": true }\n          ),\n          ...getTopicSelectedNamespacesByColumn(item.selectedNamespacesByColumn, item.selectedNamespacesBySource || {}),\n          ...getTopicSettingsByColumn(item.settingsByColumn, item.settingsBySource || {}),\n        };\n      }),\n    };\n  });\n}\n\nexport function getSettingsByColumnWithDefaults(\n  topicName: string,\n  settingsByColumn: ?(any[])\n): ?{ settingsByColumn: any[] } {\n  const defaultTopicSettingsByColumn = getGlobalHooks()\n    .startupPerPanelHooks()\n    .ThreeDimensionalViz.getDefaultTopicSettingsByColumn(topicName);\n\n  if (defaultTopicSettingsByColumn) {\n    const newSettingsByColumn = settingsByColumn || [undefined, undefined];\n    newSettingsByColumn.forEach((settings, columnIndex) => {\n      if (settings === undefined) {\n        // Only apply default settings if there are no settings present.\n        newSettingsByColumn[columnIndex] = defaultTopicSettingsByColumn[columnIndex];\n      }\n    });\n    return { settingsByColumn: newSettingsByColumn };\n  }\n  return settingsByColumn ? { settingsByColumn } : undefined;\n}\n\nexport function addDefaultTopicSettings(topicGroups: TopicGroupConfig[]): TopicGroupConfig[] {\n  return topicGroups.map((group) => ({\n    ...group,\n    items: group.items.map((item) => ({\n      ...item,\n      ...getSettingsByColumnWithDefaults(item.topicName, item.settingsByColumn),\n    })),\n  }));\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { isEqual } from \"lodash\";\n\ntype Rule = (value: any) => ?string;\ntype Rules = {\n  [name: string]: ((value: any) => ?string)[],\n};\n\nfunction isEmpty(value: any) {\n  return value == null;\n}\nexport const isRequired = (value: any): ?string => (value == null ? \"is required\" : undefined);\n\nexport const isNumber = (value: any): ?string =>\n  !isEmpty(value) && typeof value !== \"number\" ? \"must be a number\" : undefined;\n\nexport const isBoolean = (value: any): ?string =>\n  !isEmpty(value) && typeof value !== \"boolean\" ? `must be \"true\" or \"false\"` : undefined;\n\nexport const isNumberArray = (expectArrLen: number = 0) => (value: any): ?string => {\n  if (Array.isArray(value)) {\n    if (value.length !== expectArrLen) {\n      return `must contain ${expectArrLen} array items`;\n    }\n    for (const item of value) {\n      if (typeof item !== \"number\") {\n        return `must contain only numbers in the array. \"${item}\" is not a number.`;\n      }\n    }\n  }\n};\n\nexport const isOrientation = (value: any): ?string => {\n  const isNumberArrayErr = isNumberArray(4)(value);\n  if (isNumberArrayErr) {\n    return isNumberArrayErr;\n  }\n  if (value) {\n    const quaternionSum = value.reduce((memo, item) => memo + item * item, 0);\n    // Very rough validation to make sure the quaternion numbers are not too far off\n    if (Math.abs(quaternionSum - 1) > 0.1) {\n      return \"must be valid quaternion\";\n    }\n  }\n};\n\nexport const isString = (value: any): ?string => (typeof value !== \"string\" ? \"must be string\" : undefined);\n\nexport const minLen = (minLength: number = 0) => (value: any): ?string => {\n  if (Array.isArray(value)) {\n    return value.length < minLength ? `must contain at least ${minLength} array items` : undefined;\n  } else if (typeof value === \"string\") {\n    return value.length < minLength ? `must contain at least ${minLength} characters` : undefined;\n  }\n};\n\nexport const maxLen = (maxLength: number = 0) => (value: any): ?string => {\n  if (Array.isArray(value)) {\n    return value.length > maxLength ? `must contain at most ${maxLength} array items` : undefined;\n  } else if (typeof value === \"string\") {\n    return value.length > maxLength ? `must contain at most ${maxLength} characters` : undefined;\n  }\n};\n\nexport const hasLen = (len: number = 0) => (value: string | any[]): ?string => {\n  if (Array.isArray(value)) {\n    return value.length !== len\n      ? `must contain exact ${len} array items (current item count: ${value.length})`\n      : undefined;\n  } else if (typeof value === \"string\") {\n    return value.length !== len ? `must contain ${len} characters (current count: ${value.length})` : undefined;\n  }\n};\n\nexport const isNotPrivate = (value: any): ?string =>\n  typeof value !== \"string\" && value.startsWith(\"_\") ? \"must not start with _\" : undefined;\n\n// return the first error\nconst join = (rules) => (value) => rules.map((rule) => rule(value)).filter((error) => !!error)[0];\n\nexport const isWebsocketUrl = (value: string): ?string => {\n  const pattern = new RegExp(`wss?://[a-z.-_\\\\d]+(:(d+))?`, \"gi\");\n  if (!pattern.test(value)) {\n    return `${value} is not a valid WebSocket URL`;\n  }\n};\n\nexport const createValidator = (rules: Rules) => {\n  return (data: any = {}): { [field: string]: string } => {\n    const errors = {};\n    Object.keys(rules).forEach((key) => {\n      // concat enables both functions and arrays of functions\n      const rule = join([].concat(rules[key]));\n      const error = rule(data[key]);\n      if (error) {\n        errors[key] = error;\n      }\n    });\n    return errors;\n  };\n};\n\nexport const createPrimitiveValidator = (rules: Rule[]) => {\n  return (data: any): ?string => {\n    for (let i = 0; i < rules.length; i++) {\n      const error = rules[i](data);\n      if (error) {\n        return error;\n      }\n    }\n  };\n};\n\nexport type ValidationResult =\n  | string\n  | {\n      [fieldName: string]: string,\n    };\n\nexport const validationErrorToString = (validationResult: ValidationResult): string =>\n  typeof validationResult === \"string\"\n    ? validationResult\n    : Object.keys(validationResult)\n        .map((key) => `${key}: ${validationResult[key]}`)\n        .join(\", \");\n\nexport const cameraStateValidator = (jsonData: any): ?ValidationResult => {\n  const data = typeof jsonData !== \"object\" ? {} : jsonData;\n  const rules = {\n    distance: [isNumber],\n    perspective: [isBoolean],\n    phi: [isNumber],\n    thetaOffset: [isNumber],\n    target: [isNumberArray(3)],\n    targetOffset: [isNumberArray(3)],\n    targetOrientation: [isOrientation],\n  };\n  const validator = createValidator(rules);\n  const result = validator(data);\n\n  return Object.keys(result).length === 0 ? undefined : result;\n};\n\nconst isXYPointArray = (value: any): ?string => {\n  if (Array.isArray(value)) {\n    for (const item of value) {\n      if (!item || item.x == null || item.y == null) {\n        return `must contain x and y points`;\n      }\n      if (typeof item.x !== \"number\" || typeof item.y !== \"number\") {\n        return `x and y points must be numbers`;\n      }\n    }\n  } else {\n    return \"must be an array of x and y points\";\n  }\n};\n\nconst isPolygons = (value: any): ?string => {\n  if (Array.isArray(value)) {\n    for (const item of value) {\n      const error = isXYPointArray(item);\n      if (error) {\n        return error;\n      }\n    }\n  } else {\n    return \"must be an array of nested x and y points\";\n  }\n};\n\n// validate the polygons must be a nested array of xy points\nexport const polygonPointsValidator = (jsonData: any): ?ValidationResult => {\n  if (!jsonData || isEqual(jsonData, []) || isEqual(jsonData, {})) {\n    return undefined;\n  }\n  const rules = { polygons: [isPolygons] };\n  const validator = createValidator(rules);\n  const result = validator({ polygons: jsonData });\n  return Object.keys(result).length === 0 ? undefined : result.polygons;\n};\n\nexport const point2DValidator = (jsonData: any): ?ValidationResult => {\n  const data = typeof jsonData !== \"object\" ? {} : jsonData;\n  const rules = { x: [isRequired, isNumber], y: [isRequired, isNumber] };\n  const validator = createValidator(rules);\n  const result = validator(data);\n  return Object.keys(result).length === 0 ? undefined : result;\n};\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { isEqual } from \"lodash\";\nimport * as React from \"react\";\nimport { type ReglClickInfo } from \"regl-worldview\";\n\nimport type { Point } from \"webviz-core/src/types/Messages\";\nimport { arrayToPoint } from \"webviz-core/src/util\";\n\nexport type MeasureState = \"idle\" | \"place-start\" | \"place-finish\";\n\nexport type MeasureInfo = {|\n  measureState: MeasureState,\n  measurePoints: { start: ?Point, end: ?Point },\n|};\n\ntype Props = {|\n  onMeasureInfoChange: (MeasureInfo) => void,\n  ...MeasureInfo,\n|};\n\n/* eslint-disable no-restricted-syntax */\n\nexport default class MeasuringTool extends React.Component<Props> {\n  mouseDownCoords: number[] = [-1, -1];\n\n  toggleMeasureState = () => {\n    const newMeasureState = this.props.measureState === \"idle\" ? \"place-start\" : \"idle\";\n    this.props.onMeasureInfoChange({\n      measureState: newMeasureState,\n      measurePoints: { start: undefined, end: undefined },\n    });\n  };\n\n  reset = () => {\n    this.props.onMeasureInfoChange({\n      measureState: \"idle\",\n      measurePoints: { start: undefined, end: undefined },\n    });\n  };\n\n  _canvasMouseDownHandler = (e: MouseEvent, clickInfo: ReglClickInfo) => {\n    this.mouseDownCoords = [e.clientX, e.clientY];\n  };\n\n  _canvasMouseUpHandler = (e: MouseEvent, clickInfo: ReglClickInfo) => {\n    const mouseUpCoords = [e.clientX, e.clientY];\n    const { measureState, measurePoints, onMeasureInfoChange } = this.props;\n\n    if (!isEqual(mouseUpCoords, this.mouseDownCoords)) {\n      return;\n    }\n\n    if (measureState === \"place-start\") {\n      onMeasureInfoChange({ measureState: \"place-finish\", measurePoints });\n    } else if (measureState === \"place-finish\") {\n      // Use setImmediate so there is a tick between resetting the measure state and clicking the 3D canvas.\n      // If we call onMeasureInfoChange right away, the clicked object context menu will show up upon finishing measuring.\n      setImmediate(() => {\n        onMeasureInfoChange({ measurePoints, measureState: \"idle\" });\n      });\n    }\n  };\n\n  _canvasMouseMoveHandler = (e: MouseEvent, clickInfo: ReglClickInfo) => {\n    const { measureState, measurePoints, onMeasureInfoChange } = this.props;\n    switch (measureState) {\n      case \"place-start\":\n        onMeasureInfoChange({\n          measureState,\n          measurePoints: {\n            start: arrayToPoint(clickInfo.ray.planeIntersection([0, 0, 0], [0, 0, 1])),\n            end: undefined,\n          },\n        });\n        break;\n\n      case \"place-finish\":\n        onMeasureInfoChange({\n          measureState,\n          measurePoints: {\n            ...measurePoints,\n            end: arrayToPoint(clickInfo.ray.planeIntersection([0, 0, 0], [0, 0, 1])),\n          },\n        });\n        break;\n    }\n  };\n\n  get onMouseMove(): ?(MouseEvent, ReglClickInfo) => void {\n    if (!this.measureActive) {\n      return null;\n    }\n\n    return this._canvasMouseMoveHandler;\n  }\n\n  get onMouseUp(): ?(MouseEvent, ReglClickInfo) => void {\n    if (!this.measureActive) {\n      return null;\n    }\n\n    return this._canvasMouseUpHandler;\n  }\n\n  get onMouseDown(): ?(MouseEvent, ReglClickInfo) => void {\n    if (!this.measureActive) {\n      return null;\n    }\n\n    return this._canvasMouseDownHandler;\n  }\n\n  get measureActive(): boolean {\n    const { measureState } = this.props;\n    return measureState === \"place-start\" || measureState === \"place-finish\";\n  }\n\n  get measureDistance(): string {\n    const { start, end } = this.props.measurePoints;\n    let dist_string = \"\";\n    if (start && end) {\n      const dist = Math.hypot(end.x - start.x, end.y - start.y, end.z - start.z);\n      dist_string = `${dist.toFixed(2)}m`;\n    }\n\n    return dist_string;\n  }\n\n  render() {\n    return null;\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ArrowDownIcon from \"@mdi/svg/svg/chevron-down.svg\";\nimport ArrowUpIcon from \"@mdi/svg/svg/chevron-up.svg\";\nimport CloseIcon from \"@mdi/svg/svg/close.svg\";\nimport SearchIcon from \"@mdi/svg/svg/magnify.svg\";\nimport { vec3 } from \"gl-matrix\";\nimport { range, throttle } from \"lodash\";\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { type CameraState, cameraStateSelectors } from \"regl-worldview\";\n\nimport Button from \"webviz-core/src/components/Button\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Transforms from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport type { TextMarker, Color } from \"webviz-core/src/types/Messages\";\nimport { useDeepChangeDetector } from \"webviz-core/src/util/hooks\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const YELLOW = { r: 1, b: 0, g: 1, a: 1 };\nexport const ORANGE = { r: 0.97, g: 0.58, b: 0.02, a: 1 };\n\n// $FlowFixMe - Can't figure this one out.\nexport type GLTextMarker = TextMarker & {\n  highlightedIndices?: number[],\n  highlightColor?: Color,\n};\n\nexport type WorldSearchTextProps = {|\n  searchTextOpen: boolean,\n  searchText: string,\n  setSearchTextMatches: (markers: GLTextMarker[]) => void,\n  searchTextMatches: GLTextMarker[],\n  selectedMatchIndex: number,\n|};\n\nexport type SearchTextProps = {|\n  ...WorldSearchTextProps,\n  toggleSearchTextOpen: (bool: boolean) => void,\n  setSearchText: (searchText: string) => void,\n  setSelectedMatchIndex: (index: number) => void,\n  searchInputRef: {| current: ?HTMLInputElement |},\n|};\n\nexport const getHighlightedIndices = (text?: string, searchText: string): number[] => {\n  const highlightedIndicesSet = new Set();\n  let match;\n  let startingIndex = 0;\n  const lowerCaseSearchText = searchText.toLowerCase();\n  const lowerCaseText = text ? text.toLowerCase() : \"\";\n  while ((match = lowerCaseText.indexOf(lowerCaseSearchText, startingIndex)) !== -1) {\n    range(match, match + searchText.length).forEach((index) => {\n      highlightedIndicesSet.add(index);\n    });\n    startingIndex = match + 1;\n  }\n\n  const highlightedIndices = Array.from(highlightedIndicesSet);\n  return highlightedIndices;\n};\n\nexport const useGLText = ({\n  text,\n  searchText,\n  searchTextOpen,\n  selectedMatchIndex,\n  setSearchTextMatches,\n  searchTextMatches,\n}: {|\n  ...WorldSearchTextProps,\n  text: TextMarker[],\n|}): GLTextMarker[] => {\n  const glText: GLTextMarker[] = React.useMemo(\n    () => {\n      let numMatches = 0;\n      return text.map((marker, i) => {\n        const scale = {\n          // RViz ignores scale.x/y for text and only uses z\n          x: marker.scale.z,\n          y: marker.scale.z,\n          z: marker.scale.z,\n        };\n\n        if (!searchText || !searchTextOpen) {\n          return { ...marker, scale };\n        }\n\n        const highlightedIndices = getHighlightedIndices(marker.text, searchText);\n\n        if (highlightedIndices.length) {\n          numMatches += 1;\n          const highlightedMarker = {\n            ...marker,\n            scale,\n            highlightColor: selectedMatchIndex + 1 === numMatches ? ORANGE : YELLOW,\n            highlightedIndices,\n          };\n          return highlightedMarker;\n        }\n\n        return { ...marker, scale };\n      });\n    },\n    [searchText, searchTextOpen, selectedMatchIndex, text]\n  );\n\n  const throttledSetSearchTextMatches = useCallback(throttle(setSearchTextMatches, 200, { trailing: true }), [\n    setSearchTextMatches,\n  ]);\n\n  useEffect(\n    () => {\n      if (!searchTextOpen && !searchTextMatches.length) {\n        return;\n      }\n      const matches = glText.filter((marker) => marker.highlightedIndices && marker.highlightedIndices.length);\n      if (matches.length) {\n        throttledSetSearchTextMatches(matches);\n      } else if (!matches.length && searchTextMatches.length) {\n        throttledSetSearchTextMatches([]);\n      }\n    },\n    [throttledSetSearchTextMatches, glText, searchText, searchTextMatches.length, searchTextOpen]\n  );\n\n  return glText;\n};\n\nexport const useSearchText = (): SearchTextProps => {\n  const [searchTextOpen, toggleSearchTextOpen] = useState<boolean>(false);\n  const [searchText, setSearchText] = useState<string>(\"\");\n  const [searchTextMatches, setSearchTextMatches] = useState<GLTextMarker[]>([]);\n  const [selectedMatchIndex, setSelectedMatchIndex] = useState(0);\n  const searchInputRef = useRef<?HTMLInputElement>(null);\n\n  return {\n    searchTextOpen,\n    toggleSearchTextOpen,\n    searchText,\n    setSearchText,\n    setSearchTextMatches,\n    searchTextMatches,\n    selectedMatchIndex,\n    setSelectedMatchIndex,\n    searchInputRef,\n  };\n};\ntype SearchTextComponentProps = {\n  onCameraStateChange: (CameraState) => void,\n  onFollowChange: (newFollowTf?: string | false, newFollowOrientation?: boolean) => void,\n  cameraState: CameraState,\n  rootTf: ?string,\n  transforms: Transforms,\n  ...SearchTextProps,\n};\n\n// Exported for tests.\nexport const useSearchMatches = ({\n  cameraState,\n  currentMatch,\n  onCameraStateChange,\n  rootTf,\n  searchTextOpen,\n  transforms,\n}: {\n  cameraState: CameraState,\n  currentMatch: GLTextMarker,\n  onCameraStateChange: (CameraState) => void,\n  rootTf: ?string,\n  searchTextOpen: boolean,\n  transforms: Transforms,\n}) => {\n  const hasCurrentMatchChanged = useDeepChangeDetector([currentMatch], true);\n  React.useEffect(\n    () => {\n      if (!currentMatch || !searchTextOpen || !rootTf || !hasCurrentMatchChanged) {\n        return;\n      }\n\n      const { header, pose } = currentMatch;\n\n      const output = transforms.apply(\n        { position: { x: 0, y: 0, z: 0 }, orientation: { x: 0, y: 0, z: 0, w: 0 } },\n        pose,\n        header.frame_id,\n        rootTf\n      );\n      if (!output) {\n        return;\n      }\n      const {\n        position: { x, y, z },\n      } = output;\n\n      const targetHeading = cameraStateSelectors.targetHeading(cameraState);\n      const targetOffset = [0, 0, 0];\n      vec3.rotateZ(targetOffset, vec3.subtract(targetOffset, [x, y, z], cameraState.target), [0, 0, 0], targetHeading);\n      onCameraStateChange({ ...cameraState, targetOffset });\n    },\n    [cameraState, currentMatch, hasCurrentMatchChanged, onCameraStateChange, rootTf, searchTextOpen, transforms]\n  );\n};\n\nconst SearchText = React.memo<SearchTextComponentProps>(\n  ({\n    searchTextOpen,\n    toggleSearchTextOpen,\n    searchText,\n    setSearchText,\n    searchInputRef,\n    setSelectedMatchIndex,\n    selectedMatchIndex,\n    searchTextMatches,\n    onCameraStateChange,\n    cameraState,\n    transforms,\n    rootTf,\n    onFollowChange,\n  }: SearchTextComponentProps) => {\n    const currentMatch = searchTextMatches[selectedMatchIndex];\n    const iterateCurrentIndex = useCallback(\n      (iterator: number) => {\n        const newIndex = selectedMatchIndex + iterator;\n        if (newIndex >= searchTextMatches.length) {\n          setSelectedMatchIndex(0);\n        } else if (newIndex < 0) {\n          setSelectedMatchIndex(searchTextMatches.length - 1);\n        } else {\n          setSelectedMatchIndex(newIndex);\n        }\n      },\n      [searchTextMatches, selectedMatchIndex, setSelectedMatchIndex]\n    );\n\n    React.useEffect(\n      () => {\n        if (!searchTextMatches.length) {\n          setSelectedMatchIndex(0);\n        }\n      },\n      [searchTextMatches.length, setSelectedMatchIndex]\n    );\n\n    useSearchMatches({\n      cameraState,\n      currentMatch,\n      onCameraStateChange,\n      rootTf,\n      searchTextOpen,\n      transforms,\n    });\n\n    if (!searchTextOpen) {\n      return (\n        <Button onClick={() => toggleSearchTextOpen(!searchTextOpen)}>\n          <Icon tooltip=\"search text markers\">\n            <SearchIcon />\n          </Icon>\n        </Button>\n      );\n    }\n\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          flexDirection: \"row\",\n          padding: \"0 4px\",\n          height: \"36px\" /* Hack to match the heights of the other toolbar components */,\n        }}>\n        <div style={{ backgroundColor: \"#1A191F\", padding: \"0px 4px 0px 8px\", borderRadius: \"4px\" }}>\n          <Icon medium>\n            <SearchIcon />\n          </Icon>\n          <input\n            autoFocus\n            ref={searchInputRef}\n            type=\"text\"\n            placeholder=\"Find in scene\"\n            spellCheck={false}\n            value={searchText}\n            style={{ backgroundColor: \"transparent\" }}\n            onChange={(e) => setSearchText(e.target.value)}\n            onKeyDown={(e: KeyboardEvent) => {\n              if (e.key !== \"Enter\") {\n                return;\n              }\n              if (e.shiftKey) {\n                iterateCurrentIndex(-1);\n                return;\n              }\n              iterateCurrentIndex(1);\n            }}\n          />\n          <span style={{ color: colors.TEXT_MUTED, width: \"50px\", display: \"inline-block\" }}>\n            {searchTextMatches.length > 0 ? selectedMatchIndex + 1 : \"0\"} of {searchTextMatches.length}\n          </span>\n        </div>\n        <Icon medium onClick={() => iterateCurrentIndex(-1)}>\n          <ArrowUpIcon />\n        </Icon>\n        <Icon medium onClick={() => iterateCurrentIndex(1)}>\n          <ArrowDownIcon />\n        </Icon>\n        <Icon onClick={() => toggleSearchTextOpen(false)} tooltip=\"[esc]\" medium>\n          <CloseIcon />\n        </Icon>\n      </div>\n    );\n  }\n);\n\nexport default SearchText;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ChevronDownIcon from \"@mdi/svg/svg/chevron-down.svg\";\nimport CloseIcon from \"@mdi/svg/svg/close.svg\";\nimport MagnifyIcon from \"@mdi/svg/svg/magnify.svg\";\nimport LessIcon from \"@mdi/svg/svg/unfold-less-horizontal.svg\";\nimport MoreIcon from \"@mdi/svg/svg/unfold-more-horizontal.svg\";\nimport { Tree } from \"antd\";\nimport React, { useMemo, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\n\nimport { type Save3DConfig } from \"../index\";\nimport NoMatchesSvg from \"./noMatches.svg\";\nimport renderTreeNodes, { SWITCHER_WIDTH } from \"./renderTreeNodes\";\nimport TopicTreeSwitcher, { SWITCHER_HEIGHT } from \"./TopicTreeSwitcher\";\nimport TopicViewModeSelector from \"./TopicViewModeSelector\";\nimport { DOT_MENU_WIDTH } from \"./TreeNodeDotMenu\";\nimport { ROW_HEIGHT, ROW_CONTENT_HEIGHT } from \"./TreeNodeRow\";\nimport type {\n  DerivedCustomSettingsByKey,\n  GetIsNamespaceCheckedByDefault,\n  GetIsTreeNodeVisibleInScene,\n  GetIsTreeNodeVisibleInTree,\n  NamespacesByTopic,\n  SceneErrorsByKey,\n  SetCurrentEditingTopic,\n  ToggleNamespaceChecked,\n  ToggleNode,\n  ToggleNodeByColumn,\n  TopicDisplayMode,\n  TreeNode,\n} from \"./types\";\nimport { TOGGLE_WRAPPER_SIZE } from \"./VisibilityToggle\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { useChangeDetector } from \"webviz-core/src/util/hooks\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst CONTAINER_SPACING = 15;\nconst DEFAULT_WIDTH = 360;\nconst DEFAULT_XS_WIDTH = 200;\nconst SEARCH_BAR_HEIGHT = 40;\nconst SWITCHER_ICON_SIZE = 20;\nexport const TREE_SPACING = 8;\nconst MAX_CONTAINER_WIDTH_RATIO = 0.9;\n\nconst MAX_DATA_SOURCE_TOGGLES_WIDTH = TOGGLE_WRAPPER_SIZE;\n\nconst TopicTreeContainer = styled.div`\n  position: absolute;\n  top: ${CONTAINER_SPACING}px;\n  left: ${CONTAINER_SPACING}px;\n  z-index: 102;\n  max-width: ${MAX_CONTAINER_WIDTH_RATIO * 100}%;\n  .ant-tree {\n    li {\n      ul {\n        padding: 0 0 0 ${SWITCHER_WIDTH}px;\n      }\n    }\n    .ant-tree-node-content-wrapper {\n      cursor: unset;\n    }\n    .ant-tree-switcher {\n      height: ${ROW_HEIGHT}px;\n    }\n    .ant-tree-treenode {\n      padding: 0 ${({ isXSWidth }) => (isXSWidth ? 0 : TREE_SPACING)}px;\n      &:hover {\n        background: ${colors.DARK4};\n      }\n      &.ant-tree-treenode-disabled {\n        color: ${colors.TEXT_MUTED};\n        cursor: unset;\n        .ant-tree-node-content-wrapper {\n          cursor: unset;\n        }\n      }\n    }\n    .ant-tree-treenode-switcher-close,\n    .ant-tree-treenode-switcher-open {\n      .ant-tree-node-content-wrapper {\n        padding: 0;\n      }\n    }\n  }\n`;\n\nconst STopicTree = styled.div`\n  position: relative;\n  color: ${colors.TEXTL1};\n  border-radius: 6px;\n  background-color: ${colors.TOOLBAR};\n  padding-bottom: 6px;\n  max-width: 100%;\n  overflow: auto;\n`;\n\nconst STopicTreeHeader = styled.div`\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  display: flex;\n  padding-left: 8px;\n  align-items: center;\n  background-color: ${colors.DARK5};\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n`;\n\nconst SFilter = styled.div`\n  display: flex;\n  padding: 8px 4px;\n  align-items: center;\n  flex: 1;\n`;\n\nconst SInput = styled.input`\n  background: transparent;\n  flex: 1;\n  overflow: auto;\n  font-size: 14px;\n  margin-left: 4px;\n  padding: 4px 8px;\n  min-width: 80px;\n  border: none;\n  :focus,\n  :hover {\n    outline: none;\n    background: transparent;\n  }\n`;\n\nconst SSwitcherIcon = styled.span`\n  width: ${SWITCHER_WIDTH}px;\n  height: ${ROW_CONTENT_HEIGHT}px;\n  padding-top: 4px;\n  transition: transform 0.2s ease-in-out;\n  & .ant-tree-switcher_close {\n    transform: rotate(-90deg);\n  }\n  & .ant-tree-switcher_open {\n    transform: rotate(0deg);\n  }\n`;\n\nconst SNoMatches = styled.div`\n  margin-top: 57px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 74px;\n`;\n\nconst SNoMatchesText = styled.div`\n  margin-top: 25px;\n  font-size: 16px;\n  width: 205px;\n  text-align: center;\n  line-height: 130%;\n`;\n\ntype Props = {|\n  allKeys: string[],\n  availableNamespacesByTopic: NamespacesByTopic,\n  checkedKeys: string[],\n  containerHeight: number,\n  containerWidth: number,\n  derivedCustomSettingsByKey: DerivedCustomSettingsByKey,\n  expandedKeys: string[],\n  filterText: string,\n  getIsNamespaceCheckedByDefault: GetIsNamespaceCheckedByDefault,\n  getIsTreeNodeVisibleInScene: GetIsTreeNodeVisibleInScene,\n  getIsTreeNodeVisibleInTree: GetIsTreeNodeVisibleInTree,\n  hasFeatureColumn: boolean,\n  onExitTopicTreeFocus: () => void,\n  pinTopics: boolean,\n  rootTreeNode: TreeNode,\n  saveConfig: Save3DConfig,\n  sceneErrorsByKey: SceneErrorsByKey,\n  setCurrentEditingTopic: SetCurrentEditingTopic,\n  setFilterText: (string) => void,\n  setShowTopicTree: (boolean) => void,\n  shouldExpandAllKeys: boolean,\n  showTopicTree: boolean,\n  toggleCheckAllAncestors: ToggleNodeByColumn,\n  toggleCheckAllDescendants: ToggleNodeByColumn,\n  toggleNamespaceChecked: ToggleNamespaceChecked,\n  toggleNodeChecked: ToggleNodeByColumn,\n  toggleNodeExpanded: ToggleNode,\n  topicDisplayMode: TopicDisplayMode,\n|};\n\nfunction TopicTree({\n  allKeys,\n  availableNamespacesByTopic,\n  checkedKeys,\n  containerHeight,\n  containerWidth,\n  derivedCustomSettingsByKey,\n  expandedKeys,\n  filterText,\n  getIsNamespaceCheckedByDefault,\n  getIsTreeNodeVisibleInScene,\n  getIsTreeNodeVisibleInTree,\n  hasFeatureColumn,\n  pinTopics,\n  rootTreeNode,\n  saveConfig,\n  sceneErrorsByKey,\n  setCurrentEditingTopic,\n  setFilterText,\n  setShowTopicTree,\n  shouldExpandAllKeys,\n  showTopicTree,\n  toggleCheckAllAncestors,\n  toggleCheckAllDescendants,\n  toggleNamespaceChecked,\n  toggleNodeChecked,\n  toggleNodeExpanded,\n  topicDisplayMode,\n}: Props) {\n  const renderTopicTree = pinTopics || showTopicTree;\n  const scrollContainerRef = useRef<?HTMLDivElement>();\n  const checkedKeysSet = useMemo(() => new Set(checkedKeys), [checkedKeys]);\n  const treeContainerHeight = containerHeight - CONTAINER_SPACING * 2;\n  const treeHeight = treeContainerHeight - SEARCH_BAR_HEIGHT - SWITCHER_HEIGHT;\n\n  const maxAvailableContainerWidth = Math.floor(containerWidth * MAX_CONTAINER_WIDTH_RATIO);\n  let treeWidth = Math.max(Math.min(maxAvailableContainerWidth, DEFAULT_WIDTH), DEFAULT_XS_WIDTH);\n  const isXSWidth = treeWidth >= maxAvailableContainerWidth;\n  const togglesWidth = hasFeatureColumn ? MAX_DATA_SOURCE_TOGGLES_WIDTH * 2 : MAX_DATA_SOURCE_TOGGLES_WIDTH;\n  if (!rootTreeNode.providerAvailable) {\n    treeWidth -= togglesWidth + DOT_MENU_WIDTH;\n  }\n\n  const filterTextFieldRef = useRef();\n\n  // HACK: Ant Tree does not auto expand dynamic tree nodes. Create a copy of expandedNodes\n  // to ensure newly added nodes such as `uncategorized` are properly expanded:\n  // https://github.com/ant-design/ant-design/issues/18012\n  const expandedKeysRef = useRef(expandedKeys);\n  const hasRootNodeChanged = useChangeDetector([rootTreeNode], false);\n  expandedKeysRef.current = hasRootNodeChanged ? [...expandedKeys] : expandedKeys;\n\n  useEffect(\n    () => {\n      // auto focus whenever first rendering the topic tree\n      if (renderTopicTree && filterTextFieldRef.current) {\n        filterTextFieldRef.current.focus();\n      }\n    },\n    [renderTopicTree]\n  );\n\n  const topLevelNodesCollapsed = useMemo(\n    () => {\n      const topLevelChildren = rootTreeNode.type === \"group\" ? rootTreeNode.children : [];\n      const topLevelKeys = topLevelChildren.map(({ key }) => key);\n      return topLevelKeys.every((key) => !expandedKeys.includes(key));\n    },\n    [expandedKeys, rootTreeNode]\n  );\n\n  const showNoMatchesState = !getIsTreeNodeVisibleInTree(rootTreeNode.key);\n  const headerRightIconStyle = { margin: `4px ${(isXSWidth ? 0 : TREE_SPACING) + 2}px 4px 8px` };\n\n  return (\n    <TopicTreeContainer\n      isXSWidth={isXSWidth}\n      className=\"ant-component\"\n      style={{ maxHeight: containerHeight - CONTAINER_SPACING * 3 }}>\n      <TopicTreeSwitcher\n        showErrorBadge={!renderTopicTree && Object.keys(sceneErrorsByKey).length > 0}\n        pinTopics={pinTopics}\n        renderTopicTree={renderTopicTree}\n        saveConfig={saveConfig}\n        setShowTopicTree={setShowTopicTree}\n        showTopicTree={showTopicTree}\n      />\n      {renderTopicTree && (\n        <STopicTree onClick={(e) => e.stopPropagation()}>\n          <div style={{ width: treeWidth }}>\n            <STopicTreeHeader>\n              <SFilter>\n                <Icon style={{ color: \"rgba(255,255,255, 0.3)\" }}>\n                  <MagnifyIcon style={{ width: 16, height: 16 }} />\n                </Icon>\n                <SInput\n                  size={3}\n                  data-test=\"topic-tree-filter-input\"\n                  value={filterText}\n                  placeholder=\"Type to filter\"\n                  onChange={(event) => setFilterText(event.target.value)}\n                  ref={filterTextFieldRef}\n                />\n              </SFilter>\n              {rootTreeNode.providerAvailable && (\n                <TopicViewModeSelector\n                  isXSWidth={isXSWidth}\n                  saveConfig={saveConfig}\n                  topicDisplayMode={topicDisplayMode}\n                />\n              )}\n              {!filterText && (\n                <Icon\n                  dataTest=\"expand-all-icon\"\n                  tooltip={topLevelNodesCollapsed ? \"Expand all\" : \"Collapse all\"}\n                  small\n                  fade\n                  onClick={() => {\n                    saveConfig({ expandedKeys: topLevelNodesCollapsed ? allKeys : [] }, { keepLayoutInUrl: true });\n                  }}\n                  style={headerRightIconStyle}>\n                  {topLevelNodesCollapsed ? <MoreIcon /> : <LessIcon />}\n                </Icon>\n              )}\n              {filterText && (\n                <Icon\n                  dataTest=\"clear-filter-icon\"\n                  small\n                  fade\n                  style={headerRightIconStyle}\n                  onClick={() => setFilterText(\"\")}>\n                  <CloseIcon />\n                </Icon>\n              )}\n            </STopicTreeHeader>\n            <div ref={scrollContainerRef} style={{ overflow: \"auto\", width: treeWidth }}>\n              {showNoMatchesState ? (\n                <SNoMatches>\n                  <NoMatchesSvg />\n                  <SNoMatchesText>No results found. Try searching a different term.</SNoMatchesText>\n                </SNoMatches>\n              ) : (\n                <Tree\n                  treeData={renderTreeNodes({\n                    availableNamespacesByTopic,\n                    checkedKeysSet,\n                    children: rootTreeNode.children || [],\n                    getIsTreeNodeVisibleInScene,\n                    getIsTreeNodeVisibleInTree,\n                    getIsNamespaceCheckedByDefault,\n                    hasFeatureColumn,\n                    isXSWidth,\n                    sceneErrorsByKey,\n                    setCurrentEditingTopic,\n                    derivedCustomSettingsByKey,\n                    toggleCheckAllAncestors,\n                    toggleCheckAllDescendants,\n                    toggleNamespaceChecked,\n                    toggleNodeChecked,\n                    toggleNodeExpanded,\n                    topicDisplayMode,\n                    width: treeWidth,\n                    filterText,\n                  })}\n                  height={treeHeight}\n                  itemHeight={ROW_HEIGHT}\n                  // Disable motion because it seems to cause a bug in the `rc-tree` (used under the hood by `antd` for\n                  // the tree). This bug would result in nodes no longer being rendered after a search.\n                  motion={null}\n                  selectable={false}\n                  onExpand={(newExpandedKeys) => {\n                    if (!shouldExpandAllKeys) {\n                      saveConfig({ expandedKeys: newExpandedKeys }, { keepLayoutInUrl: true });\n                    }\n                  }}\n                  expandedKeys={shouldExpandAllKeys ? allKeys : expandedKeysRef.current}\n                  autoExpandParent={false /* Set autoExpandParent to true when filtering */}\n                  switcherIcon={\n                    <SSwitcherIcon style={filterText ? { width: 0, height: 0, overflow: \"hidden\" } : {}}>\n                      <ChevronDownIcon\n                        fill=\"currentColor\"\n                        style={{ width: SWITCHER_ICON_SIZE, height: SWITCHER_ICON_SIZE }}\n                      />\n                    </SSwitcherIcon>\n                  }\n                />\n              )}\n            </div>\n          </div>\n        </STopicTree>\n      )}\n    </TopicTreeContainer>\n  );\n}\n\nexport default React.memo<Props>(TopicTree);\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport BlockHelperIcon from \"@mdi/svg/svg/block-helper.svg\";\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport tinyColor from \"tinycolor2\";\n\nimport { ROW_HEIGHT } from \"./TreeNodeRow\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const TOPIC_ROW_PADDING = 3;\n\nconst DEFAULT_COLOR = colors.LIGHT1;\nexport const DISABLED_COLOR = colors.TEXT_MUTED;\nexport const TOGGLE_WRAPPER_SIZE = 24;\n\nexport const TOGGLE_SIZE_CONFIG = {\n  NORMAL: { name: \"NORMAL\", size: 12 },\n  SMALL: { name: \"SMALL\", size: 8 },\n};\n\nconst SToggle = styled.label`\n  width: ${TOGGLE_WRAPPER_SIZE}px;\n  height: ${TOPIC_ROW_PADDING * 2 + TOGGLE_WRAPPER_SIZE}px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  cursor: pointer;\n  :focus {\n    span {\n      border: 1px solid ${colors.BLUE} !important;\n    }\n  }\n`;\n\nconst SSpan = styled.span`\n  :hover {\n    transform: scale(1.2);\n  }\n`;\n\nexport type Size = $Keys<typeof TOGGLE_SIZE_CONFIG>;\ntype Props = {|\n  available: boolean,\n  checked: boolean,\n  dataTest?: string,\n  onAltToggle?: () => void,\n  onShiftToggle?: () => void,\n  onToggle: () => void,\n  overrideColor?: ?string,\n  size?: ?Size,\n  unavailableTooltip?: string,\n  visibleInScene: boolean,\n|};\n\nfunction getStyles({\n  checked,\n  visibleInScene,\n  overrideColor,\n  size,\n}: {\n  checked: boolean,\n  visibleInScene: boolean,\n  overrideColor: ?string,\n  size: ?Size,\n}): any {\n  const sizeInNumber =\n    size === TOGGLE_SIZE_CONFIG.SMALL.name ? TOGGLE_SIZE_CONFIG.SMALL.size : TOGGLE_SIZE_CONFIG.NORMAL.size;\n  let styles = { width: sizeInNumber, height: sizeInNumber, borderRadius: sizeInNumber / 2 };\n\n  const { enabledColor, disabledColor } = overrideColor\n    ? {\n        enabledColor: overrideColor,\n        disabledColor: tinyColor(overrideColor)\n          .setAlpha(0.5)\n          .toRgbString(),\n      }\n    : { enabledColor: DEFAULT_COLOR, disabledColor: DISABLED_COLOR };\n\n  const color = visibleInScene ? enabledColor : disabledColor;\n  if (checked) {\n    styles = { ...styles, background: color };\n  } else {\n    styles = { ...styles, border: `1px solid ${color}` };\n  }\n\n  return styles;\n}\n\n// A toggle component that supports using tab key to focus and using space key to check/uncheck.\nexport default function VisibilityToggle({\n  available,\n  checked,\n  dataTest,\n  onAltToggle,\n  onShiftToggle,\n  onToggle,\n  overrideColor,\n  size,\n  unavailableTooltip,\n  visibleInScene,\n}: Props) {\n  // Handle shift + click/enter, option + click/enter, and click/enter.\n  const onChange = useCallback(\n    (e: MouseEvent | KeyboardEvent) => {\n      if (onShiftToggle && e.shiftKey) {\n        onShiftToggle();\n      } else if (onAltToggle && e.altKey) {\n        onAltToggle();\n      } else {\n        onToggle();\n      }\n    },\n    [onAltToggle, onShiftToggle, onToggle]\n  );\n  if (!available) {\n    return (\n      <Icon\n        tooltipProps={{ placement: \"top\" }}\n        tooltip={unavailableTooltip || \"Unavailable\"}\n        fade\n        small\n        clickable={false}\n        style={{\n          fontSize: 12,\n          cursor: \"not-allowed\",\n          height: ROW_HEIGHT,\n          width: TOGGLE_WRAPPER_SIZE,\n          padding: 6,\n        }}>\n        <BlockHelperIcon />\n      </Icon>\n    );\n  }\n\n  return (\n    <SToggle\n      data-test={dataTest}\n      tabIndex={0}\n      onKeyDown={(e: KeyboardEvent) => {\n        if (e.key === \"Enter\") {\n          onChange(e);\n        }\n      }}\n      onClick={(e: MouseEvent) => onChange(e)}>\n      <SSpan style={getStyles({ checked, visibleInScene, size, overrideColor })} />\n    </SToggle>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { sortedIndexBy } from \"lodash\";\nimport { type Node } from \"react\";\n\nimport {\n  type DiagnosticStatusArray,\n  type DiagnosticsById,\n  type DiagnosticId,\n  type DiagnosticsByLevel,\n  LEVELS,\n  computeDiagnosticInfo,\n} from \"./util\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Message } from \"webviz-core/src/players/types\";\n\nexport type DiagnosticAutocompleteEntry = {|\n  name: string,\n  hardware_id: string,\n  id: DiagnosticId,\n  displayName: string,\n  sortKey: string,\n|};\n\nexport type DiagnosticsBuffer = {|\n  diagnosticsById: DiagnosticsById,\n  sortedAutocompleteEntries: DiagnosticAutocompleteEntry[],\n  diagnosticsByLevel: DiagnosticsByLevel,\n|};\n\ntype Props = {|\n  children: (DiagnosticsBuffer) => Node,\n  topic: string,\n|};\n\n// Exported for tests\nexport function addMessage(buffer: DiagnosticsBuffer, message: Message): DiagnosticsBuffer {\n  const statusArray: DiagnosticStatusArray = message.message;\n  if (statusArray.status.length === 0) {\n    return buffer;\n  }\n  for (const status of statusArray.status) {\n    const info = computeDiagnosticInfo(status, statusArray.header.stamp);\n\n    const oldInfo = buffer.diagnosticsById.get(info.id);\n\n    // update diagnosticsByLevel\n    if (status.level in buffer.diagnosticsByLevel) {\n      buffer.diagnosticsByLevel[status.level].set(info.id, info);\n      // Remove it from the old map if its level has changed.\n      if (oldInfo && oldInfo.status.level !== status.level) {\n        buffer.diagnosticsByLevel[oldInfo.status.level].delete(info.id);\n      }\n    } else {\n      console.warn(\"unrecognized status level\", status);\n    }\n\n    // add to sortedAutocompleteEntries if we haven't seen this id before\n    if (oldInfo === undefined) {\n      const newEntry = {\n        hardware_id: info.status.hardware_id,\n        name: info.status.name,\n        id: info.id,\n        displayName: info.displayName,\n        sortKey: info.displayName.replace(/^\\//, \"\").toLowerCase(),\n      };\n      const index = sortedIndexBy(buffer.sortedAutocompleteEntries, newEntry, \"displayName\");\n      buffer.sortedAutocompleteEntries.splice(index, 0, newEntry);\n    }\n\n    // update diagnosticsById\n    buffer.diagnosticsById.set(info.id, info);\n  }\n  return { ...buffer };\n}\n\n// Exported for tests\nexport function defaultDiagnosticsBuffer(): DiagnosticsBuffer {\n  return {\n    diagnosticsById: new Map(),\n    sortedAutocompleteEntries: [],\n    diagnosticsByLevel: {\n      [LEVELS.OK]: new Map(),\n      [LEVELS.WARN]: new Map(),\n      [LEVELS.ERROR]: new Map(),\n      [LEVELS.STALE]: new Map(),\n    },\n  };\n}\n\nexport function useDiagnostics(topic: string): DiagnosticsBuffer {\n  return PanelAPI.useMessageReducer<DiagnosticsBuffer>({\n    topics: [topic],\n    restore: defaultDiagnosticsBuffer,\n    addMessage,\n  });\n}\n\nexport default function DiagnosticsHistory({ children, topic }: Props) {\n  const diagnostics = useDiagnostics(topic);\n  return children(diagnostics);\n}\n","// @flow\n\n/* eslint-disable header/header */\n\n// This file is forked from https://github.com/jerairrest/react-chartjs-2/tree/111f3590a008b8211217e613b5531fb00c3a431b.\n// We are upgrading this wrapper of Chart.js to handle rendering Chart.js within a worker.\n\n// The follow license applies to this file only:\n\n// The MIT License (MIT)\n\n// Copyright (c) 2017 Jeremy Ayerst\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n// documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n// Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n// WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport Hammer from \"hammerjs\";\nimport React from \"react\";\nimport uuid from \"uuid\";\n\nimport { type ScaleOptions as ManagerScaleOptions } from \"./ChartJSManager\";\nimport MainThreadChartJSWorker from \"./ChartJSWorker\";\nimport ChartJSWorker from \"./ChartJSWorker.worker\";\nimport { type ScaleBounds, type ZoomOptions, type PanOptions, wheelZoomHandler } from \"./zoomAndPanHelpers\";\nimport { getFakeRpcs, type RpcLike } from \"webviz-core/src/util/FakeRpc\";\nimport supportsOffscreenCanvas from \"webviz-core/src/util/supportsOffscreenCanvas\";\nimport WebWorkerManager from \"webviz-core/src/util/WebWorkerManager\";\n\nexport type HoveredElement = any;\nexport type ScaleOptions = ManagerScaleOptions;\ntype OnEndChartUpdate = () => void;\n\ntype Props = {|\n  id?: string,\n  data: any,\n  height: number,\n  width: number,\n  legend?: any,\n  options: any,\n  type: string,\n  zoomOptions: ZoomOptions,\n  panOptions: PanOptions,\n  onScaleBoundsUpdate?: (ScaleBounds[]) => void,\n  onPanZoom?: () => void,\n  onClick?: (SyntheticMouseEvent<HTMLCanvasElement>, datalabel: ?any) => void,\n  forceDisableWorkerRendering?: ?boolean,\n  scaleOptions?: ?ScaleOptions,\n  onChartUpdate?: () => OnEndChartUpdate,\n|};\n\nconst devicePixelRatio = window.devicePixelRatio || 1;\n\nconst webWorkerManager = new WebWorkerManager(ChartJSWorker, 8);\n\nclass ChartComponent extends React.PureComponent<Props> {\n  canvas: ?HTMLCanvasElement;\n  _chartRpc: ?RpcLike;\n  // $FlowFixMe\n  _node: OffscreenCanvas;\n  _id = uuid.v4();\n  _scaleBoundsByScaleId = {};\n  _usingWebWorker = false;\n  _onEndChartUpdateCallbacks = {};\n\n  constructor(props: Props) {\n    super(props);\n    this._getRpc();\n  }\n\n  static defaultProps = {\n    legend: {\n      display: true,\n      position: \"bottom\",\n    },\n    type: \"doughnut\",\n    height: 150,\n    width: 300,\n    options: {},\n    zoomOptions: { mode: \"xy\", enabled: true, sensitivity: 3, speed: 0.1 },\n    panOptions: { mode: \"xy\", enabled: true, speed: 20, threshold: 10 },\n  };\n\n  _getRpc = (): RpcLike => {\n    if (this._chartRpc) {\n      return this._chartRpc;\n    }\n\n    if (!this.props.forceDisableWorkerRendering && supportsOffscreenCanvas()) {\n      // Only use a real chart worker if we support offscreenCanvas.\n      this._chartRpc = webWorkerManager.registerWorkerListener(this._id);\n      this._usingWebWorker = true;\n    } else {\n      // Otherwise use a fake RPC so that we don't have to maintain two separate APIs.\n      const { mainThreadRpc, workerRpc } = getFakeRpcs();\n      new MainThreadChartJSWorker(workerRpc);\n      this._chartRpc = mainThreadRpc;\n      this._usingWebWorker = false;\n    }\n    return this._chartRpc;\n  };\n\n  componentDidMount() {\n    const { type, data, options, scaleOptions, width, height } = this.props;\n    // $FlowFixMe\n    if (!this.canvas.transferControlToOffscreen) {\n      // TODO add fallback.\n      throw new Error(\"ReactChartJS currently only works with browsers with offscreen canvas support\");\n    }\n\n    this._setupPanAndPinchHandlers();\n\n    let node = this.canvas;\n    if (!this.props.forceDisableWorkerRendering && supportsOffscreenCanvas()) {\n      // $FlowFixMe\n      node = this.canvas.transferControlToOffscreen();\n    }\n    this._node = node;\n    this._getRpc()\n      .send(\n        \"initialize\",\n        {\n          node,\n          id: this._id,\n          type,\n          data,\n          options,\n          scaleOptions,\n          devicePixelRatio,\n          width,\n          height,\n        },\n        [node]\n      )\n      .then((scaleBoundsUpdate) => this._onUpdateScaleBounds(scaleBoundsUpdate));\n  }\n\n  componentDidUpdate() {\n    const { data, options, scaleOptions, width, height, onChartUpdate } = this.props;\n    let chartUpdateId;\n    if (onChartUpdate) {\n      const onEndChartUpdate = onChartUpdate();\n      chartUpdateId = uuid.v4();\n      this._onEndChartUpdateCallbacks[chartUpdateId] = onEndChartUpdate;\n    }\n    this._getRpc()\n      .send(\"update\", {\n        id: this._id,\n        data,\n        options,\n        scaleOptions,\n        width,\n        height,\n      })\n      .then((scaleBoundsUpdate) => {\n        this._onUpdateScaleBounds(scaleBoundsUpdate);\n      })\n      .finally(() => {\n        if (this._onEndChartUpdateCallbacks[chartUpdateId]) {\n          this._onEndChartUpdateCallbacks[chartUpdateId]();\n          delete this._onEndChartUpdateCallbacks[chartUpdateId];\n        }\n      });\n  }\n\n  componentWillUnmount() {\n    // If this component will unmount, resolve any pending update callbacks.\n    // $FlowFixMe\n    Object.values(this._onEndChartUpdateCallbacks).forEach((callback) => callback());\n    this._onEndChartUpdateCallbacks = {};\n\n    if (this._chartRpc) {\n      this._chartRpc.send(\"destroy\", { id: this._id });\n      this._chartRpc = null;\n\n      if (this._usingWebWorker) {\n        webWorkerManager.unregisterWorkerListener(this._id);\n      }\n    }\n  }\n\n  _ref = (element: ?HTMLCanvasElement) => {\n    this.canvas = element;\n  };\n\n  getElementAtXAxis = async (event: SyntheticMouseEvent<any> | MouseEvent): Promise<?HoveredElement> => {\n    if (!this.canvas) {\n      return Promise.resolve(undefined);\n    }\n\n    const boundingRect = this.canvas.getBoundingClientRect();\n    if (\n      event.clientX < boundingRect.left ||\n      event.clientX > boundingRect.right ||\n      event.clientY < boundingRect.top ||\n      event.clientY > boundingRect.bottom\n    ) {\n      return Promise.resolve(undefined);\n    }\n\n    const newEvent = {\n      native: true,\n      x: event.clientX - boundingRect.left,\n      y: event.clientY - boundingRect.top,\n    };\n    return this._getRpc().send(\"getElementAtXAxis\", { id: this._id, event: newEvent });\n  };\n\n  // Pan/zoom section\n\n  resetZoom = async () => {\n    const scaleBoundsUpdate = await this._getRpc().send(\"resetZoom\", { id: this._id });\n    this._onUpdateScaleBounds(scaleBoundsUpdate);\n  };\n\n  _panning = false;\n  _currentDeltaX = null;\n  _currentDeltaY = null;\n  _currentPinchScaling = 1;\n\n  _setupPanAndPinchHandlers() {\n    const { threshold } = this.props.panOptions;\n    const hammerManager = new Hammer.Manager(this.canvas);\n    hammerManager.add(new Hammer.Pinch());\n    hammerManager.add(new Hammer.Pan({ threshold }));\n\n    const hammerPanHandler = async (event: any) => {\n      if (!this.props.panOptions.enabled) {\n        return;\n      }\n      if (this._currentDeltaX != null && this._currentDeltaY != null) {\n        const deltaX = event.deltaX - this._currentDeltaX;\n        const deltaY = event.deltaY - this._currentDeltaY;\n        this._currentDeltaX = event.deltaX;\n        this._currentDeltaY = event.deltaY;\n        const scaleBoundsUpdate = await this._getRpc().send(\"doPan\", {\n          id: this._id,\n          panOptions: this.props.panOptions,\n          deltaX,\n          deltaY,\n        });\n        this._onPanZoom();\n        this._onUpdateScaleBounds(scaleBoundsUpdate);\n      }\n    };\n\n    hammerManager.on(\"panstart\", (event) => {\n      this._panning = true;\n      this._currentDeltaX = 0;\n      this._currentDeltaY = 0;\n      hammerPanHandler(event);\n    });\n    hammerManager.on(\"panmove\", hammerPanHandler);\n    hammerManager.on(\"panend\", () => {\n      this._currentDeltaX = null;\n      this._currentDeltaY = null;\n      this._getRpc().send(\"resetPanDelta\", this._id);\n      setTimeout(() => {\n        this._panning = false;\n      }, 500);\n    });\n\n    // TODO: pinch gestures only kind of work right now - the built-in browser pinch zoom takes over if pinch is too\n    // aggressive. Figure out why this is happening and fix it. This is almost identical to the original plugin that\n    // does not have this problem.\n    const handlePinch = async (e) => {\n      if (!this.props.panOptions.enabled) {\n        return;\n      }\n      const diff = (1 / this._currentPinchScaling) * e.scale;\n      const rect = e.target.getBoundingClientRect();\n      const offsetX = e.center.x - rect.left;\n      const offsetY = e.center.y - rect.top;\n      const center = {\n        x: offsetX,\n        y: offsetY,\n      };\n\n      // fingers position difference\n      const x = Math.abs(e.pointers[0].clientX - e.pointers[1].clientX);\n      const y = Math.abs(e.pointers[0].clientY - e.pointers[1].clientY);\n\n      // diagonal fingers will change both (xy) axes\n      const p = x / y;\n      let xy;\n      if (p > 0.3 && p < 1.7) {\n        xy = \"xy\";\n      } else if (x > y) {\n        xy = \"x\"; // x axis\n      } else {\n        xy = \"y\"; // y axis\n      }\n\n      // Keep track of overall scale\n      this._currentPinchScaling = e.scale;\n\n      const scaleBoundsUpdate = await this._getRpc().send(\"doZoom\", {\n        id: this._id,\n        zoomOptions: this.props.zoomOptions,\n        percentZoomX: diff,\n        percentZoomY: diff,\n        focalPoint: center,\n        whichAxesParam: xy,\n      });\n      this._onPanZoom();\n      this._onUpdateScaleBounds(scaleBoundsUpdate);\n    };\n\n    hammerManager.on(\"pinchstart\", () => {\n      this._currentPinchScaling = 1; // reset tracker\n    });\n    hammerManager.on(\"pinch\", handlePinch);\n    hammerManager.on(\"pinchend\", (e) => {\n      handlePinch(e);\n      this._currentPinchScaling = 1; // reset\n      this._getRpc().send(\"resetZoomDelta\", { id: this._id });\n    });\n  }\n\n  _onWheel = async (event: SyntheticWheelEvent<HTMLCanvasElement>) => {\n    if (!this.props.zoomOptions.enabled) {\n      return;\n    }\n    const { percentZoomX, percentZoomY, focalPoint } = wheelZoomHandler(event, this.props.zoomOptions);\n    const scaleBoundsUpdate = await this._getRpc().send(\"doZoom\", {\n      id: this._id,\n      zoomOptions: this.props.zoomOptions,\n      percentZoomX,\n      percentZoomY,\n      focalPoint,\n      whichAxesParam: \"xy\",\n    });\n    this._onPanZoom();\n    this._onUpdateScaleBounds(scaleBoundsUpdate);\n  };\n\n  _onPanZoom = () => {\n    if (this.props.onPanZoom) {\n      this.props.onPanZoom();\n    }\n  };\n\n  _onUpdateScaleBounds = (scaleBoundsUpdate: ScaleBounds[]) => {\n    if (this.props.onScaleBoundsUpdate && scaleBoundsUpdate) {\n      this.props.onScaleBoundsUpdate(scaleBoundsUpdate);\n    }\n  };\n\n  _onClick = async (event: SyntheticMouseEvent<HTMLCanvasElement>) => {\n    const { onClick } = this.props;\n    if (!this._panning && onClick && this.canvas) {\n      const rect = event.currentTarget.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const y = event.clientY - rect.top;\n      const newEvent = { x, y };\n      // Since our next call is asynchronous, we have to persist the event so that React doesn't clear it.\n      event.persist();\n      const datalabel = await this._getRpc().send(\"getDatalabelAtEvent\", { id: this._id, event: newEvent });\n      onClick(event, datalabel);\n    }\n  };\n\n  render() {\n    const { height, width, id } = this.props;\n\n    return (\n      <canvas\n        ref={this._ref}\n        height={height / devicePixelRatio}\n        width={width / devicePixelRatio}\n        id={id}\n        onWheel={this._onWheel}\n        onClick={this._onClick}\n        style={{ width, height }}\n      />\n    );\n  }\n}\n\nexport default ChartComponent;\n","// @flow\n\n// This code is mostly forked from chartjs-plugin-zoom, with the goal of splitting the DOM access and the chart access\n// so that we can move Chart.js behind a web worker.\n// Link: https://github.com/chartjs/chartjs-plugin-zoom/tree/6a97a22b99e0325597b7bd7b38b083dde4949a60\n\n// The MIT License (MIT)\n// Copyright (c) 2013-2016 Nick Downie\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n// documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the\n// Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n// WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n/* eslint-disable header/header */\n\nimport cloneDeep from \"lodash/cloneDeep\";\n\nexport type ZoomOptions = $ReadOnly<{\n  mode: \"xy\" | \"x\" | \"y\",\n  enabled: boolean,\n  speed: number,\n  sensitivity: number,\n}>;\nexport type PanOptions = $ReadOnly<{\n  mode: \"xy\" | \"x\" | \"y\",\n  enabled: boolean,\n  speed: number,\n  threshold: number,\n}>;\nexport type ScaleBounds = {| id: string, min: ?number, max: ?number |};\n\ntype ChartInstance = any;\n\n// ZOOM FUNCTIONS\n\nconst zoomCumulativeDeltaByChartId = {};\n\nfunction zoomCategoryScale(scale, zoom, center, zoomOptions, chartId) {\n  const labels = scale.chart.data.labels;\n  let minIndex = scale.minIndex;\n  const lastLabelIndex = labels.length - 1;\n  let maxIndex = scale.maxIndex;\n  const sensitivity = zoomOptions.sensitivity;\n  const chartCenter = scale.isHorizontal() ? scale.left + scale.width / 2 : scale.top + scale.height / 2;\n  const centerPointer = scale.isHorizontal() ? center.x : center.y;\n\n  zoomCumulativeDeltaByChartId[chartId] = zoomCumulativeDeltaByChartId[chartId] || 0;\n  zoomCumulativeDeltaByChartId[chartId] =\n    zoom > 1 ? zoomCumulativeDeltaByChartId[chartId] + 1 : zoomCumulativeDeltaByChartId[chartId] - 1;\n\n  if (Math.abs(zoomCumulativeDeltaByChartId[chartId]) > sensitivity) {\n    if (zoomCumulativeDeltaByChartId[chartId] < 0) {\n      if (centerPointer >= chartCenter) {\n        if (minIndex <= 0) {\n          maxIndex = Math.min(lastLabelIndex, maxIndex + 1);\n        } else {\n          minIndex = Math.max(0, minIndex - 1);\n        }\n      } else if (centerPointer < chartCenter) {\n        if (maxIndex >= lastLabelIndex) {\n          minIndex = Math.max(0, minIndex - 1);\n        } else {\n          maxIndex = Math.min(lastLabelIndex, maxIndex + 1);\n        }\n      }\n      zoomCumulativeDeltaByChartId[chartId] = 0;\n    } else if (zoomCumulativeDeltaByChartId[chartId] > 0) {\n      if (centerPointer >= chartCenter) {\n        minIndex = minIndex < maxIndex ? (minIndex = Math.min(maxIndex, minIndex + 1)) : minIndex;\n      } else if (centerPointer < chartCenter) {\n        maxIndex = maxIndex > minIndex ? (maxIndex = Math.max(minIndex, maxIndex - 1)) : maxIndex;\n      }\n      zoomCumulativeDeltaByChartId[chartId] = 0;\n    }\n    scale.options.ticks.min = labels[minIndex];\n    scale.options.ticks.max = labels[maxIndex];\n  }\n}\n\nfunction zoomNumericalScale(scale, zoom, center, zoomOptions) {\n  const range = scale.max - scale.min;\n  const newDiff = range * (zoom - 1);\n\n  const centerPoint = scale.isHorizontal() ? center.x : center.y;\n  const minPercent = (scale.getValueForPixel(centerPoint) - scale.min) / range;\n  const maxPercent = 1 - minPercent;\n\n  const minDelta = newDiff * minPercent;\n  const maxDelta = newDiff * maxPercent;\n\n  scale.options.ticks.min = scale.min + minDelta;\n  scale.options.ticks.max = scale.max - maxDelta;\n}\n\nfunction zoomTimeScale(scale, zoom, center, zoomOptions) {\n  zoomNumericalScale(scale, zoom, center, zoomOptions);\n\n  const options = scale.options;\n  if (options.time) {\n    if (options.time.min) {\n      options.time.min = options.ticks.min;\n    }\n    if (options.time.max) {\n      options.time.max = options.ticks.max;\n    }\n  }\n}\n\nconst zoomFunctions = {\n  category: zoomCategoryScale,\n  time: zoomTimeScale,\n  linear: zoomNumericalScale,\n  logarithmic: zoomNumericalScale,\n};\n\nfunction zoomScale(scale, zoom, center, zoomOptions, chartId) {\n  const fn = zoomFunctions[scale.type];\n  if (fn) {\n    fn(scale, zoom, center, zoomOptions, chartId);\n  }\n}\n\nconst originalOptionsByChartId = {};\n\nfunction storeOriginalOptions(chartId: string, chart: ChartInstance) {\n  originalOptionsByChartId[chartId] = originalOptionsByChartId[chartId] || {};\n  Object.keys(chart.scales).forEach((scaleKey) => {\n    const scale = chart.scales[scaleKey];\n    if (!originalOptionsByChartId[chartId][scale.id]) {\n      originalOptionsByChartId[chartId][scale.id] = cloneDeep(scale.options);\n    }\n  });\n  Object.keys(originalOptionsByChartId[chartId]).forEach((key) => {\n    if (!chart.scales[key]) {\n      delete originalOptionsByChartId[chartId][key];\n    }\n  });\n}\n\nfunction directionEnabled(mode, dir) {\n  if (mode === undefined) {\n    return true;\n  } else if (typeof mode === \"string\") {\n    return mode.indexOf(dir) !== -1;\n  }\n\n  return false;\n}\n\nexport function doZoom(\n  chartId: string,\n  chartInstance: ChartInstance,\n  zoomOptions: ZoomOptions,\n  percentZoomX: number,\n  percentZoomY: number,\n  focalPoint?: { x: number, y: number },\n  whichAxesParam?: string\n) {\n  const ca = chartInstance.chartArea;\n\n  if (!focalPoint) {\n    focalPoint = {\n      x: (ca.left + ca.right) / 2,\n      y: (ca.top + ca.bottom) / 2,\n    };\n  }\n\n  if (zoomOptions.enabled) {\n    storeOriginalOptions(chartId, chartInstance);\n    // Do the zoom here\n    const zoomMode = zoomOptions.mode;\n\n    // Which axe should be modified when fingers were used.\n    let whichAxes;\n    if (zoomOptions.mode === \"xy\" && whichAxes !== undefined) {\n      // based on fingers positions\n      whichAxes = whichAxesParam;\n    } else {\n      // no effect\n      whichAxes = \"xy\";\n    }\n\n    Object.keys(chartInstance.scales).forEach((scaleKey) => {\n      const scale = chartInstance.scales[scaleKey];\n      if (scale.isHorizontal() && directionEnabled(zoomMode, \"x\") && directionEnabled(whichAxes, \"x\")) {\n        zoomScale(scale, percentZoomX, focalPoint, zoomOptions, chartId);\n      } else if (!scale.isHorizontal() && directionEnabled(zoomMode, \"y\") && directionEnabled(whichAxes, \"y\")) {\n        zoomScale(scale, percentZoomY, focalPoint, zoomOptions, chartId);\n      }\n    });\n\n    chartInstance.update(0);\n  }\n}\n\nexport function resetZoomDelta(chartId: string) {\n  zoomCumulativeDeltaByChartId[chartId] = 0;\n}\n\n// PAN OPTIONS\n\nconst panCumulativeDeltaByChartId = {};\n\nfunction panCategoryScale(scale, delta, panOptions, chartId) {\n  const labels = scale.chart.data.labels;\n  const lastLabelIndex = labels.length - 1;\n  const offsetAmt = Math.max(scale.ticks.length, 1);\n  const panSpeed = panOptions.speed;\n  let minIndex = scale.minIndex;\n  const step = Math.round(scale.width / (offsetAmt * panSpeed));\n\n  panCumulativeDeltaByChartId[chartId] = panCumulativeDeltaByChartId[chartId] || 0;\n  panCumulativeDeltaByChartId[chartId] += delta;\n\n  minIndex =\n    panCumulativeDeltaByChartId[chartId] > step\n      ? Math.max(0, minIndex - 1)\n      : panCumulativeDeltaByChartId[chartId] < -step\n      ? Math.min(lastLabelIndex - offsetAmt + 1, minIndex + 1)\n      : minIndex;\n  panCumulativeDeltaByChartId[chartId] = minIndex !== scale.minIndex ? 0 : panCumulativeDeltaByChartId[chartId];\n\n  const maxIndex = Math.min(lastLabelIndex, minIndex + offsetAmt - 1);\n\n  scale.options.ticks.min = labels[minIndex];\n  scale.options.ticks.max = labels[maxIndex];\n}\n\nfunction panNumericalScale(scale, delta, panOptions) {\n  const tickOpts = scale.options.ticks;\n  const prevStart = scale.min;\n  const prevEnd = scale.max;\n  let newMin = scale.getValueForPixel(scale.getPixelForValue(prevStart) - delta);\n  let newMax = scale.getValueForPixel(scale.getPixelForValue(prevEnd) - delta);\n  // The time scale returns date objects so convert to numbers. Can remove at Chart.js v3\n  newMin = newMin.valueOf ? newMin.valueOf() : newMin;\n  newMax = newMax.valueOf ? newMax.valueOf() : newMax;\n  tickOpts.min = newMin;\n  tickOpts.max = newMax;\n}\n\nfunction panTimeScale(scale, delta, panOptions) {\n  panNumericalScale(scale, delta, panOptions);\n\n  const options = scale.options;\n  if (options.time) {\n    if (options.time.min) {\n      options.time.min = options.ticks.min;\n    }\n    if (options.time.max) {\n      options.time.max = options.ticks.max;\n    }\n  }\n}\n\nconst panFunctions = {\n  category: panCategoryScale,\n  time: panTimeScale,\n  linear: panNumericalScale,\n  logarithmic: panNumericalScale,\n};\n\nfunction panScale(scale, delta, panOptions, chartId) {\n  const fn = panFunctions[scale.type];\n  if (fn) {\n    fn(scale, delta, panOptions, chartId);\n  }\n}\n\nexport function doPan(\n  chartId: string,\n  chartInstance: ChartInstance,\n  panOptions: PanOptions,\n  deltaX: number,\n  deltaY: number\n) {\n  storeOriginalOptions(chartId, chartInstance);\n  if (panOptions.enabled) {\n    const panMode = panOptions.mode;\n\n    Object.keys(chartInstance.scales).forEach((scaleKey) => {\n      const scale = chartInstance.scales[scaleKey];\n      if (scale.isHorizontal() && directionEnabled(panMode, \"x\") && deltaX !== 0) {\n        panScale(scale, deltaX, panOptions, chartId);\n      } else if (!scale.isHorizontal() && directionEnabled(panMode, \"y\") && deltaY !== 0) {\n        panScale(scale, deltaY, panOptions, chartId);\n      }\n    });\n\n    chartInstance.update(0);\n  }\n}\n\nexport function resetPanDelta(chartId: string) {\n  panCumulativeDeltaByChartId[chartId] = 0;\n}\n\nexport function resetZoom(chartId: string, chartInstance: ChartInstance) {\n  storeOriginalOptions(chartId, chartInstance);\n  const originalOptions = originalOptionsByChartId[chartId];\n  Object.keys(chartInstance.scales).forEach((scaleKey) => {\n    const scale = chartInstance.scales[scaleKey];\n    const timeOptions = scale.options.time;\n    const tickOptions = scale.options.ticks;\n\n    if (originalOptions[scale.id]) {\n      if (timeOptions) {\n        timeOptions.min = originalOptions[scale.id].time.min;\n        timeOptions.max = originalOptions[scale.id].time.max;\n      }\n\n      if (tickOptions) {\n        tickOptions.min = originalOptions[scale.id].ticks.min;\n        tickOptions.max = originalOptions[scale.id].ticks.max;\n      }\n    } else {\n      if (timeOptions) {\n        delete timeOptions.min;\n        delete timeOptions.max;\n      }\n\n      if (tickOptions) {\n        delete tickOptions.min;\n        delete tickOptions.max;\n      }\n    }\n  });\n\n  chartInstance.update();\n}\n\n// MISC\n\nexport function wheelZoomHandler(event: SyntheticWheelEvent<HTMLCanvasElement>, zoomOptions: ZoomOptions) {\n  const rect = event.currentTarget.getBoundingClientRect();\n  const offsetX = event.clientX - rect.left;\n  const offsetY = event.clientY - rect.top;\n\n  const center = { x: offsetX, y: offsetY };\n\n  let speedPercent = zoomOptions.speed;\n\n  if (event.deltaY >= 0) {\n    speedPercent = -speedPercent;\n  }\n\n  // Prevent the event from triggering the default behavior (eg. Content scrolling).\n  if (event.cancelable) {\n    event.preventDefault();\n  }\n\n  return {\n    percentZoomX: 1 + speedPercent,\n    percentZoomY: 1 + speedPercent,\n    focalPoint: center,\n  };\n}\n\nexport function getScaleBounds(chartInstance: ChartInstance): ScaleBounds[] {\n  return Object.keys(chartInstance.scales).map((scaleKey) => {\n    const scale = chartInstance.scales[scaleKey];\n    let min, max;\n\n    const timeOptions = scale.options.time;\n    const tickOptions = scale.options.ticks;\n    if (timeOptions) {\n      min = timeOptions.min;\n      max = timeOptions.max;\n    }\n    if (tickOptions) {\n      min = tickOptions.min;\n      max = tickOptions.max;\n    }\n\n    return { id: scale.id, min, max };\n  });\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport memoize from \"lodash/memoize\";\n\nimport sendNotification from \"webviz-core/src/util/sendNotification\";\n\nconst supportsOffscreenCanvas: () => boolean = memoize(\n  (): boolean => {\n    try {\n      // $FlowFixMe This is a function that is not yet in Flow.\n      document.createElement(\"canvas\").transferControlToOffscreen();\n    } catch (error) {\n      sendNotification(\n        \"Rendering to a canvas in a worker is unsupported in this browser, falling back to rendering using the main thread\",\n        \"\",\n        \"app\",\n        \"warn\"\n      );\n      return false;\n    }\n    return true;\n  }\n);\n\nexport default supportsOffscreenCanvas;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport findIndex from \"lodash/findIndex\";\nimport sortBy from \"lodash/sortBy\";\n\nimport Rpc from \"webviz-core/src/util/Rpc\";\nimport { setupReceiveReportErrorHandler } from \"webviz-core/src/util/RpcUtils\";\n\n// This file provides a convenient way to set up and tear down workers as needed. It will create only a single worker\n// of each class, and terminate the worker when all listeners are unregistered.\n\ntype WorkerListenerState = {| rpc: Rpc, worker: any, listenerIds: string[] |};\n\nexport default class WebWorkerManager {\n  _classType: any;\n  _maxWorkerCount: number;\n  _workerStates: (?WorkerListenerState)[];\n  _allListeners: Set<string>;\n\n  constructor(classType: any, maxWorkerCount: number) {\n    this._classType = classType;\n    this._maxWorkerCount = maxWorkerCount;\n    this._workerStates = new Array(maxWorkerCount);\n    this._allListeners = new Set();\n  }\n\n  testing_getWorkerState(id: string): ?WorkerListenerState {\n    return this._workerStates.find((workerState) => workerState && workerState.listenerIds.includes(id));\n  }\n\n  registerWorkerListener(id: string): Rpc {\n    if (this._allListeners.has(id)) {\n      throw new Error(\"cannot register the same listener id twice\");\n    }\n    this._allListeners.add(id);\n\n    const currentWorkerCount = this._workerStates.filter(Boolean).length;\n    if (currentWorkerCount < this._maxWorkerCount) {\n      const worker = new this._classType();\n      const rpc = new Rpc(worker);\n      setupReceiveReportErrorHandler(rpc);\n\n      const emptyIndex = findIndex(this._workerStates, (x) => !x);\n      this._workerStates[emptyIndex] = { worker, rpc, listenerIds: [id] };\n      return rpc;\n    }\n    const workerStateByListenerCount = sortBy(\n      this._workerStates.filter(Boolean),\n      (workerState) => workerState && workerState.listenerIds.length\n    );\n    const workerState = workerStateByListenerCount[0];\n    workerState.listenerIds.push(id);\n    return workerState.rpc;\n  }\n\n  unregisterWorkerListener(id: string) {\n    if (!this._allListeners.has(id)) {\n      throw new Error(\"Cannot find listener to unregister\");\n    }\n    this._allListeners.delete(id);\n\n    const workerStateIndex = findIndex(\n      this._workerStates,\n      (workerState) => workerState && workerState.listenerIds.includes(id)\n    );\n    const workerState = this._workerStates[workerStateIndex];\n    if (workerStateIndex >= 0 && workerState) {\n      workerState.listenerIds = workerState.listenerIds.filter((_id) => _id !== id);\n      if (workerState.listenerIds.length === 0) {\n        this._workerStates[workerStateIndex] = undefined;\n        workerState.worker.terminate();\n      }\n    }\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { TimestampMethod } from \"webviz-core/src/util/time\";\n\nexport type BasePlotPath = {\n  value: string,\n  enabled: boolean,\n};\n\nexport type PlotPath = BasePlotPath & {\n  timestampMethod: TimestampMethod,\n};\n\n// A \"reference line\" plot path is a numeric value. It creates a horizontal line on the plot at the specified value.\nexport function isReferenceLinePlotPathType(path: BasePlotPath): boolean {\n  return !isNaN(Number.parseFloat(path.value));\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport tinycolor from \"tinycolor2\";\n\nexport const toolsColorScheme = {\n  base: {\n    dark: \"#1F1E27\",\n    medium: \"#8B8B8D\",\n    light: \"#F7F7F3\",\n  },\n  red: {\n    dark: \"#F24366\",\n    medium: \"#ff7c96\",\n    light: \"#FFAABB\",\n  },\n  blue: {\n    dark: \"#1b83ec\",\n    medium: \"#4e98e2\",\n    light: \"#77AADD\",\n  },\n  paleGreen: {\n    dark: \"#B4CC00\",\n    medium: \"#cad660\",\n    light: \"#CDD67E\",\n  },\n  orange: {\n    dark: \"#ea531f\",\n    medium: \"#f5774d\",\n    light: \"#faa487\",\n  },\n  cyan: {\n    dark: \"#22b5ff\",\n    medium: \"#61cbff\",\n    light: \"#99DDFF\",\n  },\n  green: {\n    dark: \"#05d27d\",\n    medium: \"#5cd6a9\",\n    light: \"#8de0c9\",\n  },\n  purple: {\n    dark: \"#6E51EE\",\n    medium: \"#a395e2\",\n    light: \"#c7c0e7\",\n  },\n  yellow: {\n    dark: \"#EDCC28\",\n    medium: \"#f7df71\",\n    light: \"#f1e4a\",\n  },\n};\n\nexport const grey = tinycolor(`hsv(0, 0%, 75%)`).toHexString();\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { reject } from \"lodash\";\n\n// toggles an item in an array based on reference equality\n// or an optional predicate to determine if the item should be toggled in/out\n// this function is pure - it always returns a new array\nexport default function toggle<T>(array: T[], item: T, predicate: (T) => boolean = (el) => el === item): T[] {\n  const newArray = reject(array, predicate);\n  if (newArray.length === array.length) {\n    newArray.push(item);\n  }\n  return newArray;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { isEqual } from \"lodash\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport { getPath, memoizedGetLinkedGlobalVariablesKeyByName } from \"../interactionUtils\";\nimport useLinkedGlobalVariables, { type LinkedGlobalVariable } from \"../useLinkedGlobalVariables\";\nimport { SGlobalVariableLink, SPath, GlobalVariableName } from \"./index\";\nimport UnlinkWrapper from \"./UnlinkWrapper\";\nimport Button from \"webviz-core/src/components/Button\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\nconst SForm = styled.form`\n  background-color: ${colors.toolbar};\n  margin-left: 8px;\n  width: 320px;\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\n  pointer-events: auto;\n  flex: 0 0 auto;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst SExistingLinks = styled.div`\n  margin-bottom: 8px;\n`;\n\nconst SList = styled.ul`\n  margin: 12px 6px;\n`;\n\nconst SListItem = styled.li`\n  display: flex;\n  align-items: center;\n  margin: 6px;\n  width: 100%;\n  overflow: hidden;\n`;\n\nconst STopicWithPath = styled.span`\n  margin-left: 12px;\n  margin-right: 12px;\n  flex: 1 1 0;\n  overflow-wrap: break-word;\n  overflow: hidden;\n`;\n\ntype Props = {\n  name: string,\n  showList?: boolean,\n};\n\nexport default function UnlinkGlobalVariables({ name, showList }: Props) {\n  const { linkedGlobalVariables, setLinkedGlobalVariables } = useLinkedGlobalVariables();\n  const linkedGlobalVariablesKeyByName = memoizedGetLinkedGlobalVariablesKeyByName(linkedGlobalVariables);\n  const links: LinkedGlobalVariable[] = linkedGlobalVariablesKeyByName[name] || [];\n\n  if (links.length === 0) {\n    return null;\n  }\n\n  const listStyle = showList ? { marginLeft: 0, marginRight: 0 } : {};\n\n  // the list UI is shared between 3D panel and Global Variables panel\n  const listHtml = (\n    <SList style={listStyle}>\n      {links.map(({ topic, markerKeyPath, name: linkedGlobalVariableName }, idx) => {\n        return (\n          <SListItem key={idx} style={listStyle}>\n            <Button\n              danger\n              small\n              style={{ flexShrink: 0 }}\n              onClick={() => {\n                const newLinkedGlobalVariables = linkedGlobalVariables.filter(\n                  (linkedGlobalVariable) =>\n                    !(\n                      linkedGlobalVariable.topic === topic &&\n                      isEqual(linkedGlobalVariable.markerKeyPath, markerKeyPath) &&\n                      linkedGlobalVariable.name === linkedGlobalVariableName\n                    )\n                );\n                setLinkedGlobalVariables(newLinkedGlobalVariables);\n              }}>\n              Unlink\n            </Button>\n            <STopicWithPath>\n              {topic}.<SPath>{getPath(markerKeyPath)}</SPath>\n            </STopicWithPath>\n          </SListItem>\n        );\n      })}\n    </SList>\n  );\n  if (showList) {\n    return (\n      <SExistingLinks>\n        <p style={{ marginTop: 0, lineHeight: \"1.4\" }}>\n          Some links already exist for this variable. The variable’s value will be taken from the most recently clicked\n          linked topic.\n        </p>\n        {listHtml}\n      </SExistingLinks>\n    );\n  }\n\n  return (\n    <SGlobalVariableLink>\n      <UnlinkWrapper\n        tooltip={\n          <span>\n            Unlink <GlobalVariableName name={name} />\n          </span>\n        }\n        linkedGlobalVariable={links[0]}>\n        {() => <SForm data-test=\"unlink-form\">{listHtml}</SForm>}\n      </UnlinkWrapper>\n    </SGlobalVariableLink>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport LinkVariantOffIcon from \"@mdi/svg/svg/link-variant-off.svg\";\nimport LinkVariantIcon from \"@mdi/svg/svg/link-variant.svg\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport { type LinkedGlobalVariable } from \"../useLinkedGlobalVariables\";\nimport { GlobalVariableName } from \"./index\";\nimport ChildToggle from \"webviz-core/src/components/ChildToggle\";\nimport Icon from \"webviz-core/src/components/Icon\";\n\nconst SUnlinkWrapper = styled.span`\n  flex-direction: row;\n  display: inline-flex;\n  align-items: center;\n`;\n\nconst SIconWrapper = styled.span`\n  .icon {\n    /* TODO(Audrey): remove the hard-coded icon style once we clean up 3D panel styles   */\n    width: 15px !important;\n    height: 15px !important;\n    font-size: 15px !important;\n  }\n  .linked-icon {\n    opacity: 1;\n    display: inline-block;\n  }\n  .link-off-icon {\n    opacity: 0;\n    display: none;\n  }\n  &:hover {\n    .linked-icon {\n      opacity: 0;\n      display: none;\n    }\n    .link-off-icon {\n      opacity: 1;\n      display: inline-block;\n    }\n  }\n`;\n\ntype Props = {\n  linkedGlobalVariable: LinkedGlobalVariable,\n  style?: any,\n  children: ({\n    setIsOpen: (boolean) => void,\n    linkedGlobalVariable: LinkedGlobalVariable,\n  }) => React.Node,\n  tooltip?: React.Node,\n};\n\nexport default function UnlinkWrapper({ style, children, linkedGlobalVariable, tooltip }: Props) {\n  const [isOpen, setIsOpen] = React.useState<boolean>(false);\n  return (\n    <>\n      <SUnlinkWrapper>\n        <ChildToggle\n          dataTest={`unlink-${linkedGlobalVariable.name}`}\n          position=\"above\"\n          onToggle={() => setIsOpen(!isOpen)}\n          isOpen={isOpen}>\n          <SIconWrapper>\n            <Icon\n              fade\n              tooltipProps={{\n                contents: tooltip || (\n                  <span>\n                    Unlink this field from <GlobalVariableName name={linkedGlobalVariable.name} />\n                  </span>\n                ),\n              }}>\n              <LinkVariantOffIcon className=\"link-off-icon\" />\n              <LinkVariantIcon className=\"linked-icon\" />\n            </Icon>\n          </SIconWrapper>\n          <span>{children({ setIsOpen, linkedGlobalVariable })}</span>\n        </ChildToggle>\n      </SUnlinkWrapper>\n      <GlobalVariableName name={linkedGlobalVariable.name} leftPadding />\n    </>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport ConsoleLineIcon from \"@mdi/svg/svg/console-line.svg\";\nimport PlusMinusIcon from \"@mdi/svg/svg/plus-minus.svg\";\nimport LessIcon from \"@mdi/svg/svg/unfold-less-horizontal.svg\";\nimport MoreIcon from \"@mdi/svg/svg/unfold-more-horizontal.svg\";\nimport { first, get, isEqual, last } from \"lodash\";\nimport React, { useState, useCallback, useMemo } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport ReactHoverObserver from \"react-hover-observer\";\nimport Tree from \"react-json-tree\";\n\nimport { HighlightedValue, SDiffSpan } from \"./Diff\";\nimport { type ValueAction, getValueActionForValue, getStructureItemForPath } from \"./getValueActionForValue\";\nimport helpContent from \"./index.help.md\";\nimport styles from \"./index.module.scss\";\nimport Metadata from \"./Metadata\";\nimport RawMessagesIcons from \"./RawMessagesIcons\";\nimport { DATA_ARRAY_PREVIEW_LIMIT, getMessageDocumentationLink, getItemString, getItemStringForDiff } from \"./utils\";\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport EmptyState from \"webviz-core/src/components/EmptyState\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport type { RosPath, MessagePathStructureItem } from \"webviz-core/src/components/MessagePathSyntax/constants\";\nimport MessagePathInput from \"webviz-core/src/components/MessagePathSyntax/MessagePathInput\";\nimport {\n  messagePathStructures,\n  traverseStructure,\n} from \"webviz-core/src/components/MessagePathSyntax/messagePathsForDatatype\";\nimport parseRosPath from \"webviz-core/src/components/MessagePathSyntax/parseRosPath\";\nimport {\n  useCachedGetMessagePathDataItems,\n  type MessagePathDataItem,\n} from \"webviz-core/src/components/MessagePathSyntax/useCachedGetMessagePathDataItems\";\nimport { useLatestMessageDataItem } from \"webviz-core/src/components/MessagePathSyntax/useLatestMessageDataItem\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { useDataSourceInfo, useMessagesByTopic } from \"webviz-core/src/PanelAPI\";\nimport getDiff, { diffLabels, diffLabelsByLabelText } from \"webviz-core/src/panels/RawMessages/getDiff\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\nimport { jsonTreeTheme } from \"webviz-core/src/util/globalConstants\";\nimport { enumValuesByDatatypeAndField } from \"webviz-core/src/util/selectors\";\n\nexport const PREV_MSG_METHOD = \"previous message\";\nexport type RawMessagesConfig = {|\n  topicPath: string,\n  diffMethod: \"custom\" | \"previous message\",\n  diffTopicPath: string,\n  diffEnabled: boolean,\n  showFullMessageForDiff: boolean,\n|};\n\ntype Props = {\n  config: RawMessagesConfig,\n  saveConfig: ($Shape<RawMessagesConfig>) => void,\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n};\n\nconst isSingleElemArray = (obj) => Array.isArray(obj) && obj.filter((a) => a != null).length === 1;\nconst dataWithoutWrappingArray = (data) => {\n  return isSingleElemArray(data) && typeof data[0] === \"object\" ? data[0] : data;\n};\n\nfunction RawMessages(props: Props) {\n  const { config, saveConfig, openSiblingPanel } = props;\n  const { topicPath, diffMethod, diffTopicPath, diffEnabled, showFullMessageForDiff } = config;\n  const { topics, datatypes } = useDataSourceInfo();\n\n  const topicRosPath: ?RosPath = useMemo(() => parseRosPath(topicPath), [topicPath]);\n  const topic: ?Topic = useMemo(() => topicRosPath && topics.find(({ name }) => name === topicRosPath.topicName), [\n    topicRosPath,\n    topics,\n  ]);\n  const rootStructureItem: ?MessagePathStructureItem = useMemo(\n    () => {\n      if (!topic || !topicRosPath) {\n        return;\n      }\n      return traverseStructure(messagePathStructures(datatypes)[topic.datatype], topicRosPath.messagePath)\n        .structureItem;\n    },\n    [datatypes, topic, topicRosPath]\n  );\n\n  // When expandAll is unset, we'll use expandedFields to get expanded info\n  const [expandAll, setExpandAll] = useState(false);\n  const [expandedFields, setExpandedFields] = useState(() => new Set());\n\n  const topicName = topicRosPath?.topicName || \"\";\n  const consecutiveMsgs = useMessagesByTopic({ topics: [topicName], historySize: 2 })[topicName];\n  const cachedGetMessagePathDataItems = useCachedGetMessagePathDataItems([topicPath]);\n  const prevTickMsg = consecutiveMsgs[consecutiveMsgs.length - 2];\n  const [prevTickObj, currTickObj] = [\n    prevTickMsg && { message: prevTickMsg, queriedData: cachedGetMessagePathDataItems(topicPath, prevTickMsg) || [] },\n    useLatestMessageDataItem(topicPath),\n  ];\n  const diffTopicObj = useLatestMessageDataItem(diffEnabled ? diffTopicPath : \"\");\n\n  const inTimetickDiffMode = diffEnabled && diffMethod === PREV_MSG_METHOD;\n  const baseItem = inTimetickDiffMode ? prevTickObj : currTickObj;\n  const diffItem = inTimetickDiffMode ? currTickObj : diffTopicObj;\n\n  const onTopicPathChange = useCallback(\n    (newTopicPath: string) => {\n      saveConfig({ topicPath: newTopicPath });\n    },\n    [saveConfig]\n  );\n\n  const onDiffTopicPathChange = useCallback(\n    (newDiffTopicPath: string) => {\n      saveConfig({ diffTopicPath: newDiffTopicPath });\n    },\n    [saveConfig]\n  );\n\n  const onToggleDiff = useCallback(\n    () => {\n      saveConfig({ diffEnabled: !diffEnabled });\n    },\n    [diffEnabled, saveConfig]\n  );\n\n  const onToggleExpandAll = useCallback(\n    () => {\n      setExpandedFields(new Set());\n      setExpandAll(!expandAll);\n    },\n    [expandAll]\n  );\n\n  const onLabelClick = useCallback(\n    (keypath: string[]) => {\n      // Create a unique key according to the keypath / raw\n      const key = keypath.join(\"~\");\n      const expandedFieldsCopy = new Set(expandedFields);\n      if (expandedFieldsCopy.has(key)) {\n        expandedFieldsCopy.delete(key);\n        setExpandedFields(expandedFieldsCopy);\n      } else {\n        expandedFieldsCopy.add(key);\n        setExpandedFields(expandedFieldsCopy);\n      }\n      setExpandAll(null);\n    },\n    [expandedFields]\n  );\n\n  const valueRenderer = useCallback(\n    (\n      structureItem: ?MessagePathStructureItem,\n      data: mixed[],\n      queriedData: MessagePathDataItem[],\n      label: string,\n      itemValue: mixed,\n      ...keyPath: (number | string)[]\n    ) => (\n      <ReactHoverObserver className={styles.iconWrapper}>\n        {({ isHovering }) => {\n          // $FlowFixMe: We make sure to always pass in a number at the end, but that's hard to express in Flow.\n          const lastKeyPath: number = last(keyPath);\n          let valueAction: ?ValueAction;\n          if (isHovering && structureItem) {\n            valueAction = getValueActionForValue(data[lastKeyPath], structureItem, keyPath.slice(0, -1).reverse());\n          }\n\n          let constantName: ?string;\n          if (structureItem) {\n            const childStructureItem = getStructureItemForPath(\n              structureItem,\n              keyPath\n                .slice(0, -1)\n                .reverse()\n                .join(\",\")\n            );\n            if (childStructureItem) {\n              const field = keyPath[0];\n              if (typeof field === \"string\") {\n                const enumMapping = enumValuesByDatatypeAndField(datatypes);\n                const datatype = childStructureItem.datatype;\n                if (enumMapping[datatype] && enumMapping[datatype][field] && enumMapping[datatype][field][itemValue]) {\n                  constantName = enumMapping[datatype][field][itemValue];\n                }\n              }\n            }\n          }\n          const basePath: string = queriedData[lastKeyPath].path;\n          let itemLabel = label;\n          // output preview for the first x items if the data is in binary format\n          // sample output: Int8Array(331776) [-4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, ...]\n          let smallNumberArrayStr = \"\";\n          if (ArrayBuffer.isView(itemValue)) {\n            // $FlowFixMe flow doesn't know itemValue is an array\n            smallNumberArrayStr = `(${itemValue.length}) [${itemValue.slice(0, DATA_ARRAY_PREVIEW_LIMIT).join(\", \")}${\n              // $FlowFixMe\n              itemValue.length >= DATA_ARRAY_PREVIEW_LIMIT ? \", ...\" : \"\"\n            }] `;\n            // $FlowFixMe\n            itemLabel = itemValue.constructor.name;\n          }\n          if (constantName) {\n            itemLabel = `${itemLabel} (${constantName})`;\n          }\n          return (\n            <span>\n              <HighlightedValue itemLabel={itemLabel} keyPath={keyPath} />\n              {smallNumberArrayStr && (\n                <>\n                  {smallNumberArrayStr}\n                  <Icon\n                    fade\n                    className={styles.icon}\n                    onClick={() => console.log(itemValue)}\n                    tooltip=\"Log data to browser console\">\n                    <ConsoleLineIcon />\n                  </Icon>\n                </>\n              )}\n              <span className={styles.iconBox}>\n                {valueAction && (\n                  <RawMessagesIcons\n                    valueAction={valueAction}\n                    basePath={basePath}\n                    onTopicPathChange={onTopicPathChange}\n                    openSiblingPanel={openSiblingPanel}\n                  />\n                )}\n              </span>\n            </span>\n          );\n        }}\n      </ReactHoverObserver>\n    ),\n    [datatypes, onTopicPathChange, openSiblingPanel]\n  );\n\n  const renderSingleTopicOrDiffOutput = useCallback(\n    () => {\n      let shouldExpandNode;\n      if (expandAll !== null) {\n        shouldExpandNode = () => expandAll;\n      } else {\n        shouldExpandNode = (keypath, data, level) => {\n          return expandedFields.has(keypath.join(\"~\"));\n        };\n      }\n\n      if (!topicPath) {\n        return <EmptyState>No topic selected</EmptyState>;\n      }\n      if (diffEnabled && diffMethod === \"custom\" && (!baseItem || !diffItem)) {\n        return <EmptyState>{`Waiting to diff next messages from \"${topicPath}\" and \"${diffTopicPath}\"`}</EmptyState>;\n      }\n      if (!baseItem) {\n        return <EmptyState>Waiting for next message</EmptyState>;\n      }\n\n      const data = dataWithoutWrappingArray(baseItem.queriedData.map(({ value }) => (value: any)));\n      const hideWrappingArray = baseItem.queriedData.length === 1 && typeof baseItem.queriedData[0].value === \"object\";\n      const link = getMessageDocumentationLink(baseItem.message.datatype);\n      const shouldDisplaySingleVal =\n        (data !== undefined && typeof data !== \"object\") ||\n        (isSingleElemArray(data) && data[0] !== undefined && typeof data[0] !== \"object\");\n      const singleVal = isSingleElemArray(data) ? data[0] : data;\n\n      const diffData = diffItem && dataWithoutWrappingArray(diffItem.queriedData.map(({ value }) => (value: any)));\n      const diff = diffEnabled && getDiff(data, diffData, null, showFullMessageForDiff);\n      const diffLabelTexts = Object.keys(diffLabels).map((key) => diffLabels[key].labelText);\n\n      const CheckboxComponent = showFullMessageForDiff ? CheckboxMarkedIcon : CheckboxBlankOutlineIcon;\n      return (\n        <Flex col clip scroll className={styles.container}>\n          <Metadata\n            data={data}\n            diffData={diffData}\n            diff={diff}\n            link={link}\n            message={baseItem.message}\n            diffMessage={diffItem?.message}\n          />\n          {shouldDisplaySingleVal ? (\n            <div className={styles.singleVal}>{String(singleVal)}</div>\n          ) : diffEnabled && isEqual({}, diff) ? (\n            <EmptyState>No difference found</EmptyState>\n          ) : (\n            <>\n              {diffEnabled && (\n                <div\n                  style={{ cursor: \"pointer\", fontSize: \"11px\" }}\n                  onClick={() => saveConfig({ showFullMessageForDiff: !showFullMessageForDiff })}>\n                  <Icon style={{ verticalAlign: \"middle\" }}>\n                    <CheckboxComponent />\n                  </Icon>{\" \"}\n                  Show full msg\n                </div>\n              )}\n              <Tree\n                labelRenderer={(raw) => <SDiffSpan onClick={() => onLabelClick(raw)}>{first(raw)}</SDiffSpan>}\n                shouldExpandNode={shouldExpandNode}\n                hideRoot\n                invertTheme={false}\n                getItemString={diffEnabled ? getItemStringForDiff : getItemString}\n                valueRenderer={(...args) => {\n                  if (diffEnabled) {\n                    return valueRenderer(null, diff, diff, ...args);\n                  }\n                  if (hideWrappingArray) {\n                    // When the wrapping array is hidden, put it back here.\n                    return valueRenderer(rootStructureItem, [data], baseItem.queriedData, ...args, 0);\n                  }\n                  return valueRenderer(rootStructureItem, data, baseItem.queriedData, ...args);\n                }}\n                postprocessValue={(val: mixed) => {\n                  if (\n                    val != null &&\n                    typeof val === \"object\" &&\n                    Object.keys(val).length === 1 &&\n                    diffLabelTexts.includes(Object.keys(val)[0])\n                  ) {\n                    if (Object.keys(val)[0] !== diffLabels.ID.labelText) {\n                      return val[Object.keys(val)[0]];\n                    }\n                  }\n                  return val;\n                }}\n                theme={{\n                  ...jsonTreeTheme,\n                  tree: { margin: 0 },\n                  nestedNode: ({ style }, keyPath, nodeType, expanded) => {\n                    const baseStyle = {\n                      ...style,\n                      padding: \"2px 0 2px 5px\",\n                      marginTop: 2,\n                      textDecoration: \"inherit\",\n                    };\n                    if (!diffEnabled) {\n                      return { style: baseStyle };\n                    }\n                    let backgroundColor;\n                    let textDecoration;\n                    if (diffLabelsByLabelText[keyPath[0]]) {\n                      backgroundColor = diffLabelsByLabelText[keyPath[0]].backgroundColor;\n                      textDecoration = keyPath[0] === diffLabels.DELETED.labelText ? \"line-through\" : \"none\";\n                    }\n                    const nestedObj = get(diff, keyPath.slice().reverse(), {});\n                    const nestedObjKey = Object.keys(nestedObj)[0];\n                    if (diffLabelsByLabelText[nestedObjKey]) {\n                      backgroundColor = diffLabelsByLabelText[nestedObjKey].backgroundColor;\n                      textDecoration = nestedObjKey === diffLabels.DELETED.labelText ? \"line-through\" : \"none\";\n                    }\n                    return {\n                      style: { ...baseStyle, backgroundColor, textDecoration: textDecoration || \"inherit\" },\n                    };\n                  },\n                  nestedNodeLabel: ({ style }, keyPath, nodeType, expanded) => ({\n                    style: { ...style, textDecoration: \"inherit\" },\n                  }),\n                  nestedNodeChildren: ({ style }, nodeType, expanded) => ({\n                    style: { ...style, textDecoration: \"inherit\" },\n                  }),\n                  value: ({ style }, nodeType, keyPath) => {\n                    const baseStyle = { ...style, textDecoration: \"inherit\" };\n                    if (!diffEnabled) {\n                      return { style: baseStyle };\n                    }\n                    let backgroundColor;\n                    let textDecoration;\n                    const nestedObj = get(diff, keyPath.slice().reverse(), {});\n                    const nestedObjKey = Object.keys(nestedObj)[0];\n                    if (diffLabelsByLabelText[nestedObjKey]) {\n                      backgroundColor = diffLabelsByLabelText[nestedObjKey].backgroundColor;\n                      textDecoration = nestedObjKey === diffLabels.DELETED.labelText ? \"line-through\" : \"none\";\n                    }\n                    return {\n                      style: { ...baseStyle, backgroundColor, textDecoration: textDecoration || \"inherit\" },\n                    };\n                  },\n                  label: { textDecoration: \"inherit\" },\n                }}\n                data={diffEnabled ? diff : data}\n              />\n            </>\n          )}\n        </Flex>\n      );\n    },\n    [\n      baseItem,\n      diffEnabled,\n      diffItem,\n      diffMethod,\n      diffTopicPath,\n      expandAll,\n      expandedFields,\n      onLabelClick,\n      rootStructureItem,\n      saveConfig,\n      showFullMessageForDiff,\n      topicPath,\n      valueRenderer,\n    ]\n  );\n\n  return (\n    <Flex col clip style={{ position: \"relative\" }}>\n      <PanelToolbar helpContent={helpContent}>\n        <Icon tooltip=\"Toggle diff\" medium fade onClick={onToggleDiff} active={diffEnabled}>\n          <PlusMinusIcon />\n        </Icon>\n        <Icon\n          tooltip={expandAll ? \"Collapse all\" : \"Expand all\"}\n          medium\n          fade\n          onClick={onToggleExpandAll}\n          style={{ position: \"relative\", top: 1 }}>\n          {expandAll ? <LessIcon /> : <MoreIcon />}\n        </Icon>\n        <div className={styles.topicInputs}>\n          <MessagePathInput index={0} path={topicPath} onChange={onTopicPathChange} inputStyle={{ height: \"100%\" }} />\n          {diffEnabled && (\n            <Flex>\n              <Tooltip contents=\"Diff method\" placement=\"top\">\n                <>\n                  <Dropdown\n                    value={diffMethod}\n                    onChange={(newDiffMethod) => saveConfig({ diffMethod: newDiffMethod })}\n                    noPortal>\n                    <span value={PREV_MSG_METHOD}>{PREV_MSG_METHOD}</span>\n                    <span value=\"custom\">custom</span>\n                  </Dropdown>\n                </>\n              </Tooltip>\n              {diffMethod === \"custom\" ? (\n                <MessagePathInput\n                  index={1}\n                  path={diffTopicPath}\n                  onChange={onDiffTopicPathChange}\n                  inputStyle={{ height: \"100%\" }}\n                  prioritizedDatatype={topic?.datatype}\n                />\n              ) : null}\n            </Flex>\n          )}\n        </div>\n      </PanelToolbar>\n      {renderSingleTopicOrDiffOutput()}\n    </Flex>\n  );\n}\n\nRawMessages.defaultConfig = {\n  topicPath: \"\",\n  diffTopicPath: \"\",\n  diffMethod: \"custom\",\n  diffEnabled: false,\n  showFullMessageForDiff: false,\n};\nRawMessages.panelType = \"RawMessages\";\n\nexport default hot(Panel<RawMessagesConfig>(RawMessages));\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { useCallback, useMemo } from \"react\";\n\nimport parseRosPath from \"./parseRosPath\";\nimport { useCachedGetMessagePathDataItems, type MessagePathDataItem } from \"./useCachedGetMessagePathDataItems\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Message } from \"webviz-core/src/players/types\";\n\ntype MessageAndData = {| message: Message, queriedData: MessagePathDataItem[] |};\n\n// Get the last message for a path, but *after* applying filters. In other words, we'll keep the\n// last message that matched.\nexport function useLatestMessageDataItem(path: string): ?MessageAndData {\n  const rosPath = useMemo(() => parseRosPath(path), [path]);\n  const topics = useMemo(() => (rosPath ? [rosPath.topicName] : []), [rosPath]);\n  const cachedGetMessagePathDataItems = useCachedGetMessagePathDataItems([path]);\n\n  const addMessage: (?MessageAndData, Message) => ?MessageAndData = useCallback(\n    (prevMessageAndData: ?MessageAndData, message: Message) => {\n      const queriedData = cachedGetMessagePathDataItems(path, message);\n      if (!queriedData) {\n        return;\n      }\n      if (queriedData.length > 0) {\n        return { message, queriedData };\n      }\n      return prevMessageAndData;\n    },\n    [cachedGetMessagePathDataItems, path]\n  );\n\n  const restore = useCallback(\n    (prevMessageAndData: ?MessageAndData): ?MessageAndData => {\n      if (prevMessageAndData) {\n        const queriedData = cachedGetMessagePathDataItems(path, prevMessageAndData.message);\n        if (queriedData && queriedData.length > 0) {\n          return { message: prevMessageAndData.message, queriedData };\n        }\n      }\n    },\n    [cachedGetMessagePathDataItems, path]\n  );\n\n  const messageAndData = PanelAPI.useMessageReducer({ topics, addMessage, restore });\n  return rosPath ? messageAndData : undefined;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport interface FieldReader {\n  read(data: number[] | Uint8Array, index: number): number;\n}\n\nexport class Float32Reader implements FieldReader {\n  offset: number;\n  view: DataView;\n  constructor(offset: number) {\n    this.offset = offset;\n    const buffer = new ArrayBuffer(4);\n    this.view = new DataView(buffer);\n  }\n\n  read(data: number[] | Uint8Array, index: number): number {\n    this.view.setUint8(0, data[index + this.offset]);\n    this.view.setUint8(1, data[index + this.offset + 1]);\n    this.view.setUint8(2, data[index + this.offset + 2]);\n    this.view.setUint8(3, data[index + this.offset + 3]);\n    return this.view.getFloat32(0, true);\n  }\n}\n\nexport class Int32Reader implements FieldReader {\n  offset: number;\n  view: DataView;\n  constructor(offset: number) {\n    this.offset = offset;\n    const buffer = new ArrayBuffer(4);\n    this.view = new DataView(buffer);\n  }\n\n  read(data: number[] | Uint8Array, index: number): number {\n    this.view.setUint8(0, data[index + this.offset]);\n    this.view.setUint8(1, data[index + this.offset + 1]);\n    this.view.setUint8(2, data[index + this.offset + 2]);\n    this.view.setUint8(3, data[index + this.offset + 3]);\n    return this.view.getInt32(0, true);\n  }\n}\n\nexport class Uint16Reader implements FieldReader {\n  offset: number;\n  view: DataView;\n  constructor(offset: number) {\n    this.offset = offset;\n    const buffer = new ArrayBuffer(2);\n    this.view = new DataView(buffer);\n  }\n\n  read(data: number[] | Uint8Array, index: number): number {\n    this.view.setUint8(0, data[index + this.offset]);\n    this.view.setUint8(1, data[index + this.offset + 1]);\n    return this.view.getUint16(0, true);\n  }\n}\nexport class Int16Reader implements FieldReader {\n  offset: number;\n  view: DataView;\n  constructor(offset: number) {\n    this.offset = offset;\n    const buffer = new ArrayBuffer(2);\n    this.view = new DataView(buffer);\n  }\n\n  read(data: number[] | Uint8Array, index: number): number {\n    this.view.setUint8(0, data[index + this.offset]);\n    this.view.setUint8(1, data[index + this.offset + 1]);\n    return this.view.getInt16(0, true);\n  }\n}\n\nexport class Uint8Reader implements FieldReader {\n  offset: number;\n  constructor(offset: number) {\n    this.offset = offset;\n  }\n\n  read(data: number[] | Uint8Array, index: number): number {\n    return data[index + this.offset];\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const SCheckbox = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: ${(props) => (props.labelDirection === \"top\" ? \"column\" : \"row\")};\n  align-items: ${(props) => (props.labelDirection === \"top\" ? \"flex-start\" : \"center\")};\n  color: ${(props) => (props.disabled ? colors.GRAY : colors.LIGHT1)};\n  cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\n`;\n\nexport const SLabel = styled.label`\n  margin: ${(props) => (props.labelDirection === \"top\" ? \"6px 6px 6px 0\" : \"6px\")};\n  color: ${(props) => (props.disabled || props.labelDirection === \"top\" ? colors.GRAY : colors.LIGHT1)};\n`;\n\nexport type Props = {\n  checked: boolean,\n  disabled?: boolean,\n  label: string,\n  labelStyle?: { [string]: string | number },\n  labelDirection?: \"top\" | \"left\" | \"right\",\n  tooltip?: string,\n  onChange: (newChecked: boolean) => void,\n  style?: { [string]: string | number },\n  dataTest?: string,\n};\n\nexport default function Checkbox({\n  label,\n  labelStyle,\n  labelDirection = \"right\",\n  checked,\n  tooltip,\n  onChange,\n  disabled,\n  style = {},\n  dataTest,\n}: Props) {\n  const Component = checked ? CheckboxMarkedIcon : CheckboxBlankOutlineIcon;\n  const onClick = React.useCallback(\n    () => {\n      if (!disabled) {\n        onChange(!checked);\n      }\n    },\n    [checked, disabled, onChange]\n  );\n\n  const styledLabel = (\n    <SLabel labelDirection={labelDirection} disabled={disabled} style={labelStyle}>\n      {label}\n    </SLabel>\n  );\n\n  if (labelDirection === \"top\") {\n    return (\n      <SCheckbox disabled={disabled} labelDirection={labelDirection} style={style}>\n        {styledLabel}\n      </SCheckbox>\n    );\n  }\n\n  return (\n    <SCheckbox disabled={disabled} labelDirection={labelDirection} style={style}>\n      {labelDirection === \"left\" && styledLabel}\n      <Icon small tooltip={tooltip} onClick={onClick} dataTest={dataTest}>\n        <Component />\n      </Icon>\n      {labelDirection === \"right\" && styledLabel}\n    </SCheckbox>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport Option from \"./Option\";\nimport Select from \"./Select\";\n\nexport { Select, Option };\nexport default Select;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport Pickr from \"@simonwep/pickr\";\nimport React, { forwardRef, useRef, useLayoutEffect, useImperativeHandle } from \"react\";\nimport styled from \"styled-components\";\n\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nimport \"@simonwep/pickr/dist/themes/monolith.min.css\";\n\nexport const COLOR_PICKER_SIZE = 29;\n\nconst SColorPicker = styled.div.attrs(({ color }) => ({\n  style: { backgroundColor: color },\n  \"data-test\": \"ColorPicker\",\n}))`\n  display: inline-block;\n  vertical-align: middle;\n  width: ${COLOR_PICKER_SIZE}px;\n  height: ${COLOR_PICKER_SIZE}px;\n  border-radius: 50%;\n  border: 1px solid ${colors.LIGHT2};\n`;\n\ntype Props = { color: string, onChange: (string) => void };\n\nfunction ColorPicker({ color, onChange }: Props, ref) {\n  const container = useRef();\n  const pickr = useRef<?Pickr>();\n  useImperativeHandle(ref, () => ({\n    getPickrForTesting: () => pickr.current,\n  }));\n\n  const onChangeRef = useRef(onChange);\n  onChangeRef.current = onChange;\n\n  const colorRef = useRef(color);\n  colorRef.current = color;\n\n  useLayoutEffect(() => {\n    if (!container.current) {\n      throw new Error(\"missing container element\");\n    }\n    pickr.current = new Pickr({\n      el: container.current,\n\n      // Pickr internally calls setColor() after initialization, so if our setColor\n      // happens too early it will be overridden by the default color\n      default: colorRef.current,\n\n      theme: \"monolith\",\n      useAsButton: true,\n      comparison: false,\n      lockOpacity: true,\n      components: {\n        preview: false,\n        hue: true,\n        interaction: {\n          input: true,\n        },\n      },\n    })\n      .on(\"show\", () => {\n        // Make sure color is up to date from props when picker is opened\n        if (pickr.current) {\n          pickr.current.setColor(colorRef.current);\n        }\n      })\n      .on(\"change\", (newColor) => {\n        onChangeRef.current(newColor.toHEXA().toString());\n      });\n\n    return () => {\n      if (pickr.current) {\n        pickr.current.destroyAndRemove();\n      }\n    };\n  }, []);\n\n  return <SColorPicker ref={container} color={color} />;\n}\n\nexport default forwardRef<Props, ?Pickr>(ColorPicker);\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./ImageCanvas.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./ImageCanvas.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./ImageCanvas.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { Point, CameraInfo } from \"webviz-core/src/types/Messages\";\n\nconst DISTORTION_STATE = {\n  NONE: \"NONE\",\n  CALIBRATED: \"CALIBRATED\",\n};\n\ntype DistortionState = $Values<typeof DISTORTION_STATE>;\n\n// Essentially a copy of ROSPinholeCameraModel\n// but only the relevant methods, i.e.\n// fromCameraInfo() and unrectifyPoint()\n// http://docs.ros.org/diamondback/api/image_geometry/html/c++/pinhole__camera__model_8cpp_source.html\nexport default class PinholeCameraModel {\n  _distortionState: DistortionState = DISTORTION_STATE.NONE;\n  D: $ReadOnlyArray<number> = [];\n  K: $ReadOnlyArray<number> = [];\n  P: $ReadOnlyArray<number> = [];\n  R: $ReadOnlyArray<number> = [];\n\n  // Mostly copied from `fromCameraInfo`\n  // http://docs.ros.org/diamondback/api/image_geometry/html/c++/pinhole__camera__model_8cpp_source.html#l00062\n  constructor(info: CameraInfo) {\n    const { binning_x, binning_y, roi, distortion_model, D, K, P, R } = info;\n\n    if (distortion_model === \"\") {\n      // Allow CameraInfo with no model to indicate no distortion\n      this._distortionState = DISTORTION_STATE.NONE;\n      return;\n    }\n\n    // Binning = 0 is considered the same as binning = 1 (no binning).\n    const binningX = binning_x ? binning_x : 1;\n    const binningY = binning_y ? binning_y : 1;\n\n    const adjustBinning = binningX > 1 || binningY > 1;\n    const adjustRoi = roi.x_offset !== 0 || roi.y_offset !== 0;\n\n    if (adjustBinning || adjustRoi) {\n      throw new Error(\n        \"Failed to initialize camera model: unable to handle adjusted binning and adjusted roi camera models.\"\n      );\n    }\n\n    // See comments about Tx = 0, Ty = 0 in\n    // http://docs.ros.org/melodic/api/sensor_msgs/html/msg/CameraInfo.html\n    if (P[3] !== 0 || P[7] !== 0) {\n      throw new Error(\n        \"Failed to initialize camera model: projection matrix implies non monocular camera - cannot handle at this time.\"\n      );\n    }\n\n    // Figure out how to handle the distortion\n    if (distortion_model === \"plumb_bob\" || distortion_model === \"rational_polynomial\") {\n      this._distortionState = D[0] === 0.0 ? DISTORTION_STATE.NONE : DISTORTION_STATE.CALIBRATED;\n    } else {\n      throw new Error(\n        \"Failed to initialize camera model: distortion_model is unknown, only plumb_bob and rational_polynomial are supported.\"\n      );\n    }\n    this.D = D;\n    this.P = P;\n    this.R = R;\n    this.K = K;\n  }\n\n  unrectifyPoint({ x: rectX, y: rectY }: Point): { x: number, y: number } {\n    if (this._distortionState === DISTORTION_STATE.NONE) {\n      return { x: rectX, y: rectY };\n    }\n\n    const { P, R, D, K } = this;\n    const fx = P[0];\n    const fy = P[5];\n    const cx = P[2];\n    const cy = P[6];\n    const tx = P[3];\n    const ty = P[7];\n\n    // Formulae from docs for cv::initUndistortRectifyMap,\n    // http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html\n\n    // x <- (u - c'x) / f'x\n    // y <- (v - c'y) / f'y\n    // c'x, f'x, etc. (primed) come from \"new camera matrix\" P[0:3, 0:3].\n    const x1 = (rectX - cx - tx) / fx;\n    const y1 = (rectY - cy - ty) / fy;\n    // [X Y W]^T <- R^-1 * [x y 1]^T\n    const X = R[0] * x1 + R[1] * y1 + R[2];\n    const Y = R[3] * x1 + R[4] * y1 + R[5];\n    const W = R[6] * x1 + R[7] * y1 + R[8];\n    const xp = X / W;\n    const yp = Y / W;\n\n    // x'' <- x'(1+k1*r^2+k2*r^4+k3*r^6) + 2p1*x'*y' + p2(r^2+2x'^2)\n    // y'' <- y'(1+k1*r^2+k2*r^4+k3*r^6) + p1(r^2+2y'^2) + 2p2*x'*y'\n    // where r^2 = x'^2 + y'^2\n    const r2 = xp * xp + yp * yp;\n    const r4 = r2 * r2;\n    const r6 = r4 * r2;\n    const a1 = 2 * xp * yp;\n    const k1 = D[0];\n    const k2 = D[1];\n    const p1 = D[2];\n    const p2 = D[3];\n    const k3 = D[4];\n    let barrel_correction = 1 + k1 * r2 + k2 * r4 + k3 * r6;\n    if (D.length === 8) {\n      barrel_correction /= 1.0 + D[5] * r2 + D[6] * r4 + D[7] * r6;\n    }\n    const xpp = xp * barrel_correction + p1 * a1 + p2 * (r2 + 2 * (xp * xp));\n    const ypp = yp * barrel_correction + p1 * (r2 + 2 * (yp * yp)) + p2 * a1;\n\n    // map_x(u,v) <- x''fx + cx\n    // map_y(u,v) <- y''fy + cy\n    // cx, fx, etc. come from original camera matrix K.\n    return { x: xpp * K[0] + K[2], y: ypp * K[4] + K[5] };\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { lib_filename, lib_es6_dts } from \"./lib\";\nimport {\n  DEPRECATED__ros_lib_dts,\n  DEPRECATED__ros_lib_filename,\n} from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/DEPRECATED_ros\";\nimport {\n  ros_lib_filename,\n  ros_lib_dts,\n} from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/ros\";\nimport userUtilities from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils\";\nimport { DEFAULT_WEBVIZ_NODE_PREFIX } from \"webviz-core/src/util/globalConstants\";\n\nexport type NodeProjectFile = {\n  fileName: string,\n  filePath: string,\n  sourceCode: string,\n};\n\nexport type NodeProjectConfig = {\n  defaultLibFileName: string,\n  declarations: NodeProjectFile[],\n  utilityFiles: NodeProjectFile[],\n};\n\nconst utilityFiles: NodeProjectFile[] = userUtilities.map((utility) => ({\n  ...utility,\n  filePath: `${DEFAULT_WEBVIZ_NODE_PREFIX}${utility.fileName}`,\n}));\n\nexport function getNodeProjectConfig() {\n  // TODO load these from .ts files rather than string consts\n  const declarations = [];\n  declarations.push({\n    fileName: lib_filename,\n    filePath: lib_filename,\n    sourceCode: lib_es6_dts,\n  });\n  declarations.push({\n    fileName: DEPRECATED__ros_lib_filename,\n    filePath: `/node_modules/${DEPRECATED__ros_lib_filename}`,\n    sourceCode: DEPRECATED__ros_lib_dts,\n  });\n\n  return {\n    defaultLibFileName: lib_filename,\n    rosLib: {\n      fileName: ros_lib_filename,\n      filePath: `/node_modules/${ros_lib_filename}`,\n      sourceCode: ros_lib_dts, // Default value that is overridden.\n    },\n    declarations,\n    utilityFiles,\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport const KNOWN_LOG_LEVELS: Array<number> = [1, 2, 4, 8, 16];\n\n// map a numeric level to a string\nexport default function LevelToString(level: number): string {\n  switch (level) {\n    case 1:\n      return \"DEBUG\";\n    case 2:\n      return \"INFO\";\n    case 4:\n      return \"WARN\";\n    case 8:\n      return \"ERROR\";\n    case 16:\n      return \"FATAL\";\n    default:\n      return \"?????\";\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./LogMessage.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./LogMessage.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./LogMessage.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport { omit } from \"lodash\";\nimport React, { type Node, useCallback } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport { useSelector } from \"react-redux\";\nimport { type CameraState } from \"regl-worldview\";\n\nimport { FrameCompatibilityDEPRECATED } from \"./FrameCompatibility\";\nimport { useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelContext from \"webviz-core/src/components/PanelContext\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport helpContent from \"webviz-core/src/panels/ThreeDimensionalViz/index.help.md\";\nimport type { TopicSettingsCollection } from \"webviz-core/src/panels/ThreeDimensionalViz/SceneBuilder\";\nimport {\n  useComputedCameraState,\n  getNewCameraStateOnFollowChange,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/threeDimensionalVizUtils\";\nimport type { TopicGroupConfig } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/types\";\nimport Layout from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/Layout\";\nimport { type TopicDisplayMode } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicViewModeSelector\";\nimport Transforms from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport withTransforms from \"webviz-core/src/panels/ThreeDimensionalViz/withTransforms\";\nimport type { Frame, Topic } from \"webviz-core/src/players/types\";\nimport type { SaveConfig } from \"webviz-core/src/types/panels\";\nimport { TRANSFORM_TOPIC, TRANSFORM_STATIC_TOPIC } from \"webviz-core/src/util/globalConstants\";\n\nexport type ThreeDimensionalVizConfig = {\n  enableShortDisplayNames?: boolean,\n  autoTextBackgroundColor?: boolean,\n  cameraState: $Shape<CameraState>,\n  followTf?: string | false,\n  followOrientation?: boolean,\n  modifiedNamespaceTopics?: string[],\n  pinTopics: boolean,\n  savedPropsVersion?: ?number, // eslint-disable-line react/no-unused-prop-types\n  topicDisplayMode?: TopicDisplayMode,\n  flattenMarkers?: boolean,\n  selectedPolygonEditFormat?: \"json\" | \"yaml\",\n  showCrosshair?: boolean,\n\n  expandedKeys: string[],\n  checkedKeys: string[],\n  topicSettings: TopicSettingsCollection,\n  autoSyncCameraState?: boolean,\n\n  // legacy props\n  hideMap?: ?boolean, // eslint-disable-line react/no-unused-prop-types\n  useHeightMap?: ?boolean, // eslint-disable-line react/no-unused-prop-types\n  follow?: boolean,\n  topicGroups?: TopicGroupConfig[],\n  checkedNodes?: string[],\n  expandedNodes?: string[],\n};\nexport type Save3DConfig = SaveConfig<ThreeDimensionalVizConfig>;\n\nexport type Props = {\n  cleared?: boolean,\n  config: ThreeDimensionalVizConfig,\n  frame: Frame,\n  helpContent: Node | string,\n  saveConfig: Save3DConfig,\n  setSubscriptions: (subscriptions: string[]) => void,\n  topics: Topic[],\n  transforms: Transforms,\n};\n\nconst BaseRenderer = (props: Props, ref) => {\n  const {\n    cleared,\n    config,\n    frame,\n    saveConfig,\n    setSubscriptions,\n    topics,\n    transforms,\n    config: { autoSyncCameraState, followOrientation, followTf },\n  } = props;\n  const extensions = useSelector((state) => state.extensions);\n  const { updatePanelConfig } = React.useContext(PanelContext) || {};\n\n  const currentTime = useMessagePipeline(\n    useCallback(({ playerState: { activeData } }) => (activeData && activeData.currentTime) || { sec: 0, nsec: 0 }, [])\n  );\n  const isPlaying = useMessagePipeline(\n    useCallback(({ playerState: { activeData } }) => !!(activeData && activeData.isPlaying), [])\n  );\n\n  const { cameraState, targetPose } = useComputedCameraState({\n    currentCameraState: config.cameraState,\n    followTf,\n    followOrientation,\n    transforms,\n  });\n\n  const onSetSubscriptions = useCallback(\n    (subscriptions: string[]) => {\n      setSubscriptions([\n        ...getGlobalHooks().perPanelHooks().ThreeDimensionalViz.topics,\n        TRANSFORM_TOPIC,\n        TRANSFORM_STATIC_TOPIC,\n        ...subscriptions,\n      ]);\n    },\n    [setSubscriptions]\n  );\n\n  // use callbackInputsRef to make sure the input changes don't trigger `onFollowChange` or `onAlignXYAxis` to change\n  const callbackInputsRef = React.useRef({\n    cameraState,\n    configCameraState: config.cameraState,\n    targetPose,\n    configFollowOrientation: config.followOrientation,\n    configFollowTf: config.followTf,\n  });\n  callbackInputsRef.current = {\n    cameraState,\n    configCameraState: config.cameraState,\n    targetPose,\n    configFollowOrientation: config.followOrientation,\n    configFollowTf: config.followTf,\n  };\n  const onFollowChange = useCallback(\n    (newFollowTf?: string | false, newFollowOrientation?: boolean) => {\n      const {\n        configCameraState: prevCameraState,\n        configFollowOrientation: prevFollowOrientation,\n        configFollowTf: prevFollowTf,\n        targetPose: prevTargetPose,\n      } = callbackInputsRef.current;\n      const newCameraState = getNewCameraStateOnFollowChange({\n        prevCameraState,\n        prevTargetPose,\n        prevFollowTf,\n        prevFollowOrientation,\n        newFollowTf,\n        newFollowOrientation,\n      });\n      saveConfig({ followTf: newFollowTf, followOrientation: newFollowOrientation, cameraState: newCameraState });\n    },\n    [saveConfig]\n  );\n\n  const onAlignXYAxis = useCallback(\n    () =>\n      saveConfig({\n        followOrientation: false,\n        cameraState: {\n          ...omit(callbackInputsRef.current.cameraState, [\"target\", \"targetOrientation\"]),\n          thetaOffset: 0,\n        },\n      }),\n    [saveConfig]\n  );\n\n  const onCameraStateChange = useCallback(\n    (newCameraState) => {\n      const newCameraStateObj = omit(newCameraState, [\"target\", \"targetOrientation\"]);\n      if (autoSyncCameraState) {\n        updatePanelConfig(\"3D Panel\", (oldConfig) => ({ ...oldConfig, cameraState: newCameraStateObj }));\n      } else {\n        saveConfig({ cameraState: newCameraStateObj }, { keepLayoutInUrl: true });\n      }\n    },\n    [autoSyncCameraState, saveConfig, updatePanelConfig]\n  );\n\n  // useImperativeHandle so consumer component (e.g.Follow stories) can call onFollowChange directly.\n  React.useImperativeHandle(ref, (): any => ({ onFollowChange }));\n\n  return (\n    <Layout\n      cameraState={cameraState}\n      config={config}\n      cleared={cleared}\n      currentTime={currentTime}\n      extensions={extensions}\n      followOrientation={!!followOrientation}\n      followTf={followTf}\n      frame={frame}\n      helpContent={helpContent}\n      isPlaying={isPlaying}\n      onAlignXYAxis={onAlignXYAxis}\n      onCameraStateChange={onCameraStateChange}\n      onFollowChange={onFollowChange}\n      saveConfig={saveConfig}\n      topics={topics}\n      targetPose={targetPose}\n      transforms={transforms}\n      setSubscriptions={onSetSubscriptions}\n    />\n  );\n};\n\nBaseRenderer.displayName = \"ThreeDimensionalViz\";\nBaseRenderer.panelType = \"3D Panel\";\nBaseRenderer.defaultConfig = getGlobalHooks().perPanelHooks().ThreeDimensionalViz.defaultConfig;\n\nexport const Renderer = hoistNonReactStatics(React.forwardRef<Props, typeof BaseRenderer>(BaseRenderer), BaseRenderer);\n\nexport default hot(Panel<ThreeDimensionalVizConfig>(FrameCompatibilityDEPRECATED(withTransforms(Renderer), [])));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport const DEFAULT_IMPORTED_GROUP_NAME = \"Imported Group\";\nexport const DEFAULT_DEBOUNCE_TIME = 50;\n\nexport const DATA_SOURCE_BADGE_SIZE = 28;\nexport const ICON_PADDING = 2;\nexport const ICON_SIZE = 18; // default small icon size\nexport const ICON_TOTAL_SIZE = ICON_PADDING * 2 + ICON_SIZE;\n\nexport const ITEM_MAIN_PADDING_LEFT = ICON_TOTAL_SIZE * 4 + 12;\n\nexport const KEYBOARD_SHORTCUTS = [\n  {\n    description: \"Toggle topic panel\",\n    keys: [\"T\"],\n  },\n  {\n    description: \"Search\",\n    keys: [\"/\"],\n  },\n  {\n    description: \"Navigate up/down\",\n    keys: [\"↑\", \"↓\"],\n  },\n  {\n    description: \"Expand/collapse\",\n    keys: [\"←\", \"→\"],\n  },\n  {\n    description: \"Toggle group/topic visibility\",\n    keys: [\"Enter\"],\n  },\n  {\n    description: \"Toggle children\",\n    keys: [\"Shift\", \"Enter\"],\n  },\n  {\n    description: \"Remove focus\",\n    keys: [\"Esc\"],\n  },\n];\n\nexport const KEYBOARD_FOCUS_TYPES = {\n  GROUP: \"GROUP\",\n  NEW_GROUP: \"NEW_GROUP\",\n  TOPIC: \"TOPIC\",\n  NEW_TOPIC: \"NEW_TOPIC\",\n  NAMESPACE: \"NAMESPACE\",\n};\n\nexport const FOCUS_ITEM_OPS = {\n  Enter: \"Enter\",\n  ArrowLeft: \"ArrowLeft\",\n  ArrowRight: \"ArrowRight\",\n  ArrowUp: \"ArrowUp\",\n  ArrowDown: \"ArrowDown\",\n  Backspace: \"Backspace\", // non-filter mode only\n};\n\nexport const OTHER_KEY_OPS = { t: \"t\", Escape: \"Escape\", \"/\": \"/\" };\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { difference, omit, flatten, uniq, keyBy, mapValues, isEqual } from \"lodash\";\nimport microMemoize from \"micro-memoize\";\n\nimport { KEYBOARD_FOCUS_TYPES } from \"./constants\";\nimport { getSettingsByColumnWithDefaults } from \"./topicGroupsMigrations\";\nimport type { KeyboardFocusData, TopicGroupConfig, TopicGroupType, TopicItemConfig } from \"./types\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport type { SceneErrors } from \"webviz-core/src/panels/ThreeDimensionalViz/SceneBuilder/index\";\nimport type { TopicTreeConfig } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/types\";\nimport { type Topic } from \"webviz-core/src/players/types\";\nimport type { Namespace } from \"webviz-core/src/types/Messages\";\n\nexport const TOPIC_CONFIG = getGlobalHooks()\n  .startupPerPanelHooks()\n  .ThreeDimensionalViz.getDefaultTopicTree();\n\nexport const BASE_DATA_SOURCE_PREFIXES = [\"\", \"/webviz_tables\", \"/labels_json\"];\nexport const FEATURE_DATA_SOURCE_PREFIXES = [\"/webviz_source_2\", \"/webviz_source_2\"];\nexport const ALL_DATA_SOURCE_PREFIXES = [...BASE_DATA_SOURCE_PREFIXES, ...FEATURE_DATA_SOURCE_PREFIXES];\nexport const DEFAULT_GROUP_PREFIXES_BY_COLUMN = [BASE_DATA_SOURCE_PREFIXES, FEATURE_DATA_SOURCE_PREFIXES];\n\nconst BASE_COLUMN_ONLY_TOPICS = new Set([\"/metadata\", \"/tf\"]);\nconst DEFAULT_VISIBILITY_BY_COLUMN = [false, false];\nconst DEFAULT_GROUP_NAME = \"Default Group\";\n\n// Only turn on two namespaces for map.\nexport const DEFAULT_METADATA_NAMESPACES = [\"tiles\", \"intensity\"];\n\nexport function getDefaultNewGroupItemConfig(displayName: string, topicNames: string[]): TopicGroupConfig {\n  return {\n    expanded: true,\n    displayName,\n    items: topicNames.map((topicName) => getDefaultTopicItemConfig(topicName)),\n    // Turn both the base and feature visibility on by default.\n    visibilityByColumn: [true, true],\n  };\n}\n\nexport function getDefaultTopicItemConfig(\n  topicName: string,\n  defaultMetadataNamespaces: string[] = DEFAULT_METADATA_NAMESPACES\n): TopicItemConfig {\n  const topicNameWithoutPrefix = removeTopicPrefixes([topicName])[0];\n  const selectedNamespacesByColumn =\n    topicNameWithoutPrefix === \"/metadata\" ? [defaultMetadataNamespaces, []] : undefined;\n  return {\n    topicName: topicNameWithoutPrefix,\n    // Turn the base topic visibility on by default.\n    visibilityByColumn: [true, false],\n    ...getSettingsByColumnWithDefaults(topicNameWithoutPrefix),\n    ...(selectedNamespacesByColumn ? { selectedNamespacesByColumn } : undefined),\n  };\n}\n\ntype DisplayNameByTopic = { [topicName: string]: string };\ntype ErrorsByTopic = { [topicName: string]: string[] };\ntype NamespacesByTopic = { [topicName: string]: string[] };\n\nexport function removeTopicPrefixes(topicNames: string[]): string[] {\n  const nonPrefixedNames = topicNames.map((name) => {\n    for (const dataSourcePrefix of FEATURE_DATA_SOURCE_PREFIXES) {\n      if (dataSourcePrefix && name.startsWith(dataSourcePrefix)) {\n        return name.substr(dataSourcePrefix.length);\n      }\n    }\n    return name;\n  });\n  return uniq(nonPrefixedNames);\n}\n\n// Generate topicGroups data for the UI.\nexport function getTopicGroups(\n  groupsConfig: TopicGroupConfig[],\n  {\n    availableTopics,\n    displayNameByTopic,\n    errorsByTopic,\n    namespacesByTopic,\n    filterText,\n    filteredKeysSet,\n    hasFeatureColumn,\n  }: {|\n    displayNameByTopic: DisplayNameByTopic,\n    namespacesByTopic: NamespacesByTopic,\n    availableTopics: Topic[],\n    errorsByTopic: ErrorsByTopic,\n    filterText?: string,\n    filteredKeysSet?: ?Set<string>,\n    hasFeatureColumn?: boolean,\n  |}\n): TopicGroupType[] {\n  const availableTopicNamesSet = new Set(availableTopics.map(({ name }) => name));\n  const datatypeKeyByTopicName = mapValues(keyBy(availableTopics, \"name\"), \"datatype\");\n\n  return groupsConfig.map(\n    ({ items, visibilityByColumn: groupVisibilityByColumn = DEFAULT_VISIBILITY_BY_COLUMN, ...rest }, idx) => {\n      const id = `${rest.displayName.split(\" \").join(\"-\")}_${idx}`;\n      // Auto expand group in filtering mode.\n      const isGroupExpanded = rest.expanded == null ? idx === 0 : rest.expanded || !!filterText;\n      let isAnyTopicFiltered = false;\n\n      const topicItems = items.map((topicItemConfig, idx1) => {\n        const {\n          displayName,\n          topicName,\n          selectedNamespacesByColumn = [],\n          visibilityByColumn = DEFAULT_VISIBILITY_BY_COLUMN,\n        } = topicItemConfig;\n\n        let datatype;\n        const errors = [];\n        const prefixByColumn = getPrefixByColumn(topicName);\n        const topicHasFeatureColumn = hasFeatureColumn && !BASE_COLUMN_ONLY_TOPICS.has(topicName);\n        const topicDisplayVisibilityByColumn = topicHasFeatureColumn ? [undefined, undefined] : [undefined];\n        const availableNamespacesByColumn = topicHasFeatureColumn ? [[], []] : [[]];\n        const namespaceDisplayVisibilityByNamespace = {};\n        visibilityByColumn.forEach((columnVisible, columnIdx) => {\n          // Don't need to process feature column if no feature topics are available.\n          if (!topicHasFeatureColumn && columnIdx > 0) {\n            return;\n          }\n          const dataSourcePrefix = prefixByColumn[columnIdx];\n          const prefixedTopicName = `${dataSourcePrefix}${topicName}`;\n          if (availableTopicNamesSet.has(prefixedTopicName)) {\n            if (errorsByTopic[prefixedTopicName]) {\n              const errorSource = dataSourcePrefix ? `(${dataSourcePrefix}) ` : \"\";\n              errors.push(...errorsByTopic[prefixedTopicName].map((error) => `${errorSource}${error}`));\n            }\n\n            datatype = datatypeKeyByTopicName[prefixedTopicName];\n            const badgeText = getBadgeTextByTopicName(prefixedTopicName);\n\n            topicDisplayVisibilityByColumn[columnIdx] = {\n              badgeText,\n              isParentVisible: groupVisibilityByColumn[columnIdx],\n              visible: columnVisible,\n              available: true,\n            };\n            const isNamespaceParentVisible = groupVisibilityByColumn[columnIdx] && columnVisible;\n\n            // Store the available namespaces so we can control what namespaces to toggle on/off later.\n            availableNamespacesByColumn[columnIdx] = namespacesByTopic[prefixedTopicName] || [];\n            // Only show namespaces when the topic is available.\n            availableNamespacesByColumn[columnIdx].forEach((ns) => {\n              if (!namespaceDisplayVisibilityByNamespace[ns]) {\n                namespaceDisplayVisibilityByNamespace[ns] = topicHasFeatureColumn\n                  ? [undefined, undefined]\n                  : [undefined];\n              }\n              namespaceDisplayVisibilityByNamespace[ns][columnIdx] = {\n                isParentVisible: isNamespaceParentVisible,\n                badgeText,\n                // Make namespaces visible by default.\n                visible:\n                  selectedNamespacesByColumn[columnIdx] == null || selectedNamespacesByColumn[columnIdx].includes(ns),\n                available: true,\n              };\n            });\n          }\n        });\n\n        const displayNameWithFallback = displayName || displayNameByTopic[topicName];\n\n        const sortedNamespaceDisplayVisibilityByColumn = Object.keys(namespaceDisplayVisibilityByNamespace)\n          .sort()\n          .filter((nsName) => (filteredKeysSet ? filteredKeysSet.has(nsName) : true))\n          .map((namespace) => ({\n            namespace,\n            keyboardFocusIndex: -1,\n            displayVisibilityByColumn: namespaceDisplayVisibilityByNamespace[namespace],\n          }));\n\n        const isTopicShownInList =\n          !filteredKeysSet ||\n          ((filteredKeysSet && (filteredKeysSet.has(topicName) || filteredKeysSet.has(displayNameWithFallback))) ||\n            // Show topic if any namespace matches.\n            sortedNamespaceDisplayVisibilityByColumn.length > 0);\n\n        // Auto select group if any topic in this group is selected.\n        if (isTopicShownInList) {\n          isAnyTopicFiltered = true;\n        }\n\n        return {\n          // Save the original config in order to save back to panelConfig.\n          ...topicItemConfig,\n          derivedFields: {\n            displayName: displayNameWithFallback || topicName,\n            id: `${id}_${idx1}`,\n            isShownInList: isTopicShownInList,\n            keyboardFocusIndex: -1,\n            prefixByColumn,\n            ...(sortedNamespaceDisplayVisibilityByColumn.length\n              ? { sortedNamespaceDisplayVisibilityByColumn, availableNamespacesByColumn }\n              : undefined),\n            ...(isEqual(topicDisplayVisibilityByColumn, [undefined, undefined]) ||\n            isEqual(topicDisplayVisibilityByColumn, [undefined])\n              ? undefined\n              : { displayVisibilityByColumn: topicDisplayVisibilityByColumn }),\n            ...(filterText ? { filterText } : undefined),\n            ...(errors.length ? { errors } : undefined),\n            ...(datatype ? { datatype } : undefined),\n          },\n        };\n      });\n\n      // TODO(Audrey): auto expand visible groups or groups with visible children, need to use react virtualized to improve perf.\n      const isGroupShownInList =\n        !filteredKeysSet || isAnyTopicFiltered || (filteredKeysSet && filteredKeysSet.has(rest.displayName));\n\n      return {\n        ...rest,\n        visibilityByColumn: groupVisibilityByColumn,\n        derivedFields: {\n          addTopicKeyboardFocusIndex: -1,\n          expanded: isGroupExpanded,\n          hasFeatureColumn: !!hasFeatureColumn,\n          id,\n          isShownInList: isGroupShownInList,\n          keyboardFocusIndex: -1,\n          prefixesByColumn: [BASE_DATA_SOURCE_PREFIXES, FEATURE_DATA_SOURCE_PREFIXES],\n          ...(filterText ? { filterText } : undefined),\n        },\n        items: topicItems,\n      };\n    }\n  );\n}\n\nexport function updateFocusIndexesAndGetFocusData(\n  topicGroups: TopicGroupType[]\n): { topicGroups: TopicGroupType[], focusData: KeyboardFocusData[] } {\n  // An array that maps focusIndexes to the objectPath and keyboard op type so that when keyboard op happens,\n  // we can manipulate topicGroups data without iterating through all groups and topics.\n  const focusData = [];\n  const newTopicGroups = topicGroups.map((group, idx) => {\n    const {\n      items,\n      derivedFields: { isShownInList, expanded },\n    } = group;\n    const newGroup = { ...group };\n    // The first focusIndex is for the group.\n    const groupFocusIndex = focusData.length;\n    if (isShownInList) {\n      focusData.push({ objectPath: `[${idx}]`, focusType: KEYBOARD_FOCUS_TYPES.GROUP });\n    }\n    // Only assign updated focusIndexes to visible topics.\n    const shouldAssignFocusIndexesToTopics = isShownInList && expanded;\n    if (shouldAssignFocusIndexesToTopics) {\n      newGroup.items = items.map((item, idx1) => {\n        const newItem = { ...item };\n        const {\n          expanded: topicExpanded,\n          derivedFields: { isShownInList: topicIsShownInList, sortedNamespaceDisplayVisibilityByColumn },\n        } = item;\n        if (topicIsShownInList) {\n          newItem.derivedFields.keyboardFocusIndex = focusData.length;\n          focusData.push({ objectPath: `[${idx}].items.[${idx1}]`, focusType: KEYBOARD_FOCUS_TYPES.TOPIC });\n          // Assign focusIndexes to namespaces.\n          if (topicExpanded && sortedNamespaceDisplayVisibilityByColumn) {\n            sortedNamespaceDisplayVisibilityByColumn.forEach((nsItem, nsItemIdx) => {\n              nsItem.keyboardFocusIndex = focusData.length;\n              focusData.push({\n                objectPath: `[${idx}].items.[${idx1}].derivedFields.sortedNamespaceDisplayVisibilityByColumn.[${nsItemIdx}]`,\n                focusType: KEYBOARD_FOCUS_TYPES.NAMESPACE,\n              });\n            });\n          }\n        }\n        return newItem;\n      });\n    }\n\n    if (isShownInList) {\n      newGroup.derivedFields.keyboardFocusIndex = groupFocusIndex;\n      if (shouldAssignFocusIndexesToTopics) {\n        newGroup.derivedFields.addTopicKeyboardFocusIndex = focusData.length;\n        // Add another focusIndex for `New topic` button at the bottom of each group.\n        focusData.push({ objectPath: `[${idx}].items`, focusType: KEYBOARD_FOCUS_TYPES.NEW_TOPIC });\n      }\n    }\n    return newGroup;\n  });\n  // Add focusIndex for `New Group` button at the bottom of all groups.\n  focusData.push({ objectPath: \"\", focusType: KEYBOARD_FOCUS_TYPES.NEW_GROUP });\n  return { topicGroups: newTopicGroups, focusData };\n}\n\nexport function addIsKeyboardFocusedToTopicGroups(topicGroups: TopicGroupType[], focusIndex: number): TopicGroupType[] {\n  return topicGroups.map((group) => ({\n    ...group,\n    derivedFields:\n      group.derivedFields.keyboardFocusIndex === focusIndex\n        ? {\n            ...group.derivedFields,\n            isKeyboardFocused: true,\n          }\n        : group.derivedFields,\n    items: group.items.map((item) => ({\n      ...item,\n      derivedFields:\n        item.derivedFields.keyboardFocusIndex === focusIndex\n          ? { ...item.derivedFields, isKeyboardFocused: true }\n          : item.derivedFields.sortedNamespaceDisplayVisibilityByColumn\n          ? {\n              ...item.derivedFields,\n              sortedNamespaceDisplayVisibilityByColumn: item.derivedFields.sortedNamespaceDisplayVisibilityByColumn.map(\n                (nsItem) =>\n                  nsItem.keyboardFocusIndex === focusIndex\n                    ? {\n                        ...nsItem,\n                        isKeyboardFocused: true,\n                      }\n                    : nsItem\n              ),\n            }\n          : item.derivedFields,\n    })),\n  }));\n}\n\ntype TopicTreeItem = {| topic: string, name: string |};\n// Traverse the tree and flatten the children items in the topicConfig.\nfunction* flattenItem(\n  item: TopicTreeConfig,\n  name: string,\n  enableShortDisplayNames: boolean\n): Generator<TopicTreeItem, void, void> {\n  const childrenItems = item.children;\n  // extensions or leaf nodes\n  if (!childrenItems) {\n    // remove children before adding a new node for extensions, otherwise add the node directly\n    yield { ...omit(item, \"children\"), name };\n  }\n  if (childrenItems) {\n    for (const subItem of childrenItems) {\n      let subItemName = subItem.displayName || `${name} / ${subItem.name || \"\"}`;\n      if (!subItem.displayName && !subItem.name && subItem.topicName) {\n        subItemName = name;\n      }\n      if (!enableShortDisplayNames) {\n        subItemName = `${name} / ${subItem.name || \"\"}`;\n        if (!subItem.name && subItem.topicName) {\n          subItemName = name;\n        }\n      }\n      yield* flattenItem(subItem, subItemName, enableShortDisplayNames);\n    }\n  }\n}\n\n// Memoize the flattened nodes since it only needs to be computed once.\nexport const getFlattenedTreeNodes = microMemoize(\n  (topicConfig: TopicTreeConfig, enableShortDisplayNames: boolean): TopicTreeItem[] => {\n    if (!topicConfig.children) {\n      return [];\n    }\n    return flatten(\n      topicConfig.children.map((item) => Array.from(flattenItem(item, item.name || \"\", enableShortDisplayNames)))\n    );\n  }\n);\n\n// Generate a map based on topicTree config, so we can map a topicName or extension to a preconfigured name.\nexport const buildItemDisplayNameByTopicOrExtension = microMemoize(\n  (topicConfig: TopicTreeConfig, enableShortDisplayNames?: boolean): DisplayNameByTopic => {\n    const flattenedTopicNodes = getFlattenedTreeNodes(topicConfig, !!enableShortDisplayNames);\n    const result = { \"/metadata\": \"Map\", \"/tf\": \"TF\" };\n    for (const node of flattenedTopicNodes) {\n      const key = node.topic || node.extension;\n      if (key) {\n        result[key] = node.name;\n      }\n    }\n    return result;\n  }\n);\n\n// Generate a map from topic to available namespaces, including migrated extensions (under /metadata topic),\n// tf, and dynamically derived namespaces from messages.\nexport function buildAvailableNamespacesByTopic({\n  topicConfig = TOPIC_CONFIG,\n  allNamespaces = [],\n  transformIds = [],\n}: {\n  topicConfig: TopicTreeConfig,\n  allNamespaces: Namespace[],\n  transformIds: string[],\n}): NamespacesByTopic {\n  const namespacesByTopic = {};\n  const displayNameByTopicOrExtension = buildItemDisplayNameByTopicOrExtension(topicConfig);\n  // Group all non-topic related extensions under /metadata topic. Currently they are all map related extensions\n  namespacesByTopic[\"/metadata\"] = Object.keys(displayNameByTopicOrExtension).filter((key) => !key.startsWith(\"/\"));\n  namespacesByTopic[\"/tf\"] = transformIds;\n\n  for (const { topic, name } of allNamespaces) {\n    namespacesByTopic[topic] = namespacesByTopic[topic] || [];\n    namespacesByTopic[topic].push(name);\n  }\n\n  return namespacesByTopic;\n}\n\n// Derive data source badge text from topic name. Keep it simple for now as we only have these prefixes.\nexport function getBadgeTextByTopicName(topicName: string): string {\n  if (topicName.startsWith(\"/webviz_source_2/tables\")) {\n    return \"T2\";\n  } else if (topicName.startsWith(\"/webviz_source_2\")) {\n    return \"B2\";\n  } else if (topicName.startsWith(\"/tables\")) {\n    return \"T1\";\n  } else if (topicName.startsWith(\"/labels_json_2\")) {\n    return \"L2\";\n  } else if (topicName.startsWith(\"/labels_json\")) {\n    return \"L1\";\n  }\n  return \"B1\";\n}\nfunction getPrefixByColumn(topicName: string): string[] {\n  if (topicName.startsWith(\"/tables/\") || topicName.startsWith(\"/webviz_source_2/tables/\")) {\n    return [\"\", \"/webviz_source_2\"];\n  } else if (topicName.startsWith(\"/labels_json/\")) {\n    return [\"\", \"/labels_json_2\"];\n  }\n  return [\"\", \"/webviz_source_2\"];\n}\n\nexport function getSelectionsFromTopicGroupConfig(\n  topicGroupsConfig: TopicGroupConfig[]\n): {\n  selectedTopicNames: string[],\n  selectedNamespacesByTopic: { [topicName: string]: string[] },\n  selectedTopicSettingsByTopic: { [topicName: string]: any },\n} {\n  const selectedTopicNames = [];\n  const selectedNamespacesByTopic = {};\n  const selectedTopicSettingsByTopic = {};\n  topicGroupsConfig.forEach(({ visibilityByColumn: groupVisibilityByColumn = DEFAULT_VISIBILITY_BY_COLUMN, items }) => {\n    items.forEach(\n      ({\n        topicName,\n        visibilityByColumn: topicVisibilityByColumn = DEFAULT_VISIBILITY_BY_COLUMN,\n        settingsByColumn,\n        selectedNamespacesByColumn,\n      }) => {\n        const prefixByColumn = getPrefixByColumn(topicName);\n        for (let i = 0; i < prefixByColumn.length; i++) {\n          // No need to process if the group prefix is not visible.\n          if (!groupVisibilityByColumn[i]) {\n            continue;\n          }\n          const dataSourcePrefix = prefixByColumn[i];\n          const prefixedTopicName = `${dataSourcePrefix}${topicName}`;\n          const isTopicVisible = topicVisibilityByColumn[i];\n          if (isTopicVisible) {\n            selectedTopicNames.push(prefixedTopicName);\n          }\n          // Only need to set namespaces for the selected and visible topics.\n          if (selectedNamespacesByColumn && isTopicVisible && selectedNamespacesByColumn[i]) {\n            selectedNamespacesByTopic[prefixedTopicName] = selectedNamespacesByColumn[i];\n          }\n        }\n        if (!settingsByColumn) {\n          return;\n        }\n        settingsByColumn.forEach((settings, settingsColIdx) => {\n          const dataSourcePrefix = prefixByColumn[settingsColIdx];\n          if (settings && dataSourcePrefix != null) {\n            const prefixedTopicName = `${dataSourcePrefix}${topicName}`;\n            selectedTopicSettingsByTopic[prefixedTopicName] = settings;\n          }\n        });\n      }\n    );\n  });\n  return {\n    selectedTopicNames,\n    selectedNamespacesByTopic,\n    selectedTopicSettingsByTopic,\n  };\n}\n\nexport function getSceneErrorsByTopic(sceneErrors: SceneErrors): { [topicName: string]: string[] } {\n  const res = {};\n  // generic errors\n  for (const [topic, message] of sceneErrors.topicsWithError) {\n    if (!res[topic]) {\n      res[topic] = [];\n    }\n    res[topic].push(message);\n  }\n  // errors related to missing frame ids and transform ids\n  [\n    { description: \"missing frame id\", errors: sceneErrors.topicsMissingFrameIds },\n    {\n      description: `missing transforms to root transform ${sceneErrors.rootTransformID}`,\n      errors: sceneErrors.topicsMissingTransforms,\n    },\n  ].forEach(({ description, errors }) => {\n    errors.forEach((_, topic) => {\n      if (!res[topic]) {\n        res[topic] = [];\n      }\n      res[topic].push(description);\n    });\n  });\n  return res;\n}\n\nexport type TreeNodeConfig = {|\n  topicName?: string,\n  name: string,\n  children?: TreeNodeConfig[],\n|};\n\n// Transform the existing topic tree config to the topic group tree by removing extension, icon,\n// legacyIds, and add map and tf topic.\n// TODO(Audrey): remove the transform logic once we release topic grouping feature\nexport function transformTopicTree(oldTree: TopicTreeConfig): TreeNodeConfig {\n  const newTree: TreeNodeConfig = {\n    ...(oldTree.name ? { name: oldTree.name || oldTree.topicName } : undefined),\n    ...(oldTree.topicName ? { topicName: oldTree.topicName } : undefined),\n  };\n  if (oldTree.name && oldTree.name === \"TF\") {\n    newTree.topicName = \"/tf\";\n  }\n  const oldChildren = oldTree.children;\n\n  if (oldChildren) {\n    const newChildren = oldChildren.map((child) => transformTopicTree(child));\n    if (newChildren.length) {\n      newTree.children = newChildren;\n    }\n  }\n  return newTree;\n}\n\n// Remove any white spaces in the inputText when generating topic names.\nexport function removeBlankSpaces(inputText: string): string {\n  return inputText.replace(/\\s/g, \"\");\n}\n\n/**\n * Create top level groups based on 1st-level children from topic tree.\n * Return a default group if no 1st-level children but a topicName is present.\n */\nexport function getTopLevelGroupsFromTopicTree(topicTree: TopicTreeConfig): TopicGroupConfig[] {\n  if (!topicTree.children) {\n    return topicTree.topicName ? [getDefaultNewGroupItemConfig(DEFAULT_GROUP_NAME, [topicTree.topicName])] : [];\n  }\n  return topicTree.children.map((child) => {\n    let groupTopics = child.topicName ? [child.topicName] : [];\n    // Collect extensions to be used for `/metadata` namespaces.\n    let extensions;\n    if (child.children) {\n      const flattenedTopicNodes = getFlattenedTreeNodes(child);\n      flattenedTopicNodes.forEach((node) => {\n        if (node.topic) {\n          groupTopics.push(node.topic);\n        } else if (node.extension) {\n          if (!extensions) {\n            groupTopics.push(\"/metadata\");\n            extensions = [];\n          }\n          extensions.push(node.extension);\n        }\n      });\n    }\n    if (child.name === \"TF\") {\n      // TF is it's own group and topic by default.\n      groupTopics = [\"/tf\"];\n    }\n    return {\n      displayName: child.name || child.topicName || DEFAULT_GROUP_NAME,\n      expanded: false,\n      items: groupTopics.map((topicName) => getDefaultTopicItemConfig(topicName, extensions)),\n    };\n  });\n}\n\n// Break the imported topics into multiple top level groups based on topic tree.\nexport function distributeImportedTopicsToTopLevelGroups(topicGroupsConfig: TopicGroupConfig): TopicGroupConfig[] {\n  // No need to break into different groups if there are no selected topics in the topic group.\n  const topicItems = topicGroupsConfig.items;\n  if (!topicItems.length) {\n    return [topicGroupsConfig];\n  }\n  const selectedTopicNames = topicItems.map((item) => item.topicName);\n  const selectedTopicNamesSet = new Set(selectedTopicNames);\n  const topicTreeConfig = getGlobalHooks()\n    .startupPerPanelHooks()\n    .ThreeDimensionalViz.getDefaultTopicTree();\n\n  const topicTreeTopLevelGroups = getTopLevelGroupsFromTopicTree(topicTreeConfig);\n  const categorizedTopicNames: string[] = [];\n\n  const results = [];\n  topicTreeTopLevelGroups.forEach((group) => {\n    const selectedTopicNamesInGroup = group.items\n      .filter((item) => selectedTopicNamesSet.has(item.topicName))\n      .map(({ topicName }) => topicName);\n    // Only add group if there is at least one topic selected in this group\n\n    if (selectedTopicNamesInGroup.length > 0) {\n      categorizedTopicNames.push(...selectedTopicNamesInGroup);\n      results.push({\n        ...group,\n        visibilityByColumn: [true, true],\n        expanded: true,\n        items: topicItems.filter((item) => selectedTopicNamesInGroup.includes(item.topicName)),\n      });\n    }\n  });\n\n  // Add Uncategorized group if needed.\n  const uncategorizedTopicNames = difference(selectedTopicNames, categorizedTopicNames);\n  if (uncategorizedTopicNames.length) {\n    results.push(getDefaultNewGroupItemConfig(\"Uncategorized\", uncategorizedTopicNames));\n  }\n  return results;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport PencilIcon from \"@mdi/svg/svg/pencil.svg\";\nimport * as React from \"react\";\nimport { PolygonBuilder, Polygon } from \"regl-worldview\";\n\nimport Polygons from \"./Polygons\";\nimport ExpandingToolbar, { ToolGroup } from \"webviz-core/src/components/ExpandingToolbar\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { EDIT_FORMAT, type EditFormat } from \"webviz-core/src/components/ValidatedInput\";\nimport styles from \"webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\nexport const POLYGON_TAB_TYPE = \"Polygons\";\nexport type DrawingTabType = typeof POLYGON_TAB_TYPE;\nexport type Point2D = {| x: number, y: number |};\ntype Props = {\n  onSetPolygons: (polygons: Polygon[]) => void,\n  polygonBuilder: PolygonBuilder,\n  selectedPolygonEditFormat: EditFormat,\n  onSetDrawingTabType: (?DrawingTabType) => void,\n  defaultSelectedTab?: DrawingTabType, // for UI testing\n};\n\n// add more drawing shapes later, e.g. Grid, Axes, Crosshairs\nfunction DrawingTools({\n  defaultSelectedTab,\n  onSetDrawingTabType,\n  onSetPolygons,\n  polygonBuilder,\n  selectedPolygonEditFormat,\n}: Props) {\n  const [selectedTab, setSelectedTab] = React.useState<?DrawingTabType>(defaultSelectedTab);\n\n  return (\n    <ExpandingToolbar\n      tooltip=\"Drawing tools\"\n      icon={\n        <Icon style={{ color: selectedTab ? colors.accent : \"white\" }}>\n          <PencilIcon />\n        </Icon>\n      }\n      className={styles.buttons}\n      selectedTab={selectedTab}\n      onSelectTab={(newSelectedTab) => {\n        onSetDrawingTabType(newSelectedTab);\n        setSelectedTab(newSelectedTab);\n      }}>\n      <ToolGroup name={POLYGON_TAB_TYPE}>\n        <Polygons\n          onSetPolygons={onSetPolygons}\n          polygonBuilder={polygonBuilder}\n          selectedPolygonEditFormat={selectedPolygonEditFormat}\n        />\n      </ToolGroup>\n    </ExpandingToolbar>\n  );\n}\n\nDrawingTools.defaultProps = {\n  selectedPolygonEditFormat: EDIT_FORMAT.YAML,\n};\n\nexport default React.memo<Props>(DrawingTools);\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport yaml from \"js-yaml/dist/js-yaml\";\n\nexport default {\n  parse<T>(str: string): T {\n    return yaml.safeLoad(str);\n  },\n  stringify(obj: any, options: any = {}): string {\n    // do not quote 'y' and 'yes' for older yaml versions\n    return yaml\n      .safeDump(obj, { noCompatMode: true, ...options })\n      .replace(/^- - /gm, \"\\n- - \")\n      .trim();\n  },\n};\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport TextHighlight from \"./TextHighlight\";\nimport TextMiddleTruncate, { DEFAULT_END_TEXT_LENGTH } from \"./TextMiddleTruncate\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { SECOND_SOURCE_PREFIX } from \"webviz-core/src/util/globalConstants\";\n\nexport const STopicNameDisplay = styled.div`\n  display: inline-block;\n`;\n\nexport const SDisplayName = styled.div`\n  font-size: 13px;\n  line-height: 1.4;\n  margin-right: 4px;\n  word-break: break-word;\n  /* disallow selection to prevent shift + click from accidentally select */\n  user-select: none;\n  width: 100%;\n`;\n\nexport const SName = styled.div`\n  /* disallow selection to prevent shift + click from accidentally select */\n  user-select: none;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\ntype Props = {|\n  displayName: string,\n  isXSWidth: boolean,\n  maxWidth: number,\n  topicName: string,\n  searchText?: string,\n  style?: { [attr: string]: string | number },\n  tooltips?: React.Node[],\n|};\n\nexport default function NodeName({\n  displayName,\n  isXSWidth,\n  maxWidth,\n  topicName,\n  searchText,\n  style = {},\n  tooltips,\n}: Props) {\n  let targetStr = displayName || topicName;\n\n  if (searchText) {\n    let topicNameToShow = topicName;\n    const prefixedTopicName = `${SECOND_SOURCE_PREFIX}${topicName}`;\n\n    // Show feature topic if base topicName does not include searchText and it's still a match.\n    if (topicName && !topicName.includes(searchText) && prefixedTopicName.includes(searchText)) {\n      topicNameToShow = prefixedTopicName;\n      targetStr = topicNameToShow;\n    }\n\n    if (displayName && topicName && displayName !== topicName) {\n      targetStr = `${displayName} (${topicNameToShow})`;\n    }\n  }\n  const xsWidthElem =\n    isXSWidth &&\n    (tooltips ? (\n      <Tooltip contents={tooltips} placement=\"bottom\">\n        <SName>{targetStr}</SName>\n      </Tooltip>\n    ) : (\n      <SName>{targetStr}</SName>\n    ));\n\n  return (\n    <STopicNameDisplay style={style}>\n      <SDisplayName style={{ maxWidth }}>\n        {searchText ? (\n          <TextHighlight targetStr={targetStr} searchText={searchText} />\n        ) : (\n          <>\n            {isXSWidth ? (\n              xsWidthElem\n            ) : (\n              <TextMiddleTruncate\n                text={targetStr}\n                endTextLength={topicName ? topicName.split(\"/\").pop().length + 1 : DEFAULT_END_TEXT_LENGTH}\n                tooltips={tooltips}\n              />\n            )}\n          </>\n        )}\n      </SDisplayName>\n    </STopicNameDisplay>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport DotsVerticalIcon from \"@mdi/svg/svg/dots-vertical.svg\";\nimport React, { useCallback, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport type { SetCurrentEditingTopic, ToggleNodeByColumn } from \"./types\";\nimport ChildToggle from \"webviz-core/src/components/ChildToggle\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport KeyboardShortcut from \"webviz-core/src/components/KeyboardShortcut\";\nimport Menu, { Item } from \"webviz-core/src/components/Menu\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst DISABLED_STYLE = { cursor: \"not-allowed\", color: colors.TEXT_MUTED };\n\nconst SItemContent = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\ntype Props = {|\n  datatype?: string,\n  disableBaseColumn: boolean,\n  disableFeatureColumn: boolean,\n  hasFeatureColumn: boolean,\n  nodeKey: string,\n  setCurrentEditingTopic: SetCurrentEditingTopic,\n  toggleCheckAllAncestors: ToggleNodeByColumn,\n  toggleCheckAllDescendants: ToggleNodeByColumn,\n  topicName: string,\n|};\n\nexport const DOT_MENU_WIDTH = 18; // The width of the small icon.\n\nexport default function TreeNodeDotMenu({\n  datatype,\n  disableBaseColumn,\n  disableFeatureColumn,\n  hasFeatureColumn,\n  nodeKey,\n  setCurrentEditingTopic,\n  toggleCheckAllAncestors,\n  toggleCheckAllDescendants,\n  topicName,\n}: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const onToggle = useCallback((ev) => {\n    setIsOpen((prevIsOpen) => !prevIsOpen);\n  }, []);\n\n  return (\n    <ChildToggle position=\"below\" isOpen={isOpen} onToggle={onToggle} dataTest={`topic-row-menu-${topicName}`}>\n      <Icon small fade onClick={onToggle} style={{ padding: \"5px 0px\" }}>\n        <DotsVerticalIcon />\n      </Icon>\n      <Menu>\n        <Item\n          style={{ padding: \"0 12px\", ...(disableBaseColumn ? DISABLED_STYLE : undefined) }}\n          onClick={() => {\n            if (disableBaseColumn) {\n              return;\n            }\n            toggleCheckAllAncestors(nodeKey, 0);\n            setIsOpen(false);\n          }}>\n          <SItemContent>\n            <span style={{ paddingRight: 8 }}>Toggle ancestors</span>\n            <KeyboardShortcut keys={[\"Alt\", \"Enter\"]} />\n          </SItemContent>\n        </Item>\n        <Item\n          style={{ padding: \"0 12px\", ...(disableBaseColumn ? DISABLED_STYLE : undefined) }}\n          onClick={() => {\n            if (disableBaseColumn) {\n              return;\n            }\n            toggleCheckAllDescendants(nodeKey, 0);\n            setIsOpen(false);\n          }}>\n          <SItemContent>\n            <span style={{ paddingRight: 8 }}>Toggle descendants</span>\n            <KeyboardShortcut keys={[\"Shift\", \"Enter\"]} />\n          </SItemContent>\n        </Item>\n        {hasFeatureColumn && (\n          <>\n            <Item\n              style={disableFeatureColumn ? DISABLED_STYLE : {}}\n              onClick={() => {\n                if (disableFeatureColumn) {\n                  return;\n                }\n                toggleCheckAllAncestors(nodeKey, 1);\n                setIsOpen(false);\n              }}>\n              Toggle feature ancestors\n            </Item>\n            <Item\n              style={disableFeatureColumn ? DISABLED_STYLE : {}}\n              onClick={() => {\n                if (disableFeatureColumn) {\n                  return;\n                }\n                toggleCheckAllDescendants(nodeKey, 1);\n                setIsOpen(false);\n              }}>\n              Toggle feature descendants\n            </Item>\n          </>\n        )}\n        {topicName && (\n          <Item\n            onClick={() => {\n              clipboard.copy(topicName);\n              setIsOpen(false);\n            }}>\n            Copy topic name\n          </Item>\n        )}\n        {datatype && (\n          <Item\n            dataTest={`topic-row-menu-edit-settings-${topicName}`}\n            onClick={() => {\n              setCurrentEditingTopic({ name: topicName, datatype });\n              setIsOpen(false);\n            }}>\n            Edit topic settings\n          </Item>\n        )}\n      </Menu>\n    </ChildToggle>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { type Node } from \"react\";\nimport styled from \"styled-components\";\n\nimport { colors, textSize, rounded } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst SKeyboardShortcut = styled.div`\n  padding: 4px 0;\n  max-width: 400px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst SDescription = styled.div`\n  margin-right: 16px;\n`;\n\nconst SKeyWrapper = styled.div`\n  display: inline-flex;\n  flex: none;\n  color: ${colors.GRAY};\n  border: 1px solid ${colors.DARK9};\n  border-radius: ${rounded.SMALL};\n  font-size: ${textSize.SMALL};\n  font-weight: 500;\n  min-width: 20px;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst SKey = styled.kbd`\n  color: ${colors.GRAY};\n  padding: 0 3px;\n  font-size: 12px;\n  line-height: 1.5;\n  :not(:last-child) {\n    border-right: 1px solid ${colors.DARK9};\n  }\n`;\n\ntype Props = {\n  keys: Node[],\n  description?: string,\n  descriptionMaxWidth?: number,\n};\n\nexport default function KeyboardShortcut({ keys, description, descriptionMaxWidth }: Props) {\n  return (\n    <SKeyboardShortcut>\n      {description && (\n        <SDescription style={descriptionMaxWidth ? { width: descriptionMaxWidth } : {}}>{description}</SDescription>\n      )}\n      <span>\n        {keys.map((key, idx) => (\n          <SKeyWrapper key={idx} style={idx < keys.length - 1 ? { marginRight: 4 } : {}}>\n            <SKey>{key}</SKey>\n          </SKeyWrapper>\n        ))}\n      </span>\n    </SKeyboardShortcut>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport tinycolor from \"tinycolor2\";\n\nimport type { OccupancyGridMessage } from \"webviz-core/src/types/Messages\";\n\nexport const COLORS = {\n  BLACK: tinycolor(\"black\"),\n  RED: tinycolor(\"red\"),\n  PINK: tinycolor(\"pink\"),\n  LIME: tinycolor(\"lime\"),\n  CYAN: tinycolor(\"cyan\"),\n  WHITE: tinycolor(\"white\"),\n  AQUA: tinycolor(\"aqua\"),\n  BLUE: tinycolor(\"blue\"),\n  ORANGE: tinycolor(\"orange\"),\n  MAGENTA: tinycolor(\"magenta\"),\n  YELLOW: tinycolor(\"yellow\"),\n  GRAY: tinycolor(\"darkgray\"), // gray and darkgray are named reversed for some reason\n  DARKGRAY: tinycolor(\"gray\"), // gray and darkgray are named reversed for some reason\n  PURPLE: tinycolor(\"purple\"),\n};\n\nexport function setRgba(buffer: Uint8Array, index: number, color: tinycolor) {\n  const rgba255 = color.toRgb();\n  rgba255.a *= 255;\n  buffer[index] = rgba255.r;\n  buffer[index + 1] = rgba255.g;\n  buffer[index + 2] = rgba255.b;\n  buffer[index + 3] = rgba255.a;\n}\n\nexport const defaultMapPalette = (() => {\n  const buff = new Uint8Array(256 * 4);\n\n  // standard gray map palette values\n  for (let i = 0; i <= 100; i++) {\n    const t = 1 - i / 100;\n    const idx = i * 4;\n    setRgba(buff, idx, tinycolor.fromRatio({ r: t, g: t, b: t }));\n  }\n\n  // illegal positive values in green\n  for (let i = 101; i <= 127; i++) {\n    const idx = i * 4;\n    setRgba(buff, idx, tinycolor(\"lime\"));\n  }\n\n  // illegal negative (char) values\n  for (let i = 128; i <= 248; i++) {\n    const idx = i * 4;\n    const t = (i - 128) / (254 - 128);\n    setRgba(buff, idx, tinycolor.fromRatio({ r: t, g: 0.2, b: 0.6, a: Math.max(1 - t, 0.2) }));\n  }\n\n  // legal negative values\n  setRgba(buff, 255 * 4, COLORS.GRAY.setAlpha(0.5)); // -1 UNKNOWN\n  setRgba(buff, 254 * 4, COLORS.ORANGE.setAlpha(0.5)); // -2 UNDRIVEABLE\n  setRgba(buff, 253 * 4, COLORS.CYAN.setAlpha(0.5)); // -3 SIDEWALK\n  setRgba(buff, 252 * 4, COLORS.YELLOW.setAlpha(0.5)); // -4 UNOBSERVED\n  setRgba(buff, 101 * 4, COLORS.PURPLE.setAlpha(0.5)); // 101 UNOCCUPIED_NULL\n  setRgba(buff, 110 * 4, COLORS.PINK.setAlpha(0.5)); // 110 TRACKED_UNKNOWN_TO_UNOCCUPIED\n  setRgba(buff, 111 * 4, COLORS.LIME.setAlpha(0.5)); // 111 TRACKED_OCCUPIED_TO_UNOCCUPIED\n  setRgba(buff, 112 * 4, COLORS.AQUA.setAlpha(0.5)); // 112 TRACKED_OCCUPIED_TO_UNKNOWN\n\n  return buff;\n})();\n\n// convert a number array to a typed array\n// passing a typed array to regl is orders of magnitude\n// faster than passing a number[] and letting regl do the conversion\nfunction toTypedArray(data: $ReadOnlyArray<number> | Int8Array): Uint8Array {\n  if (data instanceof Int8Array) {\n    return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n  }\n  const result = new Uint8Array(data.length);\n  for (let i = 0; i < data.length; i++) {\n    result[i] = data[i];\n  }\n  return result;\n}\n\nclass TextureCacheEntry {\n  marker: OccupancyGridMessage;\n  texture: any;\n  // regl context\n  regl: any;\n\n  constructor(regl: any, marker: OccupancyGridMessage) {\n    this.marker = marker;\n    this.regl = regl;\n    const { info, data } = marker;\n\n    this.texture = regl.texture({\n      format: \"alpha\",\n      mipmap: false,\n      data: toTypedArray(data),\n      width: info.width,\n      height: info.height,\n    });\n  }\n\n  // get the texture for a marker\n  // if the marker is not the same reference\n  // generate a new texture, otherwise keep the old one\n  // uploading new texture data to the gpu is something\n  // you only want to do when required - it takes several milliseconds\n  getTexture(marker: OccupancyGridMessage) {\n    if (this.marker === marker) {\n      return this.texture;\n    }\n    this.marker = marker;\n    const { info, data } = marker;\n    this.texture = this.texture({\n      format: \"alpha\",\n      mipmap: false,\n      data: toTypedArray(data),\n      width: info.width,\n      height: info.height,\n    });\n    return this.texture;\n  }\n}\n\nexport class TextureCache {\n  store: { [string]: TextureCacheEntry } = {};\n  // regl context\n  regl: any;\n\n  constructor(regl: any) {\n    this.regl = regl;\n  }\n\n  // returns a regl texture for a given marker\n  get(marker: OccupancyGridMessage) {\n    const { name } = marker;\n    const item = this.store[name];\n    if (!item) {\n      // if the item is missing initialize a new entry\n      const entry = new TextureCacheEntry(this.regl, marker);\n      this.store[name] = entry;\n      return entry.texture;\n    }\n    return item.getTexture(marker);\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport DiagnosticsHistory, { type DiagnosticAutocompleteEntry } from \"./DiagnosticsHistory\";\nimport DiagnosticStatus from \"./DiagnosticStatus\";\nimport helpContent from \"./DiagnosticStatusPanel.help.md\";\nimport { getDiagnosticId, getDisplayName } from \"./util\";\nimport Autocomplete from \"webviz-core/src/components/Autocomplete\";\nimport EmptyState from \"webviz-core/src/components/EmptyState\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport TopicToRenderMenu from \"webviz-core/src/components/TopicToRenderMenu\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\nimport { DIAGNOSTIC_TOPIC } from \"webviz-core/src/util/globalConstants\";\n\nexport type Config = {\n  selectedHardwareId?: ?string,\n  selectedName?: ?string,\n  splitFraction?: number,\n  topicToRender: string,\n};\n\ntype Props = {\n  config: Config,\n  saveConfig: ($Shape<Config>) => void,\n  topics: Topic[],\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n};\n// component to display a single diagnostic status from list\nclass DiagnosticStatusPanel extends React.Component<Props> {\n  static panelType = \"DiagnosticStatusPanel\";\n  static defaultConfig: Config = { topicToRender: DIAGNOSTIC_TOPIC };\n\n  _onSelect = (value: string, entry: DiagnosticAutocompleteEntry, autocomplete: Autocomplete) => {\n    this.props.saveConfig({\n      selectedHardwareId: entry.hardware_id,\n      selectedName: entry.name,\n    });\n    autocomplete.blur();\n  };\n\n  renderTopicToRenderMenu = (topics) => {\n    const {\n      config: { topicToRender },\n      saveConfig,\n    } = this.props;\n    return (\n      <TopicToRenderMenu\n        topicToRender={topicToRender}\n        onChange={(newTopicToRender) => saveConfig({ topicToRender: newTopicToRender })}\n        topics={topics}\n        singleTopicDatatype={\"diagnostic_msgs/DiagnosticArray\"}\n        defaultTopicToRender={DIAGNOSTIC_TOPIC}\n      />\n    );\n  };\n\n  render() {\n    const { openSiblingPanel, config } = this.props;\n    const { selectedHardwareId, selectedName, splitFraction, topicToRender } = config;\n\n    let hasSelection = false;\n    let selectedId, selectedDisplayName;\n    if (selectedHardwareId != null && selectedName != null) {\n      hasSelection = true;\n      selectedId = getDiagnosticId({ hardware_id: selectedHardwareId, name: selectedName, level: 0, message: \"\" });\n      selectedDisplayName = hasSelection ? getDisplayName(selectedHardwareId, selectedName) : null;\n    }\n\n    return (\n      <Flex scroll scrollX col>\n        <DiagnosticsHistory topic={topicToRender}>\n          {(buffer) => {\n            const selectedItem = selectedId ? buffer.diagnosticsById.get(selectedId) : null;\n\n            return (\n              <>\n                <PanelToolbar\n                  floating\n                  helpContent={helpContent}\n                  additionalIcons={this.renderTopicToRenderMenu(this.props.topics)}>\n                  <Autocomplete\n                    placeholder={hasSelection ? selectedDisplayName : \"Select a diagnostic\"}\n                    items={buffer.sortedAutocompleteEntries}\n                    getItemText={(entry) => entry.displayName}\n                    getItemValue={(entry) => entry.id}\n                    onSelect={this._onSelect}\n                    selectedItem={selectedItem}\n                    inputStyle={{ height: \"100%\" }}\n                  />\n                </PanelToolbar>\n                {selectedItem ? (\n                  <DiagnosticStatus\n                    info={selectedItem}\n                    splitFraction={splitFraction}\n                    onChangeSplitFraction={(newSplitFraction) =>\n                      this.props.saveConfig({ splitFraction: newSplitFraction })\n                    }\n                    topicToRender={topicToRender}\n                    openSiblingPanel={openSiblingPanel}\n                  />\n                ) : selectedId ? (\n                  <EmptyState>\n                    Waiting for diagnostics from <code>{selectedDisplayName}</code>\n                  </EmptyState>\n                ) : (\n                  <EmptyState>No diagnostic node selected</EmptyState>\n                )}\n              </>\n            );\n          }}\n        </DiagnosticsHistory>\n      </Flex>\n    );\n  }\n}\n\nexport default hot(Panel<Config>(DiagnosticStatusPanel));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ChartLineVariantIcon from \"@mdi/svg/svg/chart-line-variant.svg\";\nimport DotsHorizontalIcon from \"@mdi/svg/svg/dots-horizontal.svg\";\nimport cx from \"classnames\";\nimport { clamp } from \"lodash\";\nimport * as React from \"react\";\nimport { createSelector } from \"reselect\";\nimport sanitizeHtml from \"sanitize-html\";\nimport styled from \"styled-components\";\n\nimport style from \"./DiagnosticStatus.module.scss\";\nimport { LEVEL_NAMES, type DiagnosticInfo, type KeyValue, type DiagnosticStatusMessage } from \"./util\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { openSiblingPlotPanel } from \"webviz-core/src/panels/Plot\";\nimport { openSiblingStateTransitionsPanel } from \"webviz-core/src/panels/StateTransitions\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\n\nconst MIN_SPLIT_FRACTION = 0.1;\n\ntype Props = {|\n  info: DiagnosticInfo,\n  splitFraction: number,\n  onChangeSplitFraction: ?(number) => void,\n  topicToRender: string,\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n|};\n\nconst ResizeHandle = styled.div.attrs(({ splitFraction }) => ({\n  style: { left: `${100 * splitFraction}%` },\n}))`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 12px;\n  margin-left: -6px;\n  cursor: col-resize;\n  :hover,\n  :active,\n  :focus {\n    outline: none;\n    ::after {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 6px;\n      margin-left: -2px;\n      width: 4px;\n      background-color: ${colors.divider};\n    }\n  }\n`;\n\nconst KeyValueTable = styled.table`\n  table-layout: fixed;\n  width: 100%;\n  line-height: 1.3em;\n  white-space: pre-line;\n  overflow-wrap: break-word;\n  text-align: left;\n  tr:nth-child(odd) {\n    background-color: #222;\n  }\n  td {\n    border: none;\n    padding: 1px 3px;\n  }\n  /* nested table styles */\n  table {\n    th {\n      font-weight: bold;\n    }\n  }\n`;\n\ntype FormattedKeyValue = {|\n  key: string,\n  keyHtml: ?{ __html: string },\n  value: string,\n  valueHtml: ?{ __html: string },\n|};\n\nconst allowedTags = [\n  // this comment forces the array onto multiple lines :)\n  \"b\",\n  \"br\",\n  \"center\",\n  \"code\",\n  \"em\",\n  \"font\",\n  \"i\",\n  \"strong\",\n  \"table\",\n  \"td\",\n  \"th\",\n  \"tr\",\n  \"tt\",\n  \"u\",\n];\n\nfunction sanitize(value: string): { __html: string } {\n  return {\n    __html: sanitizeHtml(value, {\n      allowedTags,\n      allowedAttributes: {\n        font: [\"color\", \"size\"],\n        td: [\"colspan\"],\n        th: [\"colspan\"],\n      },\n    }),\n  };\n}\n\n// preliminary check to avoid expensive operations when there is no html\nconst HAS_ANY_HTML = new RegExp(`<(${allowedTags.join(\"|\")})`);\n\nconst getFormattedKeyValues = createSelector(\n  (message: DiagnosticStatusMessage) => message,\n  (message: DiagnosticStatusMessage): FormattedKeyValue[] => {\n    return (message.values || []).map((kv: KeyValue) => {\n      return {\n        key: kv.key,\n        keyHtml: HAS_ANY_HTML.test(kv.key) ? sanitize(kv.key) : undefined,\n        value: kv.value,\n        valueHtml: HAS_ANY_HTML.test(kv.value) ? sanitize(kv.value) : undefined,\n      };\n    });\n  }\n);\n\n// component to display a single diagnostic status\nclass DiagnosticStatus extends React.Component<Props, *> {\n  state = {\n    collapsedSections: (new Set(): Set<string>),\n  };\n\n  _tableRef = React.createRef<HTMLTableElement>();\n\n  static defaultProps = {\n    splitFraction: 0.5,\n  };\n\n  onClickSection(name: string) {\n    const collapsedSections = new Set(this.state.collapsedSections);\n    if (collapsedSections.has(name)) {\n      collapsedSections.delete(name);\n    } else {\n      collapsedSections.add(name);\n    }\n    this.setState({ collapsedSections });\n  }\n\n  _resizeMouseDown = (event: SyntheticMouseEvent<Element>) => {\n    event.preventDefault();\n    window.addEventListener(\"mousemove\", this._resizeMouseMove);\n    window.addEventListener(\"mouseup\", this._resizeMouseUp);\n  };\n\n  _resizeMouseUp = () => {\n    window.removeEventListener(\"mousemove\", this._resizeMouseMove);\n  };\n\n  _resizeMouseMove = (event: SyntheticMouseEvent<Element>) => {\n    const {\n      _tableRef,\n      props: { onChangeSplitFraction },\n    } = this;\n\n    if (!_tableRef.current || !onChangeSplitFraction) {\n      return;\n    }\n\n    const { left, right } = _tableRef.current.getBoundingClientRect();\n    const splitFraction = clamp((event.clientX - left) / (right - left), MIN_SPLIT_FRACTION, 1 - MIN_SPLIT_FRACTION);\n    onChangeSplitFraction(splitFraction);\n  };\n\n  componentWillUnmount() {\n    window.removeEventListener(\"mousemove\", this._resizeMouseMove);\n    window.removeEventListener(\"mouseup\", this._resizeMouseUp);\n  }\n\n  _renderKeyValueCell(cls: string, html: ?{ __html: string }, str: string, openPlotPanelIconElem?: React.Node) {\n    if (html) {\n      return <td className={style.valueCell} dangerouslySetInnerHTML={html} />;\n    }\n    return (\n      <td className={style.valueCell}>\n        {str || \"\\xa0\"}\n        {openPlotPanelIconElem}\n      </td>\n    );\n  }\n\n  _renderKeyValueSections = (values: FormattedKeyValue[]): React.Node => {\n    const { info, topicToRender, openSiblingPanel } = this.props;\n    let inCollapsedSection = false;\n    let ellipsisShown = false;\n    return values.map((kv, idx) => {\n      const keyIsSection = !kv.value && (kv.key.startsWith(\"==\") || kv.key.startsWith(\"--\"));\n      const valIsSection = !kv.key && (kv.value.startsWith(\"==\") || kv.value.startsWith(\"--\"));\n      if (keyIsSection || valIsSection) {\n        const name = kv.key + kv.value;\n        inCollapsedSection = this.state.collapsedSections.has(name);\n        ellipsisShown = false;\n        return (\n          <tr key={idx} className={style.section} onClick={() => this.onClickSection(name)}>\n            <th colSpan={2}>{name}</th>\n          </tr>\n        );\n      } else if (inCollapsedSection) {\n        if (ellipsisShown) {\n          return null;\n        }\n        ellipsisShown = true;\n        return (\n          <tr key={idx}>\n            <td colSpan={2} className={style.collapsedSection}>\n              &hellip;\n            </td>\n          </tr>\n        );\n      }\n      // We need both `hardware_id` and `name`; one of them is not enough. That's also how we identify\n      // what to show in this very panel; see `selectedHardwareId` AND `selectedName` in the config.\n      const valuePath = `${topicToRender}.status[:]{hardware_id==\"${info.status.hardware_id}\"}{name==\"${\n        info.status.name\n      }\"}.values[:]{key==\"${kv.key}\"}.value`;\n      let openPlotPanelIconElem = null;\n      if (kv.value && kv.value.length > 0) {\n        openPlotPanelIconElem = !isNaN(Number(kv.value)) ? (\n          <Icon\n            fade\n            dataTest=\"open-plot-icon\"\n            className={style.plotIcon}\n            onClick={() => openSiblingPlotPanel(openSiblingPanel, valuePath)}\n            tooltip=\"Line chart\">\n            <ChartLineVariantIcon />\n          </Icon>\n        ) : (\n          <Icon\n            fade\n            className={style.stateTransitionsIcon}\n            onClick={() => openSiblingStateTransitionsPanel(openSiblingPanel, valuePath)}\n            tooltip=\"State Transitions\">\n            <DotsHorizontalIcon />\n          </Icon>\n        );\n      }\n      return (\n        <tr key={idx} className={style.row}>\n          {this._renderKeyValueCell(style.keyCell, kv.keyHtml, kv.key)}\n          {this._renderKeyValueCell(style.valueCell, kv.valueHtml, kv.value, openPlotPanelIconElem)}\n        </tr>\n      );\n    });\n  };\n\n  render() {\n    const {\n      info: { status, displayName },\n      splitFraction,\n      openSiblingPanel,\n      topicToRender,\n    } = this.props;\n    const statusClass = style[`status-${LEVEL_NAMES[status.level] || \"unknown\"}`];\n\n    return (\n      <Flex scroll>\n        {/* Additional container div allows the resize handle height to stretch to match the table height */}\n        <div style={{ position: \"relative\", height: \"100%\" }}>\n          {/* use data attribute as a hook for use in screenshot tests */}\n          <ResizeHandle data-test-resizehandle splitFraction={splitFraction} onMouseDown={this._resizeMouseDown} />\n          <KeyValueTable ref={this._tableRef}>\n            <tbody>\n              {/* Use a dummy row to fix the column widths */}\n              <tr style={{ height: 0 }}>\n                <td style={{ padding: 0, width: `${100 * splitFraction}%`, borderRight: \"none\" }} />\n                <td style={{ padding: 0, borderLeft: \"none\" }} />\n              </tr>\n              <tr className={cx(style.section, statusClass)}>\n                <Tooltip\n                  placement=\"below\"\n                  contents={\n                    <div>\n                      Hardware ID: <code>{status.hardware_id}</code>\n                      <br />\n                      Name: <code>{status.name}</code>\n                    </div>\n                  }>\n                  <th colSpan={2}>{displayName}</th>\n                </Tooltip>\n              </tr>\n              <tr className={cx(style.row, statusClass)}>\n                <td colSpan={2}>\n                  {status.message}{\" \"}\n                  <Icon\n                    fade\n                    className={style.stateTransitionsIcon}\n                    onClick={() =>\n                      openSiblingStateTransitionsPanel(\n                        openSiblingPanel,\n                        `${topicToRender}.status[:]{hardware_id==\"${status.hardware_id}\"}{name==\"${\n                          status.name\n                        }\"}.message`\n                      )\n                    }\n                    tooltip=\"State Transitions\">\n                    <DotsHorizontalIcon />\n                  </Icon>\n                </td>\n              </tr>\n              {this._renderKeyValueSections(getFormattedKeyValues(status))}\n            </tbody>\n          </KeyValueTable>\n        </div>\n      </Flex>\n    );\n  }\n}\n\nexport default DiagnosticStatus;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./DiagnosticStatus.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./DiagnosticStatus.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./DiagnosticStatus.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3f8jg--name {\\n  font-weight: bold; }\\n\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section th {\\n  color: #29bee7;\\n  text-align: center;\\n  font-size: 1.2em;\\n  padding: 4px;\\n  cursor: pointer;\\n  border: none; }\\n\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-8eud5--status-ok.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section th,\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-8eud5--status-ok td {\\n  color: #05d27d; }\\n\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-24pnd--status-warn.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section th,\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-24pnd--status-warn td {\\n  color: #ccb862; }\\n\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-321rk--status-error.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section th,\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-321rk--status-error td {\\n  color: #ff7c96; }\\n\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-4zzfk--status-stale.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section th,\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-4zzfk--status-stale td {\\n  color: rgba(247, 247, 243, 0.3); }\\n\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3tyzc--status-unknown.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section th,\\ntr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3tyzc--status-unknown td {\\n  color: #ff7c96; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3cmpn--keyCell {\\n  padding-right: 5px; }\\n\\ntd.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-4mnj9--collapsedSection {\\n  text-align: center;\\n  color: #ff7c96; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2hxg7--plotIcon,\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-28kqt--stateTransitionsIcon {\\n  color: white;\\n  margin-left: 4px;\\n  visibility: hidden; }\\n  tr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2dcvn--row:hover .packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2hxg7--plotIcon, tr.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2dcvn--row:hover\\n  .packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-28kqt--stateTransitionsIcon {\\n    visibility: visible; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2hxg7--plotIcon > svg {\\n  vertical-align: -1px; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-28kqt--stateTransitionsIcon > svg {\\n  vertical-align: -2px; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticStatus.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAQA;EACE,kBAAiB,EAClB;;AAED;EACE,eCUiB;EDTjB,mBAAkB;EAClB,iBAAgB;EAChB,aAAY;EACZ,gBAAe;EACf,aAAY,EACb;;AAED;;EAGI,eCMW,EDLZ;;AAEH;;EAGI,eCSY,EDRb;;AAEH;;EAGI,eCIS,EDHV;;AAEH;;EAGI,gCC1BiC,ED2BlC;;AAEH;;EAGI,eCRS,EDSV;;AAGH;EACE,mBAAkB,EACnB;;AAED;EACE,mBAAkB;EAClB,eClBW,EDmBZ;;AAED;;EAEE,aAAY;EACZ,iBAAgB;EAChB,mBAAkB,EAKnB;EAHC;;IACE,oBAAmB,EACpB;;AAGH;EACE,qBAAoB,EACrB;;AAED;EACE,qBAAoB,EACrB\",\"file\":\"DiagnosticStatus.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n.name {\\n  font-weight: bold;\\n}\\n\\ntr.section th {\\n  color: $highlight;\\n  text-align: center;\\n  font-size: 1.2em;\\n  padding: 4px;\\n  cursor: pointer;\\n  border: none;\\n}\\n\\ntr.status-ok {\\n  &.section th,\\n  td {\\n    color: $green;\\n  }\\n}\\ntr.status-warn {\\n  &.section th,\\n  td {\\n    color: $orange;\\n  }\\n}\\ntr.status-error {\\n  &.section th,\\n  td {\\n    color: $red;\\n  }\\n}\\ntr.status-stale {\\n  &.section th,\\n  td {\\n    color: $text-muted;\\n  }\\n}\\ntr.status-unknown {\\n  &.section th,\\n  td {\\n    color: $red;\\n  }\\n}\\n\\n.keyCell {\\n  padding-right: 5px;\\n}\\n\\ntd.collapsedSection {\\n  text-align: center;\\n  color: $red;\\n}\\n\\n.plotIcon,\\n.stateTransitionsIcon {\\n  color: white;\\n  margin-left: 4px;\\n  visibility: hidden;\\n\\n  tr.row:hover & {\\n    visibility: visible;\\n  }\\n}\\n\\n.plotIcon > svg {\\n  vertical-align: -1px;\\n}\\n\\n.stateTransitionsIcon > svg {\\n  vertical-align: -2px;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"name\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3f8jg--name\",\n\t\"section\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2xgqc--section\",\n\t\"status-ok\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-8eud5--status-ok\",\n\t\"status-warn\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-24pnd--status-warn\",\n\t\"status-error\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-321rk--status-error\",\n\t\"status-stale\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-4zzfk--status-stale\",\n\t\"status-unknown\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3tyzc--status-unknown\",\n\t\"keyCell\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-3cmpn--keyCell\",\n\t\"collapsedSection\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-4mnj9--collapsedSection\",\n\t\"plotIcon\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2hxg7--plotIcon\",\n\t\"stateTransitionsIcon\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-28kqt--stateTransitionsIcon\",\n\t\"row\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticStatus-module-2dcvn--row\"\n};","module.exports = \"# Plot\\n\\nPlots arbitrary values from topics, similar to [rqt_plot](http://wiki.ros.org/rqt_plot).\\n\\nThe values plotted are specified through Webviz's [message path syntax](/help/message-path-syntax).\\n\\nIn the options menu, you can set a minimum and maximum Y-value. By default, the plot will use those bounds unless the data you're looking at extends above the max Y-value or below the min Y-value; in those cases it will automatically expand. If you want to disable this behavior and force the plot to use the exact minimum and maximum Y-values entered, you can \\\"lock\\\" the y-axis in the options menu as well.\\n\\nThere are 2 possible values for the x-axis - by the message's timestamp or by the message values' respective array indices.\\n\\n## Timestamp as X-Axis\\n\\nWhen you select to plot against a timestamp x-axis (default), you can specify whether the timestamp is taken from either the time the message was received, or the `message.header.stamp` field of the topic, in the dropdown displayed next to each line topic. All Plot panels' timestamped x-axes are kept in sync for easy comparison.\\n\\nWhen you select multiple values (by using a slice) the plot turns into a scatter plot at each timestamp tick.\\n\\nYou can also enter an arbitrary number, which will add a horizontal line at that y-value.\\n\\nTo take the derivative of a value (change per second), use the special `.@derivative` modifier. This does not work with scatter plots (when using slices).\\n\\n## Array Index as X-Axis\\n\\nGo into the Plot panel's settings to change your x-axis from being the messages' timestamps to being the message values' array indices. In this mode, if you add message path `/some_topic.some_array` as a new line in the plot, the plot will chart that array's values against their indices. For example, if `/some_topic.some_array` contained the values `[5, 10, 15]`, the resulting points on the chart would be `[0, 5]`, `[1, 10]`, and `[2, 15]`.\\n\\n## User Interactions\\n\\nYou can zoom by scrolling, and pan by dragging. Double-click to reset. To scroll in only the vertical direction (no horizontal scrolling), you can hold the `v` key while scrolling, and to scroll in only the horizontal direction you can hold the `h` key while scrolling.\\n\"","// Generated automatically by nearley, version unknown\n// http://github.com/Hardmath123/nearley\n(function () {\nfunction id(x) { return x[0]; }\nvar grammar = {\n    Lexer: undefined,\n    ParserRules: [\n    {\"name\": \"main$ebnf$1\", \"symbols\": [\"messagePath\"], \"postprocess\": id},\n    {\"name\": \"main$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"main$ebnf$2\", \"symbols\": [\"modifier\"], \"postprocess\": id},\n    {\"name\": \"main$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"main\", \"symbols\": [\"topicName\", \"main$ebnf$1\", \"main$ebnf$2\"], \"postprocess\": (d) => ({ topicName: d[0], messagePath: d[1] || [], modifier: d[2] })},\n    {\"name\": \"id$ebnf$1\", \"symbols\": [/[a-zA-Z0-9_]/]},\n    {\"name\": \"id$ebnf$1\", \"symbols\": [\"id$ebnf$1\", /[a-zA-Z0-9_]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"id\", \"symbols\": [\"id$ebnf$1\"], \"postprocess\": (d) => d[0].join(\"\")},\n    {\"name\": \"integer$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"integer$ebnf$1\", \"symbols\": [\"integer$ebnf$1\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"integer\", \"symbols\": [\"integer$ebnf$1\"], \"postprocess\": (d) => ({ value: parseInt(d[0].join(\"\")), repr: d[0].join(\"\") })},\n    {\"name\": \"integer$ebnf$2\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"integer$ebnf$2\", \"symbols\": [\"integer$ebnf$2\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"integer\", \"symbols\": [{\"literal\":\"-\"}, \"integer$ebnf$2\"], \"postprocess\": (d) => ({ value: -parseInt(d[1].join(\"\")), repr: `-${d[1].join(\"\")}` })},\n    {\"name\": \"string$ebnf$1\", \"symbols\": []},\n    {\"name\": \"string$ebnf$1\", \"symbols\": [\"string$ebnf$1\", /[^']/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"string\", \"symbols\": [{\"literal\":\"'\"}, \"string$ebnf$1\", {\"literal\":\"'\"}], \"postprocess\": (d) => ({ value: d[1].join(\"\"), repr: `'${d[1].join(\"\")}'` })},\n    {\"name\": \"string$ebnf$2\", \"symbols\": []},\n    {\"name\": \"string$ebnf$2\", \"symbols\": [\"string$ebnf$2\", /[^\"]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"string\", \"symbols\": [{\"literal\":\"\\\"\"}, \"string$ebnf$2\", {\"literal\":\"\\\"\"}], \"postprocess\": (d) => ({ value: d[1].join(\"\"), repr: `\"${d[1].join(\"\")}\"` })},\n    {\"name\": \"variable$ebnf$1\", \"symbols\": [\"id\"], \"postprocess\": id},\n    {\"name\": \"variable$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"variable\", \"symbols\": [{\"literal\":\"$\"}, \"variable$ebnf$1\"], \"postprocess\": (d, loc) => ({ value: {variableName: d[1] || \"\", startLoc: loc }, repr: `$${d[1] || \"\"}` })},\n    {\"name\": \"value\", \"symbols\": [\"integer\"], \"postprocess\": (d) => d[0]},\n    {\"name\": \"value\", \"symbols\": [\"string\"], \"postprocess\": (d) => d[0]},\n    {\"name\": \"value$string$1\", \"symbols\": [{\"literal\":\"t\"}, {\"literal\":\"r\"}, {\"literal\":\"u\"}, {\"literal\":\"e\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"value\", \"symbols\": [\"value$string$1\"], \"postprocess\": (d) => ({ value: true, repr: \"true\" })},\n    {\"name\": \"value$string$2\", \"symbols\": [{\"literal\":\"f\"}, {\"literal\":\"a\"}, {\"literal\":\"l\"}, {\"literal\":\"s\"}, {\"literal\":\"e\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"value\", \"symbols\": [\"value$string$2\"], \"postprocess\": (d) => ({ value: false, repr: \"false\" })},\n    {\"name\": \"value\", \"symbols\": [\"variable\"], \"postprocess\": (d) => d[0]},\n    {\"name\": \"topicName$ebnf$1\", \"symbols\": [\"slashID\"]},\n    {\"name\": \"topicName$ebnf$1\", \"symbols\": [\"topicName$ebnf$1\", \"slashID\"], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"topicName\", \"symbols\": [\"topicName$ebnf$1\"], \"postprocess\": (d) => d[0].join(\"\")},\n    {\"name\": \"slashID$ebnf$1\", \"symbols\": [\"id\"], \"postprocess\": id},\n    {\"name\": \"slashID$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"slashID\", \"symbols\": [{\"literal\":\"/\"}, \"slashID$ebnf$1\"], \"postprocess\": (d) => d.join(\"\")},\n    {\"name\": \"messagePath$ebnf$1\", \"symbols\": []},\n    {\"name\": \"messagePath$ebnf$1\", \"symbols\": [\"messagePath$ebnf$1\", \"messagePathElement\"], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"messagePath$ebnf$2\", \"symbols\": [{\"literal\":\".\"}], \"postprocess\": id},\n    {\"name\": \"messagePath$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"messagePath\", \"symbols\": [\"messagePath$ebnf$1\", \"messagePath$ebnf$2\"], \"postprocess\": (d) => d[0].reduce((acc, arr) => acc.concat(arr), []).concat(d[1] ? [{ type: \"name\", name: \"\" }] : [])},\n    {\"name\": \"messagePathElement$ebnf$1\", \"symbols\": [\"slice\"], \"postprocess\": id},\n    {\"name\": \"messagePathElement$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"messagePathElement$ebnf$2\", \"symbols\": [\"filter\"], \"postprocess\": id},\n    {\"name\": \"messagePathElement$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"messagePathElement\", \"symbols\": [{\"literal\":\".\"}, \"name\", \"messagePathElement$ebnf$1\", \"messagePathElement$ebnf$2\"], \"postprocess\": (d) => [d[1], d[2], d[3]].filter(x => x !== null)},\n    {\"name\": \"messagePathElement\", \"symbols\": [\"filter\"], \"postprocess\": id},\n    {\"name\": \"name\", \"symbols\": [\"id\"], \"postprocess\": (d) => ({ type: \"name\", name: d[0] })},\n    {\"name\": \"sliceVal\", \"symbols\": [\"integer\"], \"postprocess\": (d) => (d[0].value)},\n    {\"name\": \"sliceVal\", \"symbols\": [\"variable\"], \"postprocess\": (d) => (d[0].value)},\n    {\"name\": \"slice\", \"symbols\": [{\"literal\":\"[\"}, \"sliceVal\", {\"literal\":\"]\"}], \"postprocess\": (d) => ({ type: \"slice\", start: d[1], end: d[1] })},\n    {\"name\": \"slice$ebnf$1\", \"symbols\": [\"sliceVal\"], \"postprocess\": id},\n    {\"name\": \"slice$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"slice$ebnf$2\", \"symbols\": [\"sliceVal\"], \"postprocess\": id},\n    {\"name\": \"slice$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"slice\", \"symbols\": [{\"literal\":\"[\"}, \"slice$ebnf$1\", {\"literal\":\":\"}, \"slice$ebnf$2\", {\"literal\":\"]\"}], \"postprocess\": (d) => ({ type: \"slice\", start: d[1] === null ? 0 : d[1], end: d[3] === null ? Infinity : d[3] })},\n    {\"name\": \"simplePath$ebnf$1\", \"symbols\": []},\n    {\"name\": \"simplePath$ebnf$1$subexpression$1\", \"symbols\": [{\"literal\":\".\"}, \"id\"]},\n    {\"name\": \"simplePath$ebnf$1\", \"symbols\": [\"simplePath$ebnf$1\", \"simplePath$ebnf$1$subexpression$1\"], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"simplePath\", \"symbols\": [\"id\", \"simplePath$ebnf$1\"], \"postprocess\": (d) => [d[0]].concat(d[1].map((d) => d[1]))},\n    {\"name\": \"filter$ebnf$1\", \"symbols\": [\"simplePath\"], \"postprocess\": id},\n    {\"name\": \"filter$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"filter\", \"symbols\": [{\"literal\":\"{\"}, \"filter$ebnf$1\", {\"literal\":\"}\"}], \"postprocess\": \n        (d, loc) => ({\n          type: \"filter\",\n          path: d[1] || [],\n          value: undefined,\n          nameLoc: loc+1,\n          valueLoc: loc+1,\n          repr: (d[1] || []).join(\".\"),\n        })\n                    },\n    {\"name\": \"filter$ebnf$2\", \"symbols\": [\"simplePath\"], \"postprocess\": id},\n    {\"name\": \"filter$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"filter$string$1\", \"symbols\": [{\"literal\":\"=\"}, {\"literal\":\"=\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"filter\", \"symbols\": [{\"literal\":\"{\"}, \"filter$ebnf$2\", \"filter$string$1\", \"value\", {\"literal\":\"}\"}], \"postprocess\": \n        (d, loc) => ({\n          type: \"filter\",\n          path: d[1] || [],\n          value: d[3].value,\n          nameLoc: loc+1,\n          valueLoc: loc+1+(d[1] || []).join(\".\").length+d[2].length,\n          repr: `${(d[1] || []).join(\".\")}==${d[3].repr}`,\n        })\n                    },\n    {\"name\": \"modifier$string$1\", \"symbols\": [{\"literal\":\".\"}, {\"literal\":\"@\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"modifier$ebnf$1\", \"symbols\": [\"id\"], \"postprocess\": id},\n    {\"name\": \"modifier$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"modifier\", \"symbols\": [\"modifier$string$1\", \"modifier$ebnf$1\"], \"postprocess\": (d) => d[1] || \"\"}\n]\n  , ParserStart: \"main\"\n}\nif (typeof module !== 'undefined'&& typeof module.exports !== 'undefined') {\n   module.exports = grammar;\n} else {\n   window.grammar = grammar;\n}\n})();\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nconst RosPrimitives = {\n  bool: null,\n  int8: null,\n  uint8: null,\n  int16: null,\n  uint16: null,\n  int32: null,\n  uint32: null,\n  int64: null,\n  uint64: null,\n  float32: null,\n  float64: null,\n  string: null,\n  time: null,\n  duration: null,\n};\n\nexport type RosPrimitive = $Keys<typeof RosPrimitives>;\nexport const rosPrimitives: RosPrimitive[] = Object.keys(RosPrimitives);\n\nexport type MessagePathFilter = {|\n  type: \"filter\",\n  path: string[],\n  value: void | number | string | {| variableName: string, startLoc: number |},\n  nameLoc: number,\n  valueLoc: number,\n  repr: string, // the original string representation of the filter\n|};\n\n// A parsed version of paths.\nexport type MessagePathPart =\n  | {| type: \"name\", name: string |}\n  | {|\n      type: \"slice\",\n      start: number | {| variableName: string, startLoc: number |},\n      end: number | {| variableName: string, startLoc: number |},\n    |}\n  | MessagePathFilter;\n\nexport type RosPath = {|\n  topicName: string,\n  messagePath: MessagePathPart[],\n  modifier: ?string,\n|};\n\n// \"Structure items\" are a more useful version of `datatypes`. They can be\n// easily traversed to either validate message paths or generate message paths.\nexport type MessagePathStructureItemMessage = {|\n  structureType: \"message\",\n  nextByName: { [string]: MessagePathStructureItem }, // eslint-disable-line no-use-before-define\n  datatype: string,\n|};\ntype MessagePathStructureItemArray = {|\n  structureType: \"array\",\n  next: MessagePathStructureItem, // eslint-disable-line no-use-before-define\n  datatype: string,\n|};\ntype MessagePathStructureItemPrimitive = {|\n  structureType: \"primitive\",\n  primitiveType: RosPrimitive,\n  datatype: string,\n|};\nexport type MessagePathStructureItem =\n  | MessagePathStructureItemMessage\n  | MessagePathStructureItemArray\n  | MessagePathStructureItemPrimitive;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Panel.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Panel.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Panel.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-Panel-module-32r84--root {\\n  z-index: 1;\\n  background-color: #1a1a1f;\\n  position: relative; }\\n\\n.packages-webviz-core-src-components-Panel-module-4c19m--rootFullScreen {\\n  position: fixed;\\n  z-index: 100;\\n  border: 4px solid rgba(110, 81, 238, 0.3);\\n  top: 36px;\\n  left: 0;\\n  right: 0;\\n  bottom: 44px; }\\n\\n.packages-webviz-core-src-components-Panel-module-psm4f--notClickable {\\n  position: fixed;\\n  z-index: 100;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  height: 36px;\\n  opacity: 0;\\n  cursor: not-allowed; }\\n\\n.packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay,\\n.packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay,\\n.packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection {\\n  cursor: pointer;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 100000;\\n  display: none;\\n  -ms-flex-direction: column;\\n      flex-direction: column;\\n  -ms-flex-pack: start;\\n      justify-content: flex-start;\\n  -ms-flex-align: end;\\n      align-items: flex-end;\\n  font-size: 14px;\\n  padding-top: 24px; }\\n  .packages-webviz-core-src-components-Panel-module-32r84--root:hover > .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay, .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay.hoverForScreenshot, .packages-webviz-core-src-components-Panel-module-32r84--root:hover >\\n  .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay,\\n  .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay.hoverForScreenshot, .packages-webviz-core-src-components-Panel-module-32r84--root:hover >\\n  .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection,\\n  .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection.hoverForScreenshot {\\n    background-color: rgba(110, 81, 238, 0.15);\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-align: center;\\n        align-items: center;\\n    -ms-flex-pack: center;\\n        justify-content: center;\\n    -ms-flex-wrap: wrap;\\n        flex-wrap: wrap; }\\n  .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay div,\\n  .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay div,\\n  .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection div {\\n    width: 100%;\\n    padding: 6px 0;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-align: center;\\n        align-items: center;\\n    -ms-flex-pack: center;\\n        justify-content: center;\\n    -ms-flex-wrap: wrap;\\n        flex-wrap: wrap; }\\n  .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay svg,\\n  .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay svg,\\n  .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection svg {\\n    margin-right: 4px;\\n    width: 24px;\\n    height: 24px;\\n    fill: white; }\\n  .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay button,\\n  .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay button,\\n  .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection button {\\n    width: 72px;\\n    height: 72px;\\n    margin: 4px;\\n    -ms-flex: none;\\n        flex: none;\\n    font-size: 14px;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-direction: column;\\n        flex-direction: column;\\n    -ms-flex-align: center;\\n        align-items: center;\\n    -ms-flex-pack: center;\\n        justify-content: center;\\n    background: rgba(110, 81, 238, 0.5); }\\n    .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay button svg,\\n    .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay button svg,\\n    .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection button svg {\\n      margin: 0 0 6px; }\\n    .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay button:not(.disabled):hover,\\n    .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay button:not(.disabled):hover,\\n    .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection button:not(.disabled):hover {\\n      background: rgba(110, 81, 238, 0.8); }\\n  .packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay p,\\n  .packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay p,\\n  .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection p {\\n    font-size: 12px;\\n    color: rgba(247, 247, 243, 0.3); }\\n\\n.packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection {\\n  padding: 10px; }\\n  .packages-webviz-core-src-components-Panel-module-32r84--root:hover .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection, .packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection.hoverForScreenshot {\\n    background-color: rgba(45, 45, 51, 0.7); }\\n\\n.packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay button {\\n  width: 145px;\\n  height: 40px;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-direction: row;\\n      flex-direction: row;\\n  -ms-flex-pack: justify;\\n      justify-content: space-between; }\\n\\n.packages-webviz-core-src-components-Panel-module-8yy8w--exitFullScreen {\\n  position: fixed;\\n  top: 75px;\\n  right: 8px;\\n  z-index: 102;\\n  opacity: 1;\\n  background-color: #2d2c33;\\n  display: none; }\\n  .packages-webviz-core-src-components-Panel-module-32r84--root:hover .packages-webviz-core-src-components-Panel-module-8yy8w--exitFullScreen {\\n    display: block; }\\n  .packages-webviz-core-src-components-Panel-module-8yy8w--exitFullScreen.hoverForScreenshot {\\n    display: block; }\\n  .packages-webviz-core-src-components-Panel-module-8yy8w--exitFullScreen svg {\\n    width: 16px;\\n    height: 16px;\\n    fill: white;\\n    float: left; }\\n  .packages-webviz-core-src-components-Panel-module-8yy8w--exitFullScreen span {\\n    float: right;\\n    padding-left: 3px; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/Panel.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/variables.scss\"],\"names\":[],\"mappings\":\"AAGA;EACE,WAAU;EACV,0BC8BwB;ED7BxB,mBAAkB,EACnB;;AAED;EACE,gBAAe;EACf,aAAY;EACZ,0CAAyC;EACzC,UEbiB;EFcjB,QAAO;EACP,SAAQ;EACR,aEf0B,EFgB3B;;AAED;EACE,gBAAe;EACf,aAAY;EACZ,OAAM;EACN,QAAO;EACP,SAAQ;EACR,aEzBiB;EF0BjB,WAAU;EACV,oBAAmB,EACpB;;AAED;;;EAGE,gBAAe;EACf,mBAAkB;EAClB,OAAM;EACN,QAAO;EACP,SAAQ;EACR,UAAS;EACT,gBAAe;EACf,cAAa;EAYb,2BAAsB;MAAtB,uBAAsB;EACtB,qBAA2B;MAA3B,4BAA2B;EAC3B,oBAAqB;MAArB,sBAAqB;EACrB,gBAAe;EACf,kBAAiB,EA0ClB;EAxDC;;;;;IAGE,2CAA0C;IAC1C,qBAAa;IAAb,cAAa;IACb,uBAAmB;QAAnB,oBAAmB;IACnB,sBAAuB;QAAvB,wBAAuB;IACvB,oBAAe;QAAf,gBAAe,EAChB;EApBH;;;IA6BI,YAAW;IACX,eAAc;IACd,qBAAa;IAAb,cAAa;IACb,uBAAmB;QAAnB,oBAAmB;IACnB,sBAAuB;QAAvB,wBAAuB;IACvB,oBAAe;QAAf,gBAAe,EAChB;EAnCH;;;IAsCI,kBAAiB;IACjB,YAAW;IACX,aAAY;IACZ,YAAW,EACZ;EA1CH;;;IA6CI,YAAW;IACX,aAAY;IACZ,YAAW;IACX,eAAU;QAAV,WAAU;IACV,gBAAe;IACf,qBAAa;IAAb,cAAa;IACb,2BAAsB;QAAtB,uBAAsB;IACtB,uBAAmB;QAAnB,oBAAmB;IACnB,sBAAuB;QAAvB,wBAAuB;IACvB,oCAAmC,EAQpC;IA9DH;;;MAwDM,gBAAe,EAChB;IAzDL;;;MA4DM,oCAAmC,EACpC;EA7DL;;;IAiEI,gBAAe;IACf,gCChFiC,EDiFlC;;AAGH;EACE,cAAa,EAOd;EALC;IAGE,wCAAuC,EACxC;;AAGH;EACE,aAAY;EACZ,aAAY;EACZ,qBAAa;EAAb,cAAa;EACb,wBAAmB;MAAnB,oBAAmB;EACnB,uBAA8B;MAA9B,+BAA8B,EAC/B;;AAED;EACE,gBAAe;EACf,UAAS;EACT,WAAU;EACV,aAAY;EACZ,WAAU;EACV,0BCvFe;EDwFf,cAAa,EAiBd;EAhBC;IACE,eAAc,EACf;EAVH;IAYI,eAAc,EACf;EAbH;IAeI,YAAW;IACX,aAAY;IACZ,YAAW;IACX,YAAW,EACZ;EAnBH;IAqBI,aAAY;IACZ,kBAAiB,EAClB\",\"file\":\"Panel.module.scss\",\"sourcesContent\":[\"@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/variables.scss\\\";\\n\\n.root {\\n  z-index: 1;\\n  background-color: $panel-background;\\n  position: relative;\\n}\\n\\n.rootFullScreen {\\n  position: fixed;\\n  z-index: 100;\\n  border: 4px solid rgba(110, 81, 238, 0.3);\\n  top: $topBarHeight;\\n  left: 0;\\n  right: 0;\\n  bottom: $playbackControlHeight;\\n}\\n\\n.notClickable {\\n  position: fixed;\\n  z-index: 100;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  height: $topBarHeight;\\n  opacity: 0;\\n  cursor: not-allowed;\\n}\\n\\n.tabActionsOverlay,\\n.quickActionsOverlay,\\n.prohibitedSelection {\\n  cursor: pointer;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 100000; // highest level within panel\\n  display: none;\\n\\n  .root:hover > &,\\n  // for screenshot tests\\n  &:global(.hoverForScreenshot) {\\n    background-color: rgba(110, 81, 238, 0.15);\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    flex-wrap: wrap;\\n  }\\n\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: flex-end;\\n  font-size: 14px;\\n  padding-top: 24px;\\n\\n  div {\\n    width: 100%;\\n    padding: 6px 0;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    flex-wrap: wrap;\\n  }\\n\\n  svg {\\n    margin-right: 4px;\\n    width: 24px;\\n    height: 24px;\\n    fill: white;\\n  }\\n\\n  button {\\n    width: 72px;\\n    height: 72px;\\n    margin: 4px;\\n    flex: none;\\n    font-size: 14px;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    justify-content: center;\\n    background: rgba(110, 81, 238, 0.5);\\n    svg {\\n      margin: 0 0 6px;\\n    }\\n\\n    &:not(:global(.disabled)):hover {\\n      background: rgba(110, 81, 238, 0.8);\\n    }\\n  }\\n\\n  p {\\n    font-size: 12px;\\n    color: $text-muted;\\n  }\\n}\\n\\n.prohibitedSelection {\\n  padding: 10px;\\n\\n  .root:hover &,\\n  // for screenshot tests\\n  &:global(.hoverForScreenshot) {\\n    background-color: rgba(45, 45, 51, 0.7);\\n  }\\n}\\n\\n.tabActionsOverlay button {\\n  width: 145px;\\n  height: 40px;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n}\\n\\n.exitFullScreen {\\n  position: fixed;\\n  top: 75px;\\n  right: 8px;\\n  z-index: 102;\\n  opacity: 1;\\n  background-color: $toolbar;\\n  display: none;\\n  .root:hover & {\\n    display: block;\\n  }\\n  &:global(.hoverForScreenshot) {\\n    display: block;\\n  }\\n  svg {\\n    width: 16px;\\n    height: 16px;\\n    fill: white;\\n    float: left;\\n  }\\n  span {\\n    float: right;\\n    padding-left: 3px;\\n  }\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\",\"$topBarHeight: 36px;\\n$playbackControlHeight: 44px;\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"root\": \"packages-webviz-core-src-components-Panel-module-32r84--root\",\n\t\"rootFullScreen\": \"packages-webviz-core-src-components-Panel-module-4c19m--rootFullScreen\",\n\t\"notClickable\": \"packages-webviz-core-src-components-Panel-module-psm4f--notClickable\",\n\t\"tabActionsOverlay\": \"packages-webviz-core-src-components-Panel-module-3ucfg--tabActionsOverlay\",\n\t\"quickActionsOverlay\": \"packages-webviz-core-src-components-Panel-module-4jxeb--quickActionsOverlay\",\n\t\"prohibitedSelection\": \"packages-webviz-core-src-components-Panel-module-3cuq9--prohibitedSelection\",\n\t\"exitFullScreen\": \"packages-webviz-core-src-components-Panel-module-8yy8w--exitFullScreen\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\n\nimport type { TimeBasedChartTooltipData } from \"./index\";\nimport styles from \"./TimeBasedChartTooltip.module.scss\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { formatTime, formatTimeRaw, subtractTimes, toSec } from \"webviz-core/src/util/time\";\n\ntype Props = {|\n  children: React.Element<any>,\n  tooltip: TimeBasedChartTooltipData,\n|};\nexport default class TimeBasedChartTooltip extends React.PureComponent<Props> {\n  render() {\n    const { tooltip } = this.props;\n    const value = typeof tooltip.value === \"string\" ? tooltip.value : JSON.stringify(tooltip.value);\n    const { receiveTime, headerStamp } = tooltip.item;\n    const content = (\n      <div className={styles.root}>\n        <div>\n          <span className={styles.title}>Value:&nbsp;</span>\n          {tooltip.constantName ? `${tooltip.constantName} (${value})` : value}\n        </div>\n        <div>\n          <span className={styles.title}>Path:&nbsp;</span>\n          {tooltip.path}\n        </div>\n        {receiveTime && headerStamp && (\n          <table>\n            <tbody>\n              <tr>\n                <th />\n                {receiveTime && <th>receive time</th>}\n                {headerStamp && <th>header.stamp</th>}\n              </tr>\n              <tr>\n                <th>ROS</th>\n                {receiveTime && <td>{formatTimeRaw(receiveTime)}</td>}\n                {headerStamp && <td>{formatTimeRaw(headerStamp)}</td>}\n              </tr>\n              <tr>\n                <th>Time</th>\n                {receiveTime && <td>{formatTime(receiveTime)}</td>}\n                {headerStamp && <td>{formatTime(headerStamp)}</td>}\n              </tr>\n              <tr>\n                <th>Elapsed</th>\n                {receiveTime && <td>{toSec(subtractTimes(receiveTime, tooltip.startTime)).toFixed(9)} sec</td>}\n                {headerStamp && <td>{toSec(subtractTimes(headerStamp, tooltip.startTime)).toFixed(9)} sec</td>}\n              </tr>\n            </tbody>\n          </table>\n        )}\n      </div>\n    );\n\n    return (\n      <Tooltip defaultShown placement=\"top\" contents={content}>\n        {this.props.children}\n      </Tooltip>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./TimeBasedChartTooltip.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./TimeBasedChartTooltip.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./TimeBasedChartTooltip.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-4ruaa--root {\\n  font-family: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n  font-size: 11px;\\n  line-height: 1.4;\\n  max-width: 350px;\\n  overflow-wrap: break-word; }\\n  .packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-4ruaa--root th,\\n  .packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-4ruaa--root td {\\n    border: none; }\\n  .packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-4ruaa--root th {\\n    color: rgba(247, 247, 243, 0.3); }\\n    .packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-4ruaa--root th:first-child {\\n      text-align: left; }\\n\\n.packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-3tnu1--title {\\n  color: rgba(247, 247, 243, 0.3); }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/TimeBasedChart/TimeBasedChartTooltip.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AASA;EC6EE,kFAFmF;EDzEnF,gBAAe;EACf,iBAAgB;EAChB,iBAAgB;EAChB,0BAAyB,EAc1B;EAnBD;;IASI,aAAY,EACb;EAVH;IAaI,gCENiC,EFWlC;IAlBH;MAgBM,iBAAgB,EACjB;;AAIL;EACE,gCEfmC,EFgBpC\",\"file\":\"TimeBasedChartTooltip.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n.root {\\n  @include monospace;\\n  font-size: 11px;\\n  line-height: 1.4;\\n  max-width: 350px;\\n  overflow-wrap: break-word;\\n\\n  th,\\n  td {\\n    border: none;\\n  }\\n\\n  th {\\n    color: $text-muted;\\n\\n    &:first-child {\\n      text-align: left;\\n    }\\n  }\\n}\\n\\n.title {\\n  color: $text-muted;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"root\": \"packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-4ruaa--root\",\n\t\"title\": \"packages-webviz-core-src-components-TimeBasedChart-TimeBasedChartTooltip-module-3tnu1--title\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { throttle } from \"lodash\";\nimport * as React from \"react\";\nimport shallowequal from \"shallowequal\";\nimport uuid from \"uuid\";\n\n// Creates a new component class that tries to keep various instances\n// of itself synchronized with each other.\n//\n// The way this works is that each component instance gets some `data`,\n// and all `data` are passed to the `reducer function`. Whenever some\n// `data` for any component instance changes, *all* instances are\n// rerendered with the output of the `reducer` function\n//\n// For example, if you want to find the maximum value of all the\n// values pass to `data`, you would create a component like this:\n//\n// const MaxSync = createSyncingComponent(\"MaxSync\", (dataItems) => max(dataItems));\n//\n// Now you can have multiple instances of this component:\n//\n// <div>\n//   <MaxSync data={10}>{(maximum) => <div>maximum is {maximum}</div>}</MaxSync>\n//   <MaxSync data={20}>{(maximum) => <div>maximum is {maximum}</div>}</MaxSync>\n//   <MaxSync data={30}>{(maximum) => <div>maximum is {maximum}</div>}</MaxSync>\n// </div>\n//\n// This will render:\n// <div>\n//   <div>maximum is 30</div>\n//   <div>maximum is 30</div>\n//   <div>maximum is 30</div>\n// </div>\nexport default function createSyncingComponent<ComponentData, ReducerOutput>(\n  displayName: string,\n  reducer: (ComponentData[]) => ReducerOutput\n): React.ComponentType<{| data: ComponentData, children: (ReducerOutput) => React.Node |}> {\n  type Props = {| data: ComponentData, children: (ReducerOutput) => React.Node |};\n\n  const dataById: { [string]: ComponentData } = {};\n  const componentsById: { [string]: React.Component<Props> } = {};\n  // Has the component already rendered with the most recent data available.\n  let hasRenderedIds = new Set();\n  let reducedData: ReducerOutput;\n\n  const THROTTLE_TIME_MS = 500;\n\n  return class SyncingComponent extends React.Component<Props> {\n    static displayName = displayName;\n    _id: string;\n\n    constructor(props: Props) {\n      super(props);\n      this._id = uuid.v4();\n      componentsById[this._id] = this;\n      dataById[this._id] = props.data;\n      this._recompute();\n    }\n\n    shouldComponentUpdate(nextProps: Props) {\n      if (!shallowequal(this.props.data, nextProps.data)) {\n        dataById[this._id] = nextProps.data;\n        this._recompute();\n      }\n\n      return true;\n    }\n\n    componentWillUnmount() {\n      delete componentsById[this._id];\n      delete dataById[this._id];\n      this._recompute();\n    }\n\n    _recompute() {\n      const newReducedData: ReducerOutput = reducer(Object.keys(dataById).map((id) => dataById[id]));\n      if (!shallowequal(reducedData, newReducedData)) {\n        reducedData = newReducedData;\n        hasRenderedIds = new Set();\n        this._throttledForceUpdate();\n      }\n    }\n\n    // This updating must be done asynchronously because forceUpdate being called during React reconciliation may not\n    // actually cause the child to re-render.\n    _throttledForceUpdate = throttle(\n      () => {\n        // Throttle updates because it's not imporant that components update immediately and calling `forceUpdate` often\n        // lead to suboptimal performance. Most of the time, synced plots will update within THROTTLE_TIME_MS anyways,\n        // making a forceUpdate unncessary.\n        Object.keys(componentsById).forEach((id) => {\n          if (id !== this._id && !hasRenderedIds.has(id)) {\n            componentsById[id].forceUpdate();\n          }\n        });\n      },\n      THROTTLE_TIME_MS,\n      { leading: false, trailing: true }\n    );\n\n    render() {\n      hasRenderedIds.add(this._id);\n      return this.props.children(reducedData);\n    }\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ChartJSManager from \"./ChartJSManager\";\nimport type { RpcLike } from \"webviz-core/src/util/FakeRpc\";\nimport Rpc from \"webviz-core/src/util/Rpc\";\nimport { setupWorker } from \"webviz-core/src/util/RpcUtils\";\n\nconst inWorkerEnvironment = global.postMessage && !global.onmessage;\n\nexport default class ChartJSWorker {\n  _rpc: RpcLike;\n  _managersById: { [string]: ChartJSManager };\n\n  constructor(rpc: RpcLike) {\n    this._managersById = {};\n\n    if (process.env.NODE_ENV !== \"test\" && inWorkerEnvironment && this._rpc instanceof Rpc) {\n      setupWorker(this._rpc);\n    }\n\n    rpc.receive(\"initialize\", (args) => {\n      const manager = new ChartJSManager(args);\n      this._managersById[args.id] = manager;\n      return this._managersById[args.id].getScaleBounds();\n    });\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"doZoom\", (args) => this._managersById[args.id]?.doZoom(args));\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"resetZoomDelta\", (args) => this._managersById[args.id]?.resetZoomDelta(args));\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"doPan\", (args) => this._managersById[args.id]?.doPan(args));\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"resetPanDelta\", (args) => this._managersById[args.id]?.resetPanDelta(args));\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"update\", (args) => this._managersById[args.id]?.update(args));\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"resetZoom\", (args) => this._managersById[args.id]?.resetZoom(args));\n    rpc.receive(\"destroy\", (args) => {\n      const manager = this._managersById[args.id];\n      if (manager) {\n        const result = manager.destroy(args);\n        delete this._managersById[args.id];\n        return result;\n      }\n    });\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"getElementAtXAxis\", (args) => this._managersById[args.id]?.getElementAtXAxis(args));\n    // $FlowFixMe flow doesn't like function calls in optional chains\n    rpc.receive(\"getDatalabelAtEvent\", (args) => this._managersById[args.id]?.getDatalabelAtEvent(args));\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport Chart from \"chart.js\";\nimport keyBy from \"lodash/keyBy\";\nimport omit from \"lodash/omit\";\n\nimport {\n  type ZoomOptions,\n  type PanOptions,\n  doZoom,\n  doPan,\n  resetPanDelta,\n  resetZoomDelta,\n  resetZoom,\n  getScaleBounds,\n} from \"./zoomAndPanHelpers\";\n\n// These are options that we pass our worker. We have to pass this as a separate object instead of as part of the\n// config because they can only be set using a callback function, which we can't pass across worker boundaries.\nexport type ScaleOptions = {|\n  // Sets y-axis labels to a fixed width, so that vertically-aligned charts can be directly compared.\n  fixedYAxisWidth?: ?number,\n  // We might want to hide just the first and last because they can overlap with other labels or have long decimal\n  // points.\n  yAxisTicks?: \"show\" | \"hide\" | \"hideFirstAndLast\",\n  // Display the x-axes with a seconds unit, eg \"1 s\"\n  displayXAxesTicksInSeconds?: ?boolean,\n|};\n\nfunction hideAllTicksScaleCallback() {\n  return \"\";\n}\n\nfunction hideFirstAndLastTicksScaleCallback(value: number, index: number, values: number[]) {\n  if (index === 0 || index === values.length - 1) {\n    // First and last labels sometimes get super long rounding errors when zooming.\n    // This fixes that.\n    return \"\";\n  }\n  // Also round the scale value.\n  return `${Math.round(value * 1000) / 1000}`;\n}\n\nfunction displayTicksInSecondsCallback(value: number) {\n  return `${Math.round(value * 1000) / 1000} s`;\n}\n\nfunction mapChartElementToEventElement(chartInstance, item) {\n  return {\n    // It's annoying to have to rely on internal APIs like this, but there's literally no other way and the help\n    // documents themselves say to do this: https://www.chartjs.org/docs/latest/developers/api.html#getelementatevente\n    // eslint-disable-next-line no-underscore-dangle\n    data: chartInstance.data.datasets[item._datasetIndex]?.data[item._index],\n    // eslint-disable-next-line no-underscore-dangle\n    view: item._view,\n  };\n}\n\nconst datasetKeyProvider = (d) => d.label;\n\ntype ChartInstance = any;\n// This type is not yet in Flow, so temporarily type it this way.\ntype OffscreenCanvas = HTMLCanvasElement;\n\nexport { Chart };\n\nexport default class ChartJSManager {\n  id: string;\n  _node: OffscreenCanvas;\n  _chartInstance: ?ChartInstance;\n\n  constructor({\n    id,\n    node,\n    type,\n    data,\n    options,\n    scaleOptions,\n    devicePixelRatio,\n  }: {\n    id: string,\n    node: OffscreenCanvas,\n    type: any,\n    data: any,\n    options: any,\n    scaleOptions: ?ScaleOptions,\n    devicePixelRatio: number,\n  }) {\n    this.id = id;\n    this._node = node;\n    const plugins = {};\n    const chartInstance = new Chart(node, {\n      type,\n      data,\n      options: { ...this._addFunctionsToConfig(options, scaleOptions), devicePixelRatio },\n      plugins,\n    });\n    this._chartInstance = chartInstance;\n  }\n\n  getScaleBounds() {\n    const chartInstance = this._chartInstance;\n    if (!chartInstance) {\n      return;\n    }\n\n    return getScaleBounds(chartInstance);\n  }\n\n  doZoom({\n    zoomOptions,\n    percentZoomX,\n    percentZoomY,\n    focalPoint,\n    whichAxesParam,\n  }: {\n    zoomOptions: ZoomOptions,\n    percentZoomX: number,\n    percentZoomY: number,\n    focalPoint?: { x: number, y: number },\n    whichAxesParam?: string,\n  }) {\n    const chartInstance = this._chartInstance;\n    if (!chartInstance) {\n      return;\n    }\n\n    doZoom(this.id, chartInstance, zoomOptions, percentZoomX, percentZoomY, focalPoint, whichAxesParam);\n    return getScaleBounds(chartInstance);\n  }\n\n  resetZoomDelta() {\n    const chartInstance = this._chartInstance;\n    if (!chartInstance) {\n      return;\n    }\n\n    resetZoomDelta(this.id);\n  }\n\n  doPan({ panOptions, deltaX, deltaY }: { panOptions: PanOptions, deltaX: number, deltaY: number }) {\n    const chartInstance = this._chartInstance;\n    if (!chartInstance) {\n      return;\n    }\n\n    doPan(this.id, chartInstance, panOptions, deltaX, deltaY);\n    return getScaleBounds(chartInstance);\n  }\n\n  resetPanDelta() {\n    resetPanDelta(this.id);\n  }\n\n  update({ data, options, scaleOptions }: { data: any, options: any, scaleOptions: ?ScaleOptions }) {\n    const chartInstance = this._chartInstance;\n\n    if (!chartInstance) {\n      return;\n    }\n\n    if (options) {\n      options = this._addFunctionsToConfig(options, scaleOptions);\n      chartInstance.options = Chart.helpers.configMerge(chartInstance.options, options);\n    }\n\n    // Pipe datasets to chart instance datasets enabling\n    // seamless transitions\n    const currentDatasets = this._getCurrentDatasets();\n    const nextDatasets = (data && data.datasets) || [];\n    this._checkDatasets(currentDatasets);\n\n    const currentDatasetsIndexed = keyBy(currentDatasets, datasetKeyProvider);\n\n    // We can safely replace the dataset array, as long as we retain the _meta property\n    // on each dataset.\n    chartInstance.config.data.datasets = nextDatasets.map((next) => {\n      const current = currentDatasetsIndexed[datasetKeyProvider(next)];\n\n      if (current && current.type === next.type && next.data) {\n        // Be robust to no data. Relevant for other update mechanisms as in chartjs-plugin-streaming.\n        // The data array must be edited in place. As chart.js adds listeners to it.\n        current.data.splice(next.data.length);\n        next.data.forEach((point, pid) => {\n          current.data[pid] = next.data[pid];\n        });\n        const otherDatasetProps = omit(next, \"data\");\n        // Merge properties. Notice a weakness here. If a property is removed\n        // from next, it will be retained by current and never disappears.\n        // Workaround is to set value to null or undefined in next.\n        return {\n          ...current,\n          ...otherDatasetProps,\n        };\n      }\n      return next;\n    });\n\n    const otherDataProps = omit(data, \"datasets\");\n\n    chartInstance.config.data = {\n      ...chartInstance.config.data,\n      ...otherDataProps,\n    };\n\n    chartInstance.update();\n\n    return getScaleBounds(chartInstance);\n  }\n\n  resetZoom() {\n    const chartInstance = this._chartInstance;\n    if (chartInstance) {\n      resetZoom(this.id, chartInstance);\n    }\n\n    return getScaleBounds(chartInstance);\n  }\n\n  destroy() {\n    const chartInstance = this._chartInstance;\n    if (chartInstance) {\n      chartInstance.destroy();\n    }\n    this._chartInstance = null;\n  }\n\n  // Get the closest element at the same x-axis value as the cursor.\n  // This is a somewhat complex function because we attempt to copy the same behavior that the built-in tooltips have\n  // for Chart.js without a direct API for it.\n  getElementAtXAxis({ event }: { event: Event }) {\n    const chartInstance = this._chartInstance;\n    if (chartInstance) {\n      // Elements directly under the cursor.\n      const pointElements = chartInstance.getElementsAtEventForMode(event, \"point\");\n\n      if (pointElements.length) {\n        // If we have an element directly under the cursor, return it.\n        return mapChartElementToEventElement(chartInstance, pointElements[0]);\n      }\n\n      // Elements near the x-axis position of the cursor.\n      const xAxisElements = chartInstance.getElementsAtEventForMode(event, \"x\", { intersect: false });\n      if (xAxisElements.length) {\n        // The nearest elements to the cursor, regardless of how close they are.\n        const nearestElements = chartInstance.getElementsAtEventForMode(event, \"nearest\", { intersect: false });\n        const nearestXAxisElement = nearestElements.find((item) =>\n          // eslint-disable-next-line no-underscore-dangle\n          xAxisElements.some((item2) => item._index === item2._index && item._datasetIndex === item2._datasetIndex)\n        );\n        // If we have elements on the x-axis, return the nearest element if we can find it.\n        if (nearestXAxisElement) {\n          return mapChartElementToEventElement(chartInstance, nearestXAxisElement);\n        }\n        // Otherwise just return the first element on the x-axis.\n        return mapChartElementToEventElement(chartInstance, xAxisElements[0]);\n      }\n    }\n  }\n\n  getDatalabelAtEvent({ event }: { event: Event }) {\n    const chartInstance = this._chartInstance;\n    if (chartInstance) {\n      const chartDatalabel = chartInstance.$datalabels.getLabelAtEvent(event);\n      if (chartDatalabel) {\n        const context = chartDatalabel.$context;\n        return context.dataset.data[context.dataIndex];\n      }\n    }\n  }\n\n  _addFunctionsToConfig(config: any, scaleOptions: ?ScaleOptions) {\n    if (config && config.plugins.datalabels) {\n      // This controls which datalabels are displayed. Only display labels for datapoints that include a \"label\"\n      // property.\n      config.plugins.datalabels.formatter = (value: any, context: any) => {\n        const label = value?.label;\n        // We have to return \"null\" if we don't want this label to be displayed. Returning \"undefined\" falls back to the\n        // default formatting.\n        return label != null ? label : null;\n      };\n      // Override color so that it can be set per-dataset.\n      const staticColor = config.plugins.datalabels.color || \"white\";\n      config.plugins.datalabels.color = (context: any) => {\n        const value = context.dataset.data[context.dataIndex];\n        return value?.labelColor || staticColor;\n      };\n    }\n\n    if (scaleOptions) {\n      for (const scale of config.scales.yAxes) {\n        if (scaleOptions.fixedYAxisWidth != null) {\n          scale.afterFit = (scaleInstance: any) => {\n            scaleInstance.width = scaleOptions.fixedYAxisWidth;\n          };\n        }\n        scale.ticks = scale.ticks || {};\n        if (scaleOptions.yAxisTicks === \"hide\") {\n          scale.ticks.callback = hideAllTicksScaleCallback;\n        } else if (scaleOptions.yAxisTicks === \"hideFirstAndLast\") {\n          scale.ticks.callback = hideFirstAndLastTicksScaleCallback;\n        }\n      }\n\n      for (const scale of config.scales.xAxes) {\n        scale.ticks = scale.ticks || {};\n        if (scaleOptions.displayXAxesTicksInSeconds) {\n          scale.ticks.callback = displayTicksInSecondsCallback;\n        }\n      }\n    }\n\n    return config;\n  }\n\n  _checkDatasets(datasets: any[]) {\n    const isDev = process.env.NODE_ENV !== \"production\" && process.env.NODE_ENV !== \"prod\";\n    const multipleDatasets = datasets.length > 1;\n\n    if (isDev && multipleDatasets) {\n      let shouldWarn = false;\n      datasets.forEach((dataset) => {\n        if (!dataset.label) {\n          shouldWarn = true;\n        }\n      });\n\n      if (shouldWarn) {\n        console.error(\n          '[ChartJSManager] Warning: Each dataset needs a unique key. By default, the \"label\" property on each dataset is used.'\n        );\n      }\n    }\n  }\n\n  _getCurrentDatasets() {\n    return (this._chartInstance && this._chartInstance.config.data && this._chartInstance.config.data.datasets) || [];\n  }\n}\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"ChartJSWorker.worker.js?d6e6c262068577885d1d\");\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type Rpc from \"webviz-core/src/util/Rpc\";\n\nclass FakeRpc {\n  proxiedWorker: FakeRpc;\n  handlers: { [string]: (any) => any } = {};\n\n  async send<TResult>(topic: string, data: any, transfer?: any[]): Promise<TResult> {\n    return this.proxiedWorker.handlers[topic](data);\n  }\n\n  async receive<T, TOut>(topic: string, handler: (T) => TOut) {\n    if (this.handlers[topic]) {\n      throw new Error(`Cannot call receive twice for topic: ${topic}`);\n    }\n    this.handlers[topic] = handler;\n  }\n}\n\nexport function getFakeRpcs() {\n  const workerRpc = new FakeRpc();\n  const mainThreadRpc = new FakeRpc();\n  workerRpc.proxiedWorker = mainThreadRpc;\n  mainThreadRpc.proxiedWorker = workerRpc;\n  return { workerRpc, mainThreadRpc };\n}\n\nexport type RpcLike = Rpc | FakeRpc;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport React from \"react\";\n\nimport { PLOT_DASHED_STYLE, PLOT_DOT_DASHED_STYLE } from \"webviz-core/src/components/TimeBasedChart/constants\";\n\ntype Dataset = { label: string, color: string, borderDash: string };\n\ntype Props = {\n  canToggleLines?: boolean,\n  datasets: Dataset[],\n  linesToHide: { [string]: boolean },\n  toggleLine: (datasetId: string | typeof undefined, lineToHide: string) => void,\n  datasetId?: string,\n};\n\nconst checkboxStyle = { height: 12, marginBottom: -2 };\n\nexport default class TimeBasedChartLegend extends React.PureComponent<Props> {\n  _toggleLine = (label: string) => () => {\n    const { datasetId, toggleLine } = this.props;\n    toggleLine(datasetId, label);\n  };\n\n  render() {\n    const { canToggleLines, linesToHide } = this.props;\n    return (\n      <div>\n        {this.props.datasets.map((dataset, i) => {\n          const { label, color, borderDash } = dataset;\n          let pointSvg;\n          if (borderDash === PLOT_DOT_DASHED_STYLE) {\n            pointSvg = (\n              <svg width=\"11\" height=\"10\">\n                <line\n                  stroke={color}\n                  strokeWidth=\"2\"\n                  strokeDasharray={PLOT_DOT_DASHED_STYLE.join(\", \")}\n                  x1=\"0\"\n                  x2=\"18\"\n                  y1=\"6\"\n                  y2=\"6\"\n                />\n              </svg>\n            );\n          } else if (borderDash === PLOT_DASHED_STYLE) {\n            pointSvg = <span style={{ fontSize: \"12px\", fontWeight: \"bold\" }}>- -</span>;\n          } else {\n            pointSvg = <span style={{ fontSize: \"12px\", fontWeight: \"bold\" }}>––</span>;\n          }\n          const CheckboxComponent = linesToHide[label] ? CheckboxBlankOutlineIcon : CheckboxMarkedIcon;\n          return (\n            <div key={i} style={{ color, fill: \"white\", whiteSpace: \"nowrap\" }}>\n              {canToggleLines && <CheckboxComponent style={checkboxStyle} onClick={this._toggleLine(label)} />}\n              {pointSvg} <span style={{ fontSize: \"10px\" }}>{label}</span>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nexport const PLOT_DASHED_STYLE = [5, 5];\nexport const PLOT_DOT_DASHED_STYLE = [3, 2, 1, 2];\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport flatten from \"lodash/flatten\";\nimport React, { memo } from \"react\";\nimport Dimensions from \"react-container-dimensions\";\nimport { createSelector } from \"reselect\";\nimport { Time } from \"rosbag\";\nimport uuid from \"uuid\";\n\nimport styles from \"./PlotChart.module.scss\";\nimport TimeBasedChart, {\n  type TimeBasedChartTooltipData,\n  type TooltipItem,\n} from \"webviz-core/src/components/TimeBasedChart\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport derivative from \"webviz-core/src/panels/Plot/derivative\";\nimport {\n  type PlotPath,\n  type BasePlotPath,\n  isReferenceLinePlotPathType,\n} from \"webviz-core/src/panels/Plot/internalTypes\";\nimport { lightColor, lineColors } from \"webviz-core/src/util/plotColors\";\nimport { format, formatTimeRaw, isTime, subtractTimes, toSec } from \"webviz-core/src/util/time\";\n\nexport type PlotChartPoint = {|\n  x: number,\n  y: number,\n  tooltip?: TimeBasedChartTooltipData,\n|};\n\nexport type DataSet = {|\n  borderColor: string,\n  borderWidth: number,\n  data: Array<PlotChartPoint>,\n  fill: boolean,\n  key: string,\n  label: string,\n  pointBackgroundColor: string,\n  pointBorderColor: string,\n  pointHoverRadius: number,\n  pointRadius: number,\n  showLine: boolean,\n|};\n\nexport type PlotDataByPath = {\n  [path: string]: TooltipItem[],\n};\n\nconst Y_AXIS_ID = \"Y_AXIS_ID\";\n\nfunction getXForPoint(xAxisVal, timestamp, innerIdx, itemsByPath, xAxisPath, outerIdx): number {\n  if (xAxisVal === \"custom\" && xAxisPath) {\n    if (isReferenceLinePlotPathType(xAxisPath)) {\n      return Number.parseFloat(xAxisPath.value);\n    }\n    if (itemsByPath[xAxisPath.value]) {\n      const item = itemsByPath[xAxisPath.value][outerIdx];\n      return item ? Number(item.queriedData[innerIdx]?.value) : NaN;\n    }\n  }\n  return xAxisVal === \"timestamp\" ? timestamp : innerIdx;\n}\n\nconst scaleOptions = {\n  fixedYAxisWidth: 48,\n  yAxisTicks: \"hideFirstAndLast\",\n};\n\nfunction getDatasetAndTooltipsFromMessagePlotPath(\n  path: PlotPath,\n  itemsByPath: PlotDataByPath,\n  index: number,\n  startTime: Time,\n  xAxisVal: \"timestamp\" | \"index\" | \"custom\",\n  xAxisPath?: BasePlotPath\n): { dataset: DataSet, tooltips: TimeBasedChartTooltipData[] } {\n  let tooltips: TimeBasedChartTooltipData[] = [];\n  let points: PlotChartPoint[] = [];\n  let showLine = true;\n  const datasetKey = index.toString();\n\n  for (const [outerIdx, item] of itemsByPath[path.value].entries()) {\n    const timestamp = path.timestampMethod === \"headerStamp\" ? item.headerStamp : item.receiveTime;\n    if (!timestamp) {\n      continue;\n    }\n    const elapsedTime = toSec(subtractTimes(timestamp, startTime));\n    for (const [innerIdx, { value, path: queriedPath, constantName }] of item.queriedData.entries()) {\n      if (typeof value === \"number\" || typeof value === \"boolean\" || typeof value === \"string\") {\n        const valueNum = Number(value);\n        if (!isNaN(valueNum)) {\n          const x = getXForPoint(xAxisVal, elapsedTime, innerIdx, itemsByPath, xAxisPath, outerIdx);\n          const y = valueNum;\n          const tooltip = { x, y, datasetKey, item, path: queriedPath, value, constantName, startTime };\n          points.push({ x, y });\n          tooltips.push(tooltip);\n        }\n      } else if (isTime(value)) {\n        // $FlowFixMe - %checks on isTime can't convince Flow that the object is actually a Time. Related: https://github.com/facebook/flow/issues/3614\n        const timeValue = (value: Time);\n        const x = getXForPoint(xAxisVal, elapsedTime, innerIdx, itemsByPath, xAxisPath, outerIdx);\n        const y = toSec(timeValue);\n        const tooltip = {\n          x,\n          y,\n          datasetKey,\n          item,\n          path: queriedPath,\n          value: `${format(timeValue)} (${formatTimeRaw(timeValue)})`,\n          constantName,\n          startTime,\n        };\n        points.push({ x, y });\n        tooltips.push(tooltip);\n      }\n    }\n    // If we have added more than one point for this message, make it a scatter plot.\n    if (item.queriedData.length > 1 && xAxisVal !== \"index\") {\n      showLine = false;\n    }\n  }\n\n  if (path.value.includes(\".@derivative\")) {\n    if (showLine) {\n      const { points: derivativePoints, tooltips: derivativeTooltips } = derivative(points, tooltips);\n      points = derivativePoints;\n      tooltips = derivativeTooltips;\n    } else {\n      // If we have a scatter plot, we can't take the derivative, so instead show nothing\n      // (nothing is better than incorrect data).\n      points = [];\n    }\n  }\n\n  const dataset = {\n    borderColor: lineColors[index % lineColors.length],\n    label: path.value || uuid.v4(),\n    key: datasetKey,\n    showLine,\n    fill: false,\n    borderWidth: 1,\n    pointRadius: 1.5,\n    pointHoverRadius: 3,\n    pointBackgroundColor: lightColor(lineColors[index % lineColors.length]),\n    pointBorderColor: \"transparent\",\n    data: points,\n  };\n  return { dataset, tooltips };\n}\n\n// A \"reference line\" plot path is a numeric value. It creates a horizontal line on the plot at the specified value.\nfunction getAnnotationFromReferenceLine(path: PlotPath, index: number) {\n  return {\n    type: \"line\",\n    drawTime: \"beforeDatasetsDraw\",\n    scaleID: Y_AXIS_ID,\n    label: path.value,\n    borderColor: lineColors[index % lineColors.length],\n    borderDash: [5, 5],\n    borderWidth: 1,\n    mode: \"horizontal\",\n    value: Number.parseFloat(path.value),\n  };\n}\n\nexport function getDatasetsAndTooltips(\n  paths: PlotPath[],\n  itemsByPath: PlotDataByPath,\n  startTime: Time,\n  xAxisVal: \"timestamp\" | \"index\" | \"custom\",\n  xAxisPath?: BasePlotPath\n): { datasets: DataSet[], tooltips: TimeBasedChartTooltipData[] } {\n  const datasetsAndTooltips = filterMap(paths, (path: PlotPath, index: number) => {\n    if (!path.enabled) {\n      return null;\n    } else if (!isReferenceLinePlotPathType(path)) {\n      return getDatasetAndTooltipsFromMessagePlotPath(path, itemsByPath, index, startTime, xAxisVal, xAxisPath);\n    }\n    return null;\n  });\n\n  return {\n    datasets: datasetsAndTooltips.map(({ dataset }) => dataset),\n    tooltips: flatten(datasetsAndTooltips.map(({ tooltips }) => tooltips)),\n  };\n}\n\nfunction getAnnotations(paths: PlotPath[]) {\n  return filterMap(paths, (path: PlotPath, index: number) => {\n    if (!path.enabled) {\n      return null;\n    } else if (isReferenceLinePlotPathType(path)) {\n      return getAnnotationFromReferenceLine(path, index);\n    }\n    return null;\n  });\n}\n\ntype YAxesInterface = {| minY: number, maxY: number, scaleId: string |};\n// min/maxYValue is NaN when it's unset, and an actual number otherwise.\nconst yAxes = createSelector<YAxesInterface, _, _, _>(\n  (params) => params,\n  ({ minY, maxY, scaleId }: YAxesInterface) => {\n    const min = isNaN(minY) ? undefined : minY;\n    const max = isNaN(maxY) ? undefined : maxY;\n    return [\n      {\n        id: scaleId,\n        ticks: {\n          min,\n          max,\n          precision: 3,\n        },\n        gridLines: {\n          color: \"rgba(255, 255, 255, 0.2)\",\n          zeroLineColor: \"rgba(255, 255, 255, 0.2)\",\n        },\n      },\n    ];\n  }\n);\n\ntype PlotChartProps = {|\n  paths: PlotPath[],\n  minYValue: number,\n  maxYValue: number,\n  saveCurrentYs: (minY: number, maxY: number) => void,\n  datasets: DataSet[],\n  tooltips: TimeBasedChartTooltipData[],\n  xAxisVal: \"timestamp\" | \"index\" | \"custom\",\n|};\nexport default memo<PlotChartProps>(function PlotChart(props: PlotChartProps) {\n  const { paths, minYValue, maxYValue, saveCurrentYs, datasets, tooltips, xAxisVal } = props;\n  const annotations = getAnnotations(paths);\n\n  return (\n    <div className={styles.root}>\n      <Dimensions>\n        {({ width, height }) => (\n          <TimeBasedChart\n            // Force a redraw every time the x-axis value changes.\n            key={xAxisVal}\n            isSynced\n            zoom\n            width={width}\n            height={height}\n            data={{ datasets }}\n            tooltips={tooltips}\n            annotations={annotations}\n            type=\"scatter\"\n            yAxes={yAxes({ minY: minYValue, maxY: maxYValue, scaleId: Y_AXIS_ID })}\n            saveCurrentYs={saveCurrentYs}\n            xAxisVal={xAxisVal}\n            scaleOptions={scaleOptions}\n          />\n        )}\n      </Dimensions>\n    </div>\n  );\n});\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotChart.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotChart.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotChart.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-Plot-PlotChart-module-2gjxk--root {\\n  width: 100%;\\n  -ms-flex-positive: 1;\\n      flex-grow: 1;\\n  overflow: hidden; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotChart.module.scss\"],\"names\":[],\"mappings\":\"AASA;EACE,YAAW;EACX,qBAAY;MAAZ,aAAY;EACZ,iBAAgB,EACjB\",\"file\":\"PlotChart.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n.root {\\n  width: 100%;\\n  flex-grow: 1;\\n  overflow: hidden;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"root\": \"packages-webviz-core-src-panels-Plot-PlotChart-module-2gjxk--root\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { type TimeBasedChartTooltipData } from \"webviz-core/src/components/TimeBasedChart\";\nimport type { PlotChartPoint } from \"webviz-core/src/panels/Plot/PlotChart\";\n\nexport default function derivative(\n  data: PlotChartPoint[],\n  tooltips: TimeBasedChartTooltipData[]\n): { points: PlotChartPoint[], tooltips: TimeBasedChartTooltipData[] } {\n  const points = [];\n  const newTooltips = [];\n  for (let i = 1; i < data.length; i++) {\n    const secondsDifference = data[i].x - data[i - 1].x;\n    const value = (data[i].y - data[i - 1].y) / secondsDifference;\n    const previousTooltip = tooltips[i];\n    const point: PlotChartPoint = { x: data[i].x, y: value };\n    const tooltip = {\n      x: point.x,\n      y: point.y,\n      item: previousTooltip.item,\n      path: `${previousTooltip.path}.@derivative`,\n      datasetKey: previousTooltip.datasetKey,\n      value,\n      constantName: undefined,\n      startTime: previousTooltip.startTime,\n    };\n    newTooltips.push(tooltip);\n    points.push(point);\n  }\n  return { points, tooltips: newTooltips };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport MenuIcon from \"@mdi/svg/svg/menu.svg\";\nimport cx from \"classnames\";\nimport { last } from \"lodash\";\nimport React, { useCallback, useMemo } from \"react\";\n\nimport { plotableRosTypes, type PlotConfig } from \"./index\";\nimport styles from \"./PlotLegend.module.scss\";\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport MessagePathInput from \"webviz-core/src/components/MessagePathSyntax/MessagePathInput\";\nimport {\n  type PlotPath,\n  type BasePlotPath,\n  isReferenceLinePlotPathType,\n} from \"webviz-core/src/panels/Plot/internalTypes\";\nimport { lineColors } from \"webviz-core/src/util/plotColors\";\nimport type { TimestampMethod } from \"webviz-core/src/util/time\";\n\ntype PlotLegendProps = {|\n  paths: PlotPath[],\n  saveConfig: ($Shape<PlotConfig>) => void,\n  showLegend: boolean,\n  xAxisVal: \"timestamp\" | \"index\" | \"custom\",\n  xAxisPath?: BasePlotPath,\n|};\n\nexport default function PlotLegend(props: PlotLegendProps) {\n  const { paths, saveConfig, showLegend, xAxisVal, xAxisPath } = props;\n  const lastPath = last(paths);\n\n  const onInputChange = useCallback(\n    (value: string, index: ?number) => {\n      if (index == null) {\n        throw new Error(\"index not set\");\n      }\n      const newPaths = paths.slice();\n      newPaths[index] = { ...newPaths[index], value: value.trim() };\n      saveConfig({ paths: newPaths });\n    },\n    [paths, saveConfig]\n  );\n\n  const onInputTimestampMethodChange = useCallback(\n    (value: TimestampMethod, index: ?number) => {\n      if (index == null) {\n        throw new Error(\"index not set\");\n      }\n      const newPaths = paths.slice();\n      newPaths[index] = { ...newPaths[index], timestampMethod: value };\n      saveConfig({ paths: newPaths });\n    },\n    [paths, saveConfig]\n  );\n\n  const { toggleToHideLegend, toggleToShowLegend } = useMemo(\n    () => ({\n      toggleToHideLegend: () => saveConfig({ showLegend: false }),\n      toggleToShowLegend: () => saveConfig({ showLegend: true }),\n    }),\n    [saveConfig]\n  );\n\n  if (!showLegend) {\n    return (\n      <div className={styles.root}>\n        <Icon className={styles.legendToggle} onClick={toggleToShowLegend}>\n          <MenuIcon />\n        </Icon>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      <Icon className={styles.legendToggle} onClick={toggleToHideLegend}>\n        <MenuIcon />\n      </Icon>\n      <div className={styles.item}>\n        x:\n        <div className={styles.itemIconContainer} style={{ width: \"auto\", lineHeight: \"normal\", zIndex: 2 }}>\n          <Dropdown\n            dataTest=\"plot-legend-x-axis-menu\"\n            value={xAxisVal}\n            btnStyle={{ backgroundColor: \"transparent\", padding: 3 }}\n            onChange={(newXAxisVal) => saveConfig({ xAxisVal: newXAxisVal })}\n            noPortal>\n            <span value=\"timestamp\">timestamp</span>\n            <span value=\"index\">index</span>\n            <span value=\"custom\">custom</span>\n          </Dropdown>\n        </div>\n        <div\n          className={cx({\n            [styles.itemInput]: true,\n            [styles.itemInputDisabled]: !xAxisPath?.enabled,\n          })}\n          style={{ display: \"flex\" }}>\n          {xAxisVal === \"custom\" ? (\n            <MessagePathInput\n              path={xAxisPath?.value || \"/\"}\n              onChange={(newXAxisVal) =>\n                saveConfig({ xAxisPath: { value: newXAxisVal, enabled: xAxisPath ? xAxisPath.enabled : true } })\n              }\n              validTypes={plotableRosTypes}\n              placeholder=\"Enter a topic name or a number\"\n              disableAutocomplete={xAxisPath && isReferenceLinePlotPathType(xAxisPath)}\n              autoSize\n            />\n          ) : null}\n        </div>\n      </div>\n      {paths.map((path: PlotPath, index: number) => {\n        const isReferenceLinePlotPath = isReferenceLinePlotPathType(path);\n        let timestampMethod;\n        // Only allow chosing the timestamp method if it is applicable (not a reference line) and there is at least\n        // one character typed.\n        if (!isReferenceLinePlotPath && path.value.length > 0) {\n          timestampMethod = path.timestampMethod;\n        }\n        return (\n          <React.Fragment key={index}>\n            <div className={styles.item}>\n              y:\n              <div\n                className={styles.itemIconContainer}\n                style={{ zIndex: 1 }}\n                onClick={() => {\n                  const newPaths = paths.slice();\n                  newPaths[index] = { ...newPaths[index], enabled: !newPaths[index].enabled };\n                  saveConfig({ paths: newPaths });\n                }}>\n                <div\n                  className={styles.itemIcon}\n                  style={{ color: path.enabled ? lineColors[index % lineColors.length] : \"#777\" }}\n                />\n              </div>\n              <div\n                className={cx({\n                  [styles.itemInput]: true,\n                  [styles.itemInputDisabled]: !path.enabled,\n                })}>\n                <MessagePathInput\n                  path={path.value}\n                  onChange={onInputChange}\n                  onTimestampMethodChange={onInputTimestampMethodChange}\n                  validTypes={plotableRosTypes}\n                  placeholder=\"Enter a topic name or a number\"\n                  index={index}\n                  autoSize\n                  disableAutocomplete={isReferenceLinePlotPath}\n                  {...(xAxisVal === \"timestamp\" ? { timestampMethod } : null)}\n                />\n              </div>\n              <div\n                className={styles.itemRemove}\n                onClick={() => {\n                  const newPaths = paths.slice();\n                  newPaths.splice(index, 1);\n                  saveConfig({ paths: newPaths });\n                }}>\n                ✕\n              </div>\n            </div>\n          </React.Fragment>\n        );\n      })}\n      <div\n        className={styles.addLine}\n        onClick={() =>\n          saveConfig({\n            paths: [\n              ...paths,\n              {\n                value: \"\",\n                enabled: true,\n                // For convenience, default to the `timestampMethod` of the last path.\n                timestampMethod: lastPath ? lastPath.timestampMethod : \"receiveTime\",\n              },\n            ],\n          })\n        }>\n        + add line\n      </div>\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotLegend.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotLegend.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotLegend.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-Plot-PlotLegend-module-hqdgr--root {\\n  position: absolute;\\n  left: 65px;\\n  top: 25px;\\n  background: rgba(45, 44, 51, 0.7);\\n  color: #eee;\\n  max-width: calc(100% - 65px - 25px); }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-hqdgr--root:hover {\\n    background: rgba(45, 44, 51, 0.7); }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-35sea--addLine {\\n  display: none;\\n  content: \\\"+ add line\\\";\\n  position: absolute;\\n  background: rgba(45, 44, 51, 0.7);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  -webkit-transform: translateY(100%);\\n      -ms-transform: translateY(100%);\\n          transform: translateY(100%);\\n  padding: 6px;\\n  cursor: pointer;\\n  text-align: center; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-35sea--addLine:hover {\\n    background: #403f49; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-hqdgr--root:hover .packages-webviz-core-src-panels-Plot-PlotLegend-module-35sea--addLine {\\n    display: block; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-gxp3j--item {\\n  display: -ms-flexbox;\\n  display: flex;\\n  padding: 0 5px;\\n  height: 20px;\\n  line-height: 20px;\\n  position: relative; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-gxp3j--item:hover {\\n    background: #403f49; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-3zckg--itemIconContainer {\\n  display: inline-block;\\n  width: 22px;\\n  height: 20px;\\n  line-height: 0;\\n  cursor: pointer;\\n  text-align: center;\\n  -ms-flex-negative: 0;\\n      flex-shrink: 0; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-3zckg--itemIconContainer:hover {\\n    background: #565462; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-4k2d2--itemIcon {\\n  display: inline-block;\\n  width: 15px;\\n  border-bottom: 2px solid currentColor;\\n  height: 0px;\\n  vertical-align: middle;\\n  position: relative;\\n  top: calc(50% - 1px); }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-2x85m--legendToggle {\\n  visibility: hidden;\\n  padding: 6px;\\n  cursor: pointer;\\n  position: absolute;\\n  top: 0;\\n  left: -30px;\\n  height: 25px;\\n  border-radius: 5px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  background: #403f49; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-2x85m--legendToggle:hover {\\n    background: #403f49; }\\n  .mosaic-window:hover .packages-webviz-core-src-panels-Plot-PlotLegend-module-2x85m--legendToggle {\\n    visibility: initial; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-2cz1t--itemRemove {\\n  visibility: hidden;\\n  padding: 0 6px;\\n  cursor: pointer;\\n  position: absolute;\\n  right: -21px;\\n  background: transparent;\\n  height: 20px;\\n  line-height: 20px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-2cz1t--itemRemove:hover {\\n    background: #403f49; }\\n  .packages-webviz-core-src-panels-Plot-PlotLegend-module-gxp3j--item:hover .packages-webviz-core-src-panels-Plot-PlotLegend-module-2cz1t--itemRemove {\\n    visibility: initial; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-22dxt--itemInput {\\n  overflow: hidden;\\n  width: 100%; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotLegend-module-3fhwe--itemInputDisabled input {\\n  text-decoration: line-through; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotLegend.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAaA;EAEE,mBAAkB;EAClB,WAFuB;EAGvB,UAAS;EACT,kCCmBe;EDlBf,YAAW;EACX,oCAAmD,EAKpD;EAZD;IAUI,kCCca,EDbd;;AAGH;EACE,cAAa;EACb,sBAAqB;EACrB,mBAAkB;EAClB,kCCMe;EDLf,QAAO;EACP,SAAQ;EACR,UAAS;EACT,oCAA2B;MAA3B,gCAA2B;UAA3B,4BAA2B;EAC3B,aAAY;EACZ,gBAAe;EACf,mBAAkB,EASnB;EApBD;IAcI,oBAhCyE,EAiC1E;EAED;IACE,eAAc,EACf;;AAGH;EACE,qBAAa;EAAb,cAAa;EACb,eAAc;EACd,aAzCuB;EA0CvB,kBA1CuB;EA2CvB,mBAAkB,EAKnB;EAVD;IAQI,oBAhDyE,EAiD1E;;AAGH;EACE,sBAAqB;EACrB,YAAW;EACX,aArDuB;EAsDvB,eAAc;EACd,gBAAe;EACf,mBAAkB;EAClB,qBAAc;MAAd,eAAc,EAKf;EAZD;IAUI,oBA7D4E,EA8D7E;;AAGH;EACE,sBAAqB;EACrB,YAAW;EACX,sCAAqC;EACrC,YAAW;EACX,uBAAsB;EACtB,mBAAkB;EAClB,qBAAoB,EACrB;;AAED;EACE,mBAAkB;EAClB,aAAY;EACZ,gBAAe;EACf,mBAAkB;EAClB,OAAM;EACN,YAAW;EACX,aAAY;EACZ,mBAAkB;EAClB,0BAAiB;KAAjB,uBAAiB;MAAjB,sBAAiB;UAAjB,kBAAiB;EACjB,oBAtF2E,EA+F5E;EAnBD;IAaI,oBAzFyE,EA0F1E;EAED;IACE,oBAAmB,EACpB;;AAGH;EACE,mBAAkB;EAClB,eAAc;EACd,gBAAe;EACf,mBAAkB;EAClB,aAAY;EACZ,wBAAuB;EACvB,aAtGuB;EAuGvB,kBAvGuB;EAwGvB,0BAAiB;KAAjB,uBAAiB;MAAjB,sBAAiB;UAAjB,kBAAiB,EASlB;EAlBD;IAYI,oBA7GyE,EA8G1E;EAED;IACE,oBAAmB,EACpB;;AAGH;EACE,iBAAgB;EAChB,YAAW,EACZ;;AAID;EACE,8BAA6B,EAC9B\",\"file\":\"PlotLegend.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n$legend-highlight-color: rgba($toolbar, 0.7);\\n$legend-highlight-color-bright: lighten(rgba($legend-highlight-color, 1), 8%);\\n$legend-highlight-color-brighter: lighten(rgba($legend-highlight-color, 1), 17%);\\n$legend-item-height: 20px;\\n\\n.root {\\n  $legend-root-left: 65px;\\n  position: absolute;\\n  left: $legend-root-left;\\n  top: 25px;\\n  background: $legend-highlight-color;\\n  color: #eee;\\n  max-width: calc(100% - #{$legend-root-left} - 25px); // Leave some space at the end for the \\\"X\\\".\\n\\n  &:hover {\\n    background: $legend-highlight-color;\\n  }\\n}\\n\\n.addLine {\\n  display: none;\\n  content: \\\"+ add line\\\";\\n  position: absolute;\\n  background: $legend-highlight-color;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  transform: translateY(100%);\\n  padding: 6px;\\n  cursor: pointer;\\n  text-align: center;\\n\\n  &:hover {\\n    background: $legend-highlight-color-bright;\\n  }\\n\\n  .root:hover & {\\n    display: block;\\n  }\\n}\\n\\n.item {\\n  display: flex;\\n  padding: 0 5px;\\n  height: $legend-item-height;\\n  line-height: $legend-item-height;\\n  position: relative;\\n\\n  &:hover {\\n    background: $legend-highlight-color-bright;\\n  }\\n}\\n\\n.itemIconContainer {\\n  display: inline-block;\\n  width: 22px;\\n  height: $legend-item-height;\\n  line-height: 0;\\n  cursor: pointer;\\n  text-align: center;\\n  flex-shrink: 0;\\n\\n  &:hover {\\n    background: $legend-highlight-color-brighter;\\n  }\\n}\\n\\n.itemIcon {\\n  display: inline-block;\\n  width: 15px;\\n  border-bottom: 2px solid currentColor;\\n  height: 0px;\\n  vertical-align: middle;\\n  position: relative;\\n  top: calc(50% - 1px);\\n}\\n\\n.legendToggle {\\n  visibility: hidden;\\n  padding: 6px;\\n  cursor: pointer;\\n  position: absolute;\\n  top: 0;\\n  left: -30px;\\n  height: 25px;\\n  border-radius: 5px;\\n  user-select: none;\\n  background: $legend-highlight-color-bright;\\n\\n  &:hover {\\n    background: $legend-highlight-color-bright;\\n  }\\n\\n  :global(.mosaic-window):hover & {\\n    visibility: initial;\\n  }\\n}\\n\\n.itemRemove {\\n  visibility: hidden;\\n  padding: 0 6px;\\n  cursor: pointer;\\n  position: absolute;\\n  right: -21px;\\n  background: transparent;\\n  height: $legend-item-height;\\n  line-height: $legend-item-height;\\n  user-select: none;\\n\\n  &:hover {\\n    background: $legend-highlight-color-bright;\\n  }\\n\\n  .item:hover & {\\n    visibility: initial;\\n  }\\n}\\n\\n.itemInput {\\n  overflow: hidden;\\n  width: 100%;\\n}\\n\\n// <input> is several levels deeper, and there's not too much chance\\n// of leaking stuff here, so not using `>`.\\n.itemInputDisabled input {\\n  text-decoration: line-through;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"root\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-hqdgr--root\",\n\t\"addLine\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-35sea--addLine\",\n\t\"item\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-gxp3j--item\",\n\t\"itemIconContainer\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-3zckg--itemIconContainer\",\n\t\"itemIcon\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-4k2d2--itemIcon\",\n\t\"legendToggle\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-2x85m--legendToggle\",\n\t\"itemRemove\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-2cz1t--itemRemove\",\n\t\"itemInput\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-22dxt--itemInput\",\n\t\"itemInputDisabled\": \"packages-webviz-core-src-panels-Plot-PlotLegend-module-3fhwe--itemInputDisabled\"\n};","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./MessagePathInput.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./MessagePathInput.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./MessagePathInput.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3verb--timestampMethodDropdownContainer {\\n  -ms-flex-negative: 100;\\n      flex-shrink: 100;\\n  min-width: 20px;\\n  white-space: nowrap; }\\n\\n.packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3cepp--timestampMethodDropdown {\\n  cursor: pointer;\\n  padding-left: 2px;\\n  color: rgba(247, 247, 243, 0.3); }\\n  .packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3cepp--timestampMethodDropdown.packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3v61x--timestampMethodDropdownError {\\n    color: #ff7c96; }\\n  .packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3cepp--timestampMethodDropdown:hover {\\n    color: rgba(247, 247, 243, 0.77); }\\n\\n.packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3nvnu--timestampItemError {\\n  color: #ff7c96; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/MessagePathSyntax/MessagePathInput.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAQA;EACE,uBAAgB;MAAhB,iBAAgB;EAChB,gBAAe;EACf,oBAAmB,EACpB;;AAED;EACE,gBAAe;EACf,kBAAiB;EACjB,gCCDmC,EDUpC;EAZD;IAMI,eCoBS,EDnBV;EAPH;IAUI,iCCVmC,EDWpC;;AAGH;EACE,eCWW,EDVZ\",\"file\":\"MessagePathInput.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n.timestampMethodDropdownContainer {\\n  flex-shrink: 100;\\n  min-width: 20px;\\n  white-space: nowrap;\\n}\\n\\n.timestampMethodDropdown {\\n  cursor: pointer;\\n  padding-left: 2px;\\n  color: $text-muted;\\n\\n  &.timestampMethodDropdownError {\\n    color: $red;\\n  }\\n\\n  &:hover {\\n    color: $text-normal;\\n  }\\n}\\n\\n.timestampItemError {\\n  color: $red;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"timestampMethodDropdownContainer\": \"packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3verb--timestampMethodDropdownContainer\",\n\t\"timestampMethodDropdown\": \"packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3cepp--timestampMethodDropdown\",\n\t\"timestampMethodDropdownError\": \"packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3v61x--timestampMethodDropdownError\",\n\t\"timestampItemError\": \"packages-webviz-core-src-components-MessagePathSyntax-MessagePathInput-module-3nvnu--timestampItemError\"\n};","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Autocomplete.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Autocomplete.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Autocomplete.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-Autocomplete-module-4nh6c--root {\\n  border-radius: 3px;\\n  border-top-left-radius: 0;\\n  -webkit-box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\\n          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\\n  position: fixed;\\n  overflow: auto;\\n  background: #2d2c33;\\n  z-index: 1;\\n  margin-left: -6px; }\\n\\n.packages-webviz-core-src-components-Autocomplete-module-4p3nz--input {\\n  -ms-flex-positive: 1;\\n      flex-grow: 1;\\n  margin: 0;\\n  padding: 0;\\n  background: transparent !important;\\n  color: inherit;\\n  border-radius: 0; }\\n  .packages-webviz-core-src-components-Autocomplete-module-4p3nz--input::-webkit-input-placeholder {\\n    color: rgba(247, 247, 243, 0.3); }\\n  .packages-webviz-core-src-components-Autocomplete-module-4p3nz--input:-ms-input-placeholder {\\n    color: rgba(247, 247, 243, 0.3); }\\n  .packages-webviz-core-src-components-Autocomplete-module-4p3nz--input::-ms-input-placeholder {\\n    color: rgba(247, 247, 243, 0.3); }\\n  .packages-webviz-core-src-components-Autocomplete-module-4p3nz--input::placeholder {\\n    color: rgba(247, 247, 243, 0.3); }\\n  .packages-webviz-core-src-components-Autocomplete-module-4p3nz--input.packages-webviz-core-src-components-Autocomplete-module-ucccr--inputError {\\n    color: #ff7c96; }\\n\\n.packages-webviz-core-src-components-Autocomplete-module-2jjcu--autocompleteItem {\\n  padding: 6px;\\n  cursor: pointer;\\n  min-height: 24px;\\n  line-height: 14px;\\n  overflow-wrap: break-word;\\n  color: rgba(247, 247, 243, 0.77); }\\n\\n.packages-webviz-core-src-components-Autocomplete-module-teqbe--selected {\\n  background-color: rgba(59, 46, 118, 0.6); }\\n\\n.packages-webviz-core-src-components-Autocomplete-module-3m69w--highlighted {\\n  background-color: #3b2e76; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/Autocomplete.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAUA;EACE,mBAAkB;EAClB,0BAAyB;EACzB,kDAAyC;UAAzC,0CAAyC;EACzC,gBAAe;EACf,eAAc;EACd,oBCqBe;EDpBf,WAAU;EACV,kBAAiB,EAClB;;AAED;EACE,qBAAY;MAAZ,aAAY;EACZ,UAAS;EACT,WAAU;EACV,mCAAkC;EAClC,eAAc;EACd,iBAAgB,EASjB;EAfD;IASI,gCCdiC,EDelC;EAVH;IASI,gCCdiC,EDelC;EAVH;IASI,gCCdiC,EDelC;EAVH;IASI,gCCdiC,EDelC;EAVH;IAaI,eCMS,EDLV;;AAGH;EACE,aAAY;EACZ,gBAAe;EACf,iBAjCe;EAkCf,kBAA+B;EAC/B,0BAAyB;EACzB,iCC9BqC,ED+BtC;;AAED;EACE,yCCxCkD,EDyCnD;;AACD;EACE,0BCzBuB,ED0BxB\",\"file\":\"Autocomplete.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n$row-height: 24px;\\n\\n.root {\\n  border-radius: 3px;\\n  border-top-left-radius: 0;\\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\\n  position: fixed;\\n  overflow: auto;\\n  background: $toolbar;\\n  z-index: 1;\\n  margin-left: -6px;\\n}\\n\\n.input {\\n  flex-grow: 1;\\n  margin: 0;\\n  padding: 0;\\n  background: transparent !important;\\n  color: inherit;\\n  border-radius: 0;\\n\\n  &::placeholder {\\n    color: $text-muted;\\n  }\\n\\n  &.inputError {\\n    color: $red;\\n  }\\n}\\n\\n.autocompleteItem {\\n  padding: 6px;\\n  cursor: pointer;\\n  min-height: $row-height;\\n  line-height: $row-height - 10px;\\n  overflow-wrap: break-word;\\n  color: $text-normal;\\n}\\n\\n.selected {\\n  background-color: $background-control-selected;\\n}\\n.highlighted {\\n  background-color: $menu-item-hover;\\n}\\n\\n:export {\\n  rowHeight: $row-height / 1px;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"rowHeight\": \"24\",\n\t\"root\": \"packages-webviz-core-src-components-Autocomplete-module-4nh6c--root\",\n\t\"input\": \"packages-webviz-core-src-components-Autocomplete-module-4p3nz--input\",\n\t\"inputError\": \"packages-webviz-core-src-components-Autocomplete-module-ucccr--inputError\",\n\t\"autocompleteItem\": \"packages-webviz-core-src-components-Autocomplete-module-2jjcu--autocompleteItem\",\n\t\"selected\": \"packages-webviz-core-src-components-Autocomplete-module-teqbe--selected\",\n\t\"highlighted\": \"packages-webviz-core-src-components-Autocomplete-module-3m69w--highlighted\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\n// Fuzzy matching: allow filter \"fzmg\" to match \"fuzzy/matching\".\n// Score by how early in the string matches appear.\nexport default function fuzzyFilter<T>(\n  options: T[],\n  filter: ?string,\n  getText: (T) => string = (x: any) => x,\n  sort: boolean = true\n): T[] {\n  if (!filter) {\n    return options;\n  }\n  const needle = filter.toLowerCase().replace(/[^a-z0-9]/g, \"\");\n  if (needle.length === 0) {\n    return options;\n  }\n\n  type Result = {| option: T, score: number |};\n  const results: Result[] = [];\n\n  for (const option of options) {\n    const haystack = getText(option).toLowerCase();\n    let charPos = -1;\n    let score = 0;\n    for (const char of needle) {\n      charPos = haystack.indexOf(char, charPos + 1);\n      if (charPos === -1) {\n        break;\n      }\n      score += charPos;\n    }\n    if (charPos !== -1) {\n      results.push({\n        option,\n        score: score * haystack.length,\n      });\n    }\n  }\n\n  if (sort) {\n    results.sort((a, b) => a.score - b.score);\n  }\n  return results.map((result: Result): T => result.option);\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport cx from \"classnames\";\nimport React from \"react\";\n\nimport styles from \"./PlotMenu.module.scss\";\nimport { PanelToolbarInput } from \"webviz-core/shared/panelToolbarStyles\";\nimport Item from \"webviz-core/src/components/Menu/Item\";\nimport { type TimeBasedChartTooltipData } from \"webviz-core/src/components/TimeBasedChart\";\nimport type { PlotConfig } from \"webviz-core/src/panels/Plot\";\nimport { type DataSet, type PlotChartPoint } from \"webviz-core/src/panels/Plot/PlotChart\";\nimport { downloadFiles } from \"webviz-core/src/util\";\nimport { formatTimeRaw } from \"webviz-core/src/util/time\";\n\nfunction isValidInput(value: string) {\n  return value === \"\" || !isNaN(parseFloat(value));\n}\n\nfunction formatData(\n  data: PlotChartPoint,\n  dataIndex: number,\n  label: string,\n  datasetKey: string,\n  tooltips: TimeBasedChartTooltipData[]\n) {\n  const { x, y } = data;\n  const tooltip = tooltips.find((_tooltip) => _tooltip.datasetKey === datasetKey);\n  if (!tooltip) {\n    throw new Error(\"Cannot find tooltip for dataset: this should never happen\");\n  }\n  const { receiveTime, headerStamp } = tooltip.item;\n  const receiveTimeFloat = formatTimeRaw(receiveTime);\n  const stampTime = headerStamp ? formatTimeRaw(headerStamp) : \"\";\n  return [x, receiveTimeFloat, stampTime, label, y];\n}\n\nexport function getCSVData(datasets: DataSet[], tooltips: TimeBasedChartTooltipData[]): string {\n  const headLine = [\"elapsed time\", \"receive time\", \"header.stamp\", \"topic\", \"value\"];\n  const combinedLines = [];\n  combinedLines.push(headLine);\n  datasets.forEach((dataset, idx) => {\n    dataset.data.forEach((data, dataIndex) => {\n      combinedLines.push(formatData(data, dataIndex, dataset.label, dataset.key, tooltips));\n    });\n  });\n  return combinedLines.join(\"\\n\");\n}\n\nfunction downloadCsvFile(datasets: DataSet[], tooltips: TimeBasedChartTooltipData[]) {\n  const csv = getCSVData(datasets, tooltips);\n  const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\n  downloadFiles([{ blob, fileName: `plot_data_export.csv` }]);\n}\n\nexport default function PlotMenu({\n  minYValue,\n  maxYValue,\n  saveConfig,\n  setMinMax,\n  datasets,\n  xAxisVal = \"timestamp\",\n  tooltips,\n}: {\n  minYValue: string,\n  maxYValue: string,\n  saveConfig: ($Shape<PlotConfig>) => void,\n  setMinMax: ($Shape<PlotConfig>) => void,\n  datasets: DataSet[],\n  xAxisVal?: \"timestamp\" | \"index\" | \"custom\",\n  tooltips: TimeBasedChartTooltipData[],\n}) {\n  return (\n    <>\n      <Item onClick={() => saveConfig({ maxYValue: maxYValue === \"\" ? \"10\" : \"\" })} tooltip=\"Maximum y-axis value\">\n        <div className={styles.label}>Maximum</div>\n        <PanelToolbarInput\n          type=\"number\"\n          className={cx(styles.input, { [styles.inputError]: !isValidInput(maxYValue) })}\n          value={maxYValue}\n          onChange={(event) => {\n            saveConfig({ maxYValue: event.target.value });\n          }}\n          onClick={(event) => event.stopPropagation()}\n          placeholder=\"auto\"\n        />\n      </Item>\n      <Item onClick={() => saveConfig({ minYValue: minYValue === \"\" ? \"-10\" : \"\" })} tooltip=\"Maximum y-axis value\">\n        <div className={styles.label}>Minimum</div>\n        <PanelToolbarInput\n          type=\"number\"\n          className={cx(styles.input, { [styles.inputError]: !isValidInput(minYValue) })}\n          value={minYValue}\n          onChange={(event) => {\n            saveConfig({ minYValue: event.target.value });\n          }}\n          onClick={(event) => event.stopPropagation()}\n          placeholder=\"auto\"\n        />\n      </Item>\n      <Item>\n        <button onClick={setMinMax}>Set min/max to current</button>\n      </Item>\n      <Item>\n        <button onClick={() => downloadCsvFile(datasets, tooltips)}>Download plot data (csv)</button>\n      </Item>\n    </>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotMenu.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotMenu.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./PlotMenu.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-Plot-PlotMenu-module-24fmd--label {\\n  display: inline-block;\\n  width: 65px; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotMenu-module-9hz5y--input {\\n  width: 70px;\\n  height: 22px; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotMenu-module-2hqz8--inputError {\\n  color: #ff7c96; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotMenu-module-427rj--lockItem {\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  -ms-flex-pack: justify;\\n      justify-content: space-between; }\\n\\n.packages-webviz-core-src-panels-Plot-PlotMenu-module-264qh--lockIcon {\\n  fill: currentColor; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/Plot/PlotMenu.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAQA;EACE,sBAAqB;EACrB,YAAW,EACZ;;AAED;EACE,YAAW;EACX,aAAY,EACb;;AAED;EACE,eCqBW,EDpBZ;;AAED;EACE,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB;EACnB,uBAA8B;MAA9B,+BAA8B,EAC/B;;AAED;EACE,mBAAkB,EACnB\",\"file\":\"PlotMenu.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n.label {\\n  display: inline-block;\\n  width: 65px;\\n}\\n\\n.input {\\n  width: 70px;\\n  height: 22px;\\n}\\n\\n.inputError {\\n  color: $red;\\n}\\n\\n.lockItem {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n\\n.lockIcon {\\n  fill: currentColor;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"label\": \"packages-webviz-core-src-panels-Plot-PlotMenu-module-24fmd--label\",\n\t\"input\": \"packages-webviz-core-src-panels-Plot-PlotMenu-module-9hz5y--input\",\n\t\"inputError\": \"packages-webviz-core-src-panels-Plot-PlotMenu-module-2hqz8--inputError\",\n\t\"lockItem\": \"packages-webviz-core-src-panels-Plot-PlotMenu-module-427rj--lockItem\",\n\t\"lockIcon\": \"packages-webviz-core-src-panels-Plot-PlotMenu-module-264qh--lockIcon\"\n};","module.exports = \"# State Transitions\\n\\nShows when values change. Can be used for any primitive value, but is most useful for \\\"enums\\\" (even though ROS does not have that as a formal concept). If you put constants in your ROS message definition, those constant names will be shown. You can only have one \\\"enum\\\" per message definition, otherwise we don't know which constant name to show (if there are multiple matches).\\n\\nThe values plotted are specified through Webviz's [message path syntax](/help/message-path-syntax).\\n\\nYou can zoom by scrolling, and pan by dragging. Double-click to reset.\\n\\nColors are hard-coded for the default paths. If you use a different path, you get some default colors. Please contact the Webviz team if you want more custom colors.\\n\"","module.exports = \"# Diagnostics - Detail\\n\\nDisplays diagnostics data for a given diagnostic name/hardware_id.  Select a diagnostic from the dropdown and the values will be displayed and updated in the panel below.\\n\\nDiagnostic keys and values support rich formatting with some basic HTML tags, such as `<b>`, `<i>`, `<u>`, `<tt>`, `<table>`, and more.\\n\"","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport PinIcon from \"@mdi/svg/svg/pin.svg\";\nimport cx from \"classnames\";\nimport { sortBy, compact } from \"lodash\";\nimport * as React from \"react\"; // eslint-disable-line import/no-duplicates\nimport { hot } from \"react-hot-loader/root\";\nimport { List, AutoSizer } from \"react-virtualized\";\n\nimport type { Config as DiagnosticStatusConfig } from \"./DiagnosticStatusPanel\";\nimport helpContent from \"./DiagnosticSummary.help.md\";\nimport styles from \"./DiagnosticSummary.module.scss\";\nimport { LEVELS, type DiagnosticId, type DiagnosticInfo, getNodesByLevel } from \"./util\";\nimport EmptyState from \"webviz-core/src/components/EmptyState\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport TopicToRenderMenu from \"webviz-core/src/components/TopicToRenderMenu\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport DiagnosticsHistory from \"webviz-core/src/panels/diagnostics/DiagnosticsHistory\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\nimport { DIAGNOSTIC_TOPIC } from \"webviz-core/src/util/globalConstants\";\nimport toggle from \"webviz-core/src/util/toggle\";\n\nconst LevelClasses = {\n  [LEVELS.OK]: styles.ok,\n  [LEVELS.WARN]: styles.warn,\n  [LEVELS.ERROR]: styles.error,\n  [LEVELS.STALE]: styles.stale,\n};\n\ntype NodeRowProps = {\n  info: DiagnosticInfo,\n  isPinned: boolean,\n  onClick: (info: DiagnosticInfo) => void,\n  onClickPin: (info: DiagnosticInfo) => void,\n};\nclass NodeRow extends React.PureComponent<NodeRowProps> {\n  onClick = () => {\n    const { info, onClick } = this.props;\n    onClick(info);\n  };\n  onClickPin = () => {\n    const { info, onClickPin } = this.props;\n    onClickPin(info);\n  };\n\n  render() {\n    const { info, isPinned } = this.props;\n\n    return (\n      <div\n        className={cx(LevelClasses[info.status.level], styles.nodeRow)}\n        onClick={this.onClick}\n        data-test-diagnostic-row>\n        <Icon fade={!isPinned} onClick={this.onClickPin} className={cx(styles.pinIcon, { [styles.pinned]: isPinned })}>\n          <PinIcon />\n        </Icon>\n        <span>{info.displayName}</span> &ndash; <span className={styles.message}>{info.status.message}</span>\n      </div>\n    );\n  }\n}\n\ntype Config = {| pinnedIds: DiagnosticId[], topicToRender: string, hardwareIdFilter: string |};\ntype Props = {\n  config: Config,\n  saveConfig: ($Shape<Config>) => void,\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n  topics: Topic[],\n};\n\nconst getSortedNodes = (nodes: DiagnosticInfo[], pinnedIds: DiagnosticId[]): DiagnosticInfo[] => {\n  return sortBy(nodes.filter((info) => pinnedIds.indexOf(info.id) === -1), (info) =>\n    info.displayName.replace(/^\\//, \"\")\n  );\n};\n\nclass DiagnosticSummary extends React.Component<Props> {\n  static panelType = \"DiagnosticSummary\";\n  static defaultConfig = { ...getGlobalHooks().perPanelHooks().DiagnosticSummary.defaultConfig };\n\n  togglePinned = (info: DiagnosticInfo) => {\n    this.props.saveConfig({ pinnedIds: toggle(this.props.config.pinnedIds, info.id) });\n  };\n\n  showDetails = (info: DiagnosticInfo) => {\n    this.props.openSiblingPanel(\n      \"DiagnosticStatusPanel\",\n      () =>\n        ({\n          selectedHardwareId: info.status.hardware_id,\n          selectedName: info.status.name,\n          topicToRender: this.props.config.topicToRender,\n        }: DiagnosticStatusConfig)\n    );\n  };\n\n  renderRow = ({ item, style, key, index }) => {\n    return (\n      <div key={key} style={style}>\n        <NodeRow\n          info={item}\n          isPinned={this.props.config.pinnedIds.indexOf(item.id) !== -1}\n          onClick={this.showDetails}\n          onClickPin={this.togglePinned}\n        />\n      </div>\n    );\n  };\n\n  renderHardwareFilter() {\n    const {\n      config: { hardwareIdFilter },\n      saveConfig,\n    } = this.props;\n    return (\n      <input\n        style={{ width: \"100%\", padding: \"0\", background: \"transparent\", opacity: \"0.5\" }}\n        value={hardwareIdFilter}\n        placeholder={\"Filter hardware id\"}\n        onChange={(e) => saveConfig({ hardwareIdFilter: e.target.value })}\n      />\n    );\n  }\n\n  renderTopicToRenderMenu = (topics) => {\n    const {\n      config: { topicToRender },\n      saveConfig,\n    } = this.props;\n    return (\n      <TopicToRenderMenu\n        topicToRender={topicToRender}\n        onChange={(newTopicToRender) => saveConfig({ topicToRender: newTopicToRender })}\n        topics={topics}\n        singleTopicDatatype={\"diagnostic_msgs/DiagnosticArray\"}\n        defaultTopicToRender={DIAGNOSTIC_TOPIC}\n      />\n    );\n  };\n\n  render() {\n    const {\n      config: { topicToRender },\n      topics,\n    } = this.props;\n    return (\n      <Flex col className={styles.panel}>\n        <PanelToolbar helpContent={helpContent} additionalIcons={this.renderTopicToRenderMenu(topics)}>\n          {this.renderHardwareFilter()}\n        </PanelToolbar>\n        <Flex col>\n          <DiagnosticsHistory topic={topicToRender}>\n            {(buffer) => {\n              if (buffer.diagnosticsById.size === 0) {\n                return (\n                  <EmptyState>\n                    Waiting for <code>{topicToRender}</code> messages\n                  </EmptyState>\n                );\n              }\n              const { pinnedIds, hardwareIdFilter } = this.props.config;\n              const pinnedNodes = pinnedIds.map((id) => buffer.diagnosticsById.get(id));\n\n              const nodes: DiagnosticInfo[] = [\n                ...compact(pinnedNodes),\n                ...getSortedNodes(getNodesByLevel(buffer, hardwareIdFilter, LEVELS.STALE), pinnedIds),\n                ...getSortedNodes(getNodesByLevel(buffer, hardwareIdFilter, LEVELS.ERROR), pinnedIds),\n                ...getSortedNodes(getNodesByLevel(buffer, hardwareIdFilter, LEVELS.WARN), pinnedIds),\n                ...getSortedNodes(getNodesByLevel(buffer, hardwareIdFilter, LEVELS.OK), pinnedIds),\n              ];\n              return nodes.length === 0 ? null : (\n                <AutoSizer>\n                  {({ height, width }) => (\n                    <List\n                      width={width}\n                      height={height}\n                      style={{ outline: \"none\" }}\n                      rowHeight={25}\n                      rowRenderer={(rowProps) => this.renderRow({ ...rowProps, item: nodes[rowProps.index] })}\n                      rowCount={nodes.length}\n                      overscanRowCount={10}\n                    />\n                  )}\n                </AutoSizer>\n              );\n            }}\n          </DiagnosticsHistory>\n        </Flex>\n      </Flex>\n    );\n  }\n}\n\nexport default hot(Panel<Config>(DiagnosticSummary));\n","module.exports = \"# Diagnostics - Summary\\n\\nDisplays the status of all the nodes it has seen in groups from:\\n\\n- Pinned nodes\\n- Stale\\n- Error\\n- Warn\\n- Ok\\n\\nYou can pin a specific node you are interested in by clicking the pin icon next to it (appears on hover).\\n\\nYou can also click a key to see it show up in the Runtime Monitor Details Panel.\\n\"","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./DiagnosticSummary.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./DiagnosticSummary.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./DiagnosticSummary.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-22q15--nodeRow {\\n  text-decoration: none;\\n  padding: 8px 12px;\\n  cursor: pointer;\\n  color: rgba(247, 247, 243, 0.77);\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-22q15--nodeRow:hover {\\n  background-color: #3b2e76;\\n  color: rgba(247, 247, 243, 0.77); }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2qy3f--pinIcon {\\n  margin-right: 4px; }\\n  .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2qy3f--pinIcon svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2w6bg--panel {\\n  background-color: #121217; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-3x32j--ok .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2dfc7--message {\\n  color: #05d27d; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-42j44--warn .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2dfc7--message {\\n  color: #ccb862; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2jahw--error .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2dfc7--message {\\n  color: #ff7c96; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-w8nc9--stale .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2dfc7--message {\\n  color: rgba(247, 247, 243, 0.3); }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2qy3f--pinIcon {\\n  margin-left: 4px;\\n  vertical-align: middle;\\n  visibility: hidden; }\\n  .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2qy3f--pinIcon.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-4pagz--pinned,\\n  .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-22q15--nodeRow:hover .packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2qy3f--pinIcon {\\n    visibility: visible; }\\n\\n.packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-22q15--nodeRow {\\n  padding: 0;\\n  line-height: 24px;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  -o-text-overflow: ellipsis;\\n     text-overflow: ellipsis; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/diagnostics/DiagnosticSummary.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAoCA;ECCE,sBAAqB;EACrB,kBA5ByC;EA6BzC,gBAAe;EACf,iCC1BqC;ED2BrC,0BAAiB;KAAjB,uBAAiB;MAAjB,sBAAiB;UAAjB,kBAAiB;EACjB,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB,EAKpB;;ADZD;ECqCE,0BC/CuB;EDgDvB,iCC5DqC,ED6DtC;;ADlDD;ECiEE,kBAAiB,EAMlB;EDvED;ICmEI,gBAAe;IACf,mBAAkB;IAClB,UAAS,EACV;;ADtFH;EACE,0BEJkB,EFKnB;;AACD;EACE,eEiBa,EFhBd;;AACD;EACE,eEuBc,EFtBf;;AACD;EACE,eEqBW,EFpBZ;;AACD;EACE,gCENmC,EFOpC;;AAED;EAEE,iBAAgB;EAChB,uBAAsB;EACtB,mBAAkB,EAKnB;EATD;;IAOI,oBAAmB,EACpB;;AAGH;EAEE,WAAU;EACV,kBAAiB;EAEjB,iBAAgB;EAChB,oBAAmB;EACnB,2BAAuB;KAAvB,wBAAuB,EACxB\",\"file\":\"DiagnosticSummary.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n.panel {\\n  background-color: $background;\\n}\\n.ok .message {\\n  color: $green;\\n}\\n.warn .message {\\n  color: $orange;\\n}\\n.error .message {\\n  color: $red;\\n}\\n.stale .message {\\n  color: $text-muted;\\n}\\n\\n.pinIcon {\\n  @extend %list-item-icon;\\n  margin-left: 4px;\\n  vertical-align: middle;\\n  visibility: hidden;\\n  &.pinned,\\n  .nodeRow:hover & {\\n    visibility: visible;\\n  }\\n}\\n\\n.nodeRow {\\n  @extend %menu-item;\\n  padding: 0;\\n  line-height: 24px;\\n\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"nodeRow\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-22q15--nodeRow\",\n\t\"pinIcon\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2qy3f--pinIcon\",\n\t\"panel\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2w6bg--panel\",\n\t\"ok\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-3x32j--ok\",\n\t\"message\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2dfc7--message\",\n\t\"warn\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-42j44--warn\",\n\t\"error\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-2jahw--error\",\n\t\"stale\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-w8nc9--stale\",\n\t\"pinned\": \"packages-webviz-core-src-panels-diagnostics-DiagnosticSummary-module-4pagz--pinned\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { partition, pick, without } from \"lodash\";\nimport React, { type Node, useState, useMemo, useRef } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport ReactInputAutosize from \"react-input-autosize\";\nimport styled from \"styled-components\";\n\nimport helpContent from \"./index.help.md\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport useGlobalVariables from \"webviz-core/src/hooks/useGlobalVariables\";\nimport { UnlinkGlobalVariables } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions\";\nimport { memoizedGetLinkedGlobalVariablesKeyByName } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/interactionUtils\";\nimport useLinkedGlobalVariables from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/useLinkedGlobalVariables\";\nimport inScreenshotTests from \"webviz-core/src/stories/inScreenshotTests\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\nimport { GLOBAL_VARIABLES_QUERY_KEY } from \"webviz-core/src/util/globalConstants\";\n\nconst SDeleteIcon = styled.span`\n  display: inline-block;\n  visibility: hidden;\n  font-size: 12px;\n  width: 19px;\n  cursor: pointer;\n  padding-left: 1px;\n\n  &:hover {\n    color: white;\n  }\n`;\n\nconst SGlobalVariables = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  padding: 8px 0;\n  white-space: nowrap;\n\n  table {\n    width: 99%;\n  }\n\n  tr:nth-child(odd) {\n    background-color: #222;\n  }\n\n  tr:hover ${SDeleteIcon} {\n    visibility: visible;\n  }\n\n  td {\n    border: none;\n    padding: 0 8px;\n\n    input {\n      background: none !important;\n      color: inherit;\n      width: 100%;\n      padding-left: 0;\n      padding-right: 0;\n      min-width: 40px;\n    }\n  }\n`;\n\nconst parseJson = (val: string): ?mixed => {\n  try {\n    return JSON.parse(val);\n  } catch (e) {\n    return undefined;\n  }\n};\n\nconst keyValMap = { ArrowDown: -1, ArrowUp: 1 };\nfunction JSONInput(props: {| value: string, onChange: (mixed) => void |}) {\n  const [internalValue, setInternalValue] = useState<string>(props.value);\n  const lastPropsValue = useRef<string>(props.value);\n  if (lastPropsValue.current !== props.value) {\n    lastPropsValue.current = props.value;\n    setInternalValue(props.value);\n  }\n  const parsedValue = parseJson(internalValue);\n  const isValid = parsedValue !== undefined;\n  return (\n    <input\n      style={{ color: isValid ? \"white\" : colors.red }}\n      data-test=\"json-input\"\n      type=\"text\"\n      value={internalValue}\n      onChange={(e) => {\n        setInternalValue(e.target.value);\n        const newParsedValue = parseJson(e.target.value);\n        if (newParsedValue !== undefined) {\n          props.onChange(newParsedValue);\n        }\n      }}\n      onKeyDown={(e) => {\n        if (typeof parsedValue === \"number\" && keyValMap[e.key]) {\n          const newParsedValue = parsedValue + keyValMap[e.key];\n          setInternalValue(`${newParsedValue}`);\n          props.onChange(newParsedValue);\n        }\n      }}\n    />\n  );\n}\n\nfunction ValidatedResizingInput(props: {| value: string, onChange: (string) => void, invalidInputs: string[] |}) {\n  const [internalValue, setInternalValue] = useState<string>(props.value);\n  const lastPropsValue = useRef<string>(props.value);\n  if (lastPropsValue.current !== props.value) {\n    lastPropsValue.current = props.value;\n    setInternalValue(props.value);\n  }\n  return (\n    <ReactInputAutosize\n      style={{ color: !props.invalidInputs.includes(internalValue) ? \"white\" : colors.red }}\n      value={`$${internalValue}`}\n      onChange={(event) => {\n        const value = event.target.value.slice(1);\n        setInternalValue(value);\n        if (!props.invalidInputs.includes(value)) {\n          props.onChange(value);\n        }\n      }}\n    />\n  );\n}\n\nconst changeGlobalKey = (newKey, oldKey, globalVariables, idx, overwriteGlobalVariables) => {\n  const keys = Object.keys(globalVariables);\n  overwriteGlobalVariables({\n    ...pick(globalVariables, keys.slice(0, idx)),\n    [newKey]: globalVariables[oldKey],\n    ...pick(globalVariables, keys.slice(idx + 1)),\n  });\n};\n\nfunction GlobalVariables(props: {}): Node {\n  const [btnMessage, setBtnMessage] = useState<string>(\"Copy\");\n  const { globalVariables, setGlobalVariables, overwriteGlobalVariables } = useGlobalVariables();\n  const { linkedGlobalVariables } = useLinkedGlobalVariables();\n  const globalVariableNames = Object.keys(globalVariables);\n  const linkedGlobalVariablesKeyByName = memoizedGetLinkedGlobalVariablesKeyByName(linkedGlobalVariables);\n  const [linked, unlinked] = partition(globalVariableNames, (name) => !!linkedGlobalVariablesKeyByName[name]);\n\n  const url = useMemo(\n    () => {\n      const queryParams = new URLSearchParams(window.location.search);\n      queryParams.set(GLOBAL_VARIABLES_QUERY_KEY, JSON.stringify(globalVariables));\n      if (inScreenshotTests()) {\n        return `http://localhost:3000/?${queryParams.toString()}`;\n      }\n      return `${window.location.host}/?${queryParams.toString()}`;\n    },\n    [globalVariables]\n  );\n\n  return (\n    <SGlobalVariables>\n      <PanelToolbar helpContent={helpContent} floating />\n      <table>\n        <tbody>\n          {linked.map((name, idx) => {\n            return (\n              <tr key={`linked-${idx}`}>\n                <td>\n                  <UnlinkGlobalVariables name={name} />\n                </td>\n                <td width=\"100%\">\n                  <JSONInput\n                    value={JSON.stringify(globalVariables[name] ?? \"\")}\n                    onChange={(newVal) => setGlobalVariables({ [name]: newVal })}\n                  />\n                </td>\n              </tr>\n            );\n          })}\n          {unlinked.map((name, idx) => (\n            <tr key={`unlinked-${idx}`}>\n              <td data-test=\"global-variable-key\">\n                <SDeleteIcon onClick={() => setGlobalVariables({ [name]: undefined })}>✕</SDeleteIcon>\n                <ValidatedResizingInput\n                  value={name}\n                  onChange={(newKey) =>\n                    changeGlobalKey(newKey, name, globalVariables, linked.length + idx, overwriteGlobalVariables)\n                  }\n                  invalidInputs={without(globalVariableNames, name).concat(\"\")}\n                />\n              </td>\n              <td width=\"100%\">\n                <JSONInput\n                  value={JSON.stringify(globalVariables[name] ?? \"\")}\n                  onChange={(newVal) => setGlobalVariables({ [name]: newVal })}\n                />\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <Flex style={{ margin: 8 }}>\n        <button data-test=\"add-variable-btn\" onClick={() => setGlobalVariables({ \"\": \"\" })}>\n          + Add variable\n        </button>\n        <input readOnly style={{ width: \"100%\" }} type=\"text\" value={url} />\n        {document.queryCommandSupported(\"copy\") && (\n          <button\n            onClick={() => {\n              clipboard.copy(url).then(() => {\n                setBtnMessage(\"Copied!\");\n                setTimeout(() => {\n                  setBtnMessage(\"Copy\");\n                }, 2000);\n              });\n            }}>\n            {btnMessage}\n          </button>\n        )}\n      </Flex>\n    </SGlobalVariables>\n  );\n}\n\nGlobalVariables.panelType = \"Global\";\nGlobalVariables.defaultConfig = {};\n\nexport default hot(Panel<{}>(GlobalVariables));\n","module.exports = \"# Global Variables\\n\\nAllows you to read and set global variables for any panel that uses the [message path syntax](/help/message-path-syntax) (e.g. Plot, State Transitions, Raw Messages, etc.).\\n\\nFor example, instead of having to change a particular object ID that you want to see visualizations for across panels, you can:\\n\\n- Set a `$my_object_ID` variable in the Global Variables panel\\n- Type `/my_objects.objects[:]{id==$my_object_ID}.some_field` in your Plot Panel to plot a particular field in your specified object\\n- Type `/my_objects.objects[:]{id==$my_object_ID}` in your Raw Messages Panel to see all the info for your specified object\\n\\nFor numeric global variable values, use the up and down arrow keys to increment and decrement the values, respectively.\\n\"","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport { type MouseEventObject } from \"regl-worldview\";\n\nimport GlobalVariableLink, { GlobalVariableName, SP } from \"./GlobalVariableLink/index\";\nimport { SRow, SValue, type InteractionData } from \"./index\";\nimport TopicLink from \"./TopicLink\";\n\ntype Props = {\n  selectedObject: MouseEventObject,\n  interactionData: InteractionData,\n};\n\nexport default function GeneralInfo({ selectedObject, interactionData }: Props) {\n  return (\n    <SRow>\n      <SValue>\n        <TopicLink topic={interactionData.topic} />\n      </SValue>\n      {selectedObject.object.id != null && (\n        <SValue>\n          <GlobalVariableLink\n            highlight\n            onlyRenderAddLink\n            markerKeyPath={[\"id\"]}\n            topic={interactionData.topic}\n            variableValue={selectedObject.object.id}\n            addLinkTooltip={\n              <SP style={{ marginTop: 0 }}>\n                Link <code>id</code> with global variable <GlobalVariableName name=\"id\" />\n              </SP>\n            }\n          />\n        </SValue>\n      )}\n    </SRow>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nconst SGlobalVariableName = styled.span`\n  color: #ccb862;\n  font-weight: bold;\n  max-width: 100px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding-left: ${(props) => (props.leftPadding ? \"6px\" : 0)};\n`;\n\nexport default function GlobalVariableName({ name, leftPadding }: {| name: string, leftPadding?: boolean |}) {\n  return (\n    <SGlobalVariableName title={name} leftPadding={leftPadding}>\n      ${name}\n    </SGlobalVariableName>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport LinkPlusIcon from \"@mdi/svg/svg/link-plus.svg\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\n\nimport useLinkedGlobalVariables from \"../useLinkedGlobalVariables\";\nimport { SGlobalVariableForm, GlobalVariableName } from \"./index\";\nimport UnlinkGlobalVariables from \"./UnlinkGlobalVariables\";\nimport Button from \"webviz-core/src/components/Button\";\nimport ChildToggle from \"webviz-core/src/components/ChildToggle\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport useGlobalVariables from \"webviz-core/src/hooks/useGlobalVariables\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\ntype AddToLinkedGlobalVariable = {\n  topic: string,\n  markerKeyPath: string[],\n  variableValue: any,\n};\n\ntype Props = {\n  highlight?: boolean,\n  addToLinkedGlobalVariable: AddToLinkedGlobalVariable,\n  style?: any,\n  tooltip?: React.Node,\n};\n\nfunction getInitialName(markerKeyPath: string[]) {\n  return markerKeyPath\n    .slice(0, 2)\n    .reverse()\n    .join(\"_\");\n}\n\nexport default function LinkToGlobalVariable({\n  style = {},\n  addToLinkedGlobalVariable: { topic, variableValue, markerKeyPath },\n  tooltip,\n  highlight,\n}: Props) {\n  const [isOpen, _setIsOpen] = React.useState<boolean>(false);\n  const [name, setName] = React.useState(() => getInitialName(markerKeyPath));\n\n  const setIsOpen = React.useCallback(\n    (newValue: boolean) => {\n      _setIsOpen(newValue);\n      if (newValue) {\n        setName(getInitialName(markerKeyPath));\n      }\n    },\n    [markerKeyPath]\n  );\n\n  const { setGlobalVariables } = useGlobalVariables();\n  const { linkedGlobalVariables, setLinkedGlobalVariables } = useLinkedGlobalVariables();\n\n  const addLink = (ev) => {\n    ev.preventDefault();\n    setGlobalVariables({ [name]: variableValue });\n    const newLinkedGlobalVariables = [...linkedGlobalVariables, { topic, markerKeyPath, name }];\n    setLinkedGlobalVariables(newLinkedGlobalVariables);\n    setIsOpen(false);\n  };\n\n  const highlightIconStyle = highlight ? { color: colors.highlight } : {};\n\n  return (\n    <ChildToggle\n      dataTest={`link-${name}`}\n      position=\"above\"\n      onToggle={() => setIsOpen(!isOpen)}\n      isOpen={isOpen}\n      style={style}>\n      <Icon\n        className={classNames(\"link-icon\", { highlight })}\n        style={highlightIconStyle}\n        fade={!highlight}\n        tooltip={tooltip || \"Link this field to a global variable\"}\n        tooltipProps={{ placement: \"top\" }}>\n        <LinkPlusIcon />\n      </Icon>\n      <SGlobalVariableForm onSubmit={addLink} data-test=\"link-form\">\n        <p style={{ marginTop: 0, lineHeight: \"1.4\" }}>\n          When linked, clicking a new object from {topic} will update the global variable&nbsp;\n          <GlobalVariableName name={name} />.\n        </p>\n        <UnlinkGlobalVariables name={name} showList />\n        <input autoFocus type=\"text\" value={`$${name}`} onChange={(e) => setName(e.target.value.replace(/^\\$/, \"\"))} />\n        <p data-test=\"action-buttons\">\n          <Button primary={!!name} disabled={!name} onClick={addLink}>\n            Add Link\n          </Button>\n          <Button onClick={() => setIsOpen(false)}>Cancel</Button>\n        </p>\n      </SGlobalVariableForm>\n    </ChildToggle>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { isEqual } from \"lodash\";\nimport * as React from \"react\";\n\nimport { getPath } from \"../interactionUtils\";\nimport useLinkedGlobalVariables, { type LinkedGlobalVariable } from \"../useLinkedGlobalVariables\";\nimport { SPath, SGlobalVariableForm, GlobalVariableName } from \"./index\";\nimport Button from \"webviz-core/src/components/Button\";\n\ntype Props = {\n  linkedGlobalVariable: LinkedGlobalVariable,\n  setIsOpen: (boolean) => void,\n};\nexport default function UnlinkGlobalVariable({\n  linkedGlobalVariable: { topic, markerKeyPath, name },\n  setIsOpen,\n}: Props) {\n  const { linkedGlobalVariables, setLinkedGlobalVariables } = useLinkedGlobalVariables();\n  return (\n    <SGlobalVariableForm style={{ marginLeft: 8 }} data-test=\"unlink-form\">\n      <p style={{ marginTop: 0, lineHeight: \"1.4\" }}>\n        Unlink <GlobalVariableName name={name} /> from {topic}.<SPath>{getPath(markerKeyPath)}</SPath>?\n      </p>\n      <Button\n        danger\n        onClick={() => {\n          const newLinkedGlobalVariables = linkedGlobalVariables.filter(\n            (linkedGlobalVariable) =>\n              !(\n                linkedGlobalVariable.topic === topic &&\n                isEqual(linkedGlobalVariable.markerKeyPath, markerKeyPath) &&\n                linkedGlobalVariable.name === name\n              )\n          );\n          setLinkedGlobalVariables(newLinkedGlobalVariables);\n          setIsOpen(false);\n        }}>\n        Unlink\n      </Button>\n      <Button onClick={() => setIsOpen(false)}>Cancel</Button>\n    </SGlobalVariableForm>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport { usePanelContext } from \"webviz-core/src/components/PanelContext\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport RawMessages, { type RawMessagesConfig } from \"webviz-core/src/panels/RawMessages/index\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\nconst STopicLink = styled.span`\n  cursor: pointer;\n  color: ${colors.highlight};\n`;\n\ntype Props = {\n  topic: string,\n};\n\nexport default function TopicLink({ topic }: Props) {\n  const { openSiblingPanel } = usePanelContext();\n  const openRawMessages = React.useCallback(\n    () => {\n      if (!openSiblingPanel) {\n        return;\n      }\n      openSiblingPanel(\n        // $FlowFixMe: https://stackoverflow.com/questions/52508434/adding-static-variable-to-union-of-class-types\n        RawMessages.panelType,\n        // $FlowFixMe\n        (config: RawMessagesConfig) => ({ ...config, topicPath: topic }: RawMessagesConfig)\n      );\n    },\n    [openSiblingPanel, topic]\n  );\n\n  return (\n    <Tooltip placement=\"top\" contents={`View ${topic} in Raw Messages panel`}>\n      {/* extra span to work around tooltip NaN positioning bug */}\n      <span>\n        <STopicLink onClick={openRawMessages}>{topic}</STopicLink>\n      </span>\n    </Tooltip>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport { diffLabels, diffArrow } from \"webviz-core/src/panels/RawMessages/getDiff\";\n\nexport const SDiffSpan = styled.span`\n  padding: 0px 4px;\n  text-decoration: inherit;\n`;\n\nexport function HighlightedValue({ itemLabel, keyPath }: { itemLabel: string, keyPath: Array<string | number> }) {\n  // react-json-tree's valueRenderer only gets called for primitives, so diff before/after values must be at same level by the time it gets to the tree\n  const splitItemLabel = `${itemLabel}`.split(` ${diffArrow} `);\n  const itemLabelContainsChange = splitItemLabel.length === 2;\n  if (itemLabelContainsChange) {\n    const [before, after] = splitItemLabel;\n    const beforeText = JSON.parse(JSON.stringify(before));\n    const afterText = JSON.parse(JSON.stringify(after));\n    return (\n      <SDiffSpan style={{ color: diffLabels.CHANGED.color }}>{`${beforeText} ${diffArrow} ${afterText}`}</SDiffSpan>\n    );\n  }\n  return <SDiffSpan>{itemLabel}</SDiffSpan>;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { last } from \"lodash\";\nimport memoizeWeak from \"memoize-weak\";\n\nimport { type MessagePathStructureItem } from \"webviz-core/src/components/MessagePathSyntax/constants\";\nimport { isTypicalFilterName } from \"webviz-core/src/components/MessagePathSyntax/isTypicalFilterName\";\n\nexport type ValueAction =\n  | {|\n      type: \"pivot\",\n      pivotPath: string, // Path to filter on using the current value, if the current value is an id.\n    |}\n  | {|\n      type: \"primitive\",\n      singleSlicePath: string, // Path that will only return one value per unit of time (for line charts).\n      multiSlicePath: string, // Path that might return multiple values per unit of time (for scatter plots).\n      primitiveType: string, // The ROS primitive type that these paths point at.\n    |};\n\n// Given a root value (e.g. a message object), a root structureItem (e.g. a message definition),\n// and a key path to navigate down the value and strutureItem (e.g. [\"items\", 10, \"speed\"]), return\n// a bunch of paths for that navigated down value.\nexport function getValueActionForValue(\n  rootValue: mixed,\n  rootStructureItem: ?MessagePathStructureItem,\n  keyPath: (number | string)[]\n): ?ValueAction {\n  let singleSlicePath = \"\";\n  let multiSlicePath = \"\";\n  let pivotPath = \"\";\n  let value: mixed = rootValue;\n  let structureItem: ?MessagePathStructureItem = rootStructureItem;\n  // Walk down the keyPath, while updating `value` and `structureItem`\n  for (const pathItem: number | string of keyPath) {\n    if (structureItem == null || value == null) {\n      break;\n    } else if (structureItem.structureType === \"message\" && typeof value === \"object\" && typeof pathItem === \"string\") {\n      structureItem = structureItem.nextByName[pathItem];\n      value = value[pathItem];\n      if (multiSlicePath.endsWith(\"[:]\")) {\n        // We're just inside a message that is inside an array, so we might want to pivot on this new value.\n        pivotPath = `${multiSlicePath}{${pathItem}==${JSON.stringify(value) || \"\"}}`;\n      } else {\n        pivotPath = \"\";\n      }\n      singleSlicePath += `.${pathItem}`;\n      multiSlicePath += `.${pathItem}`;\n    } else if (structureItem.structureType === \"array\" && Array.isArray(value) && typeof pathItem === \"number\") {\n      value = value[pathItem];\n      structureItem = structureItem.next;\n      if (!structureItem) {\n        break;\n      }\n      multiSlicePath = `${singleSlicePath}[:]`;\n      // Ideally show something like `/topic.object[:]{id=123}` for the singleSlicePath, but fall\n      // back to `/topic.object[10]` if necessary.\n      let typicalFilterName;\n      if (structureItem.structureType === \"message\") {\n        typicalFilterName = Object.keys(structureItem.nextByName).find((key) => isTypicalFilterName(key));\n      }\n      if (typeof value === \"object\" && value != null && typeof typicalFilterName === \"string\") {\n        singleSlicePath += `[:]{${typicalFilterName}==${JSON.stringify(value[typicalFilterName]) || \"\"}}`;\n      } else {\n        singleSlicePath += `[${pathItem}]`;\n      }\n    } else if (structureItem.structureType === \"primitive\") {\n      // ROS has some primitives that contain nested data (time+duration). We currently don't\n      // support looking inside them.\n      return;\n    } else {\n      throw new Error(`Invalid structureType: ${structureItem.structureType} for value/pathItem.`);\n    }\n  }\n  // At this point we should be looking at a primitive. If not, just return nothing.\n  if (structureItem && structureItem.structureType === \"primitive\" && value != null) {\n    if (pivotPath && isTypicalFilterName(last(keyPath).toString())) {\n      return { type: \"pivot\", pivotPath };\n    }\n    return {\n      type: \"primitive\",\n      singleSlicePath,\n      multiSlicePath,\n      primitiveType: structureItem.primitiveType,\n    };\n  }\n}\n\n// Given root structureItem (e.g. a message definition),\n// and a key path (comma-joined) to navigate down, return strutureItem for the field at that path\n// Using comma-joined path to allow memoization of this function\nexport const getStructureItemForPath = memoizeWeak(\n  (rootStructureItem: ?MessagePathStructureItem, keyPathJoined: string): ?MessagePathStructureItem => {\n    // split the path and parse into numbers and strings\n    const keyPath: (number | string)[] = [];\n    for (const part: string of keyPathJoined.split(\",\")) {\n      if (!isNaN(part)) {\n        keyPath.push(parseInt(part));\n      } else {\n        keyPath.push(part);\n      }\n    }\n    let structureItem: ?MessagePathStructureItem = rootStructureItem;\n    // Walk down the keyPath, while updating `value` and `structureItem`\n    for (const pathItem: number | string of keyPath) {\n      if (structureItem == null) {\n        break;\n      } else if (structureItem.structureType === \"message\" && typeof pathItem === \"string\") {\n        structureItem = structureItem.nextByName[pathItem];\n      } else if (structureItem.structureType === \"array\" && typeof pathItem === \"number\") {\n        structureItem = structureItem.next;\n        if (!structureItem) {\n          break;\n        }\n      } else if (structureItem.structureType === \"primitive\") {\n        // ROS has some primitives that contain nested data (time+duration). We currently don't\n        // support looking inside them.\n        return structureItem;\n      } else {\n        throw new Error(`Invalid structureType: ${structureItem.structureType} for value/pathItem.`);\n      }\n    }\n    return structureItem;\n  }\n);\n","module.exports = \"# Raw Messages\\n\\nDisplays the data from a specific topic in an easier to read format. As new messages are received the structure shows the latest data, but doesn't reset the view (e.g if you unfold a specific key - it'll stay that way with the values under it updating as messages come in).\\n\\nYou can drill down the message and filter arrays to specific messages using the [message path syntax](/help/message-path-syntax).\\n\\nIf you need to understand the data structure of the messages, a link is provided at the top.\\n\"","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-RawMessages-index-module-3np35--topicInputs {\\n  width: 100%;\\n  line-height: 20px; }\\n\\n.packages-webviz-core-src-panels-RawMessages-index-module-2aqxa--container {\\n  padding-left: 0.5em;\\n  font-family: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n  -webkit-font-feature-settings: \\\"tnum\\\";\\n          font-feature-settings: \\\"tnum\\\"; }\\n\\n.packages-webviz-core-src-panels-RawMessages-index-module-fnnzr--iconWrapper {\\n  display: inline;\\n  padding-right: 40px; }\\n\\n.packages-webviz-core-src-panels-RawMessages-index-module-2uwhq--iconBox {\\n  display: inline-block;\\n  white-space: nowrap;\\n  width: 0px;\\n  height: 0px;\\n  position: relative;\\n  left: 6px; }\\n\\n.packages-webviz-core-src-panels-RawMessages-index-module-44tte--icon > svg {\\n  vertical-align: top; }\\n\\n.packages-webviz-core-src-panels-RawMessages-index-module-4kv8d--singleVal {\\n  font-size: 2.5em;\\n  word-wrap: break-word;\\n  font-weight: bold; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/RawMessages/index.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\"],\"names\":[],\"mappings\":\"AAQA;EACE,YAAW;EACX,kBAAiB,EAClB;;AAED;EAEE,oBAAmB;ECiEnB,uEAHyE;EAIzE,sCAA6B;UAA7B,8BAA6B,EDhE9B;;AAED;EACE,gBAAe;EACf,oBAAmB,EACpB;;AAED;EACE,sBAAqB;EACrB,oBAAmB;EACnB,WAAU;EACV,YAAW;EACX,mBAAkB;EAClB,UAAS,EACV;;AAED;EAEI,oBAAmB,EACpB;;AAGH;EACE,iBAAgB;EAChB,sBAAqB;EACrB,kBAAiB,EAClB\",\"file\":\"index.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n.topicInputs {\\n  width: 100%;\\n  line-height: 20px;\\n}\\n\\n.container {\\n  // match the padding with the default padding used in react-json-tree\\n  padding-left: 0.5em;\\n  @include sans-serif;\\n}\\n\\n.iconWrapper {\\n  display: inline;\\n  padding-right: 40px; // To make it so the icons appear when you move the mouse somewhat close.\\n}\\n\\n.iconBox {\\n  display: inline-block;\\n  white-space: nowrap;\\n  width: 0px;\\n  height: 0px;\\n  position: relative;\\n  left: 6px;\\n}\\n\\n.icon {\\n  > svg {\\n    vertical-align: top;\\n  }\\n}\\n\\n.singleVal {\\n  font-size: 2.5em;\\n  word-wrap: break-word;\\n  font-weight: bold;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"topicInputs\": \"packages-webviz-core-src-panels-RawMessages-index-module-3np35--topicInputs\",\n\t\"container\": \"packages-webviz-core-src-panels-RawMessages-index-module-2aqxa--container\",\n\t\"iconWrapper\": \"packages-webviz-core-src-panels-RawMessages-index-module-fnnzr--iconWrapper\",\n\t\"iconBox\": \"packages-webviz-core-src-panels-RawMessages-index-module-2uwhq--iconBox\",\n\t\"icon\": \"packages-webviz-core-src-panels-RawMessages-index-module-44tte--icon\",\n\t\"singleVal\": \"packages-webviz-core-src-panels-RawMessages-index-module-4kv8d--singleVal\"\n};","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport ClipboardOutlineIcon from \"@mdi/svg/svg/clipboard-outline.svg\";\nimport { cloneDeepWith } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nimport Icon from \"webviz-core/src/components/Icon\";\nimport type { Message } from \"webviz-core/src/players/types\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\nimport { formatTimeRaw } from \"webviz-core/src/util/time\";\n\nconst SMetadata = styled.div`\n  margin-top: 4px;\n  font-size: 11px;\n  line-height: 1.3;\n  color: #aaa;\n`;\ntype Props = {\n  data: any,\n  diffData: any,\n  diff: any,\n  link: ?string,\n  message: Message,\n  diffMessage: ?Message,\n};\n\nfunction CopyMessageButton({ text, onClick }) {\n  return (\n    <a onClick={onClick} href=\"#\" style={{ textDecoration: \"none\" }}>\n      <Icon tooltip=\"Copy entire message to clipboard\" style={{ position: \"relative\", top: -1 }}>\n        <ClipboardOutlineIcon style={{ verticalAlign: \"middle\" }} />\n      </Icon>{\" \"}\n      {text}\n    </a>\n  );\n}\n\nexport default function Metadata({ data, diffData, diff, link, message, diffMessage }: Props) {\n  const onClickCopy = useCallback(\n    (dataToCopy) => (e: SyntheticMouseEvent<HTMLSpanElement>) => {\n      e.stopPropagation();\n      e.preventDefault();\n      const dataWithoutLargeArrays = cloneDeepWith(dataToCopy, (value) => {\n        if (typeof value === \"object\" && value.buffer) {\n          return \"<buffer>\";\n        }\n      });\n      clipboard.copy(JSON.stringify(dataWithoutLargeArrays, null, 2) || \"\");\n    },\n    []\n  );\n  return (\n    <SMetadata>\n      {!diffMessage &&\n        (link ? (\n          <a style={{ color: \"inherit\" }} target=\"_blank\" rel=\"noopener noreferrer\" href={link}>\n            {message.datatype}\n          </a>\n        ) : (\n          message.datatype\n        ))}\n      {message.receiveTime && `${diffMessage ? \" base\" : \"\"} @ ${formatTimeRaw(message.receiveTime)} ROS `}\n      <CopyMessageButton onClick={onClickCopy(data)} text=\"Copy msg\" />\n\n      {diffMessage && diffMessage.receiveTime && (\n        <>\n          <div>\n            {`diff @ ${formatTimeRaw(diffMessage.receiveTime)} ROS `}\n            <CopyMessageButton onClick={onClickCopy(diffData)} text=\"Copy msg\" />\n          </div>\n          <CopyMessageButton onClick={onClickCopy(diff)} text=\"Copy diff of msgs\" />\n        </>\n      )}\n    </SMetadata>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport ChartBubbleIcon from \"@mdi/svg/svg/chart-bubble.svg\";\nimport ChartLineVariantIcon from \"@mdi/svg/svg/chart-line-variant.svg\";\nimport DotsHorizontalIcon from \"@mdi/svg/svg/dots-horizontal.svg\";\nimport TargetIcon from \"@mdi/svg/svg/target.svg\";\nimport React, { type Node, useCallback } from \"react\";\n\nimport { type ValueAction } from \"./getValueActionForValue\";\nimport styles from \"./index.module.scss\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { openSiblingPlotPanel, plotableRosTypes } from \"webviz-core/src/panels/Plot\";\nimport { openSiblingStateTransitionsPanel, transitionableRosTypes } from \"webviz-core/src/panels/StateTransitions\";\nimport type { PanelConfig } from \"webviz-core/src/types/panels\";\n\ntype Props = {\n  valueAction: ValueAction,\n  basePath: string,\n  onTopicPathChange: (string) => void,\n  openSiblingPanel: (string, cb: (PanelConfig) => PanelConfig) => void,\n};\n\nexport default function RawMessagesIcons({ valueAction, basePath, onTopicPathChange, openSiblingPanel }: Props): Node {\n  const openPlotPanel = useCallback(\n    (pathSuffix: string) => () => {\n      openSiblingPlotPanel(openSiblingPanel, `${basePath}${pathSuffix}`);\n    },\n    [basePath, openSiblingPanel]\n  );\n  const openStateTransitionsPanel = useCallback(\n    (pathSuffix: string) => () => {\n      openSiblingStateTransitionsPanel(openSiblingPanel, `${basePath}${pathSuffix}`);\n    },\n    [basePath, openSiblingPanel]\n  );\n  const onPivot = useCallback(\n    () => onTopicPathChange(`${basePath}${valueAction.type === \"pivot\" ? valueAction.pivotPath : \"\"}`),\n    [basePath, onTopicPathChange, valueAction]\n  );\n  if (valueAction.type === \"pivot\") {\n    return (\n      <Icon fade className={styles.icon} onClick={onPivot} tooltip=\"Pivot on this value\" key=\"pivot\">\n        <TargetIcon />\n      </Icon>\n    );\n  }\n  const { singleSlicePath, multiSlicePath, primitiveType } = valueAction;\n  return (\n    <span>\n      {plotableRosTypes.includes(primitiveType) && (\n        <Icon fade className={styles.icon} onClick={openPlotPanel(singleSlicePath)} tooltip=\"Line chart\">\n          <ChartLineVariantIcon />\n        </Icon>\n      )}\n      {plotableRosTypes.includes(primitiveType) && multiSlicePath !== singleSlicePath && (\n        <Icon fade className={styles.icon} onClick={openPlotPanel(multiSlicePath)} tooltip=\"Scatter plot\">\n          <ChartBubbleIcon />\n        </Icon>\n      )}\n      {transitionableRosTypes.includes(primitiveType) && multiSlicePath === singleSlicePath && (\n        <Icon\n          fade\n          className={styles.icon}\n          onClick={openStateTransitionsPanel(singleSlicePath)}\n          tooltip=\"State Transitions\">\n          <DotsHorizontalIcon />\n        </Icon>\n      )}\n    </span>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { first, last } from \"lodash\";\nimport React from \"react\";\n\nimport { isTypicalFilterName } from \"webviz-core/src/components/MessagePathSyntax/isTypicalFilterName\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport { diffLabels } from \"webviz-core/src/panels/RawMessages/getDiff\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\nimport { format, formatDuration } from \"webviz-core/src/util/time\";\n\nconst DURATION_20_YEARS_SEC = 20 * 365 * 24 * 60 * 60;\nexport const DATA_ARRAY_PREVIEW_LIMIT = 20;\nexport const ROS_COMMON_MSGS: Set<string> = new Set([\n  \"actionlib_msgs\",\n  \"diagnostic_msgs\",\n  \"geometry_msgs\",\n  \"nav_msgs\",\n  \"sensor_msgs\",\n  \"shape_msgs\",\n  \"std_msgs\",\n  \"stereo_msgs\",\n  \"trajectory_msgs\",\n  \"visualization_msgs\",\n]);\n\nfunction getArrow(x: number, y: number) {\n  if (x === 0 && y === 0) {\n    return;\n  }\n  return <span style={{ transform: `rotate(${Math.atan2(-y, x)}rad)`, display: \"inline-block\" }}>→</span>;\n}\n\nexport function getItemString(type: string, data: any, itemType: string, itemString: string) {\n  const keys = Object.keys(data);\n  if (keys.length === 2) {\n    const { sec, nsec } = data;\n    if (sec != null && nsec != null) {\n      // Values \"too small\" to be absolute epoch-based times are probably relative durations.\n      return sec < DURATION_20_YEARS_SEC ? formatDuration(data) : <span>{format(data)}</span>;\n    }\n  }\n\n  // for vectors/points display length\n  if (keys.length === 2) {\n    const { x, y } = data;\n    if (x != null && y != null) {\n      const length = Math.sqrt(x * x + y * y);\n      return (\n        <span>\n          norm = {length.toFixed(2)} {getArrow(x, y)}\n        </span>\n      );\n    }\n  }\n\n  if (keys.length === 3) {\n    const { x, y, z } = data;\n    if (x != null && y != null && z != null) {\n      const length = Math.sqrt(x * x + y * y + z * z);\n      return (\n        <span>\n          norm = {length.toFixed(2)} {z === 0 ? getArrow(x, y) : undefined}\n        </span>\n      );\n    }\n  }\n\n  // Surface typically-used keys directly in the object summary so the user doesn't have to expand it.\n  const filterKeys = keys\n    .filter(isTypicalFilterName)\n    .map((key) => `${key}: ${data[key]}`)\n    .join(\", \");\n  return (\n    <span>\n      {itemType} {filterKeys || itemString}\n    </span>\n  );\n}\n\nfunction getChangeCounts(data, startingCounts) {\n  const possibleLabelTexts = Object.keys(startingCounts);\n  for (const key in data) {\n    if (possibleLabelTexts.includes(key)) {\n      startingCounts[key]++;\n    } else if (typeof data[key] === \"object\") {\n      getChangeCounts(data[key], startingCounts);\n    }\n  }\n  return startingCounts;\n}\n\nexport const getItemStringForDiff = (type: string, data: any, itemType: string, itemString: string) => {\n  const { ADDED, DELETED, CHANGED, ID } = diffLabels;\n  const id = data[ID.labelText];\n  const idLabel = id\n    ? Object.keys(id)\n        .map((key) => `${key}: ${id[key]}`)\n        .join(\", \")\n    : null;\n  const startingCounts = { [ADDED.labelText]: 0, [CHANGED.labelText]: 0, [DELETED.labelText]: 0 };\n  const counts = getChangeCounts(data, startingCounts);\n  return (\n    <>\n      {id ? (\n        <span>\n          {itemType} {idLabel}\n        </span>\n      ) : null}\n      <span style={{ float: \"right\", color: CHANGED.color }}>\n        {counts[ADDED.labelText] || counts[DELETED.labelText] ? (\n          <span\n            style={{\n              display: \"inline-block\",\n              fontSize: \"0.8em\",\n              padding: 2,\n              borderRadius: 3,\n              backgroundColor: ADDED.color,\n              marginRight: 5,\n            }}>\n            <span style={{ color: colors.GREEN }}>\n              {counts[ADDED.labelText] ? `${diffLabels.ADDED.indicator}${counts[ADDED.labelText]} ` : null}\n            </span>\n            <span style={{ color: colors.RED }}>\n              {counts[DELETED.labelText] ? `${diffLabels.DELETED.indicator}${counts[DELETED.labelText]}` : null}\n            </span>\n          </span>\n        ) : null}\n        {counts[CHANGED.labelText] ? (\n          <span\n            style={{\n              display: \"inline-block\",\n              width: 3,\n              height: 3,\n              borderRadius: 3,\n              backgroundColor: CHANGED.color,\n              marginRight: 5,\n            }}>\n            {counts[CHANGED.labelText] ? \" \" : null}\n          </span>\n        ) : null}\n      </span>\n    </>\n  );\n};\n\nexport function getMessageDocumentationLink(datatype: string): ?string {\n  const parts = datatype.split(\"/\");\n  const pkg = first(parts);\n  const filename = last(parts);\n  return ROS_COMMON_MSGS.has(pkg)\n    ? `http://docs.ros.org/api/${pkg}/html/msg/${filename}.html`\n    : getGlobalHooks()\n        .perPanelHooks()\n        .RawMessages.docLinkFunction(filename);\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport LinkPlusIcon from \"@mdi/svg/svg/link-plus.svg\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport GlobalVariableLink, { SPath, GlobalVariableName } from \"./GlobalVariableLink/index\";\nimport { SEmptyState } from \"./index\";\nimport { getPath } from \"./interactionUtils\";\nimport { type LinkedGlobalVariables } from \"./useLinkedGlobalVariables\";\nimport Icon from \"webviz-core/src/components/Icon\";\n\nconst STable = styled.table`\n  td {\n    padding: 0.3em;\n    border: none;\n    vertical-align: middle;\n  }\n`;\n\ntype Props = {\n  linkedGlobalVariables: LinkedGlobalVariables,\n};\n\nexport default function LinkedGlobalVariableList({ linkedGlobalVariables }: Props) {\n  if (linkedGlobalVariables.length === 0) {\n    return (\n      <SEmptyState>\n        Click the{\" \"}\n        <Icon style={{ display: \"inline\", verticalAlign: \"middle\", lineHeight: 1 }} clickable={false}>\n          <LinkPlusIcon />\n        </Icon>{\" \"}\n        icon in the “Clicked object” tab to link values with global variables.\n      </SEmptyState>\n    );\n  }\n  return (\n    <>\n      <SEmptyState>Clicking on objects from these topics will update the linked global variables.</SEmptyState>\n      <STable>\n        <tbody>\n          {linkedGlobalVariables.map((linkedGlobalVariable, index) => (\n            <tr key={index}>\n              <td>\n                <GlobalVariableLink\n                  linkedGlobalVariable={linkedGlobalVariable}\n                  unlinkTooltip={\n                    <span>\n                      Unlink <GlobalVariableName name={linkedGlobalVariable.name} />\n                    </span>\n                  }\n                />\n              </td>\n              <td style={{ wordBreak: \"break-all\" }}>\n                {linkedGlobalVariable.topic}.<SPath>{getPath(linkedGlobalVariable.markerKeyPath)}</SPath>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </STable>\n    </>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { first, omit } from \"lodash\";\nimport * as React from \"react\";\nimport Tree from \"react-json-tree\";\nimport { type MouseEventObject } from \"regl-worldview\";\nimport styled from \"styled-components\";\n\nimport GlobalVariableLink from \"./GlobalVariableLink/index\";\nimport type { InteractionData } from \"./types\";\nimport { type LinkedGlobalVariables } from \"./useLinkedGlobalVariables\";\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport { jsonTreeTheme } from \"webviz-core/src/util/globalConstants\";\n\nconst SObjectDetails = styled.div`\n  padding: 12px 0 16px 0;\n`;\n\ntype CommonProps = {\n  interactionData: ?InteractionData,\n  linkedGlobalVariables: LinkedGlobalVariables,\n};\n\ntype WrapperProps = CommonProps & {\n  selectedObject: MouseEventObject,\n};\n\ntype Props = CommonProps & {\n  objectToDisplay: any,\n};\n\nexport const getInstanceObj = (marker: any, idx: number) => {\n  return marker.metadataByIndex && marker.metadataByIndex[idx];\n};\n\nexport default function ObjectDetailsWrapper({\n  interactionData,\n  linkedGlobalVariables,\n  selectedObject: { object, instanceIndex },\n}: WrapperProps) {\n  const [showInstance, setShowInstance] = React.useState(true);\n  const instanceObject = getInstanceObj(object, instanceIndex);\n  const dropdownText = {\n    instance: \"Show instance object\",\n    full: \"Show full object\",\n  };\n\n  return instanceObject ? (\n    <div>\n      <Dropdown\n        position=\"below\"\n        value={showInstance}\n        text={showInstance ? dropdownText.instance : dropdownText.full}\n        onChange={setShowInstance}>\n        <span value={true}>{dropdownText.instance}</span>\n        <span value={false}>{dropdownText.full}</span>\n      </Dropdown>\n      <ObjectDetails\n        interactionData={interactionData}\n        linkedGlobalVariables={linkedGlobalVariables}\n        objectToDisplay={showInstance ? instanceObject : object}\n      />\n    </div>\n  ) : (\n    <ObjectDetails\n      interactionData={interactionData}\n      linkedGlobalVariables={linkedGlobalVariables}\n      objectToDisplay={object}\n    />\n  );\n}\n\nfunction ObjectDetails({ interactionData, linkedGlobalVariables, objectToDisplay }: Props) {\n  const topic = (interactionData && interactionData.topic) || \"\";\n  const originalObject = omit(objectToDisplay, \"interactionData\");\n\n  if (!topic) {\n    // show the original object directly if there is no interaction data. e.g. DrawPolygons\n    return (\n      <SObjectDetails>\n        <Tree\n          data={objectToDisplay}\n          shouldExpandNode={(markerKeyPath, data, level) => level < 2}\n          invertTheme={false}\n          theme={{ ...jsonTreeTheme, tree: { margin: 0 } }}\n          hideRoot\n        />\n      </SObjectDetails>\n    );\n  }\n\n  return (\n    <SObjectDetails>\n      <Tree\n        data={originalObject}\n        shouldExpandNode={(markerKeyPath, data, level) => level < 2}\n        invertTheme={false}\n        theme={{ ...jsonTreeTheme, tree: { margin: 0 } }}\n        hideRoot\n        getItemString={(type, data, itemType, itemString) => <span>{itemString}</span>}\n        labelRenderer={(markerKeyPath: string[], p1, p2, hasChildren: boolean, ...rest) => {\n          const label = first(markerKeyPath);\n          if (!hasChildren) {\n            return <span style={{ padding: \"0 4px\" }}>{label}</span>;\n          }\n\n          let objectForPath = originalObject;\n          for (let i = markerKeyPath.length - 1; i >= 0; i--) {\n            objectForPath = objectForPath[markerKeyPath[i]];\n            if (!objectForPath) {\n              break;\n            }\n          }\n\n          if (objectForPath) {\n            return (\n              <GlobalVariableLink\n                hasNestedValue\n                style={{ marginLeft: 4 }}\n                label={label}\n                markerKeyPath={markerKeyPath}\n                topic={topic}\n                variableValue={objectForPath}\n              />\n            );\n          }\n        }}\n        valueRenderer={(label: string, itemValue: any, ...markerKeyPath: string[]) => {\n          return (\n            <GlobalVariableLink\n              style={{ marginLeft: 16 }}\n              label={label}\n              markerKeyPath={markerKeyPath}\n              topic={topic}\n              variableValue={itemValue}\n            />\n          );\n        }}\n      />\n    </SObjectDetails>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ExportVariantIcon from \"@mdi/svg/svg/export-variant.svg\";\nimport { get } from \"lodash\";\nimport React, { useMemo, useState, useCallback } from \"react\";\nimport { type MouseEventObject } from \"regl-worldview\";\nimport styled from \"styled-components\";\n\nimport { SValue, SLabel } from \"./index\";\nimport ChildToggle from \"webviz-core/src/components/ChildToggle\";\nimport { useExperimentalFeature } from \"webviz-core/src/components/ExperimentalFeatures\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Menu from \"webviz-core/src/components/Menu\";\nimport Item from \"webviz-core/src/components/Menu/Item\";\nimport {\n  getClickedInfo as getClickedInfoGPU,\n  getAllPoints,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/commands/GPUPointClouds/selection\";\nimport { getClickedInfo } from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder\";\nimport { downloadFiles } from \"webviz-core/src/util\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\n\nconst SRow = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 0;\n  margin: 4px 0;\n`;\ntype Props = {\n  selectedObject: MouseEventObject,\n};\n\nexport default function PointCloudDetails({ selectedObject: { object, instanceIndex } }: Props) {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const gpuPointCloudsEnabled = useExperimentalFeature(\"gpuPointCloud\");\n\n  const { clickedPoint, clickedPointColor, additionalFieldValues } =\n    useMemo(\n      () => {\n        if (gpuPointCloudsEnabled) {\n          return getClickedInfoGPU(object, instanceIndex);\n        }\n        return getClickedInfo(object, instanceIndex);\n      },\n      [gpuPointCloudsEnabled, instanceIndex, object]\n    ) || {};\n\n  const additionalFieldNames = useMemo(() => (additionalFieldValues && Object.keys(additionalFieldValues)) || [], [\n    additionalFieldValues,\n  ]);\n\n  const hasAdditionalFieldNames = !!additionalFieldNames.length;\n  const onCopy = useCallback(\n    () => {\n      // GPU point clouds need to extract positions using getAllPoints()\n      const allPoints: number[] = object.points || getAllPoints(object);\n      const dataRows = [];\n      const len = allPoints.length / 3;\n      // get copy data\n      for (let i = 0; i < len; i++) {\n        const rowData = [allPoints[i * 3], allPoints[i * 3 + 1], allPoints[i * 3 + 2]];\n        rowData.push(...additionalFieldNames.map((fieldName) => get(object, [fieldName, i])));\n        dataRows.push(rowData.join(\",\"));\n      }\n\n      const additionalColumns = hasAdditionalFieldNames ? `,${additionalFieldNames.join(\",\")}` : \"\";\n      const dataStr = `x,y,z${additionalColumns}\\n${dataRows.join(\"\\n\")}`;\n      const blob = new Blob([dataStr], { type: \"text/csv;charset=utf-8;\" });\n      downloadFiles([{ blob, fileName: \"PointCloud.csv\" }]);\n      setIsOpen(false);\n    },\n    [additionalFieldNames, hasAdditionalFieldNames, object]\n  );\n\n  if (!clickedPoint) {\n    return null;\n  }\n\n  const colorStyle = clickedPointColor ? { color: `rgba(${clickedPointColor.join(\",\")})` } : {};\n\n  return (\n    <>\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n        <ChildToggle position=\"below\" onToggle={() => setIsOpen(!isOpen)} isOpen={isOpen}>\n          <Icon\n            small\n            fade\n            active={isOpen}\n            tooltip={hasAdditionalFieldNames ? \"Export points and fields\" : \"Export points\"}>\n            <ExportVariantIcon />\n          </Icon>\n          <Menu>\n            <Item\n              onClick={() => {\n                clipboard.copy(clickedPoint.join(\", \")).then(() => {\n                  setIsOpen(false);\n                });\n              }}>\n              Copy clicked point to clipboard\n            </Item>\n            <Item onClick={onCopy}>\n              {hasAdditionalFieldNames ? \"Download all points and fields as CSV\" : \"Download all points as CSV\"}\n            </Item>\n          </Menu>\n        </ChildToggle>\n      </div>\n      <SRow>\n        <SLabel width={hasAdditionalFieldNames ? 72 : 44}>Point:</SLabel>\n        <SValue style={{ flex: 1, lineHeight: 1.4, ...colorStyle }}>\n          {clickedPoint.map((x) => (typeof x === \"number\" ? x : JSON.stringify(x))).join(\", \")}\n        </SValue>\n      </SRow>\n      {additionalFieldValues && (\n        <>\n          {Object.keys(additionalFieldValues).map((fieldName) => (\n            <SRow key={fieldName}>\n              <SLabel width={72}>{fieldName.charAt(0).toUpperCase() + fieldName.slice(1)}:</SLabel>\n              <SValue>{additionalFieldValues[fieldName]}</SValue>\n            </SRow>\n          ))}\n        </>\n      )}\n    </>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { type MouseEventObject } from \"regl-worldview\";\n\nimport { getVertexValues, getVertexValue } from \"./buffers\";\nimport { parseHexColor } from \"./decodeMarker\";\nimport {\n  type ClickedInfo,\n  getAdditionalFieldNames,\n  setRainbowColor,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder\";\nimport { DEFAULT_FLAT_COLOR } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor\";\nimport { lerp } from \"webviz-core/src/util\";\n\n// extract clicked point's position, color and additional field values to display in the UI\nexport function getClickedInfo(maybeFullyDecodedMarker: MouseEventObject, instanceIndex: ?number): ?ClickedInfo {\n  const { positionBuffer, colorBuffer, fields, settings, is_bigendian } = maybeFullyDecodedMarker;\n  if (!positionBuffer) {\n    return null;\n  }\n\n  const pointIndex = instanceIndex || 0;\n\n  // Extract [x, y, z] from position buffer;\n  const clickedPoint = getVertexValues(positionBuffer, pointIndex, 3);\n\n  let clickedPointColor: number[];\n  const { colorMode } = settings;\n  if (colorMode) {\n    if (colorMode.mode === \"rgb\" && colorBuffer) {\n      // Extract [r, g, b, a] from colors buffer\n      clickedPointColor = [\n        ...getVertexValues(colorBuffer, pointIndex, 3),\n        // alpha value is set to 1 since 'colorBuffer' only stores\n        // [r, g, b] components. Shaders always use an alpha value\n        // of 1 as well.\n        1.0,\n      ];\n      if (!is_bigendian) {\n        // When data uses little endianess, colors are in BGR format\n        // and we must swap R and B channels to display them correclty.\n        const temp = clickedPointColor[2];\n        clickedPointColor[2] = clickedPointColor[0];\n        clickedPointColor[0] = temp;\n      }\n    } else if (colorMode.mode === \"gradient\" && colorBuffer) {\n      const { minColorValue, maxColorValue } = maybeFullyDecodedMarker;\n      const colorFieldValue = getVertexValue(colorBuffer, pointIndex);\n      const colorFieldRange = maxColorValue - minColorValue || Infinity;\n      const pct = Math.max(0, Math.min((colorFieldValue - minColorValue) / colorFieldRange, 1));\n      const { minColor, maxColor } = colorMode;\n      const parsedMinColor = parseHexColor(minColor);\n      const parsedMaxColor = parseHexColor(maxColor);\n      clickedPointColor = [\n        lerp(pct, parsedMinColor[0], parsedMaxColor[0]), // R\n        lerp(pct, parsedMinColor[1], parsedMaxColor[1]), // G\n        lerp(pct, parsedMinColor[2], parsedMaxColor[2]), // B\n        1.0,\n      ];\n    } else if (colorMode.mode === \"rainbow\" && colorBuffer) {\n      const { minColorValue, maxColorValue } = maybeFullyDecodedMarker;\n      const colorFieldValue = getVertexValue(colorBuffer, pointIndex);\n      const colorFieldRange = maxColorValue - minColorValue || Infinity;\n      const pct = Math.max(0, Math.min((colorFieldValue - minColorValue) / colorFieldRange, 1));\n      clickedPointColor = [0, 0, 0, 1];\n      setRainbowColor(clickedPointColor, 0, pct);\n    } else if (colorMode.mode === \"flat\") {\n      clickedPointColor = parseHexColor(colorMode.flatColor || DEFAULT_FLAT_COLOR);\n    }\n  }\n\n  let additionalFieldValues: { [name: string]: ?number };\n  const additionalField = getAdditionalFieldNames(fields);\n  if (additionalField.length) {\n    additionalFieldValues = additionalField.reduce((memo, fieldName) => {\n      const values = maybeFullyDecodedMarker[fieldName];\n      if (values) {\n        memo[fieldName] = values[pointIndex];\n      }\n      return memo;\n    }, {});\n  }\n\n  return {\n    clickedPoint,\n    clickedPointColor,\n    additionalFieldValues,\n  };\n}\n\n// Extract positions so they can be saved to a file\nexport function getAllPoints(maybeFullyDecodedMarker: MouseEventObject): number[] {\n  const { pointCount, positionBuffer } = maybeFullyDecodedMarker;\n  const ret = [];\n  for (let i = 0; i < pointCount; i++) {\n    const position = getVertexValues(positionBuffer, i, 3);\n    if (!Number.isNaN(position[0])) {\n      ret.push(...position);\n    }\n  }\n  return ret;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { throttle } from \"lodash\";\n\nconst DELAY = 1000;\n\nconst warn = throttle((...args: any[]) => console.warn(...args), DELAY);\nconst error = throttle((...args: any[]) => console.error(...args), DELAY);\nconst info = throttle((...args: any[]) => console.info(...args), DELAY);\nconst debug = throttle((...args: any[]) => console.log(...args), DELAY);\n\nexport default {\n  debug,\n  info,\n  warn,\n  error,\n};\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport { CommonPointSettings, CommonDecaySettings, type TopicSettingsEditorProps } from \".\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport type { LaserScan } from \"webviz-core/src/types/Messages\";\n\ntype LaserScanSettings = {|\n  pointSize?: ?number,\n  pointShape?: ?string,\n  decayTime?: ?number,\n|};\nexport default function LaserScanSettingsEditor(props: TopicSettingsEditorProps<LaserScan, LaserScanSettings>) {\n  const { settings, onFieldChange } = props;\n\n  return (\n    <Flex col>\n      <CommonPointSettings\n        settings={settings}\n        defaultPointSize={4}\n        defaultPointShape=\"square\"\n        onFieldChange={onFieldChange}\n      />\n      <CommonDecaySettings settings={settings} onFieldChange={onFieldChange} />\n    </Flex>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport { type TopicSettingsEditorProps } from \".\";\nimport { SLabel, SDescription, SInput } from \"./common\";\nimport Checkbox from \"webviz-core/src/components/Checkbox\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport type { Marker, MarkerArray } from \"webviz-core/src/types/Messages\";\nimport { LINED_CONVEX_HULL_RENDERING_SETTING } from \"webviz-core/src/util/globalConstants\";\n\ntype MarkerSettings = {|\n  overrideColor?: ?string,\n  overrideCommand?: ?string,\n|};\n\nexport default function MarkerSettingsEditor(props: TopicSettingsEditorProps<Marker | MarkerArray, MarkerSettings>) {\n  const { settings = {}, onFieldChange } = props;\n  return (\n    <Flex col>\n      <SLabel>Color (r,g,b,a)</SLabel>\n      <SDescription>\n        Overrides <code>color</code>/<code>colors</code> for all markers on this topic.\n      </SDescription>\n      <SInput\n        type=\"text\"\n        data-test=\"color-input\"\n        value={settings.overrideColor || \"\"}\n        placeholder=\"e.g. 255, 0, 100, 0.5\"\n        onChange={(e) => onFieldChange(\"overrideColor\", e.target.value)}\n      />\n      <SLabel>Line marker click events override</SLabel>\n      <SDescription>\n        {`\n        Optionally allow treating line markers as polygons, so that clicking inside the lines in the line marker selects\n        the marker. The default behavior for line markers requires the user to click exactly on the line to select the\n        line marker. This option can reduce performance and will not work on instanced line markers (those with \"type\":\n        105).\n        `}\n      </SDescription>\n      <Checkbox\n        checked={settings.overrideCommand === LINED_CONVEX_HULL_RENDERING_SETTING}\n        label=\"Allow clicking inside line markers that form polygons\"\n        onChange={(checked) => onFieldChange(\"overrideCommand\", checked ? LINED_CONVEX_HULL_RENDERING_SETTING : null)}\n        style={{ marginBottom: 12 }}\n        labelStyle={{ lineHeight: 1.2 }}\n      />\n    </Flex>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport React from \"react\";\n\nimport { type TopicSettingsEditorProps } from \".\";\nimport { SLabel, SInput } from \"./common\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport type { PoseStamped } from \"webviz-core/src/types/Messages\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\ntype PoseSettings = {|\n  color?: ?string,\n  alpha?: number,\n  size?: {\n    headLength: number,\n    headWidth: number,\n    shaftWidth: number,\n  },\n  useCarModel?: boolean,\n|};\n\nexport default function PoseSettingsEditor(props: TopicSettingsEditorProps<PoseStamped, PoseSettings>) {\n  const { message, settings, onFieldChange, onSettingsChange } = props;\n\n  if (!message) {\n    return (\n      <div style={{ color: colors.TEXT_MUTED }}>\n        <small>Waiting for messages...</small>\n      </div>\n    );\n  }\n\n  const alpha = settings.alpha != null ? settings.alpha : 1;\n  const alphaField = (\n    <Flex col>\n      <SLabel>Alpha</SLabel>\n      <SInput\n        type=\"number\"\n        value={alpha.toString()}\n        min={0}\n        max={1}\n        step={0.1}\n        onChange={(e) => onSettingsChange({ ...settings, alpha: parseFloat(e.target.value) })}\n      />\n    </Flex>\n  );\n  const currentShaftWidth = settings.size?.shaftWidth ?? 2;\n  const currentHeadWidth = settings.size?.headWidth ?? 2;\n  const currentHeadLength = settings.size?.headLength ?? 0.1;\n  const colorInputFields = (\n    <Flex col>\n      <SLabel>Color (r,g,b,a)</SLabel>\n      <SInput\n        type=\"text\"\n        value={\n          // must be non-undefined to avoid changing to an uncontrolled component when switching on/off the car model\n          settings.color || \"\"\n        }\n        placeholder=\"e.g. 255, 0, 100, 0.5\"\n        onChange={(e) => onFieldChange(\"color\", e.target.value)}\n      />\n      <SLabel>Shaft width</SLabel>\n      <SInput\n        type=\"number\"\n        value={currentShaftWidth}\n        placeholder=\"2\"\n        onChange={(e) =>\n          onSettingsChange({ ...settings, size: { ...settings.size, shaftWidth: parseFloat(e.target.value) } })\n        }\n      />\n      <SLabel>Head width</SLabel>\n      <SInput\n        type=\"number\"\n        value={currentHeadWidth}\n        placeholder=\"2\"\n        onChange={(e) =>\n          onSettingsChange({ ...settings, size: { ...settings.size, headWidth: parseFloat(e.target.value) } })\n        }\n      />\n      <SLabel>Head length</SLabel>\n      <SInput\n        type=\"number\"\n        value={currentHeadLength}\n        placeholder=\"0.1\"\n        onChange={(e) =>\n          onSettingsChange({ ...settings, size: { ...settings.size, headLength: parseFloat(e.target.value) } })\n        }\n      />\n    </Flex>\n  );\n\n  const CheckboxComponent = settings.useCarModel ? CheckboxMarkedIcon : CheckboxBlankOutlineIcon;\n  const iconProps = {\n    width: 16,\n    height: 16,\n    style: {\n      fill: \"currentColor\",\n      position: \"relative\",\n      top: \"5px\",\n    },\n  };\n\n  return (\n    <Flex col>\n      <Flex style={{ marginBottom: \"5px\", cursor: \"pointer\" }}>\n        <CheckboxComponent\n          {...iconProps}\n          onClick={() => onSettingsChange({ ...settings, useCarModel: !settings.useCarModel, alpha: undefined })}\n        />\n        <SLabel>Use 3D model</SLabel>\n      </Flex>\n      {settings.useCarModel ? alphaField : colorInputFields}\n    </Flex>\n  );\n}\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./TopicSettingsEditor.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./TopicSettingsEditor.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./TopicSettingsEditor.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-ck4v1--container .packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-vwvj4--topicName {\\n  color: rgba(247, 247, 243, 0.88);\\n  font-size: 16px;\\n  line-height: 20px; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-44muf--dropdown .packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-2d8pe--button {\\n  width: 100%; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-ck4v1--container {\\n  font-family: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n  -webkit-font-feature-settings: \\\"tnum\\\";\\n          font-feature-settings: \\\"tnum\\\"; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-ck4v1--container .packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-vwvj4--topicName {\\n    word-wrap: break-word; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-ck4v1--container .packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-2neuz--datatype {\\n    padding-bottom: 20px; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/TopicSettingsEditor.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AASA;EC0CE,iCCtCqC;EDuCrC,gBAAe;EACf,kBAAwB,EACzB;;ADnDD;EAEI,YAAW,EACZ;;AAGH;ECuEE,uEAHyE;EAIzE,sCAA6B;UAA7B,8BAA6B,ED7D9B;EAXD;IAKI,sBAAqB,EACtB;EANH;IASI,qBAAoB,EACrB\",\"file\":\"TopicSettingsEditor.module.scss\",\"sourcesContent\":[\"@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n.dropdown {\\n  .button {\\n    width: 100%;\\n  }\\n}\\n\\n.container {\\n  @include sans-serif;\\n\\n  .topicName {\\n    @extend %modal-subtitle;\\n    word-wrap: break-word;\\n  }\\n\\n  .datatype {\\n    padding-bottom: 20px;\\n  }\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"container\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-ck4v1--container\",\n\t\"topicName\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-vwvj4--topicName\",\n\t\"dropdown\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-44muf--dropdown\",\n\t\"button\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-2d8pe--button\",\n\t\"datatype\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-TopicSettingsEditor-TopicSettingsEditor-module-2neuz--datatype\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport cx from \"classnames\";\nimport * as React from \"react\";\n\nimport styles from \"./Option.module.scss\";\nimport Icon from \"webviz-core/src/components/Icon\";\n\ntype Props = {\n  // value is used by the Select component\n  value?: any, // eslint-disable-line\n  children: React.Node,\n  onClick?: (e: SyntheticMouseEvent<HTMLDivElement>) => void,\n  disabled: boolean,\n  active: boolean,\n  rightIcon?: React.Node,\n};\n\nexport default class Option extends React.Component<Props> {\n  static defaultProps = {\n    disabled: false,\n    active: false,\n  };\n\n  renderRightIcon() {\n    const { rightIcon } = this.props;\n    if (!rightIcon) {\n      return;\n    }\n    return (\n      <span style={{ float: \"right\" }}>\n        <Icon>{rightIcon}</Icon>\n      </span>\n    );\n  }\n\n  render() {\n    const { onClick, active, disabled, children } = this.props;\n    const className = cx(styles.container, {\n      [styles.active]: active,\n      [styles.disabled]: disabled,\n    });\n    return (\n      <div className={className} onClick={onClick}>\n        {children}\n        {this.renderRightIcon()}\n      </div>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Option.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Option.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Option.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-Select-Option-module-234wh--container {\\n  text-decoration: none;\\n  padding: 8px 12px;\\n  cursor: pointer;\\n  color: rgba(247, 247, 243, 0.77);\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center; }\\n\\n.packages-webviz-core-src-components-Select-Option-module-234wh--container.packages-webviz-core-src-components-Select-Option-module-387jk--active {\\n  color: rgba(247, 247, 243, 0.77);\\n  background-color: rgba(59, 46, 118, 0.6); }\\n\\n.packages-webviz-core-src-components-Select-Option-module-234wh--container:hover {\\n  background-color: #3b2e76;\\n  color: rgba(247, 247, 243, 0.77); }\\n\\n.packages-webviz-core-src-components-Select-Option-module-234wh--container.packages-webviz-core-src-components-Select-Option-module-fytwj--disabled {\\n  color: rgba(247, 247, 243, 0.15);\\n  cursor: not-allowed; }\\n  .packages-webviz-core-src-components-Select-Option-module-234wh--container.packages-webviz-core-src-components-Select-Option-module-fytwj--disabled:hover {\\n    background-color: transparent;\\n    color: rgba(247, 247, 243, 0.15); }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/Select/Option.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AACA;ECoCE,sBAAqB;EACrB,kBA5ByC;EA6BzC,gBAAe;EACf,iCC1BqC;ED2BrC,0BAAiB;KAAjB,uBAAiB;MAAjB,sBAAiB;UAAjB,kBAAiB;EACjB,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB,EAKpB;;AD/CD;ECkEE,iCCrDqC;EDuDrC,yCC7DkD,ED8DnD;;ADrED;ECwEE,0BC/CuB;EDgDvB,iCC5DqC,ED6DtC;;AD1ED;EASI,iCEKqC;EFJrC,oBAAmB,EAKpB;EAfH;IAYM,8BAA6B;IAC7B,iCECmC,EFApC\",\"file\":\"Option.module.scss\",\"sourcesContent\":[\"@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n.container {\\n  @extend %menu-item;\\n  $height: 14px;\\n\\n  &.active {\\n    @extend %menu-item-active;\\n  }\\n\\n  &.disabled {\\n    color: $text-disabled;\\n    cursor: not-allowed;\\n    &:hover {\\n      background-color: transparent;\\n      color: $text-disabled;\\n    }\\n  }\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"container\": \"packages-webviz-core-src-components-Select-Option-module-234wh--container\",\n\t\"active\": \"packages-webviz-core-src-components-Select-Option-module-387jk--active\",\n\t\"disabled\": \"packages-webviz-core-src-components-Select-Option-module-fytwj--disabled\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport MenuDownIcon from \"@mdi/svg/svg/menu-down.svg\";\nimport * as React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"styled-components\";\n\nimport styles from \"./Select.module.scss\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\nconst SEmpty = styled.div`\n  padding: 8px 12px;\n  color: ${colors.textMuted};\n  font-style: italic;\n`;\n\ntype Props = {\n  children: React.Node,\n  // specify text specifically if the value is not a string\n  text?: ?string,\n  value: any,\n  icon: React.Node,\n  onChange: (value: any) => void,\n};\n\ntype State = {\n  isOpen: boolean,\n};\n\nexport default class Select extends React.Component<Props, State> {\n  static defaultProps = {\n    icon: <MenuDownIcon />,\n  };\n\n  el: ?HTMLDivElement;\n\n  state = {\n    isOpen: false,\n  };\n\n  close = () => {\n    this.setState({ isOpen: false });\n    window.removeEventListener(\"click\", this.close);\n  };\n\n  open = (e: SyntheticEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    this.setState({ isOpen: true });\n    // let this event hit the window before adding close listener\n    setImmediate(() => {\n      window.addEventListener(\"click\", this.close);\n    });\n  };\n\n  renderOpen() {\n    const { value, children, onChange } = this.props;\n    const mappedChildren = React.Children.map(children, (child) => {\n      // if the child does not have a value prop, just return it\n      // e.g. <hr />\n      if (!child.props.value) {\n        return child;\n      }\n      const onClick = (e: SyntheticEvent<HTMLDivElement>) => {\n        e.stopPropagation();\n        e.preventDefault();\n        if (child.props.disabled) {\n          return;\n        }\n        const childValue = child.props.value;\n        // don't allow <hr /> clicks to close\n        if (!childValue) {\n          return;\n        }\n        this.close();\n        onChange(child.props.value);\n      };\n      const active = value === child.props.value;\n      return React.cloneElement(child, { onClick, active });\n    });\n    const { body } = document;\n    const { el } = this;\n    // satisfy flow\n    if (!body || !el) {\n      return;\n    }\n    const box = el.getBoundingClientRect();\n    const style = {\n      top: box.top,\n      left: box.left,\n      width: box.width,\n    };\n    return createPortal(\n      <div style={style} className={styles.menu}>\n        {mappedChildren && mappedChildren.length ? mappedChildren : <SEmpty>No options available</SEmpty>}\n      </div>,\n      body\n    );\n  }\n\n  render() {\n    const { isOpen } = this.state;\n    const { text, value, icon } = this.props;\n    return (\n      <div ref={(el) => (this.el = el)} className={styles.container} onClick={this.open}>\n        <div className={styles.select}>\n          <span className={styles.value}>{text || value}</span>\n          <span className={styles.icon}>\n            <Icon>{icon}</Icon>\n          </span>\n        </div>\n        {isOpen && this.renderOpen()}\n      </div>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Select.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Select.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Select.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-Select-Select-module-4ymxb--container.packages-webviz-core-src-components-Select-Select-module-g37t1--open, .packages-webviz-core-src-components-Select-Select-module-37tcd--select.packages-webviz-core-src-components-Select-Select-module-g37t1--open, .packages-webviz-core-src-components-Select-Select-module-mhyf6--menu {\\n  background-color: #2d2c33;\\n  border-radius: 4px;\\n  padding: 0;\\n  -webkit-box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n          box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  -ms-flex-negative: 0;\\n      flex-shrink: 0; }\\n\\n.packages-webviz-core-src-components-Select-Select-module-4ymxb--container {\\n  position: relative;\\n  margin: 0 0.2em;\\n  -ms-flex: 1 1 auto;\\n      flex: 1 1 auto;\\n  display: -ms-flexbox;\\n  display: flex; }\\n\\n.packages-webviz-core-src-components-Select-Select-module-37tcd--select {\\n  -ms-flex: 1 1 auto;\\n      flex: 1 1 auto;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  background-color: rgba(255, 255, 255, 0.5);\\n  background-color: rgba(247, 247, 243, 0.57);\\n  border-radius: 4px;\\n  height: auto;\\n  min-height: 26px;\\n  border: none;\\n  padding: 8px 12px;\\n  cursor: pointer;\\n  color: rgba(0, 0, 0, 0.8); }\\n  .packages-webviz-core-src-components-Select-Select-module-37tcd--select .packages-webviz-core-src-components-Select-Select-module-5hn5t--value {\\n    font-family: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n    -webkit-font-feature-settings: \\\"tnum\\\";\\n            font-feature-settings: \\\"tnum\\\";\\n    -ms-flex: 1 1 auto;\\n        flex: 1 1 auto; }\\n  .packages-webviz-core-src-components-Select-Select-module-37tcd--select.packages-webviz-core-src-components-Select-Select-module-g37t1--open {\\n    border-bottom-left-radius: 0px;\\n    border-bottom-right-radius: 0px;\\n    padding: 8px 12px;\\n    padding-right: 20px;\\n    color: rgba(247, 247, 243, 0.77); }\\n  .packages-webviz-core-src-components-Select-Select-module-37tcd--select .packages-webviz-core-src-components-Select-Select-module-4xkst--icon {\\n    font-size: 14px; }\\n\\n.packages-webviz-core-src-components-Select-Select-module-mhyf6--menu {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  z-index: 999999999; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/Select/Select.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AACA;EC0BE,0BCUe;EDTf,mBAAkB;EAClB,WAAU;EACV,iFAAwE;UAAxE,yEAAwE;EACxE,iBAAgB;EAChB,qBAAoB;EACpB,qBAAc;MAAd,eAAc,EACf;;ADjCD;EACE,mBAAkB;EAClB,gBCQsB;EDPtB,mBAAc;MAAd,eAAc;EACd,qBAAa;EAAb,cAAa,EAKd;;AAED;EACE,mBAAc;MAAd,eAAc;EACd,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB;EACnB,2CAA0C;EAC1C,4CAAmD;EACnD,mBAAkB;EAClB,aAAY;EACZ,iBAAgB;EAChB,aAAY;EACZ,kBCZyC;EDazC,gBAAe;EACf,0BEJ6B,EFuB9B;EA/BD;ICoEE,uEAHyE;IAIzE,sCAA6B;YAA7B,8BAA6B;IDrD3B,mBAAc;QAAd,eAAc,EACf;EAjBH;IAqBI,+BAA8B;IAC9B,gCAA+B;IAC/B,kBCzBuC;ID0BvC,oBAAmB;IACnB,iCEvBmC,EFwBpC;EA1BH;IA6BI,gBAAe,EAChB;;AAGH;EAEE,mBAAkB;EAClB,OAAM;EACN,QAAO;EACP,YAAW;EACX,mBAAkB,EACnB\",\"file\":\"Select.module.scss\",\"sourcesContent\":[\"@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n.container {\\n  position: relative;\\n  margin: $control-margin;\\n  flex: 1 1 auto;\\n  display: flex;\\n\\n  &.open {\\n    @extend %floating-box;\\n  }\\n}\\n\\n.select {\\n  flex: 1 1 auto;\\n  display: flex;\\n  align-items: center;\\n  background-color: rgba(255, 255, 255, 0.5);\\n  background-color: transparentize($text-normal, 0.2);\\n  border-radius: 4px;\\n  height: auto;\\n  min-height: 26px;\\n  border: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-input;\\n\\n  .value {\\n    @include sans-serif;\\n    flex: 1 1 auto;\\n  }\\n\\n  &.open {\\n    @extend %floating-box;\\n    border-bottom-left-radius: 0px;\\n    border-bottom-right-radius: 0px;\\n    padding: $control-padding;\\n    padding-right: 20px;\\n    color: $text-control;\\n  }\\n\\n  .icon {\\n    font-size: 14px;\\n  }\\n}\\n\\n.menu {\\n  @extend %floating-box;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  z-index: 999999999;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"container\": \"packages-webviz-core-src-components-Select-Select-module-4ymxb--container\",\n\t\"open\": \"packages-webviz-core-src-components-Select-Select-module-g37t1--open\",\n\t\"select\": \"packages-webviz-core-src-components-Select-Select-module-37tcd--select\",\n\t\"menu\": \"packages-webviz-core-src-components-Select-Select-module-mhyf6--menu\",\n\t\"value\": \"packages-webviz-core-src-components-Select-Select-module-5hn5t--value\",\n\t\"icon\": \"packages-webviz-core-src-components-Select-Select-module-4xkst--icon\"\n};","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nimport ColorPicker, { COLOR_PICKER_SIZE } from \"./ColorPicker\";\nimport AutoSizingCanvas from \"webviz-core/src/components/AutoSizingCanvas\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst GRADIENT_BAR_INSET = Math.floor(COLOR_PICKER_SIZE / 2);\nconst GRADIENT_BAR_HEIGHT = 10;\nconst GRADIENT_LINE_HEIGHT = 6;\n\nconst SPickerWrapper = styled.div`\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`;\nconst SBarWrapper = styled.div`\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n  margin-left: ${GRADIENT_BAR_INSET}px;\n  margin-right: ${GRADIENT_BAR_INSET}px;\n`;\nconst SLine = styled.div`\n  flex: 0 0 auto;\n  width: 1px;\n  height: ${GRADIENT_BAR_HEIGHT + GRADIENT_LINE_HEIGHT}px;\n  background-color: ${colors.LIGHT2};\n`;\nconst SBar = styled.div`\n  flex: 1 1 auto;\n  height: ${GRADIENT_BAR_HEIGHT}px;\n`;\n\nexport default function GradientPicker({\n  minColor,\n  maxColor,\n  onChange,\n  minColorRefForTesting,\n  maxColorRefForTesting,\n}: {\n  minColor: string,\n  maxColor: string,\n  onChange: ({ minColor: string, maxColor: string }) => void,\n  maxColorRefForTesting?: any,\n  minColorRefForTesting?: any,\n}) {\n  const drawGradient = useCallback(\n    (ctx, width, height) => {\n      const gradient = ctx.createLinearGradient(0, 0, width, 0);\n      gradient.addColorStop(0, minColor);\n      gradient.addColorStop(1, maxColor);\n      ctx.fillStyle = gradient;\n      ctx.fillRect(0, 0, width, height);\n    },\n    [maxColor, minColor]\n  );\n\n  return (\n    <>\n      <SPickerWrapper>\n        <ColorPicker\n          ref={minColorRefForTesting}\n          color={minColor}\n          onChange={useCallback((newColor) => onChange({ minColor: newColor, maxColor }), [maxColor, onChange])}\n        />\n        <ColorPicker\n          ref={maxColorRefForTesting}\n          color={maxColor}\n          onChange={useCallback((newColor) => onChange({ minColor, maxColor: newColor }), [minColor, onChange])}\n        />\n      </SPickerWrapper>\n      <SBarWrapper>\n        <SLine />\n        <SBar>\n          <AutoSizingCanvas draw={drawGradient} />\n        </SBar>\n        <SLine />\n      </SBarWrapper>\n    </>\n  );\n}\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./ExpandingToolbar.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./ExpandingToolbar.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--16!./ExpandingToolbar.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-components-ExpandingToolbar-module-3g6tj--tabBar .packages-webviz-core-src-components-ExpandingToolbar-module-4bm9d--tab {\\n  margin: 0;\\n  padding-left: 8px;\\n  padding-right: 8px;\\n  border-radius: 0;\\n  border-top: 2px solid transparent;\\n  border-bottom: 2px solid transparent; }\\n  .packages-webviz-core-src-components-ExpandingToolbar-module-3g6tj--tabBar .packages-webviz-core-src-components-ExpandingToolbar-module-4bm9d--tab.packages-webviz-core-src-components-ExpandingToolbar-module-3ndvr--selected {\\n    border-bottom: 2px solid rgba(247, 247, 243, 0.77); }\\n\\n.packages-webviz-core-src-components-ExpandingToolbar-module-3g6tj--tabBar .packages-webviz-core-src-components-ExpandingToolbar-module-hhvxd--spaceSeparator {\\n  -ms-flex-positive: 1;\\n      flex-grow: 1;\\n  min-width: 24px; }\\n\\n.packages-webviz-core-src-components-ExpandingToolbar-module-41fux--tabBody {\\n  background-color: #1a1a1f;\\n  padding: 4px 12px 12px 12px; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/components/ExpandingToolbar.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAQA;EAEI,UAAS;EACT,kBAAiB;EACjB,mBAAkB;EAClB,iBAAgB;EAChB,kCAAiC;EACjC,qCAAoC,EAIrC;EAXH;IASM,mDCHiC,EDIlC;;AAVL;EAcI,qBAAY;MAAZ,aAAY;EACZ,gBAAe,EAChB;;AAGH;EACE,0BCOwB;EDNxB,4BAA2B,EAC5B\",\"file\":\"ExpandingToolbar.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n.tabBar {\\n  .tab {\\n    margin: 0;\\n    padding-left: 8px;\\n    padding-right: 8px;\\n    border-radius: 0;\\n    border-top: 2px solid transparent;\\n    border-bottom: 2px solid transparent;\\n    &.selected {\\n      border-bottom: 2px solid $text-normal;\\n    }\\n  }\\n\\n  .spaceSeparator {\\n    flex-grow: 1;\\n    min-width: 24px;\\n  }\\n}\\n\\n.tabBody {\\n  background-color: $panel-background;\\n  padding: 4px 12px 12px 12px;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tabBar\": \"packages-webviz-core-src-components-ExpandingToolbar-module-3g6tj--tabBar\",\n\t\"tab\": \"packages-webviz-core-src-components-ExpandingToolbar-module-4bm9d--tab\",\n\t\"selected\": \"packages-webviz-core-src-components-ExpandingToolbar-module-3ndvr--selected\",\n\t\"spaceSeparator\": \"packages-webviz-core-src-components-ExpandingToolbar-module-hhvxd--spaceSeparator\",\n\t\"tabBody\": \"packages-webviz-core-src-components-ExpandingToolbar-module-41fux--tabBody\"\n};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-4ny72--topicSettingsEditor .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-tw6e7--closeIcon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-4ny72--topicSettingsEditor, .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3hmzk--buttons {\\n  background-color: #2d2c33;\\n  border-radius: 4px;\\n  padding: 0;\\n  -webkit-box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n          box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  -ms-flex-negative: 0;\\n      flex-shrink: 0; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-4gt2e--container {\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex: 1 1 auto;\\n      flex: 1 1 auto;\\n  position: relative;\\n  width: 100%;\\n  height: 100%; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-36swq--world {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-4ny72--topicSettingsEditor {\\n  background-color: #1a1a1f;\\n  width: 300px;\\n  padding: 20px; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-sef3w--toolbar {\\n  position: absolute;\\n  top: 15px;\\n  padding: 0px;\\n  z-index: 101;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-direction: column;\\n      flex-direction: column;\\n  -ms-flex-align: end;\\n      align-items: flex-end;\\n  pointer-events: none; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-sef3w--toolbar.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3xasx--left {\\n    left: 15px; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-sef3w--toolbar.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-n75xz--right {\\n    top: 35px;\\n    right: 15px; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3hmzk--buttons {\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-direction: column;\\n      flex-direction: column;\\n  padding: 0px;\\n  margin-bottom: 10px; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3hmzk--buttons button {\\n    background-color: transparent;\\n    border: none;\\n    padding-left: 4px;\\n    padding-right: 4px; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3hmzk--buttons span.icon {\\n    width: 18px;\\n    height: 18px;\\n    font-size: 18px;\\n    display: inline-block; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3ppq8--buttonsActive span.icon {\\n  color: #22b5ff; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-ftsax--cameraWarning {\\n  margin-top: 0.5em;\\n  font-size: 0.9em;\\n  font-style: italic;\\n  color: rgba(247, 247, 243, 0.3);\\n  width: 0;\\n  min-width: 100%; }\\n\\n.packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-33xh7--cartographer {\\n  padding: 0px; }\\n  .packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-33xh7--cartographer button {\\n    width: 31px !important;\\n    height: 36px !important;\\n    margin: 0px; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAqBA;ECFE,mBAAkB;EAClB,WAAU;EACV,SAAQ;EACR,gBAAe;EACf,gBAAe,EAChB;;ADHD;ECME,0BCUe;EDTf,mBAAkB;EAClB,WAAU;EACV,iFAAwE;UAAxE,yEAAwE;EACxE,iBAAgB;EAChB,qBAAoB;EACpB,qBAAc;MAAd,eAAc,EACf;;AD7BD;EACE,qBAAa;EAAb,cAAa;EACb,mBAAc;MAAd,eAAc;EACd,mBAAkB;EAClB,YAAW;EACX,aAAY,EACb;;AAED;EACE,mBAAkB;EAClB,OAAM;EACN,QAAO;EACP,UAAS;EACT,SAAQ,EACT;;AAED;EAEE,0BEYwB;EFXxB,aAAY;EACZ,cAAa,EAKd;;AAED;EACE,mBAAkB;EAClB,UAlCY;EA2CZ,aAAY;EACZ,aAAY;EACZ,qBAAa;EAAb,cAAa;EACb,2BAAsB;MAAtB,uBAAsB;EACtB,oBAAqB;MAArB,sBAAqB;EAGrB,qBAAoB,EACrB;EAnBD;IAII,WApCU,EAqCX;EALH;IAQI,UAAkB;IAClB,YAzCU,EA0CX;;AAWH;EAEE,qBAAa;EAAb,cAAa;EACb,2BAAsB;MAAtB,uBAAsB;EACtB,aAAY;EACZ,oBAAmB,EAepB;EApBD;IAQI,8BAA6B;IAC7B,aAAY;IACZ,kBAAiB;IACjB,mBAAkB,EACnB;EAZH;IAeI,YAAW;IACX,aAAY;IACZ,gBAAe;IACf,sBAAqB,EACtB;;AAGH;EAEI,eEvCY,EFwCb;;AAGH;EACE,kBAAiB;EACjB,iBAAgB;EAChB,mBAAkB;EAClB,gCErEmC;EFyEnC,SAAQ;EACR,gBAAe,EAChB;;AAED;EACE,aAAY,EAMb;EAPD;IAGI,uBAAsB;IACtB,wBAAuB;IACvB,YAAW,EACZ\",\"file\":\"Layout.module.scss\",\"sourcesContent\":[\"$spacing: 15px;\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n\\n// container for the entire panel\\n.container {\\n  display: flex;\\n  flex: 1 1 auto;\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.world {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n}\\n\\n.topicSettingsEditor {\\n  @extend %floating-box;\\n  background-color: $panel-background;\\n  width: 300px;\\n  padding: 20px;\\n\\n  .closeIcon {\\n    @extend %floating-box-close-icon;\\n  }\\n}\\n\\n.toolbar {\\n  position: absolute;\\n  top: $spacing;\\n  &.left {\\n    left: $spacing;\\n  }\\n  &.right {\\n    // move the right toolbar below the floating panel controls\\n    top: $spacing + 20;\\n    right: $spacing;\\n  }\\n  padding: 0px;\\n  z-index: 101;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-end;\\n\\n  // allow mouse events to pass through the empty space in this container element\\n  pointer-events: none;\\n}\\n\\n.buttons {\\n  @extend %floating-box;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0px;\\n  margin-bottom: 10px;\\n\\n  button {\\n    background-color: transparent;\\n    border: none;\\n    padding-left: 4px;\\n    padding-right: 4px;\\n  }\\n\\n  span:global(.icon) {\\n    width: 18px;\\n    height: 18px;\\n    font-size: 18px;\\n    display: inline-block;\\n  }\\n}\\n\\n.buttonsActive {\\n  span:global(.icon) {\\n    color: $accent;\\n  }\\n}\\n\\n.cameraWarning {\\n  margin-top: 0.5em;\\n  font-size: 0.9em;\\n  font-style: italic;\\n  color: $text-muted;\\n\\n  // don't affect flex parent width\\n  // https://stackoverflow.com/a/25045641/23649\\n  width: 0;\\n  min-width: 100%;\\n}\\n\\n.cartographer {\\n  padding: 0px;\\n  button {\\n    width: 31px !important;\\n    height: 36px !important;\\n    margin: 0px;\\n  }\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-sef3w--toolbar\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"topicSettingsEditor\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-4ny72--topicSettingsEditor\",\n\t\"closeIcon\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-tw6e7--closeIcon\",\n\t\"buttons\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3hmzk--buttons\",\n\t\"container\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-4gt2e--container\",\n\t\"world\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-36swq--world\",\n\t\"left\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3xasx--left\",\n\t\"right\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-n75xz--right\",\n\t\"buttonsActive\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-3ppq8--buttonsActive\",\n\t\"cameraWarning\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-ftsax--cameraWarning\",\n\t\"cartographer\": \"packages-webviz-core-src-panels-ThreeDimensionalViz-Layout-module-33xh7--cartographer\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport { type MouseEventObject } from \"regl-worldview\";\nimport styled from \"styled-components\";\n\nimport { type ClickedPosition } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/Layout\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst SInteractionContextMenu = styled.div`\n  position: fixed;\n  width: 240px;\n  background: ${colors.DARK4};\n  z-index: 101; /* above the Text marker */\n`;\n\nconst SMenu = styled.ul`\n  margin: 0;\n  padding: 0;\n`;\n\nconst STooltip = styled.div`\n  cursor: pointer;\n  background: ${colors.PURPLE1};\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n  padding: 8px;\n`;\n\nconst SMenuItem = styled.li`\n  cursor: pointer;\n  padding: 8px;\n  position: relative;\n  &:hover {\n    background: ${colors.PURPLE1};\n    ${STooltip} {\n      display: block;\n    }\n  }\n`;\n\nconst STopic = styled.div`\n  width: 100%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nconst SId = styled.span`\n  color: ${colors.YELLOW1};\n`;\n\ntype Props = {\n  clickedPosition: ClickedPosition,\n  selectedObjects: MouseEventObject[],\n  onSelectObject: (MouseEventObject) => void,\n};\n\nexport default function InteractionContextMenu({ selectedObjects = [], clickedPosition = {}, onSelectObject }: Props) {\n  return (\n    <SInteractionContextMenu\n      style={{\n        top: clickedPosition.clientY,\n        left: clickedPosition.clientX,\n      }}>\n      <SMenu>\n        {selectedObjects.map(({ object, instanceIndex }, index) => {\n          const menuText = (\n            <>\n              {object.id && <SId>{object.id}</SId>}\n              {object.interactionData && object.interactionData.topic}\n            </>\n          );\n          return (\n            <SMenuItem key={index}>\n              <STopic\n                key={object.id || (object.interactionData && object.interactionData.topic)}\n                onClick={() => onSelectObject({ object, instanceIndex })}>\n                {menuText}\n                <STooltip>{menuText}</STooltip>\n              </STopic>\n            </SMenuItem>\n          );\n        })}\n      </SMenu>\n    </SInteractionContextMenu>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React, { type Node as ReactNode, useCallback, useMemo } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport GlobalVariableSlider from \"webviz-core/src/components/GlobalVariableSlider\";\nimport Item from \"webviz-core/src/components/Menu/Item\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport type { SliderProps } from \"webviz-core/src/components/SliderWithTicks\";\nimport TextField from \"webviz-core/src/components/TextField\";\nimport useGlobalVariables from \"webviz-core/src/hooks/useGlobalVariables\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\n\nexport type GlobalVariableSliderConfig = {\n  sliderProps: SliderProps,\n  globalVariableName: string,\n};\n\ntype Props = {\n  config: GlobalVariableSliderConfig,\n  saveConfig: ($Shape<GlobalVariableSliderConfig>) => void,\n};\n\ntype MenuProps = {\n  config: GlobalVariableSliderConfig,\n  updateConfig: (config: $Shape<GlobalVariableSliderConfig>) => void,\n};\n\n// Validation helper functions for the SliderSettingsMenu\nconst minMaxValidatorFn = (str) => (isNaN(parseFloat(str)) ? \"Must be valid number\" : null);\nconst stepValidatorFn = (str) => {\n  const result = minMaxValidatorFn(str);\n  if (result) {\n    return result;\n  }\n  const number = parseFloat(str);\n  if (number <= 0) {\n    return \"Must be >= 0\";\n  }\n  return null;\n};\n\nfunction SliderSettingsMenu(props: MenuProps) {\n  const { updateConfig, config } = props;\n  const { sliderProps, globalVariableName } = config;\n\n  const updateSliderProps = useCallback(\n    (partial: $Shape<SliderProps>) => {\n      updateConfig({\n        ...config,\n        sliderProps: { ...sliderProps, ...partial },\n      });\n    },\n    [config, sliderProps, updateConfig]\n  );\n\n  const onChangeVariableName = useCallback(\n    (newGlobalVariableName) =>\n      updateConfig({\n        ...config,\n        globalVariableName: newGlobalVariableName,\n      }),\n    [config, updateConfig]\n  );\n\n  const onChangeMin = useCallback((min) => updateSliderProps({ min: parseFloat(min) }), [updateSliderProps]);\n  const onChangeMax = useCallback((max) => updateSliderProps({ max: parseFloat(max) }), [updateSliderProps]);\n  const onChangeStep = useCallback((step) => updateSliderProps({ step: parseFloat(step) }), [updateSliderProps]);\n  return (\n    <>\n      <Item>\n        <TextField\n          value={globalVariableName}\n          onChange={onChangeVariableName}\n          label=\"Global variable name\"\n          validateOnBlur\n        />\n      </Item>\n      <Item>\n        <TextField\n          value={`${sliderProps.min}`}\n          onChange={onChangeMin}\n          placeholder=\"Min\"\n          label=\"Min\"\n          validator={minMaxValidatorFn}\n        />\n      </Item>\n      <Item>\n        <TextField\n          value={`${sliderProps.max}`}\n          onChange={onChangeMax}\n          placeholder=\"Max\"\n          label=\"Max\"\n          validator={minMaxValidatorFn}\n        />\n      </Item>\n      <Item>\n        <TextField\n          value={`${sliderProps.step}`}\n          onChange={onChangeStep}\n          placeholder=\"Step\"\n          label=\"Step\"\n          validator={stepValidatorFn}\n        />\n      </Item>\n    </>\n  );\n}\n\nfunction GlobalVariableSliderPanel(props: Props): ReactNode {\n  const { config, saveConfig } = props;\n  const { sliderProps, globalVariableName } = config;\n  const { globalVariables, setGlobalVariables } = useGlobalVariables();\n\n  const globalVariableValue = globalVariables[globalVariableName];\n  const saveSliderProps = useCallback(\n    (updatedConfig) => {\n      // If the name of the global variable changes, immediately set its value.\n      // Without this, the variable won't be set until the slider is moved.\n      if (updatedConfig.globalVariableName !== config.globalVariableName) {\n        setGlobalVariables({ [updatedConfig.globalVariableName]: globalVariableValue });\n      }\n      saveConfig(updatedConfig);\n    },\n    [config.globalVariableName, globalVariableValue, saveConfig, setGlobalVariables]\n  );\n  const additionalOutput = useMemo(\n    () => {\n      return getGlobalHooks()\n        .perPanelHooks()\n        .GlobalVariableSlider.getVariableSpecificOutput(globalVariableName, globalVariables);\n    },\n    [globalVariableName, globalVariables]\n  );\n  const menuContent = useMemo(() => <SliderSettingsMenu config={config} updateConfig={saveSliderProps} />, [\n    config,\n    saveSliderProps,\n  ]);\n  return (\n    <div style={{ padding: \"25px 4px 4px\" }}>\n      <PanelToolbar floating menuContent={menuContent} />\n      <GlobalVariableSlider sliderProps={sliderProps} globalVariableName={globalVariableName} />\n      {additionalOutput}\n    </div>\n  );\n}\n\nGlobalVariableSliderPanel.panelType = \"GlobalVariableSliderPanel\";\nGlobalVariableSliderPanel.defaultConfig = {\n  sliderProps: { min: 0, max: 10, step: 1 },\n  globalVariableName: \"globalVariable\",\n};\n\nexport default hot(Panel<GlobalVariableSliderConfig>(GlobalVariableSliderPanel));\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React, { type Node as ReactNode, useCallback } from \"react\";\n\nimport { SliderWithTicks } from \"webviz-core/src/components/SliderWithTicks\";\nimport type { SliderProps } from \"webviz-core/src/components/SliderWithTicks\";\nimport useGlobalVariables from \"webviz-core/src/hooks/useGlobalVariables\";\n\ntype Props = {\n  sliderProps: SliderProps,\n  globalVariableName: string,\n};\n\n// A slider that controls the value of a global variable\nexport default function GlobalVariableSlider(props: Props): ReactNode {\n  const { globalVariables, setGlobalVariables } = useGlobalVariables();\n  const globalVariableValue = globalVariables[props.globalVariableName];\n\n  const onChange = useCallback(\n    (newValue) => {\n      if (newValue !== globalVariableValue) {\n        setGlobalVariables({ [props.globalVariableName]: newValue });\n      }\n    },\n    [props.globalVariableName, globalVariableValue, setGlobalVariables]\n  );\n  return <SliderWithTicks value={globalVariableValue} sliderProps={props.sliderProps} onChange={onChange} />;\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { sumBy } from \"lodash\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport textWidth from \"text-width\";\n\nimport AutoSizingCanvas from \"webviz-core/src/components/AutoSizingCanvas\";\nimport Slider from \"webviz-core/src/components/Slider\";\nimport mixins from \"webviz-core/src/styles/mixins.module.scss\";\n\n// The minimum ratio between the width of the panel and the total width taken by the labels.\n// If the ratio drops below this value, (due to the width of the panel changing)\n// we will remove every other label until the ratio is back above this value.\nconst MINIMUM_LABEL_FREESPACE_RATIO = 2;\n\nconst TICK_FONT = { family: mixins.monospaceFont, size: 10 };\n\nconst SSliderContainer = styled.div`\n  height: 30px;\n  position: relative;\n  margin-bottom: 4px;\n`;\n\ntype MeasuredLabel = {\n  text: string,\n  tickWidth: number,\n  value: number,\n};\n\nexport type SliderProps = {\n  min: number,\n  max: number,\n  step: number,\n};\n\nexport function SliderWithTicks(props: { value: number, sliderProps: SliderProps, onChange: (number) => void }) {\n  const { value, sliderProps, onChange } = props;\n  return (\n    <SSliderContainer>\n      <AutoSizingCanvas draw={drawTicks(value, sliderProps)} />\n      <div style={{ position: \"absolute\", left: 0, top: 0, right: 0, bottom: 0 }}>\n        <Slider {...sliderProps} value={value} draggable onChange={onChange} />\n      </div>\n    </SSliderContainer>\n  );\n}\n\n// exported for tests\nexport function getNonOverlappingLabels(measuredLabels: MeasuredLabel[], width: number): MeasuredLabel[] {\n  let stepLabels: MeasuredLabel[] = measuredLabels;\n  do {\n    const totalWidth = sumBy(stepLabels, ({ tickWidth }) => tickWidth);\n    const freeSpaceRatio = width / totalWidth;\n    if (freeSpaceRatio >= MINIMUM_LABEL_FREESPACE_RATIO) {\n      break;\n    }\n    stepLabels = stepLabels.filter((_, i) => i % 2 === 0);\n  } while (stepLabels.length > 3);\n  return stepLabels;\n}\n\nfunction drawTicks(futureTime: number | null, sliderConfig: SliderProps) {\n  const { min, max, step } = sliderConfig;\n\n  // First, measure all the step labels' text widths.\n  // we do this outside the canvas context function so it can be cached.\n  const measuredLabels = [];\n\n  // Represents the number of gaps, not the number of ticks\n  const steps = Math.ceil((max - min) / step);\n  for (let i = 0; i <= steps; i++) {\n    const value = Math.min(min + (i / steps) * (max - min), max);\n    const text = value.toFixed(1);\n\n    const tickWidth = textWidth(text, TICK_FONT);\n    measuredLabels.push({\n      text,\n      value,\n      tickWidth,\n    });\n  }\n\n  return (ctx: CanvasRenderingContext2D, width: number, height: number) => {\n    // We don't want labels to overlap, so keep removing every other one until the\n    // ratio of textWidth to the totalWidth of the panel is above the threshold.\n    const stepLabels = getNonOverlappingLabels(measuredLabels, width);\n\n    // Clear the previous labels and draw the new ones\n    ctx.clearRect(0, 0, width, height);\n    stepLabels.forEach(({ text, tickWidth, value }, i) => {\n      const x = (i / (stepLabels.length - 1)) * width - tickWidth / 2;\n      const y = height / 2 + 2;\n\n      if (futureTime === value) {\n        ctx.font = `bold ${TICK_FONT.size}px ${TICK_FONT.family}`;\n        ctx.fillStyle = \"white\";\n      } else {\n        ctx.font = `${TICK_FONT.size}px ${TICK_FONT.family}`;\n        ctx.fillStyle = \"#666\";\n      }\n      ctx.fillText(text, x, y);\n    });\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst { useRef, useState, useLayoutEffect, useCallback } = React;\n\nexport const STextField = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const STextFieldLabel = styled.label`\n  margin: 8px 0;\n  color: ${colors.GRAY};\n`;\n\nexport const SError = styled.div`\n  color: ${colors.RED};\n  margin: 4px 0;\n`;\n\ntype Props = {\n  defaultValue?: string,\n  focusOnMount?: boolean,\n  inputStyle: { [string]: string | number },\n  hideInlineError?: boolean,\n  label?: string,\n  onBlur: () => void,\n  onChange: (value: string) => void,\n  onError?: (error: ?string) => void,\n  placeholder?: string,\n  style: { [string]: string | number },\n  validateOnBlur?: boolean,\n  validator: (value: any) => ?string,\n  value?: string,\n};\n\nexport default function TextField({\n  defaultValue,\n  focusOnMount,\n  inputStyle,\n  hideInlineError,\n  label,\n  onBlur,\n  onChange,\n  onError,\n  placeholder,\n  style,\n  validateOnBlur,\n  validator,\n  value,\n  ...rest\n}: Props) {\n  const [error, setError] = useState<?string>();\n  const [inputStr, setInputStr] = useState<string>(value || defaultValue || \"\");\n\n  const prevIncomingVal = useRef(\"\");\n  const inputRef = useRef(null);\n\n  useLayoutEffect(\n    () => {\n      // only compare if it's a controlled component\n      if (!defaultValue && !validateOnBlur && prevIncomingVal.current !== value) {\n        const validationResult = validator(value);\n        setError(validationResult || null);\n        setInputStr(value || \"\");\n      }\n      prevIncomingVal.current = value;\n    },\n    [defaultValue, validateOnBlur, validator, value]\n  );\n\n  useLayoutEffect(\n    () => {\n      if (inputRef.current && focusOnMount) {\n        inputRef.current.focus();\n      }\n    },\n    [focusOnMount]\n  );\n\n  useLayoutEffect(\n    () => {\n      if (onError) {\n        onError(error);\n      }\n    },\n    [error, onError]\n  );\n\n  const validate = useCallback(\n    (val) => {\n      const validationResult = validator(val);\n      if (validationResult) {\n        setError(validationResult);\n      } else {\n        setError(null);\n        onChange(val);\n      }\n    },\n    [onChange, validator]\n  );\n\n  const handleChange = useCallback(\n    ({ target }) => {\n      setInputStr(target.value);\n      if (!validateOnBlur) {\n        validate(target.value);\n      }\n    },\n    [validate, validateOnBlur]\n  );\n\n  const handleBlur = useCallback(\n    () => {\n      if (validateOnBlur) {\n        validate(inputStr);\n      }\n      if (onBlur) {\n        onBlur();\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [inputStr, onBlur, validate, validateOnBlur]\n  );\n\n  // only show red border when there is some input and it's not valid\n  const errorStyle = inputStr && error ? { border: `1px solid ${colors.RED}` } : {};\n\n  return (\n    <STextField style={style}>\n      {label && <STextFieldLabel>{label}</STextFieldLabel>}\n      <input\n        onBlur={handleBlur}\n        ref={inputRef}\n        placeholder={placeholder}\n        style={{ marginLeft: 0, ...errorStyle, ...inputStyle }}\n        value={inputStr}\n        onChange={handleChange}\n        {...rest}\n      />\n      {error && !hideInlineError && <SError>{error}</SError>}\n    </STextField>\n  );\n}\n\nTextField.defaultProps = {\n  validator: (value) => undefined,\n  onChange: (value) => {},\n  onBlur: (value) => {},\n  inputStyle: {},\n  style: {},\n};\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport CloseIcon from \"@mdi/svg/svg/close.svg\";\nimport MenuDownIcon from \"@mdi/svg/svg/menu-down.svg\";\nimport WavesIcon from \"@mdi/svg/svg/waves.svg\";\nimport cx from \"classnames\";\nimport { last, get, uniq } from \"lodash\";\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport { createSelector } from \"reselect\";\nimport styled from \"styled-components\";\n\nimport ImageCanvas from \"./ImageCanvas\";\nimport imageCanvasStyles from \"./ImageCanvas.module.scss\";\nimport helpContent from \"./index.help.md\";\nimport style from \"./index.module.scss\";\nimport { getCameraInfoTopic, getCameraNamespace, getRelatedMarkerTopics, getMarkerOptions, groupTopics } from \"./util\";\nimport Autocomplete from \"webviz-core/src/components/Autocomplete\";\nimport ChildToggle from \"webviz-core/src/components/ChildToggle\";\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport dropDownStyles from \"webviz-core/src/components/Dropdown/index.module.scss\";\nimport EmptyState from \"webviz-core/src/components/EmptyState\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { Item, SubMenu } from \"webviz-core/src/components/Menu\";\nimport { useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Topic, Message, TypedMessage } from \"webviz-core/src/players/types\";\nimport inScreenshotTests from \"webviz-core/src/stories/inScreenshotTests\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport type { CameraInfo } from \"webviz-core/src/types/Messages\";\nimport type { SaveConfig } from \"webviz-core/src/types/panels\";\nimport { useShallowMemo, useDeepMemo } from \"webviz-core/src/util/hooks\";\nimport naturalSort from \"webviz-core/src/util/naturalSort\";\nimport { getSynchronizingReducers } from \"webviz-core/src/util/synchronizeMessages\";\nimport { formatTimeRaw } from \"webviz-core/src/util/time\";\nimport toggle from \"webviz-core/src/util/toggle\";\n\nconst { useMemo, useCallback } = React;\n\ntype DefaultConfig = {|\n  cameraTopic: string,\n  enabledMarkerTopics: string[],\n  customMarkerTopicOptions?: string[],\n  scale: number,\n  synchronize: boolean,\n|};\n\nexport type ImageViewPanelHooks = {\n  defaultConfig: DefaultConfig,\n  imageMarkerDatatypes: string[],\n};\n\nexport type Config = {|\n  ...DefaultConfig,\n  panelHooks?: ImageViewPanelHooks,\n  transformMarkers: boolean,\n  mode: \"fit\" | \"fill\" | \"other\" | null,\n  zoomPercentage: ?number,\n  offset: ?(number[]),\n  saveStoryConfig?: () => void,\n|};\n\nexport type SaveImagePanelConfig = SaveConfig<Config>;\n\ntype Props = {\n  config: Config,\n  saveConfig: SaveImagePanelConfig,\n  topics: Topic[],\n};\n\nconst TopicTimestampSpan = styled.span`\n  padding: 0px 15px 0px 0px;\n  font-size: 10px;\n  font-style: italic;\n`;\n\nconst TopicTimestamp = ({ text, style: styleObj }: { text: string, style?: { [string]: string } }) =>\n  text === \"\" ? null : <TopicTimestampSpan style={styleObj}>{text}</TopicTimestampSpan>;\n\nconst BottomBar = ({ children, containsOpen }: { children?: React.Node, containsOpen: boolean }) => (\n  <div\n    className={cx(imageCanvasStyles[\"bottom-bar\"], {\n      [imageCanvasStyles.containsOpen]: inScreenshotTests ? true : containsOpen,\n    })}>\n    {children}\n  </div>\n);\n\nconst ToggleComponent = ({\n  text,\n  disabled = false,\n  dataTest,\n}: {\n  text: string,\n  disabled?: boolean,\n  dataTest?: string,\n}) => {\n  return (\n    <button style={{ maxWidth: \"100%\", padding: \"4px 8px\" }} className={cx({ disabled })} data-test={dataTest}>\n      <span className={dropDownStyles.title}>{text}</span>\n      <Icon style={{ marginLeft: 4 }}>\n        <MenuDownIcon style={{ width: 14, height: 14, opacity: 0.5 }} />\n      </Icon>\n    </button>\n  );\n};\n\n// Group image topics by the first component of their name\nconst imageTopicsByNamespaceSelector = createSelector(\n  (topics?: $ReadOnlyArray<Topic>) => topics || [],\n  (topics: $ReadOnlyArray<Topic>): Map<string, Topic[]> => {\n    const imageTopics = topics.filter(\n      (topic) => topic.datatype === \"sensor_msgs/Image\" || topic.datatype === \"sensor_msgs/CompressedImage\"\n    );\n    return groupTopics(imageTopics);\n  }\n);\n\nfunction renderEmptyState(\n  cameraTopic: string,\n  markerTopics: string[],\n  shouldSynchronize: boolean,\n  messagesByTopic: { [topic: string]: Message[] }\n) {\n  return (\n    <EmptyState>\n      Waiting for images {markerTopics.length > 0 && \"and markers\"} on:\n      <ul>\n        <li>\n          <code>{cameraTopic}</code>\n        </li>\n        {markerTopics.sort().map((m) => (\n          <li key={m}>\n            <code>{m}</code>\n          </li>\n        ))}\n      </ul>\n      {shouldSynchronize && (\n        <>\n          <p>\n            Synchronization is enabled, so all messages with <code>header.stamp</code>s must match exactly.\n          </p>\n          <ul>\n            {Object.keys(messagesByTopic).map((topic) => (\n              <li key={topic}>\n                <code>{topic}</code>:{\" \"}\n                {messagesByTopic[topic] && messagesByTopic[topic].length\n                  ? messagesByTopic[topic]\n                      .map(({ message }) =>\n                        // In some cases, a user may have subscribed to a topic that does not include a header stamp.\n                        message?.header?.stamp ? formatTimeRaw(message.header.stamp) : \"[ unknown ]\"\n                      )\n                      .join(\", \")\n                  : \"no messages\"}\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n    </EmptyState>\n  );\n}\n\nfunction useOptionallySynchronizedMessages(\n  shouldSynchronize: boolean,\n  topics: $ReadOnlyArray<PanelAPI.RequestedTopic>\n) {\n  const memoizedTopics = useDeepMemo(topics);\n  const reducers = useMemo(\n    () =>\n      shouldSynchronize\n        ? getSynchronizingReducers(\n            memoizedTopics.map((request) => (typeof request === \"string\" ? request : request.topic))\n          )\n        : {\n            restore: (previousValue) => ({\n              messagesByTopic: previousValue ? previousValue.messagesByTopic : {},\n              synchronizedMessages: null,\n            }),\n            addMessage: ({ messagesByTopic, synchronizedMessages }, newMessage) => ({\n              messagesByTopic: { ...messagesByTopic, [newMessage.topic]: [newMessage] },\n              synchronizedMessages: null,\n            }),\n          },\n    [shouldSynchronize, memoizedTopics]\n  );\n  return PanelAPI.useMessageReducer({\n    topics,\n    ...reducers,\n  });\n}\n\nconst AddTopic = ({ onSelectTopic, topics }: { onSelectTopic: (string) => void, topics: string[] }) => {\n  return (\n    <div style={{ padding: \"8px 12px\", height: \"31px\" }}>\n      <Autocomplete\n        placeholder=\"Add topic\"\n        items={topics}\n        onSelect={onSelectTopic}\n        getItemValue={(s) => s}\n        getItemText={(s) => s}\n      />\n    </div>\n  );\n};\n\nfunction ImageView(props: Props) {\n  const { config, saveConfig } = props;\n  const {\n    scale,\n    synchronize,\n    cameraTopic,\n    enabledMarkerTopics,\n    panelHooks,\n    transformMarkers,\n    customMarkerTopicOptions = [],\n  } = config;\n  const { topics } = PanelAPI.useDataSourceInfo();\n\n  const imageTopicsByNamespace = imageTopicsByNamespaceSelector(topics);\n  // Represents marker topics based on the camera topic prefix (e.g. \"/camera_front_medium\")\n  const allCameraNamespaces = imageTopicsByNamespace ? [...imageTopicsByNamespace.keys()] : [];\n\n  const { imageMarkerDatatypes } = panelHooks ||\n    getGlobalHooks().perPanelHooks().ImageView || { imageMarkerDatatypes: [] };\n  const defaultAvailableMarkerTopics = getMarkerOptions(cameraTopic, topics, allCameraNamespaces, imageMarkerDatatypes);\n  const availableAndEnabledMarkerTopics = uniq([\n    ...defaultAvailableMarkerTopics,\n    ...customMarkerTopicOptions,\n    ...enabledMarkerTopics,\n  ]).sort();\n  const onToggleMarkerName = useCallback(\n    (markerTopic: string) => {\n      saveConfig({ enabledMarkerTopics: toggle(enabledMarkerTopics, markerTopic) });\n    },\n    [saveConfig, enabledMarkerTopics]\n  );\n\n  const onChangeCameraTopic = useCallback(\n    (newCameraTopic: string) => {\n      const newAvailableMarkerTopics = getMarkerOptions(\n        newCameraTopic,\n        topics,\n        allCameraNamespaces,\n        imageMarkerDatatypes\n      );\n\n      const newEnabledMarkerTopics = getRelatedMarkerTopics(enabledMarkerTopics, newAvailableMarkerTopics);\n      saveConfig({\n        cameraTopic: newCameraTopic,\n        transformMarkers: getGlobalHooks()\n          .perPanelHooks()\n          .ImageView.canTransformMarkersByTopic(newCameraTopic),\n\n        enabledMarkerTopics: newEnabledMarkerTopics,\n      });\n    },\n    [topics, allCameraNamespaces, imageMarkerDatatypes, enabledMarkerTopics, saveConfig]\n  );\n\n  const onChangeScale = useCallback(\n    (newScale: number) => {\n      saveConfig({ scale: newScale });\n    },\n    [saveConfig]\n  );\n\n  const onToggleSynchronize = useCallback(\n    () => {\n      saveConfig({ synchronize: !config.synchronize });\n    },\n    [saveConfig, config.synchronize]\n  );\n\n  const renderImageTopicDropdown = () => {\n    const cameraNamespace = getCameraNamespace(cameraTopic);\n\n    if (!imageTopicsByNamespace || imageTopicsByNamespace.size === 0) {\n      return (\n        <Dropdown\n          toggleComponent={\n            <ToggleComponent dataTest={\"topics-dropdown\"} text={cameraTopic || \"no image topics yet\"} disabled />\n          }\n        />\n      );\n    }\n\n    const items = [...imageTopicsByNamespace.keys()].sort().map((group) => {\n      const imageTopics = imageTopicsByNamespace.get(group);\n      if (!imageTopics) {\n        return null;\n      } // satisfy flow\n      imageTopics.sort(naturalSort(\"name\"));\n\n      // place rectified topic above other imageTopics\n      return (\n        <SubMenu\n          direction=\"right\"\n          key={group}\n          text={group}\n          checked={group === cameraNamespace}\n          dataTest={group.substr(1)}>\n          {imageTopics.map((topic) => {\n            return (\n              <Item\n                key={topic.name}\n                value={topic.name}\n                checked={topic.name === cameraTopic}\n                onClick={() => onChangeCameraTopic(topic.name)}>\n                {topic.name}\n              </Item>\n            );\n          })}\n        </SubMenu>\n      );\n    });\n    return (\n      <Dropdown toggleComponent={<ToggleComponent dataTest={\"topics-dropdown\"} text={cameraTopic} />}>{items}</Dropdown>\n    );\n  };\n\n  const renderMarkerDropdown = (cameraInfo: ?CameraInfo, renderedMarkerTimestamps: { [topic: string]: string }) => {\n    const missingRequiredCameraInfo = scale !== 1 && !cameraInfo;\n\n    return (\n      <Dropdown\n        dataTest={\"markers-dropdown\"}\n        closeOnChange={false}\n        onChange={onToggleMarkerName}\n        value={enabledMarkerTopics}\n        text={availableAndEnabledMarkerTopics.length > 0 ? \"markers\" : \"no markers\"}\n        tooltip={\n          missingRequiredCameraInfo\n            ? \"camera_info is required when image resolution is set to less than 100%.\\nResolution can be changed in the panel settings.\"\n            : undefined\n        }\n        disabled={availableAndEnabledMarkerTopics.length === 0 || missingRequiredCameraInfo}>\n        {availableAndEnabledMarkerTopics.map((topic) => (\n          <Item\n            icon={enabledMarkerTopics.includes(topic) ? <CheckboxMarkedIcon /> : <CheckboxBlankOutlineIcon />}\n            key={topic}\n            value={topic}\n            className={style.dropdownItem}>\n            <span style={{ display: \"inline-block\", marginRight: \"15px\" }}>{topic}</span>\n            <TopicTimestamp text={renderedMarkerTimestamps[topic] || \"\"} />\n            {customMarkerTopicOptions.includes(topic) && (\n              <Icon\n                style={{ position: \"absolute\", right: \"10px\" }}\n                onClick={() =>\n                  saveConfig({\n                    enabledMarkerTopics: enabledMarkerTopics.filter((topicOption) => topicOption !== topic),\n                    customMarkerTopicOptions: customMarkerTopicOptions.filter((topicOption) => topicOption !== topic),\n                  })\n                }>\n                <CloseIcon />\n              </Icon>\n            )}\n          </Item>\n        ))}\n        {\n          <AddTopic\n            topics={topics.map(({ name }) => name).filter((topic) => !availableAndEnabledMarkerTopics.includes(topic))}\n            onSelectTopic={(topic) =>\n              saveConfig({\n                enabledMarkerTopics: [...enabledMarkerTopics, topic],\n                customMarkerTopicOptions: [...customMarkerTopicOptions, topic],\n              })\n            }\n          />\n        }\n      </Dropdown>\n    );\n  };\n\n  const menuContent = useMemo(\n    () => (\n      <>\n        <Item icon={synchronize ? <CheckboxMarkedIcon /> : <CheckboxBlankOutlineIcon />} onClick={onToggleSynchronize}>\n          <span>Synchronize images and markers</span>\n        </Item>\n        <hr />\n        <SubMenu direction=\"right\" text={`Image resolution: ${(scale * 100).toFixed()}%`}>\n          {[0.2, 0.5, 1].map((value) => {\n            return (\n              <Item key={value} value={value} checked={scale === value} onClick={() => onChangeScale(value)}>\n                {(value * 100).toFixed()}%\n              </Item>\n            );\n          })}\n        </SubMenu>\n      </>\n    ),\n    [scale, onChangeScale, synchronize, onToggleSynchronize]\n  );\n\n  const cameraInfoTopic = getCameraInfoTopic(cameraTopic);\n  const cameraInfo: ?CameraInfo = PanelAPI.useMessageReducer({\n    topics: cameraInfoTopic ? [cameraInfoTopic] : [],\n    restore: useCallback((value) => value, []),\n    addMessage: useCallback((value, { message }: TypedMessage<CameraInfo>) => message, []),\n  });\n\n  const shouldSynchronize = config.synchronize && enabledMarkerTopics.length > 0;\n  const imageAndMarkerTopics = useShallowMemo([{ topic: cameraTopic, imageScale: scale }, ...enabledMarkerTopics]);\n  const { messagesByTopic, synchronizedMessages } = useOptionallySynchronizedMessages(\n    shouldSynchronize,\n    imageAndMarkerTopics\n  );\n  const imageMessage = get(messagesByTopic, [cameraTopic, 0]);\n\n  const markersToRender: Message[] = useMemo(\n    () =>\n      shouldSynchronize\n        ? synchronizedMessages\n          ? enabledMarkerTopics.map((topic) => synchronizedMessages[topic])\n          : []\n        : filterMap(enabledMarkerTopics, (topic) => last(messagesByTopic[topic])),\n    [enabledMarkerTopics, messagesByTopic, shouldSynchronize, synchronizedMessages]\n  );\n  // Timestamps are displayed for informational purposes in the markers menu\n  const renderedMarkerTimestamps = useMemo(\n    () => {\n      const stamps = {};\n      for (const { topic, message } of markersToRender) {\n        // In some cases, a user may have subscribed to a topic that does not include a header stamp.\n        stamps[topic] = message?.header?.stamp ? formatTimeRaw(message.header.stamp) : \"[ not available ]\";\n      }\n      return stamps;\n    },\n    [markersToRender]\n  );\n\n  const pauseFrame = useMessagePipeline(useCallback((messagePipeline) => messagePipeline.pauseFrame, []));\n  const onStartRenderImage = useCallback(\n    () => {\n      const resumeFrame = pauseFrame(\"ImageView\");\n      const onFinishRenderImage = () => {\n        resumeFrame();\n      };\n      return onFinishRenderImage;\n    },\n    [pauseFrame]\n  );\n\n  const rawMarkerData = {\n    markers: markersToRender,\n    scale,\n    transformMarkers,\n    cameraInfo: markersToRender.length > 0 ? cameraInfo : null,\n  };\n\n  const renderToolbar = () => {\n    return (\n      <PanelToolbar floating helpContent={helpContent} menuContent={menuContent}>\n        <div className={style.controls}>\n          {renderImageTopicDropdown()}\n          {renderMarkerDropdown(cameraInfo, renderedMarkerTimestamps)}\n        </div>\n      </PanelToolbar>\n    );\n  };\n\n  if (!imageMessage || (shouldSynchronize && !synchronizedMessages)) {\n    return (\n      <Flex col clip>\n        {renderToolbar()}\n        {renderEmptyState(cameraTopic, enabledMarkerTopics, shouldSynchronize, messagesByTopic)}\n      </Flex>\n    );\n  }\n\n  return (\n    <Flex col clip>\n      {renderToolbar()}\n      <ImageCanvas\n        panelHooks={panelHooks}\n        topic={cameraTopic}\n        image={imageMessage}\n        rawMarkerData={rawMarkerData}\n        config={config}\n        saveConfig={saveConfig}\n        onStartRenderImage={onStartRenderImage}\n      />\n      <ChildToggle.ContainsOpen>\n        {(containsOpen) => {\n          const canTransformMarkers = getGlobalHooks()\n            .perPanelHooks()\n            .ImageView.canTransformMarkersByTopic(cameraTopic);\n\n          const topicTimestamp = (\n            <TopicTimestamp\n              style={{ padding: \"8px 8px 0px 0px\" }}\n              text={imageMessage ? formatTimeRaw(imageMessage.message.header.stamp) : \"\"}\n            />\n          );\n\n          if (!canTransformMarkers) {\n            return <BottomBar containsOpen={containsOpen}>{topicTimestamp}</BottomBar>;\n          }\n\n          return (\n            <BottomBar containsOpen={containsOpen}>\n              {topicTimestamp}\n              <Icon\n                onClick={() => saveConfig({ transformMarkers: !transformMarkers })}\n                tooltip={\n                  transformMarkers\n                    ? \"Markers are being transformed by webviz based on the camera model. Click to turn it off.\"\n                    : `Markers can be transformed by webviz based on the camera model. Click to turn it on.`\n                }\n                fade\n                medium>\n                <WavesIcon style={{ color: transformMarkers ? colors.orange : colors.textBright }} />\n              </Icon>\n            </BottomBar>\n          );\n        }}\n      </ChildToggle.ContainsOpen>\n    </Flex>\n  );\n}\n\nImageView.panelType = \"ImageViewPanel\";\nImageView.defaultConfig = getGlobalHooks().perPanelHooks().ImageView.defaultConfig;\n\nexport default hot(Panel<Config>(ImageView));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport MagnifyIcon from \"@mdi/svg/svg/magnify.svg\";\nimport cx from \"classnames\";\nimport isEqual from \"lodash/isEqual\";\nimport omit from \"lodash/omit\";\nimport panzoom from \"panzoom\";\nimport React from \"react\";\nimport OutsideClickHandler from \"react-outside-click-handler\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport shallowequal from \"shallowequal\";\nimport styled from \"styled-components\";\nimport uuid from \"uuid\";\n\nimport styles from \"./ImageCanvas.module.scss\";\nimport ImageCanvasWorker from \"./ImageCanvas.worker\";\nimport type { ImageViewPanelHooks, Config, SaveImagePanelConfig } from \"./index\";\nimport { renderImage } from \"./renderImage\";\nimport { checkOutOfBounds, type Dimensions } from \"./util\";\nimport ContextMenu from \"webviz-core/src/components/ContextMenu\";\nimport KeyListener from \"webviz-core/src/components/KeyListener\";\nimport Menu, { Item } from \"webviz-core/src/components/Menu\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport type { Message } from \"webviz-core/src/players/types\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport type { CameraInfo } from \"webviz-core/src/types/Messages\";\nimport { downloadFiles } from \"webviz-core/src/util\";\nimport debouncePromise from \"webviz-core/src/util/debouncePromise\";\nimport type Rpc from \"webviz-core/src/util/Rpc\";\nimport sendNotification from \"webviz-core/src/util/sendNotification\";\nimport supportsOffscreenCanvas from \"webviz-core/src/util/supportsOffscreenCanvas\";\nimport WebWorkerManager from \"webviz-core/src/util/WebWorkerManager\";\n\ntype OnFinishRenderImage = () => void;\ntype Props = {|\n  topic: string,\n  image: ?Message,\n  rawMarkerData: {|\n    markers: Message[],\n    scale: number,\n    transformMarkers: boolean,\n    cameraInfo: ?CameraInfo,\n  |},\n  panelHooks?: ImageViewPanelHooks,\n  config: Config,\n  saveConfig: SaveImagePanelConfig,\n  onStartRenderImage: () => OnFinishRenderImage,\n  useMainThreadRenderingForTesting?: boolean,\n|};\n\ntype State = {|\n  error: ?Error,\n  openZoomChart: boolean,\n|};\n\nconst SErrorMessage = styled.div`\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  position: absolute;\n  align-items: center;\n  justify-content: center;\n  color: ${colors.red};\n`;\n\nconst MAX_ZOOM_PERCENTAGE = 150;\nconst ZOOM_STEP = 5;\n\nconst webWorkerManager = new WebWorkerManager(ImageCanvasWorker, 1);\n\ntype CanvasRenderer =\n  | {|\n      type: \"rpc\",\n      // This is nullable because we destroy the worker whenever we unmount and recreate it if we remount.\n      worker: ?Rpc,\n    |}\n  | {|\n      type: \"mainThread\",\n    |};\n\nexport default class ImageCanvas extends React.Component<Props, State> {\n  _canvasRef = React.createRef<HTMLCanvasElement>();\n  _divRef = React.createRef<HTMLElement>();\n  _id: string;\n  _canvasRenderer: CanvasRenderer;\n  state = {\n    error: undefined,\n    openZoomChart: false,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this._id = uuid.v4();\n    // If we support offscreen canvas, use the ImageCanvasWorker because it improves performance by moving canvas\n    // operations off of the main thread. Allow an override for testing / stories.\n    this._canvasRenderer =\n      !supportsOffscreenCanvas() || props.useMainThreadRenderingForTesting\n        ? { type: \"mainThread\" }\n        : { type: \"rpc\", worker: webWorkerManager.registerWorkerListener(this._id) };\n  }\n\n  // Returns the existing RPC worker, or initializes one if it doesn't exist yet.\n  _getRpcWorker = (): Rpc => {\n    const canvasRenderer = this._canvasRenderer;\n    if (canvasRenderer.type === \"rpc\") {\n      // Create the worker if it hasn't been initialized yet.\n      const worker = canvasRenderer.worker || webWorkerManager.registerWorkerListener(this._id);\n      if (!canvasRenderer.worker) {\n        canvasRenderer.worker = worker;\n      }\n      return worker;\n    }\n    throw new Error(\"_getRpcWorker can only be called with canvasRenderer type rpc\");\n  };\n\n  _setCanvasRef = (canvas: ?HTMLCanvasElement) => {\n    if (canvas) {\n      this.loadZoomFromConfig();\n      if (this._canvasRenderer.type === \"rpc\") {\n        const worker = this._getRpcWorker();\n        // $FlowFixMe This is a function that is not yet in Flow.\n        const transferableCanvas = canvas.transferControlToOffscreen();\n        worker.send<void>(\"initialize\", { id: this._id, canvas: transferableCanvas }, [transferableCanvas]);\n      }\n      this._canvasRef.current = canvas;\n    }\n  };\n\n  panZoomCanvas: any = null;\n  bitmapDimensions: Dimensions = { width: 0, height: 0 };\n\n  keepInBounds = (div: HTMLElement) => {\n    const { x, y, scale } = this.panZoomCanvas.getTransform();\n    if (isNaN(x) || isNaN(y)) {\n      sendNotification(\"Tried to keep canvas in bounds but encountered invalid transform values\", \"\", \"app\", \"warn\");\n      return;\n    }\n    // When zoom is 1, the percentage is fitPercentage\n    // (fitPercent * scale) / 100) is the zoomScale for now\n    const updatedPercentage = scale * 100;\n    const rect = div.getBoundingClientRect();\n    const { width, height } = rect;\n    const offset = checkOutOfBounds(\n      x,\n      y,\n      width,\n      height,\n      // calculate the true width and height of image right now\n      (this.bitmapDimensions.width * updatedPercentage) / 100,\n      (this.bitmapDimensions.height * updatedPercentage) / 100\n    );\n    this.props.saveConfig({ mode: \"other\", offset, zoomPercentage: updatedPercentage }, { keepLayoutInUrl: true });\n    if (offset[0] !== x || offset[1] !== y) {\n      this.panZoomCanvas.moveTo(offset[0], offset[1]);\n    }\n  };\n\n  createPanZoom = () => {\n    const canvas = this._canvasRef.current;\n    const div = this._divRef.current;\n    if (canvas && div) {\n      this.panZoomCanvas = panzoom(canvas, {\n        maxZoom: 1.5,\n        minZoom: 0,\n        zoomSpeed: 0.05,\n        smoothScroll: false,\n        filterKey(e, dx, dy, dz) {\n          // don't let panzoom handle keyboard event\n          // because zoom in and out has the wrong offset change\n          // left right up and down is different what we use in our daily life\n          return true;\n        },\n      });\n      this.panZoomCanvas.on(\"zoom\", (e) => {\n        const { scale } = this.panZoomCanvas.getTransform();\n        const minPercent = this.fitPercent() * 0.8;\n        if (scale < minPercent / 100) {\n          this.goToTargetPercentage(minPercent);\n        }\n        this.keepInBounds(div);\n      });\n      this.panZoomCanvas.on(\"pan\", (e) => this.keepInBounds(div));\n    }\n  };\n\n  getImageViewport = () => {\n    const div = this._divRef.current;\n\n    if (!div) {\n      throw new Error(\"Don't have div to get width and height\");\n    }\n    return { imageViewportWidth: div.offsetWidth, imageViewportHeight: div.offsetHeight };\n  };\n\n  moveToCenter = () => {\n    if (!this.panZoomCanvas) {\n      sendNotification(\"Tried to center when there is no panZoomCanvas\", \"\", \"app\", \"error\");\n      return;\n    }\n    const { width, height } = this.bitmapDimensions;\n    const { imageViewportWidth, imageViewportHeight } = this.getImageViewport();\n    this.panZoomCanvas.moveTo(\n      (imageViewportWidth - (width * imageViewportHeight) / height) / 2,\n      (imageViewportHeight - (height * imageViewportWidth) / width) / 2\n    );\n  };\n\n  fitPercent = () => {\n    const { width, height } = this.bitmapDimensions;\n    const { imageViewportWidth, imageViewportHeight } = this.getImageViewport();\n    return Math.min(imageViewportWidth / width, imageViewportHeight / height) * 100;\n  };\n\n  fillPercent = () => {\n    const { width, height } = this.bitmapDimensions;\n    const { imageViewportWidth, imageViewportHeight } = this.getImageViewport();\n    return Math.max(imageViewportWidth / width, imageViewportHeight / height) * 100;\n  };\n\n  loadZoomFromConfig = () => {\n    if (this.panZoomCanvas) {\n      return;\n    }\n    this.createPanZoom();\n    this.applyPanZoom();\n  };\n\n  componentDidMount() {\n    this.renderCurrentImage();\n    document.addEventListener(\"visibilitychange\", this._onVisibilityChange);\n  }\n\n  _onVisibilityChange = () => {\n    // HACK: There is a Chrome bug that causes 2d canvas elements to get cleared when the page\n    // becomes hidden on certain hardware:\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=588434\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=591374\n    // We can hack around this by forcing a re-render when the page becomes visible again.\n    // Ideally we can find a global workaround but we're not sure there is one — can't just\n    // twiddle the width/height attribute of the canvas as suggested in one of the comments on\n    // a chrome bug; it seems like you really have to redraw the frame from scratch.\n    if (document.visibilityState === \"visible\") {\n      this.renderCurrentImage();\n    }\n  };\n\n  componentWillUnmount() {\n    const canvasRenderer = this._canvasRenderer;\n    if (canvasRenderer.type === \"rpc\") {\n      // Unset the PRC worker so that we can destroy the worker if it's no longer necessary.\n      webWorkerManager.unregisterWorkerListener(this._id);\n      canvasRenderer.worker = null;\n    }\n    document.removeEventListener(\"visibilitychange\", this._onVisibilityChange);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const imageChanged = !shallowequal(prevProps, this.props, (a, b, key) => {\n      if (key === \"rawMarkerData\") {\n        return shallowequal(a, b, (innerA, innerB, innerKey) => {\n          if (innerKey === \"markers\") {\n            return shallowequal(innerA, innerB);\n          } else if (innerKey === \"cameraInfo\") {\n            return isEqual(omit(innerA, \"header\"), omit(innerB, \"header\"));\n          }\n        });\n      }\n    });\n    if (imageChanged) {\n      this.renderCurrentImage();\n    }\n  }\n\n  downloadImage = () => {\n    const { topic, image } = this.props;\n    const canvas = this._canvasRef.current;\n\n    // satisfy flow\n    if (!canvas || !image) {\n      return;\n    }\n\n    // context: https://stackoverflow.com/questions/37135417/download-canvas-as-png-in-fabric-js-giving-network-error\n    // read the canvas data as an image (png)\n    canvas.toBlob((blob) => {\n      // name the image the same name as the topic\n      // note: the / characters in the file name will be replaced with _\n      // by the browser\n      // remove the leading / so the image name doesn't start with _\n      const topicName = topic.slice(1);\n      const stamp = image.message.header ? image.message.header.stamp : { sec: 0, nsec: 0 };\n      const fileName = `${topicName}-${stamp.sec}-${stamp.nsec}`;\n      downloadFiles([{ blob, fileName }]);\n    });\n  };\n\n  onCanvasRightClick = (e: SyntheticMouseEvent<HTMLCanvasElement>) => {\n    e.stopPropagation();\n    e.preventDefault();\n    return ContextMenu.show(\n      e.clientX,\n      e.clientY,\n      <Menu>\n        <Item onClick={this.downloadImage}>Download Image</Item>\n      </Menu>\n    );\n  };\n\n  clickMagnify = () => {\n    this.setState((state) => ({ openZoomChart: !state.openZoomChart }));\n  };\n  onZoomFit = (keepLayoutInUrl?: boolean) => {\n    const fitPercent = this.fitPercent();\n    this.panZoomCanvas.zoomAbs(0, 0, fitPercent / 100);\n    this.moveToCenter();\n    this.props.saveConfig({ mode: \"fit\", zoomPercentage: fitPercent }, { keepLayoutInUrl });\n  };\n\n  onZoomFill = (keepLayoutInUrl?: boolean) => {\n    const fillPercent = this.fillPercent();\n    this.panZoomCanvas.zoomAbs(0, 0, fillPercent / 100);\n    this.moveToCenter();\n    this.props.saveConfig({ mode: \"fill\", zoomPercentage: fillPercent }, { keepLayoutInUrl });\n  };\n\n  goToTargetPercentage = (targetPercentage: number) => {\n    const { imageViewportWidth, imageViewportHeight } = this.getImageViewport();\n    this.panZoomCanvas.zoomAbs(imageViewportWidth / 2, imageViewportHeight / 2, targetPercentage / 100);\n  };\n\n  onZoomMinus = () => {\n    const { zoomPercentage } = this.props.config;\n    const targetPercentage = Math.max((zoomPercentage || 100) - ZOOM_STEP, this.fitPercent() * 0.8);\n    this.goToTargetPercentage(targetPercentage);\n  };\n\n  onZoomPlus = () => {\n    const { zoomPercentage } = this.props.config;\n    const targetPercentage = Math.min((zoomPercentage || 100) + ZOOM_STEP, MAX_ZOOM_PERCENTAGE);\n    this.goToTargetPercentage(targetPercentage);\n  };\n\n  renderCurrentImage = debouncePromise(async () => {\n    const { image, rawMarkerData, onStartRenderImage } = this.props;\n    const onFinishImageRender = onStartRenderImage();\n    try {\n      const { imageMarkerDatatypes } = getGlobalHooks().perPanelHooks().ImageView;\n      let dimensions;\n      const canvasRenderer = this._canvasRenderer;\n      if (canvasRenderer.type === \"rpc\") {\n        const worker = this._getRpcWorker();\n        dimensions = await worker.send<?Dimensions>(\"renderImage\", {\n          id: this._id,\n          imageMessage: image,\n          rawMarkerData,\n          imageMarkerDatatypes,\n        });\n      } else {\n        dimensions = await renderImage({\n          canvas: this._canvasRef.current,\n          imageMessage: image,\n          rawMarkerData,\n          imageMarkerDatatypes,\n        });\n      }\n\n      if (dimensions) {\n        this.bitmapDimensions = dimensions;\n        this.loadZoomFromConfig();\n      }\n      if (this.state.error) {\n        this.setState({ error: undefined });\n      }\n    } catch (error) {\n      const topic = image ? image.topic : \"\";\n      sendNotification(`failed to decode image on ${topic}:`, \"\", \"user\", \"error\");\n      this.setState({ error });\n    } finally {\n      onFinishImageRender();\n    }\n  });\n\n  renderZoomChart = () => {\n    return this.state.openZoomChart ? (\n      <div className={styles.zoomChart} data-zoom-menu>\n        <div className={cx(styles.menuItem, styles.notInteractive)}>Use mousewheel or buttons to zoom</div>\n        <div className={cx(styles.menuItem, styles.borderBottom)}>\n          <button className={styles.round} onClick={this.onZoomMinus} data-panel-minus-zoom>\n            -\n          </button>\n          <span>{`${(this.props.config.zoomPercentage || 100).toFixed(1)}%`}</span>\n          <button className={styles.round} onClick={this.onZoomPlus} data-panel-add-zoom>\n            +\n          </button>\n        </div>\n        <Item className={styles.borderBottom} onClick={() => this.goToTargetPercentage(100)} dataTest={\"hundred-zoom\"}>\n          Zoom to 100%\n        </Item>\n        <Item className={styles.borderBottom} onClick={this.onZoomFit} dataTest={\"fit-zoom\"}>\n          Zoom to fit\n        </Item>\n        <Item onClick={this.onZoomFill} dataTest={\"fill-zoom\"}>\n          Zoom to fill\n        </Item>\n      </div>\n    ) : null;\n  };\n\n  applyPanZoom = () => {\n    if (!this.panZoomCanvas) {\n      return;\n    }\n\n    const { imageViewportHeight, imageViewportWidth } = this.getImageViewport();\n    if (!imageViewportHeight || !imageViewportWidth) {\n      // While dragging, the viewport may have zero height or width, which throws off the panZoomCanvas\n      return;\n    }\n\n    const { mode, zoomPercentage, offset } = this.props.config;\n    if (!mode || mode === \"fit\") {\n      this.onZoomFit(true);\n    } else if (mode === \"fill\") {\n      this.onZoomFill(true);\n    } else if (mode === \"other\") {\n      // Go to prevPercentage\n      this.goToTargetPercentage(zoomPercentage || 100);\n      this.panZoomCanvas.moveTo(offset ? offset[0] : 0, offset ? offset[1] : 0);\n    }\n  };\n\n  keyDownHandlers = {\n    \"=\": () => {\n      this.onZoomPlus();\n    },\n    \"-\": () => {\n      this.onZoomMinus();\n    },\n    \"1\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(10);\n      }\n    },\n    \"2\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(20);\n      }\n    },\n    \"3\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(30);\n      }\n    },\n    \"4\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(40);\n      }\n    },\n    \"5\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(50);\n      }\n    },\n    \"6\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(60);\n      }\n    },\n    \"7\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(70);\n      }\n    },\n    \"8\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(80);\n      }\n    },\n    \"9\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(90);\n      }\n    },\n    \"0\": (e: KeyboardEvent) => {\n      if (e.metaKey) {\n        this.goToTargetPercentage(100);\n      }\n    },\n  };\n\n  render() {\n    const { mode, zoomPercentage, offset } = this.props.config;\n    if (zoomPercentage && (zoomPercentage > 150 || zoomPercentage < 0)) {\n      sendNotification(\n        `zoomPercentage for the image panel was ${zoomPercentage}, but must be between 0 and 150. It has been reset to 100.`,\n        \"\",\n        \"user\",\n        \"warn\"\n      );\n      this.props.saveConfig({ zoomPercentage: 100 });\n    }\n    if (offset && offset.length !== 2) {\n      sendNotification(\n        `offset for the image panel was ${JSON.stringify(\n          offset\n        )}, but should be an array of length 2. It has been reset to [0, 0].`,\n        \"\",\n        \"user\",\n        \"warn\"\n      );\n      this.props.saveConfig({ offset: [0, 0] });\n    }\n    return (\n      <ReactResizeDetector handleWidth handleHeight onResize={this.applyPanZoom}>\n        <div className={styles.root} ref={this._divRef}>\n          <KeyListener keyDownHandlers={this.keyDownHandlers} />\n          <div>\n            {this.state.error && <SErrorMessage>Error: {this.state.error.message}</SErrorMessage>}\n            <canvas onContextMenu={this.onCanvasRightClick} ref={this._setCanvasRef} className={styles.canvas} />\n          </div>\n          <OutsideClickHandler\n            onOutsideClick={() => {\n              this.setState({ openZoomChart: false });\n            }}>\n            {this.renderZoomChart()}\n            <button className={styles.magnify} onClick={this.clickMagnify} data-magnify-icon>\n              <MagnifyIcon />{\" \"}\n              {mode === \"other\" ? <span>{zoomPercentage ? `${zoomPercentage.toFixed(1)}%` : \"null\"}</span> : null}\n            </button>\n          </OutsideClickHandler>\n        </div>\n      </ReactResizeDetector>\n    );\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-ImageView-ImageCanvas-module-de9b6--root {\\n  height: 100%;\\n  position: relative; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-3wsxs--canvas {\\n  min-width: 0;\\n  min-height: 0;\\n  -o-object-position: top left;\\n     object-position: top left; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-3kw87--bottom-bar {\\n  -webkit-transition: opacity 0.1s ease-in-out;\\n  -o-transition: opacity 0.1s ease-in-out;\\n  transition: opacity 0.1s ease-in-out;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex: 0 0 auto;\\n      flex: 0 0 auto;\\n  -ms-flex-direction: row;\\n      flex-direction: row;\\n  background-color: transparent;\\n  text-align: right;\\n  position: absolute;\\n  right: 4px;\\n  padding-right: 5px;\\n  bottom: 8px;\\n  z-index: 5000;\\n  background-color: transparent;\\n  opacity: 0; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-3kw87--bottom-bar.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-a4s8k--containsOpen {\\n    opacity: 1; }\\n  .mosaic-window:hover .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-3kw87--bottom-bar {\\n    opacity: 1; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-2fxj4--magnify {\\n  position: absolute;\\n  bottom: 5px;\\n  left: 0;\\n  z-index: 102;\\n  opacity: 1;\\n  background-color: #2d2c33;\\n  display: none; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-de9b6--root:hover .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-2fxj4--magnify {\\n    display: block; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-2fxj4--magnify.hoverScreenshot {\\n    display: block; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-2fxj4--magnify svg {\\n    width: 16px;\\n    height: 16px;\\n    fill: white;\\n    float: left; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-2fxj4--magnify span {\\n    color: orange;\\n    float: right;\\n    padding-left: 3px; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-4awwh--zoomChart {\\n  position: absolute;\\n  bottom: 45px;\\n  left: 0;\\n  z-index: 102;\\n  opacity: 1;\\n  background-color: #2d2c33;\\n  width: 145px;\\n  border-radius: 4%;\\n  display: none; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-de9b6--root:hover .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-4awwh--zoomChart {\\n    display: block; }\\n  .packages-webviz-core-src-panels-ImageView-ImageCanvas-module-4awwh--zoomChart.hoverScreenshot {\\n    display: block; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-kres5--round {\\n  margin: 0;\\n  padding: 1px 5px 1px 5px;\\n  border-radius: 100%; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-23f2k--borderBottom {\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1); }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-45bfu--menuItem {\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  -ms-flex-pack: justify;\\n      justify-content: space-between;\\n  padding: 8px 12px 8px 12px; }\\n\\n.packages-webviz-core-src-panels-ImageView-ImageCanvas-module-pmyrv--notInteractive {\\n  opacity: 0.5; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/ImageView/ImageCanvas.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAOA;EACE,aAAY;EACZ,mBAAkB,EACnB;;AAED;EACE,aAAY;EACZ,cAAa;EACb,6BAAyB;KAAzB,0BAAyB,EAC1B;;AAED;EACE,6CAAoC;EAApC,wCAAoC;EAApC,qCAAoC;EACpC,qBAAa;EAAb,cAAa;EACb,mBAAc;MAAd,eAAc;EACd,wBAAmB;MAAnB,oBAAmB;EACnB,8BAA6B;EAC7B,kBAAiB;EAEjB,mBAAkB;EAClB,WAAU;EACV,mBAAkB;EAClB,YAAW;EACX,cAAa;EACb,8BAA6B;EAC7B,WAAU,EASX;EAvBD;IAiBI,WAAU,EACX;EAED;IACE,WAAU,EACX;;AAGH;EACE,mBAAkB;EAClB,YAAW;EACX,QAAO;EACP,aAAY;EACZ,WAAU;EACV,0BCZe;EDaf,cAAa,EAkBd;EAjBC;IACE,eAAc,EACf;EAVH;IAYI,eAAc,EACf;EAbH;IAeI,YAAW;IACX,aAAY;IACZ,YAAW;IACX,YAAW,EACZ;EAnBH;IAqBI,cAAa;IACb,aAAY;IACZ,kBAAiB,EAClB;;AAGH;EACE,mBAAkB;EAClB,aAAY;EACZ,QAAO;EACP,aAAY;EACZ,WAAU;EACV,0BCvCe;EDwCf,aAAY;EACZ,kBAAiB;EACjB,cAAa,EAOd;EANC;IACE,eAAc,EACf;EAZH;IAcI,eAAc,EACf;;AAGH;EACE,UAAS;EACT,yBAAwB;EACxB,oBAAmB,EACpB;;AAED;EACE,kDAAiD,EAClD;;AAED;EACE,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB;EACnB,uBAA8B;MAA9B,+BAA8B;EAC9B,2BAA0B,EAC3B;;AAED;EACE,aAAY,EACb\",\"file\":\"ImageCanvas.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n.root {\\n  height: 100%;\\n  position: relative;\\n}\\n\\n.canvas {\\n  min-width: 0;\\n  min-height: 0;\\n  object-position: top left;\\n}\\n\\n.bottom-bar {\\n  transition: opacity 0.1s ease-in-out;\\n  display: flex;\\n  flex: 0 0 auto;\\n  flex-direction: row;\\n  background-color: transparent;\\n  text-align: right;\\n\\n  position: absolute;\\n  right: 4px;\\n  padding-right: 5px;\\n  bottom: 8px;\\n  z-index: 5000;\\n  background-color: transparent;\\n  opacity: 0;\\n\\n  &.containsOpen {\\n    opacity: 1;\\n  }\\n\\n  :global(.mosaic-window):hover & {\\n    opacity: 1;\\n  }\\n}\\n\\n.magnify {\\n  position: absolute;\\n  bottom: 5px;\\n  left: 0;\\n  z-index: 102;\\n  opacity: 1;\\n  background-color: $toolbar;\\n  display: none;\\n  .root:hover & {\\n    display: block;\\n  }\\n  &:global(.hoverScreenshot) {\\n    display: block;\\n  }\\n  svg {\\n    width: 16px;\\n    height: 16px;\\n    fill: white;\\n    float: left;\\n  }\\n  span {\\n    color: orange;\\n    float: right;\\n    padding-left: 3px;\\n  }\\n}\\n\\n.zoomChart {\\n  position: absolute;\\n  bottom: 45px;\\n  left: 0;\\n  z-index: 102;\\n  opacity: 1;\\n  background-color: $toolbar;\\n  width: 145px;\\n  border-radius: 4%;\\n  display: none;\\n  .root:hover & {\\n    display: block;\\n  }\\n  &:global(.hoverScreenshot) {\\n    display: block;\\n  }\\n}\\n\\n.round {\\n  margin: 0;\\n  padding: 1px 5px 1px 5px;\\n  border-radius: 100%;\\n}\\n\\n.borderBottom {\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\\n}\\n\\n.menuItem {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 8px 12px 8px 12px;\\n}\\n\\n.notInteractive {\\n  opacity: 0.5;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"root\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-de9b6--root\",\n\t\"canvas\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-3wsxs--canvas\",\n\t\"bottom-bar\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-3kw87--bottom-bar\",\n\t\"containsOpen\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-a4s8k--containsOpen\",\n\t\"magnify\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-2fxj4--magnify\",\n\t\"zoomChart\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-4awwh--zoomChart\",\n\t\"round\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-kres5--round\",\n\t\"borderBottom\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-23f2k--borderBottom\",\n\t\"menuItem\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-45bfu--menuItem\",\n\t\"notInteractive\": \"packages-webviz-core-src-panels-ImageView-ImageCanvas-module-pmyrv--notInteractive\"\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"ImageCanvas.worker.js?f5f14559a73acd942875\");\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CameraModel from \"./CameraModel\";\nimport {\n  decodeYUV,\n  decodeRGB8,\n  decodeBGR8,\n  decodeFloat1c,\n  decodeBayerRGGB8,\n  decodeBayerBGGR8,\n  decodeBayerGBRG8,\n  decodeBayerGRBG8,\n  decodeMono8,\n  decodeMono16,\n} from \"./decodings\";\nimport { buildMarkerData, type Dimensions, type RawMarkerData, type MarkerData, type OffscreenCanvas } from \"./util\";\nimport type { Message } from \"webviz-core/src/players/types\";\nimport type { ImageMarker, Color, Point } from \"webviz-core/src/types/Messages\";\nimport sendNotification from \"webviz-core/src/util/sendNotification\";\n\n// Just globally keep track of if we've shown an error in rendering, since typically when you get\n// one error, you'd then get a whole bunch more, which is spammy.\nlet hasLoggedCameraModelError: boolean = false;\n\n// Given a canvas, an image message, and marker info, render the image to the canvas.\n// Nothing in this module should have state.\nexport async function renderImage({\n  canvas,\n  imageMessage,\n  rawMarkerData,\n  imageMarkerDatatypes,\n}: {\n  canvas: ?(HTMLCanvasElement | OffscreenCanvas),\n  imageMessage: any,\n  rawMarkerData: RawMarkerData,\n  imageMarkerDatatypes: string[],\n}): Promise<?Dimensions> {\n  if (!canvas) {\n    return null;\n  }\n  if (!imageMessage) {\n    clearCanvas(canvas);\n    return null;\n  }\n  let markerData = null;\n  try {\n    markerData = buildMarkerData(rawMarkerData);\n  } catch (error) {\n    if (!hasLoggedCameraModelError) {\n      sendNotification(`Failed to initialize camera model from CameraInfo`, error, \"user\", \"warn\");\n      hasLoggedCameraModelError = true;\n    }\n  }\n\n  try {\n    const bitmap = await decodeMessageToBitmap(imageMessage);\n    const dimensions = paintBitmap(canvas, bitmap, markerData, imageMarkerDatatypes);\n    bitmap.close();\n    return dimensions;\n  } catch (error) {\n    // If there is an error, clear the image and re-throw it.\n    clearCanvas(canvas);\n    throw error;\n  }\n}\n\nfunction toRGBA(color: Color) {\n  const { r, g, b, a } = color;\n  return `rgba(${r}, ${g}, ${b}, ${a || 1})`;\n}\n\n// Note: Return type is inexact -- may contain z.\nfunction maybeUnrectifyPoint(cameraModel: ?CameraModel, point: Point): $ReadOnly<{ x: number, y: number }> {\n  if (cameraModel) {\n    return cameraModel.unrectifyPoint(point);\n  }\n  return point;\n}\n\nasync function decodeMessageToBitmap(msg: any): Promise<ImageBitmap> {\n  let image: ImageData | Image | Blob;\n  const { data: rawData, is_bigendian } = msg.message;\n  if (!(rawData instanceof Uint8Array)) {\n    throw new Error(\"Message must have data of type Uint8Array\");\n  }\n\n  // Binary message processing\n  if (msg.datatype === \"sensor_msgs/Image\") {\n    const { width, height, encoding } = msg.message;\n    image = new ImageData(width, height);\n    // prettier-ignore\n    switch (encoding) {\n      case \"yuv422\": decodeYUV(rawData, width, height, image.data); break;\n      case \"rgb8\": decodeRGB8(rawData, width, height, image.data); break;\n      case \"bgr8\": decodeBGR8(rawData, width, height, image.data); break;\n      case \"32FC1\": decodeFloat1c(rawData, width, height, is_bigendian, image.data); break;\n      case \"bayer_rggb8\": decodeBayerRGGB8(rawData, width, height, image.data); break;\n      case \"bayer_bggr8\": decodeBayerBGGR8(rawData, width, height, image.data); break;\n      case \"bayer_gbrg8\": decodeBayerGBRG8(rawData, width, height, image.data); break;\n      case \"bayer_grbg8\": decodeBayerGRBG8(rawData, width, height, image.data); break;\n      case \"mono8\":\n      case \"8UC1\":\n          decodeMono8(rawData, width, height, image.data); break;\n      case \"mono16\":\n      case \"16UC1\":\n          decodeMono16(rawData, width, height, is_bigendian, image.data); break;\n      default:\n        throw new Error(`Unsupported encoding ${encoding}`);\n    }\n  } else if (msg.datatype === \"sensor_msgs/CompressedImage\") {\n    image = new Blob([rawData], { type: `image/${msg.message.format}` });\n  } else {\n    throw new Error(`Message datatype ${msg.datatype} not usable for rendering images.`);\n  }\n\n  return self.createImageBitmap(image);\n}\n\nfunction clearCanvas(canvas: ?HTMLCanvasElement) {\n  if (canvas) {\n    canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\n  }\n}\n\nfunction paintBitmap(\n  canvas: HTMLCanvasElement,\n  bitmap: ImageBitmap,\n  markerData: MarkerData,\n  imageMarkerDatatypes: string[]\n): ?Dimensions {\n  let bitmapDimensions = { width: bitmap.width, height: bitmap.height };\n  const ctx = canvas.getContext(\"2d\");\n  if (!markerData) {\n    resizeCanvas(canvas, bitmap.width, bitmap.height);\n    ctx.transform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(bitmap, 0, 0);\n    return bitmapDimensions;\n  }\n\n  const { markers, cameraModel } = markerData;\n  let { originalWidth, originalHeight } = markerData;\n  if (originalWidth == null) {\n    originalWidth = bitmap.width;\n  }\n  if (originalHeight == null) {\n    originalHeight = bitmap.height;\n  }\n\n  bitmapDimensions = { width: originalWidth, height: originalHeight };\n  resizeCanvas(canvas, originalWidth, originalHeight);\n  ctx.save();\n  ctx.scale(originalWidth / bitmap.width, originalHeight / bitmap.height);\n  ctx.drawImage(bitmap, 0, 0);\n  ctx.restore();\n  ctx.save();\n  try {\n    paintMarkers(ctx, markers, cameraModel, imageMarkerDatatypes);\n  } catch (err) {\n    console.warn(\"error painting markers:\", err);\n  } finally {\n    ctx.restore();\n  }\n  return bitmapDimensions;\n}\n\nfunction paintMarkers(\n  ctx: CanvasRenderingContext2D,\n  messages: Message[],\n  cameraModel: ?CameraModel,\n  imageMarkerDatatypes: string[]\n) {\n  for (const { message } of messages) {\n    ctx.save();\n    try {\n      if (Array.isArray(message.markers)) {\n        for (const marker of message.markers) {\n          paintMarker(ctx, marker, cameraModel);\n        }\n      } else {\n        paintMarker(ctx, message, cameraModel);\n      }\n    } catch (e) {\n      console.error(\"Unable to paint marker to ImageView\", e, message);\n    }\n    ctx.restore();\n  }\n}\n\nfunction paintMarker(ctx: CanvasRenderingContext2D, marker: ImageMarker, cameraModel: ?CameraModel) {\n  switch (marker.type) {\n    case 0: {\n      // CIRCLE\n      ctx.beginPath();\n      const { x, y } = maybeUnrectifyPoint(cameraModel, marker.position);\n      ctx.arc(x, y, marker.scale, 0, 2 * Math.PI);\n      if (marker.thickness <= 0) {\n        ctx.fillStyle = toRGBA(marker.outline_color);\n        ctx.fill();\n      } else {\n        ctx.lineWidth = marker.thickness;\n        ctx.strokeStyle = toRGBA(marker.outline_color);\n        ctx.stroke();\n      }\n      break;\n    }\n\n    // LINE_LIST\n    case 2:\n      if (marker.points.length % 2 !== 0) {\n        break;\n      }\n      ctx.strokeStyle = toRGBA(marker.outline_color);\n      ctx.lineWidth = marker.thickness;\n      for (let i = 0; i < marker.points.length; i += 2) {\n        const { x: x1, y: y1 } = maybeUnrectifyPoint(cameraModel, marker.points[i]);\n        const { x: x2, y: y2 } = maybeUnrectifyPoint(cameraModel, marker.points[i + 1]);\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n      }\n      break;\n\n    // LINE_STRIP, POLYGON\n    case 1:\n    case 3: {\n      if (marker.points.length === 0) {\n        break;\n      }\n      ctx.beginPath();\n      const { x, y } = maybeUnrectifyPoint(cameraModel, marker.points[0]);\n      ctx.moveTo(x, y);\n      for (let i = 1; i < marker.points.length; i++) {\n        const maybeUnrectifiedPoint = maybeUnrectifyPoint(cameraModel, marker.points[i]);\n        ctx.lineTo(maybeUnrectifiedPoint.x, maybeUnrectifiedPoint.y);\n      }\n      if (marker.type === 3) {\n        ctx.closePath();\n      }\n      if (marker.thickness <= 0) {\n        ctx.fillStyle = toRGBA(marker.outline_color);\n        ctx.fill();\n      } else {\n        ctx.strokeStyle = toRGBA(marker.outline_color);\n        ctx.lineWidth = marker.thickness;\n        ctx.stroke();\n      }\n      break;\n    }\n\n    case 4: {\n      // POINTS\n      if (marker.points.length === 0) {\n        break;\n      }\n\n      const size = marker.scale || 4;\n      if (marker.outline_colors && marker.outline_colors.length === marker.points.length) {\n        for (let i = 0; i < marker.points.length; i++) {\n          const { x, y } = maybeUnrectifyPoint(cameraModel, marker.points[i]);\n          ctx.fillStyle = toRGBA(marker.outline_colors[i]);\n          ctx.beginPath();\n          ctx.arc(x, y, size, 0, 2 * Math.PI);\n          ctx.fill();\n        }\n      } else {\n        ctx.beginPath();\n        for (let i = 0; i < marker.points.length; i++) {\n          const { x, y } = maybeUnrectifyPoint(cameraModel, marker.points[i]);\n          ctx.arc(x, y, size, 0, 2 * Math.PI);\n          ctx.closePath();\n        }\n        ctx.fillStyle = toRGBA(marker.fill_color);\n        ctx.fill();\n      }\n      break;\n    }\n\n    case 5: {\n      // TEXT (our own extension on visualization_msgs/Marker)\n      const { x, y } = maybeUnrectifyPoint(cameraModel, marker.position);\n\n      const fontSize = marker.scale * 12;\n      const padding = 4 * marker.scale;\n      ctx.font = `${fontSize}px sans-serif`;\n      ctx.textBaseline = \"bottom\";\n      if (marker.filled) {\n        const metrics = ctx.measureText(marker.text.data);\n        const height = fontSize * 1.2; // Chrome doesn't yet support height in TextMetrics\n        ctx.fillStyle = toRGBA(marker.fill_color);\n        ctx.fillRect(x, y - height, Math.ceil(metrics.width + 2 * padding), Math.ceil(height));\n      }\n      ctx.fillStyle = toRGBA(marker.outline_color);\n      ctx.fillText(marker.text.data, x + padding, y);\n      break;\n    }\n\n    default:\n      console.warn(\"unrecognized image marker type\", marker);\n  }\n}\n\nfunction resizeCanvas(canvas: ?HTMLCanvasElement, width: number, height: number) {\n  if (canvas && (canvas.width !== width || canvas.height !== height)) {\n    canvas.width = width;\n    canvas.height = height;\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport function decodeYUV(yuv: Int8Array, width: number, height: number, output: Uint8ClampedArray) {\n  let c = 0;\n  let off = 0;\n\n  // populate 2 pixels at a time\n  const max = height * width;\n  for (let r = 0; r <= max; r += 2) {\n    const u = yuv[off] - 128;\n    const y1 = yuv[off + 1];\n    const v = yuv[off + 2] - 128;\n    const y2 = yuv[off + 3];\n\n    // rgba\n    output[c] = y1 + 1.402 * v;\n    output[c + 1] = y1 - 0.34414 * u - 0.71414 * v;\n    output[c + 2] = y1 + 1.772 * u;\n    output[c + 3] = 255;\n\n    // rgba\n    output[c + 4] = y2 + 1.402 * v;\n    output[c + 5] = y2 - 0.34414 * u - 0.71414 * v;\n    output[c + 6] = y2 + 1.772 * u;\n    output[c + 7] = 255;\n\n    c += 8;\n    off += 4;\n  }\n}\n\nexport function decodeRGB8(rgb: Uint8Array, width: number, height: number, output: Uint8ClampedArray) {\n  let inIdx = 0;\n  let outIdx = 0;\n\n  for (let i = 0; i < width * height; i++) {\n    const r = rgb[inIdx++];\n    const g = rgb[inIdx++];\n    const b = rgb[inIdx++];\n\n    output[outIdx++] = r;\n    output[outIdx++] = g;\n    output[outIdx++] = b;\n    output[outIdx++] = 255;\n  }\n}\n\nexport function decodeBGR8(bgr: Uint8Array, width: number, height: number, output: Uint8ClampedArray) {\n  let inIdx = 0;\n  let outIdx = 0;\n\n  for (let i = 0; i < width * height; i++) {\n    const b = bgr[inIdx++];\n    const g = bgr[inIdx++];\n    const r = bgr[inIdx++];\n\n    output[outIdx++] = r;\n    output[outIdx++] = g;\n    output[outIdx++] = b;\n    output[outIdx++] = 255;\n  }\n}\n\nexport function decodeFloat1c(\n  gray: Uint8Array,\n  width: number,\n  height: number,\n  is_bigendian: boolean,\n  output: Uint8ClampedArray\n) {\n  const view = new DataView(gray.buffer, gray.byteOffset);\n\n  let outIdx = 0;\n  for (let i = 0; i < width * height * 4; i += 4) {\n    const val = view.getFloat32(i, !is_bigendian) * 255;\n    output[outIdx++] = val;\n    output[outIdx++] = val;\n    output[outIdx++] = val;\n    output[outIdx++] = 255;\n  }\n}\n\nexport function decodeMono8(mono8: Uint8Array, width: number, height: number, output: Uint8ClampedArray) {\n  let inIdx = 0;\n  let outIdx = 0;\n\n  for (let i = 0; i < width * height; i++) {\n    const ch = mono8[inIdx++];\n    output[outIdx++] = ch;\n    output[outIdx++] = ch;\n    output[outIdx++] = ch;\n    output[outIdx++] = 255;\n  }\n}\n\nexport function decodeMono16(\n  mono16: Uint8Array,\n  width: number,\n  height: number,\n  is_bigendian: boolean,\n  output: Uint8ClampedArray\n) {\n  const view = new DataView(mono16.buffer, mono16.byteOffset);\n\n  let outIdx = 0;\n  for (let i = 0; i < width * height * 2; i += 2) {\n    let val = view.getUint16(i, !is_bigendian);\n\n    // For now, just assume values are in the range 0-10000, consistent with image_view's default.\n    // TODO: support dynamic range adjustment and/or user-selectable range\n    // References:\n    // https://github.com/ros-perception/image_pipeline/blob/42266892502427eb566a4dffa61b009346491ce7/image_view/src/nodes/image_view.cpp#L80-L88\n    // https://github.com/ros-visualization/rqt_image_view/blob/fe076acd265a05c11c04f9d04392fda951878f54/src/rqt_image_view/image_view.cpp#L582\n    // https://github.com/ros-visualization/rviz/blob/68b464fb6571b8760f91e8eca6fb933ba31190bf/src/rviz/image/ros_image_texture.cpp#L114\n    val = (val / 10000) * 255;\n\n    output[outIdx++] = val;\n    output[outIdx++] = val;\n    output[outIdx++] = val;\n    output[outIdx++] = 255;\n  }\n}\n\n// Specialize the Bayer decode function to a certain encoding. For performance reasons, we use\n// new Function() -- this is about 20% faster than a switch statement and .bind().\nfunction makeSpecializedDecodeBayer(\n  tl,\n  tr,\n  bl,\n  br\n): (data: Uint8Array, width: number, height: number, output: Uint8ClampedArray) => void {\n  // We probably can't afford real debayering/demosaicking, so do something simpler\n  // The input array look like a single-plane array of pixels.  However, each pixel represents a one particular color\n  // for a group of pixels in the 2x2 region.  For 'rggb', there color representatio for the 2x2 region looks like:\n  //\n  // R  | G0\n  // -------\n  // G1 | B\n  //\n  // In other words, a 2x2 region is represented by one R value, one B value, and two G values.  In sophisticated\n  // algorithms, each color will be weighted and interpolated to fill in the missing colors for the pixels.  These\n  // algorithms may reach beyond the local 2x2 region and use values from neighboring regions.\n  //\n  // We'll do something much simpler.  For each group of 2x2, we're replicate the R and B values for all pixels.\n  // For the two row, we'll replicate G0 for the green channels, and replicate G1 for the bottom row.\n  // eslint-disable-next-line no-new-func\n  return (new Function(\n    \"data\",\n    \"width\",\n    \"height\",\n    \"output\",\n    `\n  for (let i = 0; i < height / 2; i++) {\n    let inIdx = i * 2 * width;\n    let outTopIdx = i * 2 * width * 4; // Addresses top row\n    let outBottomIdx = (i * 2 + 1) * width * 4; // Addresses bottom row\n    for (let j = 0; j < width / 2; j++) {\n      const tl = data[inIdx++];\n      const tr = data[inIdx++];\n      const bl = data[inIdx + width - 2];\n      const br = data[inIdx + width - 1];\n\n      const ${tl} = tl;\n      const ${tr} = tr;\n      const ${bl} = bl;\n      const ${br} = br;\n\n      // Top row\n      output[outTopIdx++] = r;\n      output[outTopIdx++] = g0;\n      output[outTopIdx++] = b;\n      output[outTopIdx++] = 255;\n\n      output[outTopIdx++] = r;\n      output[outTopIdx++] = g0;\n      output[outTopIdx++] = b;\n      output[outTopIdx++] = 255;\n\n      // Bottom row\n      output[outBottomIdx++] = r;\n      output[outBottomIdx++] = g1;\n      output[outBottomIdx++] = b;\n      output[outBottomIdx++] = 255;\n\n      output[outBottomIdx++] = r;\n      output[outBottomIdx++] = g1;\n      output[outBottomIdx++] = b;\n      output[outBottomIdx++] = 255;\n    }\n  }`\n  ): any);\n}\n\nexport const decodeBayerRGGB8 = makeSpecializedDecodeBayer(\"r\", \"g0\", \"g1\", \"b\");\nexport const decodeBayerBGGR8 = makeSpecializedDecodeBayer(\"b\", \"g0\", \"g1\", \"r\");\nexport const decodeBayerGBRG8 = makeSpecializedDecodeBayer(\"g0\", \"b\", \"r\", \"g1\");\nexport const decodeBayerGRBG8 = makeSpecializedDecodeBayer(\"g0\", \"r\", \"b\", \"g1\");\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport Tooltip from \"@cruise-automation/tooltip\";\nimport * as React from \"react\";\n\nimport Menu from \"webviz-core/src/components/Menu\";\n\ntype Props = {\n  children: React.Node,\n};\n\n// a tiny wrapper around the tooltip component that automatically\n// hides on the next mouse click so you don't have to manage window listeners yourself\nexport default class ContextMenu extends React.Component<Props> {\n  static show(x: number, y: number, contents: React.Node) {\n    Tooltip.show(x, y, <ContextMenu>{contents}</ContextMenu>);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"click\", this.hide);\n  }\n\n  hide = () => {\n    window.removeEventListener(\"click\", this.hide);\n    Tooltip.hide();\n  };\n\n  render() {\n    return <Menu>{this.props.children}</Menu>;\n  }\n}\n","module.exports = \"# Image View\\n\\nThe Image View panel displays images from `sensor_msgs/Image` or `sensor_msgs/CompressedImage` topics.\\n\\n16-bit images (`16UC1`) are currently displayed assuming the values fall into the 0&ndash;10000 range, consistent with the defaults of the ROS `image_view` tool.\\n\\nThe **markers** dropdown can be used to toggle on and off topics with type `visualization_msgs/ImageMarker`, which will be overlayed on top of the selected image topic. Note that markers are only available if the `CameraInfo` for the selected camera is being published. If the image is unrectified, the markers will be transformed by webviz based on `CameraInfo`.\\n\\nThe **scale** dropdown allows you to adjust the scale of the image.  Since the images are fairly large, it is recommended to use the smallest scale you need to conserve bandwidth.  Currently using `scale 1.0` can negatively impact rendering speed, particularly if you have a limited bandwidth connection. (Note: only applies to streaming connections, which is not part of the open source version yet.)\\n\\nShortcuts:\\n\\n- =: Zoom in\\n- -: Zoom out\\n- Command + (1 2 3 ... 9 0): Go to percentage 10% - 100%. Note that 10% may be less than the minimum zoom size based on panel and image size.\\n\"","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-ImageView-index-module-6m7vg--controls {\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-wrap: wrap;\\n      flex-wrap: wrap;\\n  -ms-flex: 1 1 auto;\\n      flex: 1 1 auto;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  overflow: hidden; }\\n  .packages-webviz-core-src-panels-ImageView-index-module-6m7vg--controls button {\\n    margin: 1px 4px 1px 0; }\\n\\n.packages-webviz-core-src-panels-ImageView-index-module-3hq5q--dropdownItem {\\n  position: relative; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/ImageView/index.module.scss\"],\"names\":[],\"mappings\":\"AAMA;EACE,qBAAa;EAAb,cAAa;EACb,oBAAe;MAAf,gBAAe;EACf,mBAAc;MAAd,eAAc;EACd,uBAAmB;MAAnB,oBAAmB;EACnB,iBAAgB,EAIjB;EATD;IAOI,sBAAqB,EACtB;;AAGH;EACE,mBAAkB,EACnB\",\"file\":\"index.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n.controls {\\n  display: flex;\\n  flex-wrap: wrap;\\n  flex: 1 1 auto;\\n  align-items: center;\\n  overflow: hidden;\\n  button {\\n    margin: 1px 4px 1px 0;\\n  }\\n}\\n\\n.dropdownItem {\\n  position: relative;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"controls\": \"packages-webviz-core-src-panels-ImageView-index-module-6m7vg--controls\",\n\t\"dropdownItem\": \"packages-webviz-core-src-panels-ImageView-index-module-3hq5q--dropdownItem\"\n};","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { get, mapValues } from \"lodash\";\nimport { TimeUtil, type Time } from \"rosbag\";\n\nimport type { MessageHistoryItemsByPath } from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport type { Message } from \"webviz-core/src/players/types\";\n\n// Get all timestamps of all messages, newest first\nfunction allItemStampsNewestFirst(\n  itemsByPath: MessageHistoryItemsByPath,\n  getHeaderStamp?: (itemMessage: Message) => ?Time\n): Time[] {\n  const stamps = [];\n  for (const path in itemsByPath) {\n    for (const item of itemsByPath[path]) {\n      const stamp = getHeaderStamp ? getHeaderStamp(item.message) : get(item.message, [\"message\", \"header\", \"stamp\"]);\n      if (!stamp) {\n        return [];\n      }\n      stamps.push(stamp);\n    }\n  }\n  return stamps.sort((a, b) => -TimeUtil.compare(a, b));\n}\nfunction allMessageStampsNewestFirst(messagesByTopic: { [topic: string]: Message[] }) {\n  const stamps = [];\n  for (const topic in messagesByTopic) {\n    for (const { message } of messagesByTopic[topic]) {\n      const stamp = get(message, [\"header\", \"stamp\"]);\n      if (stamp) {\n        stamps.push(stamp);\n      }\n    }\n  }\n  return stamps.sort((a, b) => -TimeUtil.compare(a, b));\n}\n\n// Get a subset of items matching a particular timestamp\nfunction itemsMatchingStamp(\n  stamp: Time,\n  itemsByPath: MessageHistoryItemsByPath,\n  getHeaderStamp?: (itemMessage: Message) => ?Time\n): ?MessageHistoryItemsByPath {\n  const synchronizedItemsByPath = {};\n  for (const path in itemsByPath) {\n    let found = false;\n    for (const item of itemsByPath[path]) {\n      const thisStamp = getHeaderStamp\n        ? getHeaderStamp(item.message)\n        : get(item.message, [\"message\", \"header\", \"stamp\"]);\n      if (thisStamp && TimeUtil.areSame(stamp, thisStamp)) {\n        found = true;\n        synchronizedItemsByPath[path] = [item];\n        break;\n      }\n    }\n    if (!found) {\n      return null;\n    }\n  }\n  return synchronizedItemsByPath;\n}\n\n// Return a synchronized subset of the messages in `itemsByPath` with exactly matching header.stamps.\n// If multiple sets of synchronized messages are included, the one with the later header.stamp is returned.\nexport default function synchronizeMessages(\n  itemsByPath: MessageHistoryItemsByPath,\n  getHeaderStamp?: (itemMessage: Message) => ?Time\n): ?MessageHistoryItemsByPath {\n  for (const stamp of allItemStampsNewestFirst(itemsByPath, getHeaderStamp)) {\n    const synchronizedItemsByPath = itemsMatchingStamp(stamp, itemsByPath, getHeaderStamp);\n    if (synchronizedItemsByPath) {\n      return synchronizedItemsByPath;\n    }\n  }\n  return null;\n}\n\nfunction getSynchronizedMessages(\n  stamp: Time,\n  topics: $ReadOnlyArray<string>,\n  messages: { [topic: string]: Message[] }\n): ?{ [topic: string]: Message } {\n  const synchronizedMessages = {};\n  for (const topic of topics) {\n    const matchingMessage = messages[topic].find(({ message }) => {\n      const thisStamp = get(message, [\"header\", \"stamp\"]);\n      return thisStamp && TimeUtil.areSame(stamp, thisStamp);\n    });\n    if (!matchingMessage) {\n      return null;\n    }\n    synchronizedMessages[topic] = matchingMessage;\n  }\n  return synchronizedMessages;\n}\n\ntype ReducedValue = {|\n  messagesByTopic: { [topic: string]: Message[] },\n  synchronizedMessages: ?{ [topic: string]: Message },\n|};\n\nfunction getSynchronizedState(\n  topics: $ReadOnlyArray<string>,\n  { messagesByTopic, synchronizedMessages }: ReducedValue\n): ReducedValue {\n  let newMessagesByTopic = messagesByTopic;\n  let newSynchronizedMessages = synchronizedMessages;\n\n  for (const stamp of allMessageStampsNewestFirst(messagesByTopic)) {\n    const syncedMsgs = getSynchronizedMessages(stamp, topics, messagesByTopic);\n    if (syncedMsgs) {\n      // We've found a new synchronized set; remove messages older than these.\n      newSynchronizedMessages = syncedMsgs;\n      newMessagesByTopic = mapValues(newMessagesByTopic, (msgsByTopic) =>\n        msgsByTopic.filter(({ message }) => {\n          const thisStamp = get(message, [\"header\", \"stamp\"]);\n          return !TimeUtil.isLessThan(thisStamp, stamp);\n        })\n      );\n      break;\n    }\n  }\n  return { messagesByTopic: newMessagesByTopic, synchronizedMessages: newSynchronizedMessages };\n}\n\n// Returns reducers for use with PanelAPI.useMessageReducer\nexport function getSynchronizingReducers(topics: $ReadOnlyArray<string>) {\n  return {\n    restore(previousValue: ?ReducedValue) {\n      const messagesByTopic = {};\n      for (const topic of topics) {\n        messagesByTopic[topic] = (previousValue && previousValue.messagesByTopic[topic]) || [];\n      }\n      return getSynchronizedState(topics, { messagesByTopic, synchronizedMessages: null });\n    },\n    addMessage({ messagesByTopic, synchronizedMessages }: ReducedValue, newMessage: Message) {\n      return getSynchronizedState(topics, {\n        messagesByTopic: {\n          ...messagesByTopic,\n          [newMessage.topic]: messagesByTopic[newMessage.topic]\n            ? messagesByTopic[newMessage.topic].concat(newMessage)\n            : [newMessage],\n        },\n        synchronizedMessages,\n      });\n    },\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { groupBy, keyBy, sortBy, mapValues } from \"lodash\";\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport styled from \"styled-components\";\n\nimport Button from \"webviz-core/src/components/Button\";\nimport Dropdown from \"webviz-core/src/components/Dropdown\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport { Item } from \"webviz-core/src/components/Menu\";\nimport MessageHistoryDEPRECATED from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport { useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport TextContent from \"webviz-core/src/components/TextContent\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Topic, Message, SubscribePayload, AdvertisePayload } from \"webviz-core/src/players/types\";\nimport { downloadTextFile } from \"webviz-core/src/util\";\n\nconst { useCallback } = React;\n\nconst RECORD_ALL = \"RECORD_ALL\";\n\nconst Container = styled.div`\n  padding: 16px;\n  overflow-y: auto;\n  ul {\n    font-size: 10px;\n    margin-left: 8px;\n  }\n  li {\n    margin: 4px 0;\n  }\n  h1 {\n    font-size: 1.5em;\n    margin-bottom: 0.5em;\n  }\n  section {\n    flex: 1 1 50%;\n    overflow: hidden;\n  }\n`;\n\nfunction getSubscriptionGroup({ requester }: SubscribePayload): string {\n  if (!requester) {\n    return \"<unknown>\";\n  }\n  switch (requester.type) {\n    case \"panel\":\n      return `Panel “${requester.name}”`;\n    case \"node\":\n      return `Node “${requester.name}”`;\n    case \"other\":\n      return requester.name;\n  }\n  (requester.type: empty); // enforce that all cases are handled in switch above\n  // this shouldn't be necessary, but Flow doesn't let us fall off the end without returning a string\n  // https://github.com/facebook/flow/issues/451\n  return `<unknown: ${requester.type} ${requester.name}>`;\n}\n\nfunction getPublisherGroup({ advertiser }: AdvertisePayload): string {\n  if (!advertiser) {\n    return \"<unknown>\";\n  }\n  switch (advertiser.type) {\n    case \"panel\":\n      return `Panel “${advertiser.name}”`;\n  }\n  (advertiser.type: empty);\n  return `<unknown: ${advertiser.type} ${advertiser.name}>`;\n}\n\n// Display webviz internal state for debugging and viewing topic dependencies.\nfunction Internals(): React.Node {\n  const { topics } = PanelAPI.useDataSourceInfo();\n  const subscriptions = useMessagePipeline(\n    useCallback(({ subscriptions: pipelineSubscriptions }) => pipelineSubscriptions, [])\n  );\n  const publishers = useMessagePipeline(useCallback(({ publishers: pipelinePublishers }) => pipelinePublishers, []));\n\n  const [groupedSubscriptions, subscriptionGroups] = React.useMemo(\n    () => {\n      const grouped = groupBy(subscriptions, getSubscriptionGroup);\n      return [grouped, Object.keys(grouped)];\n    },\n    [subscriptions]\n  );\n\n  const renderedSubscriptions = React.useMemo(\n    () => {\n      if (subscriptions.length === 0) {\n        return \"(none)\";\n      }\n      const topicsByName = keyBy(topics, (topic) => topic.name);\n\n      return Object.keys(groupedSubscriptions)\n        .sort()\n        .map((key) => {\n          return (\n            <React.Fragment key={key}>\n              <div style={{ marginTop: 16 }}>{key}:</div>\n              <ul>\n                {sortBy(groupedSubscriptions[key], (sub) => sub.topic).map((sub, i) => (\n                  <li key={i}>\n                    <tt>\n                      {sub.topic}\n                      {topicsByName[sub.topic] &&\n                        topicsByName[sub.topic].originalTopic &&\n                        ` (original topic: ${topicsByName[sub.topic].originalTopic})`}\n                    </tt>\n                  </li>\n                ))}\n              </ul>\n            </React.Fragment>\n          );\n        });\n    },\n    [groupedSubscriptions, subscriptions, topics]\n  );\n\n  const renderedPublishers = React.useMemo(\n    () => {\n      if (publishers.length === 0) {\n        return \"(none)\";\n      }\n      const groupedPublishers = groupBy(publishers, getPublisherGroup);\n      return Object.keys(groupedPublishers)\n        .sort()\n        .map((key) => {\n          return (\n            <React.Fragment key={key}>\n              <div style={{ marginTop: 16 }}>{key}:</div>\n              <ul>\n                {sortBy(groupedPublishers[key], (sub) => sub.topic).map((sub, i) => (\n                  <li key={i}>\n                    <tt>{sub.topic}</tt>\n                  </li>\n                ))}\n              </ul>\n            </React.Fragment>\n          );\n        });\n    },\n    [publishers]\n  );\n\n  const [recordGroup, setRecordGroup] = React.useState<string>(RECORD_ALL);\n  const [recordingTopics, setRecordingTopics] = React.useState<?(string[])>();\n  const recordedData = React.useRef<?{ topics: Topic[], frame: { [string]: Message[] } }>();\n\n  function onRecordClick() {\n    if (recordingTopics) {\n      recordedData.current = undefined;\n      setRecordingTopics(undefined);\n      return;\n    }\n    const recordSubs = recordGroup === RECORD_ALL ? subscriptions : groupedSubscriptions[recordGroup];\n    setRecordingTopics(recordSubs.map((sub) => sub.topic));\n  }\n\n  function downloadJSON() {\n    downloadTextFile(JSON.stringify(recordedData.current) || \"{}\", \"fixture.json\");\n  }\n\n  const historyRecorder = React.useMemo(\n    () => {\n      if (!recordingTopics) {\n        return false;\n      }\n      return (\n        <MessageHistoryDEPRECATED paths={recordingTopics} historySize={1}>\n          {({ itemsByPath }) => {\n            const frame = mapValues(itemsByPath, (items) => items.map(({ message }) => message));\n            recordedData.current = {\n              topics: filterMap(Object.keys(itemsByPath), (topic) =>\n                itemsByPath[topic] && itemsByPath[topic].length\n                  ? { name: topic, datatype: itemsByPath[topic][0].message.datatype }\n                  : null\n              ),\n              frame,\n            };\n            return null;\n          }}\n        </MessageHistoryDEPRECATED>\n      );\n    },\n    [recordingTopics]\n  );\n\n  return (\n    <Container>\n      <PanelToolbar floating />\n      <h1>Recording</h1>\n      <TextContent>\n        Press to start recording topic data for debug purposes. The latest messages on each topic will be kept and\n        formatted into a fixture that can be used to create a test.\n      </TextContent>\n      <Flex row wrap style={{ padding: \"8px 0 32px\" }}>\n        <Button isPrimary small onClick={onRecordClick} data-test=\"internals-record-button\">\n          {recordingTopics ? `Recording ${recordingTopics.length} topics…` : \"Record raw data\"}\n        </Button>\n        <Dropdown\n          disabled={!!recordingTopics}\n          text={`Record from: ${recordGroup === RECORD_ALL ? \"All panels\" : recordGroup}`}\n          value={recordGroup}\n          onChange={(value) => setRecordGroup(value)}>\n          <Item value={RECORD_ALL}>All panels</Item>\n          {subscriptionGroups.map((group) => (\n            <Item key={group} value={group}>\n              {group}\n            </Item>\n          ))}\n        </Dropdown>\n        {recordingTopics && (\n          <Button small onClick={downloadJSON} data-test=\"internals-download-button\">\n            Download JSON\n          </Button>\n        )}\n        {historyRecorder}\n      </Flex>\n      <Flex row>\n        <section data-test=\"internals-subscriptions\">\n          <h1>Subscriptions</h1>\n          {renderedSubscriptions}\n        </section>\n        <section data-test=\"internals-publishers\">\n          <h1>Publishers</h1>\n          {renderedPublishers}\n        </section>\n      </Flex>\n    </Container>\n  );\n}\nInternals.panelType = \"Internals\";\nInternals.defaultConfig = {};\n\nexport default hot(Panel<{}>(Internals));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport ArrowLeftIcon from \"@mdi/svg/svg/arrow-left.svg\";\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxOutlineIcon from \"@mdi/svg/svg/checkbox-marked-circle-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport PlusIcon from \"@mdi/svg/svg/plus.svg\";\nimport { some } from \"lodash\";\nimport * as React from \"react\";\nimport Dimensions from \"react-container-dimensions\";\nimport { hot } from \"react-hot-loader/root\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport uuid from \"uuid\";\n\nimport { type Script } from \"./script\";\nimport { setUserNodes as setUserNodesAction } from \"webviz-core/src/actions/panels\";\nimport Button from \"webviz-core/src/components/Button\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Item from \"webviz-core/src/components/Menu/Item\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport SpinningLoadingIcon from \"webviz-core/src/components/SpinningLoadingIcon\";\nimport TextContent from \"webviz-core/src/components/TextContent\";\nimport BottomBar from \"webviz-core/src/panels/NodePlayground/BottomBar\";\nimport Playground from \"webviz-core/src/panels/NodePlayground/playground-icon.svg\";\nimport Sidebar from \"webviz-core/src/panels/NodePlayground/Sidebar\";\nimport { trustUserNode } from \"webviz-core/src/players/UserNodePlayer/nodeSecurity\";\nimport type { UserNodeDiagnostics } from \"webviz-core/src/reducers/userNodes\";\nimport type { UserNodes } from \"webviz-core/src/types/panels\";\nimport { DEFAULT_WEBVIZ_NODE_PREFIX } from \"webviz-core/src/util/globalConstants\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst Editor = React.lazy(() =>\n  import(/* webpackChunkName: \"node-playground-editor\" */ \"webviz-core/src/panels/NodePlayground/Editor\")\n);\n\nconst skeletonBody = `import { Input, Messages } from \"ros\";\n\ntype Output = {};\n\nexport const inputs = [];\nexport const output = \"${DEFAULT_WEBVIZ_NODE_PREFIX}\";\n\n// Populate 'Input' with a parameter to properly type your inputs, e.g. 'Input<\"/your_input_topic\">'\nconst publisher = (message: Input<>): Output => {\n  return {};\n};\n\nexport default publisher;`;\n\ntype Config = {|\n  selectedNodeId: ?string,\n  // Used only for storybook screenshot testing.\n  editorForStorybook?: React.Node,\n  // Used only for storybook screenshot testing.\n  additionalBackStackItems?: Script[],\n  vimMode: boolean,\n|};\n\ntype Props = {\n  config: Config,\n  saveConfig: ($Shape<Config>) => void,\n};\n\nconst UnsavedDot = styled.div`\n  display: ${({ isSaved }: { isSaved: boolean }) => (isSaved ? \"none\" : \"initial\")};\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  transform: translateY(-50%);\n  background-color: ${colors.DARK9};\n`;\n\n// Exported for screenshot testing.\nexport const NodePlaygroundSettings = ({ config, saveConfig }: Props) => (\n  <Item\n    icon={config.vimMode ? <CheckboxMarkedIcon /> : <CheckboxBlankOutlineIcon />}\n    onClick={() => saveConfig({ vimMode: !config.vimMode })}>\n    <span>Vim Mode</span>\n  </Item>\n);\n\nconst SecurityBarWrapper = styled.div`\n  width: 100%;\n  height: 40px;\n  background-color: ${colors.REDL1};\n  display: flex;\n  justify-content: space-between;\n  padding: 8px;\n  align-items: center;\n  font-weight: bold;\n`;\n\nconst TrustButton = styled.button`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 75px;\n  padding: 4px 8px;\n  vertical-align: middle;\n  font-weight: bold;\n  border: 2px solid ${colors.LIGHT1};\n`;\n\nconst SecurityBar = ({ onClick }: { onClick: () => void }) => (\n  <SecurityBarWrapper>\n    <p>\n      Warning: This panel will execute user-defined code that is coming from a remote source. Make sure you trust it.\n    </p>\n    <TrustButton data-test=\"trust-user-scripts\" onClick={onClick}>\n      Trust\n      <Icon small>\n        <CheckboxOutlineIcon />\n      </Icon>\n    </TrustButton>\n  </SecurityBarWrapper>\n);\n\nconst SWelcomeScreen = styled.div`\n  display: flex;\n  text-align: center;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 25%;\n  height: 100%;\n  > * {\n    margin: 4px 0;\n  }\n`;\n\nexport type Explorer = null | \"docs\" | \"nodes\" | \"utils\" | \"templates\";\n\nconst WelcomeScreen = ({\n  addNewNode,\n  updateExplorer,\n}: {|\n  addNewNode: () => void,\n  updateExplorer: (explorer: Explorer) => void,\n|}) => {\n  return (\n    <SWelcomeScreen>\n      <Playground />\n      <TextContent>\n        Welcome to Node Playground! Get started by reading the{\" \"}\n        <a\n          href=\"\"\n          onClick={(e) => {\n            e.preventDefault();\n            updateExplorer(\"docs\");\n          }}>\n          docs\n        </a>\n        , or just create a new node.\n      </TextContent>\n      <Button style={{ marginTop: \"8px\" }} onClick={addNewNode}>\n        <Icon medium>\n          <PlusIcon />\n        </Icon>{\" \"}\n        New node\n      </Button>\n    </SWelcomeScreen>\n  );\n};\n\nfunction NodePlayground(props: Props) {\n  const { config, saveConfig } = props;\n  const { selectedNodeId, editorForStorybook, vimMode } = config;\n\n  const [explorer, updateExplorer] = React.useState<Explorer>(null);\n\n  const userNodes = useSelector((state) => state.panels.userNodes);\n  const userNodeDiagnostics = useSelector((state) => state.userNodes.userNodeDiagnostics);\n  const rosLib = useSelector((state) => state.userNodes.rosLib);\n  const needsUserTrust = useSelector((state) => {\n    const nodes: UserNodeDiagnostics[] = (Object.values(state.userNodes.userNodeDiagnostics): any);\n    return some(nodes, ({ trusted }) => typeof trusted === \"boolean\" && !trusted);\n  });\n\n  const dispatch = useDispatch();\n  const setUserNodes = React.useCallback((payload: UserNodes) => dispatch(setUserNodesAction(payload)), [dispatch]);\n\n  const selectedNodeDiagnostics =\n    selectedNodeId && userNodeDiagnostics[selectedNodeId] ? userNodeDiagnostics[selectedNodeId].diagnostics : [];\n  const selectedNode = selectedNodeId ? userNodes[selectedNodeId] : undefined;\n  const [scriptBackStack, setScriptBackStack] = React.useState<Script[]>([]);\n  // Holds the currently active script\n  const currentScript = scriptBackStack.length > 0 ? scriptBackStack[scriptBackStack.length - 1] : null;\n  const isCurrentScriptSelectedNode = !!selectedNode && !!currentScript && currentScript.filePath === selectedNode.name;\n  const isNodeSaved = !isCurrentScriptSelectedNode || currentScript?.code === selectedNode?.sourceCode;\n  const selectedNodeLogs =\n    selectedNodeId && userNodeDiagnostics[selectedNodeId] ? userNodeDiagnostics[selectedNodeId].logs : [];\n\n  const inputTitle = currentScript\n    ? currentScript.filePath + (currentScript.readOnly ? \" (READONLY)\" : \"\")\n    : \"node name\";\n  const inputStyle = {\n    borderRadius: 0,\n    margin: 0,\n    backgroundColor: colors.DARK2,\n    padding: \"4px 20px\",\n    width: `${inputTitle.length + 4}ch`, // Width based on character count of title + padding\n  };\n\n  React.useLayoutEffect(\n    () => {\n      if (selectedNode) {\n        const testItems = props.config.additionalBackStackItems || [];\n        setScriptBackStack([\n          { filePath: selectedNode.name, code: selectedNode.sourceCode, readOnly: false },\n          ...testItems,\n        ]);\n      }\n    },\n    [props.config.additionalBackStackItems, selectedNode]\n  );\n\n  // UX nicety so that the user can see which nodes need to be verified.\n  React.useLayoutEffect(\n    () => {\n      if (needsUserTrust) {\n        updateExplorer(\"nodes\");\n      }\n    },\n    [needsUserTrust]\n  );\n\n  const addNewNode = React.useCallback(\n    (_, code?: string) => {\n      const newNodeId = uuid.v4();\n      const sourceCode = code || skeletonBody;\n      // TODO: Add integration test for this flow.\n      trustUserNode({ id: newNodeId, sourceCode }).then(() => {\n        setUserNodes({\n          [newNodeId]: {\n            sourceCode,\n            name: `${DEFAULT_WEBVIZ_NODE_PREFIX}${newNodeId.split(\"-\")[0]}`,\n          },\n        });\n        saveConfig({ selectedNodeId: newNodeId });\n      });\n    },\n    [saveConfig, setUserNodes]\n  );\n\n  const trustSelectedNode = React.useCallback(\n    () => {\n      if (!selectedNodeId || !selectedNode) {\n        return;\n      }\n      trustUserNode({ id: selectedNodeId, sourceCode: selectedNode.sourceCode }).then(() => {\n        // no-op in order to trigger the useUserNodes hook.\n        setUserNodes({});\n      });\n    },\n    [selectedNode, selectedNodeId, setUserNodes]\n  );\n\n  const saveNode = React.useCallback(\n    (script) => {\n      if (!selectedNodeId || !script) {\n        return;\n      }\n      trustUserNode({ id: selectedNodeId, sourceCode: script }).then(() => {\n        setUserNodes({ [selectedNodeId]: { ...selectedNode, sourceCode: script } });\n      });\n    },\n    [selectedNode, selectedNodeId, setUserNodes]\n  );\n\n  const setScriptOverride = React.useCallback(\n    (script: Script, maxDepth?: number) => {\n      if (maxDepth && scriptBackStack.length >= maxDepth) {\n        setScriptBackStack([...scriptBackStack.slice(0, maxDepth - 1), script]);\n      } else {\n        setScriptBackStack([...scriptBackStack, script]);\n      }\n    },\n    [scriptBackStack]\n  );\n\n  const goBack = React.useCallback(\n    () => {\n      setScriptBackStack(scriptBackStack.slice(0, scriptBackStack.length - 1));\n    },\n    [scriptBackStack]\n  );\n\n  const setScriptCode = React.useCallback(\n    (code: string) => {\n      // update code at top of backstack\n      const backStack = [...scriptBackStack];\n      if (backStack.length > 0) {\n        const script = backStack.pop();\n        if (!script.readOnly) {\n          setScriptBackStack([...backStack, { ...script, code }]);\n        }\n      }\n    },\n    [scriptBackStack]\n  );\n\n  return (\n    <Dimensions>\n      {({ height, width }) => (\n        <Flex col style={{ height, position: \"relative\" }}>\n          <PanelToolbar floating menuContent={<NodePlaygroundSettings {...props} />} />\n          <Flex style={{ height, width }}>\n            <Sidebar\n              explorer={explorer}\n              updateExplorer={updateExplorer}\n              selectNode={(nodeId) => {\n                if (selectedNodeId && currentScript && isCurrentScriptSelectedNode) {\n                  // Save current state so that user can seamlessly go back to previous work.\n                  setUserNodes({\n                    [selectedNodeId]: { ...selectedNode, sourceCode: currentScript.code },\n                  });\n                }\n                saveConfig({ selectedNodeId: nodeId });\n              }}\n              deleteNode={(nodeId) => {\n                setUserNodes({ ...userNodes, [nodeId]: undefined });\n                saveConfig({ selectedNodeId: undefined });\n              }}\n              selectedNodeId={selectedNodeId}\n              userNodes={userNodes}\n              needsUserTrust={needsUserTrust}\n              userNodeDiagnostics={userNodeDiagnostics}\n              script={currentScript}\n              setScriptOverride={setScriptOverride}\n              addNewNode={addNewNode}\n            />\n            <Flex col>\n              <Flex\n                start\n                style={{\n                  flexGrow: 0,\n                  backgroundColor: colors.DARK1,\n                  alignItems: \"center\",\n                }}>\n                {scriptBackStack.length > 1 && (\n                  <Icon large tooltip=\"Go back\" dataTest=\"go-back\" style={{ color: colors.DARK9 }} onClick={goBack}>\n                    <ArrowLeftIcon />\n                  </Icon>\n                )}\n                {selectedNodeId && (\n                  <div style={{ position: \"relative\" }}>\n                    <input\n                      type=\"text\"\n                      placeholder=\"node name\"\n                      value={inputTitle}\n                      disabled={!currentScript || currentScript.readOnly}\n                      style={inputStyle}\n                      spellCheck={false}\n                      onChange={(e) => {\n                        const newNodeName = e.target.value;\n                        setUserNodes({\n                          ...userNodes,\n                          [selectedNodeId]: { ...selectedNode, name: newNodeName },\n                        });\n                      }}\n                    />\n                    <UnsavedDot isSaved={isNodeSaved} />\n                  </div>\n                )}\n                <Icon\n                  large\n                  tooltip=\"new node\"\n                  dataTest=\"new-node\"\n                  style={{ color: colors.DARK9, padding: \"0 5px\" }}\n                  onClick={addNewNode}>\n                  <PlusIcon />\n                </Icon>\n              </Flex>\n\n              {userNodeDiagnostics[selectedNodeId] &&\n                typeof userNodeDiagnostics[selectedNodeId].trusted === \"boolean\" &&\n                !userNodeDiagnostics[selectedNodeId].trusted && <SecurityBar onClick={trustSelectedNode} />}\n              <Flex col style={{ flexGrow: 1, position: \"relative\" }}>\n                {!selectedNodeId && <WelcomeScreen addNewNode={addNewNode} updateExplorer={updateExplorer} />}\n                <div\n                  key={`${height}x${width}`}\n                  data-nativeundoredo=\"true\"\n                  style={{\n                    height: \"100%\",\n                    width: \"100%\",\n                    display: selectedNodeId\n                      ? \"initial\"\n                      : \"none\" /* Ensures the monaco-editor starts loading before the user opens it */,\n                  }}>\n                  <React.Suspense\n                    fallback={\n                      <Flex center style={{ width: \"100%\", height: \"100%\" }}>\n                        <Icon large>\n                          <SpinningLoadingIcon />\n                        </Icon>\n                      </Flex>\n                    }>\n                    {editorForStorybook || (\n                      <Editor\n                        script={currentScript}\n                        setScriptCode={setScriptCode}\n                        setScriptOverride={setScriptOverride}\n                        vimMode={vimMode}\n                        rosLib={rosLib}\n                        resizeKey={`${width}-${height}-${explorer || \"none\"}-${selectedNodeId || \"none\"}`}\n                        save={saveNode}\n                      />\n                    )}\n                  </React.Suspense>\n                </div>\n                <BottomBar\n                  nodeId={selectedNodeId}\n                  isSaved={isNodeSaved}\n                  save={() => saveNode(currentScript?.code)}\n                  diagnostics={selectedNodeDiagnostics}\n                  logs={selectedNodeLogs}\n                />\n              </Flex>\n            </Flex>\n          </Flex>\n        </Flex>\n      )}\n    </Dimensions>\n  );\n}\n\nNodePlayground.panelType = \"NodePlayground\";\nNodePlayground.defaultConfig = { selectedNodeId: undefined, vimMode: false };\n\nexport default hot(Panel<Config>(NodePlayground));\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport { clearUserNodeLogs } from \"webviz-core/src/actions/userNodes\";\nimport Button from \"webviz-core/src/components/Button\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport DiagnosticsSection from \"webviz-core/src/panels/NodePlayground/BottomBar/DiagnosticsSection\";\nimport LogsSection from \"webviz-core/src/panels/NodePlayground/BottomBar/LogsSection\";\nimport type { Diagnostic, UserNodeLog } from \"webviz-core/src/players/UserNodePlayer/types\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst SHeaderItem = styled.div`\n  cursor: pointer;\n  padding: 4px;\n  text-transform: uppercase;\n`;\n\ntype Props = {\n  nodeId: ?string,\n  isSaved: boolean,\n  save: () => void,\n  diagnostics: Diagnostic[],\n  logs: UserNodeLog[],\n};\n\ntype HeaderItemProps = {\n  text: string,\n  isOpen: boolean,\n  numItems: number,\n};\n\nconst HeaderItem = ({ isOpen, numItems, text }: HeaderItemProps) => (\n  <SHeaderItem\n    style={{\n      color: numItems ? colors.RED : \"inherit\",\n      borderBottom: isOpen ? `1px solid ${colors.DARK6}` : \"none\",\n      paddingBottom: isOpen ? 2 : 0,\n    }}>\n    {text} {numItems || \"\"}\n  </SHeaderItem>\n);\n\ntype BottomBarDisplayState = \"closed\" | \"diagnostics\" | \"logs\";\n\nconst BottomBar = ({ nodeId, isSaved, save, diagnostics, logs }: Props) => {\n  const [bottomBarDisplay: BottomBarDisplayState, setBottomBarDisplay] = useState(\"closed\");\n  const [autoScroll, setAutoScroll] = useState(true);\n\n  const dispatch = useDispatch();\n  const clearLogs = React.useCallback((payload: string) => dispatch(clearUserNodeLogs(payload)), [dispatch]);\n  const scrollContainer = useRef(null);\n\n  useEffect(\n    () => {\n      if (autoScroll) {\n        if (scrollContainer.current) {\n          scrollContainer.current.scrollTop = scrollContainer.current.scrollHeight;\n        }\n      }\n    },\n    [autoScroll, logs]\n  );\n\n  return (\n    <Flex col style={{ backgroundColor: colors.DARK1, position: \"absolute\", bottom: 0, right: 0, left: 0 }}>\n      <Flex\n        row\n        start\n        style={{\n          padding: 5,\n          bottom: 0,\n        }}>\n        <Flex\n          center\n          style={{ flexGrow: 0, color: colors.DARK9 }}\n          dataTest=\"np-errors\"\n          onClick={() => {\n            if (bottomBarDisplay !== \"diagnostics\") {\n              setBottomBarDisplay(\"diagnostics\");\n            } else {\n              setBottomBarDisplay(\"closed\");\n            }\n          }}>\n          <HeaderItem text=\"Problems\" numItems={diagnostics.length} isOpen={bottomBarDisplay === \"diagnostics\"} />\n        </Flex>\n        <Flex\n          center\n          style={{ flexGrow: 0, color: colors.DARK9 }}\n          dataTest=\"np-logs\"\n          onClick={() => {\n            if (bottomBarDisplay !== \"logs\") {\n              setBottomBarDisplay(\"logs\");\n            } else {\n              setBottomBarDisplay(\"closed\");\n            }\n          }}>\n          <HeaderItem text=\"Logs\" numItems={logs.length} isOpen={bottomBarDisplay === \"logs\"} />\n        </Flex>\n        <Button\n          style={{ padding: \"2px 4px\" }}\n          primary={!isSaved}\n          disabled={isSaved}\n          tooltip={\"ctrl/cmd + s\"}\n          onClick={() => {\n            if (nodeId) {\n              save();\n              clearLogs(nodeId);\n            }\n          }}>\n          {isSaved ? \"saved\" : \"save\"}\n        </Button>\n      </Flex>\n      <div\n        ref={scrollContainer}\n        onScroll={({ target }) => {\n          const scrolledUp = target.scrollHeight - target.scrollTop > target.clientHeight;\n          if (scrolledUp && autoScroll) {\n            setAutoScroll(false);\n          } else if (!scrolledUp && !autoScroll) {\n            setAutoScroll(true);\n          }\n        }}\n        style={{\n          overflowY: bottomBarDisplay !== \"closed\" ? \"scroll\" : \"auto\",\n          height: bottomBarDisplay !== \"closed\" ? 150 : 0,\n          color: colors.DARK9,\n        }}>\n        {bottomBarDisplay === \"diagnostics\" && <DiagnosticsSection diagnostics={diagnostics} />}\n        {bottomBarDisplay === \"logs\" && <LogsSection nodeId={nodeId} logs={logs} clearLogs={clearLogs} />}\n      </div>\n    </Flex>\n  );\n};\n\nexport default BottomBar;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport AlertCircleIcon from \"@mdi/svg/svg/alert-circle.svg\";\nimport AlertIcon from \"@mdi/svg/svg/alert.svg\";\nimport HelpCircleIcon from \"@mdi/svg/svg/help-circle.svg\";\nimport InformationIcon from \"@mdi/svg/svg/information.svg\";\nimport { invert } from \"lodash\";\nimport React from \"react\";\n\nimport Icon from \"webviz-core/src/components/Icon\";\nimport type { Diagnostic } from \"webviz-core/src/players/UserNodePlayer/types\";\nimport { DiagnosticSeverity } from \"webviz-core/src/players/UserNodePlayer/types\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst severityColors = {\n  Hint: colors.YELLOWL1,\n  Info: colors.BLUEL1,\n  Warning: colors.ORANGEL1,\n  Error: colors.REDL1,\n};\n\nconst severityIcons = {\n  Hint: <HelpCircleIcon />,\n  Info: <InformationIcon />,\n  Warning: <AlertIcon />,\n  Error: <AlertCircleIcon />,\n};\n\ntype Props = {\n  diagnostics: Diagnostic[],\n};\n\nconst DiagnosticsSection = ({ diagnostics }: Props) => {\n  return diagnostics.length ? (\n    <ul>\n      {diagnostics.map(({ severity, message, source, startColumn = null, startLineNumber = null }, i) => {\n        const severityLabel = invert(DiagnosticSeverity)[severity];\n        const errorLoc =\n          startLineNumber != null && startColumn != null ? `[${startLineNumber + 1},${startColumn + 1}]` : null;\n        return (\n          <li key={`${message}_${i}`}>\n            <Icon tooltip=\"Severity\" small style={{ color: severityColors[severityLabel] }} active>\n              {severityIcons[severityLabel]}\n            </Icon>\n            <span style={{ padding: \"5px\" }}>{message}</span>\n            <span style={{ color: colors.GRAY }}>\n              {source} {errorLoc}\n            </span>\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <p>No problems to display.</p>\n  );\n};\n\nexport default DiagnosticsSection;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React from \"react\";\nimport Tree from \"react-json-tree\";\nimport styled from \"styled-components\";\n\nimport type { UserNodeLog } from \"webviz-core/src/players/UserNodePlayer/types\";\nimport { jsonTreeTheme } from \"webviz-core/src/util/globalConstants\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst SListItem = styled.li`\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  cursor: default;\n\n  :hover {\n    background-color: ${colors.DARK4};\n  }\n`;\n\ntype Props = {\n  nodeId: ?string,\n  logs: UserNodeLog[],\n  clearLogs: (nodeId: string) => void,\n};\n\nconst valueColorMap = {\n  string: jsonTreeTheme.base0B,\n  number: jsonTreeTheme.base09,\n  boolean: jsonTreeTheme.base09,\n  object: jsonTreeTheme.base08, // null\n  undefined: jsonTreeTheme.base08,\n};\n\nconst LogsSection = ({ nodeId, logs, clearLogs }: Props) => {\n  if (logs.length === 0) {\n    return (\n      <>\n        <p>No logs to display.</p>\n        <p>\n          Invoke <code>log(someValue)</code> in your Webviz node code to see data printed here.\n        </p>\n      </>\n    );\n  }\n  return (\n    <>\n      <button\n        data-test=\"np-logs-clear\"\n        style={{ padding: \"3px 5px\", position: \"absolute\", right: 5, top: 5 }}\n        onClick={() => {\n          if (nodeId) {\n            clearLogs(nodeId);\n          }\n        }}>\n        clear logs\n      </button>\n      <ul>\n        {logs.map(({ source, value }, idx) => {\n          const renderTreeObj = value != null && typeof value === \"object\";\n          return (\n            <SListItem key={`${idx}${source}`} style={{ padding: renderTreeObj ? \"0px 3px\" : \"6px 3px 3px\" }}>\n              {renderTreeObj ? (\n                <Tree hideRoot data={value} invertTheme={false} theme={jsonTreeTheme} />\n              ) : (\n                <span style={{ color: valueColorMap[typeof value] || colors.LIGHT }}>\n                  {value == null || value === false ? String(value) : value}\n                </span>\n              )}\n              <div style={{ color: colors.DARK9, textDecoration: \"underline\" }}>{source}</div>\n            </SListItem>\n          );\n        })}\n      </ul>\n    </>\n  );\n};\n\nexport default LogsSection;\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport React from \"react\";\nexport default ((_ref) => {\n  let {\n    styles = {}\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"styles\"]);\n\n  return React.createElement(\n    \"svg\",\n    _extends({ width: \"138\", height: \"107\", viewBox: \"0 0 138 107\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props),\n    React.createElement(\"path\", { d: \"M47.5 19L44 21l3.5 1.5M53.5 22.5L57 21l-3.5-2\", stroke: \"#C8C8C7\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }),\n    React.createElement(\"path\", { d: \"M47 28l5-10.5\", stroke: \"#C8C8C7\", strokeLinecap: \"round\" }),\n    React.createElement(\"path\", { d: \"M0 106.5h39m9.5 0H79m5.5 0H109m11.5 0H136M29.076 47.5L47 27.744 64.924 47.5H29.076z\", stroke: \"#C8C8C7\" }),\n    React.createElement(\"path\", { d: \"M89.5 2.5l-3.5 2L89.5 6M95.5 6L99 4.5l-3.5-2\", stroke: \"#C8C8C7\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }),\n    React.createElement(\"path\", { d: \"M89 11.5L94 1\", stroke: \"#C8C8C7\", strokeLinecap: \"round\" }),\n    React.createElement(\"path\", { d: \"M71.076 31L89 11.244 106.924 31H71.076zM34.5 79.238h25V89.5h-25V79.238zm25-1h-25V47.5h25v30.738zM76.5 37.073h25V71.5h-25V37.073zm25-1h-25V31h25v5.073z\", stroke: \"#C8C8C7\" }),\n    React.createElement(\"circle\", { cx: \"47\", cy: \"61\", r: \"4.5\", stroke: \"#C8C8C7\" }),\n    React.createElement(\"circle\", { cx: \"89\", cy: \"89\", r: \"5.5\", stroke: \"#C8C8C7\" }),\n    React.createElement(\"path\", { d: \"M113 71.5v-11H68m45 11V85c0 5 9.092 12.56 19 10.5l4.5 11H120m-7-35h-11.5M68 60.5h-8.5v11H68m0-11v11m0 0h8.5m43 35h.5m-18.5-35H89m12.5 0V89m0 17.5V89m-25-17.5V89m0-17.5H89m-12.5 35V89m0 0h7M89 71.5v12m5.5 5.5h7m0 0c1.6 9.6 13 15.667 18.5 17.5m-31-12v12M49.075 34.928l4.85 5.144M59.5 89.5v17M34.5 89.5v17M.5 93l34-28.5M1.5 106.5l33-27.5M14 106.5l20.5-17M6 88.5L5.5 103M14 82l-.5 14.5M22 75l-.5 14.5m8.5-21L29.5 83\", stroke: \"#C8C8C7\" })\n  );\n});","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ArrowLeftBoldIcon from \"@mdi/svg/svg/arrow-left-bold.svg\";\nimport DeleteIcon from \"@mdi/svg/svg/delete.svg\";\nimport FileMultipleIcon from \"@mdi/svg/svg/file-multiple.svg\";\nimport HelpCircleIcon from \"@mdi/svg/svg/help-circle.svg\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport TextContent from \"webviz-core/src/components/TextContent\";\nimport type { Explorer } from \"webviz-core/src/panels/NodePlayground\";\nimport TemplateIcon from \"webviz-core/src/panels/NodePlayground/assets/file-document-edit.svg\";\nimport HammerWrenchIcon from \"webviz-core/src/panels/NodePlayground/assets/hammer-wrench.svg\";\nimport nodePlaygroundDocs from \"webviz-core/src/panels/NodePlayground/index.help.md\";\nimport { type Script } from \"webviz-core/src/panels/NodePlayground/script\";\nimport { getNodeProjectConfig } from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/projectConfig\";\nimport templates from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/templates\";\nimport userUtilsReadMe from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/README.md\";\nimport type { UserNodeDiagnostics } from \"webviz-core/src/reducers/userNodes\";\nimport { type UserNodes } from \"webviz-core/src/types/panels\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst MenuWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 40px;\n  background-color: ${colors.DARK1};\n  & > * {\n    margin: 10px;\n  }\n`;\n\nconst ExplorerWrapper = styled.div`\n  display: ${({ show }: { show: boolean }) => (show ? \"initial\" : \"none\")};\n  background-color: ${colors.GRAY2};\n  max-width: 325px;\n  min-width: 275px;\n  overflow: auto;\n`;\n\nconst ListItem = styled.li`\n  padding: 5px;\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: space-between;\n  word-break: break-all;\n  align-items: center;\n  color: ${({ trusted }) => (!trusted ? colors.REDL1 : \"inherit\")};\n  background-color: ${({ selected }: { selected: boolean }) => (selected ? colors.DARK9 : \"transparent\")};\n  > span {\n    opacity: 0;\n  }\n  &:hover {\n    background-color: ${colors.DARK9};\n    span {\n      opacity: 1;\n    }\n  }\n`;\n\nconst TemplateItem = styled.li`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 5px;\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  word-break: break-all;\n  > span {\n    display: block;\n    margin: 3px 0;\n  }\n  &:hover {\n    background-color: ${colors.DARK9};\n  }\n`;\n\nconst SFlex = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  pre {\n    white-space: pre-wrap;\n  }\n`;\n\ntype NodesListProps = {\n  nodes: UserNodes,\n  selectNode: (id: string) => void,\n  deleteNode: (id: string) => void,\n  collapse: () => void,\n  selectedNodeId: ?string,\n  userNodeDiagnostics: {\n    [guid: string]: UserNodeDiagnostics,\n  },\n};\n\nconst NodesList = ({\n  nodes,\n  selectNode,\n  deleteNode,\n  collapse,\n  selectedNodeId,\n  userNodeDiagnostics,\n}: NodesListProps) => {\n  return (\n    <Flex col>\n      <SidebarTitle title={\"nodes\"} collapse={collapse} />\n      {Object.keys(nodes).map((nodeId) => {\n        const trusted = userNodeDiagnostics[nodeId] ? userNodeDiagnostics[nodeId].trusted : true;\n        return (\n          <ListItem\n            key={nodeId}\n            selected={selectedNodeId === nodeId}\n            onClick={() => selectNode(nodeId)}\n            trusted={trusted}>\n            {nodes[nodeId].name}\n            <Icon onClick={() => deleteNode(nodeId)} medium>\n              <DeleteIcon />\n            </Icon>\n          </ListItem>\n        );\n      })}\n    </Flex>\n  );\n};\n\ntype Props = {|\n  selectNode: (nodeId: string) => void,\n  deleteNode: (nodeId: string) => void,\n  userNodes: UserNodes,\n  selectedNodeId: ?string,\n  otherMarkdownDocsForTest?: string,\n  needsUserTrust: boolean,\n  userNodeDiagnostics: {\n    [guid: string]: UserNodeDiagnostics,\n  },\n  explorer: Explorer,\n  updateExplorer: (explorer: Explorer) => void,\n  setScriptOverride: (script: Script, maxDepth?: number) => void,\n  script: Script | null,\n  addNewNode: (_: any, sourceCode?: string) => void,\n|};\n\nconst RedDot = styled.div`\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: ${colors.REDL1};\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n`;\n\nconst { utilityFiles } = getNodeProjectConfig();\n\nconst SidebarTitle = ({ title, tooltip, collapse }: { title: string, tooltip?: string, collapse: () => void }) => (\n  <Flex row style={{ alignItems: \"center\", color: colors.DARK9, padding: \"5px\" }}>\n    <h3 style={{ textTransform: \"uppercase\" }}>{title}</h3>\n    {tooltip && (\n      <Icon style={{ cursor: \"unset\", marginLeft: \"5px\" }} medium tooltip={tooltip}>\n        <HelpCircleIcon />\n      </Icon>\n    )}\n    <div style={{ display: \"flex\", justifyContent: \"flex-end\", flexGrow: 1 }}>\n      <Icon onClick={collapse} medium tooltip={\"collapse\"}>\n        <ArrowLeftBoldIcon />\n      </Icon>\n    </div>\n  </Flex>\n);\n\nconst Sidebar = ({\n  userNodes,\n  selectNode,\n  deleteNode,\n  selectedNodeId,\n  otherMarkdownDocsForTest,\n  needsUserTrust,\n  userNodeDiagnostics,\n  explorer,\n  updateExplorer,\n  setScriptOverride,\n  script,\n  addNewNode,\n}: Props) => {\n  const nodesSelected = explorer === \"nodes\";\n  const docsSelected = explorer === \"docs\";\n  const utilsSelected = explorer === \"utils\";\n  const templatesSelected = explorer === \"templates\";\n\n  const gotoUtils = React.useCallback(\n    (filePath) => {\n      import(/* webpackChunkName: \"monaco-api\" */ \"monaco-editor/esm/vs/editor/editor.api\").then((monacoApi) => {\n        const monacoFilePath = monacoApi.Uri.parse(`file://${filePath}`);\n        const requestedModel = monacoApi.editor.getModel(monacoFilePath);\n        if (!requestedModel) {\n          return;\n        }\n        setScriptOverride(\n          {\n            filePath: requestedModel.uri.path,\n            code: requestedModel.getValue(),\n            readOnly: true,\n            selection: undefined,\n          },\n          2\n        );\n      });\n    },\n    [setScriptOverride]\n  );\n\n  const explorers = React.useMemo(\n    () => ({\n      nodes: (\n        <NodesList\n          nodes={userNodes}\n          selectNode={selectNode}\n          deleteNode={deleteNode}\n          collapse={() => updateExplorer(null)}\n          selectedNodeId={selectedNodeId}\n          userNodeDiagnostics={userNodeDiagnostics}\n        />\n      ),\n      docs: (\n        <SFlex>\n          <SidebarTitle title={\"docs\"} collapse={() => updateExplorer(null)} />\n          <TextContent style={{ backgroundColor: \"transparent\" }} linkTarget=\"_blank\">\n            {otherMarkdownDocsForTest || nodePlaygroundDocs}\n          </TextContent>\n          <br />\n          <br />\n          <TextContent style={{ backgroundColor: \"transparent\" }} linkTarget=\"_blank\">\n            {userUtilsReadMe}\n          </TextContent>\n        </SFlex>\n      ),\n      utils: (\n        <Flex col style={{ position: \"relative\" }}>\n          <SidebarTitle\n            collapse={() => updateExplorer(null)}\n            title={\"utilities\"}\n            tooltip={`You can import any of these modules into your node using the following syntax: 'import { .. } from \"./pointClouds.ts\".\\n\\nWant to contribute? Scroll to the bottom of the docs for details!`}\n          />\n          {utilityFiles.map(({ fileName, filePath }) => (\n            <ListItem\n              key={filePath}\n              onClick={gotoUtils.bind(null, filePath)}\n              trusted\n              selected={script && filePath === script.filePath}>\n              {fileName}\n            </ListItem>\n          ))}\n        </Flex>\n      ),\n\n      templates: (\n        <Flex col>\n          <SidebarTitle\n            title={\"templates\"}\n            tooltip={\"Create nodes from these templates\"}\n            collapse={() => updateExplorer(null)}\n          />\n          {templates.map(({ name, description, template }, i) => (\n            <TemplateItem key={`${name}-${i}`} onClick={addNewNode.bind(null, undefined, template)}>\n              <span style={{ fontWeight: \"bold\" }}>{name}</span>\n              <span>{description}</span>\n            </TemplateItem>\n          ))}\n        </Flex>\n      ),\n    }),\n    [\n      addNewNode,\n      deleteNode,\n      gotoUtils,\n      otherMarkdownDocsForTest,\n      script,\n      selectNode,\n      selectedNodeId,\n      updateExplorer,\n      userNodeDiagnostics,\n      userNodes,\n    ]\n  );\n\n  return (\n    <>\n      <MenuWrapper>\n        <Icon\n          dataTest=\"node-explorer\"\n          onClick={() => updateExplorer(nodesSelected ? null : \"nodes\")}\n          large\n          tooltip={\"nodes\"}\n          style={{ color: nodesSelected ? \"inherit\" : colors.DARK9, position: \"relative\" }}>\n          <FileMultipleIcon />\n          {needsUserTrust && <RedDot />}\n        </Icon>\n        <Icon\n          dataTest=\"utils-explorer\"\n          onClick={() => updateExplorer(utilsSelected ? null : \"utils\")}\n          large\n          tooltip={\"utilities\"}\n          style={{ color: utilsSelected ? \"inherit\" : colors.DARK9 }}>\n          <HammerWrenchIcon />\n        </Icon>\n        <Icon\n          dataTest=\"templates-explorer\"\n          onClick={() => updateExplorer(templatesSelected ? null : \"templates\")}\n          large\n          tooltip={\"templates\"}\n          style={{ color: templatesSelected ? \"inherit\" : colors.DARK9 }}>\n          <TemplateIcon />\n        </Icon>\n        <Icon\n          dataTest=\"docs-explorer\"\n          onClick={() => updateExplorer(docsSelected ? null : \"docs\")}\n          large\n          tooltip={\"docs\"}\n          style={{ color: docsSelected ? \"inherit\" : colors.DARK9 }}>\n          <HelpCircleIcon />\n        </Icon>\n      </MenuWrapper>\n      <ExplorerWrapper show={!!explorer}>{explorer && explorers[explorer]}</ExplorerWrapper>\n    </>\n  );\n};\n\nexport default Sidebar;\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport React from \"react\";\nexport default ((_ref) => {\n  let {\n    styles = {}\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"styles\"]);\n\n  return React.createElement(\n    \"svg\",\n    _extends({ style: {\n        width: \"24px\",\n        height: \"24px\"\n      }, viewBox: \"0 0 24 24\" }, props),\n    React.createElement(\"path\", { fill: \"currentColor\", d: \"M6 2c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h4v-1.91L12.09 18H6v-2h8.09l2-2H6v-2h12.09L20 10.09V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.15 9.5a.55.55 0 0 0-.4.16l-1.02 1.02 2.09 2.08 1.02-1.01c.21-.22.21-.58 0-.79l-1.3-1.3a.544.544 0 0 0-.39-.16m-2.01 1.77L12 20.92V23h2.08l6.15-6.15-2.09-2.08z\" })\n  );\n});","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport React from \"react\";\nexport default ((_ref) => {\n  let {\n    styles = {}\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"styles\"]);\n\n  return React.createElement(\n    \"svg\",\n    _extends({ xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\" }, props),\n    React.createElement(\"path\", { d: \"M13.78 15.3l6 6 2.11-2.16-6-6-2.11 2.16m3.72-5.2c-.39 0-.81-.05-1.14-.19L4.97 21.25l-2.11-2.11 7.41-7.4L8.5 9.96l-.72.7-1.45-1.41v2.86l-.7.7-3.52-3.56.7-.7h2.81l-1.4-1.41 3.56-3.56a2.976 2.976 0 0 1 4.22 0L9.89 5.74l1.41 1.4-.71.71 1.79 1.78 1.82-1.88c-.14-.33-.2-.75-.2-1.12a3.49 3.49 0 0 1 3.5-3.52c.59 0 1.11.14 1.58.42L16.41 6.2l1.5 1.5 2.67-2.67c.28.47.42.97.42 1.6 0 1.92-1.55 3.47-3.5 3.47z\" })\n  );\n});","module.exports = \"# Node Playground\\n\\nNode Playground is a code editor sandbox in which you can write pseudo-ROS topics that get published within Webviz. Node Playground allows you to manipulate, reduce, and filter existing ROS messages and output them in a way that is useful to you.\\n\\n## Getting Started\\n\\nNode Playground uses TypeScript to typecheck messages coming in and out of your nodes. If you are already familiar with TypeScript, skip the \\\"Learning TypeScript\\\" section below.\\n\\n### Learning TypeScript\\n\\nTypeScript is a superset of JavaScript, so Google syntactic questions (e.g. how to manipulate arrays, or access object properties) using JavaScript terms, and semantic questions (e.g. how to make an object property optional) using TypeScript terms.\\n\\nHere are some resources to get yourself ramped up:\\n\\n- [Basic Types](https://www.typescriptlang.org/docs/handbook/basic-types.html)\\n- [Gitbook](https://basarat.gitbooks.io/typescript/content/docs/why-typescript.html)\\n\\nPost in #typescript for TypeScript questions.\\n\\n### Writing Your First Webviz Node\\n\\nEvery Webviz node must declare 3 exports that determine how it should execute:\\n\\n- An inputs array of topic names.\\n- An output topic with an enforced prefix: `/webviz_node/`.\\n- A publisher function that takes messages from input topics and publishes messages under your output topic.\\n\\nHere is a basic node that echoes its input:\\n\\n```typescript\\nimport { Input, Messages } from \\\"ros\\\";\\n\\nexport const inputs = [ \\\"/rosout\\\" ];\\nexport const output = \\\"/webviz_node/echo\\\";\\n\\nconst publisher = (message: Input<\\\"/rosout\\\">): Messages.rosgraph_msgs__Log => {\\n  return message.message;\\n};\\n\\nexport default publisher;\\n```\\n\\nIf you drag in a bag, you should now be able to subscribe to the “/webviz_node/echo” topic in the Raw Messages panel.\\n\\nBut let’s say you want to render some markers in the 3D panel. When you create a new node, you’ll be presented with some boilerplate:\\n\\n```typescript\\nimport { Input, Messages } from \\\"ros\\\";\\n\\ntype Output = {};\\n\\nexport const inputs = [];\\nexport const output = \\\"/webviz_node/\\\";\\n\\n// Populate 'Input' with a parameter to properly type your inputs, e.g. 'Input<\\\"/your_input_topic\\\">'\\nconst publisher = (message: Input<>): Output => {\\n  return {};\\n};\\n\\nexport default publisher;\\n```\\n\\nYou’ll notice a few things:\\n\\n- The types `Input` and `Messages` are being imported from the `ros` module.\\n\\n- The type `Output` has no properties.\\n\\n`Input` is a generic type, meaning that it takes a parameter in order to be used. It is left empty on purpose as you'll need to populate it with the name of your input topic, e.g. `Input<\\\"/rosout\\\">`.\\n\\nAs for the `Output` type, you can either manually type out your output with the properties you care about or use one of the dynamically generated types from the `Messages` type imported above. For instance, if you want to publish an array of markers, you can return the type `Messages.visualization_msgs__MarkerArray`.\\n\\nStrictly typing your nodes will help you debug issues at compile time rather than at runtime. It's not always obvious in Webviz how message properties are affecting the visualized output, and so the more you strictly type your nodes, the less likely you will make mistakes.\\n\\nWith that said, you can disable Typescript checks while getting a rough draft of your node working by adding `// @ts-ignore` on the line above the one you want to ignore.\\n\\n#### Using Multiple Input Topics\\n\\nIn some cases, you will want to define multiple input topics:\\n\\n```typescript\\nimport { Input, Messages } from \\\"ros\\\";\\n\\nexport const inputs = [ \\\"/rosout\\\", \\\"/tf\\\" ];\\nexport const output = \\\"/webviz_node/echo\\\";\\n\\nconst publisher = (message: Input<\\\"/rosout\\\"> | Input<\\\"/tf\\\">): { data: number[] }  => {\\n\\n  if (message.topic === \\\"/rosout\\\") {\\n    // type is now refined to `/rosout` -- you can use `message.message.pose` safely\\n  } else {\\n    // type is now refined to `/tf` -- you can use `message.message.transforms` safely\\n  }\\n\\n  return { data: [] };\\n};\\n\\nexport default publisher;\\n```\\n\\nThis snippet uses [union types](https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types) to assert that the message in the publisher function can take either a `/rosout` or `/tf` topic. Use an `if`/`else` clause to differentiate between incoming topic datatypes when manipulating messages.\\n\\nTo combine messages from multiple topics, create a variable in your node's global scope to reference every time your publisher function is invoked. Check timestamps to make sure you are not publishing out-of-sync data.\\n\\n```typescript\\nimport { Input, Messages, Time } from \\\"ros\\\";\\n\\nexport const inputs = [ \\\"/rosout\\\", \\\"/tf\\\" ];\\nexport const output = \\\"/webviz_node/echo\\\";\\n\\nlet lastReceiveTime: Time = { sec: 0, nsec: 0 };\\nconst myScope: {\\n  tf: Messages.tf2_msgs__TFMessage | null,\\n  rosout: Messages.rosgraph_msgs__Log | null\\n} = { 'tf': null, 'rosout': null };\\n\\nconst publisher = (message: Input<\\\"/rosout\\\"> | Input<\\\"/tf\\\">): { data: number[] } | undefined => {\\n  const { receiveTime  } = message;\\n  let inSync = true;\\n  if (receiveTime.sec !== lastReceiveTime.sec || receiveTime.nsec !== lastReceiveTime.nsec) {\\n    lastReceiveTime = receiveTime;\\n    inSync = false;\\n  }\\n\\n  if (message.topic === \\\"/rosout\\\") {\\n    myScope.rosout = message.message;\\n  } else {\\n    myScope.tf = message.message\\n  }\\n\\n  if (!inSync) {\\n    return { data: [] };\\n  }\\n}\\n\\nexport default publisher;\\n```\\n\\n## Debugging\\n\\nFor easier debugging, invoke `log(someValue)` anywhere in your Webviz node code to print values to the `Logs` section at the bottom of the panel. The only value you cannot `log()` is one that is, or contains, a function definition.\\n\\n```typescript\\nconst add = (a: number, b: number): number => a + b;\\n\\n// NO ERRORS\\nlog(50, \\\"ABC\\\", null, undefined, 5 + 5, { \\\"abc\\\": 2, \\\"def\\\": false }, add(1, 2));\\n\\n// ERRORS\\nlog(() => {});\\nlog(add);\\nlog({ \\\"add\\\": add, \\\"subtract\\\": (a: number, b: number): number => a - b })\\n```\\n\\nInvoking `log()` outside your publisher function will invoke it once, when your node is registered. Invoking `log()` inside your publisher function will log that value every time your publisher function is called.\\n\\nNote that if your topic publishes at a high rate (`tick_information` for instance) using `log` will significantly slow down Node Playground.\\n\\n## FAQ\\n\\n> What if I don't want to produce a message every time `publish` is called?\\n\\nAll you need to do is do an early (or late) return in your function body that is hit when you don't want to publish. For instance, let's say you only wanted to publish messages when a constant in the input is _not_ `3`:\\n\\n```typescript\\nimport { Input } from \\\"ros\\\";\\n\\nexport const inputs = [\\\"/state\\\"];\\nexport const output = \\\"/webviz_node/manual_metrics\\\";\\n\\nconst publisher = (msg: Input<\\\"/state\\\">): { metrics: number } | undefined => {\\n  if (msg.message.constant === 3) {\\n    return;\\n  }\\n  return { /* YOUR DATA HERE */ };\\n};\\n\\nexport default publisher;\\n```\\n\\nNote the union return type in the `publisher` definition. We've indicated to Typescript that this function can return `undefined`, and we do so within the conditional block (In Typescript, if you `return` without a value, it will implicitly return `undefined`). When this code path is hit, we don't publish any message.\\n\"","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\n// All of these definitions can be found in the Typescript project under `libs`.\nexport const lib_filename = \"lib.d.ts\";\n\n// For users debugging in Node Playground.\nconst lib_logger = `\n  declare type BaseTypes<T> = number | string | boolean | void | null | T;\n  declare type LogArgs = { [key: string]: BaseTypes<LogArgs> | BaseTypes<LogArgs>[] };\n  declare var log: (...args: Array<BaseTypes<LogArgs> | BaseTypes<LogArgs>[]>) => void;\n`;\n\nconst lib_es2015_symbol_dts =\n  '/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n\\ninterface SymbolConstructor {\\n    /**\\n     * A reference to the prototype.\\n     */\\n    readonly prototype: Symbol;\\n\\n    /**\\n     * Returns a new unique Symbol value.\\n     * @param  description Description of the new Symbol object.\\n     */\\n    (description?: string | number): symbol;\\n\\n    /**\\n     * Returns a Symbol object from the global symbol registry matching the given key if found.\\n     * Otherwise, returns a new symbol with this key.\\n     * @param key key to search for.\\n     */\\n    for(key: string): symbol;\\n\\n    /**\\n     * Returns a key from the global symbol registry matching the given Symbol if found.\\n     * Otherwise, returns a undefined.\\n     * @param sym Symbol to find the key for.\\n     */\\n    keyFor(sym: symbol): string | undefined;\\n}\\n\\ndeclare var Symbol: SymbolConstructor;';\n\nconst lib_es2015_symbol_wellknown_dts = `/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n${lib_es2015_symbol_dts}\\ninterface SymbolConstructor {\\n    /**\\n     * A method that determines if a constructor object recognizes an object as one of the\\n     * constructor’s instances. Called by the semantics of the instanceof operator.\\n     */\\n    readonly hasInstance: symbol;\\n\\n    /**\\n     * A Boolean value that if true indicates that an object should flatten to its array elements\\n     * by Array.prototype.concat.\\n     */\\n    readonly isConcatSpreadable: symbol;\\n\\n    /**\\n     * A regular expression method that matches the regular expression against a string. Called\\n     * by the String.prototype.match method.\\n     */\\n    readonly match: symbol;\\n\\n    /**\\n     * A regular expression method that replaces matched substrings of a string. Called by the\\n     * String.prototype.replace method.\\n     */\\n    readonly replace: symbol;\\n\\n    /**\\n     * A regular expression method that returns the index within a string that matches the\\n     * regular expression. Called by the String.prototype.search method.\\n     */\\n    readonly search: symbol;\\n\\n    /**\\n     * A function valued property that is the constructor function that is used to create\\n     * derived objects.\\n     */\\n    readonly species: symbol;\\n\\n    /**\\n     * A regular expression method that splits a string at the indices that match the regular\\n     * expression. Called by the String.prototype.split method.\\n     */\\n    readonly split: symbol;\\n\\n    /**\\n     * A method that converts an object to a corresponding primitive value.\\n     * Called by the ToPrimitive abstract operation.\\n     */\\n    readonly toPrimitive: symbol;\\n\\n    /**\\n     * A String value that is used in the creation of the default string description of an object.\\n     * Called by the built-in method Object.prototype.toString.\\n     */\\n    readonly toStringTag: symbol;\\n\\n    /**\\n     * An Object whose own property names are property names that are excluded from the 'with'\\n     * environment bindings of the associated objects.\\n     */\\n    readonly unscopables: symbol;\\n}\\n\\ninterface Symbol {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface Array<T> {\\n    /**\\n     * Returns an object whose properties have the value 'true'\\n     * when they will be absent when used in a 'with' statement.\\n     */\\n    [Symbol.unscopables](): {\\n        copyWithin: boolean;\\n        entries: boolean;\\n        fill: boolean;\\n        find: boolean;\\n        findIndex: boolean;\\n        keys: boolean;\\n        values: boolean;\\n    };\\n}\\n\\ninterface Date {\\n    /**\\n     * Converts a Date object to a string.\\n     */\\n    [Symbol.toPrimitive](hint: \"default\"): string;\\n    /**\\n     * Converts a Date object to a string.\\n     */\\n    [Symbol.toPrimitive](hint: \"string\"): string;\\n    /**\\n     * Converts a Date object to a number.\\n     */\\n    [Symbol.toPrimitive](hint: \"number\"): number;\\n    /**\\n     * Converts a Date object to a string or number.\\n     *\\n     * @param hint The strings \"number\", \"string\", or \"default\" to specify what primitive to return.\\n     *\\n     * @throws {TypeError} If 'hint' was given something other than \"number\", \"string\", or \"default\".\\n     * @returns A number if 'hint' was \"number\", a string if 'hint' was \"string\" or \"default\".\\n     */\\n    [Symbol.toPrimitive](hint: string): string | number;\\n}\\n\\ninterface Map<K, V> {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface WeakMap<K extends object, V> {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface Set<T> {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface WeakSet<T extends object> {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface JSON {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface Function {\\n    /**\\n     * Determines whether the given value inherits from this function if this function was used\\n     * as a constructor function.\\n     *\\n     * A constructor function can control which objects are recognized as its instances by\\n     * 'instanceof' by overriding this method.\\n     */\\n    [Symbol.hasInstance](value: any): boolean;\\n}\\n\\ninterface GeneratorFunction {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface Math {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface Promise<T> {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface PromiseConstructor {\\n    readonly [Symbol.species]: PromiseConstructor;\\n}\\n\\ninterface RegExp {\\n    /**\\n     * Matches a string with this regular expression, and returns an array containing the results of\\n     * that search.\\n     * @param string A string to search within.\\n     */\\n    [Symbol.match](string: string): RegExpMatchArray | null;\\n\\n    /**\\n     * Replaces text in a string, using this regular expression.\\n     * @param string A String object or string literal whose contents matching against\\n     *               this regular expression will be replaced\\n     * @param replaceValue A String object or string literal containing the text to replace for every\\n     *                     successful match of this regular expression.\\n     */\\n    [Symbol.replace](string: string, replaceValue: string): string;\\n\\n    /**\\n     * Replaces text in a string, using this regular expression.\\n     * @param string A String object or string literal whose contents matching against\\n     *               this regular expression will be replaced\\n     * @param replacer A function that returns the replacement text.\\n     */\\n    [Symbol.replace](string: string, replacer: (substring: string, ...args: any[]) => string): string;\\n\\n    /**\\n     * Finds the position beginning first substring match in a regular expression search\\n     * using this regular expression.\\n     *\\n     * @param string The string to search within.\\n     */\\n    [Symbol.search](string: string): number;\\n\\n    /**\\n     * Returns an array of substrings that were delimited by strings in the original input that\\n     * match against this regular expression.\\n     *\\n     * If the regular expression contains capturing parentheses, then each time this\\n     * regular expression matches, the results (including any undefined results) of the\\n     * capturing parentheses are spliced.\\n     *\\n     * @param string string value to split\\n     * @param limit if not undefined, the output array is truncated so that it contains no more\\n     * than 'limit' elements.\\n     */\\n    [Symbol.split](string: string, limit?: number): string[];\\n}\\n\\ninterface RegExpConstructor {\\n    readonly [Symbol.species]: RegExpConstructor;\\n}\\n\\ninterface String {\\n    /**\\n     * Matches a string an object that supports being matched against, and returns an array containing the results of that search.\\n     * @param matcher An object that supports being matched against.\\n     */\\n    match(matcher: { [Symbol.match](string: string): RegExpMatchArray | null; }): RegExpMatchArray | null;\\n\\n    /**\\n     * Replaces text in a string, using an object that supports replacement within a string.\\n     * @param searchValue A object can search for and replace matches within a string.\\n     * @param replaceValue A string containing the text to replace for every successful match of searchValue in this string.\\n     */\\n    replace(searchValue: { [Symbol.replace](string: string, replaceValue: string): string; }, replaceValue: string): string;\\n\\n    /**\\n     * Replaces text in a string, using an object that supports replacement within a string.\\n     * @param searchValue A object can search for and replace matches within a string.\\n     * @param replacer A function that returns the replacement text.\\n     */\\n    replace(searchValue: { [Symbol.replace](string: string, replacer: (substring: string, ...args: any[]) => string): string; }, replacer: (substring: string, ...args: any[]) => string): string;\\n\\n    /**\\n     * Finds the first substring match in a regular expression search.\\n     * @param searcher An object which supports searching within a string.\\n     */\\n    search(searcher: { [Symbol.search](string: string): number; }): number;\\n\\n    /**\\n     * Split a string into substrings using the specified separator and return them as an array.\\n     * @param splitter An object that can split a string.\\n     * @param limit A value used to limit the number of elements returned in the array.\\n     */\\n    split(splitter: { [Symbol.split](string: string, limit?: number): string[]; }, limit?: number): string[];\\n}\\n\\ninterface ArrayBuffer {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface DataView {\\n    readonly [Symbol.toStringTag]: string;\\n}\\n\\ninterface Int8Array {\\n    readonly [Symbol.toStringTag]: \"Int8Array\";\\n}\\n\\ninterface Uint8Array {\\n    readonly [Symbol.toStringTag]: \"UInt8Array\";\\n}\\n\\ninterface Uint8ClampedArray {\\n    readonly [Symbol.toStringTag]: \"Uint8ClampedArray\";\\n}\\n\\ninterface Int16Array {\\n    readonly [Symbol.toStringTag]: \"Int16Array\";\\n}\\n\\ninterface Uint16Array {\\n    readonly [Symbol.toStringTag]: \"Uint16Array\";\\n}\\n\\ninterface Int32Array {\\n    readonly [Symbol.toStringTag]: \"Int32Array\";\\n}\\n\\ninterface Uint32Array {\\n    readonly [Symbol.toStringTag]: \"Uint32Array\";\\n}\\n\\ninterface Float32Array {\\n    readonly [Symbol.toStringTag]: \"Float32Array\";\\n}\\n\\ninterface Float64Array {\\n    readonly [Symbol.toStringTag]: \"Float64Array\";\\n}\\n\\ninterface ArrayConstructor {\\n    readonly [Symbol.species]: ArrayConstructor;\\n}\\ninterface MapConstructor {\\n    readonly [Symbol.species]: MapConstructor;\\n}\\ninterface SetConstructor {\\n    readonly [Symbol.species]: SetConstructor;\\n}\\ninterface ArrayBufferConstructor {\\n    readonly [Symbol.species]: ArrayBufferConstructor;\\n}`;\n\nconst lib_es2015_reflect_dts =\n  '/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n\\ndeclare namespace Reflect {\\n    function apply(target: Function, thisArgument: any, argumentsList: ArrayLike<any>): any;\\n    function construct(target: Function, argumentsList: ArrayLike<any>, newTarget?: any): any;\\n    function defineProperty(target: object, propertyKey: PropertyKey, attributes: PropertyDescriptor): boolean;\\n    function deleteProperty(target: object, propertyKey: PropertyKey): boolean;\\n    function get(target: object, propertyKey: PropertyKey, receiver?: any): any;\\n    function getOwnPropertyDescriptor(target: object, propertyKey: PropertyKey): PropertyDescriptor | undefined;\\n    function getPrototypeOf(target: object): object;\\n    function has(target: object, propertyKey: PropertyKey): boolean;\\n    function isExtensible(target: object): boolean;\\n    function ownKeys(target: object): PropertyKey[];\\n    function preventExtensions(target: object): boolean;\\n    function set(target: object, propertyKey: PropertyKey, value: any, receiver?: any): boolean;\\n    function setPrototypeOf(target: object, proto: any): boolean;\\n}\\n';\n\nconst lib_es2015_proxy_dts =\n  '/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n\\ninterface ProxyHandler<T extends object> {\\n    getPrototypeOf? (target: T): object | null;\\n    setPrototypeOf? (target: T, v: any): boolean;\\n    isExtensible? (target: T): boolean;\\n    preventExtensions? (target: T): boolean;\\n    getOwnPropertyDescriptor? (target: T, p: PropertyKey): PropertyDescriptor | undefined;\\n    has? (target: T, p: PropertyKey): boolean;\\n    get? (target: T, p: PropertyKey, receiver: any): any;\\n    set? (target: T, p: PropertyKey, value: any, receiver: any): boolean;\\n    deleteProperty? (target: T, p: PropertyKey): boolean;\\n    defineProperty? (target: T, p: PropertyKey, attributes: PropertyDescriptor): boolean;\\n    enumerate? (target: T): PropertyKey[];\\n    ownKeys? (target: T): PropertyKey[];\\n    apply? (target: T, thisArg: any, argArray?: any): any;\\n    construct? (target: T, argArray: any, newTarget?: any): object;\\n}\\n\\ninterface ProxyConstructor {\\n    revocable<T extends object>(target: T, handler: ProxyHandler<T>): { proxy: T; revoke: () => void; };\\n    new <T extends object>(target: T, handler: ProxyHandler<T>): T;\\n}\\ndeclare var Proxy: ProxyConstructor;\\n';\n\nconst lib_es2015_iterable_dts = `/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n${lib_es2015_symbol_dts}\\ninterface SymbolConstructor {\\n    /**\\n     * A method that returns the default iterator for an object. Called by the semantics of the\\n     * for-of statement.\\n     */\\n    readonly iterator: symbol;\\n}\\n\\ninterface IteratorResult<T> {\\n    done: boolean;\\n    value: T;\\n}\\n\\ninterface Iterator<T> {\\n    next(value?: any): IteratorResult<T>;\\n    return?(value?: any): IteratorResult<T>;\\n    throw?(e?: any): IteratorResult<T>;\\n}\\n\\ninterface Iterable<T> {\\n    [Symbol.iterator](): Iterator<T>;\\n}\\n\\ninterface IterableIterator<T> extends Iterator<T> {\\n    [Symbol.iterator](): IterableIterator<T>;\\n}\\n\\ninterface Array<T> {\\n    /** Iterator */\\n    [Symbol.iterator](): IterableIterator<T>;\\n\\n    /**\\n     * Returns an iterable of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, T]>;\\n\\n    /**\\n     * Returns an iterable of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n\\n    /**\\n     * Returns an iterable of values in the array\\n     */\\n    values(): IterableIterator<T>;\\n}\\n\\ninterface ArrayConstructor {\\n    /**\\n     * Creates an array from an iterable object.\\n     * @param iterable An iterable object to convert to an array.\\n     */\\n    from<T>(iterable: Iterable<T> | ArrayLike<T>): T[];\\n\\n    /**\\n     * Creates an array from an iterable object.\\n     * @param iterable An iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from<T, U>(iterable: Iterable<T> | ArrayLike<T>, mapfn: (v: T, k: number) => U, thisArg?: any): U[];\\n}\\n\\ninterface ReadonlyArray<T> {\\n    /** Iterator of values in the array. */\\n    [Symbol.iterator](): IterableIterator<T>;\\n\\n    /**\\n     * Returns an iterable of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, T]>;\\n\\n    /**\\n     * Returns an iterable of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n\\n    /**\\n     * Returns an iterable of values in the array\\n     */\\n    values(): IterableIterator<T>;\\n}\\n\\ninterface IArguments {\\n    /** Iterator */\\n    [Symbol.iterator](): IterableIterator<any>;\\n}\\n\\ninterface Map<K, V> {\\n    /** Returns an iterable of entries in the map. */\\n    [Symbol.iterator](): IterableIterator<[K, V]>;\\n\\n    /**\\n     * Returns an iterable of key, value pairs for every entry in the map.\\n     */\\n    entries(): IterableIterator<[K, V]>;\\n\\n    /**\\n     * Returns an iterable of keys in the map\\n     */\\n    keys(): IterableIterator<K>;\\n\\n    /**\\n     * Returns an iterable of values in the map\\n     */\\n    values(): IterableIterator<V>;\\n}\\n\\ninterface ReadonlyMap<K, V> {\\n    /** Returns an iterable of entries in the map. */\\n    [Symbol.iterator](): IterableIterator<[K, V]>;\\n\\n    /**\\n     * Returns an iterable of key, value pairs for every entry in the map.\\n     */\\n    entries(): IterableIterator<[K, V]>;\\n\\n    /**\\n     * Returns an iterable of keys in the map\\n     */\\n    keys(): IterableIterator<K>;\\n\\n    /**\\n     * Returns an iterable of values in the map\\n     */\\n    values(): IterableIterator<V>;\\n}\\n\\ninterface MapConstructor {\\n    new <K, V>(iterable: Iterable<readonly [K, V]>): Map<K, V>;\\n}\\n\\ninterface WeakMap<K extends object, V> { }\\n\\ninterface WeakMapConstructor {\\n    new <K extends object, V>(iterable: Iterable<[K, V]>): WeakMap<K, V>;\\n}\\n\\ninterface Set<T> {\\n    /** Iterates over values in the set. */\\n    [Symbol.iterator](): IterableIterator<T>;\\n    /**\\n     * Returns an iterable of [v,v] pairs for every value \\`v\\` in the set.\\n     */\\n    entries(): IterableIterator<[T, T]>;\\n    /**\\n     * Despite its name, returns an iterable of the values in the set,\\n     */\\n    keys(): IterableIterator<T>;\\n\\n    /**\\n     * Returns an iterable of values in the set.\\n     */\\n    values(): IterableIterator<T>;\\n}\\n\\ninterface ReadonlySet<T> {\\n    /** Iterates over values in the set. */\\n    [Symbol.iterator](): IterableIterator<T>;\\n\\n    /**\\n     * Returns an iterable of [v,v] pairs for every value \\`v\\` in the set.\\n     */\\n    entries(): IterableIterator<[T, T]>;\\n\\n    /**\\n     * Despite its name, returns an iterable of the values in the set,\\n     */\\n    keys(): IterableIterator<T>;\\n\\n    /**\\n     * Returns an iterable of values in the set.\\n     */\\n    values(): IterableIterator<T>;\\n}\\n\\ninterface SetConstructor {\\n    new <T>(iterable?: Iterable<T> | null): Set<T>;\\n}\\n\\ninterface WeakSet<T extends object> { }\\n\\ninterface WeakSetConstructor {\\n    new <T extends object = object>(iterable: Iterable<T>): WeakSet<T>;\\n}\\n\\ninterface Promise<T> { }\\n\\ninterface PromiseConstructor {\\n    /**\\n     * Creates a Promise that is resolved with an array of results when all of the provided Promises\\n     * resolve, or rejected when any Promise is rejected.\\n     * @param values An array of Promises.\\n     * @returns A new Promise.\\n     */\\n    all<TAll>(values: Iterable<TAll | PromiseLike<TAll>>): Promise<TAll[]>;\\n\\n    /**\\n     * Creates a Promise that is resolved or rejected when any of the provided Promises are resolved\\n     * or rejected.\\n     * @param values An array of Promises.\\n     * @returns A new Promise.\\n     */\\n    race<T>(values: Iterable<T | PromiseLike<T>>): Promise<T>;\\n}\\n\\ndeclare namespace Reflect {\\n    function enumerate(target: object): IterableIterator<any>;\\n}\\n\\ninterface String {\\n    /** Iterator */\\n    [Symbol.iterator](): IterableIterator<string>;\\n}\\n\\ninterface Int8Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Int8ArrayConstructor {\\n    new (elements: Iterable<number>): Int8Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Int8Array;\\n}\\n\\ninterface Uint8Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Uint8ArrayConstructor {\\n    new (elements: Iterable<number>): Uint8Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Uint8Array;\\n}\\n\\ninterface Uint8ClampedArray {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Uint8ClampedArrayConstructor {\\n    new (elements: Iterable<number>): Uint8ClampedArray;\\n\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Uint8ClampedArray;\\n}\\n\\ninterface Int16Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Int16ArrayConstructor {\\n    new (elements: Iterable<number>): Int16Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Int16Array;\\n}\\n\\ninterface Uint16Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Uint16ArrayConstructor {\\n    new (elements: Iterable<number>): Uint16Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Uint16Array;\\n}\\n\\ninterface Int32Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Int32ArrayConstructor {\\n    new (elements: Iterable<number>): Int32Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Int32Array;\\n}\\n\\ninterface Uint32Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Uint32ArrayConstructor {\\n    new (elements: Iterable<number>): Uint32Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Uint32Array;\\n}\\n\\ninterface Float32Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Float32ArrayConstructor {\\n    new (elements: Iterable<number>): Float32Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Float32Array;\\n}\\n\\ninterface Float64Array {\\n    [Symbol.iterator](): IterableIterator<number>;\\n    /**\\n     * Returns an array of key, value pairs for every entry in the array\\n     */\\n    entries(): IterableIterator<[number, number]>;\\n    /**\\n     * Returns an list of keys in the array\\n     */\\n    keys(): IterableIterator<number>;\\n    /**\\n     * Returns an list of values in the array\\n     */\\n    values(): IterableIterator<number>;\\n}\\n\\ninterface Float64ArrayConstructor {\\n    new (elements: Iterable<number>): Float64Array;\\n\\n    /**\\n     * Creates an array from an array-like or iterable object.\\n     * @param arrayLike An array-like or iterable object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of 'this' used to invoke the mapfn.\\n     */\\n    from(arrayLike: Iterable<number>, mapfn?: (v: number, k: number) => number, thisArg?: any): Float64Array;\\n}\\n`;\n\nconst lib_es2015_collection_dts =\n  '/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n\\ninterface Map<K, V> {\\n    clear(): void;\\n    delete(key: K): boolean;\\n    forEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void;\\n    get(key: K): V | undefined;\\n    has(key: K): boolean;\\n    set(key: K, value: V): this;\\n    readonly size: number;\\n}\\n\\ninterface MapConstructor {\\n    new(): Map<any, any>;\\n    new<K, V>(entries?: ReadonlyArray<readonly [K, V]> | null): Map<K, V>;\\n    readonly prototype: Map<any, any>;\\n}\\ndeclare var Map: MapConstructor;\\n\\ninterface ReadonlyMap<K, V> {\\n    forEach(callbackfn: (value: V, key: K, map: ReadonlyMap<K, V>) => void, thisArg?: any): void;\\n    get(key: K): V | undefined;\\n    has(key: K): boolean;\\n    readonly size: number;\\n}\\n\\ninterface WeakMap<K extends object, V> {\\n    delete(key: K): boolean;\\n    get(key: K): V | undefined;\\n    has(key: K): boolean;\\n    set(key: K, value: V): this;\\n}\\n\\ninterface WeakMapConstructor {\\n    new <K extends object = object, V = any>(entries?: ReadonlyArray<[K, V]> | null): WeakMap<K, V>;\\n    readonly prototype: WeakMap<object, any>;\\n}\\ndeclare var WeakMap: WeakMapConstructor;\\n\\ninterface Set<T> {\\n    add(value: T): this;\\n    clear(): void;\\n    delete(value: T): boolean;\\n    forEach(callbackfn: (value: T, value2: T, set: Set<T>) => void, thisArg?: any): void;\\n    has(value: T): boolean;\\n    readonly size: number;\\n}\\n\\ninterface SetConstructor {\\n    new <T = any>(values?: ReadonlyArray<T> | null): Set<T>;\\n    readonly prototype: Set<any>;\\n}\\ndeclare var Set: SetConstructor;\\n\\ninterface ReadonlySet<T> {\\n    forEach(callbackfn: (value: T, value2: T, set: ReadonlySet<T>) => void, thisArg?: any): void;\\n    has(value: T): boolean;\\n    readonly size: number;\\n}\\n\\ninterface WeakSet<T extends object> {\\n    add(value: T): this;\\n    delete(value: T): boolean;\\n    has(value: T): boolean;\\n}\\n\\ninterface WeakSetConstructor {\\n    new <T extends object = object>(values?: ReadonlyArray<T> | null): WeakSet<T>;\\n    readonly prototype: WeakSet<object>;\\n}\\ndeclare var WeakSet: WeakSetConstructor;\\n';\n\nconst lib_es2015_core_dts =\n  '/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n\\ninterface Array<T> {\\n    /**\\n     * Returns the value of the first element in the array where predicate is true, and undefined\\n     * otherwise.\\n     * @param predicate find calls predicate once for each element of the array, in ascending\\n     * order, until it finds one where predicate returns true. If such an element is found, find\\n     * immediately returns that element value. Otherwise, find returns undefined.\\n     * @param thisArg If provided, it will be used as the this value for each invocation of\\n     * predicate. If it is not provided, undefined is used instead.\\n     */\\n    find<S extends T>(predicate: (this: void, value: T, index: number, obj: T[]) => value is S, thisArg?: any): S | undefined;\\n    find(predicate: (value: T, index: number, obj: T[]) => unknown, thisArg?: any): T | undefined;\\n\\n    /**\\n     * Returns the index of the first element in the array where predicate is true, and -1\\n     * otherwise.\\n     * @param predicate find calls predicate once for each element of the array, in ascending\\n     * order, until it finds one where predicate returns true. If such an element is found,\\n     * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n     * @param thisArg If provided, it will be used as the this value for each invocation of\\n     * predicate. If it is not provided, undefined is used instead.\\n     */\\n    findIndex(predicate: (value: T, index: number, obj: T[]) => unknown, thisArg?: any): number;\\n\\n    /**\\n     * Returns the this object after filling the section identified by start and end with value\\n     * @param value value to fill array section with\\n     * @param start index to start filling the array at. If start is negative, it is treated as\\n     * length+start where length is the length of the array.\\n     * @param end index to stop filling the array at. If end is negative, it is treated as\\n     * length+end.\\n     */\\n    fill(value: T, start?: number, end?: number): this;\\n\\n    /**\\n     * Returns the this object after copying a section of the array identified by start and end\\n     * to the same array starting at position target\\n     * @param target If target is negative, it is treated as length+target where length is the\\n     * length of the array.\\n     * @param start If start is negative, it is treated as length+start. If end is negative, it\\n     * is treated as length+end.\\n     * @param end If not specified, length of the this object is used as its default value.\\n     */\\n    copyWithin(target: number, start: number, end?: number): this;\\n}\\n\\ninterface ArrayConstructor {\\n    /**\\n     * Creates an array from an array-like object.\\n     * @param arrayLike An array-like object to convert to an array.\\n     */\\n    from<T>(arrayLike: ArrayLike<T>): T[];\\n\\n    /**\\n     * Creates an array from an iterable object.\\n     * @param arrayLike An array-like object to convert to an array.\\n     * @param mapfn A mapping function to call on every element of the array.\\n     * @param thisArg Value of \\'this\\' used to invoke the mapfn.\\n     */\\n    from<T, U>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => U, thisArg?: any): U[];\\n\\n    /**\\n     * Returns a new array from a set of elements.\\n     * @param items A set of elements to include in the new array object.\\n     */\\n    of<T>(...items: T[]): T[];\\n}\\n\\ninterface DateConstructor {\\n    new (value: number | string | Date): Date;\\n}\\n\\ninterface Function {\\n    /**\\n     * Returns the name of the function. Function names are read-only and can not be changed.\\n     */\\n    readonly name: string;\\n}\\n\\ninterface Math {\\n    /**\\n     * Returns the number of leading zero bits in the 32-bit binary representation of a number.\\n     * @param x A numeric expression.\\n     */\\n    clz32(x: number): number;\\n\\n    /**\\n     * Returns the result of 32-bit multiplication of two numbers.\\n     * @param x First number\\n     * @param y Second number\\n     */\\n    imul(x: number, y: number): number;\\n\\n    /**\\n     * Returns the sign of the x, indicating whether x is positive, negative or zero.\\n     * @param x The numeric expression to test\\n     */\\n    sign(x: number): number;\\n\\n    /**\\n     * Returns the base 10 logarithm of a number.\\n     * @param x A numeric expression.\\n     */\\n    log10(x: number): number;\\n\\n    /**\\n     * Returns the base 2 logarithm of a number.\\n     * @param x A numeric expression.\\n     */\\n    log2(x: number): number;\\n\\n    /**\\n     * Returns the natural logarithm of 1 + x.\\n     * @param x A numeric expression.\\n     */\\n    log1p(x: number): number;\\n\\n    /**\\n     * Returns the result of (e^x - 1), which is an implementation-dependent approximation to\\n     * subtracting 1 from the exponential function of x (e raised to the power of x, where e\\n     * is the base of the natural logarithms).\\n     * @param x A numeric expression.\\n     */\\n    expm1(x: number): number;\\n\\n    /**\\n     * Returns the hyperbolic cosine of a number.\\n     * @param x A numeric expression that contains an angle measured in radians.\\n     */\\n    cosh(x: number): number;\\n\\n    /**\\n     * Returns the hyperbolic sine of a number.\\n     * @param x A numeric expression that contains an angle measured in radians.\\n     */\\n    sinh(x: number): number;\\n\\n    /**\\n     * Returns the hyperbolic tangent of a number.\\n     * @param x A numeric expression that contains an angle measured in radians.\\n     */\\n    tanh(x: number): number;\\n\\n    /**\\n     * Returns the inverse hyperbolic cosine of a number.\\n     * @param x A numeric expression that contains an angle measured in radians.\\n     */\\n    acosh(x: number): number;\\n\\n    /**\\n     * Returns the inverse hyperbolic sine of a number.\\n     * @param x A numeric expression that contains an angle measured in radians.\\n     */\\n    asinh(x: number): number;\\n\\n    /**\\n     * Returns the inverse hyperbolic tangent of a number.\\n     * @param x A numeric expression that contains an angle measured in radians.\\n     */\\n    atanh(x: number): number;\\n\\n    /**\\n     * Returns the square root of the sum of squares of its arguments.\\n     * @param values Values to compute the square root for.\\n     *     If no arguments are passed, the result is +0.\\n     *     If there is only one argument, the result is the absolute value.\\n     *     If any argument is +Infinity or -Infinity, the result is +Infinity.\\n     *     If any argument is NaN, the result is NaN.\\n     *     If all arguments are either +0 or −0, the result is +0.\\n     */\\n    hypot(...values: number[]): number;\\n\\n    /**\\n     * Returns the integral part of the a numeric expression, x, removing any fractional digits.\\n     * If x is already an integer, the result is x.\\n     * @param x A numeric expression.\\n     */\\n    trunc(x: number): number;\\n\\n    /**\\n     * Returns the nearest single precision float representation of a number.\\n     * @param x A numeric expression.\\n     */\\n    fround(x: number): number;\\n\\n    /**\\n     * Returns an implementation-dependent approximation to the cube root of number.\\n     * @param x A numeric expression.\\n     */\\n    cbrt(x: number): number;\\n}\\n\\ninterface NumberConstructor {\\n    /**\\n     * The value of Number.EPSILON is the difference between 1 and the smallest value greater than 1\\n     * that is representable as a Number value, which is approximately:\\n     * 2.2204460492503130808472633361816 x 10‍−‍16.\\n     */\\n    readonly EPSILON: number;\\n\\n    /**\\n     * Returns true if passed value is finite.\\n     * Unlike the global isFinite, Number.isFinite doesn\\'t forcibly convert the parameter to a\\n     * number. Only finite values of the type number, result in true.\\n     * @param number A numeric value.\\n     */\\n    isFinite(number: number): boolean;\\n\\n    /**\\n     * Returns true if the value passed is an integer, false otherwise.\\n     * @param number A numeric value.\\n     */\\n    isInteger(number: number): boolean;\\n\\n    /**\\n     * Returns a Boolean value that indicates whether a value is the reserved value NaN (not a\\n     * number). Unlike the global isNaN(), Number.isNaN() doesn\\'t forcefully convert the parameter\\n     * to a number. Only values of the type number, that are also NaN, result in true.\\n     * @param number A numeric value.\\n     */\\n    isNaN(number: number): boolean;\\n\\n    /**\\n     * Returns true if the value passed is a safe integer.\\n     * @param number A numeric value.\\n     */\\n    isSafeInteger(number: number): boolean;\\n\\n    /**\\n     * The value of the largest integer n such that n and n + 1 are both exactly representable as\\n     * a Number value.\\n     * The value of Number.MAX_SAFE_INTEGER is 9007199254740991 2^53 − 1.\\n     */\\n    readonly MAX_SAFE_INTEGER: number;\\n\\n    /**\\n     * The value of the smallest integer n such that n and n − 1 are both exactly representable as\\n     * a Number value.\\n     * The value of Number.MIN_SAFE_INTEGER is −9007199254740991 (−(2^53 − 1)).\\n     */\\n    readonly MIN_SAFE_INTEGER: number;\\n\\n    /**\\n     * Converts a string to a floating-point number.\\n     * @param string A string that contains a floating-point number.\\n     */\\n    parseFloat(string: string): number;\\n\\n    /**\\n     * Converts A string to an integer.\\n     * @param s A string to convert into a number.\\n     * @param radix A value between 2 and 36 that specifies the base of the number in numString.\\n     * If this argument is not supplied, strings with a prefix of \\'0x\\' are considered hexadecimal.\\n     * All other strings are considered decimal.\\n     */\\n    parseInt(string: string, radix?: number): number;\\n}\\n\\ninterface ObjectConstructor {\\n    /**\\n     * Copy the values of all of the enumerable own properties from one or more source objects to a\\n     * target object. Returns the target object.\\n     * @param target The target object to copy to.\\n     * @param source The source object from which to copy properties.\\n     */\\n    assign<T, U>(target: T, source: U): T & U;\\n\\n    /**\\n     * Copy the values of all of the enumerable own properties from one or more source objects to a\\n     * target object. Returns the target object.\\n     * @param target The target object to copy to.\\n     * @param source1 The first source object from which to copy properties.\\n     * @param source2 The second source object from which to copy properties.\\n     */\\n    assign<T, U, V>(target: T, source1: U, source2: V): T & U & V;\\n\\n    /**\\n     * Copy the values of all of the enumerable own properties from one or more source objects to a\\n     * target object. Returns the target object.\\n     * @param target The target object to copy to.\\n     * @param source1 The first source object from which to copy properties.\\n     * @param source2 The second source object from which to copy properties.\\n     * @param source3 The third source object from which to copy properties.\\n     */\\n    assign<T, U, V, W>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\\n\\n    /**\\n     * Copy the values of all of the enumerable own properties from one or more source objects to a\\n     * target object. Returns the target object.\\n     * @param target The target object to copy to.\\n     * @param sources One or more source objects from which to copy properties\\n     */\\n    assign(target: object, ...sources: any[]): any;\\n\\n    /**\\n     * Returns an array of all symbol properties found directly on object o.\\n     * @param o Object to retrieve the symbols from.\\n     */\\n    getOwnPropertySymbols(o: any): symbol[];\\n\\n    /**\\n      * Returns the names of the enumerable string properties and methods of an object.\\n      * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\\n      */\\n    keys(o: {}): string[];\\n\\n    /**\\n     * Returns true if the values are the same value, false otherwise.\\n     * @param value1 The first value.\\n     * @param value2 The second value.\\n     */\\n    is(value1: any, value2: any): boolean;\\n\\n    /**\\n     * Sets the prototype of a specified object o to  object proto or null. Returns the object o.\\n     * @param o The object to change its prototype.\\n     * @param proto The value of the new prototype or null.\\n     */\\n    setPrototypeOf(o: any, proto: object | null): any;\\n}\\n\\ninterface ReadonlyArray<T> {\\n    /**\\n     * Returns the value of the first element in the array where predicate is true, and undefined\\n     * otherwise.\\n     * @param predicate find calls predicate once for each element of the array, in ascending\\n     * order, until it finds one where predicate returns true. If such an element is found, find\\n     * immediately returns that element value. Otherwise, find returns undefined.\\n     * @param thisArg If provided, it will be used as the this value for each invocation of\\n     * predicate. If it is not provided, undefined is used instead.\\n     */\\n    find<S extends T>(predicate: (this: void, value: T, index: number, obj: ReadonlyArray<T>) => value is S, thisArg?: any): S | undefined;\\n    find(predicate: (value: T, index: number, obj: ReadonlyArray<T>) => unknown, thisArg?: any): T | undefined;\\n\\n    /**\\n     * Returns the index of the first element in the array where predicate is true, and -1\\n     * otherwise.\\n     * @param predicate find calls predicate once for each element of the array, in ascending\\n     * order, until it finds one where predicate returns true. If such an element is found,\\n     * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n     * @param thisArg If provided, it will be used as the this value for each invocation of\\n     * predicate. If it is not provided, undefined is used instead.\\n     */\\n    findIndex(predicate: (value: T, index: number, obj: ReadonlyArray<T>) => unknown, thisArg?: any): number;\\n}\\n\\ninterface RegExp {\\n    /**\\n     * Returns a string indicating the flags of the regular expression in question. This field is read-only.\\n     * The characters in this string are sequenced and concatenated in the following order:\\n     *\\n     *    - \"g\" for global\\n     *    - \"i\" for ignoreCase\\n     *    - \"m\" for multiline\\n     *    - \"u\" for unicode\\n     *    - \"y\" for sticky\\n     *\\n     * If no flags are set, the value is the empty string.\\n     */\\n    readonly flags: string;\\n\\n    /**\\n     * Returns a Boolean value indicating the state of the sticky flag (y) used with a regular\\n     * expression. Default is false. Read-only.\\n     */\\n    readonly sticky: boolean;\\n\\n    /**\\n     * Returns a Boolean value indicating the state of the Unicode flag (u) used with a regular\\n     * expression. Default is false. Read-only.\\n     */\\n    readonly unicode: boolean;\\n}\\n\\ninterface RegExpConstructor {\\n    new (pattern: RegExp, flags?: string): RegExp;\\n    (pattern: RegExp, flags?: string): RegExp;\\n}\\n\\ninterface String {\\n    /**\\n     * Returns a nonnegative integer Number less than 1114112 (0x110000) that is the code point\\n     * value of the UTF-16 encoded code point starting at the string element at position pos in\\n     * the String resulting from converting this object to a String.\\n     * If there is no element at that position, the result is undefined.\\n     * If a valid UTF-16 surrogate pair does not begin at pos, the result is the code unit at pos.\\n     */\\n    codePointAt(pos: number): number | undefined;\\n\\n    /**\\n     * Returns true if searchString appears as a substring of the result of converting this\\n     * object to a String, at one or more positions that are\\n     * greater than or equal to position; otherwise, returns false.\\n     * @param searchString search string\\n     * @param position If position is undefined, 0 is assumed, so as to search all of the String.\\n     */\\n    includes(searchString: string, position?: number): boolean;\\n\\n    /**\\n     * Returns true if the sequence of elements of searchString converted to a String is the\\n     * same as the corresponding elements of this object (converted to a String) starting at\\n     * endPosition – length(this). Otherwise returns false.\\n     */\\n    endsWith(searchString: string, endPosition?: number): boolean;\\n\\n    /**\\n     * Returns the String value result of normalizing the string into the normalization form\\n     * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\\n     * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\\n     * is \"NFC\"\\n     */\\n    normalize(form: \"NFC\" | \"NFD\" | \"NFKC\" | \"NFKD\"): string;\\n\\n    /**\\n     * Returns the String value result of normalizing the string into the normalization form\\n     * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\\n     * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\\n     * is \"NFC\"\\n     */\\n    normalize(form?: string): string;\\n\\n    /**\\n     * Returns a String value that is made from count copies appended together. If count is 0,\\n     * the empty string is returned.\\n     * @param count number of copies to append\\n     */\\n    repeat(count: number): string;\\n\\n    /**\\n     * Returns true if the sequence of elements of searchString converted to a String is the\\n     * same as the corresponding elements of this object (converted to a String) starting at\\n     * position. Otherwise returns false.\\n     */\\n    startsWith(searchString: string, position?: number): boolean;\\n\\n    /**\\n     * Returns an <a> HTML anchor element and sets the name attribute to the text value\\n     * @param name\\n     */\\n    anchor(name: string): string;\\n\\n    /** Returns a <big> HTML element */\\n    big(): string;\\n\\n    /** Returns a <blink> HTML element */\\n    blink(): string;\\n\\n    /** Returns a <b> HTML element */\\n    bold(): string;\\n\\n    /** Returns a <tt> HTML element */\\n    fixed(): string;\\n\\n    /** Returns a <font> HTML element and sets the color attribute value */\\n    fontcolor(color: string): string;\\n\\n    /** Returns a <font> HTML element and sets the size attribute value */\\n    fontsize(size: number): string;\\n\\n    /** Returns a <font> HTML element and sets the size attribute value */\\n    fontsize(size: string): string;\\n\\n    /** Returns an <i> HTML element */\\n    italics(): string;\\n\\n    /** Returns an <a> HTML element and sets the href attribute value */\\n    link(url: string): string;\\n\\n    /** Returns a <small> HTML element */\\n    small(): string;\\n\\n    /** Returns a <strike> HTML element */\\n    strike(): string;\\n\\n    /** Returns a <sub> HTML element */\\n    sub(): string;\\n\\n    /** Returns a <sup> HTML element */\\n    sup(): string;\\n}\\n\\ninterface StringConstructor {\\n    /**\\n     * Return the String value whose elements are, in order, the elements in the List elements.\\n     * If length is 0, the empty string is returned.\\n     */\\n    fromCodePoint(...codePoints: number[]): string;\\n\\n    /**\\n     * String.raw is intended for use as a tag function of a Tagged Template String. When called\\n     * as such the first argument will be a well formed template call site object and the rest\\n     * parameter will contain the substitution values.\\n     * @param template A well-formed template string call site representation.\\n     * @param substitutions A set of substitution values.\\n     */\\n    raw(template: TemplateStringsArray, ...substitutions: any[]): string;\\n}\\n';\n\nconst lib_es5_dts =\n  \"/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\\\"true\\\"/>\\n\\n\\n/////////////////////////////\\n/// ECMAScript APIs\\n/////////////////////////////\\n\\ndeclare var NaN: number;\\ndeclare var Infinity: number;\\n\\n/**\\n  * Evaluates JavaScript code and executes it.\\n  * @param x A String value that contains valid JavaScript code.\\n  */\\ndeclare function eval(x: string): any;\\n\\n/**\\n  * Converts A string to an integer.\\n  * @param s A string to convert into a number.\\n  * @param radix A value between 2 and 36 that specifies the base of the number in numString.\\n  * If this argument is not supplied, strings with a prefix of '0x' are considered hexadecimal.\\n  * All other strings are considered decimal.\\n  */\\ndeclare function parseInt(s: string, radix?: number): number;\\n\\n/**\\n  * Converts a string to a floating-point number.\\n  * @param string A string that contains a floating-point number.\\n  */\\ndeclare function parseFloat(string: string): number;\\n\\n/**\\n  * Returns a Boolean value that indicates whether a value is the reserved value NaN (not a number).\\n  * @param number A numeric value.\\n  */\\ndeclare function isNaN(number: number): boolean;\\n\\n/**\\n  * Determines whether a supplied number is finite.\\n  * @param number Any numeric value.\\n  */\\ndeclare function isFinite(number: number): boolean;\\n\\n/**\\n  * Gets the unencoded version of an encoded Uniform Resource Identifier (URI).\\n  * @param encodedURI A value representing an encoded URI.\\n  */\\ndeclare function decodeURI(encodedURI: string): string;\\n\\n/**\\n  * Gets the unencoded version of an encoded component of a Uniform Resource Identifier (URI).\\n  * @param encodedURIComponent A value representing an encoded URI component.\\n  */\\ndeclare function decodeURIComponent(encodedURIComponent: string): string;\\n\\n/**\\n  * Encodes a text string as a valid Uniform Resource Identifier (URI)\\n  * @param uri A value representing an encoded URI.\\n  */\\ndeclare function encodeURI(uri: string): string;\\n\\n/**\\n  * Encodes a text string as a valid component of a Uniform Resource Identifier (URI).\\n  * @param uriComponent A value representing an encoded URI component.\\n  */\\ndeclare function encodeURIComponent(uriComponent: string | number | boolean): string;\\n\\n/**\\n  * Computes a new string in which certain characters have been replaced by a hexadecimal escape sequence.\\n  * @param string A string value\\n  */\\ndeclare function escape(string: string): string;\\n\\n/**\\n  * Computes a new string in which hexadecimal escape sequences are replaced with the character that it represents.\\n  * @param string A string value\\n  */\\ndeclare function unescape(string: string): string;\\n\\ninterface Symbol {\\n  /** Returns a string representation of an object. */\\n  toString(): string;\\n\\n  /** Returns the primitive value of the specified object. */\\n  valueOf(): symbol;\\n}\\n\\ndeclare type PropertyKey = string | number | symbol;\\n\\ninterface PropertyDescriptor {\\n    configurable?: boolean;\\n    enumerable?: boolean;\\n    value?: any;\\n    writable?: boolean;\\n    get?(): any;\\n    set?(v: any): void;\\n}\\n\\ninterface PropertyDescriptorMap {\\n    [s: string]: PropertyDescriptor;\\n}\\n\\ninterface Object {\\n    /** The initial value of Object.prototype.constructor is the standard built-in Object constructor. */\\n    constructor: Function;\\n\\n    /** Returns a string representation of an object. */\\n    toString(): string;\\n\\n    /** Returns a date converted to a string using the current locale. */\\n    toLocaleString(): string;\\n\\n    /** Returns the primitive value of the specified object. */\\n    valueOf(): Object;\\n\\n    /**\\n      * Determines whether an object has a property with the specified name.\\n      * @param v A property name.\\n      */\\n    hasOwnProperty(v: PropertyKey): boolean;\\n\\n    /**\\n      * Determines whether an object exists in another object's prototype chain.\\n      * @param v Another object whose prototype chain is to be checked.\\n      */\\n    isPrototypeOf(v: Object): boolean;\\n\\n    /**\\n      * Determines whether a specified property is enumerable.\\n      * @param v A property name.\\n      */\\n    propertyIsEnumerable(v: PropertyKey): boolean;\\n}\\n\\ninterface ObjectConstructor {\\n    new(value?: any): Object;\\n    (): any;\\n    (value: any): any;\\n\\n    /** A reference to the prototype for a class of objects. */\\n    readonly prototype: Object;\\n\\n    /**\\n      * Returns the prototype of an object.\\n      * @param o The object that references the prototype.\\n      */\\n    getPrototypeOf(o: any): any;\\n\\n    /**\\n      * Gets the own property descriptor of the specified object.\\n      * An own property descriptor is one that is defined directly on the object and is not inherited from the object's prototype.\\n      * @param o Object that contains the property.\\n      * @param p Name of the property.\\n    */\\n    getOwnPropertyDescriptor(o: any, p: PropertyKey): PropertyDescriptor | undefined;\\n\\n    /**\\n      * Returns the names of the own properties of an object. The own properties of an object are those that are defined directly\\n      * on that object, and are not inherited from the object's prototype. The properties of an object include both fields (objects) and functions.\\n      * @param o Object that contains the own properties.\\n      */\\n    getOwnPropertyNames(o: any): string[];\\n\\n    /**\\n      * Creates an object that has the specified prototype or that has null prototype.\\n      * @param o Object to use as a prototype. May be null.\\n      */\\n    create(o: object | null): any;\\n\\n    /**\\n      * Creates an object that has the specified prototype, and that optionally contains specified properties.\\n      * @param o Object to use as a prototype. May be null\\n      * @param properties JavaScript object that contains one or more property descriptors.\\n      */\\n    create(o: object | null, properties: PropertyDescriptorMap & ThisType<any>): any;\\n\\n    /**\\n      * Adds a property to an object, or modifies attributes of an existing property.\\n      * @param o Object on which to add or modify the property. This can be a native JavaScript object (that is, a user-defined object or a built in object) or a DOM object.\\n      * @param p The property name.\\n      * @param attributes Descriptor for the property. It can be for a data property or an accessor property.\\n      */\\n    defineProperty(o: any, p: PropertyKey, attributes: PropertyDescriptor & ThisType<any>): any;\\n\\n    /**\\n      * Adds one or more properties to an object, and/or modifies attributes of existing properties.\\n      * @param o Object on which to add or modify the properties. This can be a native JavaScript object or a DOM object.\\n      * @param properties JavaScript object that contains one or more descriptor objects. Each descriptor object describes a data property or an accessor property.\\n      */\\n    defineProperties(o: any, properties: PropertyDescriptorMap & ThisType<any>): any;\\n\\n    /**\\n      * Prevents the modification of attributes of existing properties, and prevents the addition of new properties.\\n      * @param o Object on which to lock the attributes.\\n      */\\n    seal<T>(o: T): T;\\n\\n    /**\\n      * Prevents the modification of existing property attributes and values, and prevents the addition of new properties.\\n      * @param o Object on which to lock the attributes.\\n      */\\n    freeze<T>(a: T[]): ReadonlyArray<T>;\\n\\n    /**\\n      * Prevents the modification of existing property attributes and values, and prevents the addition of new properties.\\n      * @param o Object on which to lock the attributes.\\n      */\\n    freeze<T extends Function>(f: T): T;\\n\\n    /**\\n      * Prevents the modification of existing property attributes and values, and prevents the addition of new properties.\\n      * @param o Object on which to lock the attributes.\\n      */\\n    freeze<T>(o: T): Readonly<T>;\\n\\n    /**\\n      * Prevents the addition of new properties to an object.\\n      * @param o Object to make non-extensible.\\n      */\\n    preventExtensions<T>(o: T): T;\\n\\n    /**\\n      * Returns true if existing property attributes cannot be modified in an object and new properties cannot be added to the object.\\n      * @param o Object to test.\\n      */\\n    isSealed(o: any): boolean;\\n\\n    /**\\n      * Returns true if existing property attributes and values cannot be modified in an object, and new properties cannot be added to the object.\\n      * @param o Object to test.\\n      */\\n    isFrozen(o: any): boolean;\\n\\n    /**\\n      * Returns a value that indicates whether new properties can be added to an object.\\n      * @param o Object to test.\\n      */\\n    isExtensible(o: any): boolean;\\n\\n    /**\\n      * Returns the names of the enumerable string properties and methods of an object.\\n      * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\\n      */\\n     keys(o: object): string[];\\n}\\n\\n/**\\n  * Provides functionality common to all JavaScript objects.\\n  */\\ndeclare var Object: ObjectConstructor;\\n\\n/**\\n  * Creates a new function.\\n  */\\ninterface Function {\\n    /**\\n      * Calls the function, substituting the specified object for the this value of the function, and the specified array for the arguments of the function.\\n      * @param thisArg The object to be used as the this object.\\n      * @param argArray A set of arguments to be passed to the function.\\n      */\\n    apply(this: Function, thisArg: any, argArray?: any): any;\\n\\n    /**\\n      * Calls a method of an object, substituting another object for the current object.\\n      * @param thisArg The object to be used as the current object.\\n      * @param argArray A list of arguments to be passed to the method.\\n      */\\n    call(this: Function, thisArg: any, ...argArray: any[]): any;\\n\\n    /**\\n      * For a given function, creates a bound function that has the same body as the original function.\\n      * The this object of the bound function is associated with the specified object, and has the specified initial parameters.\\n      * @param thisArg An object to which the this keyword can refer inside the new function.\\n      * @param argArray A list of arguments to be passed to the new function.\\n      */\\n    bind(this: Function, thisArg: any, ...argArray: any[]): any;\\n\\n    /** Returns a string representation of a function. */\\n    toString(): string;\\n\\n    prototype: any;\\n    readonly length: number;\\n\\n    // Non-standard extensions\\n    arguments: any;\\n    caller: Function;\\n}\\n\\ninterface FunctionConstructor {\\n    /**\\n      * Creates a new function.\\n      * @param args A list of arguments the function accepts.\\n      */\\n    new(...args: string[]): Function;\\n    (...args: string[]): Function;\\n    readonly prototype: Function;\\n}\\n\\ndeclare var Function: FunctionConstructor;\\n\\n/**\\n * Extracts the type of the 'this' parameter of a function type, or 'unknown' if the function type has no 'this' parameter.\\n */\\ntype ThisParameterType<T> = T extends (this: unknown, ...args: any[]) => any ? unknown : T extends (this: infer U, ...args: any[]) => any ? U : unknown;\\n\\n/**\\n * Removes the 'this' parameter from a function type.\\n */\\ntype OmitThisParameter<T> = unknown extends ThisParameterType<T> ? T : T extends (...args: infer A) => infer R ? (...args: A) => R : T;\\n\\ninterface CallableFunction extends Function {\\n    /**\\n      * Calls the function with the specified object as the this value and the elements of specified array as the arguments.\\n      * @param thisArg The object to be used as the this object.\\n      * @param args An array of argument values to be passed to the function.\\n      */\\n    apply<T, R>(this: (this: T) => R, thisArg: T): R;\\n    apply<T, A extends any[], R>(this: (this: T, ...args: A) => R, thisArg: T, args: A): R;\\n\\n    /**\\n      * Calls the function with the specified object as the this value and the specified rest arguments as the arguments.\\n      * @param thisArg The object to be used as the this object.\\n      * @param args Argument values to be passed to the function.\\n      */\\n    call<T, A extends any[], R>(this: (this: T, ...args: A) => R, thisArg: T, ...args: A): R;\\n\\n    /**\\n      * For a given function, creates a bound function that has the same body as the original function.\\n      * The this object of the bound function is associated with the specified object, and has the specified initial parameters.\\n      * @param thisArg The object to be used as the this object.\\n      * @param args Arguments to bind to the parameters of the function.\\n      */\\n    bind<T>(this: T, thisArg: ThisParameterType<T>): OmitThisParameter<T>;\\n    bind<T, A0, A extends any[], R>(this: (this: T, arg0: A0, ...args: A) => R, thisArg: T, arg0: A0): (...args: A) => R;\\n    bind<T, A0, A1, A extends any[], R>(this: (this: T, arg0: A0, arg1: A1, ...args: A) => R, thisArg: T, arg0: A0, arg1: A1): (...args: A) => R;\\n    bind<T, A0, A1, A2, A extends any[], R>(this: (this: T, arg0: A0, arg1: A1, arg2: A2, ...args: A) => R, thisArg: T, arg0: A0, arg1: A1, arg2: A2): (...args: A) => R;\\n    bind<T, A0, A1, A2, A3, A extends any[], R>(this: (this: T, arg0: A0, arg1: A1, arg2: A2, arg3: A3, ...args: A) => R, thisArg: T, arg0: A0, arg1: A1, arg2: A2, arg3: A3): (...args: A) => R;\\n    bind<T, AX, R>(this: (this: T, ...args: AX[]) => R, thisArg: T, ...args: AX[]): (...args: AX[]) => R;\\n}\\n\\ninterface NewableFunction extends Function {\\n    /**\\n      * Calls the function with the specified object as the this value and the elements of specified array as the arguments.\\n      * @param thisArg The object to be used as the this object.\\n      * @param args An array of argument values to be passed to the function.\\n      */\\n    apply<T>(this: new () => T, thisArg: T): void;\\n    apply<T, A extends any[]>(this: new (...args: A) => T, thisArg: T, args: A): void;\\n\\n    /**\\n      * Calls the function with the specified object as the this value and the specified rest arguments as the arguments.\\n      * @param thisArg The object to be used as the this object.\\n      * @param args Argument values to be passed to the function.\\n      */\\n    call<T, A extends any[]>(this: new (...args: A) => T, thisArg: T, ...args: A): void;\\n\\n    /**\\n      * For a given function, creates a bound function that has the same body as the original function.\\n      * The this object of the bound function is associated with the specified object, and has the specified initial parameters.\\n      * @param thisArg The object to be used as the this object.\\n      * @param args Arguments to bind to the parameters of the function.\\n      */\\n    bind<T>(this: T, thisArg: any): T;\\n    bind<A0, A extends any[], R>(this: new (arg0: A0, ...args: A) => R, thisArg: any, arg0: A0): new (...args: A) => R;\\n    bind<A0, A1, A extends any[], R>(this: new (arg0: A0, arg1: A1, ...args: A) => R, thisArg: any, arg0: A0, arg1: A1): new (...args: A) => R;\\n    bind<A0, A1, A2, A extends any[], R>(this: new (arg0: A0, arg1: A1, arg2: A2, ...args: A) => R, thisArg: any, arg0: A0, arg1: A1, arg2: A2): new (...args: A) => R;\\n    bind<A0, A1, A2, A3, A extends any[], R>(this: new (arg0: A0, arg1: A1, arg2: A2, arg3: A3, ...args: A) => R, thisArg: any, arg0: A0, arg1: A1, arg2: A2, arg3: A3): new (...args: A) => R;\\n    bind<AX, R>(this: new (...args: AX[]) => R, thisArg: any, ...args: AX[]): new (...args: AX[]) => R;\\n}\\n\\ninterface IArguments {\\n    [index: number]: any;\\n    length: number;\\n    callee: Function;\\n}\\n\\ninterface String {\\n    /** Returns a string representation of a string. */\\n    toString(): string;\\n\\n    /**\\n      * Returns the character at the specified index.\\n      * @param pos The zero-based index of the desired character.\\n      */\\n    charAt(pos: number): string;\\n\\n    /**\\n      * Returns the Unicode value of the character at the specified location.\\n      * @param index The zero-based index of the desired character. If there is no character at the specified index, NaN is returned.\\n      */\\n    charCodeAt(index: number): number;\\n\\n    /**\\n      * Returns a string that contains the concatenation of two or more strings.\\n      * @param strings The strings to append to the end of the string.\\n      */\\n    concat(...strings: string[]): string;\\n\\n    /**\\n      * Returns the position of the first occurrence of a substring.\\n      * @param searchString The substring to search for in the string\\n      * @param position The index at which to begin searching the String object. If omitted, search starts at the beginning of the string.\\n      */\\n    indexOf(searchString: string, position?: number): number;\\n\\n    /**\\n      * Returns the last occurrence of a substring in the string.\\n      * @param searchString The substring to search for.\\n      * @param position The index at which to begin searching. If omitted, the search begins at the end of the string.\\n      */\\n    lastIndexOf(searchString: string, position?: number): number;\\n\\n    /**\\n      * Determines whether two strings are equivalent in the current locale.\\n      * @param that String to compare to target string\\n      */\\n    localeCompare(that: string): number;\\n\\n    /**\\n      * Matches a string with a regular expression, and returns an array containing the results of that search.\\n      * @param regexp A variable name or string literal containing the regular expression pattern and flags.\\n      */\\n    match(regexp: string | RegExp): RegExpMatchArray | null;\\n\\n    /**\\n      * Replaces text in a string, using a regular expression or search string.\\n      * @param searchValue A string to search for.\\n      * @param replaceValue A string containing the text to replace for every successful match of searchValue in this string.\\n      */\\n    replace(searchValue: string | RegExp, replaceValue: string): string;\\n\\n    /**\\n      * Replaces text in a string, using a regular expression or search string.\\n      * @param searchValue A string to search for.\\n      * @param replacer A function that returns the replacement text.\\n      */\\n    replace(searchValue: string | RegExp, replacer: (substring: string, ...args: any[]) => string): string;\\n\\n    /**\\n      * Finds the first substring match in a regular expression search.\\n      * @param regexp The regular expression pattern and applicable flags.\\n      */\\n    search(regexp: string | RegExp): number;\\n\\n    /**\\n      * Returns a section of a string.\\n      * @param start The index to the beginning of the specified portion of stringObj.\\n      * @param end The index to the end of the specified portion of stringObj. The substring includes the characters up to, but not including, the character indicated by end.\\n      * If this value is not specified, the substring continues to the end of stringObj.\\n      */\\n    slice(start?: number, end?: number): string;\\n\\n    /**\\n      * Split a string into substrings using the specified separator and return them as an array.\\n      * @param separator A string that identifies character or characters to use in separating the string. If omitted, a single-element array containing the entire string is returned.\\n      * @param limit A value used to limit the number of elements returned in the array.\\n      */\\n    split(separator: string | RegExp, limit?: number): string[];\\n\\n    /**\\n      * Returns the substring at the specified location within a String object.\\n      * @param start The zero-based index number indicating the beginning of the substring.\\n      * @param end Zero-based index number indicating the end of the substring. The substring includes the characters up to, but not including, the character indicated by end.\\n      * If end is omitted, the characters from start through the end of the original string are returned.\\n      */\\n    substring(start: number, end?: number): string;\\n\\n    /** Converts all the alphabetic characters in a string to lowercase. */\\n    toLowerCase(): string;\\n\\n    /** Converts all alphabetic characters to lowercase, taking into account the host environment's current locale. */\\n    toLocaleLowerCase(): string;\\n\\n    /** Converts all the alphabetic characters in a string to uppercase. */\\n    toUpperCase(): string;\\n\\n    /** Returns a string where all alphabetic characters have been converted to uppercase, taking into account the host environment's current locale. */\\n    toLocaleUpperCase(): string;\\n\\n    /** Removes the leading and trailing white space and line terminator characters from a string. */\\n    trim(): string;\\n\\n    /** Returns the length of a String object. */\\n    readonly length: number;\\n\\n    // IE extensions\\n    /**\\n      * Gets a substring beginning at the specified location and having the specified length.\\n      * @param from The starting position of the desired substring. The index of the first character in the string is zero.\\n      * @param length The number of characters to include in the returned substring.\\n      */\\n    substr(from: number, length?: number): string;\\n\\n    /** Returns the primitive value of the specified object. */\\n    valueOf(): string;\\n\\n    readonly [index: number]: string;\\n}\\n\\ninterface StringConstructor {\\n    new(value?: any): String;\\n    (value?: any): string;\\n    readonly prototype: String;\\n    fromCharCode(...codes: number[]): string;\\n}\\n\\n/**\\n  * Allows manipulation and formatting of text strings and determination and location of substrings within strings.\\n  */\\ndeclare var String: StringConstructor;\\n\\ninterface Boolean {\\n    /** Returns the primitive value of the specified object. */\\n    valueOf(): boolean;\\n}\\n\\ninterface BooleanConstructor {\\n    new(value?: any): Boolean;\\n    <T>(value?: T): boolean;\\n    readonly prototype: Boolean;\\n}\\n\\ndeclare var Boolean: BooleanConstructor;\\n\\ninterface Number {\\n    /**\\n      * Returns a string representation of an object.\\n      * @param radix Specifies a radix for converting numeric values to strings. This value is only used for numbers.\\n      */\\n    toString(radix?: number): string;\\n\\n    /**\\n      * Returns a string representing a number in fixed-point notation.\\n      * @param fractionDigits Number of digits after the decimal point. Must be in the range 0 - 20, inclusive.\\n      */\\n    toFixed(fractionDigits?: number): string;\\n\\n    /**\\n      * Returns a string containing a number represented in exponential notation.\\n      * @param fractionDigits Number of digits after the decimal point. Must be in the range 0 - 20, inclusive.\\n      */\\n    toExponential(fractionDigits?: number): string;\\n\\n    /**\\n      * Returns a string containing a number represented either in exponential or fixed-point notation with a specified number of digits.\\n      * @param precision Number of significant digits. Must be in the range 1 - 21, inclusive.\\n      */\\n    toPrecision(precision?: number): string;\\n\\n    /** Returns the primitive value of the specified object. */\\n    valueOf(): number;\\n}\\n\\ninterface NumberConstructor {\\n    new(value?: any): Number;\\n    (value?: any): number;\\n    readonly prototype: Number;\\n\\n    /** The largest number that can be represented in JavaScript. Equal to approximately 1.79E+308. */\\n    readonly MAX_VALUE: number;\\n\\n    /** The closest number to zero that can be represented in JavaScript. Equal to approximately 5.00E-324. */\\n    readonly MIN_VALUE: number;\\n\\n    /**\\n      * A value that is not a number.\\n      * In equality comparisons, NaN does not equal any value, including itself. To test whether a value is equivalent to NaN, use the isNaN function.\\n      */\\n    readonly NaN: number;\\n\\n    /**\\n      * A value that is less than the largest negative number that can be represented in JavaScript.\\n      * JavaScript displays NEGATIVE_INFINITY values as -infinity.\\n      */\\n    readonly NEGATIVE_INFINITY: number;\\n\\n    /**\\n      * A value greater than the largest number that can be represented in JavaScript.\\n      * JavaScript displays POSITIVE_INFINITY values as infinity.\\n      */\\n    readonly POSITIVE_INFINITY: number;\\n}\\n\\n/** An object that represents a number of any kind. All JavaScript numbers are 64-bit floating-point numbers. */\\ndeclare var Number: NumberConstructor;\\n\\ninterface TemplateStringsArray extends ReadonlyArray<string> {\\n    readonly raw: ReadonlyArray<string>;\\n}\\n\\n/**\\n * The type of `import.meta`.\\n *\\n * If you need to declare that a given property exists on `import.meta`,\\n * this type may be augmented via interface merging.\\n */\\ninterface ImportMeta {\\n}\\n\\ninterface Math {\\n    /** The mathematical constant e. This is Euler's number, the base of natural logarithms. */\\n    readonly E: number;\\n    /** The natural logarithm of 10. */\\n    readonly LN10: number;\\n    /** The natural logarithm of 2. */\\n    readonly LN2: number;\\n    /** The base-2 logarithm of e. */\\n    readonly LOG2E: number;\\n    /** The base-10 logarithm of e. */\\n    readonly LOG10E: number;\\n    /** Pi. This is the ratio of the circumference of a circle to its diameter. */\\n    readonly PI: number;\\n    /** The square root of 0.5, or, equivalently, one divided by the square root of 2. */\\n    readonly SQRT1_2: number;\\n    /** The square root of 2. */\\n    readonly SQRT2: number;\\n    /**\\n      * Returns the absolute value of a number (the value without regard to whether it is positive or negative).\\n      * For example, the absolute value of -5 is the same as the absolute value of 5.\\n      * @param x A numeric expression for which the absolute value is needed.\\n      */\\n    abs(x: number): number;\\n    /**\\n      * Returns the arc cosine (or inverse cosine) of a number.\\n      * @param x A numeric expression.\\n      */\\n    acos(x: number): number;\\n    /**\\n      * Returns the arcsine of a number.\\n      * @param x A numeric expression.\\n      */\\n    asin(x: number): number;\\n    /**\\n      * Returns the arctangent of a number.\\n      * @param x A numeric expression for which the arctangent is needed.\\n      */\\n    atan(x: number): number;\\n    /**\\n      * Returns the angle (in radians) from the X axis to a point.\\n      * @param y A numeric expression representing the cartesian y-coordinate.\\n      * @param x A numeric expression representing the cartesian x-coordinate.\\n      */\\n    atan2(y: number, x: number): number;\\n    /**\\n      * Returns the smallest integer greater than or equal to its numeric argument.\\n      * @param x A numeric expression.\\n      */\\n    ceil(x: number): number;\\n    /**\\n      * Returns the cosine of a number.\\n      * @param x A numeric expression that contains an angle measured in radians.\\n      */\\n    cos(x: number): number;\\n    /**\\n      * Returns e (the base of natural logarithms) raised to a power.\\n      * @param x A numeric expression representing the power of e.\\n      */\\n    exp(x: number): number;\\n    /**\\n      * Returns the greatest integer less than or equal to its numeric argument.\\n      * @param x A numeric expression.\\n      */\\n    floor(x: number): number;\\n    /**\\n      * Returns the natural logarithm (base e) of a number.\\n      * @param x A numeric expression.\\n      */\\n    log(x: number): number;\\n    /**\\n      * Returns the larger of a set of supplied numeric expressions.\\n      * @param values Numeric expressions to be evaluated.\\n      */\\n    max(...values: number[]): number;\\n    /**\\n      * Returns the smaller of a set of supplied numeric expressions.\\n      * @param values Numeric expressions to be evaluated.\\n      */\\n    min(...values: number[]): number;\\n    /**\\n      * Returns the value of a base expression taken to a specified power.\\n      * @param x The base value of the expression.\\n      * @param y The exponent value of the expression.\\n      */\\n    pow(x: number, y: number): number;\\n    /** Returns a pseudorandom number between 0 and 1. */\\n    random(): number;\\n    /**\\n      * Returns a supplied numeric expression rounded to the nearest number.\\n      * @param x The value to be rounded to the nearest number.\\n      */\\n    round(x: number): number;\\n    /**\\n      * Returns the sine of a number.\\n      * @param x A numeric expression that contains an angle measured in radians.\\n      */\\n    sin(x: number): number;\\n    /**\\n      * Returns the square root of a number.\\n      * @param x A numeric expression.\\n      */\\n    sqrt(x: number): number;\\n    /**\\n      * Returns the tangent of a number.\\n      * @param x A numeric expression that contains an angle measured in radians.\\n      */\\n    tan(x: number): number;\\n}\\n/** An intrinsic object that provides basic mathematics functionality and constants. */\\ndeclare var Math: Math;\\n\\n/** Enables basic storage and retrieval of dates and times. */\\ninterface Date {\\n    /** Returns a string representation of a date. The format of the string depends on the locale. */\\n    toString(): string;\\n    /** Returns a date as a string value. */\\n    toDateString(): string;\\n    /** Returns a time as a string value. */\\n    toTimeString(): string;\\n    /** Returns a value as a string value appropriate to the host environment's current locale. */\\n    toLocaleString(): string;\\n    /** Returns a date as a string value appropriate to the host environment's current locale. */\\n    toLocaleDateString(): string;\\n    /** Returns a time as a string value appropriate to the host environment's current locale. */\\n    toLocaleTimeString(): string;\\n    /** Returns the stored time value in milliseconds since midnight, January 1, 1970 UTC. */\\n    valueOf(): number;\\n    /** Gets the time value in milliseconds. */\\n    getTime(): number;\\n    /** Gets the year, using local time. */\\n    getFullYear(): number;\\n    /** Gets the year using Universal Coordinated Time (UTC). */\\n    getUTCFullYear(): number;\\n    /** Gets the month, using local time. */\\n    getMonth(): number;\\n    /** Gets the month of a Date object using Universal Coordinated Time (UTC). */\\n    getUTCMonth(): number;\\n    /** Gets the day-of-the-month, using local time. */\\n    getDate(): number;\\n    /** Gets the day-of-the-month, using Universal Coordinated Time (UTC). */\\n    getUTCDate(): number;\\n    /** Gets the day of the week, using local time. */\\n    getDay(): number;\\n    /** Gets the day of the week using Universal Coordinated Time (UTC). */\\n    getUTCDay(): number;\\n    /** Gets the hours in a date, using local time. */\\n    getHours(): number;\\n    /** Gets the hours value in a Date object using Universal Coordinated Time (UTC). */\\n    getUTCHours(): number;\\n    /** Gets the minutes of a Date object, using local time. */\\n    getMinutes(): number;\\n    /** Gets the minutes of a Date object using Universal Coordinated Time (UTC). */\\n    getUTCMinutes(): number;\\n    /** Gets the seconds of a Date object, using local time. */\\n    getSeconds(): number;\\n    /** Gets the seconds of a Date object using Universal Coordinated Time (UTC). */\\n    getUTCSeconds(): number;\\n    /** Gets the milliseconds of a Date, using local time. */\\n    getMilliseconds(): number;\\n    /** Gets the milliseconds of a Date object using Universal Coordinated Time (UTC). */\\n    getUTCMilliseconds(): number;\\n    /** Gets the difference in minutes between the time on the local computer and Universal Coordinated Time (UTC). */\\n    getTimezoneOffset(): number;\\n    /**\\n      * Sets the date and time value in the Date object.\\n      * @param time A numeric value representing the number of elapsed milliseconds since midnight, January 1, 1970 GMT.\\n      */\\n    setTime(time: number): number;\\n    /**\\n      * Sets the milliseconds value in the Date object using local time.\\n      * @param ms A numeric value equal to the millisecond value.\\n      */\\n    setMilliseconds(ms: number): number;\\n    /**\\n      * Sets the milliseconds value in the Date object using Universal Coordinated Time (UTC).\\n      * @param ms A numeric value equal to the millisecond value.\\n      */\\n    setUTCMilliseconds(ms: number): number;\\n\\n    /**\\n      * Sets the seconds value in the Date object using local time.\\n      * @param sec A numeric value equal to the seconds value.\\n      * @param ms A numeric value equal to the milliseconds value.\\n      */\\n    setSeconds(sec: number, ms?: number): number;\\n    /**\\n      * Sets the seconds value in the Date object using Universal Coordinated Time (UTC).\\n      * @param sec A numeric value equal to the seconds value.\\n      * @param ms A numeric value equal to the milliseconds value.\\n      */\\n    setUTCSeconds(sec: number, ms?: number): number;\\n    /**\\n      * Sets the minutes value in the Date object using local time.\\n      * @param min A numeric value equal to the minutes value.\\n      * @param sec A numeric value equal to the seconds value.\\n      * @param ms A numeric value equal to the milliseconds value.\\n      */\\n    setMinutes(min: number, sec?: number, ms?: number): number;\\n    /**\\n      * Sets the minutes value in the Date object using Universal Coordinated Time (UTC).\\n      * @param min A numeric value equal to the minutes value.\\n      * @param sec A numeric value equal to the seconds value.\\n      * @param ms A numeric value equal to the milliseconds value.\\n      */\\n    setUTCMinutes(min: number, sec?: number, ms?: number): number;\\n    /**\\n      * Sets the hour value in the Date object using local time.\\n      * @param hours A numeric value equal to the hours value.\\n      * @param min A numeric value equal to the minutes value.\\n      * @param sec A numeric value equal to the seconds value.\\n      * @param ms A numeric value equal to the milliseconds value.\\n      */\\n    setHours(hours: number, min?: number, sec?: number, ms?: number): number;\\n    /**\\n      * Sets the hours value in the Date object using Universal Coordinated Time (UTC).\\n      * @param hours A numeric value equal to the hours value.\\n      * @param min A numeric value equal to the minutes value.\\n      * @param sec A numeric value equal to the seconds value.\\n      * @param ms A numeric value equal to the milliseconds value.\\n      */\\n    setUTCHours(hours: number, min?: number, sec?: number, ms?: number): number;\\n    /**\\n      * Sets the numeric day-of-the-month value of the Date object using local time.\\n      * @param date A numeric value equal to the day of the month.\\n      */\\n    setDate(date: number): number;\\n    /**\\n      * Sets the numeric day of the month in the Date object using Universal Coordinated Time (UTC).\\n      * @param date A numeric value equal to the day of the month.\\n      */\\n    setUTCDate(date: number): number;\\n    /**\\n      * Sets the month value in the Date object using local time.\\n      * @param month A numeric value equal to the month. The value for January is 0, and other month values follow consecutively.\\n      * @param date A numeric value representing the day of the month. If this value is not supplied, the value from a call to the getDate method is used.\\n      */\\n    setMonth(month: number, date?: number): number;\\n    /**\\n      * Sets the month value in the Date object using Universal Coordinated Time (UTC).\\n      * @param month A numeric value equal to the month. The value for January is 0, and other month values follow consecutively.\\n      * @param date A numeric value representing the day of the month. If it is not supplied, the value from a call to the getUTCDate method is used.\\n      */\\n    setUTCMonth(month: number, date?: number): number;\\n    /**\\n      * Sets the year of the Date object using local time.\\n      * @param year A numeric value for the year.\\n      * @param month A zero-based numeric value for the month (0 for January, 11 for December). Must be specified if numDate is specified.\\n      * @param date A numeric value equal for the day of the month.\\n      */\\n    setFullYear(year: number, month?: number, date?: number): number;\\n    /**\\n      * Sets the year value in the Date object using Universal Coordinated Time (UTC).\\n      * @param year A numeric value equal to the year.\\n      * @param month A numeric value equal to the month. The value for January is 0, and other month values follow consecutively. Must be supplied if numDate is supplied.\\n      * @param date A numeric value equal to the day of the month.\\n      */\\n    setUTCFullYear(year: number, month?: number, date?: number): number;\\n    /** Returns a date converted to a string using Universal Coordinated Time (UTC). */\\n    toUTCString(): string;\\n    /** Returns a date as a string value in ISO format. */\\n    toISOString(): string;\\n    /** Used by the JSON.stringify method to enable the transformation of an object's data for JavaScript Object Notation (JSON) serialization. */\\n    toJSON(key?: any): string;\\n}\\n\\ninterface DateConstructor {\\n    new(): Date;\\n    new(value: number | string): Date;\\n    new(year: number, month: number, date?: number, hours?: number, minutes?: number, seconds?: number, ms?: number): Date;\\n    (): string;\\n    readonly prototype: Date;\\n    /**\\n      * Parses a string containing a date, and returns the number of milliseconds between that date and midnight, January 1, 1970.\\n      * @param s A date string\\n      */\\n    parse(s: string): number;\\n    /**\\n      * Returns the number of milliseconds between midnight, January 1, 1970 Universal Coordinated Time (UTC) (or GMT) and the specified date.\\n      * @param year The full year designation is required for cross-century date accuracy. If year is between 0 and 99 is used, then year is assumed to be 1900 + year.\\n      * @param month The month as an number between 0 and 11 (January to December).\\n      * @param date The date as an number between 1 and 31.\\n      * @param hours Must be supplied if minutes is supplied. An number from 0 to 23 (midnight to 11pm) that specifies the hour.\\n      * @param minutes Must be supplied if seconds is supplied. An number from 0 to 59 that specifies the minutes.\\n      * @param seconds Must be supplied if milliseconds is supplied. An number from 0 to 59 that specifies the seconds.\\n      * @param ms An number from 0 to 999 that specifies the milliseconds.\\n      */\\n    UTC(year: number, month: number, date?: number, hours?: number, minutes?: number, seconds?: number, ms?: number): number;\\n    now(): number;\\n}\\n\\ndeclare var Date: DateConstructor;\\n\\ninterface RegExpMatchArray extends Array<string> {\\n    index?: number;\\n    input?: string;\\n}\\n\\ninterface RegExpExecArray extends Array<string> {\\n    index: number;\\n    input: string;\\n}\\n\\ninterface RegExp {\\n    /**\\n      * Executes a search on a string using a regular expression pattern, and returns an array containing the results of that search.\\n      * @param string The String object or string literal on which to perform the search.\\n      */\\n    exec(string: string): RegExpExecArray | null;\\n\\n    /**\\n      * Returns a Boolean value that indicates whether or not a pattern exists in a searched string.\\n      * @param string String on which to perform the search.\\n      */\\n    test(string: string): boolean;\\n\\n    /** Returns a copy of the text of the regular expression pattern. Read-only. The regExp argument is a Regular expression object. It can be a variable name or a literal. */\\n    readonly source: string;\\n\\n    /** Returns a Boolean value indicating the state of the global flag (g) used with a regular expression. Default is false. Read-only. */\\n    readonly global: boolean;\\n\\n    /** Returns a Boolean value indicating the state of the ignoreCase flag (i) used with a regular expression. Default is false. Read-only. */\\n    readonly ignoreCase: boolean;\\n\\n    /** Returns a Boolean value indicating the state of the multiline flag (m) used with a regular expression. Default is false. Read-only. */\\n    readonly multiline: boolean;\\n\\n    lastIndex: number;\\n\\n    // Non-standard extensions\\n    compile(): this;\\n}\\n\\ninterface RegExpConstructor {\\n    new(pattern: RegExp | string): RegExp;\\n    new(pattern: string, flags?: string): RegExp;\\n    (pattern: RegExp | string): RegExp;\\n    (pattern: string, flags?: string): RegExp;\\n    readonly prototype: RegExp;\\n\\n    // Non-standard extensions\\n    $1: string;\\n    $2: string;\\n    $3: string;\\n    $4: string;\\n    $5: string;\\n    $6: string;\\n    $7: string;\\n    $8: string;\\n    $9: string;\\n    lastMatch: string;\\n}\\n\\ndeclare var RegExp: RegExpConstructor;\\n\\ninterface Error {\\n    name: string;\\n    message: string;\\n    stack?: string;\\n}\\n\\ninterface ErrorConstructor {\\n    new(message?: string): Error;\\n    (message?: string): Error;\\n    readonly prototype: Error;\\n}\\n\\ndeclare var Error: ErrorConstructor;\\n\\ninterface EvalError extends Error {\\n}\\n\\ninterface EvalErrorConstructor {\\n    new(message?: string): EvalError;\\n    (message?: string): EvalError;\\n    readonly prototype: EvalError;\\n}\\n\\ndeclare var EvalError: EvalErrorConstructor;\\n\\ninterface RangeError extends Error {\\n}\\n\\ninterface RangeErrorConstructor {\\n    new(message?: string): RangeError;\\n    (message?: string): RangeError;\\n    readonly prototype: RangeError;\\n}\\n\\ndeclare var RangeError: RangeErrorConstructor;\\n\\ninterface ReferenceError extends Error {\\n}\\n\\ninterface ReferenceErrorConstructor {\\n    new(message?: string): ReferenceError;\\n    (message?: string): ReferenceError;\\n    readonly prototype: ReferenceError;\\n}\\n\\ndeclare var ReferenceError: ReferenceErrorConstructor;\\n\\ninterface SyntaxError extends Error {\\n}\\n\\ninterface SyntaxErrorConstructor {\\n    new(message?: string): SyntaxError;\\n    (message?: string): SyntaxError;\\n    readonly prototype: SyntaxError;\\n}\\n\\ndeclare var SyntaxError: SyntaxErrorConstructor;\\n\\ninterface TypeError extends Error {\\n}\\n\\ninterface TypeErrorConstructor {\\n    new(message?: string): TypeError;\\n    (message?: string): TypeError;\\n    readonly prototype: TypeError;\\n}\\n\\ndeclare var TypeError: TypeErrorConstructor;\\n\\ninterface URIError extends Error {\\n}\\n\\ninterface URIErrorConstructor {\\n    new(message?: string): URIError;\\n    (message?: string): URIError;\\n    readonly prototype: URIError;\\n}\\n\\ndeclare var URIError: URIErrorConstructor;\\n\\ninterface JSON {\\n    /**\\n      * Converts a JavaScript Object Notation (JSON) string into an object.\\n      * @param text A valid JSON string.\\n      * @param reviver A function that transforms the results. This function is called for each member of the object.\\n      * If a member contains nested objects, the nested objects are transformed before the parent object is.\\n      */\\n    parse(text: string, reviver?: (this: any, key: string, value: any) => any): any;\\n    /**\\n      * Converts a JavaScript value to a JavaScript Object Notation (JSON) string.\\n      * @param value A JavaScript value, usually an object or array, to be converted.\\n      * @param replacer A function that transforms the results.\\n      * @param space Adds indentation, white space, and line break characters to the return-value JSON text to make it easier to read.\\n      */\\n    stringify(value: any, replacer?: (this: any, key: string, value: any) => any, space?: string | number): string;\\n    /**\\n      * Converts a JavaScript value to a JavaScript Object Notation (JSON) string.\\n      * @param value A JavaScript value, usually an object or array, to be converted.\\n      * @param replacer An array of strings and numbers that acts as a approved list for selecting the object properties that will be stringified.\\n      * @param space Adds indentation, white space, and line break characters to the return-value JSON text to make it easier to read.\\n      */\\n    stringify(value: any, replacer?: (number | string)[] | null, space?: string | number): string;\\n}\\n\\n/**\\n  * An intrinsic object that provides functions to convert JavaScript values to and from the JavaScript Object Notation (JSON) format.\\n  */\\ndeclare var JSON: JSON;\\n\\n\\n/////////////////////////////\\n/// ECMAScript Array API (specially handled by compiler)\\n/////////////////////////////\\n\\ninterface ReadonlyArray<T> {\\n    /**\\n      * Gets the length of the array. This is a number one higher than the highest element defined in an array.\\n      */\\n    readonly length: number;\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n    /**\\n      * Returns a string representation of an array. The elements are converted to string using their toLocalString methods.\\n      */\\n    toLocaleString(): string;\\n    /**\\n      * Combines two or more arrays.\\n      * @param items Additional items to add to the end of array1.\\n      */\\n    concat(...items: ConcatArray<T>[]): T[];\\n    /**\\n      * Combines two or more arrays.\\n      * @param items Additional items to add to the end of array1.\\n      */\\n    concat(...items: (T | ConcatArray<T>)[]): T[];\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): T[];\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\\n      */\\n    indexOf(searchElement: T, fromIndex?: number): number;\\n    /**\\n      * Returns the index of the last occurrence of a specified value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.\\n      */\\n    lastIndexOf(searchElement: T, fromIndex?: number): number;\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls the callbackfn function for each element in array1 until the callbackfn returns false, or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: T, index: number, array: ReadonlyArray<T>) => unknown, thisArg?: any): boolean;\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the callbackfn function for each element in array1 until the callbackfn returns true, or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: T, index: number, array: ReadonlyArray<T>) => unknown, thisArg?: any): boolean;\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: T, index: number, array: ReadonlyArray<T>) => void, thisArg?: any): void;\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map<U>(callbackfn: (value: T, index: number, array: ReadonlyArray<T>) => U, thisArg?: any): U[];\\n    /**\\n     * Returns the elements of an array that meet the condition specified in a callback function.\\n     * @param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\\n     * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n     */\\n    filter<S extends T>(callbackfn: (value: T, index: number, array: ReadonlyArray<T>) => value is S, thisArg?: any): S[];\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: T, index: number, array: ReadonlyArray<T>) => unknown, thisArg?: any): T[];\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: ReadonlyArray<T>) => T): T;\\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: ReadonlyArray<T>) => T, initialValue: T): T;\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: ReadonlyArray<T>) => U, initialValue: U): U;\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: ReadonlyArray<T>) => T): T;\\n    reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: ReadonlyArray<T>) => T, initialValue: T): T;\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: ReadonlyArray<T>) => U, initialValue: U): U;\\n\\n    readonly [n: number]: T;\\n}\\n\\ninterface ConcatArray<T> {\\n    readonly length: number;\\n    readonly [n: number]: T;\\n    join(separator?: string): string;\\n    slice(start?: number, end?: number): T[];\\n}\\n\\ninterface Array<T> {\\n    /**\\n      * Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.\\n      */\\n    length: number;\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n    /**\\n      * Returns a string representation of an array. The elements are converted to string using their toLocalString methods.\\n      */\\n    toLocaleString(): string;\\n    /**\\n      * Removes the last element from an array and returns it.\\n      */\\n    pop(): T | undefined;\\n    /**\\n      * Appends new elements to an array, and returns the new length of the array.\\n      * @param items New elements of the Array.\\n      */\\n    push(...items: T[]): number;\\n    /**\\n      * Combines two or more arrays.\\n      * @param items Additional items to add to the end of array1.\\n      */\\n    concat(...items: ConcatArray<T>[]): T[];\\n    /**\\n      * Combines two or more arrays.\\n      * @param items Additional items to add to the end of array1.\\n      */\\n    concat(...items: (T | ConcatArray<T>)[]): T[];\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): T[];\\n    /**\\n      * Removes the first element from an array and returns it.\\n      */\\n    shift(): T | undefined;\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): T[];\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: T, b: T) => number): this;\\n    /**\\n      * Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\\n      * @param start The zero-based location in the array from which to start removing elements.\\n      * @param deleteCount The number of elements to remove.\\n      */\\n    splice(start: number, deleteCount?: number): T[];\\n    /**\\n      * Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\\n      * @param start The zero-based location in the array from which to start removing elements.\\n      * @param deleteCount The number of elements to remove.\\n      * @param items Elements to insert into the array in place of the deleted elements.\\n      */\\n    splice(start: number, deleteCount: number, ...items: T[]): T[];\\n    /**\\n      * Inserts new elements at the start of an array.\\n      * @param items  Elements to insert at the start of the Array.\\n      */\\n    unshift(...items: T[]): number;\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\\n      */\\n    indexOf(searchElement: T, fromIndex?: number): number;\\n    /**\\n      * Returns the index of the last occurrence of a specified value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.\\n      */\\n    lastIndexOf(searchElement: T, fromIndex?: number): number;\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls the callbackfn function for each element in array1 until the callbackfn returns false, or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: T, index: number, array: T[]) => unknown, thisArg?: any): boolean;\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the callbackfn function for each element in array1 until the callbackfn returns true, or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: T, index: number, array: T[]) => unknown, thisArg?: any): boolean;\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: T, index: number, array: T[]) => void, thisArg?: any): void;\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): U[];\\n    /**\\n     * Returns the elements of an array that meet the condition specified in a callback function.\\n     * @param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\\n     * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n     */\\n    filter<S extends T>(callbackfn: (value: T, index: number, array: T[]) => value is S, thisArg?: any): S[];\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: T, index: number, array: T[]) => unknown, thisArg?: any): T[];\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T): T;\\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T;\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue: U): U;\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T): T;\\n    reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T;\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue: U): U;\\n\\n    [n: number]: T;\\n}\\n\\ninterface ArrayConstructor {\\n    new(arrayLength?: number): any[];\\n    new <T>(arrayLength: number): T[];\\n    new <T>(...items: T[]): T[];\\n    (arrayLength?: number): any[];\\n    <T>(arrayLength: number): T[];\\n    <T>(...items: T[]): T[];\\n    isArray(arg: any): arg is Array<any>;\\n    readonly prototype: Array<any>;\\n}\\n\\ndeclare var Array: ArrayConstructor;\\n\\ninterface TypedPropertyDescriptor<T> {\\n    enumerable?: boolean;\\n    configurable?: boolean;\\n    writable?: boolean;\\n    value?: T;\\n    get?: () => T;\\n    set?: (value: T) => void;\\n}\\n\\ndeclare type ClassDecorator = <TFunction extends Function>(target: TFunction) => TFunction | void;\\ndeclare type PropertyDecorator = (target: Object, propertyKey: string | symbol) => void;\\ndeclare type MethodDecorator = <T>(target: Object, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<T>) => TypedPropertyDescriptor<T> | void;\\ndeclare type ParameterDecorator = (target: Object, propertyKey: string | symbol, parameterIndex: number) => void;\\n\\ndeclare type PromiseConstructorLike = new <T>(executor: (resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void) => PromiseLike<T>;\\n\\ninterface PromiseLike<T> {\\n    /**\\n     * Attaches callbacks for the resolution and/or rejection of the Promise.\\n     * @param onfulfilled The callback to execute when the Promise is resolved.\\n     * @param onrejected The callback to execute when the Promise is rejected.\\n     * @returns A Promise for the completion of which ever callback is executed.\\n     */\\n    then<TResult1 = T, TResult2 = never>(onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null, onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null): PromiseLike<TResult1 | TResult2>;\\n}\\n\\n/**\\n * Represents the completion of an asynchronous operation\\n */\\ninterface Promise<T> {\\n    /**\\n     * Attaches callbacks for the resolution and/or rejection of the Promise.\\n     * @param onfulfilled The callback to execute when the Promise is resolved.\\n     * @param onrejected The callback to execute when the Promise is rejected.\\n     * @returns A Promise for the completion of which ever callback is executed.\\n     */\\n    then<TResult1 = T, TResult2 = never>(onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null, onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null): Promise<TResult1 | TResult2>;\\n\\n    /**\\n     * Attaches a callback for only the rejection of the Promise.\\n     * @param onrejected The callback to execute when the Promise is rejected.\\n     * @returns A Promise for the completion of the callback.\\n     */\\n    catch<TResult = never>(onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null): Promise<T | TResult>;\\n}\\n\\ninterface ArrayLike<T> {\\n    readonly length: number;\\n    readonly [n: number]: T;\\n}\\n\\n/**\\n * Make all properties in T optional\\n */\\ntype Partial<T> = {\\n    [P in keyof T]?: T[P];\\n};\\n\\n/**\\n * Make all properties in T required\\n */\\ntype Required<T> = {\\n    [P in keyof T]-?: T[P];\\n};\\n\\n/**\\n * Make all properties in T readonly\\n */\\ntype Readonly<T> = {\\n    readonly [P in keyof T]: T[P];\\n};\\n\\n/**\\n * From T, pick a set of properties whose keys are in the union K\\n */\\ntype Pick<T, K extends keyof T> = {\\n    [P in K]: T[P];\\n};\\n\\n/**\\n * Construct a type with a set of properties K of type T\\n */\\ntype Record<K extends keyof any, T> = {\\n    [P in K]: T;\\n};\\n\\n/**\\n * Exclude from T those types that are assignable to U\\n */\\ntype Exclude<T, U> = T extends U ? never : T;\\n\\n/**\\n * Extract from T those types that are assignable to U\\n */\\ntype Extract<T, U> = T extends U ? T : never;\\n\\n/**\\n * Construct a type with the properties of T except for those in type K.\\n */\\ntype Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\\n\\n/**\\n * Exclude null and undefined from T\\n */\\ntype NonNullable<T> = T extends null | undefined ? never : T;\\n\\n/**\\n * Obtain the parameters of a function type in a tuple\\n */\\ntype Parameters<T extends (...args: any) => any> = T extends (...args: infer P) => any ? P : never;\\n\\n/**\\n * Obtain the parameters of a constructor function type in a tuple\\n */\\ntype ConstructorParameters<T extends new (...args: any) => any> = T extends new (...args: infer P) => any ? P : never;\\n\\n/**\\n * Obtain the return type of a function type\\n */\\ntype ReturnType<T extends (...args: any) => any> = T extends (...args: any) => infer R ? R : any;\\n\\n/**\\n * Obtain the return type of a constructor function type\\n */\\ntype InstanceType<T extends new (...args: any) => any> = T extends new (...args: any) => infer R ? R : any;\\n\\n/**\\n * Marker for contextual 'this' type\\n */\\ninterface ThisType<T> { }\\n\\n/**\\n  * Represents a raw buffer of binary data, which is used to store data for the\\n  * different typed arrays. ArrayBuffers cannot be read from or written to directly,\\n  * but can be passed to a typed array or DataView Object to interpret the raw\\n  * buffer as needed.\\n  */\\ninterface ArrayBuffer {\\n    /**\\n      * Read-only. The length of the ArrayBuffer (in bytes).\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * Returns a section of an ArrayBuffer.\\n      */\\n    slice(begin: number, end?: number): ArrayBuffer;\\n}\\n\\n/**\\n * Allowed ArrayBuffer types for the buffer of an ArrayBufferView and related Typed Arrays.\\n */\\ninterface ArrayBufferTypes {\\n    ArrayBuffer: ArrayBuffer;\\n}\\ntype ArrayBufferLike = ArrayBufferTypes[keyof ArrayBufferTypes];\\n\\ninterface ArrayBufferConstructor {\\n    readonly prototype: ArrayBuffer;\\n    new(byteLength: number): ArrayBuffer;\\n    isView(arg: any): arg is ArrayBufferView;\\n}\\ndeclare var ArrayBuffer: ArrayBufferConstructor;\\n\\ninterface ArrayBufferView {\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    byteOffset: number;\\n}\\n\\ninterface DataView {\\n    readonly buffer: ArrayBuffer;\\n    readonly byteLength: number;\\n    readonly byteOffset: number;\\n    /**\\n      * Gets the Float32 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getFloat32(byteOffset: number, littleEndian?: boolean): number;\\n\\n    /**\\n      * Gets the Float64 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getFloat64(byteOffset: number, littleEndian?: boolean): number;\\n\\n    /**\\n      * Gets the Int8 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getInt8(byteOffset: number): number;\\n\\n    /**\\n      * Gets the Int16 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getInt16(byteOffset: number, littleEndian?: boolean): number;\\n    /**\\n      * Gets the Int32 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getInt32(byteOffset: number, littleEndian?: boolean): number;\\n\\n    /**\\n      * Gets the Uint8 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getUint8(byteOffset: number): number;\\n\\n    /**\\n      * Gets the Uint16 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getUint16(byteOffset: number, littleEndian?: boolean): number;\\n\\n    /**\\n      * Gets the Uint32 value at the specified byte offset from the start of the view. There is\\n      * no alignment constraint; multi-byte values may be fetched from any offset.\\n      * @param byteOffset The place in the buffer at which the value should be retrieved.\\n      */\\n    getUint32(byteOffset: number, littleEndian?: boolean): number;\\n\\n    /**\\n      * Stores an Float32 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      * @param littleEndian If false or undefined, a big-endian value should be written,\\n      * otherwise a little-endian value should be written.\\n      */\\n    setFloat32(byteOffset: number, value: number, littleEndian?: boolean): void;\\n\\n    /**\\n      * Stores an Float64 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      * @param littleEndian If false or undefined, a big-endian value should be written,\\n      * otherwise a little-endian value should be written.\\n      */\\n    setFloat64(byteOffset: number, value: number, littleEndian?: boolean): void;\\n\\n    /**\\n      * Stores an Int8 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      */\\n    setInt8(byteOffset: number, value: number): void;\\n\\n    /**\\n      * Stores an Int16 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      * @param littleEndian If false or undefined, a big-endian value should be written,\\n      * otherwise a little-endian value should be written.\\n      */\\n    setInt16(byteOffset: number, value: number, littleEndian?: boolean): void;\\n\\n    /**\\n      * Stores an Int32 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      * @param littleEndian If false or undefined, a big-endian value should be written,\\n      * otherwise a little-endian value should be written.\\n      */\\n    setInt32(byteOffset: number, value: number, littleEndian?: boolean): void;\\n\\n    /**\\n      * Stores an Uint8 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      */\\n    setUint8(byteOffset: number, value: number): void;\\n\\n    /**\\n      * Stores an Uint16 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      * @param littleEndian If false or undefined, a big-endian value should be written,\\n      * otherwise a little-endian value should be written.\\n      */\\n    setUint16(byteOffset: number, value: number, littleEndian?: boolean): void;\\n\\n    /**\\n      * Stores an Uint32 value at the specified byte offset from the start of the view.\\n      * @param byteOffset The place in the buffer at which the value should be set.\\n      * @param value The value to set.\\n      * @param littleEndian If false or undefined, a big-endian value should be written,\\n      * otherwise a little-endian value should be written.\\n      */\\n    setUint32(byteOffset: number, value: number, littleEndian?: boolean): void;\\n}\\n\\ninterface DataViewConstructor {\\n    new(buffer: ArrayBufferLike, byteOffset?: number, byteLength?: number): DataView;\\n}\\ndeclare var DataView: DataViewConstructor;\\n\\n/**\\n  * A typed array of 8-bit integer values. The contents are initialized to 0. If the requested\\n  * number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Int8Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Int8Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Int8Array) => any, thisArg?: any): Int8Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Int8Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Int8Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Int8Array) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Int8Array) => number, thisArg?: any): Int8Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int8Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int8Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Int8Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int8Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int8Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Int8Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Int8Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Int8Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Int8Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Int8Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Int8Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\ninterface Int8ArrayConstructor {\\n    readonly prototype: Int8Array;\\n    new(length: number): Int8Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Int8Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Int8Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Int8Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Int8Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Int8Array;\\n\\n\\n}\\ndeclare var Int8Array: Int8ArrayConstructor;\\n\\n/**\\n  * A typed array of 8-bit unsigned integer values. The contents are initialized to 0. If the\\n  * requested number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Uint8Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Uint8Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Uint8Array) => any, thisArg?: any): Uint8Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Uint8Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Uint8Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Uint8Array) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Uint8Array) => number, thisArg?: any): Uint8Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint8Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint8Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Uint8Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Uint8Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Uint8Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Uint8Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Uint8Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Uint8ArrayConstructor {\\n    readonly prototype: Uint8Array;\\n    new(length: number): Uint8Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Uint8Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Uint8Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Uint8Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Uint8Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Uint8Array;\\n\\n}\\ndeclare var Uint8Array: Uint8ArrayConstructor;\\n\\n/**\\n  * A typed array of 8-bit unsigned integer (clamped) values. The contents are initialized to 0.\\n  * If the requested number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Uint8ClampedArray {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Uint8ClampedArray) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Uint8ClampedArray) => any, thisArg?: any): Uint8ClampedArray;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Uint8ClampedArray) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Uint8ClampedArray) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Uint8ClampedArray) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Uint8ClampedArray) => number, thisArg?: any): Uint8ClampedArray;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8ClampedArray) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8ClampedArray) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint8ClampedArray) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8ClampedArray) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint8ClampedArray) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint8ClampedArray) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Uint8ClampedArray;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Uint8ClampedArray;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Uint8ClampedArray) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Uint8ClampedArray view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Uint8ClampedArray;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Uint8ClampedArrayConstructor {\\n    readonly prototype: Uint8ClampedArray;\\n    new(length: number): Uint8ClampedArray;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Uint8ClampedArray;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Uint8ClampedArray;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Uint8ClampedArray;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Uint8ClampedArray;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Uint8ClampedArray;\\n}\\ndeclare var Uint8ClampedArray: Uint8ClampedArrayConstructor;\\n\\n/**\\n  * A typed array of 16-bit signed integer values. The contents are initialized to 0. If the\\n  * requested number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Int16Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Int16Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Int16Array) => any, thisArg?: any): Int16Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Int16Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Int16Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Int16Array) => void, thisArg?: any): void;\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Int16Array) => number, thisArg?: any): Int16Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int16Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int16Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Int16Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int16Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int16Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Int16Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Int16Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Int16Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Int16Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Int16Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Int16Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Int16ArrayConstructor {\\n    readonly prototype: Int16Array;\\n    new(length: number): Int16Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Int16Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Int16Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Int16Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Int16Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Int16Array;\\n\\n\\n}\\ndeclare var Int16Array: Int16ArrayConstructor;\\n\\n/**\\n  * A typed array of 16-bit unsigned integer values. The contents are initialized to 0. If the\\n  * requested number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Uint16Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Uint16Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Uint16Array) => any, thisArg?: any): Uint16Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Uint16Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Uint16Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Uint16Array) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Uint16Array) => number, thisArg?: any): Uint16Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint16Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint16Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint16Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint16Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint16Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint16Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Uint16Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Uint16Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Uint16Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Uint16Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Uint16Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Uint16ArrayConstructor {\\n    readonly prototype: Uint16Array;\\n    new(length: number): Uint16Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Uint16Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Uint16Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Uint16Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Uint16Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Uint16Array;\\n\\n\\n}\\ndeclare var Uint16Array: Uint16ArrayConstructor;\\n/**\\n  * A typed array of 32-bit signed integer values. The contents are initialized to 0. If the\\n  * requested number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Int32Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Int32Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Int32Array) => any, thisArg?: any): Int32Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Int32Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Int32Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Int32Array) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Int32Array) => number, thisArg?: any): Int32Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int32Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int32Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Int32Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int32Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Int32Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Int32Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Int32Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Int32Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Int32Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Int32Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Int32Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Int32ArrayConstructor {\\n    readonly prototype: Int32Array;\\n    new(length: number): Int32Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Int32Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Int32Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Int32Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Int32Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Int32Array;\\n\\n}\\ndeclare var Int32Array: Int32ArrayConstructor;\\n\\n/**\\n  * A typed array of 32-bit unsigned integer values. The contents are initialized to 0. If the\\n  * requested number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Uint32Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Uint32Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Uint32Array) => any, thisArg?: any): Uint32Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Uint32Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Uint32Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Uint32Array) => void, thisArg?: any): void;\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Uint32Array) => number, thisArg?: any): Uint32Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint32Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint32Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint32Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint32Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Uint32Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Uint32Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Uint32Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Uint32Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Uint32Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Uint32Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Uint32Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Uint32ArrayConstructor {\\n    readonly prototype: Uint32Array;\\n    new(length: number): Uint32Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Uint32Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Uint32Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Uint32Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Uint32Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Uint32Array;\\n\\n}\\ndeclare var Uint32Array: Uint32ArrayConstructor;\\n\\n/**\\n  * A typed array of 32-bit float values. The contents are initialized to 0. If the requested number\\n  * of bytes could not be allocated an exception is raised.\\n  */\\ninterface Float32Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Float32Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Float32Array) => any, thisArg?: any): Float32Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Float32Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Float32Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Float32Array) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Float32Array) => number, thisArg?: any): Float32Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float32Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float32Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Float32Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float32Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float32Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Float32Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Float32Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Float32Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Float32Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Float32Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Float32Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Float32ArrayConstructor {\\n    readonly prototype: Float32Array;\\n    new(length: number): Float32Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Float32Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Float32Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Float32Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Float32Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Float32Array;\\n\\n\\n}\\ndeclare var Float32Array: Float32ArrayConstructor;\\n\\n/**\\n  * A typed array of 64-bit float values. The contents are initialized to 0. If the requested\\n  * number of bytes could not be allocated an exception is raised.\\n  */\\ninterface Float64Array {\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * The ArrayBuffer instance referenced by the array.\\n      */\\n    readonly buffer: ArrayBufferLike;\\n\\n    /**\\n      * The length in bytes of the array.\\n      */\\n    readonly byteLength: number;\\n\\n    /**\\n      * The offset in bytes of the array.\\n      */\\n    readonly byteOffset: number;\\n\\n    /**\\n      * Returns the this object after copying a section of the array identified by start and end\\n      * to the same array starting at position target\\n      * @param target If target is negative, it is treated as length+target where length is the\\n      * length of the array.\\n      * @param start If start is negative, it is treated as length+start. If end is negative, it\\n      * is treated as length+end.\\n      * @param end If not specified, length of the this object is used as its default value.\\n      */\\n    copyWithin(target: number, start: number, end?: number): this;\\n\\n    /**\\n      * Determines whether all the members of an array satisfy the specified test.\\n      * @param callbackfn A function that accepts up to three arguments. The every method calls\\n      * the callbackfn function for each element in array1 until the callbackfn returns false,\\n      * or until the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    every(callbackfn: (value: number, index: number, array: Float64Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n        * Returns the this object after filling the section identified by start and end with value\\n        * @param value value to fill array section with\\n        * @param start index to start filling the array at. If start is negative, it is treated as\\n        * length+start where length is the length of the array.\\n        * @param end index to stop filling the array at. If end is negative, it is treated as\\n        * length+end.\\n        */\\n    fill(value: number, start?: number, end?: number): this;\\n\\n    /**\\n      * Returns the elements of an array that meet the condition specified in a callback function.\\n      * @param callbackfn A function that accepts up to three arguments. The filter method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    filter(callbackfn: (value: number, index: number, array: Float64Array) => any, thisArg?: any): Float64Array;\\n\\n    /**\\n      * Returns the value of the first element in the array where predicate is true, and undefined\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found, find\\n      * immediately returns that element value. Otherwise, find returns undefined.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    find(predicate: (value: number, index: number, obj: Float64Array) => boolean, thisArg?: any): number | undefined;\\n\\n    /**\\n      * Returns the index of the first element in the array where predicate is true, and -1\\n      * otherwise.\\n      * @param predicate find calls predicate once for each element of the array, in ascending\\n      * order, until it finds one where predicate returns true. If such an element is found,\\n      * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\\n      * @param thisArg If provided, it will be used as the this value for each invocation of\\n      * predicate. If it is not provided, undefined is used instead.\\n      */\\n    findIndex(predicate: (value: number, index: number, obj: Float64Array) => boolean, thisArg?: any): number;\\n\\n    /**\\n      * Performs the specified action for each element in an array.\\n      * @param callbackfn  A function that accepts up to three arguments. forEach calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg  An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    forEach(callbackfn: (value: number, index: number, array: Float64Array) => void, thisArg?: any): void;\\n\\n    /**\\n      * Returns the index of the first occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      *  search starts at index 0.\\n      */\\n    indexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * Adds all the elements of an array separated by the specified separator string.\\n      * @param separator A string used to separate one element of an array from the next in the\\n      * resulting String. If omitted, the array elements are separated with a comma.\\n      */\\n    join(separator?: string): string;\\n\\n    /**\\n      * Returns the index of the last occurrence of a value in an array.\\n      * @param searchElement The value to locate in the array.\\n      * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the\\n      * search starts at index 0.\\n      */\\n    lastIndexOf(searchElement: number, fromIndex?: number): number;\\n\\n    /**\\n      * The length of the array.\\n      */\\n    readonly length: number;\\n\\n    /**\\n      * Calls a defined callback function on each element of an array, and returns an array that\\n      * contains the results.\\n      * @param callbackfn A function that accepts up to three arguments. The map method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    map(callbackfn: (value: number, index: number, array: Float64Array) => number, thisArg?: any): Float64Array;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float64Array) => number): number;\\n    reduce(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float64Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array. The return value of\\n      * the callback function is the accumulated result, and is provided as an argument in the next\\n      * call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduce method calls the\\n      * callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduce<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Float64Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an\\n      * argument instead of an array value.\\n      */\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float64Array) => number): number;\\n    reduceRight(callbackfn: (previousValue: number, currentValue: number, currentIndex: number, array: Float64Array) => number, initialValue: number): number;\\n\\n    /**\\n      * Calls the specified callback function for all the elements in an array, in descending order.\\n      * The return value of the callback function is the accumulated result, and is provided as an\\n      * argument in the next call to the callback function.\\n      * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls\\n      * the callbackfn function one time for each element in the array.\\n      * @param initialValue If initialValue is specified, it is used as the initial value to start\\n      * the accumulation. The first call to the callbackfn function provides this value as an argument\\n      * instead of an array value.\\n      */\\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: number, currentIndex: number, array: Float64Array) => U, initialValue: U): U;\\n\\n    /**\\n      * Reverses the elements in an Array.\\n      */\\n    reverse(): Float64Array;\\n\\n    /**\\n      * Sets a value or an array of values.\\n      * @param array A typed or untyped array of values to set.\\n      * @param offset The index in the current array at which the values are to be written.\\n      */\\n    set(array: ArrayLike<number>, offset?: number): void;\\n\\n    /**\\n      * Returns a section of an array.\\n      * @param start The beginning of the specified portion of the array.\\n      * @param end The end of the specified portion of the array.\\n      */\\n    slice(start?: number, end?: number): Float64Array;\\n\\n    /**\\n      * Determines whether the specified callback function returns true for any element of an array.\\n      * @param callbackfn A function that accepts up to three arguments. The some method calls the\\n      * callbackfn function for each element in array1 until the callbackfn returns true, or until\\n      * the end of the array.\\n      * @param thisArg An object to which the this keyword can refer in the callbackfn function.\\n      * If thisArg is omitted, undefined is used as the this value.\\n      */\\n    some(callbackfn: (value: number, index: number, array: Float64Array) => boolean, thisArg?: any): boolean;\\n\\n    /**\\n      * Sorts an array.\\n      * @param compareFn The name of the function used to determine the order of the elements. If\\n      * omitted, the elements are sorted in ascending, ASCII character order.\\n      */\\n    sort(compareFn?: (a: number, b: number) => number): this;\\n\\n    /**\\n      * Gets a new Float64Array view of the ArrayBuffer store for this array, referencing the elements\\n      * at begin, inclusive, up to end, exclusive.\\n      * @param begin The index of the beginning of the array.\\n      * @param end The index of the end of the array.\\n      */\\n    subarray(begin: number, end?: number): Float64Array;\\n\\n    /**\\n      * Converts a number to a string by using the current locale.\\n      */\\n    toLocaleString(): string;\\n\\n    /**\\n      * Returns a string representation of an array.\\n      */\\n    toString(): string;\\n\\n    [index: number]: number;\\n}\\n\\ninterface Float64ArrayConstructor {\\n    readonly prototype: Float64Array;\\n    new(length: number): Float64Array;\\n    new(arrayOrArrayBuffer: ArrayLike<number> | ArrayBufferLike): Float64Array;\\n    new(buffer: ArrayBufferLike, byteOffset: number, length?: number): Float64Array;\\n\\n    /**\\n      * The size in bytes of each element in the array.\\n      */\\n    readonly BYTES_PER_ELEMENT: number;\\n\\n    /**\\n      * Returns a new array from a set of elements.\\n      * @param items A set of elements to include in the new array object.\\n      */\\n    of(...items: number[]): Float64Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      */\\n    from(arrayLike: ArrayLike<number>): Float64Array;\\n\\n    /**\\n      * Creates an array from an array-like or iterable object.\\n      * @param arrayLike An array-like or iterable object to convert to an array.\\n      * @param mapfn A mapping function to call on every element of the array.\\n      * @param thisArg Value of 'this' used to invoke the mapfn.\\n      */\\n    from<T>(arrayLike: ArrayLike<T>, mapfn: (v: T, k: number) => number, thisArg?: any): Float64Array;\\n\\n}\\ndeclare var Float64Array: Float64ArrayConstructor;\\n\\n/////////////////////////////\\n/// ECMAScript Internationalization API\\n/////////////////////////////\\n\\ndeclare namespace Intl {\\n    interface CollatorOptions {\\n        usage?: string;\\n        localeMatcher?: string;\\n        numeric?: boolean;\\n        caseFirst?: string;\\n        sensitivity?: string;\\n        ignorePunctuation?: boolean;\\n    }\\n\\n    interface ResolvedCollatorOptions {\\n        locale: string;\\n        usage: string;\\n        sensitivity: string;\\n        ignorePunctuation: boolean;\\n        collation: string;\\n        caseFirst: string;\\n        numeric: boolean;\\n    }\\n\\n    interface Collator {\\n        compare(x: string, y: string): number;\\n        resolvedOptions(): ResolvedCollatorOptions;\\n    }\\n    var Collator: {\\n        new(locales?: string | string[], options?: CollatorOptions): Collator;\\n        (locales?: string | string[], options?: CollatorOptions): Collator;\\n        supportedLocalesOf(locales: string | string[], options?: CollatorOptions): string[];\\n    };\\n\\n    interface NumberFormatOptions {\\n        localeMatcher?: string;\\n        style?: string;\\n        currency?: string;\\n        currencyDisplay?: string;\\n        useGrouping?: boolean;\\n        minimumIntegerDigits?: number;\\n        minimumFractionDigits?: number;\\n        maximumFractionDigits?: number;\\n        minimumSignificantDigits?: number;\\n        maximumSignificantDigits?: number;\\n    }\\n\\n    interface ResolvedNumberFormatOptions {\\n        locale: string;\\n        numberingSystem: string;\\n        style: string;\\n        currency?: string;\\n        currencyDisplay?: string;\\n        minimumIntegerDigits: number;\\n        minimumFractionDigits: number;\\n        maximumFractionDigits: number;\\n        minimumSignificantDigits?: number;\\n        maximumSignificantDigits?: number;\\n        useGrouping: boolean;\\n    }\\n\\n    interface NumberFormat {\\n        format(value: number): string;\\n        resolvedOptions(): ResolvedNumberFormatOptions;\\n    }\\n    var NumberFormat: {\\n        new(locales?: string | string[], options?: NumberFormatOptions): NumberFormat;\\n        (locales?: string | string[], options?: NumberFormatOptions): NumberFormat;\\n        supportedLocalesOf(locales: string | string[], options?: NumberFormatOptions): string[];\\n    };\\n\\n    interface DateTimeFormatOptions {\\n        localeMatcher?: string;\\n        weekday?: string;\\n        era?: string;\\n        year?: string;\\n        month?: string;\\n        day?: string;\\n        hour?: string;\\n        minute?: string;\\n        second?: string;\\n        timeZoneName?: string;\\n        formatMatcher?: string;\\n        hour12?: boolean;\\n        timeZone?: string;\\n    }\\n\\n    interface ResolvedDateTimeFormatOptions {\\n        locale: string;\\n        calendar: string;\\n        numberingSystem: string;\\n        timeZone: string;\\n        hour12?: boolean;\\n        weekday?: string;\\n        era?: string;\\n        year?: string;\\n        month?: string;\\n        day?: string;\\n        hour?: string;\\n        minute?: string;\\n        second?: string;\\n        timeZoneName?: string;\\n    }\\n\\n    interface DateTimeFormat {\\n        format(date?: Date | number): string;\\n        resolvedOptions(): ResolvedDateTimeFormatOptions;\\n    }\\n    var DateTimeFormat: {\\n        new(locales?: string | string[], options?: DateTimeFormatOptions): DateTimeFormat;\\n        (locales?: string | string[], options?: DateTimeFormatOptions): DateTimeFormat;\\n        supportedLocalesOf(locales: string | string[], options?: DateTimeFormatOptions): string[];\\n    };\\n}\\n\\ninterface String {\\n    /**\\n      * Determines whether two strings are equivalent in the current or specified locale.\\n      * @param that String to compare to target string\\n      * @param locales A locale string or array of locale strings that contain one or more language or locale tags. If you include more than one locale string, list them in descending order of priority so that the first entry is the preferred locale. If you omit this parameter, the default locale of the JavaScript runtime is used. This parameter must conform to BCP 47 standards; see the Intl.Collator object for details.\\n      * @param options An object that contains one or more properties that specify comparison options. see the Intl.Collator object for details.\\n      */\\n    localeCompare(that: string, locales?: string | string[], options?: Intl.CollatorOptions): number;\\n}\\n\\ninterface Number {\\n    /**\\n      * Converts a number to a string by using the current or specified locale.\\n      * @param locales A locale string or array of locale strings that contain one or more language or locale tags. If you include more than one locale string, list them in descending order of priority so that the first entry is the preferred locale. If you omit this parameter, the default locale of the JavaScript runtime is used.\\n      * @param options An object that contains one or more properties that specify comparison options.\\n      */\\n    toLocaleString(locales?: string | string[], options?: Intl.NumberFormatOptions): string;\\n}\\n\\ninterface Date {\\n    /**\\n      * Converts a date and time to a string by using the current or specified locale.\\n      * @param locales A locale string or array of locale strings that contain one or more language or locale tags. If you include more than one locale string, list them in descending order of priority so that the first entry is the preferred locale. If you omit this parameter, the default locale of the JavaScript runtime is used.\\n      * @param options An object that contains one or more properties that specify comparison options.\\n      */\\n    toLocaleString(locales?: string | string[], options?: Intl.DateTimeFormatOptions): string;\\n    /**\\n      * Converts a date to a string by using the current or specified locale.\\n      * @param locales A locale string or array of locale strings that contain one or more language or locale tags. If you include more than one locale string, list them in descending order of priority so that the first entry is the preferred locale. If you omit this parameter, the default locale of the JavaScript runtime is used.\\n      * @param options An object that contains one or more properties that specify comparison options.\\n      */\\n    toLocaleDateString(locales?: string | string[], options?: Intl.DateTimeFormatOptions): string;\\n\\n    /**\\n      * Converts a time to a string by using the current or specified locale.\\n      * @param locales A locale string or array of locale strings that contain one or more language or locale tags. If you include more than one locale string, list them in descending order of priority so that the first entry is the preferred locale. If you omit this parameter, the default locale of the JavaScript runtime is used.\\n      * @param options An object that contains one or more properties that specify comparison options.\\n      */\\n    toLocaleTimeString(locales?: string | string[], options?: Intl.DateTimeFormatOptions): string;\\n}\\n\";\n\nconst lib_es2015_dts = `/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n${lib_es5_dts}${lib_es2015_core_dts}${lib_es2015_collection_dts}${lib_es2015_iterable_dts}${lib_es2015_proxy_dts}${lib_es2015_reflect_dts}${lib_es2015_symbol_dts}${lib_es2015_symbol_wellknown_dts}`;\n\nexport const lib_es6_dts = `/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation. All rights reserved. \\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\\nthis file except in compliance with the License. You may obtain a copy of the\\nLicense at http://www.apache.org/licenses/LICENSE-2.0  \\n \\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, \\nMERCHANTABLITY OR NON-INFRINGEMENT. \\n \\nSee the Apache Version 2.0 License for specific language governing permissions\\nand limitations under the License.\\n***************************************************************************** */\\n\\n\\n\\n/// <reference no-default-lib=\"true\"/>\\n\\n${lib_es2015_dts}\\n\\n${lib_logger}`;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nexport const DEPRECATED__ros_lib_filename = \"DEPRECATED__ros/index.d.ts\";\nexport const DEPRECATED__ros_lib_dts = `\nexport declare type RGBA = { // all values are scaled between 0-1 instead of 0-255\n  r: number,\n  g: number,\n  b: number,\n  a: number // opacity -- typically you should set this to 1.\n};\n\nexport declare type Time = {\n  sec: number,\n  nsec: number\n}\n\nexport declare type Message<T> = {\n  topic: string,\n  datatype: string,\n  op: \"message\",\n  receiveTime: Time,\n  message: T,\n}\n\nexport declare type Header = {\n  frame_id: string,\n  stamp: Time,\n};\n\nexport declare type Point = {\n  x: number,\n  y: number,\n  z: number\n};\n\nexport declare type Scale = {\n  x: number,\n  y: number,\n  z: number\n};\n\nexport declare type Orientation = {\n  x: number,\n  y: number,\n  z: number,\n  w: number\n};\n\nexport declare type Pose = {\n  position: Point,\n  orientation: Orientation\n};\n\n/**\n * For publishing markers, every other marker is built up on this base type.\n * The 'id' property has to be unique, as duplicate ids will cause markers to\n * be overwritten. The 'ns' property corresponds to namespace under which your\n * marker is published. In most cases, you will just want to set the 'action'\n * property to '0'.\n  */\nexport declare type BaseMarker = {\n  header: Header,\n  ns: string, // namespace that your marker is published under.\n  id: string | number, // IMPORTANT: Needs to be unique. Duplicate ids will overwrite other markers.\n  action: 0 | 1 | 2 | 3, // In most cases, you will want to use '0' here.\n  pose: Pose,\n  scale: Scale,\n  color?: RGBA,\n  customMetadata?: { [key: string]: any }\n};\n\n/**\n * When publishing markers with a 'points' array, the 'color' field takes 1 RGBA object to apply to all points,\n * while the 'colors' field takes in an array of RGBA objects to apply to each point. When both are present,\n * the 'colors' field overrides the 'color' field.\n  */\nexport declare type MultiPointMarker = BaseMarker & {\n  points: Point[]\n  colors?: RGBA[]\n};\n\n/**\n * When publishing markers with a 'points' array, the 'color' field takes 1 RGBA object to apply to all points,\n * while the 'colors' field takes in an array of RGBA objects to apply to each point. When both are present,\n * the 'colors' field overrides the 'color' field.\n  */\nexport declare type ArrowMarker = BaseMarker & {\n  type: 0,\n  points?: Point[],\n  size?: ArrowSize,\n}\n\nexport declare type ArrowSize = {\n  shaftWidth: number,\n  headLength: number,\n  headWidth: number\n};\n\nexport declare type CubeMarker = BaseMarker & {\n  type: 1\n};\n\nexport declare type CubeListMarker = MultiPointMarker & {\n  type: 6\n};\n\nexport declare type SphereMarker = BaseMarker & {\n  type: 2\n};\n\nexport declare type SphereListMarker = MultiPointMarker & {\n  type: 7\n};\n\nexport declare type CylinderMarker = BaseMarker & {\n  type: 3\n};\n\nexport declare type LineStripMarker = MultiPointMarker & {\n  type: 4\n};\n\nexport declare type LineListMarker = MultiPointMarker & {\n  type: 5\n};\n\nexport declare type PointsMarker = MultiPointMarker & {\n  type: 8\n};\n\nexport declare type TextMarker = BaseMarker & {\n  type: 9,\n  text: string\n};\n\nexport declare type TriangleListMarker = MultiPointMarker & {\n  type: 11\n};\n\nexport declare type MeshMarker = MultiPointMarker & {\n  type: 10\n};\n\nexport declare type FilledPolygonMarker = MultiPointMarker & {\n  type: 107\n};\n`;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport pointClouds from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/pointClouds.ts\";\nimport readers from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/readers.ts\";\nimport time from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/time.ts\";\nimport types from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/types.ts\";\nimport vectors from \"webviz-core/src/players/UserNodePlayer/nodeTransformerWorker/typescript/userUtils/vectors.ts\";\n\nexport default [\n  { fileName: \"pointClouds.ts\", sourceCode: pointClouds },\n  { fileName: \"readers.ts\", sourceCode: readers },\n  { fileName: \"time.ts\", sourceCode: time },\n  { fileName: \"types.ts\", sourceCode: types },\n  { fileName: \"vectors.ts\", sourceCode: vectors },\n];\n","module.exports = \"import { RGBA, Point, Transform } from \\\"./types\\\";\\nimport { rotate } from \\\"./vectors\\\";\\n\\nexport function norm({ x, y, z }: Point) {\\n  return Math.sqrt(x * x + y * y + z * z);\\n}\\n\\nexport function setRayDistance(pt: Point, distance: number) {\\n  const { x, y, z } = pt;\\n  const scale = distance / norm(pt);\\n  return {\\n    x: x * scale,\\n    y: y * scale,\\n    z: z * scale,\\n  };\\n}\\n\\nexport function convertToRangeView(points: Point[], range: number, makeColors: boolean) {\\n  let colors: RGBA[] = makeColors ? new Array(points.length) : [];\\n  // First pass to get min and max ranges\\n  // TODO: Could be more efficient and extract this during\\n  // transforms for free\\n  let maxRange = Number.MIN_VALUE;\\n  if (makeColors) {\\n    for (let i = 0; i < points.length; ++i) {\\n      maxRange = Math.max(maxRange, norm(points[i]));\\n    }\\n  }\\n  // actually move the points and generate colors if specified\\n  for (let i = 0; i < points.length; ++i) {\\n    const pt = points[i];\\n    if (makeColors) {\\n      const dist = norm(pt);\\n      if (dist <= range) {\\n        // don't go all the way to white\\n        const extent = 0.8;\\n        // closest to target range is lightest,\\n        // closest to AV is darkest\\n        const other = (extent * dist) / range;\\n        colors[i] = { r: 1, g: other, b: other, a: 1 };\\n      } else {\\n        // don't go all the way to white\\n        const extent = 0.8;\\n        // closest to target range is lightest,\\n        // closest to max range is darkest\\n        const upper = maxRange - range;\\n        const other = extent * (1.0 - dist / upper);\\n        colors[i] = { r: other, g: other, b: 1, a: 1 };\\n      }\\n    }\\n    points[i] = setRayDistance(pt, range);\\n  }\\n  return colors;\\n}\\n\\n/*\\n * Only returns point clouds that differ. `cloud1` is colored in blue, and\\n * `cloud2` is colored in red.\\n */\\nexport function diffPoints(\\n  cloud1: Point[],\\n  cloud2: Point[]\\n): {\\n  points: Point[];\\n  colors: RGBA[];\\n} {\\n  // TODO: This hash can have collisions, need a better one\\n  const hash = (p: Point) => p.x + p.y + p.z;\\n\\n  const colorOnlyCloud1 = {\\n    r: 0,\\n    g: 0,\\n    b: 1,\\n    a: 1,\\n  };\\n  const colorOnlyCloud2 = {\\n    r: 1,\\n    g: 0,\\n    b: 0,\\n    a: 1,\\n  };\\n\\n  const points: Point[] = [];\\n  const colors: RGBA[] = [];\\n\\n  const map = new Map();\\n  for (let i = 0; i < cloud1.length; ++i) {\\n    const h = hash(cloud1[i]);\\n    map.set(h, cloud1[i]);\\n  }\\n\\n  for (let i = 0; i < cloud2.length; ++i) {\\n    const h = hash(cloud2[i]);\\n    if (map.has(h)) {\\n      map.delete(h);\\n    } else {\\n      // Point in Cloud2, not Cloud1\\n      points.push(cloud2[i]);\\n      colors.push(colorOnlyCloud2);\\n    }\\n  }\\n\\n  // All remaining points in map are points\\n  // that are in Cloud1, not Cloud2\\n  map.forEach((val) => {\\n    points.push(val);\\n    colors.push(colorOnlyCloud1);\\n  });\\n\\n  return { points: points, colors: colors };\\n}\\n\\nexport function transformPoint(transform: Transform, point: Point) {\\n  const translation = transform.transform.translation;\\n  const rotation = transform.transform.rotation;\\n  let pt = { ...point };\\n  pt.x -= translation.x;\\n  pt.y -= translation.y;\\n  pt.z -= translation.z;\\n  pt = rotate(rotation, pt);\\n  return pt;\\n}\\n\\nexport function transformPoints(transform: Transform, points: Point[]): Point[] {\\n  return points.map((point) => transformPoint(transform, point));\\n}\\n\"","module.exports = \"export interface FieldReader {\\n  read(data: number[], index: number): number;\\n}\\n\\nexport class Float32Reader implements FieldReader {\\n  offset: number;\\n  view: DataView;\\n  constructor(offset: number) {\\n    this.offset = offset;\\n    const buffer = new ArrayBuffer(4);\\n    this.view = new DataView(buffer);\\n  }\\n\\n  read(data: number[], index: number): number {\\n    this.view.setUint8(0, data[index + this.offset]);\\n    this.view.setUint8(1, data[index + this.offset + 1]);\\n    this.view.setUint8(2, data[index + this.offset + 2]);\\n    this.view.setUint8(3, data[index + this.offset + 3]);\\n    return this.view.getFloat32(0, true);\\n  }\\n}\\n\\nexport class Int32Reader implements FieldReader {\\n  offset: number;\\n  view: DataView;\\n  constructor(offset: number) {\\n    this.offset = offset;\\n    const buffer = new ArrayBuffer(4);\\n    this.view = new DataView(buffer);\\n  }\\n\\n  read(data: number[], index: number): number {\\n    this.view.setUint8(0, data[index + this.offset]);\\n    this.view.setUint8(1, data[index + this.offset + 1]);\\n    this.view.setUint8(2, data[index + this.offset + 2]);\\n    this.view.setUint8(3, data[index + this.offset + 3]);\\n    return this.view.getInt32(0, true);\\n  }\\n}\\n\\nexport class Uint16Reader implements FieldReader {\\n  offset: number;\\n  view: DataView;\\n  constructor(offset: number) {\\n    this.offset = offset;\\n    const buffer = new ArrayBuffer(2);\\n    this.view = new DataView(buffer);\\n  }\\n\\n  read(data: number[], index: number): number {\\n    this.view.setUint8(0, data[index + this.offset]);\\n    this.view.setUint8(1, data[index + this.offset + 1]);\\n    return this.view.getUint16(0, true);\\n  }\\n}\\n\\nexport class Uint8Reader implements FieldReader {\\n  offset: number;\\n  constructor(offset: number) {\\n    this.offset = offset;\\n  }\\n\\n  read(data: number[], index: number): number {\\n    return data[index + this.offset];\\n  }\\n}\\n\"","module.exports = \"import { Time } from \\\"./types\\\";\\n\\n/*\\n * Checks ROS-time equality.\\n */\\nexport const areSame = (t1: Time, t2: Time) => t1.sec === t2.sec && t1.nsec === t2.nsec;\\n\\n/*\\n * Compare two times, returning a negative value if the right is greater or a\\n * positive value if the left is greater or 0 if the times are equal useful to\\n * supply to Array.prototype.sort\\n */\\nexport const compare = (left: Time, right: Time) => {\\n  const secDiff = left.sec - right.sec;\\n  return secDiff || left.nsec - right.nsec;\\n};\\n\\nconst fixTime = (t: Time): Time => {\\n  // Equivalent to fromNanoSec(toNanoSec(t)), but no chance of precision loss.\\n  // nsec should be non-negative, and less than 1e9.\\n  let { sec, nsec } = t;\\n  while (nsec > 1e9) {\\n    nsec -= 1e9;\\n    sec += 1;\\n  }\\n  while (nsec < 0) {\\n    nsec += 1e9;\\n    sec -= 1;\\n  }\\n  return { sec, nsec };\\n};\\n\\nexport const subtractTimes = ({ sec: sec1, nsec: nsec1 }: Time, { sec: sec2, nsec: nsec2 }: Time): Time => {\\n  return fixTime({ sec: sec1 - sec2, nsec: nsec1 - nsec2 });\\n};\\n\"","module.exports = \"export type RGBA = {\\n  // all values are scaled between 0-1 instead of 0-255\\n  r: number;\\n  g: number;\\n  b: number;\\n  a: number; // opacity -- typically you should set this to 1.\\n};\\n\\nexport type Header = {\\n  frame_id: string;\\n  stamp: Time;\\n};\\n\\nexport type Point = {\\n  x: number;\\n  y: number;\\n  z: number;\\n};\\n\\nexport type Time = {\\n  sec: number;\\n  nsec: number;\\n};\\n\\nexport type Translation = {\\n  x: number;\\n  y: number;\\n  z: number;\\n};\\nexport type Rotation = {\\n  x: number;\\n  y: number;\\n  z: number;\\n  w: number;\\n};\\n\\nexport type Transform = {\\n  header: Header;\\n  child_frame_id: string;\\n  transform: {\\n    translation: Translation;\\n    rotation: Rotation;\\n  };\\n};\\n\\nexport type TwoDimensionalPlotLine = {\\n  order?: number;\\n  label: string;\\n  backgroundColor?: string;\\n  borderColor?: string;\\n  borderDash?: string;\\n  borderWidth?: number;\\n  pointBackgroundColor?: string;\\n  pointBorderColor?: string;\\n  pointBorderWidth?: number;\\n  pointRadius?: number;\\n  pointStyle?: string;\\n  data: { x: number; y: number }[];\\n};\\n/*\\n * Use this type to plot values in the 2D Panel. If you need to change this\\n * type, please ensure that is kept in sync with the TwoDimensionalPlot\\n * counterpart.\\n */\\nexport type TwoDimensionalPlot = {\\n  lines: TwoDimensionalPlotLine[];\\n  points: TwoDimensionalPlotLine[];\\n  polygons: TwoDimensionalPlotLine[];\\n  title?: string;\\n  yAxisLabel?: string;\\n  xAxisLabel?: string;\\n};\\n\"","module.exports = \"import { Point, Rotation } from \\\"./types\\\";\\n\\ntype vec3 = [number, number, number];\\n\\n/*\\n * Dot-product of two vectors.\\n */\\nexport function dot(vec1: number[], vec2: number[]) {\\n  let i;\\n  let ret: number = 0.0;\\n  for (i = 0; i < vec1.length; ++i) {\\n    ret += vec1[i] * vec2[i];\\n  }\\n  return ret;\\n}\\n\\n/*\\n * Cross-product of two vectors.\\n */\\nexport function cross(vec1: vec3, vec2: vec3) {\\n  const [ax, ay, az] = vec1;\\n  const [bx, by, bz] = vec2;\\n  let ret = [ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx];\\n  return ret;\\n}\\n\\n/*\\n * Performs a rotation transformation on a point.\\n */\\nexport function rotate(rotation: Rotation, point: Point) {\\n  const v: vec3 = [point.x, point.y, point.z];\\n\\n  // Extract the vector part of the quaternion\\n  const u: vec3 = [rotation.x, rotation.y, rotation.z];\\n\\n  // Extract the scalar part of the quaternion\\n  const s = -1 * rotation.w;\\n\\n  // Do the math\\n  const t1 = scalarMultiply(u, 2.0 * dot(u, v));\\n  const t2 = scalarMultiply(v, s * s - dot(u, u));\\n  const t3 = scalarMultiply(cross(u, v), 2 * s);\\n  const d = vectorAddition([t1, t2, t3]);\\n\\n  return {\\n    x: d[0],\\n    y: d[1],\\n    z: d[2],\\n  };\\n}\\n\\n/*\\n * Scales a vector.\\n */\\nexport function scalarMultiply(vector: number[], scalar: number) {\\n  const ret = vector.slice();\\n  let i;\\n  for (i = 0; i < ret.length; ++i) {\\n    ret[i] *= scalar;\\n  }\\n  return ret;\\n}\\n\\n/*\\n * Sums an array of vectors.\\n */\\nexport function vectorAddition(vectors: number[][]): number[] {\\n  let i;\\n  let ret = vectors[0].slice();\\n  for (i = 1; i < vectors.length; ++i) {\\n    let j;\\n    for (j = 0; j < ret.length; ++j) {\\n      ret[j] += vectors[i][j];\\n    }\\n  }\\n  return ret;\\n}\\n\"","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport twoDimensionalPlot from \"./twoDimensionalPlot.template.ts\";\n\nexport default [{ name: \"2D Plot\", description: \"Quickly create 2D Plot topics\", template: twoDimensionalPlot }];\n","module.exports = \"import { Input, Messages } from \\\"ros\\\";\\nimport { TwoDimensionalPlot, TwoDimensionalPlotLine } from \\\"./types\\\";\\n\\nexport const inputs = [];\\nexport const output = \\\"/webviz_node/\\\";\\n\\n// Populate 'Input' with a parameter to properly type your inputs, e.g. 'Input<\\\"/your_input_topic\\\">'\\nconst publisher = (message: Input<>): TwoDimensionalPlot => {\\n  const lines: TwoDimensionalPlotLine[] = [];\\n  const points: TwoDimensionalPlotLine[] = [];\\n  const polygons: TwoDimensionalPlotLine[] = [];\\n\\n  return {\\n    lines,\\n    points,\\n    polygons,\\n  };\\n};\\n\\nexport default publisher;\\n\"","module.exports = \"# Node Playground Utilities\\n\\nThis directory includes a number of utility functions that can be used in any node playground. You can import them into your node like this:\\n\\n```typescript\\nimport { compare } from \\\"./time.ts\\\"\\n```\\n\\n## Contributing\\n\\n_Prequisites: You will need to have the Webviz repo cloned locally to update these utilities. You just need to have node and yarn installed to get going though, follow those steps in the `developer-guide.md`._\\n\\n### TL;DR\\n\\n- Update utility\\n- Add unit testing and a structured comment (as needed)\\n- Run `yarn run test:user-utilities` (checks compilation and runs tests)\\n- Open PR for Webviz review\\n\\nIf you'd like to add any reusable utilities, simply add (or tweak) the relevant file with the function/class/constant you'd like to expose! Make sure to mark your variable declaration with the `export` keyword so that it will be importable from other modules.\\n\\nIf one of the filenames is not to your liking, or you'd like to add a new one, just make sure to keep the `*.ts` extension and keep the directory flat (i.e. not nested folders). You will also need to import the file in `userUtils/index.js` and add an entry that mimics the format present in other imports.\\n\\nFor adding new functions and what not, also be sure to add a short description of what it is used for using the multiline comment syntax:\\n\\n```typescript\\n/*\\n* YOUR COMMENT\\n*/\\n```\\n\\nThis structure will ensure your modules get coupled with inline documentation.\\n\\nWe also have unit testing available for these modules! Please add releveant unit tests for all new/amended code, it'll help us keep the bar high for our consumers.\\n\\nThen open up a PR in the webviz repo and post in the webviz channel. We'll make sure a team member looks at it in a timely manner! :)\\n\\n### FAQ\\n\\n> Can I use third-party packages?\\n\\nNot at the moment, but please let us know if that would be useful for you! Be sure to specify which package(s) you would like and why you want them.\\n\\n> Can I use other Webviz code here?\\n\\nWebviz has many utilities that you are free to copy and paste into this directory, as long as you also provide relevant unit testing. Keep in mind the rest of Webviz is written in Flow, which, while very similar to Typescript, has a few discrepancies. Feel free to reach out to the Webviz team if you're having any trouble with this!\\n\\n> Are these utilities versioned?\\n\\nNot currently. We would like to get around to this eventually, but wanted to harden this feature first.\\n\"","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport _ from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport styled from \"styled-components\";\n\nimport helpContent from \"./index.help.md\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport type { SaveConfig } from \"webviz-core/src/types/panels\";\n\nconst STextArea = styled.textarea`\n  width: 100%;\n  height: 100%;\n  resize: none;\n  border: none;\n  margin: 0;\n  padding: 4px 6px;\n  &:focus {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\ntype Config = { noteText: string };\ntype Props = { config: Config, saveConfig: SaveConfig<Config> };\nfunction Note({ config, saveConfig }: Props) {\n  const onChangeText = useCallback(\n    (event: SyntheticInputEvent<HTMLTextAreaElement>) => {\n      saveConfig({ noteText: event.target.value });\n    },\n    [saveConfig]\n  );\n\n  return (\n    <Flex col style={{ height: \"100%\" }}>\n      <PanelToolbar helpContent={helpContent} floating />\n      <STextArea placeholder=\"Enter note here\" value={config.noteText} onChange={onChangeText} />\n    </Flex>\n  );\n}\nNote.panelType = \"Note\";\nNote.defaultConfig = { noteText: \"\" };\n\nexport default hot(Panel<Config>(Note));\n","module.exports = \"# Note Panel\\n\\nProvides a place for you to write and save your notes.\\n\"","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport Flex from \"webviz-core/src/components/Flex\";\nimport MessageHistoryDEPRECATED from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport { type MessagePipelineContext, useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport inScreenshotTests from \"webviz-core/src/stories/inScreenshotTests\";\n\n// Little dummy panel that just shows the number of renders that happen when not subscribing\n// to anything. Useful for debugging performance issues.\nlet panelRenderCount = 0;\nlet messageHistoryRenderCount = 0;\nlet useMessageReducerRenderCount = 0;\nlet messagePipelineRenderCount = 0;\n\nwindow.getNumberOfRendersCountsForTests = function() {\n  return {\n    panelRenderCount,\n    messageHistoryRenderCount,\n    useMessageReducerRenderCount,\n    messagePipelineRenderCount,\n  };\n};\n\nfunction HooksComponent() {\n  PanelAPI.useMessageReducer({\n    topics: [],\n    restore: React.useCallback(() => null, []),\n    addMessage: React.useCallback(() => null, []),\n  });\n  return `useMessageReducerRenderCount: ${++useMessageReducerRenderCount}`;\n}\n\nfunction MessagePipelineRendersComponent() {\n  // This is a private API, so panels should not be using it, but it's still bad if it renders too\n  // much. And in practice there might still be some panels that use it directly. :-(\n  useMessagePipeline<MessagePipelineContext>((context: MessagePipelineContext) => context);\n  return `messagePipelineRenderCount: ${++messagePipelineRenderCount}`;\n}\n\nfunction NumberOfRenders(): React.Node {\n  panelRenderCount++;\n  return (\n    <Flex col>\n      <PanelToolbar />\n      <Flex row center style={{ fontSize: 20, lineHeight: 1.5, textAlign: \"center\" }}>\n        <MessageHistoryDEPRECATED paths={[]}>\n          {() => (\n            <>\n              panelRenderCount: {panelRenderCount} <br />\n              messageHistoryRenderCount: {++messageHistoryRenderCount}\n            </>\n          )}\n        </MessageHistoryDEPRECATED>\n        <br />\n        <HooksComponent />\n        <br />\n        {!inScreenshotTests() && <MessagePipelineRendersComponent /> // Too flakey for screenshots.\n        }\n      </Flex>\n    </Flex>\n  );\n}\n\nNumberOfRenders.panelType = \"NumberOfRenders\";\nNumberOfRenders.defaultConfig = {};\n\nexport default hot(Panel<{}>(NumberOfRenders));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { last, sumBy } from \"lodash\";\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport Flex from \"webviz-core/src/components/Flex\";\nimport { useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport { Sparkline, type SparklinePoint } from \"webviz-core/src/components/Sparkline\";\nimport type { PlayerStateActiveData } from \"webviz-core/src/players/types\";\nimport { subtractTimes, toSec } from \"webviz-core/src/util/time\";\n\nconst TIME_RANGE = 5000;\n\ntype PlaybackPerformanceItemProps = {|\n  points: SparklinePoint[],\n  maximum: number,\n  decimalPlaces: number,\n  children: React.Node,\n|};\n\nfunction PlaybackPerformanceItem(props: PlaybackPerformanceItemProps): React.Node {\n  return (\n    <div style={{ margin: 8 }}>\n      <Sparkline points={props.points} maximum={props.maximum} width={100} height={30} timeRange={TIME_RANGE} />\n      <div style={{ display: \"inline-block\", marginLeft: 12, verticalAlign: \"middle\" }}>\n        {(last(props.points) || { value: 0 }).value.toFixed(props.decimalPlaces)}\n        {props.children}\n        <div style={{ color: \"#aaa\" }}>\n          {(sumBy(props.points, \"value\") / props.points.length).toFixed(props.decimalPlaces)} avg\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction PlaybackPerformance(): React.Node {\n  const timestamp = Date.now();\n  const activeData = useMessagePipeline(React.useCallback(({ playerState }) => playerState.activeData, []));\n  const playbackInfo = React.useRef<?{| timestamp: number, activeData: PlayerStateActiveData |}>();\n  const lastPlaybackInfo = playbackInfo.current;\n  if (activeData && (!playbackInfo.current || playbackInfo.current.activeData !== activeData)) {\n    playbackInfo.current = { timestamp: Date.now(), activeData };\n  }\n\n  const perfPoints = React.useRef<{|\n    speed: SparklinePoint[],\n    framerate: SparklinePoint[],\n    bagTimeMs: SparklinePoint[],\n  |}>({\n    speed: [],\n    framerate: [],\n    bagTimeMs: [],\n  });\n\n  if (\n    activeData &&\n    playbackInfo.current &&\n    lastPlaybackInfo &&\n    lastPlaybackInfo.activeData !== activeData &&\n    lastPlaybackInfo.activeData.isPlaying &&\n    activeData.isPlaying &&\n    lastPlaybackInfo.activeData.lastSeekTime === activeData.lastSeekTime &&\n    lastPlaybackInfo.activeData.currentTime !== activeData.currentTime\n  ) {\n    const renderTimeMs = Date.now() - lastPlaybackInfo.timestamp;\n    const bagTimeMs = toSec(subtractTimes(activeData.currentTime, lastPlaybackInfo.activeData.currentTime)) * 1000;\n    perfPoints.current.speed.push({ value: bagTimeMs / renderTimeMs, timestamp });\n    perfPoints.current.framerate.push({ value: 1000 / renderTimeMs, timestamp });\n    perfPoints.current.bagTimeMs.push({ value: bagTimeMs, timestamp });\n    for (const name in perfPoints.current) {\n      const points = perfPoints.current[name];\n      while (points[0] && points[0].timestamp < timestamp - TIME_RANGE) {\n        points.shift();\n      }\n    }\n  }\n\n  return (\n    <Flex col>\n      <PanelToolbar floating />\n      <Flex col wrap center start style={{ lineHeight: 1, whiteSpace: \"nowrap\" }}>\n        <PlaybackPerformanceItem points={perfPoints.current.speed} maximum={1.6} decimalPlaces={2}>\n          &times; realtime\n        </PlaybackPerformanceItem>\n        <PlaybackPerformanceItem points={perfPoints.current.framerate} maximum={30} decimalPlaces={1}>\n          fps\n        </PlaybackPerformanceItem>\n        <PlaybackPerformanceItem points={perfPoints.current.bagTimeMs} maximum={300} decimalPlaces={0}>\n          ms bag frame\n        </PlaybackPerformanceItem>\n      </Flex>\n    </Flex>\n  );\n}\n\nPlaybackPerformance.panelType = \"PlaybackPerformance\";\nPlaybackPerformance.defaultConfig = {};\n\nexport default hot(Panel<{}>(PlaybackPerformance));\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { max } from \"lodash\";\nimport * as React from \"react\";\n\nimport AutoSizingCanvas from \"webviz-core/src/components/AutoSizingCanvas\";\n\nexport type SparklinePoint = {| value: number, timestamp: number |};\n\ntype SparklineProps = {|\n  points: SparklinePoint[],\n  width: number,\n  height: number,\n  timeRange: number,\n  maximum?: number,\n  nowStamp?: number, // Mostly for testing.\n|};\n\nfunction draw(\n  points: SparklinePoint[],\n  maximum: number,\n  timeRange: number,\n  nowStamp: number,\n  context: CanvasRenderingContext2D,\n  width: number,\n  height: number\n) {\n  const maxValue = Math.max(maximum, max(points.map(({ value }) => value)));\n  context.clearRect(0, 0, width, height);\n  context.beginPath();\n  context.strokeStyle = \"white\";\n  let first = true;\n  for (const { value, timestamp } of points) {\n    const x = ((timeRange + timestamp - nowStamp) / timeRange) * width;\n    const y = (1 - value / maxValue) * height;\n    if (first) {\n      context.moveTo(x, y);\n      first = false;\n    } else {\n      context.lineTo(x, y);\n    }\n  }\n  context.stroke();\n}\n\nexport function Sparkline(props: SparklineProps) {\n  return (\n    <div\n      style={{\n        display: \"inline-block\",\n        verticalAlign: \"-10px\",\n        backgroundColor: \"#333\",\n        width: props.width,\n        height: props.height,\n      }}>\n      <AutoSizingCanvas\n        draw={(context: CanvasRenderingContext2D, width: number, height: number) => {\n          draw(props.points, props.maximum || 0, props.timeRange, props.nowStamp || Date.now(), context, width, height);\n        }}\n      />\n    </div>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport styled from \"styled-components\";\n\nimport buildSampleMessage from \"./buildSampleMessage\";\nimport { PanelToolbarInput, PanelToolbarLabel } from \"webviz-core/shared/panelToolbarStyles\";\nimport Autocomplete from \"webviz-core/src/components/Autocomplete\";\nimport Button from \"webviz-core/src/components/Button\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Item from \"webviz-core/src/components/Menu/Item\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport Publisher from \"webviz-core/src/components/Publisher\";\nimport { PlayerCapabilities, type Topic } from \"webviz-core/src/players/types\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport type { RosDatatypes } from \"webviz-core/src/types/RosDatatypes\";\n\ntype Config = {|\n  topicName: string,\n  datatype: string,\n  buttonText: string,\n  buttonTooltip: string,\n  buttonColor: string,\n  advancedView: boolean,\n  value: string,\n|};\n\ntype Props = {\n  config: Config,\n  saveConfig: ($Shape<Config>) => void,\n\n  // player state\n  capabilities: string[],\n  topics: Topic[],\n  datatypes: RosDatatypes,\n};\n\ntype PanelState = {|\n  cachedProps: $Shape<Props>,\n  datatypeNames: string[],\n  parsedObject: ?any,\n  error: ?string,\n|};\n\nconst STextArea = styled.textarea`\n  width: 100%;\n  height: 100%;\n  resize: none;\n`;\n\nconst STextAreaContainer = styled.div`\n  flex-grow: 1;\n  padding: 12px 0;\n`;\n\nconst SErrorText = styled.div`\n  flex: 1 1 auto;\n  display: flex;\n  align-items: center;\n  padding: 4px;\n  color: ${colors.red};\n`;\n\nconst SSpan = styled.span`\n  opacity: 0.8;\n`;\nconst SRow = styled.div`\n  display: flex;\n  line-height: 24px;\n  flex-shrink: 0;\n`;\n\nfunction getTopicName(topic: Topic): string {\n  return topic.name;\n}\n\nfunction parseInput(value: string): $Shape<PanelState> {\n  let parsedObject;\n  let error = null;\n  try {\n    const parsedAny = JSON.parse(value);\n    if (Array.isArray(parsedAny)) {\n      error = \"Message content must be an object, not an array\";\n    } else if (parsedAny === null) {\n      error = \"Message content must be an object, not null\";\n    } else if (typeof parsedAny !== \"object\") {\n      error = `Message content must be an object, not ‘${typeof parsedAny}’`;\n    } else {\n      parsedObject = parsedAny;\n    }\n  } catch (e) {\n    error = value ? e.message : \"\";\n  }\n  return { error, parsedObject };\n}\n\nclass Publish extends React.PureComponent<Props, PanelState> {\n  static panelType = \"Publish\";\n  static defaultConfig = {\n    topicName: \"\",\n    datatype: \"\",\n    buttonText: \"Publish\",\n    buttonTooltip: \"\",\n    buttonColor: \"#00A871\",\n    advancedView: true,\n    value: \"\",\n  };\n\n  _publisher = React.createRef<Publisher>();\n\n  state = {\n    cachedProps: {},\n    datatypeNames: [],\n    error: null,\n    parsedObject: undefined,\n  };\n\n  static getDerivedStateFromProps(props: Props, state: PanelState) {\n    const newState: $Shape<PanelState> = parseInput(props.config.value);\n    let changed = false;\n\n    if (props !== state.cachedProps) {\n      newState.cachedProps = props;\n      changed = true;\n    }\n\n    if (props.datatypes !== state.cachedProps.datatypes) {\n      newState.datatypeNames = Object.keys(props.datatypes).sort();\n      changed = true;\n    }\n\n    // when the selected datatype changes, replace the textarea contents with a sample message of the correct shape\n    // Make sure not to build a sample message on first load, though -- we don't want to overwrite\n    // the user's message just because state.cachedProps.config hasn't been initialized.\n    if (\n      props.config.datatype &&\n      state.cachedProps?.config?.datatype != null &&\n      props.config.datatype !== state.cachedProps?.config?.datatype &&\n      props.datatypes[props.config.datatype] != null\n    ) {\n      const sampleMessage = buildSampleMessage(props.datatypes, props.config.datatype);\n      if (sampleMessage) {\n        const stringifiedSampleMessage = JSON.stringify(sampleMessage, null, 2);\n        props.saveConfig({ value: stringifiedSampleMessage });\n        changed = true;\n      }\n    }\n\n    return changed ? newState : null;\n  }\n\n  _onChangeTopic = (event, topicName: string) => {\n    this.props.saveConfig({ topicName });\n  };\n\n  // when a known topic is selected, also fill in its datatype\n  _onSelectTopic = (topicName: string, topic: Topic, autocomplete: Autocomplete) => {\n    this.props.saveConfig({ topicName, datatype: topic.datatype });\n    autocomplete.blur();\n  };\n\n  _onSelectDatatype = (datatype: string, value: any, autocomplete: Autocomplete) => {\n    this.props.saveConfig({ datatype });\n    autocomplete.blur();\n  };\n\n  _publish = () => {\n    const { topicName } = this.props.config;\n    const { parsedObject } = this.state;\n    if (topicName && parsedObject && this._publisher.current) {\n      this._publisher.current.publish(parsedObject);\n    } else {\n      throw new Error(`called _publish() when input was invalid`);\n    }\n  };\n\n  _onChange = (event: SyntheticInputEvent<HTMLTextAreaElement>) => {\n    this.props.saveConfig({ value: event.target.value });\n  };\n\n  _renderMenuContent() {\n    const { config, saveConfig } = this.props;\n\n    return (\n      <>\n        <Item\n          icon={config.advancedView ? <CheckboxMarkedIcon /> : <CheckboxBlankOutlineIcon />}\n          onClick={() => {\n            saveConfig({ advancedView: !config.advancedView });\n          }}>\n          <span>Advanced mode</span>\n        </Item>\n        <Item>\n          <PanelToolbarLabel>Button text</PanelToolbarLabel>\n          <PanelToolbarInput\n            type=\"text\"\n            value={config.buttonText}\n            onChange={(event) => {\n              saveConfig({ buttonText: event.target.value });\n            }}\n            placeholder=\"Publish\"\n          />\n        </Item>\n        <Item>\n          <PanelToolbarLabel>Button tooltip</PanelToolbarLabel>\n          <PanelToolbarInput\n            type=\"text\"\n            value={config.buttonTooltip}\n            onChange={(event) => {\n              saveConfig({ buttonTooltip: event.target.value });\n            }}\n          />\n        </Item>\n        <Item>\n          <PanelToolbarLabel>Button color (rgba or hex)</PanelToolbarLabel>\n          <PanelToolbarInput\n            type=\"text\"\n            value={config.buttonColor}\n            onChange={(event) => {\n              saveConfig({ buttonColor: event.target.value });\n            }}\n            placeholder=\"rgba(1,1,1,1) or #FFFFFF\"\n          />\n        </Item>\n      </>\n    );\n  }\n\n  render() {\n    const {\n      capabilities,\n      topics,\n      config: { topicName, datatype, buttonText, buttonTooltip, buttonColor, advancedView, value },\n    } = this.props;\n\n    const { datatypeNames, parsedObject, error } = this.state;\n    const canPublish = capabilities.includes(PlayerCapabilities.advertise);\n    const buttonRowStyle = advancedView ? { flex: \"0 0 auto\" } : { flex: \"0 0 auto\", justifyContent: \"center\" };\n\n    return (\n      <Flex col style={{ height: \"100%\", padding: \"12px\" }}>\n        {topicName && datatype && (\n          <Publisher ref={this._publisher} name=\"Publish\" topic={topicName} datatype={datatype} />\n        )}\n        <PanelToolbar floating menuContent={this._renderMenuContent()} />\n        {advancedView && (\n          <SRow>\n            <SSpan>Topic:</SSpan>\n            <Autocomplete\n              placeholder=\"Choose a topic\"\n              items={topics}\n              hasError={false}\n              onChange={this._onChangeTopic}\n              onSelect={this._onSelectTopic}\n              selectedItem={{ name: topicName }}\n              getItemText={getTopicName}\n              getItemValue={getTopicName}\n            />\n          </SRow>\n        )}\n        {advancedView && (\n          <SRow>\n            <PanelToolbarLabel>Datatype:</PanelToolbarLabel>\n            <Autocomplete\n              clearOnFocus\n              placeholder=\"Choose a datatype\"\n              items={datatypeNames}\n              onSelect={this._onSelectDatatype}\n              selectedItem={datatype}\n            />\n          </SRow>\n        )}\n        {advancedView && (\n          <STextAreaContainer>\n            <STextArea placeholder=\"Enter message content as JSON\" value={value || \"\"} onChange={this._onChange} />\n          </STextAreaContainer>\n        )}\n        <Flex row style={buttonRowStyle}>\n          {error && <SErrorText>{error}</SErrorText>}\n          <Button\n            style={canPublish ? { backgroundColor: buttonColor } : {}}\n            tooltip={canPublish ? buttonTooltip : \"Connect to ROS to publish data\"}\n            disabled={!canPublish || !parsedObject}\n            primary={canPublish && !!parsedObject}\n            onClick={this._publish}>\n            {buttonText}\n          </Button>\n        </Flex>\n      </Flex>\n    );\n  }\n}\n\nexport default hot(Panel<Config>(Publish));\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { RosDatatypes } from \"webviz-core/src/types/RosDatatypes\";\n\nexport const builtinSampleValues = {\n  bool: false,\n  int8: 0,\n  uint8: 0,\n  int16: 0,\n  uint16: 0,\n  int32: 0,\n  uint32: 0,\n  int64: 0,\n  uint64: 0,\n  float32: 0,\n  float64: 0,\n  string: \"\",\n  time: { sec: 0, nsec: 0 },\n  duration: { sec: 0, nsec: 0 },\n};\n\nexport default function buildSampleMessage(datatypes: RosDatatypes, datatype: string): ?any {\n  const builtin = builtinSampleValues[datatype];\n  if (builtin != null) {\n    return builtin;\n  }\n  const fields = datatypes[datatype].fields;\n  if (!fields) {\n    return null;\n  }\n  const obj = {};\n  for (const field of fields) {\n    if (field.isConstant) {\n      continue;\n    }\n    const sample = buildSampleMessage(datatypes, field.type);\n    if (field.isArray) {\n      if (field.arrayLength != null) {\n        obj[field.name] = new Array(field.arrayLength).fill(sample);\n      } else {\n        obj[field.name] = [sample];\n      }\n    } else {\n      obj[field.name] = sample;\n    }\n  }\n  return obj;\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport * as React from \"react\";\nimport uuid from \"uuid\";\n\nimport { MessagePipelineConsumer, type MessagePipelineContext } from \"webviz-core/src/components/MessagePipeline\";\n\ntype Props = {|\n  topic: string,\n  datatype: string,\n  name: string,\n|};\n\n// Component that registers a publisher with the player and provides a publish() function to publish data.\nexport default class Publisher extends React.PureComponent<Props> {\n  _id: string = uuid.v4();\n  _context: ?MessagePipelineContext;\n\n  _getContext(): MessagePipelineContext {\n    if (!this._context) {\n      throw new Error(\"this._context is missing in <Publisher>\");\n    }\n    return this._context;\n  }\n\n  _setPublishers() {\n    const { topic, datatype, name } = this.props;\n    this._getContext().setPublishers(this._id, [{ topic, datatype, advertiser: { type: \"panel\", name } }]);\n  }\n\n  componentDidMount() {\n    this._setPublishers();\n  }\n\n  componentDidUpdate() {\n    this._setPublishers();\n  }\n\n  componentWillUnmount() {\n    this._getContext().setPublishers(this._id, []);\n  }\n\n  publish(msg: any) {\n    const { topic } = this.props;\n    this._getContext().publish({ topic, msg });\n  }\n\n  render() {\n    return (\n      <MessagePipelineConsumer>\n        {(context: MessagePipelineContext) => {\n          this._context = context;\n          return null;\n        }}\n      </MessagePipelineConsumer>\n    );\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ClipboardOutlineIcon from \"@mdi/svg/svg/clipboard-outline.svg\";\nimport cx from \"classnames\";\nimport React, { PureComponent } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport { Creatable as ReactSelectCreatable } from \"react-select\";\nimport VirtualizedSelect from \"react-virtualized-select\";\nimport { createSelector } from \"reselect\";\n\nimport helpContent from \"./index.help.md\";\nimport styles from \"./index.module.scss\";\nimport LevelToString, { KNOWN_LOG_LEVELS } from \"./LevelToString\";\nimport LogMessage from \"./LogMessage\";\nimport logStyle from \"./LogMessage.module.scss\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport LogList from \"webviz-core/src/components/LogList\";\nimport MessageHistoryDEPRECATED, {\n  type MessageHistoryData,\n  type MessageHistoryItem,\n} from \"webviz-core/src/components/MessageHistoryDEPRECATED\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport TopicToRenderMenu from \"webviz-core/src/components/TopicToRenderMenu\";\nimport type { Message, Topic } from \"webviz-core/src/players/types\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\nimport { ROSOUT_TOPIC } from \"webviz-core/src/util/globalConstants\";\n\n// Remove creatable warning https://github.com/JedWatson/react-select/issues/2181\nclass Creatable extends React.Component<{}, {}> {\n  render() {\n    return <ReactSelectCreatable {...this.props} />;\n  }\n}\n\ntype Option = {\n  value: any,\n  label: string,\n};\n\ntype Config = {\n  searchTerms: string[],\n  minLogLevel: number,\n  topicToRender: string,\n};\n\ntype Props = {\n  config: Config,\n  saveConfig: (Config) => void,\n  topics: Topic[],\n};\n\n// Create the log level options nodes once since they don't change per render.\nconst LOG_LEVEL_OPTIONS = KNOWN_LOG_LEVELS.map((level) => ({\n  label: `>= ${LevelToString(level)}`,\n  value: level,\n}));\n\n// Persist the identity of selectedOptions for React Creatable.\n// Without it, we can't create new options.\nexport const stringsToOptions = createSelector<*, *, *, _>(\n  (strs: string[]) => strs,\n  (strs: string[]): Option[] => strs.map((value) => ({ label: value, value }))\n);\n\nexport const getShouldDisplayMsg = (msg: Message, minLogLevel: number, searchTerms: string[]): boolean => {\n  if (msg.message.level < minLogLevel) {\n    return false;\n  }\n\n  if (searchTerms.length < 1) {\n    // No search term filters so this message should be visible.\n    return true;\n  }\n  const searchTermsInLowerCase = searchTerms.map((term) => term.toLowerCase());\n  for (const searchTerm of searchTermsInLowerCase) {\n    if (msg.message.name.toLowerCase().includes(searchTerm) || msg.message.msg.toLowerCase().includes(searchTerm)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nclass RosoutPanel extends PureComponent<Props> {\n  static defaultConfig = { searchTerms: [], minLogLevel: 1, topicToRender: ROSOUT_TOPIC };\n  static panelType = \"RosOut\";\n\n  _onNodeFilterChange = (selectedOptions: Option[]) => {\n    this.props.saveConfig({ ...this.props.config, searchTerms: selectedOptions.map((option) => option.value) });\n  };\n\n  _onLogLevelChange = (minLogLevel: number) => {\n    this.props.saveConfig({ ...this.props.config, minLogLevel });\n  };\n\n  _filterFn = (item: MessageHistoryItem) =>\n    getShouldDisplayMsg(item.message, this.props.config.minLogLevel, this.props.config.searchTerms);\n\n  _getFilteredMessages(items: $ReadOnlyArray<MessageHistoryItem>): $ReadOnlyArray<MessageHistoryItem> {\n    const { minLogLevel, searchTerms } = this.props.config;\n    const hasActiveFilters = minLogLevel > 1 || searchTerms.length > 0;\n    if (!hasActiveFilters) {\n      // This early return avoids looping over the full list with a filter that will always return true.\n      return items;\n    }\n    return items.filter(this._filterFn);\n  }\n\n  _renderFiltersBar = (seenNodeNames: Set<string>, msgs: $ReadOnlyArray<MessageHistoryItem>) => {\n    const { minLogLevel, searchTerms } = this.props.config;\n    const nodeNameOptions = Array.from(seenNodeNames).map((name) => ({ label: name, value: name }));\n\n    return (\n      <div className={styles.filtersBar}>\n        <VirtualizedSelect\n          className={cx(styles.severityFilter)}\n          clearable={false}\n          searchable={false}\n          value={minLogLevel}\n          optionHeight={parseInt(styles.optionHeight)}\n          maxHeight={parseInt(styles.optionHeight) * KNOWN_LOG_LEVELS.length}\n          options={LOG_LEVEL_OPTIONS}\n          optionRenderer={({ key, style: styleProp, option, selectValue, focusedOption }) => (\n            <div\n              className={cx(logStyle[LevelToString(option.value).toLowerCase()], \"VirtualizedSelectOption\", {\n                VirtualizedSelectFocusedOption: focusedOption === option,\n              })}\n              style={styleProp}\n              onClick={() => this._onLogLevelChange(option.value)}\n              key={key}>\n              {option.label}\n            </div>\n          )}\n          valueComponent={(option) => <span>{`Min Severity: ${LevelToString(option.value.value)}`}</span>}\n        />\n        <VirtualizedSelect\n          className={styles.nodeFilter}\n          clearable\n          multi\n          closeOnSelect={false}\n          value={stringsToOptions(searchTerms)}\n          onChange={this._onNodeFilterChange}\n          options={nodeNameOptions}\n          optionHeight={parseInt(styles.optionHeight)}\n          placeholder=\"Filter by node name or message text\"\n          searchable\n          selectComponent={Creatable}\n          promptTextCreator={(label) => `Node names or msgs containing \"${label}\"`}\n        />\n        <div className={styles.itemsCountField}>\n          {msgs.length} {msgs.length === 1 ? \"item\" : \"items\"}\n          <Icon\n            style={{ padding: \"1px 0px 0px 6px\" }}\n            onClick={() => {\n              clipboard.copy(JSON.stringify(msgs, null, 2));\n            }}\n            tooltip=\"Copy rosout to clipboard\">\n            <ClipboardOutlineIcon />\n          </Icon>\n        </div>\n      </div>\n    );\n  };\n  _renderRow({ item, style, key, index }) {\n    return (\n      <div key={key} style={index === 0 ? { ...style, paddingTop: 36 } : style}>\n        <LogMessage msg={item.message.message} />\n      </div>\n    );\n  }\n\n  render() {\n    const { topics, config } = this.props;\n    const seenNodeNames = new Set();\n\n    const topicToRenderMenu = (\n      <TopicToRenderMenu\n        topicToRender={config.topicToRender}\n        onChange={(topicToRender) => this.props.saveConfig({ ...this.props.config, topicToRender })}\n        topics={topics}\n        singleTopicDatatype=\"rosgraph_msgs/Log\"\n        defaultTopicToRender={ROSOUT_TOPIC}\n      />\n    );\n\n    return (\n      <MessageHistoryDEPRECATED paths={[config.topicToRender]} historySize={100000}>\n        {({ itemsByPath }: MessageHistoryData) => {\n          const msgs: $ReadOnlyArray<MessageHistoryItem> = itemsByPath[config.topicToRender];\n          msgs.forEach((msg) => seenNodeNames.add(msg.message.message.name));\n\n          return (\n            <Flex col>\n              <PanelToolbar floating helpContent={helpContent} additionalIcons={topicToRenderMenu}>\n                {this._renderFiltersBar(seenNodeNames, msgs)}\n              </PanelToolbar>\n              <div className={styles.content}>\n                <LogList items={this._getFilteredMessages(msgs)} renderRow={this._renderRow} />\n              </div>\n            </Flex>\n          );\n        }}\n      </MessageHistoryDEPRECATED>\n    );\n  }\n}\n\nexport default hot(Panel<Config>(RosoutPanel));\n","module.exports = \"# rosout\\n\\nDisplays messages from the `/rosout` topic. The messages can be filtered using the filter dropdowns at the top of the panel. These hide away when unused, so you need to hover over the top section of the panel to reveal them. There are two filtering options:\\n\\n- Minimum Severity: The left dropdown lets you choose a severity below which to hide messages.\\n- Node Name/Message: The text field lets you add search terms by which to filter the log messages. The filter applies to both node names and message text.\\n\\nNode name and message filters are \\\"OR\\\"ed, so if you have two, it'll show messages that meet either. The severity is an \\\"AND\\\" with the node names / messages &mdash; if a message is below the minimum severity, it won't show up regardless of matching the name or content.\\n\"","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./index.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"div.Select-menu-outer {\\n  background-color: #2d2c33;\\n  border-radius: 4px;\\n  padding: 0;\\n  -webkit-box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n          box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  -ms-flex-negative: 0;\\n      flex-shrink: 0; }\\n\\n.VirtualizedSelectOption {\\n  text-decoration: none;\\n  padding: 8px 12px;\\n  cursor: pointer;\\n  color: rgba(247, 247, 243, 0.77);\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center; }\\n\\n.VirtualizedSelectSelectedOption {\\n  color: rgba(247, 247, 243, 0.77);\\n  background-color: rgba(59, 46, 118, 0.6); }\\n\\n.VirtualizedSelectOption:hover, .VirtualizedSelectFocusedOption {\\n  background-color: #3b2e76;\\n  color: rgba(247, 247, 243, 0.77); }\\n\\n.packages-webviz-core-src-panels-Rosout-index-module-4nshd--content {\\n  font-family: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n  -ms-flex: 1 1 auto;\\n      flex: 1 1 auto;\\n  display: -ms-flexbox;\\n  display: flex;\\n  position: relative; }\\n\\n.packages-webviz-core-src-panels-Rosout-index-module-42gh9--filtersBar {\\n  background-color: #2d2c33;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-wrap: wrap;\\n      flex-wrap: wrap;\\n  -ms-flex: 1 1 auto;\\n      flex: 1 1 auto;\\n  left: 0;\\n  width: 100%; }\\n\\n.packages-webviz-core-src-panels-Rosout-index-module-2nczq--severityFilter {\\n  -ms-flex: 0 1 auto;\\n      flex: 0 1 auto;\\n  min-width: 120px;\\n  margin-left: 10px;\\n  width: unset !important; }\\n\\n.packages-webviz-core-src-panels-Rosout-index-module-3tekj--nodeFilter {\\n  -ms-flex: 2 1 auto;\\n      flex: 2 1 auto;\\n  min-width: 200px;\\n  width: unset !important; }\\n\\n.packages-webviz-core-src-panels-Rosout-index-module-hu4fx--itemsCountField {\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  border-radius: 4px;\\n  color: rgba(255, 255, 255, 0.5);\\n  padding: 0px 8px; }\\n\\n {\\n  /**\\n * React Select\\n * ============\\n * Created by Jed Watson and Joss Mackison for KeystoneJS, http://www.keystonejs.com/\\n * https://twitter.com/jedwatson https://twitter.com/jossmackison https://twitter.com/keystonejs\\n * MIT License: https://github.com/JedWatson/react-select\\n*/\\n  /* Collection default theme */\\n  /* Grid default theme */\\n  /* Table default theme */\\n  /* List default theme */\\n  /*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNvdXJjZS9zdHlsZXMuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDhCQUE4Qjs7QUFFOUI7Q0FDQzs7QUFFRDtDQUNDOztBQUVELHdCQUF3Qjs7QUFFeEI7Q0FDQzs7QUFFRDtDQUNDOztBQUVELHlCQUF5Qjs7QUFFekI7Q0FDQzs7QUFFRDtDQUNDOztBQUVEO0VBQ0UsaUJBQWlCO0VBQ2pCLDBCQUEwQjtFQUMxQixxQkFBYztFQUFkLHFCQUFjO0VBQWQsY0FBYztFQUNkLCtCQUFvQjtFQUFwQiw4QkFBb0I7TUFBcEIsd0JBQW9CO1VBQXBCLG9CQUFvQjtFQUNwQiwwQkFBb0I7TUFBcEIsdUJBQW9CO1VBQXBCLG9CQUFvQjtDQUNyQjtBQUNEO0VBQ0UscUJBQWM7RUFBZCxxQkFBYztFQUFkLGNBQWM7RUFDZCwrQkFBb0I7RUFBcEIsOEJBQW9CO01BQXBCLHdCQUFvQjtVQUFwQixvQkFBb0I7RUFDcEIsMEJBQW9CO01BQXBCLHVCQUFvQjtVQUFwQixvQkFBb0I7Q0FDckI7O0FBRUQ7RUFDRSxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLG9CQUFvQjtFQUNwQix3QkFBd0I7RUFDeEIsaUJBQWlCO0NBQ2xCOztBQUVEOztFQUVFLG1CQUFtQjtFQUNuQixlQUFlO0NBQ2hCO0FBQ0Q7RUFDRSx3QkFBd0I7RUFDeEIsb0JBQW9CO0NBQ3JCOztBQUVEOztFQUVFLGtCQUFrQjtDQUNuQjtBQUNEO0VBQ0UsZ0JBQWdCO0NBQ2pCOztBQUVEO0VBQ0UscUJBQWM7RUFBZCxxQkFBYztFQUFkLGNBQWM7RUFDZCwwQkFBb0I7TUFBcEIsdUJBQW9CO1VBQXBCLG9CQUFvQjtDQUNyQjtBQUNEO0VBQ0Usb0JBQWU7TUFBZixtQkFBZTtVQUFmLGVBQWU7RUFDZixZQUFZO0VBQ1osV0FBVztFQUNYLG1CQUFtQjtDQUNwQjs7QUFFRCx3QkFBd0I7O0FBRXhCO0NBQ0MiLCJmaWxlIjoic3R5bGVzLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvbGxlY3Rpb24gZGVmYXVsdCB0aGVtZSAqL1xuXG4uUmVhY3RWaXJ0dWFsaXplZF9fQ29sbGVjdGlvbiB7XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19Db2xsZWN0aW9uX19pbm5lclNjcm9sbENvbnRhaW5lciB7XG59XG5cbi8qIEdyaWQgZGVmYXVsdCB0aGVtZSAqL1xuXG4uUmVhY3RWaXJ0dWFsaXplZF9fR3JpZCB7XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19HcmlkX19pbm5lclNjcm9sbENvbnRhaW5lciB7XG59XG5cbi8qIFRhYmxlIGRlZmF1bHQgdGhlbWUgKi9cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlIHtcbn1cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19HcmlkIHtcbn1cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19oZWFkZXJSb3cge1xuICBmb250LXdlaWdodDogNzAwO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19yb3cge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uUmVhY3RWaXJ0dWFsaXplZF9fVGFibGVfX2hlYWRlclRydW5jYXRlZFRleHQge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9faGVhZGVyQ29sdW1uLFxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19yb3dDb2x1bW4ge1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gIG1pbi13aWR0aDogMHB4O1xufVxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19yb3dDb2x1bW4ge1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19oZWFkZXJDb2x1bW46Zmlyc3Qtb2YtdHlwZSxcbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fcm93Q29sdW1uOmZpcnN0LW9mLXR5cGUge1xuICBtYXJnaW4tbGVmdDogMTBweDtcbn1cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fc29ydGFibGVIZWFkZXJDb2x1bW4ge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fc29ydGFibGVIZWFkZXJJY29uQ29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fc29ydGFibGVIZWFkZXJJY29uIHtcbiAgZmxleDogMCAwIDI0cHg7XG4gIGhlaWdodDogMWVtO1xuICB3aWR0aDogMWVtO1xuICBmaWxsOiBjdXJyZW50Q29sb3I7XG59XG5cbi8qIExpc3QgZGVmYXVsdCB0aGVtZSAqL1xuXG4uUmVhY3RWaXJ0dWFsaXplZF9fTGlzdCB7XG59XG4iXX0= */ }\\n  div.Select-menu {\\n    padding-bottom: 5em !important; }\\n  .Select-control {\\n    font-size: 12px; }\\n    .Select-control .Select-clear {\\n      line-height: 24px;\\n      font-size: 18px; }\\n\\n@keyframes packages-webviz-core-src-panels-Rosout-index-module-4nj9t--Select-animation-spin {\\n  to {\\n    -webkit-transform: rotate(1turn);\\n            transform: rotate(1turn); } }\\n\\n@-webkit-keyframes packages-webviz-core-src-panels-Rosout-index-module-4nj9t--Select-animation-spin {\\n  to {\\n    -webkit-transform: rotate(1turn); } }\\n  .Select {\\n    position: relative; }\\n    .Select input::-webkit-contacts-auto-fill-button,\\n    .Select input::-webkit-credentials-auto-fill-button {\\n      display: none !important; }\\n    .Select input::-ms-clear {\\n      display: none !important; }\\n    .Select input::-ms-reveal {\\n      display: none !important; }\\n    .Select,\\n    .Select div,\\n    .Select input,\\n    .Select span {\\n      -webkit-box-sizing: border-box;\\n      box-sizing: border-box; }\\n    .Select.is-disabled .Select-arrow-zone {\\n      cursor: default;\\n      pointer-events: none; }\\n    .Select.is-disabled > .Select-control {\\n      background-color: #f9f9f9; }\\n      .Select.is-disabled > .Select-control:hover {\\n        -webkit-box-shadow: none;\\n                box-shadow: none; }\\n    .Select.is-searchable.is-open > .Select-control {\\n      cursor: text; }\\n    .Select.is-searchable.is-focused:not(.is-open) > .Select-control {\\n      cursor: text; }\\n    .Select.is-open > .Select-control {\\n      border-bottom-right-radius: 0;\\n      border-bottom-left-radius: 0;\\n      background: #2d2c33;\\n      border-color: rgba(0, 0, 0, 0) transparent rgba(13, 13, 13, 0); }\\n      .Select.is-open > .Select-control .Select-arrow {\\n        top: -2px;\\n        border-color: transparent transparent rgba(247, 247, 243, 0.77);\\n        border-width: 0 5px 5px; }\\n    .Select.is-focused > .Select-control {\\n      background: #2d2c33; }\\n    .Select.is-focused:not(.is-open) > .Select-control {\\n      border-color: transparent rgba(13, 13, 13, 0) rgba(13, 13, 13, 0);\\n      -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 5px -1px fade(transparent, 50%);\\n              box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 5px -1px fade(transparent, 50%); }\\n    .Select.has-value.is-clearable.Select--single > .Select-control .Select-value {\\n      padding-right: 38px; }\\n    .Select.has-value.Select--single > .Select-control .Select-value .Select-value-label,\\n    .Select.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value .Select-value-label {\\n      color: rgba(247, 247, 243, 0.77); }\\n    .Select.has-value.Select--single > .Select-control .Select-value a.Select-value-label,\\n    .Select.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label {\\n      cursor: pointer;\\n      text-decoration: none; }\\n      .Select.has-value.Select--single > .Select-control .Select-value a.Select-value-label:hover, .Select.has-value.Select--single > .Select-control .Select-value a.Select-value-label:focus,\\n      .Select.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label:hover,\\n      .Select.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label:focus {\\n        color: transparent;\\n        outline: none;\\n        text-decoration: underline; }\\n      .Select.has-value.Select--single > .Select-control .Select-value a.Select-value-label:focus,\\n      .Select.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label:focus {\\n        background: #2d2c33; }\\n    .Select.has-value.is-pseudo-focused .Select-input {\\n      opacity: 0; }\\n    .Select.is-open .Select-arrow,\\n    .Select .Select-arrow-zone:hover > .Select-arrow {\\n      border-top-color: #666; }\\n    .Select.Select--rtl {\\n      direction: rtl;\\n      text-align: right; }\\n  .Select-control {\\n    background-color: #2d2c33;\\n    border-color: rgba(13, 13, 13, 0) transparent rgba(0, 0, 0, 0);\\n    border-radius: 4px;\\n    border: 1px solid transparent;\\n    color: rgba(247, 247, 243, 0.77);\\n    cursor: default;\\n    display: table;\\n    border-spacing: 0;\\n    border-collapse: separate;\\n    height: 24px;\\n    outline: none;\\n    overflow: hidden;\\n    position: relative;\\n    width: 100%; }\\n    .Select-control:hover {\\n      -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);\\n              box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06); }\\n    .Select-control .Select-input:focus {\\n      outline: none;\\n      background: #2d2c33; }\\n  .Select-placeholder,\\n  .Select--single > .Select-control .Select-value {\\n    bottom: 0;\\n    color: rgba(247, 247, 243, 0.27);\\n    left: 0;\\n    line-height: 26px;\\n    padding-left: 10px;\\n    padding-right: 10px;\\n    position: absolute;\\n    right: 0;\\n    top: 0;\\n    max-width: 100%;\\n    overflow: hidden;\\n    -o-text-overflow: ellipsis;\\n       text-overflow: ellipsis;\\n    white-space: nowrap; }\\n  .Select-input {\\n    height: 26px;\\n    padding-left: 10px;\\n    padding-right: 10px;\\n    vertical-align: middle; }\\n    .Select-input > input {\\n      width: 100%;\\n      background: none transparent;\\n      border: 0 none;\\n      -webkit-box-shadow: none;\\n              box-shadow: none;\\n      cursor: default;\\n      display: inline-block;\\n      font-family: inherit;\\n      font-size: inherit;\\n      margin: 0;\\n      outline: none;\\n      line-height: 17px;\\n      /* For IE 8 compatibility */\\n      padding: 4px 0 8px;\\n      /* For IE 8 compatibility */\\n      -webkit-appearance: none; }\\n      .packages-webviz-core-src-panels-Rosout-index-module-jr6wb--is-focused .Select-input > input {\\n        cursor: text; }\\n  .Select-control:not(.is-searchable) > .Select-input {\\n    outline: none; }\\n  .Select-loading-zone {\\n    cursor: pointer;\\n    display: table-cell;\\n    position: relative;\\n    text-align: center;\\n    vertical-align: middle;\\n    width: 16px; }\\n  .Select-loading {\\n    -webkit-animation: Select-animation-spin 400ms infinite linear;\\n    animation: Select-animation-spin 400ms infinite linear;\\n    width: 16px;\\n    height: 16px;\\n    -webkit-box-sizing: border-box;\\n            box-sizing: border-box;\\n    border-radius: 50%;\\n    border: 2px solid transparent;\\n    border-right-color: rgba(247, 247, 243, 0.77);\\n    display: inline-block;\\n    position: relative;\\n    vertical-align: middle; }\\n  .Select-clear-zone {\\n    -webkit-animation: Select-animation-fadeIn 200ms;\\n    animation: Select-animation-fadeIn 200ms;\\n    color: rgba(247, 247, 243, 0.77);\\n    cursor: pointer;\\n    display: table-cell;\\n    position: relative;\\n    text-align: center;\\n    vertical-align: middle;\\n    width: 13px; }\\n    .Select-clear-zone:hover {\\n      color: #D0021B; }\\n  .Select-clear {\\n    display: inline-block;\\n    font-size: 12px;\\n    line-height: 1; }\\n  .Select--multi .Select-clear-zone {\\n    width: 13px; }\\n  .Select--multi .Select-multi-value-wrapper {\\n    display: inline-block; }\\n  .Select .Select-aria-only {\\n    position: absolute;\\n    display: inline-block;\\n    height: 1px;\\n    width: 1px;\\n    margin: -1px;\\n    clip: rect(0, 0, 0, 0);\\n    overflow: hidden;\\n    float: left; }\\n  .Select-arrow-zone {\\n    cursor: pointer;\\n    display: table-cell;\\n    position: relative;\\n    text-align: center;\\n    vertical-align: middle;\\n    width: 25px;\\n    padding-right: 5px; }\\n    .packages-webviz-core-src-panels-Rosout-index-module-33x8g--Select--rtl .Select-arrow-zone {\\n      padding-right: 0;\\n      padding-left: 5px; }\\n  .Select-arrow {\\n    border-color: rgba(247, 247, 243, 0.77) transparent transparent;\\n    border-style: solid;\\n    border-width: 5px 5px 2.5px;\\n    display: inline-block;\\n    height: 0;\\n    width: 0;\\n    position: relative; }\\n\\n@-webkit-keyframes packages-webviz-core-src-panels-Rosout-index-module-2xhh8--Select-animation-fadeIn {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n@keyframes packages-webviz-core-src-panels-Rosout-index-module-2xhh8--Select-animation-fadeIn {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n  .Select-menu-outer {\\n    border-bottom-right-radius: 4px;\\n    border-bottom-left-radius: 4px;\\n    background-color: #2d2c33;\\n    border: 1px solid transparent;\\n    border-top-color: rgba(45, 44, 51, 0.5);\\n    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);\\n            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);\\n    -webkit-box-sizing: border-box;\\n            box-sizing: border-box;\\n    margin-top: -1px;\\n    max-height: 200px;\\n    position: absolute;\\n    left: 0;\\n    top: 100%;\\n    width: 100%;\\n    z-index: 1000;\\n    -webkit-overflow-scrolling: touch; }\\n  .Select-menu {\\n    max-height: 198px;\\n    overflow-y: auto; }\\n  .Select-option {\\n    -webkit-box-sizing: border-box;\\n            box-sizing: border-box;\\n    background-color: red;\\n    color: rgba(255, 255, 255, 0.77);\\n    cursor: pointer;\\n    display: block;\\n    padding: 8px 10px; }\\n    .Select-option:last-child {\\n      border-bottom-right-radius: 4px;\\n      border-bottom-left-radius: 4px; }\\n    .Select-option.is-selected {\\n      background-color: #f5faff;\\n      color: rgba(247, 247, 243, 0.77); }\\n    .Select-option.is-focused {\\n      background-color: #f2f9fc;\\n      color: rgba(247, 247, 243, 0.77); }\\n    .Select-option.is-disabled {\\n      color: rgba(255, 255, 255, 0.77);\\n      cursor: default; }\\n  .Select-noresults {\\n    -webkit-box-sizing: border-box;\\n            box-sizing: border-box;\\n    color: rgba(255, 255, 255, 0.77);\\n    cursor: default;\\n    display: block;\\n    padding: 8px 10px; }\\n  .Select--multi .Select-input {\\n    vertical-align: middle;\\n    margin-left: 10px;\\n    padding: 0; }\\n  .Select--multi.Select--rtl .Select-input {\\n    margin-left: 0;\\n    margin-right: 10px; }\\n  .Select--multi.has-value .Select-input {\\n    margin-left: 5px; }\\n  .Select--multi .Select-value {\\n    background-color: #f2f9fc;\\n    border-radius: 2px;\\n    border: 1px solid #c9e6f2;\\n    color: #08c;\\n    display: inline-block;\\n    font-size: 12px;\\n    margin-left: 5px;\\n    margin-top: 5px;\\n    vertical-align: top; }\\n  .Select--multi .Select-value-icon,\\n  .Select--multi .Select-value-label {\\n    display: inline-block;\\n    vertical-align: middle; }\\n  .Select--multi .Select-value-label {\\n    border-bottom-right-radius: 2px;\\n    border-top-right-radius: 2px;\\n    cursor: default;\\n    padding: 2px 5px; }\\n  .Select--multi a.Select-value-label {\\n    color: #08c;\\n    cursor: pointer;\\n    text-decoration: none; }\\n    .Select--multi a.Select-value-label:hover {\\n      text-decoration: underline; }\\n  .Select--multi .Select-value-icon {\\n    cursor: pointer;\\n    border-bottom-left-radius: 2px;\\n    border-top-left-radius: 2px;\\n    border-right: 1px solid #c9e6f2;\\n    padding: 1px 5px 3px; }\\n    .Select--multi .Select-value-icon:hover, .Select--multi .Select-value-icon:focus {\\n      background-color: #ddeff7;\\n      color: #0077b3; }\\n    .Select--multi .Select-value-icon:active {\\n      background-color: #c9e6f2; }\\n  .Select--multi.Select--rtl .Select-value {\\n    margin-left: 0;\\n    margin-right: 5px; }\\n  .Select--multi.Select--rtl .Select-value-icon {\\n    border-right: none;\\n    border-left: 1px solid #c9e6f2; }\\n  .Select--multi.is-disabled .Select-value {\\n    background-color: #fcfcfc;\\n    border: 1px solid #e3e3e3;\\n    color: #333; }\\n  .Select--multi.is-disabled .Select-value-icon {\\n    cursor: not-allowed;\\n    border-right: 1px solid #e3e3e3; }\\n    .Select--multi.is-disabled .Select-value-icon:hover, .Select--multi.is-disabled .Select-value-icon:focus, .Select--multi.is-disabled .Select-value-icon:active {\\n      background-color: #fcfcfc; }\\n\\n@keyframes packages-webviz-core-src-panels-Rosout-index-module-4nj9t--Select-animation-spin {\\n  to {\\n    -webkit-transform: rotate(1turn);\\n            transform: rotate(1turn); } }\\n\\n@-webkit-keyframes packages-webviz-core-src-panels-Rosout-index-module-4nj9t--Select-animation-spin {\\n  to {\\n    -webkit-transform: rotate(1turn); } }\\n  .ReactVirtualized__Table__headerRow {\\n    font-weight: 700;\\n    text-transform: uppercase;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-direction: row;\\n    flex-direction: row;\\n    -ms-flex-align: center;\\n    align-items: center; }\\n  .ReactVirtualized__Table__row {\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-direction: row;\\n    flex-direction: row;\\n    -ms-flex-align: center;\\n    align-items: center; }\\n  .ReactVirtualized__Table__headerTruncatedText {\\n    display: inline-block;\\n    max-width: 100%;\\n    white-space: nowrap;\\n    -o-text-overflow: ellipsis;\\n       text-overflow: ellipsis;\\n    overflow: hidden; }\\n  .ReactVirtualized__Table__headerColumn,\\n  .ReactVirtualized__Table__rowColumn {\\n    margin-right: 10px;\\n    min-width: 0px; }\\n  .ReactVirtualized__Table__rowColumn {\\n    -o-text-overflow: ellipsis;\\n       text-overflow: ellipsis;\\n    white-space: nowrap; }\\n  .ReactVirtualized__Table__headerColumn:first-of-type,\\n  .ReactVirtualized__Table__rowColumn:first-of-type {\\n    margin-left: 10px; }\\n  .ReactVirtualized__Table__sortableHeaderColumn {\\n    cursor: pointer; }\\n  .ReactVirtualized__Table__sortableHeaderIconContainer {\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-align: center;\\n    align-items: center; }\\n  .ReactVirtualized__Table__sortableHeaderIcon {\\n    -ms-flex: 0 0 24px;\\n    flex: 0 0 24px;\\n    height: 1em;\\n    width: 1em;\\n    fill: currentColor; }\\n  .VirtualizedSelectFocusedOption {\\n    background-color: #3b2e76 !important; }\\n  .Select {\\n    width: 100%; }\\n  .Select-input > input {\\n    color: rgba(247, 247, 243, 0.77); }\\n  .Select-multi-value-wrapper {\\n    display: table-cell;\\n    position: relative; }\\n  .Select--multi .Select-multi-value-wrapper {\\n    width: 100%; }\\n  .Select--multi .Select-arrow {\\n    opacity: 0.5; }\\n  .Select--multi .Select-value {\\n    color: rgba(247, 247, 243, 0.88);\\n    background-color: rgba(59, 46, 118, 0.6);\\n    border: 1px solid rgba(247, 247, 243, 0.1);\\n    margin: 2px; }\\n  .Select--multi .Select-value-icon {\\n    display: -ms-inline-flexbox;\\n    display: inline-flex;\\n    -ms-flex-align: center;\\n        align-items: center;\\n    padding: 0 0 0 4px;\\n    opacity: 0.5;\\n    border: 0; }\\n    .Select--multi .Select-value-icon:hover {\\n      color: inherit;\\n      background-color: transparent;\\n      opacity: 1; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/Rosout/index.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/mixins.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\",\"/home/circleci/project/packages/webviz-core/node_modules/react-select/scss/select.scss\",\"/home/circleci/project/packages/webviz-core/node_modules/react-virtualized/styles.css\",\"/home/circleci/project/packages/webviz-core/node_modules/react-select/scss/spinner.scss\",\"/home/circleci/project/packages/webviz-core/node_modules/react-select/scss/control.scss\",\"/home/circleci/project/packages/webviz-core/node_modules/react-select/scss/mixins.scss\",\"/home/circleci/project/packages/webviz-core/node_modules/react-select/scss/menu.scss\",\"/home/circleci/project/packages/webviz-core/node_modules/react-select/scss/multi.scss\"],\"names\":[],\"mappings\":\"AAqDA;EC1BE,0BCUe;EDTf,mBAAkB;EAClB,WAAU;EACV,iFAAwE;UAAxE,yEAAwE;EACxE,iBAAgB;EAChB,qBAAoB;EACpB,qBAAc;MAAd,eAAc,EACf;;ADmBD;EChBE,sBAAqB;EACrB,kBA5ByC;EA6BzC,gBAAe;EACf,iCC1BqC;ED2BrC,0BAAiB;KAAjB,uBAAiB;MAAjB,sBAAiB;UAAjB,kBAAiB;EACjB,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB,EAKpB;;ADKD;ECcE,iCCrDqC;EDuDrC,yCC7DkD,ED8DnD;;ADjBD;ECoBE,0BC/CuB;EDgDvB,iCC5DqC,ED6DtC;;AD3DD;ECsEE,kFAFmF;EDlEnF,mBAAc;MAAd,eAAc;EACd,qBAAa;EAAb,cAAa;EACb,mBAAkB,EACnB;;AAED;EACE,0BEae;EFZf,qBAAa;EAAb,cAAa;EACb,oBAAe;MAAf,gBAAe;EACf,mBAAc;MAAd,eAAc;EACd,QAAO;EACP,YAAW,EACZ;;AAED;EACE,mBAAc;MAAd,eAAc;EACd,iBAAgB;EAChB,kBAAiB;EACjB,wBAAuB,EACxB;;AAED;EACE,mBAAc;MAAd,eAAc;EACd,iBAAgB;EAChB,wBAAuB,EACxB;;AAED;EACE,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB;EACnB,mBAAkB;EAClB,gCAA+B;EAC/B,iBAAgB,EACjB;;AAED;EGrDA;;;;;;EAME;ECNF,8BAA8B;EAQ9B,wBAAwB;EAQxB,yBAAyB;EA8EzB,wBAAwB;EAKxB,qqGAAqqG,EJ8BpqG;EA5ED;IAKI,+BAA8B,EAC/B;EANH;IAQI,gBCpDY,EDyDb;IAbH;MAUM,kBAAkC;MAClC,gBAAkC,EACnC;;AK/CL;EACC;IAAK,iCAAwB;YAAxB,yBAAwB,EAAA,EAAA;;AAE9B;EACC;IAAK,iCAAgC,EAAA,EAAA;EL+BtC;IM7CC,mBAAkB,EA6GlB;INhED;;MMxCE,yBAAwB,EACxB;INuCF;MMrCE,yBAAwB,EACxB;INoCF;MMlCE,yBAAwB,EACxB;INiCF;;;;MOLC,+BDrB+B;MCuB/B,uBDvB+B,EAC9B;INyBF;MMpBG,gBAAe;MACf,qBAAoB,EACpB;INkBH;MMfG,0BHzBwC,EG6BxC;MNWH;QMbI,yBAAgB;gBAAhB,iBAAgB,EAChB;INYJ;MMNG,aAAY,EACZ;INKH;MMFG,aAAY,EACZ;INCH;MOzBC,8BD4BiC;MC3BjC,6BD2BiC;MAChC,oBJpBe;MIqBf,+DAAwH,EAQxH;MNbF;QMSG,UAAS;QACT,gEJjDoC;QIkDpC,wBHVoC,EGWpC;INZH;MMgBE,oBJhCe,EIiCf;INjBF;MMoBE,kEAAwH;MACxH,4FHxDwH;cGwDxH,oFHxDwH,EGyDxH;INtBF;MM0BE,oBAA8D,EAC9D;IN3BF;;MMgCG,iCJvEoC,EIwEpC;INjCH;;MMmCG,gBAAe;MACf,sBAAqB,EAYrB;MNhDH;;;QMwCI,mBNvBqC;QMwBrC,cAAa;QACb,2BAA0B,EAC1B;MN3CJ;;QM8CI,oBJ9Da,EI+Db;IN/CJ;MMqDE,WAAU,EACV;INtDF;;MM0DE,uBH1DsC,EG2DtC;IN3DF;MM6DE,eAAc;MACd,kBAAiB,EACjB;EN/DF;IMqEC,0BJrFgB;IIsFhB,+DAAwH;IACxH,mBH5GsC;IG6GtC,8BNxDwC;IMyDxC,iCJhHsC;IIiHtC,gBAAe;IACf,eAAc;IACd,kBAAiB;IACjB,0BAAyB;IACzB,aN5D2C;IM6D3C,cAAa;IACb,iBAAgB;IAChB,mBAAkB;IAClB,YAAW,EAUX;IN5FD;MMqFE,gDHjH6D;cGiH7D,wCHjH6D,EGkH7D;INtFF;MMyFE,cAAa;MACb,oBJ1Ge,EI2Gf;EN3FF;;IMiGC,UAAS;IACT,iCN7E8D;IM8E9D,QAAO;IACP,kBNjFoC;IMkFpC,mBH9HuC;IG+HvC,oBH/HuC;IGgIvC,mBAAkB;IAClB,SAAQ;IACR,OAAM;IAGN,gBAAe;IACf,iBAAgB;IAChB,2BAAuB;OAAvB,wBAAuB;IACvB,oBAAmB,EACnB;ENhHD;IMuHC,aNpGoC;IMqGpC,mBHjJuC;IGkJvC,oBHlJuC;IGmJvC,uBAAsB,EAwBtB;INlJD;MM6HE,YAAW;MACX,6BAA4B;MAC5B,eAAc;MACd,yBAAgB;cAAhB,iBAAgB;MAChB,gBAAe;MACf,sBAAqB;MACrB,qBAAoB;MACpB,mBAAkB;MAElB,UAAS;MACT,cAAa;MAEb,kBAAiB;MAAG,4BAA4B;MAChD,mBAAwG;MAAG,4BAA4B;MACvI,yBAAwB,EAKxB;MAHA;QACC,aAAY,EACZ;EN/IH;IMsJC,cAAa,EACb;ENvJD;IM2JC,gBAAe;IACf,oBAAmB;IACnB,mBAAkB;IAClB,mBAAkB;IAClB,uBAAsB;IACtB,YH5JuC,EG6JvC;ENjKD;IOXC,+DFnC+D;IEqC/D,uDFrC+D;IEE/D,YJgDuC;II/CvC,aJ+CuC;IEhDvC,+BAAsB;YAAtB,uBAAsB;IACtB,mBAAkB;IAClB,8BL0DwC;IKzDxC,8CHEsC;IGDtC,sBAAqB;IACrB,mBAAkB;IC2MlB,uBAAsB,EACtB;ENrKD;IOXC,iDDsLiD;ICpLjD,yCDoLiD;IACjD,iCJnNsC;IIoNtC,gBAAe;IACf,oBAAmB;IACnB,mBAAkB;IAClB,mBAAkB;IAClB,uBAAsB;IACtB,YHtLsE,EG2LtE;INvLD;MMqLE,eH1LyC,EG2LzC;ENtLF;IMyLC,sBAAqB;IACrB,gBHjMoE;IGkMpE,eAAc,EACd;EN5LD;IM8LC,YHlMsE,EGmMtE;EN/LD;IMkME,sBAAqB,EACtB;ENnMD;IMqMC,mBAAkB;IAClB,sBAAqB;IACrB,YAAW;IACX,WAAU;IACV,aAAY;IACZ,uBAAmB;IACnB,iBAAgB;IAChB,YAAW,EACX;EN7MD;IMmNC,gBAAe;IACf,oBAAmB;IACnB,mBAAkB;IAClB,mBAAkB;IAClB,uBAAsB;IACtB,YAAgC;IAChC,mBHxNsC,EG8NtC;IAJA;MACC,iBAAgB;MAChB,kBH5NqC,EG6NrC;EN9NF;IMkOC,gEAAyD;IACzD,oBAAmB;IACnB,4BAA+E;IAC/E,sBAAqB;IACrB,UAAS;IACT,SAAQ;IACR,mBAAkB,EAClB;;AAUD;EACC;IAAO,WAAU,EAAA;EACjB;IAAK,WAAU,EAAA,EAAA;;AAEhB;EACC;IAAO,WAAU,EAAA;EACjB;IAAK,WAAU,EAAA,EAAA;ENzPhB;IOzBC,gCJZsC;IIatC,+BJbsC;IKHtC,0BNwBgB;IMvBhB,8BRuDwC;IQtDxC,wCAAwE;IACxE,gDLS8D;YKT9D,wCLS8D;IKR9D,+BAAsB;YAAtB,uBAAsB;IACtB,iBAAgB;IAChB,kBLawC;IKZxC,mBAAkB;IAClB,QAAO;IACP,UAAS;IACT,YAAW;IACX,cLOuC;IKNvC,kCAAiC,EACjC;ER2BD;IQrBC,kBAA2C;IAC3C,iBAAgB,EAChB;ERmBD;IQbC,+BAAsB;YAAtB,uBAAsB;IACtB,sBRkCuB;IQjCvB,iCLPmE;IKQnE,gBAAe;IACf,eAAc;IACd,kBLjBuC,EKsCvC;IRbD;MOzBC,gCJZsC;MIatC,+BJbsC,EKiCrC;IRIF;MQDE,0BLZyC;MKazC,iCNvCqC,EMwCrC;IRDF;MQIE,0BLnByC;MKoBzC,iCN5CqC,EM6CrC;IRNF;MQSE,iCLrBkE;MKsBlE,gBAAe,EACf;ERXF;IQmBC,+BAAsB;YAAtB,uBAAsB;IACtB,iCL9BmE;IK+BnE,gBAAe;IACf,eAAc;IACd,kBLhDuC,EKiDvC;ERxBD;IS1CE,uBAAsB;IAEtB,kBNesC;IMdtC,WAAU,EACV;ETsCF;ISpCE,eAAc;IACd,mBNUsC,EMTtC;ETkCF;IS9BE,iBNwCqC,EMvCrC;ET6BF;ISzBE,0BNwCyC;IMvCzC,mBNiCqC;IMhCrC,0BNuC8D;IMtC9D,YNoCsC;IMnCtC,sBAAqB;IACrB,gBRxBc;IQyBd,iBN6BqC;IM5BrC,gBN4BqC;IM3BrC,oBAAmB,EACnB;ETgBF;;ISXE,sBAAqB;IACrB,uBAAsB,EACtB;ETSF;IO9BC,gCJuCsC;IItCtC,6BJsCsC;IMbrC,gBAAe;IACf,iBNeqC,EMdrC;ETEF;ISAE,YNcsC;IMbtC,gBAAe;IACf,sBAAqB,EAKrB;ITPF;MSKG,2BAA0B,EAC1B;ETNH;ISWE,gBAAe;IF/BhB,+BJ6BsC;II5BtC,4BJ4BsC;IMIrC,gCNG8D;IMA9D,qBAAgH,EAUhH;IT1BF;MSoBG,0BNF4D;MMG5D,eNJ+D,EMK/D;ITtBH;MSwBG,0BNR6D,EMS7D;ETzBH;IS8BI,eAAc;IACd,kBNrBmC,EMsBpC;EThCH;ISkCG,mBAAkB;IAClB,+BNnB6D,EMoB7D;ETpCH;IS0CE,0BNtByC;IMuBzC,0BNtBuE;IMuBvE,YNzBsC,EM0BtC;ET7CF;ISgDE,oBAAmB;IACnB,gCN5BuE,EMmCvE;ITxDF;MSsDG,0BNlCwC,EMmCxC;;AJ1FH;EACC;IAAK,iCAAwB;YAAxB,yBAAwB,EAAA,EAAA;;AAE9B;EACC;IAAK,iCAAgC,EAAA,EAAA;EL+BtC;II5BE,iBAAgB;IAChB,0BAAyB;IAEzB,qBAAoB;IACpB,cAAa;IAGT,wBAAuB;IACnB,oBAAmB;IAEvB,uBAAsB;IAClB,oBAAmB,EAC5B;EJgBD;IIbE,qBAAoB;IACpB,cAAa;IAGT,wBAAuB;IACnB,oBAAmB;IAEvB,uBAAsB;IAClB,oBAAmB,EAC5B;EJID;IIDE,sBAAqB;IACrB,gBAAe;IACf,oBAAmB;IACnB,2BAAuB;OAAvB,wBAAuB;IACvB,iBAAgB,EACjB;EJJD;;IIQE,mBAAkB;IAClB,eAAc,EACf;EJVD;IIYE,2BAAuB;OAAvB,wBAAuB;IACvB,oBAAmB,EACpB;EJdD;;IIkBE,kBAAiB,EAClB;EJnBD;IIqBE,gBAAe,EAChB;EJtBD;II0BE,qBAAoB;IACpB,cAAa;IAET,uBAAsB;IAClB,oBAAmB,EAC5B;EJ/BD;IIkCM,mBAAkB;IACd,eAAc;IACtB,YAAW;IACX,WAAU;IACV,mBAAkB,EACnB;EJvCD;IAwCI,qCAA6C,EAC9C;EAzCH;IA2CI,YAAW,EACZ;EA5CH;IA8CI,iCErFmC,EFsFpC;EA/CH;IAiDI,oBAAmB;IACnB,mBAAkB,EACnB;EAnDH;IAqDI,YAAW,EACZ;EAtDH;IAwDI,aAAY,EACb;EAzDH;IA2DI,iCEnGmC;IFoGnC,yCEzGgD;IF0GhD,2CE3GyC;IF4GzC,YAAW,EACZ;EA/DH;IAiEI,4BAAoB;IAApB,qBAAoB;IACpB,uBAAmB;QAAnB,oBAAmB;IACnB,mBAAkB;IAClB,aAAY;IACZ,UAAS,EAMV;IA3EH;MAuEM,eAAc;MACd,8BAA6B;MAC7B,WAAU,EACX\",\"file\":\"index.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/mixins.module.scss\\\";\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n$option-height: 24;\\n$option-font-size: $text-size;\\n\\n:export {\\n  optionHeight: $option-height;\\n}\\n\\n.content {\\n  @include monospace;\\n  flex: 1 1 auto;\\n  display: flex;\\n  position: relative;\\n}\\n\\n.filtersBar {\\n  background-color: $toolbar;\\n  display: flex;\\n  flex-wrap: wrap;\\n  flex: 1 1 auto;\\n  left: 0;\\n  width: 100%;\\n}\\n\\n.severityFilter {\\n  flex: 0 1 auto;\\n  min-width: 120px;\\n  margin-left: 10px;\\n  width: unset !important;\\n}\\n\\n.nodeFilter {\\n  flex: 2 1 auto;\\n  min-width: 200px;\\n  width: unset !important;\\n}\\n\\n.itemsCountField {\\n  display: flex;\\n  align-items: center;\\n  border-radius: 4px;\\n  color: rgba(255, 255, 255, 0.5);\\n  padding: 0px 8px;\\n}\\n\\n:global {\\n  div.Select-menu-outer {\\n    @extend %floating-box;\\n  }\\n  div.Select-menu {\\n    padding-bottom: 5em !important; // TODO(jacob): not working when there are enough items to scroll?\\n  }\\n  .Select-control {\\n    font-size: $option-font-size;\\n    .Select-clear {\\n      line-height: $option-font-size * 2;\\n      font-size: $option-font-size * 1.5;\\n    }\\n  }\\n  $select-item-font-size: $option-font-size;\\n  $select-input-bg: $toolbar;\\n  $select-input-border-color: transparent;\\n  $select-input-border-focus: transparent;\\n  $select-input-height: $option-height * 1px;\\n  $select-input-internal-height: 26px;\\n  $select-text-color: $text-control;\\n  $select-input-placeholder: transparentize($text-control, 0.5);\\n  $select-option-bg: red;\\n  $select-clear-color: $text-control;\\n  $select-loading-color: $text-control;\\n  $select-arrow-color: $text-control;\\n\\n  @import \\\"~react-select/scss/default\\\";\\n  @import \\\"~react-virtualized/styles\\\";\\n  // @import '~react-virtualized-select/styles';\\n\\n  .VirtualizedSelectOption {\\n    @extend %menu-item;\\n  }\\n  .VirtualizedSelectSelectedOption {\\n    @extend %menu-item-active;\\n  }\\n  .VirtualizedSelectFocusedOption {\\n    @extend %menu-item-hover;\\n    // TODO(jacob): doesn't override react-virtualized-select styles for some reason\\n    background-color: $menu-item-hover !important;\\n  }\\n  .Select {\\n    width: 100%;\\n  }\\n  .Select-input > input {\\n    color: $select-text-color;\\n  }\\n  .Select-multi-value-wrapper {\\n    display: table-cell;\\n    position: relative;\\n  }\\n  .Select--multi .Select-multi-value-wrapper {\\n    width: 100%;\\n  }\\n  .Select--multi .Select-arrow {\\n    opacity: 0.5;\\n  }\\n  .Select--multi .Select-value {\\n    color: $text-bright;\\n    background-color: $background-control-selected;\\n    border: 1px solid $background-control;\\n    margin: 2px;\\n  }\\n  .Select--multi .Select-value-icon {\\n    display: inline-flex;\\n    align-items: center;\\n    padding: 0 0 0 4px;\\n    opacity: 0.5;\\n    border: 0;\\n    &:hover {\\n      color: inherit;\\n      background-color: transparent;\\n      opacity: 1;\\n    }\\n  }\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"./colors.module.scss\\\";\\n\\n$padding: 8px;\\n$text-size: 12px;\\n$control-padding: $padding ($padding + 4px);\\n$control-margin: 0 0.2em;\\n\\n%bold {\\n  font-weight: bold;\\n  letter-spacing: 0.4px;\\n}\\n\\n%floating-box-close-icon {\\n  position: absolute;\\n  right: 7px;\\n  top: 7px;\\n  cursor: pointer;\\n  font-size: 16px;\\n}\\n\\n%floating-box {\\n  background-color: $toolbar;\\n  border-radius: 4px;\\n  padding: 0;\\n  box-shadow: 0 6px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.25);\\n  overflow: hidden;\\n  pointer-events: auto;\\n  flex-shrink: 0;\\n}\\n\\n%menu-item {\\n  text-decoration: none;\\n  padding: $control-padding;\\n  cursor: pointer;\\n  color: $text-control;\\n  user-select: none;\\n  display: flex;\\n  align-items: center;\\n\\n  &:hover {\\n    @extend %menu-item-hover;\\n  }\\n}\\n\\n%modal-subtitle {\\n  color: $text-bright;\\n  font-size: 16px;\\n  line-height: 16px * 1.25;\\n}\\n\\n%clearfix {\\n  &:after {\\n    content: \\\" \\\";\\n    visibility: hidden;\\n    display: block;\\n    height: 0;\\n    clear: both;\\n  }\\n}\\n\\n%menu-item-active {\\n  color: $text-normal;\\n  // @extend %bold;\\n  background-color: $background-control-selected;\\n}\\n\\n%menu-item-hover {\\n  background-color: $menu-item-hover;\\n  color: $text-normal;\\n}\\n\\n$sans-serif-font: \\\"Inter UI\\\", -apple-system, BlinkMacSystemFont, sans-serif;\\n\\n@mixin sans-serif {\\n  font-family: $sans-serif-font;\\n  font-feature-settings: \\\"tnum\\\";\\n}\\n\\n$monospace-font: \\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace;\\n@mixin monospace {\\n  font-family: $monospace-font;\\n}\\n\\n%list-item-icon {\\n  margin-right: 4px;\\n  svg {\\n    font-size: 16px;\\n    position: relative;\\n    top: -1px;\\n  }\\n}\\n\\n:export {\\n  monospaceFont: $monospace-font;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\",\"/**\\n * React Select\\n * ============\\n * Created by Jed Watson and Joss Mackison for KeystoneJS, http://www.keystonejs.com/\\n * https://twitter.com/jedwatson https://twitter.com/jossmackison https://twitter.com/keystonejs\\n * MIT License: https://github.com/JedWatson/react-select\\n*/\\n\\n// Variables\\n// ------------------------------\\n\\n// control options\\n$select-input-bg:                   #fff !default;\\n$select-input-bg-disabled:          #f9f9f9 !default;\\n$select-input-bg-focus:             $select-input-bg !default;\\n$select-input-border-color:         #ccc !default;\\n$select-input-border-radius:        4px !default;\\n$select-input-border-focus:         #08c !default; // blue\\n$select-input-box-shadow-focus:     inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 5px -1px fade($select-input-border-focus, 50%) !default;\\n$select-input-border-width:         1px !default;\\n$select-input-height:               36px !default;\\n$select-input-internal-height:      ($select-input-height - ($select-input-border-width * 2)) !default;\\n$select-input-placeholder:          #aaa !default;\\n$select-text-color:                 #333 !default;\\n$select-link-hover-color:           $select-input-border-focus !default;\\n$select-input-hover-box-shadow:     0 1px 0 rgba(0, 0, 0, 0.06) !default;\\n\\n$select-padding-vertical:           8px !default;\\n$select-padding-horizontal:         10px !default;\\n\\n// menu options\\n$select-menu-zindex:                1000 !default;\\n$select-menu-max-height:            200px !default;\\n$select-menu-box-shadow:            $select-input-hover-box-shadow !default;\\n\\n$select-option-color:               lighten($select-text-color, 20%) !default;\\n$select-option-bg:                  $select-input-bg !default;\\n$select-option-focused-color:       $select-text-color !default;\\n$select-option-focused-bg:          #f2f9fc !default; // pale blue\\n$select-option-selected-color:      $select-text-color !default;\\n$select-option-selected-bg:         #f5faff !default; // lightest blue\\n$select-option-disabled-color:      lighten($select-text-color, 60%) !default;\\n\\n$select-noresults-color:            lighten($select-text-color, 40%) !default;\\n\\n// clear \\\"x\\\" button\\n$select-clear-size:                 floor(($select-input-height / 2)) !default;\\n$select-clear-color:                #999 !default;\\n$select-clear-hover-color:          #D0021B !default; // red\\n$select-clear-width:                ($select-input-internal-height / 2) !default;\\n\\n// arrow indicator\\n$select-arrow-color:                #999 !default;\\n$select-arrow-color-hover:          #666 !default;\\n$select-arrow-width:                5px !default;\\n\\n// loading indicator\\n$select-loading-size:               16px !default;\\n$select-loading-color:              $select-text-color !default;\\n$select-loading-color-bg:           $select-input-border-color !default;\\n\\n// multi-select item\\n$select-item-border-radius:         2px !default;\\n$select-item-gutter:                5px !default;\\n$select-item-padding-vertical:      2px !default;\\n$select-item-padding-horizontal:    5px !default;\\n$select-item-font-size:             .9em !default;\\n$select-item-color:                 #08c !default; // pale blue\\n$select-item-bg:                    #f2f9fc !default;\\n$select-item-border-color:          darken($select-item-bg, 10%) !default;\\n$select-item-hover-color:           darken($select-item-color, 5%) !default; // pale blue\\n$select-item-hover-bg:              darken($select-item-bg, 5%) !default;\\n$select-item-disabled-color:        #333 !default;\\n$select-item-disabled-bg:           #fcfcfc !default;\\n$select-item-disabled-border-color: darken($select-item-disabled-bg, 10%) !default;\\n\",\"/* Collection default theme */\\n\\n.ReactVirtualized__Collection {\\n}\\n\\n.ReactVirtualized__Collection__innerScrollContainer {\\n}\\n\\n/* Grid default theme */\\n\\n.ReactVirtualized__Grid {\\n}\\n\\n.ReactVirtualized__Grid__innerScrollContainer {\\n}\\n\\n/* Table default theme */\\n\\n.ReactVirtualized__Table {\\n}\\n\\n.ReactVirtualized__Table__Grid {\\n}\\n\\n.ReactVirtualized__Table__headerRow {\\n  font-weight: 700;\\n  text-transform: uppercase;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n.ReactVirtualized__Table__row {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n\\n.ReactVirtualized__Table__headerTruncatedText {\\n  display: inline-block;\\n  max-width: 100%;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n}\\n\\n.ReactVirtualized__Table__headerColumn,\\n.ReactVirtualized__Table__rowColumn {\\n  margin-right: 10px;\\n  min-width: 0px;\\n}\\n.ReactVirtualized__Table__rowColumn {\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.ReactVirtualized__Table__headerColumn:first-of-type,\\n.ReactVirtualized__Table__rowColumn:first-of-type {\\n  margin-left: 10px;\\n}\\n.ReactVirtualized__Table__sortableHeaderColumn {\\n  cursor: pointer;\\n}\\n\\n.ReactVirtualized__Table__sortableHeaderIconContainer {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n.ReactVirtualized__Table__sortableHeaderIcon {\\n  -webkit-box-flex: 0;\\n      -ms-flex: 0 0 24px;\\n          flex: 0 0 24px;\\n  height: 1em;\\n  width: 1em;\\n  fill: currentColor;\\n}\\n\\n/* List default theme */\\n\\n.ReactVirtualized__List {\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNvdXJjZS9zdHlsZXMuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDhCQUE4Qjs7QUFFOUI7Q0FDQzs7QUFFRDtDQUNDOztBQUVELHdCQUF3Qjs7QUFFeEI7Q0FDQzs7QUFFRDtDQUNDOztBQUVELHlCQUF5Qjs7QUFFekI7Q0FDQzs7QUFFRDtDQUNDOztBQUVEO0VBQ0UsaUJBQWlCO0VBQ2pCLDBCQUEwQjtFQUMxQixxQkFBYztFQUFkLHFCQUFjO0VBQWQsY0FBYztFQUNkLCtCQUFvQjtFQUFwQiw4QkFBb0I7TUFBcEIsd0JBQW9CO1VBQXBCLG9CQUFvQjtFQUNwQiwwQkFBb0I7TUFBcEIsdUJBQW9CO1VBQXBCLG9CQUFvQjtDQUNyQjtBQUNEO0VBQ0UscUJBQWM7RUFBZCxxQkFBYztFQUFkLGNBQWM7RUFDZCwrQkFBb0I7RUFBcEIsOEJBQW9CO01BQXBCLHdCQUFvQjtVQUFwQixvQkFBb0I7RUFDcEIsMEJBQW9CO01BQXBCLHVCQUFvQjtVQUFwQixvQkFBb0I7Q0FDckI7O0FBRUQ7RUFDRSxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLG9CQUFvQjtFQUNwQix3QkFBd0I7RUFDeEIsaUJBQWlCO0NBQ2xCOztBQUVEOztFQUVFLG1CQUFtQjtFQUNuQixlQUFlO0NBQ2hCO0FBQ0Q7RUFDRSx3QkFBd0I7RUFDeEIsb0JBQW9CO0NBQ3JCOztBQUVEOztFQUVFLGtCQUFrQjtDQUNuQjtBQUNEO0VBQ0UsZ0JBQWdCO0NBQ2pCOztBQUVEO0VBQ0UscUJBQWM7RUFBZCxxQkFBYztFQUFkLGNBQWM7RUFDZCwwQkFBb0I7TUFBcEIsdUJBQW9CO1VBQXBCLG9CQUFvQjtDQUNyQjtBQUNEO0VBQ0Usb0JBQWU7TUFBZixtQkFBZTtVQUFmLGVBQWU7RUFDZixZQUFZO0VBQ1osV0FBVztFQUNYLG1CQUFtQjtDQUNwQjs7QUFFRCx3QkFBd0I7O0FBRXhCO0NBQ0MiLCJmaWxlIjoic3R5bGVzLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvbGxlY3Rpb24gZGVmYXVsdCB0aGVtZSAqL1xuXG4uUmVhY3RWaXJ0dWFsaXplZF9fQ29sbGVjdGlvbiB7XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19Db2xsZWN0aW9uX19pbm5lclNjcm9sbENvbnRhaW5lciB7XG59XG5cbi8qIEdyaWQgZGVmYXVsdCB0aGVtZSAqL1xuXG4uUmVhY3RWaXJ0dWFsaXplZF9fR3JpZCB7XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19HcmlkX19pbm5lclNjcm9sbENvbnRhaW5lciB7XG59XG5cbi8qIFRhYmxlIGRlZmF1bHQgdGhlbWUgKi9cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlIHtcbn1cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19HcmlkIHtcbn1cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19oZWFkZXJSb3cge1xuICBmb250LXdlaWdodDogNzAwO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19yb3cge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uUmVhY3RWaXJ0dWFsaXplZF9fVGFibGVfX2hlYWRlclRydW5jYXRlZFRleHQge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9faGVhZGVyQ29sdW1uLFxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19yb3dDb2x1bW4ge1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gIG1pbi13aWR0aDogMHB4O1xufVxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19yb3dDb2x1bW4ge1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLlJlYWN0VmlydHVhbGl6ZWRfX1RhYmxlX19oZWFkZXJDb2x1bW46Zmlyc3Qtb2YtdHlwZSxcbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fcm93Q29sdW1uOmZpcnN0LW9mLXR5cGUge1xuICBtYXJnaW4tbGVmdDogMTBweDtcbn1cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fc29ydGFibGVIZWFkZXJDb2x1bW4ge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fc29ydGFibGVIZWFkZXJJY29uQ29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5SZWFjdFZpcnR1YWxpemVkX19UYWJsZV9fc29ydGFibGVIZWFkZXJJY29uIHtcbiAgZmxleDogMCAwIDI0cHg7XG4gIGhlaWdodDogMWVtO1xuICB3aWR0aDogMWVtO1xuICBmaWxsOiBjdXJyZW50Q29sb3I7XG59XG5cbi8qIExpc3QgZGVmYXVsdCB0aGVtZSAqL1xuXG4uUmVhY3RWaXJ0dWFsaXplZF9fTGlzdCB7XG59XG4iXX0= */\",\"//\\n// Spinner\\n// ------------------------------\\n@import 'mixins';\\n\\n@mixin Select-spinner($size, $orbit, $satellite)\\n{\\n\\t@include animation( Select-animation-spin 400ms infinite linear );\\n\\t@include square($size);\\n\\tbox-sizing: border-box;\\n\\tborder-radius: 50%;\\n\\tborder: floor(($size / 8)) solid $orbit;\\n\\tborder-right-color: $satellite;\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\n}\\n\\n@keyframes Select-animation-spin {\\n\\tto { transform: rotate(1turn); }\\n}\\n@-webkit-keyframes Select-animation-spin {\\n\\tto { -webkit-transform: rotate(1turn); }\\n}\\n\",\"//\\n// Control\\n// ------------------------------\\n\\n@import 'spinner';\\n@import 'mixins';\\n\\n.Select {\\n\\tposition: relative;\\n\\n\\t// disable some browser-specific behaviours that break the input\\n\\tinput::-webkit-contacts-auto-fill-button,\\n\\tinput::-webkit-credentials-auto-fill-button {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\tinput::-ms-clear {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\tinput::-ms-reveal {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\n\\t// preferred box model\\n\\t&,\\n\\t& div,\\n\\t& input,\\n\\t& span {\\n\\t\\t@include box-sizing(border-box);\\n\\t}\\n\\n\\t// handle disabled state\\n\\t&.is-disabled {\\n\\t\\t.Select-arrow-zone {\\n\\t\\t\\tcursor: default;\\n\\t\\t\\tpointer-events: none;\\n\\t\\t}\\n\\n\\t\\t> .Select-control {\\n\\t\\t\\tbackground-color: $select-input-bg-disabled;\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tbox-shadow: none;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&.is-searchable {\\n\\t\\t&.is-open > .Select-control {\\n\\t\\t\\tcursor: text;\\n\\t\\t}\\n\\n\\t\\t&.is-focused:not(.is-open) > .Select-control {\\n\\t\\t\\tcursor: text;\\n\\t\\t}\\n\\t}\\n\\n\\t&.is-open > .Select-control {\\n\\t\\t@include border-bottom-radius( 0 );\\n\\t\\tbackground: $select-input-bg;\\n\\t\\tborder-color: darken($select-input-border-color, 10%) $select-input-border-color lighten($select-input-border-color, 5%);\\n\\n\\t\\t// flip the arrow so its pointing up when the menu is open\\n\\t\\t.Select-arrow {\\n\\t\\t\\ttop: -2px;\\n\\t\\t\\tborder-color: transparent transparent $select-arrow-color;\\n\\t\\t\\tborder-width: 0 $select-arrow-width $select-arrow-width;\\n\\t\\t}\\n\\t}\\n\\n\\t&.is-focused > .Select-control {\\n\\t\\tbackground: $select-input-bg-focus;\\n\\t}\\n\\n\\t&.is-focused:not(.is-open) > .Select-control {\\n\\t\\tborder-color: $select-input-border-focus lighten($select-input-border-focus, 5%) lighten($select-input-border-focus, 5%);\\n\\t\\tbox-shadow: $select-input-box-shadow-focus;\\n\\t}\\n\\n\\n\\t&.has-value.is-clearable.Select--single > .Select-control .Select-value {\\n\\t\\tpadding-right: ($select-clear-width + $select-arrow-width * 5);\\n\\t}\\n\\n\\t&.has-value.Select--single > .Select-control .Select-value,\\n\\t&.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value {\\n\\t\\t.Select-value-label {\\n\\t\\t\\tcolor: $select-text-color;\\n\\t\\t}\\n\\t\\ta.Select-value-label {\\n\\t\\t\\tcursor: pointer;\\n\\t\\t\\ttext-decoration: none;\\n\\n\\t\\t\\t&:hover,\\n\\t\\t\\t&:focus {\\n\\t\\t\\t\\tcolor: $select-link-hover-color;\\n\\t\\t\\t\\toutline: none;\\n\\t\\t\\t\\ttext-decoration: underline;\\n\\t\\t\\t}\\n\\n\\t\\t\\t&:focus {\\n\\t\\t\\t\\tbackground: $select-input-bg-focus;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t// fake-hide the input when the control is pseudo-focused\\n\\t&.has-value.is-pseudo-focused .Select-input {\\n\\t\\topacity: 0;\\n\\t}\\n\\n\\t&.is-open .Select-arrow,\\n\\t.Select-arrow-zone:hover > .Select-arrow {\\n\\t\\tborder-top-color: $select-arrow-color-hover;\\n\\t}\\n\\t&.Select--rtl {\\n\\t\\tdirection: rtl;\\n\\t\\ttext-align: right;\\n\\t}\\n}\\n\\n// base\\n\\n.Select-control {\\n\\tbackground-color: $select-input-bg;\\n\\tborder-color: lighten($select-input-border-color, 5%) $select-input-border-color darken($select-input-border-color, 10%);\\n\\tborder-radius: $select-input-border-radius;\\n\\tborder: $select-input-border-width solid $select-input-border-color;\\n\\tcolor: $select-text-color;\\n\\tcursor: default;\\n\\tdisplay: table;\\n\\tborder-spacing: 0;\\n\\tborder-collapse: separate;\\n\\theight: $select-input-height;\\n\\toutline: none;\\n\\toverflow: hidden;\\n\\tposition: relative;\\n\\twidth: 100%;\\n\\n\\t&:hover {\\n\\t\\tbox-shadow: $select-input-hover-box-shadow;\\n\\t}\\n\\n\\t.Select-input:focus {\\n\\t\\toutline: none;\\n\\t\\tbackground: $select-input-bg-focus;\\n\\t}\\n}\\n\\n// placeholder\\n.Select-placeholder,\\n.Select--single > .Select-control .Select-value {\\n\\tbottom: 0;\\n\\tcolor: $select-input-placeholder;\\n\\tleft: 0;\\n\\tline-height: $select-input-internal-height;\\n\\tpadding-left: $select-padding-horizontal;\\n\\tpadding-right: $select-padding-horizontal;\\n\\tposition: absolute;\\n\\tright: 0;\\n\\ttop: 0;\\n\\n\\t// crop text\\n\\tmax-width: 100%;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\twhite-space: nowrap;\\n}\\n\\n\\n// the <input> element users type in\\n\\n.Select-input {\\n\\t// inherits `display: inline-block` from \\\"react-input-autosize\\\"\\n\\theight: $select-input-internal-height;\\n\\tpadding-left: $select-padding-horizontal;\\n\\tpadding-right: $select-padding-horizontal;\\n\\tvertical-align: middle;\\n\\n\\t> input {\\n\\t\\twidth: 100%;\\n\\t\\tbackground: none transparent;\\n\\t\\tborder: 0 none;\\n\\t\\tbox-shadow: none;\\n\\t\\tcursor: default;\\n\\t\\tdisplay: inline-block;\\n\\t\\tfont-family: inherit;\\n\\t\\tfont-size: inherit;\\n\\t\\t// height: $select-input-internal-height;\\n\\t\\tmargin: 0;\\n\\t\\toutline: none;\\n\\t\\t// padding: 0;\\n\\t\\tline-height: 17px;  /* For IE 8 compatibility */\\n\\t\\tpadding: (($select-input-internal-height - 14) / 2 - 2) 0 (($select-input-internal-height - 14) / 2 + 2);  /* For IE 8 compatibility */\\n\\t\\t-webkit-appearance: none;\\n\\n\\t\\t.is-focused & {\\n\\t\\t\\tcursor: text;\\n\\t\\t}\\n\\t}\\n\\n}\\n\\n// fake input\\n.Select-control:not(.is-searchable) > .Select-input {\\n\\toutline: none;\\n}\\n\\n// loading indicator\\n.Select-loading-zone {\\n\\tcursor: pointer;\\n\\tdisplay: table-cell;\\n\\tposition: relative;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\twidth: $select-loading-size;\\n}\\n.Select-loading {\\n\\t@include Select-spinner($select-loading-size, $select-loading-color-bg, $select-loading-color);\\n\\tvertical-align: middle;\\n}\\n\\n\\n// the little cross that clears the field\\n\\n.Select-clear-zone {\\n\\t@include animation( Select-animation-fadeIn 200ms );\\n\\tcolor: $select-clear-color;\\n\\tcursor: pointer;\\n\\tdisplay: table-cell;\\n\\tposition: relative;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\twidth: $select-clear-width;\\n\\n\\t&:hover {\\n\\t\\tcolor: $select-clear-hover-color;\\n\\t}\\n}\\n.Select-clear {\\n\\tdisplay: inline-block;\\n\\tfont-size: $select-clear-size;\\n\\tline-height: 1;\\n}\\n.Select--multi .Select-clear-zone {\\n\\twidth: $select-clear-width;\\n}\\n\\n.Select--multi .Select-multi-value-wrapper {\\n  display: inline-block;\\n}\\n.Select .Select-aria-only {\\n\\tposition: absolute;\\n\\tdisplay: inline-block;\\n\\theight: 1px;\\n\\twidth: 1px;\\n\\tmargin: -1px;\\n\\tclip: rect(0,0,0,0);\\n\\toverflow: hidden;\\n\\tfloat: left;\\n}\\n\\n\\n// arrow indicator\\n\\n.Select-arrow-zone {\\n\\tcursor: pointer;\\n\\tdisplay: table-cell;\\n\\tposition: relative;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\twidth: ($select-arrow-width * 5);\\n\\tpadding-right: $select-arrow-width;\\n\\n\\t.Select--rtl & {\\n\\t\\tpadding-right: 0;\\n\\t\\tpadding-left: $select-arrow-width;\\n\\t}\\n}\\n\\n.Select-arrow {\\n\\tborder-color: $select-arrow-color transparent transparent;\\n\\tborder-style: solid;\\n\\tborder-width: $select-arrow-width $select-arrow-width ($select-arrow-width / 2);\\n\\tdisplay: inline-block;\\n\\theight: 0;\\n\\twidth: 0;\\n\\tposition: relative;\\n}\\n\\n\\n\\n\\n// Animation\\n// ------------------------------\\n\\n// fade in\\n\\n@-webkit-keyframes Select-animation-fadeIn {\\n\\tfrom { opacity: 0; }\\n\\tto { opacity: 1; }\\n}\\n@keyframes Select-animation-fadeIn {\\n\\tfrom { opacity: 0; }\\n\\tto { opacity: 1; }\\n}\\n\",\"//\\n// Mixins\\n// ------------------------------\\n\\n\\n// Utilities\\n\\n@mixin size($width, $height)\\n{\\n\\twidth: $width;\\n\\theight: $height;\\n}\\n@mixin square($size)\\n{\\n\\t@include size($size, $size);\\n}\\n@mixin border-top-radius($radius)\\n{\\n\\tborder-top-right-radius: $radius;\\n\\tborder-top-left-radius: $radius;\\n}\\n@mixin border-right-radius($radius)\\n{\\n\\tborder-bottom-right-radius: $radius;\\n\\tborder-top-right-radius: $radius;\\n}\\n@mixin border-bottom-radius($radius)\\n{\\n\\tborder-bottom-right-radius: $radius;\\n\\tborder-bottom-left-radius: $radius;\\n}\\n@mixin border-left-radius($radius)\\n{\\n\\tborder-bottom-left-radius: $radius;\\n\\tborder-top-left-radius: $radius;\\n}\\n\\n\\n// Vendor Prefixes\\n\\n@mixin animation($animation)\\n{\\n\\t-webkit-animation: $animation;\\n\\t-o-animation: $animation;\\n\\tanimation: $animation;\\n}\\n@mixin box-sizing($boxmodel)\\n{\\n\\t-webkit-box-sizing: $boxmodel;\\n\\t-moz-box-sizing: $boxmodel;\\n\\tbox-sizing: $boxmodel;\\n}\\n\",\"//\\n// Select Menu\\n// ------------------------------\\n\\n\\n// wrapper around the menu\\n\\n.Select-menu-outer {\\n\\t// Unfortunately, having both border-radius and allows scrolling using overflow defined on the same\\n\\t// element forces the browser to repaint on scroll.  However, if these definitions are split into an\\n\\t// outer and an inner element, the browser is able to optimize the scrolling behavior and does not\\n\\t// have to repaint on scroll.\\n\\t@include border-bottom-radius( $select-input-border-radius );\\n\\tbackground-color: $select-input-bg;\\n\\tborder: 1px solid $select-input-border-color;\\n\\tborder-top-color: mix($select-input-bg, $select-input-border-color, 50%);\\n\\tbox-shadow: $select-menu-box-shadow;\\n\\tbox-sizing: border-box;\\n\\tmargin-top: -1px;\\n\\tmax-height: $select-menu-max-height;\\n\\tposition: absolute;\\n\\tleft: 0;\\n\\ttop: 100%;\\n\\twidth: 100%;\\n\\tz-index: $select-menu-zindex;\\n\\t-webkit-overflow-scrolling: touch;\\n}\\n\\n\\n// wrapper\\n\\n.Select-menu {\\n\\tmax-height: ($select-menu-max-height - 2px);\\n\\toverflow-y: auto;\\n}\\n\\n\\n// options\\n\\n.Select-option {\\n\\tbox-sizing: border-box;\\n\\tbackground-color: $select-option-bg;\\n\\tcolor: $select-option-color;\\n\\tcursor: pointer;\\n\\tdisplay: block;\\n\\tpadding: $select-padding-vertical $select-padding-horizontal;\\n\\n\\t&:last-child {\\n\\t\\t@include border-bottom-radius( $select-input-border-radius );\\n\\t}\\n\\n\\t&.is-selected {\\n\\t\\tbackground-color: $select-option-selected-bg;\\n\\t\\tcolor: $select-option-selected-color;\\n\\t}\\n\\n\\t&.is-focused {\\n\\t\\tbackground-color: $select-option-focused-bg;\\n\\t\\tcolor: $select-option-focused-color;\\n\\t}\\n\\n\\t&.is-disabled {\\n\\t\\tcolor: $select-option-disabled-color;\\n\\t\\tcursor: default;\\n\\t}\\n\\n}\\n\\n\\n// no results\\n\\n.Select-noresults {\\n\\tbox-sizing: border-box;\\n\\tcolor: $select-noresults-color;\\n\\tcursor: default;\\n\\tdisplay: block;\\n\\tpadding: $select-padding-vertical $select-padding-horizontal;\\n}\\n\",\"//\\n// Multi-Select\\n// ------------------------------\\n\\n\\n// Base\\n\\n.Select--multi {\\n\\n\\t// add margin to the input element\\n\\t.Select-input {\\n\\t\\tvertical-align: middle;\\n\\t\\t// border: 1px solid transparent;\\n\\t\\tmargin-left: $select-padding-horizontal;\\n\\t\\tpadding: 0;\\n\\t}\\n\\t&.Select--rtl .Select-input {\\n\\t\\tmargin-left: 0;\\n\\t\\tmargin-right: $select-padding-horizontal;\\n\\t}\\n\\n\\t// reduce margin once there is value\\n\\t&.has-value .Select-input {\\n\\t\\tmargin-left: $select-item-gutter;\\n\\t}\\n\\n\\t// Items\\n\\t.Select-value {\\n\\t\\tbackground-color: $select-item-bg;\\n\\t\\tborder-radius: $select-item-border-radius;\\n\\t\\tborder: 1px solid $select-item-border-color;\\n\\t\\tcolor: $select-item-color;\\n\\t\\tdisplay: inline-block;\\n\\t\\tfont-size: $select-item-font-size;\\n\\t\\tmargin-left: $select-item-gutter;\\n\\t\\tmargin-top: $select-item-gutter;\\n\\t\\tvertical-align: top;\\n\\t}\\n\\n\\t// common\\n\\t.Select-value-icon,\\n\\t.Select-value-label {\\n\\t\\tdisplay: inline-block;\\n\\t\\tvertical-align: middle;\\n\\t}\\n\\n\\t// label\\n\\t.Select-value-label {\\n\\t\\t@include border-right-radius( $select-item-border-radius );\\n\\t\\tcursor: default;\\n\\t\\tpadding: $select-item-padding-vertical $select-item-padding-horizontal;\\n\\t}\\n\\ta.Select-value-label {\\n\\t\\tcolor: $select-item-color;\\n\\t\\tcursor: pointer;\\n\\t\\ttext-decoration: none;\\n\\n\\t\\t&:hover {\\n\\t\\t\\ttext-decoration: underline;\\n\\t\\t}\\n\\t}\\n\\n\\t// icon\\n\\t.Select-value-icon {\\n\\t\\tcursor: pointer;\\n\\t\\t@include border-left-radius( $select-item-border-radius );\\n\\t\\tborder-right: 1px solid $select-item-border-color;\\n\\n\\t\\t// move the baseline up by 1px\\n\\t\\tpadding: ($select-item-padding-vertical - 1) $select-item-padding-horizontal ($select-item-padding-vertical + 1);\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\tbackground-color: $select-item-hover-bg;\\n\\t\\t\\tcolor: $select-item-hover-color;\\n\\t\\t}\\n\\t\\t&:active {\\n\\t\\t\\tbackground-color: $select-item-border-color;\\n\\t\\t}\\n\\t}\\n\\n\\t&.Select--rtl {\\n\\t\\t.Select-value {\\n\\t\\t  margin-left: 0;\\n\\t\\t  margin-right: $select-item-gutter;\\n\\t\\t}\\n\\t\\t.Select-value-icon {\\n\\t\\t\\tborder-right: none;\\n\\t\\t\\tborder-left: 1px solid $select-item-border-color;\\n\\t\\t}\\n\\t}\\n}\\n\\n.Select--multi.is-disabled {\\n\\t.Select-value {\\n\\t\\tbackground-color: $select-item-disabled-bg;\\n\\t\\tborder: 1px solid $select-item-disabled-border-color;\\n\\t\\tcolor: $select-item-disabled-color;\\n\\t}\\n\\t// icon\\n\\t.Select-value-icon {\\n\\t\\tcursor: not-allowed;\\n\\t\\tborder-right: 1px solid $select-item-disabled-border-color;\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus,\\n\\t\\t&:active {\\n\\t\\t\\tbackground-color: $select-item-disabled-bg;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"monospaceFont\": \"\\\"Roboto Mono\\\", Menlo, Inconsolata, \\\"Courier New\\\", Courier, monospace\",\n\t\"optionHeight\": \"24\",\n\t\"content\": \"packages-webviz-core-src-panels-Rosout-index-module-4nshd--content\",\n\t\"filtersBar\": \"packages-webviz-core-src-panels-Rosout-index-module-42gh9--filtersBar\",\n\t\"severityFilter\": \"packages-webviz-core-src-panels-Rosout-index-module-2nczq--severityFilter\",\n\t\"nodeFilter\": \"packages-webviz-core-src-panels-Rosout-index-module-3tekj--nodeFilter\",\n\t\"itemsCountField\": \"packages-webviz-core-src-panels-Rosout-index-module-hu4fx--itemsCountField\",\n\t\"is-focused\": \"packages-webviz-core-src-panels-Rosout-index-module-jr6wb--is-focused\",\n\t\"Select--rtl\": \"packages-webviz-core-src-panels-Rosout-index-module-33x8g--Select--rtl\",\n\t\"Select-animation-spin\": \"packages-webviz-core-src-panels-Rosout-index-module-4nj9t--Select-animation-spin\",\n\t\"Select-animation-fadeIn\": \"packages-webviz-core-src-panels-Rosout-index-module-2xhh8--Select-animation-fadeIn\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport _ from \"lodash\";\nimport React from \"react\";\nimport type { Time } from \"rosbag\";\n\nimport LevelToString from \"./LevelToString\";\nimport style from \"./LogMessage.module.scss\";\nimport { type Header } from \"webviz-core/src/types/Messages\";\n\n// pad the start of `val` with 0's to make the total string length `count` size\nfunction PadStart(val, count) {\n  return _.padStart(`${val}`, count, \"0\");\n}\n\nfunction Stamp(props: { stamp: Time }) {\n  const stamp = props.stamp;\n  return (\n    <span>\n      {PadStart(stamp.sec, 10)}.{PadStart(stamp.nsec, 9)}\n    </span>\n  );\n}\n\ntype Props = {|\n  msg: { file: string, line: string, level: number, name: string, msg: string, header: Header },\n|};\n\n// $FlowFixMe - flow doesn't have a definition for React.memo\nexport default React.memo(function LogMessage({ msg }: Props) {\n  const altStr = `${msg.file}:${msg.line}`;\n\n  const strLevel = LevelToString(msg.level);\n\n  const levelClassName = style[strLevel.toLocaleLowerCase()];\n\n  // the first message line is rendered with the info/stamp/name\n  // following newlines are rendered on their own line\n  const lines = msg.msg.split(\"\\n\");\n  return (\n    <div title={altStr} className={`${style.container} ${levelClassName}`}>\n      <div>\n        <span>[{_.padStart(strLevel, 5, \" \")}]</span>\n        <span>\n          [<Stamp stamp={msg.header.stamp} />]\n        </span>\n        <span>\n          [{msg.name}\n          ]:\n        </span>\n        <span>&nbsp;</span>\n        <span>{lines[0]}</span>\n      </div>\n      {/* extra lines */}\n      <div>\n        {/* using array index as key is desired here since the index does not change */}\n        {lines.slice(1).map((line, idx) => {\n          return (\n            <div key={idx}>\n              &nbsp;&nbsp;&nbsp;&nbsp;\n              {line}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n});\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-Rosout-LogMessage-module-3paw6--container {\\n  text-indent: -20px;\\n  padding-left: 20px;\\n  white-space: pre-wrap;\\n  line-height: 1.2; }\\n\\n.packages-webviz-core-src-panels-Rosout-LogMessage-module-nvhh6--fatal {\\n  color: #ff7c96;\\n  font-weight: bold; }\\n\\n.packages-webviz-core-src-panels-Rosout-LogMessage-module-5htzm--error {\\n  color: #ff7c96; }\\n\\n.packages-webviz-core-src-panels-Rosout-LogMessage-module-rj2kj--warn {\\n  color: #ccb862; }\\n\\n.packages-webviz-core-src-panels-Rosout-LogMessage-module-3zsp7--info {\\n  color: #586e75; }\\n\\n.packages-webviz-core-src-panels-Rosout-LogMessage-module-4bs2y--debug {\\n  color: #93a1a1; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/Rosout/LogMessage.module.scss\",\"/home/circleci/project/packages/webviz-core/src/styles/colors.module.scss\"],\"names\":[],\"mappings\":\"AAQA;EACE,mBAAkB;EAClB,mBAAkB;EAClB,sBAAqB;EACrB,iBAAgB,EACjB;;AAED;EACE,eCwBW;EDvBX,kBAAiB,EAClB;;AAED;EACE,eCmBW,EDlBZ;;AAED;EACE,eCcc,EDbf;;AAED;EACE,eAAc,EACf;;AAED;EACE,eAAc,EACf\",\"file\":\"LogMessage.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n@import \\\"~webviz-core/src/styles/colors.module.scss\\\";\\n\\n.container {\\n  text-indent: -20px;\\n  padding-left: 20px;\\n  white-space: pre-wrap;\\n  line-height: 1.2;\\n}\\n\\n.fatal {\\n  color: $red;\\n  font-weight: bold;\\n}\\n\\n.error {\\n  color: $red;\\n}\\n\\n.warn {\\n  color: $orange;\\n}\\n\\n.info {\\n  color: #586e75;\\n}\\n\\n.debug {\\n  color: #93a1a1;\\n}\\n\",\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n$background: #121217;\\n$background-control: rgba(247, 247, 243, 0.1);\\n$background-control-selected: rgba(59, 46, 118, 0.6);\\n$toolbar-background: rgba(0, 0, 0, 0.9);\\n$tooltip-background: rgba(71, 69, 81, 0.9);\\n\\n// $text-control: mix($background, white, 25%); //#ededed;\\n$text-bright: rgba(247, 247, 243, 0.88);\\n$text-normal: rgba(247, 247, 243, 0.77);\\n$text-disabled: rgba(247, 247, 243, 0.15);\\n$text-muted: rgba(247, 247, 243, 0.3);\\n$text-control: $text-normal;\\n$text-control-hover: rgba(247, 247, 243, 1);\\n\\n$text-input: rgba(0, 0, 0, 0.8);\\n$text-input-disabled: rgba(0, 0, 0, 0.3);\\n\\n$highlight: #29bee7;\\n\\n$menu-item-selected: $background-control-selected;\\n$menu-item-hover: #3b2e76;\\n\\n$divider: rgba(247, 247, 243, 0.1);\\n\\n$green: #05d27d;\\n$light-green: #5cd6a9;\\n$yellow: #f5d358;\\n$light-purple: #c1c5d6;\\n$grey: #e7e9ef;\\n$panel-background: #1a1a1f;\\n$toolbar-fixed: #1f1e27;\\n$toolbar: #2d2c33;\\n$accent: #22b5ff;\\n$orange: #ccb862;\\n$red: #ff7c96;\\n\\n:export {\\n  highlight: $highlight;\\n  green: $green;\\n  lightGreen: $light-green;\\n  accent: $accent;\\n  yellow: $yellow;\\n  lightPurple: $light-purple;\\n  grey: $grey;\\n  panelBackground: $panel-background;\\n  orange: $orange;\\n  toolbar: $toolbar;\\n  red: $red;\\n  divider: $divider;\\n  tooltipBackground: $tooltip-background;\\n  textMuted: $text-muted;\\n  textBright: $text-bright;\\n  textDisabled: $text-disabled;\\n  backgroundControl: $background-control;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"highlight\": \"#29bee7\",\n\t\"green\": \"#05d27d\",\n\t\"lightGreen\": \"#5cd6a9\",\n\t\"accent\": \"#22b5ff\",\n\t\"yellow\": \"#f5d358\",\n\t\"lightPurple\": \"#c1c5d6\",\n\t\"grey\": \"#e7e9ef\",\n\t\"panelBackground\": \"#1a1a1f\",\n\t\"orange\": \"#ccb862\",\n\t\"toolbar\": \"#2d2c33\",\n\t\"red\": \"#ff7c96\",\n\t\"divider\": \"rgba(247, 247, 243, 0.1)\",\n\t\"tooltipBackground\": \"rgba(71, 69, 81, 0.9)\",\n\t\"textMuted\": \"rgba(247, 247, 243, 0.3)\",\n\t\"textBright\": \"rgba(247, 247, 243, 0.88)\",\n\t\"textDisabled\": \"rgba(247, 247, 243, 0.15)\",\n\t\"backgroundControl\": \"rgba(247, 247, 243, 0.1)\",\n\t\"container\": \"packages-webviz-core-src-panels-Rosout-LogMessage-module-3paw6--container\",\n\t\"fatal\": \"packages-webviz-core-src-panels-Rosout-LogMessage-module-nvhh6--fatal\",\n\t\"error\": \"packages-webviz-core-src-panels-Rosout-LogMessage-module-5htzm--error\",\n\t\"warn\": \"packages-webviz-core-src-panels-Rosout-LogMessage-module-rj2kj--warn\",\n\t\"info\": \"packages-webviz-core-src-panels-Rosout-LogMessage-module-3zsp7--info\",\n\t\"debug\": \"packages-webviz-core-src-panels-Rosout-LogMessage-module-4bs2y--debug\"\n};","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport _ from \"lodash\";\nimport * as React from \"react\";\nimport { List, AutoSizer, CellMeasurer, CellMeasurerCache } from \"react-virtualized\";\nimport uuid from \"uuid\";\n\nimport Button from \"webviz-core/src/components/Button\";\n\n// TODO(Audrey): import types from react-virtualized once they are available\n// RowRendererParams, CellMeasureCache\ntype RowRendererParams = {|\n  className: string,\n  columns: any[],\n  index: number,\n  isScrolling: boolean,\n  onRowClick: ?() => void,\n  onRowDoubleClick: ?() => void,\n  onRowMouseOver: ?() => void,\n  onRowMouseOut: ?() => void,\n  rowData: any,\n  style: StyleObj,\n  parent?: any,\n  key: number | string,\n|};\n\ntype RenderRowInput<Item> = {| ...RowRendererParams, item: Item |};\n\nexport type RenderRow<Item> = (RenderRowInput<Item>) => React.Node;\n\n// List for showing large number of items, which are expected to be appended to the end regularly.\n// Automatically scrolls to the bottom unless you explicitly scroll up.\nfunction LogList<Item>({ items, renderRow }: {| items: $ReadOnlyArray<Item>, renderRow: RenderRow<Item> |}) {\n  // Automatically scrolling to the bottom by default.\n  const [autoScroll, setAutoScroll] = React.useState(true);\n\n  // For keeping a reference to the container <div>. Unfortunately there don't seem to be other\n  // convenient ways to do this; e.g. `ref` doesn't work.\n  const listId = React.useRef<string>(uuid.v4());\n\n  // Cache for item heights.\n  const cache = React.useRef<CellMeasurerCache>(new CellMeasurerCache({ fixedWidth: true }));\n\n  // Keep track of the last width to see if we need to clear the cache.\n  const lastWidth = React.useRef<number>(-1);\n\n  // Keep track of the last items that we rendered to see if we need to clear the cache.\n  const lastItems = React.useRef<$ReadOnlyArray<Item>>([]);\n\n  // Last time we rendered; used in `onScroll`.\n  const lastRenderTime = React.useRef<number>(0);\n  lastRenderTime.current = Date.now();\n\n  // If we have fewer items now, or if any of the old items don't match any more, we have to clear\n  // the cache of heights.\n  if (items.length < lastItems.current.length || !lastItems.current.every((item, index) => item === items[index])) {\n    cache.current.clearAll();\n  }\n  lastItems.current = items;\n\n  // `onWheel` is only called when the user explicitly scrolls using the scroll wheel or track pad.\n  // This is reliable, so we don't need any buffers or checks. However, this doesn't cover all cases\n  // of users scrolling (e.g. keyboard or dragging the scroll bar) so we also need `onScroll` below.\n  const onWheel = React.useCallback(\n    () => {\n      const containerEl = document.getElementById(listId.current);\n      if (!containerEl) {\n        return;\n      }\n      const newAutoScroll = containerEl.scrollHeight - containerEl.scrollTop <= containerEl.clientHeight;\n      if (newAutoScroll !== autoScroll) {\n        setAutoScroll(newAutoScroll);\n      }\n    },\n    [autoScroll]\n  );\n\n  // As said above, we need `onScroll` to catch some of the user scroll events. However, it's also\n  // triggered when a scroll happens for a different reason, e.g. by the browser or initiated from\n  // our own code. There's unfortunately no easy way to differentiate between them, and often during\n  // rendering the `onScroll` events can't quite keep up with the actual rendering, so we require\n  // rendering to not have happened for a second, and we have a bit of a buffer for how much\n  // scrolling we require to have been done. In practice this seems to be working reasonably well.\n  const onScroll = React.useCallback(\n    () => {\n      if (Date.now() - lastRenderTime.current < 1000) {\n        return;\n      }\n      const containerEl = document.getElementById(listId.current);\n      if (!containerEl) {\n        return;\n      }\n      const newAutoScroll = containerEl.scrollHeight - containerEl.scrollTop <= containerEl.clientHeight + 5;\n      if (newAutoScroll !== autoScroll) {\n        setAutoScroll(newAutoScroll);\n      }\n    },\n    [autoScroll]\n  );\n\n  const onResetView = React.useCallback(() => {\n    setAutoScroll(true);\n  }, []);\n\n  return (\n    <AutoSizer>\n      {({ width, height }) => {\n        // If the width changed, row heights might have changed, so we need to clear the cache.\n        if (lastWidth.current !== width) {\n          cache.current.clearAll();\n        }\n        lastWidth.current = width;\n\n        return (\n          <div style={{ position: \"relative\", width, height }}>\n            <List\n              width={width}\n              height={height}\n              style={{ outline: \"none\" }}\n              deferredMeasurementCache={cache.current}\n              rowHeight={cache.current.rowHeight}\n              rowRenderer={(rowProps) => (\n                <CellMeasurer\n                  key={rowProps.key}\n                  cache={cache.current}\n                  parent={rowProps.parent}\n                  columnIndex={0}\n                  rowIndex={rowProps.index}>\n                  {renderRow({ ...rowProps, item: items[rowProps.index] })}\n                </CellMeasurer>\n              )}\n              rowCount={items.length}\n              overscanRowCount={10}\n              onScroll={onScroll}\n              id={listId.current}\n              containerProps={{ onWheel }}\n              {...(autoScroll ? { scrollToIndex: items.length - 1 } : undefined)}\n            />\n            {!autoScroll && (\n              <div style={{ position: \"absolute\", bottom: 5, right: 10 }}>\n                <Button tooltip=\"(shortcut: scroll down)\" onClick={onResetView}>\n                  reset view\n                </Button>\n              </div>\n            )}\n          </div>\n        );\n      }}\n    </AutoSizer>\n  );\n}\n\nexport default LogList;\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { type Node, useCallback } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport styled from \"styled-components\";\n\nimport EmptyState from \"webviz-core/src/components/EmptyState\";\nimport { useMessagePipeline } from \"webviz-core/src/components/MessagePipeline\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport SelectableTimestamp from \"webviz-core/src/components/SelectableTimestamp\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\nimport { formatDuration, subtractTimes } from \"webviz-core/src/util/time\";\n\nconst STableContainer = styled.div`\n  overflow: auto;\n`;\n\nconst STable = styled.div`\n  max-width: 100%;\n  min-width: 400px;\n  overflow: auto;\n`;\n\nconst SRow = styled.div`\n  &:nth-child(even) {\n    background: #333;\n  }\n`;\n\nconst SCell = styled.div`\n  border: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  font-size: 14px;\n  line-height: 1.6;\n  width: 50%;\n  display: inline-block;\n  padding: 2px 8px;\n`;\n\nconst SHeader = styled.div`\n  font-size: 14px;\n  border-bottom: #333 solid 2px;\n`;\n\nconst STitle = styled.div`\n  padding: 2px 8px;\n`;\n\nconst SHeaderItem = styled.div`\n  overflow: hidden;\n  white-space: nowrap;\n`;\n\nfunction SourceInfo(props: {}): Node {\n  const { topics, startTime, endTime } = useMessagePipeline(\n    useCallback(\n      ({ playerState: { activeData } }) =>\n        activeData\n          ? {\n              topics: activeData.topics,\n              startTime: activeData.startTime,\n              endTime: activeData.endTime,\n            }\n          : { topics: [], startTime: undefined, endTime: undefined },\n      []\n    )\n  );\n\n  return (\n    <>\n      <PanelToolbar floating />\n      {startTime && endTime ? (\n        <STableContainer>\n          <SHeader>\n            <SHeaderItem>\n              <STitle>Start time:</STitle>\n              <SelectableTimestamp\n                startTime={startTime}\n                endTime={endTime}\n                currentTime={startTime}\n                pausePlayback={() => {}}\n                seekPlayback={(_) => {}}\n              />\n            </SHeaderItem>\n            <SHeaderItem>\n              <STitle>End Time:</STitle>\n              <SelectableTimestamp\n                startTime={startTime}\n                endTime={endTime}\n                currentTime={endTime}\n                pausePlayback={() => {}}\n                seekPlayback={(_) => {}}\n              />\n            </SHeaderItem>\n            <SHeaderItem>\n              <STitle>Duration: {formatDuration(subtractTimes(endTime, startTime))}</STitle>\n            </SHeaderItem>\n          </SHeader>\n          <STable>\n            {topics.map((t) => (\n              <SRow key={t.name}>\n                <SCell\n                  title={`Click to copy topic name ${t.name} to clipboard.`}\n                  onClick={() => {\n                    clipboard.copy(t.name);\n                  }}>\n                  {t.name}\n                </SCell>\n                <SCell\n                  title={`Click to copy topic type ${t.datatype} to clipboard.`}\n                  onClick={() => {\n                    clipboard.copy(t.datatype);\n                  }}>\n                  {t.datatype}\n                </SCell>\n              </SRow>\n            ))}\n          </STable>\n        </STableContainer>\n      ) : (\n        <EmptyState>Waiting for player data...</EmptyState>\n      )}\n    </>\n  );\n}\n\nSourceInfo.panelType = \"SourceInfo\";\nSourceInfo.defaultConfig = {};\n\nexport default hot(Panel<{}>(SourceInfo));\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport * as React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\n\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { SaveConfig } from \"webviz-core/src/types/panels\";\n\n// Little dummy panel that just subscribes to a bunch of topics. Doesn't actually\n// do anything with them.\n\ntype Config = { topics: string };\ntype Props = { config: Config, saveConfig: SaveConfig<Config> };\n\nfunction SubscribeToList({ config, saveConfig }: Props): React.Node {\n  const topics = config.topics.split(/\\s*(?:\\n|,|\\s)\\s*/);\n  const messagesSeen = PanelAPI.useMessageReducer<number>({\n    topics,\n    restore: React.useCallback(() => 0, []),\n    addMessage: React.useCallback((seenBefore) => seenBefore + 1, []),\n  });\n  return (\n    <Flex col>\n      <PanelToolbar floating />\n      <textarea\n        style={{ flexGrow: 1, border: \"none\" }}\n        placeholder=\"add /some/topics/here separated by newlines or commas or whitespace\"\n        value={config.topics}\n        onChange={React.useCallback((event) => saveConfig({ topics: event.target.value }), [saveConfig])}\n      />\n      <div style={{ position: \"absolute\", bottom: 8, right: 12 }}>messages seen: {messagesSeen}</div>\n    </Flex>\n  );\n}\n\nSubscribeToList.panelType = \"SubscribeToList\";\nSubscribeToList.defaultConfig = { topics: \"\" };\n\nexport default hot(Panel<Config>(SubscribeToList));\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport { savePanelConfigs } from \"webviz-core/src/actions/panels\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport { usePanelContext } from \"webviz-core/src/components/PanelContext\";\nimport { UnconnectedPanelLayout } from \"webviz-core/src/components/PanelLayout\";\nimport { EmptyDropTarget } from \"webviz-core/src/panels/Tab/EmptyDropTarget\";\nimport { TabbedToolbar } from \"webviz-core/src/panels/Tab/TabbedToolbar\";\nimport { type DraggingTabPanelState, TabDndContext } from \"webviz-core/src/panels/Tab/TabDndContext\";\nimport type { TabPanelConfig as Config } from \"webviz-core/src/types/layouts\";\nimport type { SaveConfig } from \"webviz-core/src/types/panels\";\nimport { TAB_PANEL_TYPE } from \"webviz-core/src/util/globalConstants\";\nimport { DEFAULT_TAB_PANEL_CONFIG, updateTabPanelLayout } from \"webviz-core/src/util/layout\";\n\nconst SPanelCover = styled.div`\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  background: #1a1a1f;\n  position: absolute;\n`;\n\ntype Props = { config: Config, saveConfig: SaveConfig<Config> };\n\nfunction Tab({ config, saveConfig }: Props) {\n  const panelId = usePanelContext()?.id;\n  const dispatch = useDispatch();\n  const mosaicId = useSelector(({ mosaic }) => mosaic.mosaicId);\n  const savePanelConfigsFn = useCallback(dispatch(savePanelConfigs), [dispatch]);\n\n  const { tabs, activeTabIdx } = config;\n  const activeTab = tabs[activeTabIdx];\n  const activeLayout = activeTab?.layout;\n\n  // Holds the state of actively dragging tabs as they relate to this Tab Panel\n  const [draggingTabState, setDraggingTabState] = useState<DraggingTabPanelState>({\n    item: null,\n    isOver: false,\n  });\n\n  // Create the actions used by the tab\n  const selectTab = useCallback(\n    (idx) => {\n      saveConfig({ activeTabIdx: idx });\n    },\n    [saveConfig]\n  );\n  const setTabTitle = useCallback(\n    (idx, title) => {\n      const newTabs = tabs.slice();\n      newTabs[idx] = { ...tabs[idx], title };\n      saveConfig({ tabs: newTabs });\n    },\n    [saveConfig, tabs]\n  );\n  const removeTab = useCallback(\n    (idx) => {\n      const newTabs = tabs.slice(0, idx).concat(tabs.slice(idx + 1));\n      const lastIdx = tabs.length - 1;\n      saveConfig({ tabs: newTabs, activeTabIdx: activeTabIdx === lastIdx ? lastIdx - 1 : activeTabIdx });\n    },\n    [activeTabIdx, saveConfig, tabs]\n  );\n  const addTab = useCallback(\n    () => {\n      const newTab = { title: `${tabs.length + 1}`, layout: null };\n      saveConfig({ ...config, activeTabIdx: tabs.length, tabs: tabs.concat([newTab]) });\n    },\n    [config, saveConfig, tabs]\n  );\n  const onChangeLayout = useCallback(\n    (layout: string) => {\n      saveConfig(updateTabPanelLayout(layout, config));\n    },\n    [config, saveConfig]\n  );\n  const actions = useMemo(() => ({ addTab, removeTab, selectTab, setTabTitle }), [\n    addTab,\n    removeTab,\n    selectTab,\n    setTabTitle,\n  ]);\n\n  // If the user drags the active tab out of the toolbar, we'll hide the\n  // active layout in order to prevent tabs from dropping into child tabs.\n  const draggingTab = draggingTabState.item;\n  const preventTabDrop =\n    !!draggingTab &&\n    draggingTab.panelId === panelId &&\n    draggingTab.tabIndex === activeTabIdx &&\n    !draggingTabState.isOver;\n\n  return (\n    <Flex col>\n      <TabbedToolbar\n        panelId={panelId}\n        tabs={tabs}\n        actions={actions}\n        activeTabIdx={activeTabIdx}\n        setDraggingTabState={setDraggingTabState}\n      />\n      <Flex\n        style={{\n          position: \"relative\",\n        }}>\n        {activeLayout ? (\n          <TabDndContext.Provider value={{ preventTabDrop }}>\n            <UnconnectedPanelLayout\n              importHooks={false}\n              layout={activeLayout}\n              savePanelConfigs={savePanelConfigsFn}\n              onChange={onChangeLayout}\n              setMosaicId={() => {}}\n              mosaicId={mosaicId}\n              tabId={panelId}\n              removeRootDropTarget\n            />\n          </TabDndContext.Provider>\n        ) : (\n          <EmptyDropTarget mosaicId={mosaicId} tabId={panelId} onChangeLayout={onChangeLayout} />\n        )}\n        {preventTabDrop && <SPanelCover />}\n      </Flex>\n    </Flex>\n  );\n}\n\nTab.panelType = TAB_PANEL_TYPE;\nTab.defaultConfig = DEFAULT_TAB_PANEL_CONFIG;\n\nexport default hot(Panel<Config>(Tab));\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { useCallback, useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { MosaicDragType } from \"react-mosaic-component\";\nimport { useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport { savePanelConfigs } from \"webviz-core/src/actions/panels\";\nimport EmptyBoxSvg from \"webviz-core/src/assets/emptyBox.svg\";\nimport ChildToggle from \"webviz-core/src/components/ChildToggle\";\nimport Menu from \"webviz-core/src/components/Menu\";\nimport PanelList, { type PanelSelection } from \"webviz-core/src/panels/PanelList\";\nimport cssColors from \"webviz-core/src/styles/colors.module.scss\";\nimport { selectPanelOutput } from \"webviz-core/src/util/layout\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst SDropTarget = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  background-color: ${({ isOver }) => (isOver ? cssColors.textDisabled : \"transparent\")};\n  border: ${({ isOver }) => (isOver ? `1px solid ${cssColors.textMuted}` : \"none\")};\n`;\n\nconst SEmptyStateText = styled.div`\n  font-size: 16px;\n  margin: 16px 72px;\n  text-align: center;\n  line-height: 1.5;\n  color: rgba(247, 247, 243, 0.3);\n`;\n\nconst SPickAPanelText = styled.div`\n  cursor: pointer;\n  text-decoration: underline;\n  transition: color 0.1s;\n\n  &:hover {\n    color: ${colors.TEXTL1};\n  }\n`;\n\ntype Props = {|\n  mosaicId: ?string,\n  tabId: ?string,\n  onChangeLayout: (string) => void,\n|};\n\nexport const EmptyDropTarget = ({ mosaicId, tabId, onChangeLayout }: Props) => {\n  const dispatch = useDispatch();\n  const [showPanelList, setShowPanelList] = useState(false);\n  const toggleShowPanelList = useCallback(() => setShowPanelList(!showPanelList), [showPanelList]);\n\n  const [{ isOver }, drop] = useDrop({\n    accept: MosaicDragType.WINDOW,\n    drop: (item, monitor) => {\n      if (monitor.getItem().mosaicId === mosaicId) {\n        return {\n          tabId,\n        };\n      }\n    },\n    collect: (monitor, props) => ({\n      isOver: monitor.isOver(),\n    }),\n  });\n\n  const onPanelSelect = useCallback(\n    ({ type, config, relatedConfigs }: PanelSelection) => {\n      const { changePanelPayload, saveConfigsPayload } = selectPanelOutput(type, null, {\n        config,\n        relatedConfigs,\n      });\n      // i.e. there is only one panel in the layout.\n      if (typeof changePanelPayload.layout === \"string\") {\n        onChangeLayout(changePanelPayload.layout);\n        dispatch(savePanelConfigs(saveConfigsPayload));\n      }\n      window.ga(\"send\", \"event\", \"Panel\", \"Select\", type);\n    },\n    [dispatch, onChangeLayout]\n  );\n\n  return (\n    <SDropTarget ref={drop} isOver={isOver} data-test=\"empty-drop-target\">\n      <EmptyBoxSvg />\n      <SEmptyStateText>\n        Nothing here yet.\n        <br />\n        <ChildToggle\n          position=\"below\"\n          onToggle={toggleShowPanelList}\n          isOpen={showPanelList}\n          style={{ display: \"inline-flex\" }}>\n          <SPickAPanelText data-test=\"pick-a-panel\">Pick a panel</SPickAPanelText>\n          <Menu>\n            <PanelList onPanelSelect={onPanelSelect} />\n          </Menu>\n        </ChildToggle>{\" \"}\n        {\" or drag one in to get started.\"}\n      </SEmptyStateText>\n    </SDropTarget>\n  );\n};\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport React from \"react\";\nexport default ((_ref) => {\n  let {\n    styles = {}\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"styles\"]);\n\n  return React.createElement(\n    \"svg\",\n    _extends({ width: \"150\", height: \"64\", viewBox: \"0 0 150 64\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props),\n    React.createElement(\"ellipse\", { cx: \"75\", cy: \"53.5\", rx: \"75\", ry: \"10.5\", fill: \"#36363D\" }),\n    React.createElement(\"path\", { d: \"M16 19h116v28a6 6 0 0 1-6 6H22a6 6 0 0 1-6-6V19z\", fill: \"#404047\" }),\n    React.createElement(\"path\", { d: \"M17 18.82h115m-115 0v28a6 6 0 0 0 6 6h103a6 6 0 0 0 6-6v-28m-115 0L28.316 1H119l13 17.82\", stroke: \"#606066\", strokeWidth: \"2\", strokeLinecap: \"square\" }),\n    React.createElement(\"path\", { d: \"M57 29.5a3.5 3.5 0 0 1 3.5-3.5h27a3.5 3.5 0 1 1 0 7h-27a3.5 3.5 0 0 1-3.5-3.5z\", fill: \"#2D2C32\", stroke: \"#606066\", strokeWidth: \"2\" }),\n    React.createElement(\"rect\", { x: \"62\", y: \"6\", width: \"25\", height: \"5\", rx: \"2.5\", fill: \"#2D2C32\", stroke: \"#606066\", strokeWidth: \"2\" }),\n    React.createElement(\"path\", { stroke: \"#606066\", strokeWidth: \"2\", d: \"M29 1v18M119 1v18\" })\n  );\n});","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport PlusIcon from \"@mdi/svg/svg/plus.svg\";\nimport React, { useContext, useEffect } from \"react\";\nimport { type DropTargetMonitor, useDrop } from \"react-dnd\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport { savePanelConfigs } from \"webviz-core/src/actions/panels\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport { DraggableToolbarTab } from \"webviz-core/src/panels/Tab/DraggableToolbarTab\";\nimport helpContent from \"webviz-core/src/panels/Tab/index.help.md\";\nimport {\n  type DraggingTabItem,\n  TAB_DRAG_TYPE,\n  type TabActions,\n  TabDndContext,\n} from \"webviz-core/src/panels/Tab/TabDndContext\";\nimport type { TabConfig } from \"webviz-core/src/types/layouts\";\nimport { getSaveConfigsPayloadForMoveTab } from \"webviz-core/src/util/layout\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst STabbedToolbar = styled.div`\n  flex: 0 0;\n  display: flex;\n  position: relative;\n  flex-direction: column;\n\n  &:after {\n    border: 2px solid ${({ highlight }) => (highlight ? colors.DARK5 : \"transparent\")};\n    content: \"\";\n    height: 100%;\n    left: 0;\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: 1;\n  }\n`;\nconst STabs = styled.div`\n  flex: 1 1;\n  display: flex;\n  align-items: flex-end;\n`;\n\ntype Props = {|\n  panelId: string,\n  actions: TabActions,\n  tabs: TabConfig[],\n  activeTabIdx: number,\n  setDraggingTabState: ({ isOver: boolean, item: ?DraggingTabItem }) => void,\n|};\n\nexport function TabbedToolbar(props: Props) {\n  const { panelId, actions, tabs, activeTabIdx, setDraggingTabState } = props;\n\n  const dispatch = useDispatch();\n  const savedProps = useSelector(({ panels }) => panels.savedProps);\n  const { preventTabDrop } = useContext(TabDndContext);\n  const [{ isOver, item }, dropRef] = useDrop({\n    accept: TAB_DRAG_TYPE,\n    collect: (monitor) => ({\n      item: monitor.getItem(),\n      isOver: monitor.isOver(),\n    }),\n    canDrop: () => !preventTabDrop,\n    drop: (sourceItem: DraggingTabItem, monitor: DropTargetMonitor) => {\n      // Drop was already handled by DraggableToolTab, ignore here\n      if (monitor.didDrop()) {\n        return;\n      }\n      const source = {\n        panelId: sourceItem.panelId,\n        tabIndex: sourceItem.tabIndex,\n      };\n      const target = {\n        panelId,\n      };\n      const saveConfigsPayload = getSaveConfigsPayloadForMoveTab(source, target, savedProps);\n      dispatch(savePanelConfigs(saveConfigsPayload));\n    },\n  });\n  useEffect(\n    () => {\n      setDraggingTabState({ item, isOver });\n    },\n    [item, isOver, setDraggingTabState]\n  );\n\n  return (\n    <STabbedToolbar highlight={isOver}>\n      <PanelToolbar helpContent={helpContent} showHiddenControlsOnHover>\n        <STabs ref={dropRef} data-test=\"toolbar-droppable\">\n          {tabs.map((tab, i) => (\n            <DraggableToolbarTab\n              isActive={activeTabIdx === i}\n              key={i}\n              panelId={panelId}\n              setDraggingTabState={setDraggingTabState}\n              actions={actions}\n              tabCount={tabs.length}\n              tabIndex={i}\n              tabTitle={tab.title}\n            />\n          ))}\n          <Icon\n            small\n            fade\n            dataTest=\"add-tab\"\n            tooltip=\"Add tab\"\n            style={{\n              flexShrink: 0,\n              margin: \"4px 8px\",\n              transition: \"opacity 0.2s\",\n            }}\n            onClick={actions.addTab}>\n            <PlusIcon onMouseDown={(e) => e.preventDefault()} />\n          </Icon>\n        </STabs>\n      </PanelToolbar>\n    </STabbedToolbar>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React, { useRef } from \"react\";\nimport { useDrag, useDrop } from \"react-dnd\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { savePanelConfigs } from \"webviz-core/src/actions/panels\";\nimport { type DraggingTabItem, TAB_DRAG_TYPE, type TabActions } from \"webviz-core/src/panels/Tab/TabDndContext\";\nimport { ToolbarTab } from \"webviz-core/src/panels/Tab/ToolbarTab\";\nimport { getSaveConfigsPayloadForMoveTab } from \"webviz-core/src/util/layout\";\n\ntype Props = {|\n  isActive: boolean,\n  panelId: string,\n  actions: TabActions,\n  tabCount: number,\n  tabIndex: number,\n  tabTitle: string,\n  setDraggingTabState: ({ isOver: boolean, item: ?DraggingTabItem }) => void,\n|};\n\nexport function DraggableToolbarTab(props: Props) {\n  const { isActive, tabCount, actions, panelId, tabTitle, tabIndex } = props;\n\n  const ref = useRef(null);\n  const dispatch = useDispatch();\n  const savedProps = useSelector(({ panels }) => panels.savedProps);\n  const [{ isDragging }, dragRef] = useDrag({\n    item: { type: TAB_DRAG_TYPE, panelId, tabIndex },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [{ isOver }, dropRef] = useDrop({\n    accept: TAB_DRAG_TYPE,\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n    }),\n    drop: (sourceItem, monitor) => {\n      const source = {\n        panelId: sourceItem.panelId,\n        tabIndex: sourceItem.tabIndex,\n      };\n      const target = {\n        tabIndex,\n        panelId,\n      };\n      const saveConfigsPayload = getSaveConfigsPayloadForMoveTab(source, target, savedProps);\n      dispatch(savePanelConfigs(saveConfigsPayload));\n    },\n  });\n\n  dragRef(dropRef(ref)); // Combine drag and drop refs\n\n  const tabProps = {\n    tabTitle,\n    tabIndex,\n    isActive,\n    tabCount,\n    actions,\n    isDragging,\n    innerRef: ref,\n    hidden: isDragging,\n    highlight: isOver,\n  };\n  return <ToolbarTab {...tabProps} />;\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CheckIcon from \"@mdi/svg/svg/check.svg\";\nimport CloseIcon from \"@mdi/svg/svg/close.svg\";\nimport cx from \"classnames\";\nimport React, { type Ref as ReactRef, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport textWidth from \"text-width\";\n\nimport styles from \"./Tab.module.scss\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { type TabActions } from \"webviz-core/src/panels/Tab/TabDndContext\";\nimport colorsModule from \"webviz-core/src/styles/colors.module.scss\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst FONT_SIZE = 12;\nconst FONT_FAMILY = \"'Inter UI', -apple-system, BlinkMacSystemFont, sans-serif\";\n\nconst MAX_TAB_WIDTH = 100;\nconst MIN_ACTIVE_TAB_WIDTH = 40;\nconst MIN_OTHER_TAB_WIDTH = 14;\n\nfunction measureText(text: string): number {\n  return textWidth(text, { family: FONT_FAMILY, size: FONT_SIZE }) + 3;\n}\n\nconst STab = styled.div.attrs(({ isActive, value, tabCount, isDragging, editingTitle, hidden, highlight }) => ({\n  style: {\n    opacity: hidden ? 0 : 1,\n    borderColor: isDragging || highlight ? colors.DARK6 : \"transparent\",\n    boxShadow: isDragging ? `0px 2px 6px rgba(0, 0, 0, 0.2)` : \"none\",\n    backgroundColor: isActive ? colors.DARK4 : isDragging ? colorsModule.panelBackground : \"transparent\",\n    minWidth: isActive\n      ? `calc(max(${MIN_ACTIVE_TAB_WIDTH}px,  min(${Math.ceil(\n          measureText(value) + 30\n        )}px, ${MAX_TAB_WIDTH}px, 100% - ${MIN_OTHER_TAB_WIDTH * (tabCount - 1)}px)))`\n      : undefined,\n  },\n}))`\n  max-width: ${MAX_TAB_WIDTH}px;\n`;\n\nconst SInput = styled.input.attrs(({ editable }) => ({\n  style: {\n    pointerEvents: editable ? \"all\" : \"none\",\n  },\n}))`\n  width: 100%;\n`;\nconst clearBgStyle = { backgroundColor: \"transparent\", padding: 0 };\n\ntype Props = {|\n  hidden: boolean,\n  highlight: boolean,\n  innerRef: ?ReactRef<*>,\n  isActive: boolean,\n  isDragging: boolean,\n  actions: TabActions,\n  tabCount: number,\n  tabIndex: number,\n  tabTitle: string,\n|};\n\nexport function ToolbarTab(props: Props) {\n  const { tabIndex, isActive, tabCount, tabTitle, isDragging, actions, innerRef, highlight, hidden } = props;\n\n  const inputRef = useRef<?HTMLInputElement>(null);\n  const [title, setTitle] = useState<string>(tabTitle || \"\");\n  const [editingTitle, setEditingTitle] = useState<boolean>(false);\n  const onChangeTitleInput = useCallback((ev) => setTitle(ev.target.value), []);\n\n  const { selectTab, removeTab } = useMemo(\n    () => ({\n      selectTab: () => actions.selectTab(tabIndex),\n      removeTab: () => actions.removeTab(tabIndex),\n    }),\n    [actions, tabIndex]\n  );\n  const setTabTitle = useCallback(() => actions.setTabTitle(tabIndex, title), [actions, tabIndex, title]);\n\n  const onClickTab = useCallback(\n    () => {\n      if (!isActive) {\n        selectTab();\n      } else {\n        setEditingTitle(true);\n\n        setImmediate(() => {\n          if (inputRef.current) {\n            const inputEl: HTMLInputElement = inputRef.current;\n            inputEl.focus();\n            inputEl.select();\n          }\n        });\n      }\n    },\n    [isActive, selectTab, inputRef]\n  );\n\n  const endTitleEditing = useCallback(() => {\n    setEditingTitle(false);\n    if (document.activeElement) {\n      document.activeElement.blur();\n    }\n  }, []);\n\n  const confirmNewTitle = useCallback(\n    () => {\n      setTabTitle();\n      endTitleEditing();\n    },\n    [endTitleEditing, setTabTitle]\n  );\n\n  const resetTitle = useCallback(\n    () => {\n      setTitle(tabTitle || \"\");\n      endTitleEditing();\n    },\n    [endTitleEditing, tabTitle]\n  );\n\n  const onKeyDown = useCallback(\n    (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\n      if (event.key === \"Escape\") {\n        resetTitle();\n      } else if (event.key === \"Enter\") {\n        confirmNewTitle();\n      }\n    },\n    [confirmNewTitle, resetTitle]\n  );\n\n  // If the tab is no longer active, stop editing the title\n  useEffect(\n    () => {\n      if (!isActive) {\n        setEditingTitle(false);\n      }\n    },\n    [isActive]\n  );\n\n  // Update the cached title if the tabTitle changes\n  useEffect(\n    () => {\n      setTitle(tabTitle);\n    },\n    [tabTitle]\n  );\n\n  return (\n    <STab\n      hidden={hidden}\n      isDragging={isDragging}\n      isActive={isActive}\n      highlight={highlight}\n      tabCount={tabCount}\n      value={tabTitle || \"\"}\n      onClick={onClickTab}\n      ref={innerRef}\n      className={cx(styles.tab, { [styles.active]: isActive })}>\n      <Tooltip contents={editingTitle ? \"\" : tabTitle || \"Enter tab name\"} placement=\"top\">\n        {/* This div has to be here because the <ToolTip> overwrites the ref of its child*/}\n        <div>\n          <SInput\n            readonly={!editingTitle}\n            editable={editingTitle}\n            placeholder=\"Enter tab name\"\n            style={clearBgStyle}\n            value={title}\n            onChange={onChangeTitleInput}\n            onBlur={setTabTitle}\n            onKeyDown={onKeyDown}\n            ref={(el) => (inputRef.current = el)}\n          />\n        </div>\n      </Tooltip>\n      {isActive ? (\n        <Icon\n          small\n          fade\n          dataTest=\"tab-icon\"\n          tooltip={editingTitle ? \"Set new name\" : \"Remove tab\"}\n          style={{ width: \"22px\" }}\n          onClick={editingTitle ? confirmNewTitle : removeTab}>\n          {editingTitle ? (\n            <CheckIcon onMouseDown={(e) => e.preventDefault()} />\n          ) : (\n            <CloseIcon onMouseDown={(e) => e.preventDefault()} />\n          )}\n        </Icon>\n      ) : null}\n    </STab>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Tab.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"singleton\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Tab.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--14-oneOf-0!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/lib/loader.js??ref--16!./Tab.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".packages-webviz-core-src-panels-Tab-Tab-module-jv2mw--tab {\\n  position: relative;\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  width: 100%;\\n  height: 26px;\\n  padding: 0 6px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  border: 1px solid transparent; }\\n  .packages-webviz-core-src-panels-Tab-Tab-module-jv2mw--tab .packages-webviz-core-src-panels-Tab-Tab-module-2fjty--active {\\n    -webkit-user-select: all;\\n       -moz-user-select: all;\\n        -ms-user-select: all;\\n            user-select: all; }\\n  .packages-webviz-core-src-panels-Tab-Tab-module-jv2mw--tab:not(.packages-webviz-core-src-panels-Tab-Tab-module-2fjty--active) + .packages-webviz-core-src-panels-Tab-Tab-module-jv2mw--tab:not(.packages-webviz-core-src-panels-Tab-Tab-module-2fjty--active):before {\\n    border-left: 1px solid #2d2d33;\\n    content: \\\"\\\";\\n    height: 16px;\\n    left: 0;\\n    position: absolute;\\n    top: 4px;\\n    z-index: 1; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/circleci/project/packages/webviz-core/src/panels/Tab/Tab.module.scss\"],\"names\":[],\"mappings\":\"AAMA;EACE,mBAAkB;EAClB,4BAA2B;EAC3B,6BAA4B;EAC5B,qBAAa;EAAb,cAAa;EACb,uBAAmB;MAAnB,oBAAmB;EACnB,YAAW;EACX,aAAY;EACZ,eAAc;EACd,0BAAiB;KAAjB,uBAAiB;MAAjB,sBAAiB;UAAjB,kBAAiB;EACjB,8BAA6B,EAkB9B;EA5BD;IAaI,yBAAgB;OAAhB,sBAAgB;QAAhB,qBAAgB;YAAhB,iBAAgB,EACjB;EAdH;IAmBM,+BAAsC;IACtC,YAAW;IACX,aAAY;IACZ,QAAO;IACP,mBAAkB;IAClB,SAAQ;IACR,WAAU,EACX\",\"file\":\"Tab.module.scss\",\"sourcesContent\":[\"//  Copyright (c) 2018-present, Cruise LLC\\n//\\n//  This source code is licensed under the Apache License, Version 2.0,\\n//  found in the LICENSE file in the root directory of this source tree.\\n//  You may not use this file except in compliance with the License.\\n\\n.tab {\\n  position: relative;\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  height: 26px;\\n  padding: 0 6px;\\n  user-select: none;\\n  border: 1px solid transparent;\\n\\n  .active {\\n    user-select: all;\\n  }\\n\\n  &:not(.active) + &:not(.active) {\\n    // Use a before to add a separator line that doesn't span the full height of the tab\\n    &:before {\\n      border-left: 1px solid rgb(45, 45, 51);\\n      content: \\\"\\\";\\n      height: 16px;\\n      left: 0;\\n      position: absolute; // within .draggableTab\\n      top: 4px;\\n      z-index: 1;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"tab\": \"packages-webviz-core-src-panels-Tab-Tab-module-jv2mw--tab\",\n\t\"active\": \"packages-webviz-core-src-panels-Tab-Tab-module-2fjty--active\"\n};","module.exports = \"# Tab\\n\\nAllows users to group multiple Webviz panels in a mini layout, each nested under a tab.\\n\\n## Grouping Panels into a Tab Panel\\n\\nSelect or deselect any panel by pressing `Cmd` + click.\\n\\nUsers can choose one of 2 ways to group the selected panels:\\n\\n- Combine selected panels under a single tab in a new Tab panel\\n- Create a separate tab for each selected panel in a new Tab panel\\n\\nHovering over any of the selected panels will allow you to make your choice.\\n\"","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { flatten, pick, round } from \"lodash\";\nimport React, { useMemo, useCallback, useRef, useEffect } from \"react\";\nimport Dimensions from \"react-container-dimensions\";\nimport DocumentEvents from \"react-document-events\";\nimport ReactDOM from \"react-dom\";\nimport { hot } from \"react-hot-loader/root\";\nimport styled from \"styled-components\";\n\nimport helpContent from \"./index.help.md\";\nimport { PanelToolbarLabel, PanelToolbarInput } from \"webviz-core/shared/panelToolbarStyles\";\nimport EmptyState from \"webviz-core/src/components/EmptyState\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport { Item } from \"webviz-core/src/components/Menu\";\nimport MessagePathInput from \"webviz-core/src/components/MessagePathSyntax/MessagePathInput\";\nimport { useLatestMessageDataItem } from \"webviz-core/src/components/MessagePathSyntax/useLatestMessageDataItem\";\nimport Panel from \"webviz-core/src/components/Panel\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport ChartComponent from \"webviz-core/src/components/ReactChartjs\";\nimport tooltipStyles from \"webviz-core/src/components/Tooltip.module.scss\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst SContainer = styled.div`\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst SRoot = styled.div`\n  display: flex;\n  flex: 1 1 auto;\n  width: 100%;\n  overflow: hidden;\n`;\n\n// TODO: Autocomplete should only show paths that actually match the format this panel supports\nconst VALID_TYPES = [\"message\"];\nconst keysToPick = [\n  \"order\",\n  \"label\",\n  \"backgroundColor\",\n  \"borderColor\",\n  \"borderDash\",\n  \"borderWidth\",\n  \"pointBackgroundColor\",\n  \"pointBorderColor\",\n  \"pointBorderWidth\",\n  \"pointRadius\",\n  \"pointStyle\",\n  \"data\",\n];\n\nconst isValidMinMaxVal = (val?: string) => {\n  return val == null || val === \"\" || !isNaN(parseFloat(val));\n};\n\ntype Path = { value: string };\ntype Config = { path: Path, minXVal?: string, maxXVal?: string, minYVal?: string, maxYVal?: string };\ntype Props = { config: Config, saveConfig: ($Shape<Config>) => void };\nexport type Line = {\n  order: number,\n  label: string,\n  backgroundColor?: string,\n  borderColor?: string,\n  borderDash?: string,\n  borderWidth?: number,\n  pointBackgroundColor?: string,\n  pointBorderColor?: string,\n  pointBorderWidth?: number,\n  pointRadius?: number,\n  pointStyle?: string,\n  data: { x: number, y: number }[],\n};\n\n// NOTE: Keep this type (and its dependencies) in sync with the corresponding\n// Node Playground types in 'userUtils'.\ntype PlotMessage = {\n  lines: Line[],\n  points: Line[],\n  polygons: Line[],\n  title?: string,\n  yAxisLabel?: string,\n  xAxisLabel?: string,\n};\nfunction TwoDimensionalPlot(props: Props) {\n  const {\n    config: { path, minXVal, maxXVal, minYVal, maxYVal },\n    saveConfig,\n  } = props;\n\n  const tooltip = useRef<?HTMLDivElement>(null);\n  const chartComponent = useRef<?ChartComponent>(null);\n\n  const menuContent = useMemo(\n    () => (\n      <>\n        <Item>\n          <Flex>\n            <Flex col style={{ maxWidth: 100, marginRight: 5 }}>\n              <PanelToolbarLabel>Min X</PanelToolbarLabel>\n              <PanelToolbarInput\n                style={isValidMinMaxVal(minXVal) ? {} : { color: colors.REDL1 }}\n                value={minXVal}\n                onChange={({ target }) => saveConfig({ minXVal: target.value })}\n                onClick={(e) => e.stopPropagation()}\n                placeholder=\"auto\"\n              />\n            </Flex>\n            <Flex col style={{ maxWidth: 100 }}>\n              <PanelToolbarLabel>Max X</PanelToolbarLabel>\n              <PanelToolbarInput\n                style={isValidMinMaxVal(maxXVal) ? {} : { color: colors.REDL1 }}\n                value={maxXVal}\n                onChange={({ target }) => saveConfig({ maxXVal: target.value })}\n                onClick={(e) => e.stopPropagation()}\n                placeholder=\"auto\"\n              />\n            </Flex>\n          </Flex>\n        </Item>\n        <Item>\n          <Flex>\n            <Flex col style={{ maxWidth: 100, marginRight: 5 }}>\n              <PanelToolbarLabel>Min Y</PanelToolbarLabel>\n              <PanelToolbarInput\n                style={isValidMinMaxVal(minYVal) ? {} : { color: colors.REDL1 }}\n                value={minYVal}\n                onChange={({ target }) => saveConfig({ minYVal: target.value })}\n                onClick={(e) => e.stopPropagation()}\n                placeholder=\"auto\"\n              />\n            </Flex>\n            <Flex col style={{ maxWidth: 100 }}>\n              <PanelToolbarLabel>Max Y</PanelToolbarLabel>\n              <PanelToolbarInput\n                style={isValidMinMaxVal(maxYVal) ? {} : { color: colors.REDL1 }}\n                value={maxYVal}\n                onChange={({ target }) => saveConfig({ maxYVal: target.value })}\n                onClick={(e) => e.stopPropagation()}\n                placeholder=\"auto\"\n              />\n            </Flex>\n          </Flex>\n        </Item>\n      </>\n    ),\n    [maxXVal, maxYVal, minXVal, minYVal, saveConfig]\n  );\n\n  const getBufferedMinMax = useCallback((allVals: number[]) => {\n    const minVal = Math.min(...allVals);\n    const maxVal = Math.max(...allVals);\n    const diff = maxVal - minVal;\n    return {\n      min: !diff ? minVal - 1 : minVal - diff * 0.05,\n      max: !diff ? maxVal + 1 : maxVal + diff * 0.05,\n    };\n  }, []);\n\n  const removeTooltip = useCallback(() => {\n    if (tooltip.current) {\n      ReactDOM.unmountComponentAtNode(tooltip.current);\n    }\n    if (tooltip.current && tooltip.current.parentNode) {\n      // Satisfy flow.\n      tooltip.current.parentNode.removeChild(tooltip.current);\n      tooltip.current = null;\n    }\n  }, []);\n\n  // Always clean up tooltips when unmounting.\n  useEffect(\n    () => {\n      return () => {\n        removeTooltip();\n      };\n    },\n    [removeTooltip]\n  );\n\n  const item = useLatestMessageDataItem(path.value);\n  const message: PlotMessage = (item?.queriedData[0]?.value: any);\n  const { title, yAxisLabel, xAxisLabel, lines = [], points = [], polygons = [] } = message || {};\n  const data = useMemo(\n    () =>\n      message\n        ? {\n            datasets: [\n              ...lines.map((line, idx) => ({ ...pick(line, keysToPick), showLine: true, fill: false })),\n              ...points.map((point, idx) => pick(point, keysToPick)),\n              ...polygons.map((polygon, idx) => ({\n                ...pick(polygon, keysToPick),\n                data: polygon.data[0] ? polygon.data.concat([polygon.data[0]]) : polygon.data,\n                fill: true,\n                pointRadius: 0,\n                showLine: true,\n                lineTension: 0,\n              })),\n            ].sort((a, b) => (b.order || 0) - (a.order || 0)),\n          }\n        : { datasets: [] },\n    [lines, message, points, polygons]\n  );\n\n  const { allXs, allYs } = useMemo(\n    () => ({\n      allXs: flatten(data.datasets.map((dataset) => (dataset.data ? dataset.data.map(({ x }) => x) : []))),\n      allYs: flatten(data.datasets.map((dataset) => (dataset.data ? dataset.data.map(({ y }) => y) : []))),\n    }),\n    [data.datasets]\n  );\n\n  const options = useMemo(\n    () => ({\n      title: { display: !!title, text: title },\n      scales: {\n        yAxes: [\n          {\n            scaleLabel: { display: !!yAxisLabel, labelString: yAxisLabel },\n            ticks: {\n              min: parseFloat(minYVal) ? parseFloat(minYVal) : getBufferedMinMax(allYs).min,\n              max: parseFloat(maxYVal) ? parseFloat(maxYVal) : getBufferedMinMax(allYs).max,\n            },\n          },\n        ],\n        xAxes: [\n          {\n            scaleLabel: { display: !!xAxisLabel, labelString: xAxisLabel },\n            ticks: {\n              min: parseFloat(minXVal) ? parseFloat(minXVal) : getBufferedMinMax(allXs).min,\n              max: parseFloat(maxXVal) ? parseFloat(maxXVal) : getBufferedMinMax(allXs).max,\n            },\n          },\n        ],\n      },\n      color: colors.GRAY,\n      animation: { duration: 0 },\n      legend: { display: false },\n      pan: { enabled: false },\n      zoom: { enabled: false },\n      plugins: {},\n    }),\n    [allXs, allYs, getBufferedMinMax, maxXVal, maxYVal, minXVal, minYVal, title, xAxisLabel, yAxisLabel]\n  );\n\n  const onMouseMove = useCallback(\n    async (event: MouseEvent) => {\n      const currentChartComponent = chartComponent.current;\n      if (!currentChartComponent || !currentChartComponent.canvas) {\n        removeTooltip();\n        return;\n      }\n      const { canvas } = currentChartComponent;\n      const canvasRect = canvas.getBoundingClientRect();\n      const isTargetingCanvas = event.target === canvas;\n      if (\n        event.pageX < canvasRect.left ||\n        event.pageX > canvasRect.right ||\n        event.pageY < canvasRect.top ||\n        event.pageY > canvasRect.bottom ||\n        !isTargetingCanvas\n      ) {\n        removeTooltip();\n        return;\n      }\n\n      const tooltipElement = await currentChartComponent.getElementAtXAxis(event);\n      if (!tooltipElement) {\n        removeTooltip();\n        return;\n      }\n      let tooltipDatapoint, tooltipLabel;\n      for (const { data: dataPoints, label } of data.datasets) {\n        const datapoint = dataPoints.find(\n          (_datapoint) =>\n            _datapoint.x === tooltipElement.data.x && String(_datapoint.y) === String(tooltipElement.data.y)\n        );\n        if (datapoint) {\n          tooltipDatapoint = datapoint;\n          tooltipLabel = label;\n          break;\n        }\n      }\n      if (!tooltipDatapoint) {\n        removeTooltip();\n        return;\n      }\n\n      if (!tooltip.current) {\n        tooltip.current = document.createElement(\"div\");\n        if (canvas.parentNode) {\n          canvas.parentNode.appendChild(tooltip.current);\n        }\n      }\n\n      const currentTooltip = tooltip.current;\n      if (currentTooltip) {\n        let label = tooltipLabel ? `${tooltipLabel}: ` : \"\";\n        label += `(${round(tooltipDatapoint.x, 5)}, ${round(tooltipDatapoint.y, 5)})`;\n        ReactDOM.render(\n          <div\n            className={tooltipStyles.tooltip}\n            style={{ position: \"absolute\", left: tooltipElement.view.x, top: tooltipElement.view.y }}>\n            {label}\n          </div>,\n          currentTooltip\n        );\n      }\n    },\n    [data.datasets, removeTooltip]\n  );\n\n  const emptyMessage = !points.length && !lines.length && !polygons.length;\n\n  return (\n    <SContainer>\n      <PanelToolbar helpContent={helpContent} menuContent={menuContent}>\n        <MessagePathInput\n          path={path.value}\n          onChange={(newValue) => saveConfig({ path: { value: newValue } })}\n          inputStyle={{ height: \"100%\" }}\n          validTypes={VALID_TYPES}\n          placeholder=\"Select topic messages with 2D Plot data to visualize\"\n          autoSize\n        />\n      </PanelToolbar>\n      {!message ? (\n        <EmptyState>Waiting for next message</EmptyState>\n      ) : emptyMessage ? (\n        <EmptyState>No 2D Plot data (lines, points, polygons) to visualize</EmptyState>\n      ) : (\n        <SRoot>\n          <Dimensions>\n            {({ width, height }) => (\n              <ChartComponent\n                ref={chartComponent}\n                type=\"scatter\"\n                width={width}\n                height={height}\n                key={`${width}x${height}`}\n                options={options}\n                data={data}\n              />\n            )}\n          </Dimensions>\n          <DocumentEvents capture onMouseDown={onMouseMove} onMouseUp={onMouseMove} onMouseMove={onMouseMove} />\n        </SRoot>\n      )}\n    </SContainer>\n  );\n}\n\nTwoDimensionalPlot.panelType = \"TwoDimensionalPlot\";\nTwoDimensionalPlot.defaultConfig = { path: { value: \"\" } };\n\nexport default hot(Panel<Config>(TwoDimensionalPlot));\n","module.exports = \"# 2D Plot\\n\\nThe 2D Plot panel allows users to define within their ROS messages the points, lines, and polygons they would like to visualize on an x- and y-axis.\\n\\nThe panel's API currently allows users to specify the plot's title and axes labels, and supports the visualization of 3 types of markers: `points`, `lines`, and `polygons`. Any incoming message with these 3 keys pointing to an array of API-conforming marker objects can be displayed in the 2D Plot panel.\\n\\nThe chart options supported by the 2D Plot panel API are:\\n\\n- `title`\\n- `xAxisLabel`\\n- `yAxisLabel`\\n\\nThere are 3 types of datasets supported by the 2D PLot panel API - `lines`, `points`, and `polygons`. Each of these dataset types can be customized by the following options:\\n\\n- `order` - z-index\\n- `label` - unique ID\\n- `backgroundColor`\\n- `borderColor`\\n- `borderDash` - length and spacing of dashes - see [MDN](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash)\\n- `borderWidth`\\n- `pointBackgroundColor`\\n- `pointBorderColor`\\n- `pointBorderWidth`\\n- `pointRadius`\\n- `pointStyle` - can be 'circle', 'cross', 'crossRot', 'dash', 'line', 'rect', 'rectRounded', 'rectRot', or 'star'\\n- `data` - an array of coordinate objects, e.g. `[{x: 0, y: 1}, {x: 2, y: 5}]`\\n\\nOnly `label` and `data` are required - all other options have reasonable default values.\\n\\nBelow is a basic example of a message that could be consumed by the 2D Plot panel:\\n\\n```js\\n{\\n  op: \\\"message\\\",\\n  topic: \\\"/plot_a\\\",\\n  datatype: \\\"webviz_msgs/2DPlotMsg\\\",\\n  receiveTime: { sec: 1532375120, nsec: 317760607 },\\n  message: {\\n    title: \\\"This is Plot A\\\",\\n    xAxisLabel: \\\"This is my X axis label\\\",\\n    yAxisLabel: \\\"This is my Y axis label\\\",\\n    lines: [\\n      // 1 solid red line\\n      { label: \\\"solid-line\\\", borderColor: \\\"red\\\", backgroundColor: \\\"red\\\", data: [{ x: 0, y: 0 }, { x: 5, y: 5 }] },\\n      // 1 dashed pink line\\n      {\\n        label: \\\"dashed-line\\\",\\n        borderDash: [5, 5],\\n        borderColor: \\\"pink\\\",\\n        backgroundColor: \\\"pink\\\",\\n        data: [{ x: 1, y: 0.5 }, { x: 5, y: 3.5 }],\\n      },\\n    ],\\n    points: [\\n      // 3 circular blue points\\n      {\\n        label: \\\"circle-point\\\",\\n        pointBackgroundColor: \\\"blue\\\",\\n        data: [{ x: 1.5, y: 2.5 }, { x: 3, y: 4 }, { x: 4, y: 3.5 }],\\n      },\\n      // 2 teal Xs\\n      {\\n        label: \\\"cross-point\\\",\\n        pointBackgroundColor: \\\"teal\\\",\\n        pointBorderColor: \\\"teal\\\",\\n        pointStyle: \\\"crossRot\\\",\\n        pointRadius: 10,\\n        data: [{ x: 2, y: 1 }, { x: 4, y: 1 }],\\n      },\\n    ],\\n    polygons: [\\n      // 1 light gray triangle\\n      {\\n        label: \\\"polygon\\\",\\n        borderColor: \\\"lightgray\\\",\\n        backgroundColor: \\\"lightgray\\\",\\n        data: [{ x: 3, y: 1 }, { x: 4, y: 2 }, { x: 4.5, y: 1.5 }],\\n      },\\n    ],\\n  },\\n}\\n```\\n\"","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport { uniq } from \"lodash\";\nimport * as React from \"react\";\n\nimport * as PanelAPI from \"webviz-core/src/PanelAPI\";\nimport type { Message, Topic } from \"webviz-core/src/players/types\";\nimport { useChangeDetector } from \"webviz-core/src/util/hooks\";\n\n// This higher-order component provides compatibility between the old way of Panels receiving\n// messages, using \"frames\" and keeping state themselves, and the new `useMessageReducer` API which\n// manages state for you and allows in the future for more flexibility in accessing messages.\n//\n// TODO(JP): Remove FrameCompatibilityDEPRECATED from the last panel where it's still used: the 3d panel!\n// This is the \"Scenebuilder refactor\" project.\nexport function FrameCompatibilityDEPRECATED<Props>(ChildComponent: React.ComponentType<Props>, baseTopics: string[]) {\n  function FrameCompatibilityComponent(props: Props & { forwardedRef: any, topics: Topic[] }) {\n    const { forwardedRef, ...childProps } = props;\n    const [topics, setTopics] = React.useState<string[]>(baseTopics);\n    const componentSetSubscriptions = React.useCallback((newTopics: string[]) => {\n      setTopics(uniq(newTopics.concat(baseTopics || [])));\n    }, []);\n\n    // NOTE(JP): This is a huge abuse of the `useMessageReducer` API. Never use `useMessageReducer`\n    // in this way yourself!! `restore` and `addMessage` should be pure functions and not have\n    // side effects!\n    const frame = React.useRef({});\n    const lastClearTime = PanelAPI.useMessageReducer({\n      topics,\n      restore: React.useCallback(\n        () => {\n          frame.current = {};\n          return Date.now();\n        },\n        [frame]\n      ),\n      addMessage: React.useCallback(\n        (time, message: Message) => {\n          frame.current[message.topic] = frame.current[message.topic] || [];\n          frame.current[message.topic].push(message);\n          return time;\n        },\n        [frame]\n      ),\n    });\n\n    const cleared = useChangeDetector([lastClearTime], false);\n    const latestFrame = frame.current;\n    frame.current = {};\n\n    return (\n      <ChildComponent\n        {...childProps}\n        ref={forwardedRef}\n        frame={latestFrame}\n        setSubscriptions={componentSetSubscriptions}\n        cleared={cleared}\n      />\n    );\n  }\n\n  return hoistNonReactStatics(\n    React.forwardRef((props, ref) => {\n      return <FrameCompatibilityComponent {...props} forwardedRef={ref} />;\n    }),\n    ChildComponent\n  );\n}\n","module.exports = \"# 3D\\n\\nPlots visualization messages in a 3D scene.  You can select topics using the left-hand topic list; you can toggle the ability to follow orientation and manually select the frame you follow in the right-hand controls.  Selected topics will have their messages visualized within the 3D scene.  Topic selection is part of the configuration and will be saved between reloads and can be shared with `Import / Export Layout`.  This panel can be expanded / collapsed by clicking on the caret icon to the left of it.\\n\\nBy default the scene will follow the center of a frame.  When you move the camera, the camera will be offset from the center of that frame, but stay relative to that center.\\n\\nYou can toggle between a 3D perspective camera and a top-down, 2D orthographic camera of the scene by clicking on the _toggle 2D / 3D_ button in the top left of the 3D view panel.\\n\\n`Left-click + drag` on the scene to move the camera position parallel to the ground.  If 'follow' mode is on this will disengage it.\\n\\n`Right-click + drag` on the scene to pan and rotate the camera.  Dragging left/right will rotate the camera around the Z axis, and in 3D camera mode dragging top/bottom will pan the camera around the world's x/y axis.\\n\\n`Mouse-wheel` controls the 'zoom' of the camera.  Wheeling \\\"up\\\" will zoom the camera closer in while wheeling \\\"down\\\" will zoom the camera farther away.\\n\\nIn 3D camera mode, you can also use \\\"shooter controls\\\" (like those found in most popular desktop first-person shooter games) of `w` `a` `s` `d` to move the camera forward / left / backwards / right respective to the camera's position, and use `z` `x` to zoom in and out.  It's easy to get lost when using these controls as there is nothing anchoring the camera to the scene.\\n\\nHolding down `shift` in while performing any interaction with the camera will adjust values by 1/10th of their normal adjustments.  This allows precision movements and adjustments to the camera.\\n\\n_tip: If you get 'lost' in the scene and end up looking into infinite blank space and can't find your way back try clicking on 'follow' to snap the camera back to the default position._\\n\\n## Interacting with markers\\n\\nMarkers can be selected to see details about them. Open the \\\"Interactions\\\" panel from the right-side controls and click a marker to see information such as the topic name and marker contents.\\n\\nClicking on a point in a point cloud offers additional information, such as the color and coordinates of the point clicked. Selecting a point cloud also allows exporting all points from the point cloud message as a CSV.\\n\\n### Linking selected markers to global variables\\n\\nIt's possible to link fields from a selected marker to global variables. In the \\\"Clicked object\\\" tab of the \\\"Interactions\\\" panel, hover over a key in the JSON view of the marker. A button should appear that, when clicked, opens a dialog box that allows linking the field to a global variable.\\n\\nWhen a global variable is linked, selecting another marker that contains the same key will update the global variable. For example, with the tracked object \\\"id\\\" field linked to the global variable \\\"$trackedObjectId\\\", clicking another tracked object will update the \\\"$trackedObjectId\\\" field. This makes it easy to use the information about selected markers in other panels.\\n\\n## Drawing Polygons\\n\\n- To start a drawing, hold `ctrl` and click on the canvas. This will place the first point of the polygon. Continue holding ctrl and click as may times as you want to create a `string` of points connected by lines. To terminate your drawing release `ctrl` and click a final time. This will place one final point at the mouse location and 'close' the polygon. The polygon will still be selected until you click \\\"off\\\" of the polygon to anywhere else on the canvas.\\n- To select a polygon, click it once.\\n- To select a point within a polygon click it once.\\n- To move a polygon you have drawn you can click + drag on the polygon.\\n- To resize a polygon you can click + drag on an individual point within the polygon to move it. This will resize the polygon: all the points will remain connected to one another.\\n- To place a new point within an existing polygon, double click on a line within the polygon. This will bisect the line at the current double-click position, inserting a new point you may drag around to move.\\n- To delete the entire polygon, press the `delete` key when the polygon is selected.\\n- To delete an existing point in a polygon, double-click it, or press `delete` with a point selected.\\n\"","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CheckboxBlankOutlineIcon from \"@mdi/svg/svg/checkbox-blank-outline.svg\";\nimport CheckboxMarkedIcon from \"@mdi/svg/svg/checkbox-marked.svg\";\nimport React, {\n  type Node,\n  useMemo,\n  useRef,\n  useState,\n  useReducer,\n  useCallback,\n  useLayoutEffect,\n  useEffect,\n} from \"react\";\nimport {\n  PolygonBuilder,\n  DrawPolygons,\n  type CameraState,\n  type ReglClickInfo,\n  type MouseEventObject,\n  type Polygon,\n} from \"regl-worldview\";\nimport { type Time } from \"rosbag\";\n\nimport useTopicTree from \"./useTopicTree\";\nimport KeyListener from \"webviz-core/src/components/KeyListener\";\nimport { Item } from \"webviz-core/src/components/Menu\";\nimport PanelToolbar from \"webviz-core/src/components/PanelToolbar\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport useGlobalVariables from \"webviz-core/src/hooks/useGlobalVariables\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport useDataSourceInfo from \"webviz-core/src/PanelAPI/useDataSourceInfo\";\nimport { type Save3DConfig, type ThreeDimensionalVizConfig } from \"webviz-core/src/panels/ThreeDimensionalViz\";\nimport DebugStats from \"webviz-core/src/panels/ThreeDimensionalViz/DebugStats\";\nimport { POLYGON_TAB_TYPE, type DrawingTabType } from \"webviz-core/src/panels/ThreeDimensionalViz/DrawingTools\";\nimport MeasuringTool, { type MeasureInfo } from \"webviz-core/src/panels/ThreeDimensionalViz/DrawingTools/MeasuringTool\";\nimport { InteractionContextMenu } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions\";\nimport useLinkedGlobalVariables from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/useLinkedGlobalVariables\";\nimport styles from \"webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\";\nimport LayoutToolbar from \"webviz-core/src/panels/ThreeDimensionalViz/LayoutToolbar\";\nimport SceneBuilder from \"webviz-core/src/panels/ThreeDimensionalViz/SceneBuilder\";\nimport { useSearchText } from \"webviz-core/src/panels/ThreeDimensionalViz/SearchText\";\nimport {\n  getUpdatedGlobalVariablesBySelectedObject,\n  type TargetPose,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/threeDimensionalVizUtils\";\nimport TopicSettingsModal from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicSettingsModal\";\nimport TopicTree from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicTree\";\nimport { TOPIC_DISPLAY_MODES } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicViewModeSelector\";\nimport useSceneBuilderAndTransformsData from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/useSceneBuilderAndTransformsData\";\nimport Transforms from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport TransformsBuilder from \"webviz-core/src/panels/ThreeDimensionalViz/TransformsBuilder\";\nimport World from \"webviz-core/src/panels/ThreeDimensionalViz/World\";\nimport type { Frame, Topic } from \"webviz-core/src/players/types\";\nimport type { Extensions } from \"webviz-core/src/reducers/extensions\";\nimport inScreenshotTests from \"webviz-core/src/stories/inScreenshotTests\";\nimport { useShallowMemo } from \"webviz-core/src/util/hooks\";\nimport { videoRecordingMode } from \"webviz-core/src/util/inAutomatedRunMode\";\nimport { topicsByTopicName } from \"webviz-core/src/util/selectors\";\n\ntype EventName = \"onDoubleClick\" | \"onMouseMove\" | \"onMouseDown\" | \"onMouseUp\";\nexport type ClickedPosition = { clientX: number, clientY: number };\n\nexport type LayoutToolbarSharedProps = {|\n  cameraState: $Shape<CameraState>,\n  followOrientation: boolean,\n  followTf?: string | false,\n  onAlignXYAxis: () => void,\n  onCameraStateChange: (CameraState) => void,\n  onFollowChange: (followTf?: string | false, followOrientation?: boolean) => void,\n  saveConfig: Save3DConfig,\n  targetPose: ?TargetPose,\n  transforms: Transforms,\n  isPlaying?: boolean,\n|};\n\nexport type LayoutTopicSettingsSharedProps = {|\n  transforms: Transforms,\n  topics: Topic[],\n  saveConfig: Save3DConfig,\n|};\n\ntype Props = {|\n  ...LayoutToolbarSharedProps,\n  ...LayoutTopicSettingsSharedProps,\n  children?: Node,\n  cleared?: boolean,\n  currentTime: Time,\n  extensions: Extensions,\n  frame?: Frame,\n  helpContent: Node | string,\n  isPlaying?: boolean,\n  config: ThreeDimensionalVizConfig,\n  saveConfig: Save3DConfig,\n  setSubscriptions: (subscriptions: string[]) => void,\n  topics: Topic[],\n  transforms: Transforms,\n|};\n\ntype SelectedObjectState = {\n  clickedPosition: ClickedPosition,\n  selectedObject: ?MouseEventObject, // to be set when clicked a single object or selected one of the clicked topics from the context menu\n  selectedObjects: MouseEventObject[],\n};\n\nexport type EditTopicState = { tooltipPosX: number, topic: Topic };\n\nexport default function Layout({\n  cameraState,\n  children,\n  cleared,\n  currentTime,\n  extensions,\n  followOrientation,\n  followTf,\n  frame,\n  helpContent,\n  isPlaying,\n  onAlignXYAxis,\n  onCameraStateChange,\n  onFollowChange,\n  saveConfig,\n  topics,\n  targetPose,\n  transforms,\n  setSubscriptions,\n  config,\n  config: {\n    autoTextBackgroundColor,\n    checkedKeys,\n    expandedKeys,\n    enableShortDisplayNames,\n    flattenMarkers,\n    modifiedNamespaceTopics,\n    pinTopics,\n    selectedPolygonEditFormat = \"yaml\",\n    showCrosshair,\n    autoSyncCameraState,\n    topicDisplayMode = TOPIC_DISPLAY_MODES.SHOW_ALL.value,\n    topicSettings,\n  },\n}: Props) {\n  const [filterText, setFilterText] = useState(\"\"); // Topic tree text for filtering to see certain topics.\n  const containerRef = useRef<?HTMLDivElement>();\n  const { linkedGlobalVariables } = useLinkedGlobalVariables();\n  const { globalVariables, setGlobalVariables } = useGlobalVariables();\n  const [debug, setDebug] = useState(false);\n  const [showTopicTree, setShowTopicTree] = useState<boolean>(false);\n  const [polygonBuilder, setPolygonBuilder] = useState(() => new PolygonBuilder());\n  const [measureInfo, setMeasureInfo] = useState<MeasureInfo>({\n    measureState: \"idle\",\n    measurePoints: { start: undefined, end: undefined },\n  });\n  const [currentEditingTopic, setCurrentEditingTopic] = useState<?Topic>(undefined);\n\n  const searchTextProps = useSearchText();\n  const { searchTextOpen, searchText, setSearchTextMatches, searchTextMatches, selectedMatchIndex } = searchTextProps;\n  // used for updating DrawPolygon during mouse move and scenebuilder namespace change.\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0);\n  const measuringElRef = useRef<?MeasuringTool>(null);\n  const [drawingTabType, setDrawingTabType] = useState<?DrawingTabType>(undefined);\n  const [selectedObjectState, setSelectedObjectState] = useState<?SelectedObjectState>(undefined);\n  const selectedObject = selectedObjectState && selectedObjectState.selectedObject;\n\n  useLayoutEffect(\n    () => {\n      if (!selectedObject) {\n        return;\n      }\n      const newGlobalVariables = getUpdatedGlobalVariablesBySelectedObject(selectedObject, linkedGlobalVariables);\n      if (newGlobalVariables) {\n        setGlobalVariables(newGlobalVariables);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps, only update global variables when selectedObject changes\n    [selectedObject]\n  );\n\n  // initialize the SceneBuilder and TransformsBuilder\n  const { sceneBuilder, transformsBuilder } = useMemo(\n    () => ({\n      sceneBuilder: new SceneBuilder(),\n      transformsBuilder: new TransformsBuilder(),\n    }),\n    []\n  );\n\n  // Ensure that we show new namespaces and errors any time scenebuilder adds them.\n  useMemo(\n    () => {\n      sceneBuilder.setOnForceUpdate(forceUpdate);\n    },\n    [sceneBuilder, forceUpdate]\n  );\n\n  const {\n    topicTreeConfig,\n    staticallyAvailableNamespacesByTopic,\n    supportedMarkerDatatypesSet,\n    defaultTopicSettings,\n  } = useMemo(\n    () => ({\n      supportedMarkerDatatypesSet: new Set(\n        Object.values(getGlobalHooks().perPanelHooks().ThreeDimensionalViz.SUPPORTED_MARKER_DATATYPES)\n      ),\n      topicTreeConfig: getGlobalHooks()\n        .startupPerPanelHooks()\n        .ThreeDimensionalViz.getDefaultTopicTree(),\n      staticallyAvailableNamespacesByTopic: getGlobalHooks()\n        .startupPerPanelHooks()\n        .ThreeDimensionalViz.getStaticallyAvailableNamespacesByTopic(),\n      defaultTopicSettings: getGlobalHooks()\n        .startupPerPanelHooks()\n        .ThreeDimensionalViz.getDefaultSettings(),\n    }),\n    []\n  );\n\n  const { availableNamespacesByTopic, sceneErrorsByKey: sceneErrorsByTopicKey } = useSceneBuilderAndTransformsData({\n    sceneBuilder,\n    staticallyAvailableNamespacesByTopic,\n    transforms,\n  });\n\n  // Use deep compare so that we only regenerate rootTreeNode when topics change.\n  const memoizedTopics = useShallowMemo(topics);\n\n  // Only show topics with supported datatype as available in topic tree.\n  const topicTreeTopics = useMemo(\n    () => memoizedTopics.filter((topic) => supportedMarkerDatatypesSet.has(topic.datatype)),\n    [memoizedTopics, supportedMarkerDatatypesSet]\n  );\n\n  const {\n    allKeys,\n    derivedCustomSettingsByKey,\n    getIsNamespaceCheckedByDefault,\n    getIsTreeNodeVisibleInScene,\n    getIsTreeNodeVisibleInTree,\n    hasFeatureColumn,\n    rootTreeNode,\n    sceneErrorsByKey,\n    selectedNamespacesByTopic,\n    selectedTopicNames,\n    shouldExpandAllKeys,\n    toggleCheckAllAncestors,\n    toggleCheckAllDescendants,\n    toggleNamespaceChecked,\n    toggleNodeChecked,\n    toggleNodeExpanded,\n  } = useTopicTree({\n    availableNamespacesByTopic,\n    checkedKeys,\n    defaultTopicSettings,\n    expandedKeys,\n    filterText,\n    modifiedNamespaceTopics: modifiedNamespaceTopics || [],\n    providerTopics: topicTreeTopics,\n    saveConfig,\n    sceneErrorsByTopicKey,\n    topicDisplayMode,\n    topicSettings,\n    topicTreeConfig,\n  });\n\n  useEffect(() => setSubscriptions(selectedTopicNames), [selectedTopicNames, setSubscriptions]);\n  const { playerId } = useDataSourceInfo();\n\n  const rootTf = useMemo(\n    () => {\n      // TODO(Audrey): add tests for the clearing behavior\n      if (cleared) {\n        sceneBuilder.clear();\n      }\n      if (!frame) {\n        return;\n      }\n      const rootTfID = transforms.rootOfTransform(\n        followTf || getGlobalHooks().perPanelHooks().ThreeDimensionalViz.rootTransformFrame\n      ).id;\n\n      sceneBuilder.setPlayerId(playerId);\n      sceneBuilder.setTransforms(transforms, rootTfID);\n      sceneBuilder.setFlattenMarkers(!!flattenMarkers);\n      sceneBuilder.setSelectedNamespacesByTopic(selectedNamespacesByTopic);\n      sceneBuilder.setTopicSettings(topicSettings);\n\n      // toggle scene builder topics based on visible topic nodes in the tree\n      const topicsByName = topicsByTopicName(topics);\n      const selectedTopics = filterMap(selectedTopicNames, (name) => topicsByName[name]);\n      sceneBuilder.setTopics(selectedTopics);\n\n      sceneBuilder.setGlobalVariables(globalVariables);\n      sceneBuilder.setFrame(frame);\n      sceneBuilder.setCurrentTime(currentTime);\n      sceneBuilder.render();\n\n      // update the transforms and set the selected ones to render\n      transformsBuilder.setTransforms(transforms, rootTfID);\n      transformsBuilder.setSelectedTransforms(selectedNamespacesByTopic[\"/tf\"] || []);\n\n      return rootTfID;\n    },\n    [\n      cleared,\n      frame,\n      transforms,\n      followTf,\n      sceneBuilder,\n      playerId,\n      flattenMarkers,\n      selectedNamespacesByTopic,\n      topicSettings,\n      topics,\n      selectedTopicNames,\n      globalVariables,\n      currentTime,\n      transformsBuilder,\n    ]\n  );\n\n  const handleDrawPolygons = useCallback(\n    (eventName: EventName, ev: MouseEvent, args: ?ReglClickInfo) => {\n      polygonBuilder[eventName](ev, args);\n      forceUpdate();\n    },\n    [polygonBuilder]\n  );\n\n  const isDrawing = useMemo(() => measureInfo.measureState !== \"idle\" || drawingTabType === POLYGON_TAB_TYPE, [\n    drawingTabType,\n    measureInfo.measureState,\n  ]);\n  // use callbackInputsRef to prevent unnecessary callback changes\n  const callbackInputsRef = useRef({\n    cameraState,\n    debug,\n    drawingTabType,\n    handleDrawPolygons,\n    showTopicTree,\n    saveConfig,\n    selectedObjectState,\n    topics,\n    autoSyncCameraState: !!autoSyncCameraState,\n    isDrawing,\n  });\n  callbackInputsRef.current = {\n    cameraState,\n    debug,\n    drawingTabType,\n    handleDrawPolygons,\n    showTopicTree,\n    saveConfig,\n    selectedObjectState,\n    topics,\n    autoSyncCameraState: !!autoSyncCameraState,\n    isDrawing,\n  };\n\n  const handleEvent = useCallback((eventName: EventName, ev: MouseEvent, args: ?ReglClickInfo) => {\n    if (!args) {\n      return;\n    }\n    const {\n      drawingTabType: currentDrawingTabType,\n      handleDrawPolygons: currentHandleDrawPolygons,\n    } = callbackInputsRef.current;\n    // $FlowFixMe get around index signature error\n    const measuringHandler = measuringElRef.current && measuringElRef.current[eventName];\n    const measureActive = measuringElRef.current && measuringElRef.current.measureActive;\n    if (measuringHandler && measureActive) {\n      return measuringHandler(ev, args);\n    } else if (currentDrawingTabType === POLYGON_TAB_TYPE) {\n      currentHandleDrawPolygons(eventName, ev, args);\n    }\n  }, []);\n\n  const {\n    onClick,\n    onControlsOverlayClick,\n    onDoubleClick,\n    onExitTopicTreeFocus,\n    onMouseDown,\n    onMouseMove,\n    onMouseUp,\n    onClearSelectedObject,\n    onSelectObject,\n    onSetPolygons,\n    toggleCameraMode,\n    toggleDebug,\n  } = useMemo(\n    () => {\n      return {\n        onClick: (ev: MouseEvent, args: ?ReglClickInfo) => {\n          // Don't set any clicked objects when measuring distance or drawing polygons.\n          if (callbackInputsRef.current.isDrawing) {\n            return;\n          }\n          const selectedObjects = (args && args.objects) || [];\n          const clickedPosition = { clientX: ev.clientX, clientY: ev.clientY };\n          if (selectedObjects.length === 0) {\n            setSelectedObjectState(undefined);\n          } else if (selectedObjects.length === 1) {\n            // select the object directly if there is only one\n            setSelectedObjectState({ selectedObject: selectedObjects[0], selectedObjects, clickedPosition });\n          } else {\n            // open up context menu to select one object to show details\n            setSelectedObjectState({ selectedObject: undefined, selectedObjects, clickedPosition });\n          }\n        },\n        onControlsOverlayClick: (ev: SyntheticMouseEvent<HTMLDivElement>) => {\n          if (!containerRef.current) {\n            return;\n          }\n          const target = ((ev.target: any): HTMLElement);\n          // Only close if the click target is inside the panel, e.g. don't close when dropdown menus rendered in portals are clicked\n          if (containerRef.current.contains(target)) {\n            setShowTopicTree(false);\n          }\n        },\n        onDoubleClick: (ev: MouseEvent, args: ?ReglClickInfo) => handleEvent(\"onDoubleClick\", ev, args),\n        onExitTopicTreeFocus: (ev) => {\n          if (containerRef.current) {\n            containerRef.current.focus();\n          }\n        },\n        onMouseDown: (ev: MouseEvent, args: ?ReglClickInfo) => handleEvent(\"onMouseDown\", ev, args),\n        onMouseMove: (ev: MouseEvent, args: ?ReglClickInfo) => handleEvent(\"onMouseMove\", ev, args),\n        onMouseUp: (ev: MouseEvent, args: ?ReglClickInfo) => handleEvent(\"onMouseUp\", ev, args),\n        onClearSelectedObject: () => setSelectedObjectState(undefined),\n        onSelectObject: (selectedObj: MouseEventObject) =>\n          setSelectedObjectState({ ...callbackInputsRef.current.selectedObjectState, selectedObject: selectedObj }),\n        onSetPolygons: (polygons: Polygon[]) => setPolygonBuilder(new PolygonBuilder(polygons)),\n        toggleDebug: () => setDebug(!callbackInputsRef.current.debug),\n        toggleCameraMode: () => {\n          const { cameraState: currentCameraState, saveConfig: currentSaveConfig } = callbackInputsRef.current;\n          currentSaveConfig({ cameraState: { ...currentCameraState, perspective: !currentCameraState.perspective } });\n          if (measuringElRef.current && currentCameraState.perspective) {\n            measuringElRef.current.reset();\n          }\n        },\n      };\n    },\n    [handleEvent]\n  );\n\n  const keyDownHandlers = useMemo(\n    () => {\n      const handlers: { [key: string]: (e: KeyboardEvent) => void } = {\n        \"3\": () => {\n          toggleCameraMode();\n        },\n        Escape: (e) => {\n          e.preventDefault();\n          setDrawingTabType(null);\n          searchTextProps.toggleSearchTextOpen(false);\n          if (document.activeElement && document.activeElement === containerRef.current) {\n            document.activeElement.blur();\n          }\n        },\n        t: (e) => {\n          e.preventDefault();\n          // Unpin before enabling keyboard toggle open/close.\n          if (pinTopics) {\n            saveConfig({ pinTopics: false }, { keepLayoutInUrl: true });\n            return;\n          }\n          setShowTopicTree(!showTopicTree);\n        },\n      };\n\n      handlers.f = (e: KeyboardEvent) => {\n        if (e.ctrlKey || e.metaKey) {\n          e.preventDefault();\n          searchTextProps.toggleSearchTextOpen(true);\n          if (!searchTextProps.searchInputRef || !searchTextProps.searchInputRef.current) {\n            return;\n          }\n          searchTextProps.searchInputRef.current.select();\n        }\n      };\n      return handlers;\n    },\n    [pinTopics, saveConfig, searchTextProps, showTopicTree, toggleCameraMode]\n  );\n\n  const markerProviders = useMemo(() => extensions.markerProviders.concat([sceneBuilder, transformsBuilder]), [\n    extensions.markerProviders,\n    sceneBuilder,\n    transformsBuilder,\n  ]);\n\n  const cursorType = isDrawing ? \"crosshair\" : \"\";\n\n  const { MapComponent, videoRecordingStyle } = useMemo(\n    () => ({\n      MapComponent: getGlobalHooks().perPanelHooks().ThreeDimensionalViz.MapComponent,\n      videoRecordingStyle: { visibility: videoRecordingMode() ? \"hidden\" : \"visible\" },\n    }),\n    []\n  );\n\n  const memoizedScene = useShallowMemo(sceneBuilder.getScene());\n  const mapNamespaces = useShallowMemo(selectedNamespacesByTopic[\"/metadata\"] || []);\n  const mapElement = useMemo(\n    () =>\n      MapComponent && (\n        <MapComponent\n          extensions={mapNamespaces}\n          scene={memoizedScene}\n          debug={debug}\n          perspective={!!cameraState.perspective}\n        />\n      ),\n    [MapComponent, cameraState.perspective, debug, mapNamespaces, memoizedScene]\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      onClick={onControlsOverlayClick}\n      tabIndex={-1}\n      className={styles.container}\n      style={{ cursor: cursorType }}\n      data-test=\"3dviz-layout\">\n      <KeyListener keyDownHandlers={keyDownHandlers} />\n      <PanelToolbar\n        floating\n        helpContent={helpContent}\n        menuContent={\n          <>\n            <Item\n              tooltip=\"Markers with 0 as z-value in pose or points are updated to have the z-value of the flattened base frame.\"\n              icon={flattenMarkers ? <CheckboxMarkedIcon /> : <CheckboxBlankOutlineIcon />}\n              onClick={() => saveConfig({ flattenMarkers: !flattenMarkers })}>\n              Flatten markers\n            </Item>\n            <Item\n              tooltip=\"Automatically apply dark/light background color to text.\"\n              icon={autoTextBackgroundColor ? <CheckboxMarkedIcon /> : <CheckboxBlankOutlineIcon />}\n              onClick={() => saveConfig({ autoTextBackgroundColor: !autoTextBackgroundColor })}>\n              Auto Text Background\n            </Item>\n          </>\n        }\n      />\n      <div style={{ ...videoRecordingStyle, position: \"relative\", width: \"100%\", height: \"100%\" }}>\n        {containerRef.current && (\n          <TopicTree\n            availableNamespacesByTopic={availableNamespacesByTopic}\n            checkedKeys={checkedKeys}\n            containerHeight={containerRef.current.clientHeight}\n            containerWidth={containerRef.current.clientWidth}\n            expandedKeys={expandedKeys}\n            getIsTreeNodeVisibleInScene={getIsTreeNodeVisibleInScene}\n            getIsTreeNodeVisibleInTree={getIsTreeNodeVisibleInTree}\n            getIsNamespaceCheckedByDefault={getIsNamespaceCheckedByDefault}\n            hasFeatureColumn={hasFeatureColumn}\n            onExitTopicTreeFocus={onExitTopicTreeFocus}\n            toggleCheckAllAncestors={toggleCheckAllAncestors}\n            toggleCheckAllDescendants={toggleCheckAllDescendants}\n            toggleNamespaceChecked={toggleNamespaceChecked}\n            toggleNodeChecked={toggleNodeChecked}\n            toggleNodeExpanded={toggleNodeExpanded}\n            topicDisplayMode={topicDisplayMode}\n            pinTopics={pinTopics}\n            rootTreeNode={rootTreeNode}\n            saveConfig={saveConfig}\n            derivedCustomSettingsByKey={derivedCustomSettingsByKey}\n            sceneErrorsByKey={sceneErrorsByKey}\n            setCurrentEditingTopic={setCurrentEditingTopic}\n            setShowTopicTree={setShowTopicTree}\n            showTopicTree={showTopicTree}\n            filterText={filterText}\n            setFilterText={setFilterText}\n            allKeys={allKeys}\n            shouldExpandAllKeys={shouldExpandAllKeys}\n          />\n        )}\n        {currentEditingTopic && (\n          <TopicSettingsModal\n            currentEditingTopic={currentEditingTopic}\n            hasFeatureColumn={hasFeatureColumn}\n            setCurrentEditingTopic={setCurrentEditingTopic}\n            sceneBuilderMessage={\n              sceneBuilder.collectors[currentEditingTopic.name] &&\n              sceneBuilder.collectors[currentEditingTopic.name].getMessages()[0]\n            }\n            saveConfig={saveConfig}\n            topicSettings={topicSettings}\n          />\n        )}\n      </div>\n      <div className={styles.world}>\n        <World\n          key={`${callbackInputsRef.current.autoSyncCameraState ? \"synced\" : \"not-synced\"}`}\n          autoTextBackgroundColor={!!autoTextBackgroundColor}\n          cameraState={cameraState}\n          isPlaying={!!isPlaying}\n          markerProviders={markerProviders}\n          onCameraStateChange={onCameraStateChange}\n          onClick={onClick}\n          onDoubleClick={onDoubleClick}\n          onMouseDown={onMouseDown}\n          onMouseMove={onMouseMove}\n          onMouseUp={onMouseUp}\n          searchTextOpen={searchTextOpen}\n          searchText={searchText}\n          setSearchTextMatches={setSearchTextMatches}\n          searchTextMatches={searchTextMatches}\n          selectedMatchIndex={selectedMatchIndex}>\n          {mapElement}\n          {children}\n          <DrawPolygons>{polygonBuilder.polygons}</DrawPolygons>\n          <div style={videoRecordingStyle}>\n            <LayoutToolbar\n              cameraState={cameraState}\n              debug={debug}\n              drawingTabType={drawingTabType}\n              isDrawing={isDrawing}\n              followOrientation={followOrientation}\n              followTf={followTf}\n              interactionData={selectedObject && selectedObject.object && selectedObject.object.interactionData}\n              isPlaying={isPlaying}\n              measureInfo={measureInfo}\n              measuringElRef={measuringElRef}\n              onAlignXYAxis={onAlignXYAxis}\n              onCameraStateChange={onCameraStateChange}\n              autoSyncCameraState={!!autoSyncCameraState}\n              onClearSelectedObject={onClearSelectedObject}\n              onFollowChange={onFollowChange}\n              onSetDrawingTabType={setDrawingTabType}\n              onSetPolygons={onSetPolygons}\n              onToggleCameraMode={toggleCameraMode}\n              onToggleDebug={toggleDebug}\n              polygonBuilder={polygonBuilder}\n              saveConfig={saveConfig}\n              selectedObject={selectedObject}\n              selectedPolygonEditFormat={selectedPolygonEditFormat}\n              setMeasureInfo={setMeasureInfo}\n              showCrosshair={showCrosshair}\n              targetPose={targetPose}\n              transforms={transforms}\n              rootTf={rootTf}\n              {...searchTextProps}\n            />\n          </div>\n          {selectedObjectState &&\n            selectedObjectState.selectedObjects.length > 1 &&\n            !selectedObjectState.selectedObject && (\n              <InteractionContextMenu\n                clickedPosition={selectedObjectState.clickedPosition}\n                onSelectObject={onSelectObject}\n                selectedObjects={selectedObjectState.selectedObjects}\n              />\n            )}\n          {process.env.NODE_ENV !== \"production\" && !inScreenshotTests() && debug && <DebugStats />}\n        </World>\n      </div>\n    </div>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport React, { useContext, useRef } from \"react\";\nimport { WorldviewReactContext, type WorldviewContextType } from \"regl-worldview\";\n\nconst style = {\n  position: \"absolute\",\n  bottom: 5,\n  right: 5,\n  backgroundColor: \"rgba(1, 1, 1, 0.2)\",\n  padding: 5,\n  fontFamily: \"monospace\",\n};\n\n// Looks at the regl stats and throws errors if it seems we're going over acceptable (arbitrary) max ranges.\n// The maxes are arbitrarily set to be an order of magnitude higher than the 'steady state' of a pretty loaded webviz scene to\n// allow for plenty of headroom.\nfunction validate(stats) {\n  if (stats.bufferCount > 500) {\n    throw new Error(`Possible gl buffer leak detected. Buffer count: ${stats.bufferCount}`);\n  }\n  if (stats.elementsCount > 500) {\n    throw new Error(`Possible gl elements leak detected. Buffer count: ${stats.elementsCount}`);\n  }\n  if (stats.textureCount > 500) {\n    throw new Error(`Possible gl texture leak detected. Texture count: ${stats.textureCount}`);\n  }\n  // We should likely have far fewer than 100 shaders...they only get created when regl \"compiles\" a command.\n  // Nevertheless, we should check in case there's some wild code somewhere constantly recompiling a command.\n  if (stats.shaderCount > 100) {\n    throw new Error(`Possible gl shader leak detected. Shader count: ${stats.shaderCount}`);\n  }\n}\n\n// Shows debug regl stats in the 3d panel.  Crashes the panel if regl stats drift outside of acceptable ranges.\n// TODO(bmc): move to regl-worldview at some point\nexport default function DebugStats() {\n  const context = useContext<WorldviewContextType>(WorldviewReactContext);\n  const renderCount = useRef(0);\n  renderCount.current = renderCount.current + 1;\n  if (context.initializedData.regl) {\n    const { stats } = context.initializedData.regl;\n    validate(stats);\n    const textureSize = (stats.getTotalTextureSize() / (1024 * 1024)).toFixed(1);\n    const bufferSize = (stats.getTotalBufferSize() / (1024 * 1024)).toFixed(1);\n    return (\n      <div style={style}>\n        <div>renders: {renderCount.current}</div>\n        <div>\n          buffers: {stats.bufferCount} ({bufferSize}) Mb\n        </div>\n        <div>\n          textures: {stats.textureCount} ({textureSize}) Mb\n        </div>\n        <div>elements: {stats.elementsCount}</div>\n        <div>shaders: {stats.shaderCount}</div>\n      </div>\n    );\n  }\n  return null;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport { PolygonBuilder, Polygon } from \"regl-worldview\";\nimport styled from \"styled-components\";\n\nimport Button from \"webviz-core/src/components/Button\";\nimport PanelContext from \"webviz-core/src/components/PanelContext\";\nimport ValidatedInput, { type EditFormat } from \"webviz-core/src/components/ValidatedInput\";\nimport { polygonPointsValidator } from \"webviz-core/src/components/validators\";\nimport { SValue, SLabel } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/Interactions\";\nimport {\n  polygonsToPoints,\n  getFormattedString,\n  pointsToPolygons,\n  getPolygonLineDistances,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/utils/drawToolUtils\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\n\nexport type Point2D = {| x: number, y: number |};\n\nexport const SRow = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 8px 0;\n`;\n\ntype Props = {\n  onSetPolygons: (polygons: Polygon[]) => void,\n  polygonBuilder: PolygonBuilder,\n  selectedPolygonEditFormat: EditFormat,\n};\n\nexport default function Polygons({ onSetPolygons, polygonBuilder, selectedPolygonEditFormat }: Props) {\n  const { saveConfig } = React.useContext(PanelContext) || {};\n  const polygons: Polygon[] = polygonBuilder.polygons;\n  const [polygonPoints, setPolygonPoints] = React.useState<Point2D[][]>(() => polygonsToPoints(polygons));\n  function polygonBuilderOnChange() {\n    setPolygonPoints(polygonsToPoints(polygons));\n  }\n  polygonBuilder.onChange = polygonBuilderOnChange;\n\n  return (\n    <>\n      <ValidatedInput\n        format={selectedPolygonEditFormat}\n        value={polygonPoints}\n        onSelectFormat={(selectedFormat) => saveConfig({ selectedPolygonEditFormat: selectedFormat })}\n        onChange={(newPolygonPoints) => {\n          if (newPolygonPoints) {\n            setPolygonPoints(newPolygonPoints);\n            onSetPolygons(pointsToPolygons(newPolygonPoints));\n          }\n        }}\n        dataValidator={polygonPointsValidator}>\n        <Button\n          small\n          tooltip=\"Copy Polygons\"\n          onClick={() => {\n            clipboard.copy(getFormattedString(polygonPoints, selectedPolygonEditFormat));\n          }}>\n          Copy\n        </Button>\n      </ValidatedInput>\n      <SRow>\n        <SLabel>Total length:</SLabel>\n        <SValue>{getPolygonLineDistances(polygonPoints).toFixed(2)} m</SValue>\n      </SRow>\n      <p style={{ marginTop: 0 }}>\n        <em>\n          Start drawing by holding <b>ctrl</b> and clicking on the 3D panel.\n        </em>\n      </p>\n    </>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { Polygon, PolygonPoint } from \"regl-worldview\";\n\nimport { EDIT_FORMAT, type EditFormat } from \"webviz-core/src/components/ValidatedInput\";\nimport { type Point2D } from \"webviz-core/src/panels/ThreeDimensionalViz/DrawingTools\";\nimport YAML from \"webviz-core/src/util/yaml\";\n\nexport function polygonsToPoints(polygons: Polygon[]): Point2D[][] {\n  return polygons.map((poly) => {\n    return poly.points.map((point) => ({ x: point.point[0], y: point.point[1] }));\n  });\n}\n\nexport function pointsToPolygons(polygonPoints: Point2D[][]): Polygon[] {\n  // map the points back to polygons\n  return polygonPoints.map((pointsPerPolygon, idx) => {\n    const polygon = new Polygon(`${idx}`);\n    polygon.points = pointsPerPolygon.map(({ x, y }) => new PolygonPoint([x, y, 0]));\n    return polygon;\n  });\n}\n\nfunction pointsToYaml(polygonPoints: Point2D[][]): string {\n  if (!polygonPoints.length || !polygonPoints[0].length) {\n    return \"\";\n  }\n  return YAML.stringify(polygonPoints);\n}\n\nfunction pointsToJson(polygonPoints: Point2D[][]): string {\n  return JSON.stringify(polygonPoints, null, 2);\n}\n\nexport function getFormattedString(polygonPoints: Point2D[][], selectedPolygonEditFormat: EditFormat) {\n  return selectedPolygonEditFormat === EDIT_FORMAT.JSON ? pointsToJson(polygonPoints) : pointsToYaml(polygonPoints);\n}\n\n// calculate the sum of the line distances\nexport function getPolygonLineDistances(polygonPoints: Point2D[][]): number {\n  return polygonPoints.reduce((memo, polyPoints, idx) => {\n    if (polyPoints.length > 1) {\n      for (let i = 0; i < polyPoints.length - 1; i++) {\n        memo += Math.hypot(polyPoints[i + 1].x - polyPoints[i].x, polyPoints[i + 1].y - polyPoints[i].y);\n      }\n    }\n    return memo;\n  }, 0);\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport cx from \"classnames\";\nimport React, { useMemo } from \"react\";\nimport { PolygonBuilder, type MouseEventObject, type Polygon } from \"regl-worldview\";\n\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport CameraInfo from \"webviz-core/src/panels/ThreeDimensionalViz/CameraInfo\";\nimport Crosshair from \"webviz-core/src/panels/ThreeDimensionalViz/Crosshair\";\nimport DrawingTools, { type DrawingTabType } from \"webviz-core/src/panels/ThreeDimensionalViz/DrawingTools\";\nimport MeasuringTool, { type MeasureInfo } from \"webviz-core/src/panels/ThreeDimensionalViz/DrawingTools/MeasuringTool\";\nimport FollowTFControl from \"webviz-core/src/panels/ThreeDimensionalViz/FollowTFControl\";\nimport Interactions, { type InteractionData } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions\";\nimport styles from \"webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\";\nimport MainToolbar from \"webviz-core/src/panels/ThreeDimensionalViz/MainToolbar\";\nimport MeasureMarker from \"webviz-core/src/panels/ThreeDimensionalViz/MeasureMarker\";\nimport SearchText, { type SearchTextProps } from \"webviz-core/src/panels/ThreeDimensionalViz/SearchText\";\nimport { type LayoutToolbarSharedProps } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/Layout\";\n\ntype Props = {|\n  ...LayoutToolbarSharedProps,\n  autoSyncCameraState: boolean,\n  debug: boolean,\n  isDrawing: boolean,\n  drawingTabType: ?DrawingTabType,\n  interactionData: ?InteractionData,\n  measureInfo: MeasureInfo,\n  measuringElRef: { current: ?MeasuringTool },\n  onClearSelectedObject: () => void,\n  setMeasureInfo: (MeasureInfo) => void,\n  onSetDrawingTabType: (?DrawingTabType) => void,\n  onSetPolygons: (polygons: Polygon[]) => void,\n  onToggleCameraMode: () => void,\n  onToggleDebug: () => void,\n  polygonBuilder: PolygonBuilder,\n  rootTf: ?string,\n  selectedObject: ?MouseEventObject,\n  selectedPolygonEditFormat: \"json\" | \"yaml\",\n  showCrosshair: ?boolean,\n  ...SearchTextProps,\n|};\n\nfunction LayoutToolbar({\n  autoSyncCameraState,\n  cameraState,\n  debug,\n  isDrawing,\n  drawingTabType,\n  followOrientation,\n  followTf,\n  interactionData,\n  isPlaying,\n  measureInfo,\n  measuringElRef,\n  onAlignXYAxis,\n  onCameraStateChange,\n  onClearSelectedObject,\n  onFollowChange,\n  setMeasureInfo,\n  onSetDrawingTabType,\n  onSetPolygons,\n  onToggleCameraMode,\n  onToggleDebug,\n  polygonBuilder,\n  rootTf,\n  saveConfig,\n  searchInputRef,\n  searchText,\n  searchTextMatches,\n  searchTextOpen,\n  selectedMatchIndex,\n  selectedObject,\n  selectedPolygonEditFormat,\n  setSearchText,\n  setSearchTextMatches,\n  setSelectedMatchIndex,\n  showCrosshair,\n  targetPose,\n  toggleSearchTextOpen,\n  transforms,\n}: Props) {\n  const additionalToolbarItemsElem = useMemo(\n    () => {\n      const AdditionalToolbarItems = getGlobalHooks().perPanelHooks().ThreeDimensionalViz.AdditionalToolbarItems;\n      return (\n        <div className={cx(styles.buttons, styles.cartographer)}>\n          <AdditionalToolbarItems transforms={transforms} />\n        </div>\n      );\n    },\n    [transforms]\n  );\n\n  return (\n    <>\n      <MeasuringTool\n        ref={measuringElRef}\n        measureState={measureInfo.measureState}\n        measurePoints={measureInfo.measurePoints}\n        onMeasureInfoChange={setMeasureInfo}\n      />\n      <div className={cx(styles.toolbar, styles.right)}>\n        <div className={styles.buttons}>\n          <SearchText\n            searchTextOpen={searchTextOpen}\n            toggleSearchTextOpen={toggleSearchTextOpen}\n            searchText={searchText}\n            setSearchText={setSearchText}\n            setSearchTextMatches={setSearchTextMatches}\n            searchTextMatches={searchTextMatches}\n            searchInputRef={searchInputRef}\n            setSelectedMatchIndex={setSelectedMatchIndex}\n            selectedMatchIndex={selectedMatchIndex}\n            onCameraStateChange={onCameraStateChange}\n            cameraState={cameraState}\n            transforms={transforms}\n            rootTf={rootTf}\n            onFollowChange={onFollowChange}\n          />\n        </div>\n        <div className={styles.buttons}>\n          <FollowTFControl\n            transforms={transforms}\n            tfToFollow={followTf ? followTf : undefined}\n            followOrientation={followOrientation}\n            onFollowChange={onFollowChange}\n          />\n        </div>\n        <MainToolbar\n          measureInfo={measureInfo}\n          measuringTool={measuringElRef.current}\n          perspective={cameraState.perspective}\n          debug={debug}\n          onToggleCameraMode={onToggleCameraMode}\n          onToggleDebug={onToggleDebug}\n        />\n        {measuringElRef.current && measuringElRef.current.measureDistance}\n        <Interactions\n          isDrawing={isDrawing}\n          interactionData={interactionData}\n          onClearSelectedObject={onClearSelectedObject}\n          selectedObject={selectedObject}\n        />\n        <DrawingTools\n          onSetPolygons={onSetPolygons}\n          polygonBuilder={polygonBuilder}\n          saveConfig={saveConfig}\n          selectedPolygonEditFormat={selectedPolygonEditFormat}\n          onSetDrawingTabType={onSetDrawingTabType}\n        />\n        <CameraInfo\n          cameraState={cameraState}\n          targetPose={targetPose}\n          followOrientation={followOrientation}\n          followTf={followTf}\n          isPlaying={isPlaying}\n          onAlignXYAxis={onAlignXYAxis}\n          onCameraStateChange={onCameraStateChange}\n          showCrosshair={!!showCrosshair}\n          autoSyncCameraState={autoSyncCameraState}\n        />\n        {additionalToolbarItemsElem}\n      </div>\n      {!cameraState.perspective && showCrosshair && <Crosshair cameraState={cameraState} />}\n      <MeasureMarker measurePoints={measureInfo.measurePoints} />\n    </>\n  );\n}\n\nexport default React.memo<Props>(LayoutToolbar);\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport CameraControlIcon from \"@mdi/svg/svg/camera-control.svg\";\nimport { vec3 } from \"gl-matrix\";\nimport { isEqual } from \"lodash\";\nimport * as React from \"react\";\nimport { type CameraState, cameraStateSelectors } from \"regl-worldview\";\nimport styled from \"styled-components\";\n\nimport Button from \"webviz-core/src/components/Button\";\nimport ExpandingToolbar, { ToolGroup } from \"webviz-core/src/components/ExpandingToolbar\";\nimport Flex from \"webviz-core/src/components/Flex\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport PanelContext from \"webviz-core/src/components/PanelContext\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { UncontrolledValidatedInput, YamlInput } from \"webviz-core/src/components/ValidatedInput\";\nimport { point2DValidator, cameraStateValidator } from \"webviz-core/src/components/validators\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport { Renderer, type ThreeDimensionalVizConfig } from \"webviz-core/src/panels/ThreeDimensionalViz\";\nimport { SValue, SLabel } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/Interactions\";\nimport styles from \"webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\";\nimport {\n  getNewCameraStateOnFollowChange,\n  type TargetPose,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/threeDimensionalVizUtils\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\nimport clipboard from \"webviz-core/src/util/clipboard\";\n\nexport const CAMERA_TAB_TYPE = \"Camera\";\n\nconst LABEL_WIDTH = 112;\nconst TEMP_VEC3 = [0, 0, 0];\nconst ZERO_VEC3 = Object.freeze([0, 0, 0]);\nconst DEFAULT_CAMERA_INFO_WIDTH = 260;\n\nconst SRow = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\ntype CameraStateInfoProps = {\n  cameraState: $Shape<CameraState>,\n  onAlignXYAxis: () => void,\n};\n\nexport type CameraInfoPropsWithoutCameraState = {\n  followOrientation: boolean,\n  followTf?: string | false,\n  isPlaying?: boolean,\n  onAlignXYAxis: () => void,\n  onCameraStateChange: (CameraState) => void,\n  showCrosshair?: boolean,\n  autoSyncCameraState: boolean,\n  defaultSelectedTab?: string,\n};\n\ntype CameraInfoProps = {\n  cameraState: $Shape<CameraState>,\n  targetPose: ?TargetPose,\n} & CameraInfoPropsWithoutCameraState;\n\nfunction CameraStateInfo({ cameraState, onAlignXYAxis }: CameraStateInfoProps) {\n  return (\n    <>\n      {Object.keys(cameraState)\n        .sort()\n        .map((key) => {\n          let val = cameraState[key];\n          if (key === \"perspective\") {\n            val = cameraState[key] ? \"true\" : \"false\";\n          } else if (Array.isArray(cameraState[key])) {\n            val = cameraState[key].map((x) => x.toFixed(1)).join(\", \");\n          } else if (typeof cameraState[key] === \"number\") {\n            val = cameraState[key].toFixed(2);\n          }\n          return [key, val];\n        })\n        .map(([key, val]) => (\n          <SRow key={key}>\n            <SLabel width={LABEL_WIDTH}>{key}:</SLabel> <SValue>{val}</SValue>\n            {key === \"thetaOffset\" && (\n              <Button\n                onClick={onAlignXYAxis}\n                tooltip=\"Align XY axis by reseting thetaOffset to 0. Will no longer follow orientation.\">\n                RESET\n              </Button>\n            )}\n          </SRow>\n        ))}\n    </>\n  );\n}\n\nexport default function CameraInfo({\n  cameraState,\n  targetPose,\n  followOrientation,\n  followTf,\n  isPlaying,\n  onAlignXYAxis,\n  onCameraStateChange,\n  showCrosshair,\n  autoSyncCameraState,\n  defaultSelectedTab,\n}: CameraInfoProps) {\n  const [selectedTab, setSelectedTab] = React.useState(defaultSelectedTab);\n  const { updatePanelConfig, saveConfig } = React.useContext(PanelContext) || {};\n  const [edit, setEdit] = React.useState<boolean>(false);\n\n  const { target, targetOffset } = cameraState;\n  const targetHeading = cameraStateSelectors.targetHeading(cameraState);\n  const camPos2D = vec3.add(TEMP_VEC3, target, vec3.rotateZ(TEMP_VEC3, targetOffset, ZERO_VEC3, -targetHeading));\n  const camPos2DTrimmed = camPos2D.map((num) => +num.toFixed(2));\n\n  const syncCameraState = () => {\n    updatePanelConfig(Renderer.panelType, (config: ThreeDimensionalVizConfig) => {\n      // Transform the camera state by whichever TF or orientation the other panels are following.\n      const newCameraState = getNewCameraStateOnFollowChange({\n        prevCameraState: cameraState,\n        prevTargetPose: targetPose,\n        prevFollowTf: followTf,\n        prevFollowOrientation: followOrientation,\n        newFollowTf: config.followTf,\n        newFollowOrientation: config.followOrientation,\n      });\n      return { ...config, cameraState: newCameraState };\n    });\n  };\n\n  return (\n    <ExpandingToolbar\n      tooltip=\"Camera\"\n      icon={\n        <Icon style={{ color: autoSyncCameraState ? colors.accent : \"white\" }}>\n          <CameraControlIcon />\n        </Icon>\n      }\n      className={styles.buttons}\n      selectedTab={selectedTab}\n      onSelectTab={(newSelectedTab) => setSelectedTab(newSelectedTab)}>\n      <ToolGroup name={CAMERA_TAB_TYPE}>\n        <Flex col style={{ minWidth: DEFAULT_CAMERA_INFO_WIDTH }}>\n          <Flex row reverse>\n            <Button\n              tooltip=\"Copy cameraState\"\n              small\n              onClick={() => {\n                clipboard.copy(JSON.stringify(cameraState, null, 2));\n              }}>\n              Copy\n            </Button>\n            <Button\n              disabled={!!isPlaying}\n              tooltip={isPlaying ? \"Pause player to edit raw camera state object\" : \"Edit raw camera state object\"}\n              onClick={() => setEdit(!edit)}>\n              {edit ? \"Done\" : \"Edit\"}\n            </Button>\n            <Button tooltip=\"Sync camera state across all 3D panels\" onClick={syncCameraState}>\n              Sync\n            </Button>\n          </Flex>\n          {edit && !isPlaying ? (\n            <UncontrolledValidatedInput\n              format=\"yaml\"\n              value={cameraState}\n              onChange={(newCameraState) => saveConfig({ cameraState: newCameraState })}\n              dataValidator={cameraStateValidator}\n            />\n          ) : (\n            <Flex col>\n              <CameraStateInfo cameraState={cameraState} onAlignXYAxis={onAlignXYAxis} />\n              <Flex col>\n                <SRow style={{ marginBottom: 8 }}>\n                  <Tooltip placement=\"top\" contents=\"Automatically sync camera across all 3D panels\">\n                    <SLabel>Auto sync:</SLabel>\n                  </Tooltip>\n                  <SValue>\n                    <input\n                      type=\"checkbox\"\n                      checked={autoSyncCameraState}\n                      onChange={() =>\n                        updatePanelConfig(Renderer.panelType, (config) => ({\n                          ...config,\n                          cameraState,\n                          autoSyncCameraState: !autoSyncCameraState,\n                        }))\n                      }\n                    />\n                  </SValue>\n                </SRow>\n                <SRow style={{ marginBottom: 8 }}>\n                  <SLabel style={cameraState.perspective ? { color: colors.textMuted } : {}}>Show crosshair:</SLabel>\n                  <SValue>\n                    <input\n                      type=\"checkbox\"\n                      disabled={cameraState.perspective}\n                      checked={showCrosshair}\n                      onChange={() => saveConfig({ showCrosshair: !showCrosshair })}\n                    />\n                  </SValue>\n                </SRow>\n                {showCrosshair && !cameraState.perspective && (\n                  <SRow style={{ paddingLeft: LABEL_WIDTH, marginBottom: 8 }}>\n                    <SValue>\n                      <YamlInput\n                        inputStyle={{ width: 140 }}\n                        value={{ x: camPos2DTrimmed[0], y: camPos2DTrimmed[1] }}\n                        onChange={(data) => {\n                          const newPos = [data.x, data.y, 0];\n                          // extract the targetOffset by subtracting from the target and un-rotating by heading\n                          const newTargetOffset = vec3.rotateZ(\n                            [0, 0, 0],\n                            vec3.sub(TEMP_VEC3, newPos, cameraState.target),\n                            ZERO_VEC3,\n                            cameraStateSelectors.targetHeading(cameraState)\n                          );\n                          if (!isEqual(cameraState.targetOffset, newTargetOffset)) {\n                            onCameraStateChange({ ...cameraState, targetOffset: newTargetOffset });\n                          }\n                        }}\n                        dataValidator={point2DValidator}\n                      />\n                    </SValue>\n                  </SRow>\n                )}\n              </Flex>\n              {followTf ? (\n                <SRow>\n                  <SLabel>Following frame:</SLabel>\n                  <SValue>\n                    <code>{followTf}</code>\n                    {followOrientation && \" with orientation\"}\n                  </SValue>\n                </SRow>\n              ) : (\n                <p>Locked to map ({getGlobalHooks().perPanelHooks().ThreeDimensionalViz.rootTransformFrame})</p>\n              )}\n            </Flex>\n          )}\n        </Flex>\n      </ToolGroup>\n    </ExpandingToolbar>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { vec3, quat } from \"gl-matrix\";\nimport React from \"react\";\nimport { cameraStateSelectors, Lines, type CameraState } from \"regl-worldview\";\n\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\n\ntype Props = {\n  cameraState: CameraState,\n};\n\nexport default function Crosshair({ cameraState }: Props) {\n  const { target, targetOffset, distance, thetaOffset } = cameraState;\n  const targetHeading = cameraStateSelectors.targetHeading(cameraState);\n  // move the crosshair to the center of the camera's viewport: the target + targetOffset rotated by heading\n  const crosshairPoint = [0, 0, 0];\n  vec3.add(crosshairPoint, vec3.rotateZ(crosshairPoint, targetOffset, [0, 0, 0], -targetHeading), target);\n\n  // orient and size the crosshair so it remains visually fixed in the center\n  const length = 0.02 * distance;\n  const orientation = [0, 0, 0, 1];\n  const theta = targetHeading + thetaOffset;\n\n  quat.rotateZ(orientation, orientation, -theta);\n\n  const crosshair = (z, extraThickness) => {\n    const thickness = 0.004 * distance * (1 + extraThickness);\n    return {\n      header: {\n        frame_id: getGlobalHooks().rootTransformFrame,\n        stamp: { sec: 0, nsec: 0 },\n      },\n      type: 5,\n      action: 0,\n      id: \"\",\n      ns: \"\",\n      pose: {\n        position: { x: crosshairPoint[0], y: crosshairPoint[1], z },\n        orientation: {\n          x: orientation[0],\n          y: orientation[1],\n          z: orientation[2],\n          w: orientation[3],\n        },\n      },\n      points: [\n        { x: -length * (1 + 0.1 * extraThickness), y: 0, z: 0 },\n        { x: length * (1 + 0.1 * extraThickness), y: 0, z: 0 },\n        { x: 0, y: -length * (1 + 0.1 * extraThickness), z: 0 },\n        { x: 0, y: length * (1 + 0.1 * extraThickness), z: 0 },\n      ],\n      scale: { x: thickness, y: thickness, z: thickness },\n    };\n  };\n\n  return (\n    <Lines>\n      {[\n        {\n          ...crosshair(1000, 0.6),\n          color: { r: 0, g: 0, b: 0, a: 1 },\n        },\n        {\n          ...crosshair(1001, 0),\n          color: { r: 1, g: 1, b: 1, a: 1 },\n        },\n      ]}\n    </Lines>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport CrosshairsGpsIcon from \"@mdi/svg/svg/crosshairs-gps.svg\";\nimport MenuDownIcon from \"@mdi/svg/svg/menu-down.svg\";\nimport MenuLeftIcon from \"@mdi/svg/svg/menu-left.svg\";\nimport CompassOutlineIcon from \"@mdi/svg/svg/navigation.svg\";\nimport { sortBy, debounce } from \"lodash\";\nimport React, { memo, createRef, useCallback, useState } from \"react\";\nimport shallowequal from \"shallowequal\";\nimport styled from \"styled-components\";\n\nimport { type Transform } from \"./Transforms\";\nimport Autocomplete from \"webviz-core/src/components/Autocomplete\";\nimport Button from \"webviz-core/src/components/Button\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\ntype TfTreeNode = {\n  tf: Transform,\n  children: TfTreeNode[],\n  depth: number,\n};\n\ntype TfTree = {\n  roots: TfTreeNode[],\n  nodes: { [string]: TfTreeNode },\n};\n\nconst treeNodeToTfId = (node) => node.tf.id;\n\nconst buildTfTree = (transforms: Transform[]): TfTree => {\n  const tree: TfTree = {\n    roots: [],\n    nodes: {},\n  };\n  // Create treeNodes for all tfs.\n  for (const tf of transforms) {\n    if (tree.nodes[tf.id]) {\n      continue;\n    }\n    tree.nodes[tf.id] = {\n      tf,\n      children: [],\n      depth: 0,\n    };\n  }\n\n  // Now add children to their parents treenode.\n  for (const tf of transforms) {\n    if (tf.parent) {\n      const parentTreeNode = tree.nodes[tf.parent.id];\n      parentTreeNode.children.push(tree.nodes[tf.id]);\n    } else {\n      tree.roots.push(tree.nodes[tf.id]);\n    }\n  }\n\n  // Cast the list to satisfy flow (because Object.values returns array of mixed).\n  const allNodes = ((Object.values(tree.nodes): any): TfTreeNode[]);\n  // Do a final pass sorting all the children lists.\n  for (const node of allNodes) {\n    node.children = sortBy(node.children, treeNodeToTfId);\n  }\n  tree.roots = sortBy(tree.roots, treeNodeToTfId);\n\n  // Calculate depths\n  const setDepth = (node: TfTreeNode, depth: number) => {\n    node.depth = depth;\n    node.children.forEach((child) => setDepth(child, depth + 1));\n  };\n  tree.roots.forEach((root) => setDepth(root, 0));\n\n  return tree;\n};\n\ntype Props = {\n  transforms: any,\n  tfToFollow?: string,\n  followOrientation?: boolean,\n  onFollowChange: (tfId?: string | false, followOrientation?: boolean) => void,\n};\n\nfunction* getDescendants(nodes: TfTreeNode[]) {\n  for (const node of nodes) {\n    yield node;\n    yield* getDescendants(node.children);\n  }\n}\n\nfunction getItemText(node: TfTreeNode | { tf: { id: string }, depth: number }) {\n  return \"\".padEnd(node.depth * 4) + node.tf.id;\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  position: relative;\n`;\n\nconst defaultFollowTfFrame = getGlobalHooks().perPanelHooks().ThreeDimensionalViz.defaultFollowTransformFrame;\n\nconst arePropsEqual = (prevProps, nextProps) => {\n  if (!nextProps.tfToFollow) {\n    const tfTree = buildTfTree(nextProps.transforms.values());\n    const allNodes = Array.from(getDescendants(tfTree.roots));\n    const nodesWithoutDefaultFollowTfFrame = allNodes && allNodes.length && !defaultFollowTfFrame;\n    if (nodesWithoutDefaultFollowTfFrame) {\n      return false;\n    }\n  }\n  return shallowequal(prevProps, nextProps);\n};\n\nconst FollowTFControl = memo<Props>((props: Props) => {\n  const { transforms, tfToFollow, followOrientation, onFollowChange } = props;\n  const [forceShowFrameList, setForceShowFrameList] = useState(false);\n  const [hovering, setHovering] = useState(false);\n  const [lastSelectedFrame, setLastSelectedFrame] = useState(undefined);\n\n  const tfTree = buildTfTree(transforms.values());\n  const allNodes = Array.from(getDescendants(tfTree.roots));\n  const nodesWithoutDefaultFollowTfFrame = allNodes && allNodes.length && !defaultFollowTfFrame;\n  const newFollowTfFrame = allNodes && allNodes[0] && allNodes[0].tf && allNodes[0].tf.id;\n\n  const autocomplete = createRef<Autocomplete>();\n\n  const getDefaultFollowTransformFrame = useCallback(\n    () => {\n      return nodesWithoutDefaultFollowTfFrame ? newFollowTfFrame : defaultFollowTfFrame;\n    },\n    [nodesWithoutDefaultFollowTfFrame, newFollowTfFrame]\n  );\n\n  const getFollowButtonTooltip = useCallback(\n    () => {\n      if (!tfToFollow) {\n        if (lastSelectedFrame) {\n          return `Follow ${lastSelectedFrame}`;\n        }\n        return `Follow ${getDefaultFollowTransformFrame()}`;\n      } else if (!followOrientation) {\n        return \"Follow Orientation\";\n      }\n      return \"Unfollow\";\n    },\n    [tfToFollow, followOrientation, lastSelectedFrame, getDefaultFollowTransformFrame]\n  );\n\n  const onClickFollowButton = useCallback(\n    () => {\n      if (!tfToFollow) {\n        if (lastSelectedFrame) {\n          return onFollowChange(lastSelectedFrame);\n        }\n        return onFollowChange(getDefaultFollowTransformFrame());\n      } else if (!followOrientation) {\n        return onFollowChange(tfToFollow, true);\n      }\n      return onFollowChange(false);\n    },\n    [tfToFollow, lastSelectedFrame, onFollowChange, getDefaultFollowTransformFrame, followOrientation]\n  );\n\n  const onSelectFrame = useCallback(\n    (id: string, item: mixed, autocompleteNode: Autocomplete) => {\n      setLastSelectedFrame(id === getDefaultFollowTransformFrame() ? undefined : id);\n      onFollowChange(id, followOrientation);\n      autocompleteNode.blur();\n    },\n    [setLastSelectedFrame, getDefaultFollowTransformFrame, onFollowChange, followOrientation]\n  );\n\n  const openFrameList = useCallback(\n    (event: SyntheticEvent<Element>) => {\n      event.preventDefault();\n      setForceShowFrameList(true);\n      if (autocomplete.current) {\n        autocomplete.current.focus();\n      }\n    },\n    [setForceShowFrameList, autocomplete]\n  );\n\n  // slight delay to prevent the arrow from disappearing when you're trying to click it\n  const onMouseLeaveDebounced = useCallback(\n    debounce(() => {\n      setHovering(false);\n    }, 200),\n    [setHovering]\n  );\n\n  const onMouseEnter = useCallback(\n    () => {\n      onMouseLeaveDebounced.cancel();\n      setHovering(true);\n    },\n    [onMouseLeaveDebounced, setHovering]\n  );\n\n  const followingCustomFrame = tfToFollow && tfToFollow !== getDefaultFollowTransformFrame();\n  const showFrameList = lastSelectedFrame != null || forceShowFrameList || followingCustomFrame;\n  const selectedFrameId = tfToFollow || lastSelectedFrame;\n  const selectedItem = selectedFrameId ? { tf: { id: selectedFrameId }, depth: 0 } : undefined;\n\n  return (\n    <Container\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeaveDebounced}\n      style={{ color: tfToFollow ? undefined : colors.textMuted }}>\n      {showFrameList && (\n        <Autocomplete\n          ref={autocomplete}\n          items={allNodes}\n          getItemValue={treeNodeToTfId}\n          getItemText={getItemText}\n          selectedItem={selectedItem}\n          placeholder={selectedItem ? getItemText(selectedItem) : \"choose a target frame\"}\n          onSelect={onSelectFrame}\n          sortWhenFiltering={false}\n          minWidth={0}\n          clearOnFocus\n          autoSize\n          menuStyle={{\n            // bump the menu down to reduce likelihood of it appearing while the mouse is\n            // already over it, which causes onMouseEnter not to be delivered correctly and\n            // breaks selection\n            marginTop: 4,\n          }}\n          onBlur={() => {\n            setForceShowFrameList(false);\n            setHovering(false);\n          }}\n        />\n      )}\n      {showFrameList ? (\n        <Icon onClick={openFrameList}>\n          <MenuDownIcon />\n        </Icon>\n      ) : hovering ? (\n        <Icon\n          tooltip={\"Select Another Frame\\u2026\"}\n          onClick={openFrameList}\n          tooltipProps={{ placement: \"top\" }}\n          style={{ color: \"white\" }}>\n          <MenuLeftIcon />\n        </Icon>\n      ) : null}\n      <Button tooltipProps={{ placement: \"top\" }} onClick={onClickFollowButton} tooltip={getFollowButtonTooltip()}>\n        <Icon style={{ color: tfToFollow ? colors.accent : \"white\" }}>\n          {followOrientation ? <CompassOutlineIcon /> : <CrosshairsGpsIcon />}\n        </Icon>\n      </Button>\n    </Container>\n  );\n}, arePropsEqual);\nexport default FollowTFControl;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport BugIcon from \"@mdi/svg/svg/bug.svg\";\nimport RulerIcon from \"@mdi/svg/svg/ruler.svg\";\nimport Video3dIcon from \"@mdi/svg/svg/video-3d.svg\";\nimport * as React from \"react\";\n\nimport Button from \"webviz-core/src/components/Button\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport MeasuringTool, { type MeasureInfo } from \"webviz-core/src/panels/ThreeDimensionalViz/DrawingTools/MeasuringTool\";\nimport styles from \"webviz-core/src/panels/ThreeDimensionalViz/Layout.module.scss\";\nimport colors from \"webviz-core/src/styles/colors.module.scss\";\n\ntype Props = {\n  measuringTool: ?MeasuringTool,\n  measureInfo: MeasureInfo,\n  perspective: boolean,\n  debug: boolean,\n  onToggleCameraMode: () => void,\n  onToggleDebug: () => void,\n};\n\nfunction MainToolbar({\n  measuringTool,\n  measureInfo: { measureState },\n  debug,\n  onToggleCameraMode,\n  onToggleDebug,\n  perspective = false,\n}: Props) {\n  const cameraModeTip = perspective ? \"Switch to 2D camera\" : \"Switch to 3D camera\";\n  const measureActive = measureState === \"place-start\" || measureState === \"place-finish\";\n  return (\n    <div className={styles.buttons}>\n      <Button tooltip={cameraModeTip} onClick={onToggleCameraMode}>\n        <Icon style={{ color: perspective ? colors.accent : \"white\" }}>\n          <Video3dIcon />\n        </Icon>\n      </Button>\n      <Button\n        disabled={perspective}\n        tooltip={\n          perspective\n            ? \"Switch to 2D Camera to Measure Distance\"\n            : measureActive\n            ? \"Cancel Measuring\"\n            : \"Measure Distance\"\n        }\n        onClick={measuringTool ? measuringTool.toggleMeasureState : undefined}>\n        <Icon\n          style={{\n            color: measureActive ? colors.accent : perspective ? undefined : \"white\",\n          }}>\n          <RulerIcon />\n        </Icon>\n      </Button>\n      {process.env.NODE_ENV === \"development\" && (\n        <Button tooltip=\"Debug\" onClick={onToggleDebug}>\n          <Icon style={{ color: debug ? colors.accent : \"white\" }}>\n            <BugIcon />\n          </Icon>\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo<Props>(MainToolbar);\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\nimport { Lines, Spheres, type Point } from \"regl-worldview\";\n\ntype Props = {\n  measurePoints: { start: ?Point, end: ?Point },\n};\n\nconst sphereSize: number = 0.3;\nconst lineSize: number = 0.1;\n\nconst defaultSphere: any = Object.freeze({\n  type: 2,\n  action: 0,\n  scale: { x: sphereSize, y: sphereSize, z: 0.1 },\n  color: { r: 1, g: 0.2, b: 0, a: 1 },\n});\nconst defaultPose: any = Object.freeze({ orientation: { x: 0, y: 0, z: 0, w: 1 } });\n\nexport default function MeasureMarker({ measurePoints: { start, end } }: Props) {\n  const spheres = [];\n  const lines = [];\n  if (start) {\n    const startPoint = { ...start };\n\n    spheres.push({\n      ...defaultSphere,\n      id: \"_measure_start\",\n      pose: { position: startPoint, ...defaultPose },\n    });\n\n    if (end) {\n      const endPoint = { ...end };\n      lines.push({\n        ...defaultSphere,\n        id: \"_measure_line\",\n        points: [start, end],\n        pose: { ...defaultPose, position: { x: 0, y: 0, z: 0 } },\n        scale: { x: lineSize, y: 1, z: 1 },\n        type: 4,\n      });\n\n      spheres.push({\n        ...defaultSphere,\n        id: \"_measure_end\",\n        pose: { position: endPoint, ...defaultPose },\n      });\n    }\n  }\n\n  return (\n    <>\n      {lines.length && <Lines>{lines}</Lines>}\n      {spheres.length && <Spheres>{spheres}</Spheres>}\n    </>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { some, mapValues } from \"lodash\";\nimport type { Time } from \"rosbag\";\n\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport MessageCollector from \"webviz-core/src/panels/ThreeDimensionalViz/SceneBuilder/MessageCollector\";\nimport { getSceneErrorsByTopic } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/topicGroupsUtils\";\nimport { parseColorSetting } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/TopicSettingsEditor\";\nimport Transforms from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport type { Topic, Frame, Message } from \"webviz-core/src/players/types\";\nimport type { Marker, Namespace, OccupancyGridMessage, MutablePose, Pose } from \"webviz-core/src/types/Messages\";\nimport type { MarkerProvider, MarkerCollector, Scene } from \"webviz-core/src/types/Scene\";\nimport Bounds from \"webviz-core/src/util/Bounds\";\nimport { POSE_MARKER_SCALE, LINED_CONVEX_HULL_RENDERING_SETTING } from \"webviz-core/src/util/globalConstants\";\nimport naturalSort from \"webviz-core/src/util/naturalSort\";\nimport { emptyPose } from \"webviz-core/src/util/Pose\";\nimport sendNotification from \"webviz-core/src/util/sendNotification\";\nimport { fromSec } from \"webviz-core/src/util/time\";\n\nexport type TopicSettingsCollection = {\n  [topic: string]: any,\n};\n\n// builds a syntehtic arrow marker from a geometry_msgs/PoseStamped\n// these pose sizes were manually configured in rviz; for now we hard-code them here\nexport function buildSyntheticArrowMarker(msg: any, flattenedZHeightPose: ?Pose) {\n  return {\n    type: 103,\n    header: msg.message.header,\n    pose: getGlobalHooks()\n      .perPanelHooks()\n      .ThreeDimensionalViz.getMessagePose(msg, flattenedZHeightPose),\n    scale: POSE_MARKER_SCALE,\n    color: getGlobalHooks()\n      .perPanelHooks()\n      .ThreeDimensionalViz.getSyntheticArrowMarkerColor(msg.topic),\n  };\n}\n\n// TODO(JP): looks like we might not actually use these fields in the new topic picker?\nexport type ErrorDetails = {| frameIds: Set<string>, namespaces: Set<string> |};\n\nexport type SceneErrors = {\n  topicsMissingFrameIds: Map<string, ErrorDetails>,\n  topicsMissingTransforms: Map<string, ErrorDetails>,\n  topicsWithBadFrameIds: Map<string, ErrorDetails>,\n  topicsWithError: Map<string, string>,\n  rootTransformID: string,\n};\n\ntype SceneErrorTopics = {\n  topicsWithBadFrameIds: Set<string>,\n};\n\ntype SelectedNamespacesByTopic = { [topicName: string]: string[] };\n// constructs a scene containing all objects to be rendered\n// by consuming visualization topics from frames\n\nexport default class SceneBuilder implements MarkerProvider {\n  topics: Topic[] = [];\n  markers: Marker[] = [];\n  transforms: Transforms;\n  rootTransformID: string;\n  selectionState: any = {};\n  frame: Frame;\n  // TODO(JP): Get rid of these two different variables `errors` and `errorsByTopic` which we\n  // have to keep in sync.\n  errors: SceneErrors = {\n    rootTransformID: \"\",\n    topicsMissingFrameIds: new Map(),\n    topicsMissingTransforms: new Map(),\n    topicsWithBadFrameIds: new Map(),\n    topicsWithError: new Map(),\n  };\n  errorsByTopic: { [topicName: string]: string[] } = {};\n  reportedErrorTopics: SceneErrorTopics = {\n    topicsWithBadFrameIds: new Set(),\n  };\n  maps = [];\n  flattenedZHeightPose: ?Pose = null;\n  scene = {};\n  collectors: { [string]: MessageCollector } = {};\n  _clock: Time;\n  _playerId: ?string = null;\n  _topicSettings: TopicSettingsCollection = {};\n  _onForceUpdate: ?() => void = null;\n\n  allNamespaces: Namespace[] = [];\n  // TODO(Audrey): remove enabledNamespaces once we release topic groups\n  enabledNamespaces: Namespace[] = [];\n  selectedNamespacesByTopic: ?{ [topicName: string]: Set<string> };\n  flatten: boolean = false;\n  bounds: Bounds = new Bounds();\n\n  // list of topics that need to be rerendered because the frame has new values\n  // or because a prop affecting its rendering was changed\n  topicsToRender: Set<string> = new Set();\n\n  // stored message arrays allowing used to re-render topics even when the latest\n  // frame does not not contain that topic\n  lastSeenMessages: { [string]: Message[] } = {};\n\n  setTransforms = (transforms: Transforms, rootTransformID: string) => {\n    this.transforms = transforms;\n    this.rootTransformID = rootTransformID;\n    this.errors.rootTransformID = rootTransformID;\n  };\n\n  clear() {\n    for (const topic of this.topics) {\n      const collector = this.collectors[topic.name];\n      if (collector) {\n        collector.flush();\n      }\n    }\n  }\n\n  setPlayerId(playerId: string) {\n    if (this._playerId !== playerId) {\n      this.reportedErrorTopics.topicsWithBadFrameIds.clear();\n      this.errors = {\n        rootTransformID: \"\",\n        topicsMissingFrameIds: new Map(),\n        topicsMissingTransforms: new Map(),\n        topicsWithBadFrameIds: new Map(),\n        topicsWithError: new Map(),\n      };\n      this._updateErrorsByTopic();\n    }\n    this._playerId = playerId;\n  }\n\n  setTopicSettings(settings: TopicSettingsCollection) {\n    this._topicSettings = settings;\n  }\n\n  // set the topics the scene builder should consume from each frame\n  setTopics(topics: Topic[]) {\n    const topicsToFlush = this.topics.filter((topic) => !topics.find((other) => other.name === topic.name));\n    // Sort the topics by name so the render order is consistent.\n    this.topics = topics.sort(naturalSort(\"name\"));\n    // IMPORTANT: when topics change, we also need to reset the frame so that\n    // setFrame gets called correctly to set the topicsToRender and lastSeenMessages\n    this.frame = {};\n    // Delete message collectors we don't need anymore\n    topicsToFlush.forEach((topic) => {\n      const collector = this.collectors[topic.name];\n      if (collector) {\n        collector.flush();\n        delete this.collectors[topic.name];\n      }\n    });\n  }\n\n  setFrame(frame: Frame) {\n    if (this.frame === frame) {\n      return;\n    }\n    this.frame = frame;\n    for (const topic of this.topics) {\n      if (topic.name in frame) {\n        this.topicsToRender.add(topic.name);\n      }\n    }\n\n    // Note we save even topics that are not rendered since they may be used by non-rendered topics\n    Object.assign(this.lastSeenMessages, frame);\n  }\n\n  setFlattenMarkers(flatten: boolean): void {\n    this.flatten = flatten;\n  }\n\n  setEnabledNamespaces(namespaces: Namespace[]) {\n    this.enabledNamespaces = namespaces;\n  }\n\n  setSelectedNamespacesByTopic(selectedNamespacesByTopic: SelectedNamespacesByTopic) {\n    this.selectedNamespacesByTopic = mapValues(selectedNamespacesByTopic, (namespaces) => new Set(namespaces));\n  }\n\n  setGlobalVariables = (globalVariables: any = {}) => {\n    const { selectionState, topicsToRender } = getGlobalHooks()\n      .perPanelHooks()\n      .ThreeDimensionalViz.setGlobalVariablesInSceneBuilder(\n        globalVariables,\n        this.selectionState,\n        this.topicsToRender,\n        this.topics\n      );\n    this.selectionState = selectionState;\n    this.topicsToRender = topicsToRender;\n  };\n\n  hasErrors() {\n    const { topicsMissingFrameIds, topicsMissingTransforms, topicsWithBadFrameIds, topicsWithError } = this.errors;\n    return (\n      topicsMissingFrameIds.size !== 0 ||\n      topicsMissingTransforms.size !== 0 ||\n      topicsWithBadFrameIds.size !== 0 ||\n      topicsWithError.size !== 0\n    );\n  }\n\n  setOnForceUpdate(callback: () => void) {\n    this._onForceUpdate = callback;\n  }\n\n  _addError(map: Map<string, ErrorDetails>, topic: string): ErrorDetails {\n    let values = map.get(topic);\n    if (!values) {\n      values = { namespaces: new Set(), frameIds: new Set() };\n      map.set(topic, values);\n    }\n    this._updateErrorsByTopic();\n    return values;\n  }\n\n  _setTopicError = (topic: string, message: string) => {\n    this.errors.topicsWithError.set(topic, message);\n    this._updateErrorsByTopic();\n  };\n\n  // Update the field everytime when the errors changes in order to generate a new object to trigger TopicTree to rerender.\n  _updateErrorsByTopic() {\n    this.errorsByTopic = getSceneErrorsByTopic(this.errors);\n    if (this._onForceUpdate) {\n      this._onForceUpdate();\n    }\n  }\n\n  // keep a unique set of all seen namespaces\n  _consumeNamespace(topic: string, name: string) {\n    if (some(this.allNamespaces, (ns) => ns.topic === topic && ns.name === name)) {\n      return;\n    }\n    this.allNamespaces = this.allNamespaces.concat([{ topic, name }]);\n    if (this._onForceUpdate) {\n      this._onForceUpdate();\n    }\n  }\n\n  // Only public for tests.\n  namespaceIsEnabled(topic: string, name: string) {\n    if (this.selectedNamespacesByTopic) {\n      // enable all namespaces under a topic if it's not already set\n      return (\n        (this.selectedNamespacesByTopic[topic] && this.selectedNamespacesByTopic[topic].has(name)) ||\n        this.selectedNamespacesByTopic[topic] == null\n      );\n    }\n    return some(this.enabledNamespaces, (ns) => ns.topic === topic && ns.name === name);\n  }\n\n  _reportBadFrameId(topic: string) {\n    if (!this.reportedErrorTopics.topicsWithBadFrameIds.has(topic)) {\n      this.reportedErrorTopics.topicsWithBadFrameIds.add(topic);\n      sendNotification(\n        `Topic ${topic} has bad frame`,\n        \"Non-root transforms may be out of sync, since webviz uses the latest transform message instead of the one matching header.stamp\",\n        \"user\",\n        \"warn\"\n      );\n    }\n  }\n\n  _transformMarkerPose = (topic: string, marker: Marker): ?MutablePose => {\n    const { frame_id } = marker.header;\n\n    if (!frame_id) {\n      const error = this._addError(this.errors.topicsMissingFrameIds, topic);\n      error.namespaces.add(marker.ns);\n      return null;\n    }\n\n    if (frame_id === this.rootTransformID) {\n      // Transforming is a bit expensive, and this (no transformation necessary) is the common-case\n      // TODO: Need to deep-clone, callers mutate the result; fix this downstream.\n      return {\n        position: { ...marker.pose.position },\n        orientation: { ...marker.pose.orientation },\n      };\n    }\n\n    // frame_id !== this.rootTransformID.\n    // We continue to render these, though they may be inaccurate\n    this._reportBadFrameId(topic);\n    const badFrameError = this._addError(this.errors.topicsWithBadFrameIds, topic);\n    badFrameError.namespaces.add(marker.ns);\n    badFrameError.frameIds.add(frame_id);\n\n    const pose = this.transforms.apply(emptyPose(), marker.pose, frame_id, this.rootTransformID);\n    if (!pose) {\n      const topicMissingError = this._addError(this.errors.topicsMissingTransforms, topic);\n      topicMissingError.namespaces.add(marker.ns);\n      topicMissingError.frameIds.add(frame_id);\n    }\n    return pose;\n  };\n\n  _consumeMarkerArray = (topic: string, message: any): void => {\n    for (let i = 0; i < message.markers.length; i++) {\n      this._consumeMarker(topic, message.markers[i]);\n    }\n  };\n\n  _consumeMarker(topic: string, message: Marker): void {\n    if (message.ns) {\n      this._consumeNamespace(topic, message.ns);\n    }\n\n    // Every marker needs a name property as a unique id. In each topic, the namespace (`ns`) and\n    // identifier (`id`) uniquely identify the marker.\n    // See https://github.com/ros-visualization/rviz/blob/4b6c0f4/src/rviz/default_plugin/markers/marker_base.h#L56\n    // and https://github.com/ros-visualization/rviz/blob/4b6c0f4/src/rviz/default_plugin/marker_display.cpp#L422\n    const name = `${topic}/${message.ns}/${message.id}`;\n    switch (message.action) {\n      case 0: // add\n        break;\n      case 1: // deprecated in ros\n        this._setTopicError(topic, \"Marker.action=1 is deprecated\");\n        return;\n      case 2: // delete\n        this.collectors[topic].deleteMarker(name);\n        return;\n      case 3:\n        this.collectors[topic].deleteAll();\n        return;\n      default:\n        this._setTopicError(topic, `Unsupported action type: ${message.action}`);\n        return;\n    }\n\n    const pose = this._transformMarkerPose(topic, message);\n    if (!pose) {\n      return;\n    }\n    const marker = { ...message, name, pose };\n\n    const { points } = (marker: any);\n    const { position } = pose;\n\n    let minZ = Number.MAX_SAFE_INTEGER;\n\n    // if the marker has points, adjust bounds by the points\n    if (points && points.length) {\n      points.forEach((point) => {\n        const x = point.x + position.x;\n        const y = point.y + position.y;\n        const z = point.z + position.z;\n        minZ = Math.min(minZ, point.z);\n        this.bounds.update({ x, y, z });\n      });\n    } else {\n      // otherwise just adjust by the pose\n      minZ = Math.min(minZ, position.z);\n      this.bounds.update(position);\n    }\n\n    // if the minimum z value of any point (or the pose) is exactly 0\n    // then assume this marker can be flattened\n    if (minZ === 0 && this.flatten && this.flattenedZHeightPose) {\n      position.z = this.flattenedZHeightPose.position.z;\n    }\n\n    // HACK(jacob): rather than hard-coding this, we should\n    //  (a) produce this visualization dynamically from a non-marker topic\n    //  (b) fix translucency so it looks correct (harder)\n    marker.color = getGlobalHooks()\n      .perPanelHooks()\n      .ThreeDimensionalViz.getMarkerColor(topic, marker.color);\n\n    // allow topic settings to override marker color (see MarkerSettingsEditor.js)\n    const { overrideColor } = this._topicSettings[topic] || {};\n    if (overrideColor) {\n      marker.color = parseColorSetting(overrideColor);\n      marker.colors = [];\n    }\n\n    this.collectors[topic].addMarker(topic, marker);\n  }\n\n  _consumeOccupancyGrid = (topic: string, message: OccupancyGridMessage): void => {\n    const { frame_id } = message.header;\n\n    if (!frame_id) {\n      this._addError(this.errors.topicsMissingFrameIds, topic);\n      return;\n    }\n\n    if (frame_id !== this.rootTransformID) {\n      this._reportBadFrameId(topic);\n      const error = this._addError(this.errors.topicsWithBadFrameIds, topic);\n      error.frameIds.add(frame_id);\n    }\n\n    let pose = emptyPose();\n    pose = this.transforms.apply(pose, pose, frame_id, this.rootTransformID);\n    if (!pose) {\n      const error = this._addError(this.errors.topicsMissingTransforms, topic);\n      error.frameIds.add(frame_id);\n      return;\n    }\n\n    const type = 101;\n    // every marker needs a name property as a unique id\n    const name = `${topic}/${message.type}`;\n\n    // set ogrid texture & alpha based on current rviz settings\n    // in the future these will be customizable via the UI\n    const [alpha, map] = getGlobalHooks()\n      .perPanelHooks()\n      .ThreeDimensionalViz.getOccupancyGridValues(topic);\n\n    const mappedMessage = {\n      ...message,\n      alpha,\n      map,\n      type,\n      name,\n      pose,\n    };\n\n    // if we neeed to flatten the ogrid clone the position and change the z to match the flattenedZHeightPose\n    if (mappedMessage.info.origin.position.z === 0 && this.flattenedZHeightPose && this.flatten) {\n      const originalInfo = mappedMessage.info;\n      const originalPosition = originalInfo.origin.position;\n      mappedMessage.info = {\n        ...originalInfo,\n        origin: {\n          ...originalInfo.origin,\n          position: { ...originalPosition, z: this.flattenedZHeightPose.position.z },\n        },\n      };\n    }\n    this.collectors[topic].addMessage(topic, mappedMessage);\n  };\n\n  _consumeNonMarkerMessage = (topic: string, message: any, type: number): void => {\n    const sourcePose = emptyPose();\n    const pose = this.transforms.apply(sourcePose, sourcePose, message.header.frame_id, this.rootTransformID);\n    if (!pose) {\n      const error = this._addError(this.errors.topicsMissingTransforms, topic);\n      error.frameIds.add(message.header.frame_id);\n      return;\n    }\n\n    const decayTimeInSec = this._topicSettings[topic] && this._topicSettings[topic].decayTime;\n    const mappedMessage = {\n      ...message,\n      name: `${topic}/${message.type}`,\n      type,\n      pose,\n      // If a decay time is available, we assign a lifetime to this message\n      // Do not automatically assign a 0 (zero) decay time since that translates\n      // to an infinite lifetime. But do allow for 0 values based on user preferences.\n      lifetime: decayTimeInSec !== undefined ? fromSec(decayTimeInSec) : undefined,\n    };\n\n    this.collectors[topic].addMessage(topic, mappedMessage);\n  };\n\n  setCurrentTime = (currentTime: { sec: number, nsec: number }) => {\n    this.bounds.reset();\n\n    this._clock = currentTime;\n    // set the new clock value in all existing collectors\n    // including those for topics not included in this frame,\n    // so each can expire markers if they need to\n    for (const key in this.collectors) {\n      const collector = this.collectors[key];\n      collector.setClock(this._clock);\n    }\n  };\n\n  // extracts renderable markers from the ros frame\n  render() {\n    this.flattenedZHeightPose =\n      getGlobalHooks()\n        .perPanelHooks()\n        .ThreeDimensionalViz.getFlattenedPose(this.frame) || this.flattenedZHeightPose;\n\n    if (this.flattenedZHeightPose && this.flattenedZHeightPose.position) {\n      this.bounds.update(this.flattenedZHeightPose.position);\n    }\n    for (const topic of this.topicsToRender) {\n      try {\n        this._consumeTopic(topic);\n      } catch (error) {\n        this._setTopicError(topic, error.toString());\n      }\n    }\n    this.topicsToRender.clear();\n  }\n\n  _consumeMessage = (topic: string, msg: Message): void => {\n    const { message, datatype } = msg;\n    const SUPPORTED_MARKER_DATATYPES = getGlobalHooks().perPanelHooks().ThreeDimensionalViz.SUPPORTED_MARKER_DATATYPES;\n\n    switch (datatype) {\n      case SUPPORTED_MARKER_DATATYPES.VISUALIZATION_MSGS_MARKER_DATATYPE:\n        this._consumeMarker(topic, message);\n        break;\n      case SUPPORTED_MARKER_DATATYPES.VISUALIZATION_MSGS_MARKER_ARRAY_DATATYPE:\n        this._consumeMarkerArray(topic, message);\n        break;\n      case SUPPORTED_MARKER_DATATYPES.POSE_STAMPED_DATATYPE:\n        // make synthetic arrow marker from the stamped pose\n        this.collectors[topic].addMessage(topic, buildSyntheticArrowMarker(msg, this.flattenedZHeightPose));\n        break;\n      case SUPPORTED_MARKER_DATATYPES.NAV_MSGS_OCCUPANCY_GRID_DATATYPE:\n        // flatten btn: set empty z values to be at the same level as the flattenedZHeightPose\n        this._consumeOccupancyGrid(topic, message);\n        break;\n      case SUPPORTED_MARKER_DATATYPES.POINT_CLOUD_DATATYPE:\n        this._consumeNonMarkerMessage(topic, message, 102);\n        break;\n      case SUPPORTED_MARKER_DATATYPES.SENSOR_MSGS_LASER_SCAN_DATATYPE:\n        this._consumeNonMarkerMessage(topic, message, 104);\n        break;\n      case SUPPORTED_MARKER_DATATYPES.GEOMETRY_MSGS_POLYGON_STAMPED_DATATYPE: {\n        // convert Polygon to a line strip\n        const { polygon } = message;\n        if (polygon.points.length === 0) {\n          break;\n        }\n        const newMessage = {\n          ...message,\n          points: polygon.points,\n          closed: true,\n          scale: { x: 0.2 },\n          color: { r: 0, g: 1, b: 0, a: 1 },\n        };\n        this._consumeNonMarkerMessage(topic, newMessage, 4 /* line strip */);\n        break;\n      }\n      default: {\n        const { flattenedZHeightPose, collectors, errors, lastSeenMessages, selectionState } = this;\n        getGlobalHooks()\n          .perPanelHooks()\n          .ThreeDimensionalViz.consumeMessage(\n            topic,\n            msg,\n            {\n              consumeMarkerArray: this._consumeMarkerArray,\n              consumeNonMarkerMessage: this._consumeNonMarkerMessage,\n            },\n            { flattenedZHeightPose, collectors, errors, lastSeenMessages, selectionState }\n          );\n      }\n    }\n  };\n\n  _consumeTopic = (topic: string) => {\n    const messages = this.frame[topic] || this.lastSeenMessages[topic];\n    if (!messages) {\n      return;\n    }\n\n    this.errors.topicsMissingFrameIds.delete(topic);\n    this.errors.topicsMissingTransforms.delete(topic);\n    this.errors.topicsWithBadFrameIds.delete(topic);\n    this.errors.topicsWithError.delete(topic);\n    this.collectors[topic] = this.collectors[topic] || new MessageCollector();\n    this.collectors[topic].setClock(this._clock);\n    this.collectors[topic].flush();\n\n    for (let i = 0; i < messages.length; i++) {\n      this._consumeMessage(topic, messages[i]);\n    }\n  };\n\n  getScene(): Scene {\n    return {\n      bounds: this.bounds,\n      flattenedZHeightPose: this.flattenedZHeightPose,\n    };\n  }\n\n  renderMarkers(add: MarkerCollector) {\n    for (const topic of this.topics) {\n      const collector = this.collectors[topic.name];\n      if (!collector) {\n        continue;\n      }\n      const topicMarkers = collector.getMessages();\n      for (const message of topicMarkers) {\n        const marker: any = message;\n        if (marker.ns) {\n          if (!this.namespaceIsEnabled(topic.name, marker.ns)) {\n            continue;\n          }\n        }\n        // TODO(bmc): once we support more topic settings\n        // flesh this out to be more marker type agnostic\n        const settings = this._topicSettings[topic.name];\n        if (settings) {\n          marker.settings = settings;\n        }\n        this._addMarkerToCollector(add, topic, marker);\n      }\n    }\n  }\n\n  _addMarkerToCollector(add: MarkerCollector, topic: Topic, originalMarker: any) {\n    let marker = originalMarker;\n    switch (marker.type) {\n      case 1:\n      case 2:\n      case 3:\n        marker = { ...marker, points: undefined };\n        break;\n      case 4:\n        marker = { ...marker, primitive: \"line strip\" };\n        break;\n      case 6:\n        marker = { ...marker, primitive: \"lines\" };\n        break;\n    }\n    marker = { ...marker, interactionData: { topic: topic.name } };\n\n    // allow topic settings to override renderable marker command (see MarkerSettingsEditor.js)\n    const { overrideCommand } = this._topicSettings[topic.name] || {};\n\n    // prettier-ignore\n    switch (marker.type) {\n      case 0: return add.arrow(marker);\n      case 1: return add.cube(marker);\n      case 2: return add.sphere(marker);\n      case 3: return add.cylinder(marker);\n      case 4:\n        if (overrideCommand === LINED_CONVEX_HULL_RENDERING_SETTING) {\n          return add.linedConvexHull(marker);\n        }\n        return add.lineStrip(marker);\n      case 5:\n        if (overrideCommand === LINED_CONVEX_HULL_RENDERING_SETTING) {\n          return add.linedConvexHull(marker);\n        }\n        return add.lineList(marker);\n      case 6: return add.cubeList(marker);\n      case 7: return add.sphereList(marker);\n      case 8: return add.points(marker);\n      case 9: return add.text(marker);\n      // mesh resource not supported\n      case 11: return add.triangleList(marker);\n      case 101: return add.grid(marker);\n      case 102: return add.pointcloud(marker);\n      case 103: return add.poseMarker(marker);\n      case 104: return add.laserScan(marker);\n      case 107: return add.filledPolygon(marker);\n      case 108: return add.instancedLineList(marker);\n      default: {\n        getGlobalHooks()\n          .perPanelHooks()\n          .ThreeDimensionalViz.addMarkerToCollector(add, topic.name, marker, this._setTopicError);\n      }\n    }\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { TimeUtil, type Time } from \"rosbag\";\nimport uuid from \"uuid\";\n\nimport type { BaseMarker, StampedMessage } from \"webviz-core/src/types/Messages\";\n\nconst ZERO_TIME = { sec: 0, nsec: 0 };\n\nclass MessageWithLifetime {\n  message: StampedMessage;\n  receiveTime: Time;\n\n  constructor(message: StampedMessage, receiveTime: Time) {\n    this.message = message;\n    this.receiveTime = receiveTime;\n  }\n\n  // support in place update w/ mutation to avoid allocating\n  // a MarkerWithLifetime wrapper for every marker on every tick\n  // only allocate on new markers\n  update(message: StampedMessage, receiveTime: Time) {\n    this.message = message;\n    this.receiveTime = receiveTime;\n  }\n\n  isExpired(currentTime: Time) {\n    // cannot tell if a marker is expired if we don't have a clock yet\n    if (!currentTime) {\n      return false;\n    }\n    const lifetime = this.getLifetime();\n    if (!lifetime) {\n      // Do not expire markers if we can't tell what their lifetime is.\n      // They'll be flushed later if needed (see flush below)\n      return false;\n    }\n\n    if (TimeUtil.areSame(lifetime, ZERO_TIME)) {\n      // Do not expire markers with infinite lifetime (lifetime == 0)\n      return false;\n    }\n\n    // we use the receive time (clock) instead of the header stamp\n    // to match the behavior of rviz\n    const expiresAt = TimeUtil.add(this.receiveTime, lifetime);\n\n    return TimeUtil.isGreaterThan(currentTime, expiresAt);\n  }\n\n  getLifetime() {\n    const marker = ((this.message: any): BaseMarker);\n    return marker.lifetime;\n  }\n\n  // Returns 'true' if we have a valid lifetime (even for infinite lifetime)\n  // Returns 'false' if the message has no lifetime and must be flushed.\n  hasLifetime() {\n    return !!this.getLifetime();\n  }\n}\n\n// used to collect marker and non-marker visualization messages\n// for a given topic and ensure the lifecycle is managed properly\nexport default class MessageCollector {\n  markers: Map<string, MessageWithLifetime> = new Map();\n  clock: Time = { sec: 0, nsec: 0 };\n\n  setClock(clock: Time) {\n    if (!clock) {\n      return;\n    }\n\n    const clockMovedBackwards = TimeUtil.isGreaterThan(this.clock, clock);\n\n    if (clockMovedBackwards) {\n      this.markers.forEach((marker, key) => {\n        const markerReceivedAfterClock = TimeUtil.isGreaterThan(marker.receiveTime, clock);\n        if (markerReceivedAfterClock) {\n          this.markers.delete(key);\n        }\n      });\n      this.flush();\n    }\n    this.clock = clock;\n  }\n\n  flush() {\n    // clear out all null lifetime markers\n    this.markers.forEach((marker, key) => {\n      if (!marker.hasLifetime()) {\n        this.markers.delete(key);\n      }\n    });\n  }\n\n  _addItem(key: string, item: any): void {\n    const existing = this.markers.get(key);\n    if (existing) {\n      existing.update(item, this.clock);\n    } else {\n      this.markers.set(key, new MessageWithLifetime(item, this.clock));\n    }\n  }\n\n  addMarker(topic: string, marker: BaseMarker) {\n    const { name } = marker;\n    if (!name) {\n      return console.error(\"Cannot add marker, it is missing name\", marker);\n    }\n    this._addItem(name, marker);\n  }\n\n  deleteMarker(name: string) {\n    if (!name) {\n      return console.error(\"Cannot delete marker, it is missing name\");\n    }\n    this.markers.delete(name);\n  }\n\n  deleteAll() {\n    this.markers.clear();\n  }\n\n  addMessage(topic: string, message: any) {\n    if (message.lifetime) {\n      // Assuming that all future messages will have a decay time set,\n      // we need to immediately expire any pre-existing message that didn't have a decay time.\n      this.markers.delete(topic);\n\n      // Create a unique key for each new message.\n      const key = `${topic}/${uuid.v4()}`;\n      this._addItem(key, message);\n    } else {\n      // if future messages will not have a decay time set,\n      // we should expire any pre-existing message that have potentially longer decay times.\n      for (const key of this.markers.keys()) {\n        if (key.indexOf(`${topic}/`) === 0) {\n          this.markers.delete(key);\n        }\n      }\n      this._addItem(topic, message);\n    }\n  }\n\n  getMessages(): any[] {\n    const result = [];\n    this.markers.forEach((marker, key) => {\n      // Check if the marker has a lifetime and should be deleted\n      if (marker.hasLifetime() && marker.isExpired(this.clock)) {\n        this.markers.delete(key);\n      } else {\n        result.push(marker.message);\n      }\n    });\n    return result;\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { Point } from \"webviz-core/src/types/Messages\";\n\n// a single min/max value\nclass Bound {\n  min: number = Number.MAX_SAFE_INTEGER;\n  max: number = Number.MIN_SAFE_INTEGER;\n\n  // update the bound based on a value\n  update(value: number) {\n    this.min = Math.min(this.min, value);\n    this.max = Math.max(this.max, value);\n  }\n\n  reset() {\n    this.min = Number.MAX_SAFE_INTEGER;\n    this.max = Number.MIN_SAFE_INTEGER;\n  }\n}\n\n// represents x, y, and z min & max bounds for a 3d scene\nexport default class Bounds {\n  x: Bound;\n  y: Bound;\n  z: Bound;\n\n  constructor() {\n    this.x = new Bound();\n    this.y = new Bound();\n    this.z = new Bound();\n  }\n\n  // update the bounds based on a point\n  update(point: Point) {\n    this.x.update(point.x);\n    this.y.update(point.y);\n    this.z.update(point.z);\n  }\n\n  reset() {\n    this.x.reset();\n    this.y.reset();\n    this.z.reset();\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { Tabs } from \"antd\";\nimport { isEmpty, omit } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nimport { type Save3DConfig } from \"../index\";\nimport Button from \"webviz-core/src/components/Button\";\nimport ErrorBoundary from \"webviz-core/src/components/ErrorBoundary\";\nimport Modal from \"webviz-core/src/components/Modal\";\nimport { RenderToBodyComponent } from \"webviz-core/src/components/renderToBody\";\nimport { getSettingsByColumnWithDefaults } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/topicGroupsMigrations\";\nimport { topicSettingsEditorForDatatype } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor\";\nimport type { Topic } from \"webviz-core/src/players/types\";\nimport { SECOND_SOURCE_PREFIX } from \"webviz-core/src/util/globalConstants\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst STopicSettingsEditor = styled.div`\n  background: ${colors.TOOLBAR};\n  color: ${colors.TEXT};\n  padding: 16px;\n`;\nconst STitle = styled.h3`\n  font-size: 20px;\n  font-size: 20px;\n  margin-right: 36px;\n  word-break: break-all;\n  line-height: 1.3;\n`;\n\nconst SDatatype = styled.p`\n  padding-bottom: 12px;\n`;\n\nconst SEditorWrapper = styled.div`\n  color: ${colors.TEXT};\n  width: 400px;\n`;\n\nfunction MainEditor({\n  datatype,\n  collectorMessage,\n  columnIndex,\n  onFieldChange,\n  onSettingsChange,\n  settings,\n  topicName,\n}: {|\n  datatype: string,\n  collectorMessage: any,\n  columnIndex: number,\n  onFieldChange: (fieldName: string, value: any) => void,\n  onSettingsChange: (settings: any | ((prevSettings: {}) => {})) => void,\n  settings: any,\n  topicName: string,\n|}) {\n  const Editor = topicSettingsEditorForDatatype(datatype);\n  if (!Editor) {\n    throw new Error(`No topic settings editor available for ${datatype}`);\n  }\n\n  return (\n    <ErrorBoundary>\n      <SEditorWrapper>\n        <Editor\n          message={collectorMessage}\n          onFieldChange={onFieldChange}\n          settings={settings}\n          onSettingsChange={onSettingsChange}\n        />\n        <Button\n          className=\"test-reset-settings-btn\"\n          style={{ marginTop: 8 }}\n          onClick={() => {\n            const defaultSettingsByColumn = getSettingsByColumnWithDefaults(topicName)?.settingsByColumn || [];\n            onSettingsChange(defaultSettingsByColumn[columnIndex]);\n          }}>\n          Reset to defaults\n        </Button>\n      </SEditorWrapper>\n    </ErrorBoundary>\n  );\n}\n\ntype Props = {|\n  currentEditingTopic: Topic,\n  hasFeatureColumn: boolean,\n  saveConfig: Save3DConfig,\n  sceneBuilderMessage: any,\n  setCurrentEditingTopic: (?Topic) => void,\n  topicSettings: { [topic: string]: any },\n|};\n\nfunction TopicSettingsModal({\n  currentEditingTopic,\n  currentEditingTopic: { datatype, name: topicName },\n  hasFeatureColumn,\n  saveConfig,\n  sceneBuilderMessage,\n  setCurrentEditingTopic,\n  topicSettings,\n}: Props) {\n  const onSettingsChange = useCallback(\n    (settings: any | ((prevSettings: {}) => {})) => {\n      if (typeof settings !== \"function\" && isEmpty(settings)) {\n        // Remove the field if the topic settings are empty to prevent the panelConfig from every growing.\n        saveConfig({ topicSettings: omit(topicSettings, [topicName]) });\n        return;\n      }\n      saveConfig({\n        topicSettings: {\n          ...topicSettings,\n          [topicName]: typeof settings === \"function\" ? settings(topicSettings[topicName] || {}) : settings,\n        },\n      });\n    },\n    [saveConfig, topicName, topicSettings]\n  );\n\n  const onFieldChange = useCallback(\n    (fieldName: string, value: any) => {\n      onSettingsChange((newSettings) => ({ ...newSettings, [fieldName]: value }));\n    },\n    [onSettingsChange]\n  );\n\n  const columnIndex = topicName.startsWith(SECOND_SOURCE_PREFIX) ? 1 : 0;\n  const nonPrefixedTopic = columnIndex === 1 ? topicName.substr(SECOND_SOURCE_PREFIX.length) : topicName;\n\n  const editorElem = (\n    <MainEditor\n      collectorMessage={sceneBuilderMessage}\n      columnIndex={columnIndex}\n      datatype={datatype}\n      onFieldChange={onFieldChange}\n      onSettingsChange={onSettingsChange}\n      settings={topicSettings[topicName] || {}}\n      topicName={nonPrefixedTopic}\n    />\n  );\n  return (\n    <RenderToBodyComponent>\n      <Modal\n        onRequestClose={() => setCurrentEditingTopic(undefined)}\n        contentStyle={{\n          maxHeight: \"calc(100vh - 200px)\",\n          maxWidth: 480,\n          display: \"flex\",\n          flexDirection: \"column\",\n        }}>\n        <STopicSettingsEditor>\n          <STitle>{currentEditingTopic.name}</STitle>\n          <SDatatype>{currentEditingTopic.datatype}</SDatatype>\n          {hasFeatureColumn ? (\n            <div className=\"ant-component\">\n              <Tabs\n                activeKey={`${columnIndex}`}\n                onChange={(newKey) => {\n                  const newEditingTopicName =\n                    newKey === \"0\" ? nonPrefixedTopic : `${SECOND_SOURCE_PREFIX}${nonPrefixedTopic}`;\n                  setCurrentEditingTopic({ datatype, name: newEditingTopicName });\n                }}>\n                <Tabs.TabPane tab={\"base\"} key={\"0\"}>\n                  {editorElem}\n                </Tabs.TabPane>\n                <Tabs.TabPane tab={SECOND_SOURCE_PREFIX} key={\"1\"}>\n                  {editorElem}\n                </Tabs.TabPane>\n              </Tabs>\n            </div>\n          ) : (\n            editorElem\n          )}\n        </STopicSettingsEditor>\n      </Modal>\n    </RenderToBodyComponent>\n  );\n}\n\nexport default React.memo<Props>(TopicSettingsModal);\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport React from \"react\";\nexport default ((_ref) => {\n  let {\n    styles = {}\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"styles\"]);\n\n  return React.createElement(\n    \"svg\",\n    _extends({ width: \"167\", height: \"162\", viewBox: \"0 0 167 162\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props),\n    React.createElement(\"ellipse\", { cx: \"104.564\", cy: \"145.327\", rx: \"58.694\", ry: \"16.38\", fill: \"#242429\" }),\n    React.createElement(\"path\", { d: \"M16.2 5.82a4 4 0 0 1 4-4H36.25l6.398 8.046h49.452a6 6 0 0 1 6 6v5.064H16.2V5.82z\", fill: \"#36363D\" }),\n    React.createElement(\n      \"mask\",\n      { id: \"a\", fill: \"#fff\" },\n      React.createElement(\"path\", { d: \"M14.38 6a6 6 0 0 1 6-6h12.826a6 6 0 0 1 4.877 2.505l2.67 3.725a6 6 0 0 0 4.877 2.506H92.1a6 6 0 0 1 6 6v44.783a6 6 0 0 1-6 6H20.38a6 6 0 0 1-6-6V6z\" })\n    ),\n    React.createElement(\"path\", { d: \"M14.38 21.53H98.1v-2H14.38v2zM38.084 2.504L36.458 3.67l1.625-1.165zM92.1 63.52H20.381v4h71.718v-4zM20.381 2h12.825v-4H20.381v4zm16.077 1.67l2.669 3.725 3.251-2.33-2.669-3.724-3.251 2.33zm9.172 7.066H92.1v-4H45.63v4zM16.38 59.519v-38.99h-4v38.99h4zm0-38.99V6h-4v14.53h4zm79.72-5.793v5.793h3.999v-5.793h-4zm0 5.793v38.99h3.999v-38.99h-4zM39.126 7.395a8 8 0 0 0 6.503 3.34v-4a4 4 0 0 1-3.252-1.67l-3.251 2.33zM33.207 2a4 4 0 0 1 3.25 1.67l3.252-2.33A8 8 0 0 0 33.206-2v4zM20.38 63.519a4 4 0 0 1-4-4h-4a8 8 0 0 0 8 8v-4zm71.718 4a8 8 0 0 0 8-8h-4a4 4 0 0 1-4 4v4zm0-56.783a4 4 0 0 1 4 4h4a8 8 0 0 0-8-8v4zM20.381-2a8 8 0 0 0-8 8h4a4 4 0 0 1 4-4v-4z\", fill: \"#606066\", mask: \"url(#a)\" }),\n    React.createElement(\"circle\", { cx: \"98.649\", cy: \"77.989\", r: \"38.129\", fill: \"#19181C\", stroke: \"#606066\", strokeWidth: \"2\" }),\n    React.createElement(\"circle\", { cx: \"98.649\", cy: \"77.989\", r: \"29.939\", fill: \"#2D2D33\", stroke: \"#606066\", strokeWidth: \"2\" }),\n    React.createElement(\"rect\", { x: \"125.831\", y: \"113.941\", width: \"12.56\", height: \"43.173\", rx: \"6.28\", transform: \"rotate(-43.636 125.831 113.941)\", fill: \"#19181C\", stroke: \"#606066\", strokeWidth: \"2\" }),\n    React.createElement(\"path\", { d: \"M127.615 103.532l5.185 5.185M123.844 107.303l5.185 5.185\", stroke: \"#606066\", strokeWidth: \"2\" }),\n    React.createElement(\n      \"mask\",\n      { id: \"b\", fill: \"#fff\" },\n      React.createElement(\"path\", { d: \"M13.499 89.226a3 3 0 0 1 3.92-1.828l18.742 7.238 5.13 13.009-8.891 26.026a3 3 0 0 1-3.838 1.859l-24.761-8.74a3 3 0 0 1-1.84-3.799l11.538-33.765z\" })\n    ),\n    React.createElement(\"path\", { d: \"M32.704 104.276l-.941-.338-.328.914.904.355.365-.931zm2.516-9.978l-3.457 9.64 1.882.675 3.458-9.64-1.883-.675zm-2.881 10.909l8.586 3.369.73-1.862-8.586-3.369-.73 1.862zm8.951 2.438l1.893.647.238-.696-.27-.685-1.86.734zm-5.129-13.01l1.861-.733-.322-.816-.818-.316-.72 1.866zM3.801 126.79l-.666 1.886.666-1.886zm24.761 8.74l.666-1.886-.666 1.886zm3.838-1.859l-1.893-.647 1.893.647zm-3.172-.027l-24.761-8.74-1.332 3.772 24.762 8.74 1.33-3.772zM3.853 123.638l11.538-33.765-3.785-1.294L.068 122.345l3.785 1.293zm35.545-16.64l-8.89 26.026 3.784 1.293 8.89-26.025-3.784-1.294zm-22.7-17.735l18.743 7.239 1.44-3.732-18.742-7.238-1.441 3.731zM34.3 95.37l5.129 13.01 3.72-1.468-5.128-13.009-3.721 1.467zM4.467 124.904a1 1 0 0 1-.614-1.266l-3.785-1.293a5 5 0 0 0 3.067 6.331l1.332-3.772zm23.43 12.512a5 5 0 0 0 6.395-3.099l-3.785-1.293a1 1 0 0 1-1.28.62l-1.33 3.772zM15.39 89.873a1 1 0 0 1 1.307-.61l1.44-3.731a5 5 0 0 0-6.532 3.047l3.785 1.294z\", fill: \"#606066\", mask: \"url(#b)\" }),\n    React.createElement(\"path\", { d: \"M14.937 105l17.004 5.905M12.969 110.668l17.003 5.905M11 116.336l17.004 5.905\", stroke: \"#606066\", strokeWidth: \"2\", strokeLinecap: \"round\" })\n  );\n});","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { uniq } from \"lodash\";\nimport React, { type Node } from \"react\";\nimport styled from \"styled-components\";\n\nimport renderNamespaceNodes, { type NamespaceNode } from \"./renderNamespaceNodes\";\nimport TreeNodeRow from \"./TreeNodeRow\";\nimport type {\n  DerivedCustomSettingsByKey,\n  GetIsNamespaceCheckedByDefault,\n  GetIsTreeNodeVisibleInScene,\n  GetIsTreeNodeVisibleInTree,\n  NamespacesByTopic,\n  SceneErrorsByKey,\n  SetCurrentEditingTopic,\n  ToggleNamespaceChecked,\n  ToggleNode,\n  ToggleNodeByColumn,\n  TopicDisplayMode,\n  TreeNode,\n  TreeTopicNode,\n} from \"./types\";\nimport { generateNodeKey } from \"./useTopicTree\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport { TOPIC_DISPLAY_MODES } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicTree/TopicViewModeSelector\";\nimport { SECOND_SOURCE_PREFIX } from \"webviz-core/src/util/globalConstants\";\nimport naturalSort from \"webviz-core/src/util/naturalSort\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const SWITCHER_WIDTH = 24;\n\nexport const SToggles = styled.div`\n  display: flex;\n  align-items: center;\n`;\nexport const SToggle = styled.div`\n  width: 24px;\n  height: 24px;\n`;\n\nconst TooltipRow = styled.div`\n  margin: 4px 0;\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\nconst TooltipDescription = styled(TooltipRow)`\n  line-height: 1.3;\n  max-width: 300px;\n`;\n\nconst TooltipTable = styled.table`\n  th,\n  td {\n    border: none;\n    padding: 0;\n  }\n  td {\n    word-break: break-word;\n  }\n  max-width: 100%;\n  th {\n    color: ${colors.TEXT_MUTED};\n  }\n`;\n\ntype Props = {|\n  availableNamespacesByTopic: NamespacesByTopic,\n  checkedKeysSet: Set<string>,\n  children: TreeNode[],\n  derivedCustomSettingsByKey: DerivedCustomSettingsByKey,\n  filterText: string,\n  getIsNamespaceCheckedByDefault: GetIsNamespaceCheckedByDefault,\n  getIsTreeNodeVisibleInScene: GetIsTreeNodeVisibleInScene,\n  getIsTreeNodeVisibleInTree: GetIsTreeNodeVisibleInTree,\n  hasFeatureColumn: boolean,\n  isXSWidth: boolean,\n  sceneErrorsByKey: SceneErrorsByKey,\n  setCurrentEditingTopic: SetCurrentEditingTopic,\n  toggleCheckAllAncestors: ToggleNodeByColumn,\n  toggleCheckAllDescendants: ToggleNodeByColumn,\n  toggleNamespaceChecked: ToggleNamespaceChecked,\n  toggleNodeChecked: ToggleNodeByColumn,\n  toggleNodeExpanded: ToggleNode,\n  topicDisplayMode: TopicDisplayMode,\n  width: number,\n|};\n\nexport type TreeUINode = {| title: Node, key: string, children?: TreeUINode[], disabled?: boolean |};\n\nexport function getNamespaceNodes({\n  availableNamespacesByTopic,\n  checkedKeysSet,\n  getIsNamespaceCheckedByDefault,\n  getIsTreeNodeVisibleInScene,\n  hasFeatureColumn,\n  node,\n  showVisible,\n}: {|\n  availableNamespacesByTopic: NamespacesByTopic,\n  checkedKeysSet: Set<string>,\n  getIsNamespaceCheckedByDefault: GetIsNamespaceCheckedByDefault,\n  getIsTreeNodeVisibleInScene: GetIsTreeNodeVisibleInScene,\n  hasFeatureColumn: boolean,\n  node: TreeTopicNode,\n  showVisible: boolean,\n|}): NamespaceNode[] {\n  const topicName = node.topicName;\n  const baseNamespacesSet = new Set((topicName && availableNamespacesByTopic[topicName]) || []);\n  const featureNamespacesSet = new Set(\n    (topicName && hasFeatureColumn && availableNamespacesByTopic[`${SECOND_SOURCE_PREFIX}${topicName}`]) || []\n  );\n  const uniqueNamespaces = uniq([...Array.from(baseNamespacesSet), ...Array.from(featureNamespacesSet)]);\n  const columns = hasFeatureColumn ? [0, 1] : [0];\n  return filterMap(uniqueNamespaces, (namespace) => {\n    const namespaceKey = generateNodeKey({ topicName, namespace });\n    const featureKey = generateNodeKey({ topicName, namespace, isFeatureColumn: true });\n    const namespaceNode = {\n      key: namespaceKey,\n      featureKey,\n      namespace,\n      availableByColumn: columns.map((columnIdx) =>\n        columnIdx === 1 ? featureNamespacesSet.has(namespace) : baseNamespacesSet.has(namespace)\n      ),\n      checkedByColumn: columns.map(\n        (columnIdx) =>\n          checkedKeysSet.has(columnIdx === 1 ? featureKey : namespaceKey) ||\n          getIsNamespaceCheckedByDefault(topicName, columnIdx)\n      ),\n      visibleInSceneByColumn: columns.map((columnIdx) => getIsTreeNodeVisibleInScene(node, columnIdx, namespace)),\n    };\n\n    const visible = namespaceNode.visibleInSceneByColumn[0] || namespaceNode.visibleInSceneByColumn[1];\n    // Don't render namespaces that are not visible when the user selected to view Visible only.\n    if (node.providerAvailable && showVisible && !visible) {\n      return undefined;\n    }\n    return namespaceNode;\n  });\n}\n\n// A recursive function for generating tree nodes UI. Must use function instead of React component as the\n// return signature is different from React component.\nexport default function renderTreeNodes({\n  availableNamespacesByTopic,\n  checkedKeysSet,\n  children,\n  derivedCustomSettingsByKey,\n  filterText,\n  getIsNamespaceCheckedByDefault,\n  getIsTreeNodeVisibleInScene,\n  getIsTreeNodeVisibleInTree,\n  hasFeatureColumn,\n  isXSWidth,\n  sceneErrorsByKey,\n  setCurrentEditingTopic,\n  toggleCheckAllAncestors,\n  toggleCheckAllDescendants,\n  toggleNamespaceChecked,\n  toggleNodeChecked,\n  toggleNodeExpanded,\n  topicDisplayMode,\n  width,\n}: Props): TreeUINode[] {\n  const titleWidth = width - SWITCHER_WIDTH;\n  return children\n    .filter(({ key }) => getIsTreeNodeVisibleInTree(key))\n    .map((item) => {\n      const { key, providerAvailable } = item;\n      const visibleByColumn = hasFeatureColumn\n        ? [getIsTreeNodeVisibleInScene(item, 0), getIsTreeNodeVisibleInScene(item, 1)]\n        : [getIsTreeNodeVisibleInScene(item, 0)];\n\n      const nodeVisibleInScene = !!(visibleByColumn[0] || visibleByColumn[1]);\n      const nodeAvailable = item.availableByColumn[0] || item.availableByColumn[1];\n\n      const showVisible = topicDisplayMode === TOPIC_DISPLAY_MODES.SHOW_SELECTED.value;\n      const showAvailable = topicDisplayMode === TOPIC_DISPLAY_MODES.SHOW_AVAILABLE.value;\n\n      // Render all nodes regardless of the displayMode when datasources are unavailable.\n      if (providerAvailable && ((showVisible && !nodeVisibleInScene) || (showAvailable && !nodeAvailable))) {\n        return null;\n      }\n\n      const itemChildren = item.type === \"group\" ? item.children : [];\n      const topicName = item.type === \"topic\" ? item.topicName : \"\";\n\n      const namespaceNodes =\n        item.type === \"topic\"\n          ? getNamespaceNodes({\n              availableNamespacesByTopic,\n              checkedKeysSet,\n              getIsNamespaceCheckedByDefault,\n              getIsTreeNodeVisibleInScene,\n              hasFeatureColumn,\n              node: item,\n              showVisible,\n            })\n          : [];\n\n      const tooltips = [];\n      if (topicName) {\n        tooltips.push(\n          <TooltipRow key={tooltips.length}>\n            <TooltipTable>\n              <tbody>\n                <tr>\n                  <th>Topic:</th>\n                  <td>\n                    <tt>{topicName}</tt>\n                  </td>\n                </tr>\n                {item.type === \"topic\" && item.datatype && (\n                  <tr>\n                    <th>Type:</th>\n                    <td>\n                      <tt>{item.datatype}</tt>\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </TooltipTable>\n          </TooltipRow>\n        );\n      }\n      if (item.description) {\n        tooltips.push(<TooltipDescription key={tooltips.length}>{item.description}</TooltipDescription>);\n      }\n\n      const title = (\n        <TreeNodeRow\n          checkedKeysSet={checkedKeysSet}\n          derivedCustomSettings={derivedCustomSettingsByKey[key]}\n          filterText={filterText}\n          hasChildren={itemChildren.length > 0 || namespaceNodes.length > 0}\n          hasFeatureColumn={hasFeatureColumn}\n          isXSWidth={isXSWidth}\n          node={item}\n          nodeVisibleInScene={nodeVisibleInScene}\n          sceneErrors={sceneErrorsByKey[item.key]}\n          setCurrentEditingTopic={setCurrentEditingTopic}\n          toggleCheckAllAncestors={toggleCheckAllAncestors}\n          toggleCheckAllDescendants={toggleCheckAllDescendants}\n          toggleNodeChecked={toggleNodeChecked}\n          toggleNodeExpanded={toggleNodeExpanded}\n          visibleByColumn={visibleByColumn}\n          width={titleWidth}\n          {...(tooltips.length ? { tooltips } : undefined)}\n        />\n      );\n\n      const childrenNodes = [];\n      if (item.type === \"topic\" && namespaceNodes.length > 0) {\n        childrenNodes.push(\n          ...renderNamespaceNodes({\n            children: namespaceNodes.sort(naturalSort(\"namespace\")),\n            getIsTreeNodeVisibleInScene,\n            getIsTreeNodeVisibleInTree,\n            hasFeatureColumn,\n            isXSWidth,\n            toggleCheckAllAncestors,\n            toggleNamespaceChecked,\n            topicNode: item,\n            width: titleWidth,\n            overrideColorByColumn:\n              (derivedCustomSettingsByKey[key] && derivedCustomSettingsByKey[key].overrideColorByColumn) || [],\n            filterText,\n          })\n        );\n      }\n      if (itemChildren) {\n        childrenNodes.push(\n          ...renderTreeNodes({\n            availableNamespacesByTopic,\n            checkedKeysSet,\n            children: itemChildren,\n            getIsTreeNodeVisibleInScene,\n            getIsTreeNodeVisibleInTree,\n            getIsNamespaceCheckedByDefault,\n            hasFeatureColumn,\n            isXSWidth,\n            toggleCheckAllAncestors,\n            toggleCheckAllDescendants,\n            toggleNamespaceChecked,\n            toggleNodeChecked,\n            toggleNodeExpanded,\n            topicDisplayMode,\n            sceneErrorsByKey,\n            setCurrentEditingTopic,\n            derivedCustomSettingsByKey,\n            width: titleWidth,\n            filterText,\n          })\n        );\n      }\n      return {\n        key,\n        title,\n        ...(childrenNodes.length ? { children: childrenNodes } : undefined),\n        // Add `disabled` so that the switcher has the correct color.\n        disabled: !nodeVisibleInScene,\n      };\n    })\n    .filter(Boolean);\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\n\nimport NodeName from \"./NodeName\";\nimport { type TreeUINode } from \"./renderTreeNodes\";\nimport { TREE_SPACING } from \"./TopicTree\";\nimport { SToggles, STreeNodeRow, SLeft, SRightActions, ICON_SIZE, SDotMenuPlaceholder } from \"./TreeNodeRow\";\nimport type {\n  ToggleNodeByColumn,\n  TreeTopicNode,\n  GetIsTreeNodeVisibleInScene,\n  GetIsTreeNodeVisibleInTree,\n  ToggleNamespaceChecked,\n} from \"./types\";\nimport VisibilityToggle, { TOGGLE_WRAPPER_SIZE } from \"./VisibilityToggle\";\n\nconst OUTER_LEFT_MARGIN = 12;\nconst INNER_LEFT_MARGIN = 8;\n\nexport type NamespaceNode = {|\n  availableByColumn: boolean[],\n  checkedByColumn: boolean[],\n  key: string,\n  featureKey: string,\n  namespace: string,\n  visibleInSceneByColumn: boolean[],\n|};\n\ntype Props = {|\n  children: NamespaceNode[],\n  getIsTreeNodeVisibleInScene: GetIsTreeNodeVisibleInScene,\n  getIsTreeNodeVisibleInTree: GetIsTreeNodeVisibleInTree,\n  hasFeatureColumn: boolean,\n  isXSWidth: boolean,\n  overrideColorByColumn: (?string)[],\n  toggleCheckAllAncestors: ToggleNodeByColumn,\n  toggleNamespaceChecked: ToggleNamespaceChecked,\n  topicNode: TreeTopicNode,\n  width: number,\n  filterText: string,\n|};\n\n// Must use function instead of React component as Tree/TreeNode can only accept TreeNode as children.\nexport default function renderNamespaceNodes({\n  children,\n  getIsTreeNodeVisibleInScene,\n  getIsTreeNodeVisibleInTree,\n  hasFeatureColumn,\n  isXSWidth,\n  overrideColorByColumn,\n  toggleCheckAllAncestors,\n  toggleNamespaceChecked,\n  topicNode,\n  width,\n  filterText,\n}: Props): TreeUINode[] {\n  return children\n    .filter(({ key }) => getIsTreeNodeVisibleInTree(key))\n    .map(({ key, namespace, checkedByColumn, availableByColumn, visibleInSceneByColumn }) => {\n      const nodeVisibleInScene = !!(visibleInSceneByColumn[0] || visibleInSceneByColumn[1]);\n      const rowWidth = width - (isXSWidth ? 0 : TREE_SPACING * 2) - OUTER_LEFT_MARGIN;\n      const topicNodeAvailable = topicNode.availableByColumn[0] || topicNode.availableByColumn[1];\n      const togglesWidth = hasFeatureColumn ? TOGGLE_WRAPPER_SIZE * 2 : TOGGLE_WRAPPER_SIZE;\n      const rightActionWidth = topicNodeAvailable ? togglesWidth + ICON_SIZE : ICON_SIZE;\n      const maxNodeNameLen = rowWidth - rightActionWidth - INNER_LEFT_MARGIN * 2;\n\n      // TODO(Audrey): remove the special tooltip once we add 2nd bag support for map and tf namespaces.\n      const unavailableTooltip =\n        topicNode.topicName === \"/tf\" || topicNode.topicName === \"/metadata\" ? \"Unsupported\" : \"Unavailable\";\n\n      const title = (\n        <STreeNodeRow\n          visibleInScene={nodeVisibleInScene}\n          style={{\n            width: rowWidth,\n            marginLeft: `-${OUTER_LEFT_MARGIN}px`,\n          }}>\n          <SLeft>\n            <NodeName\n              isXSWidth={isXSWidth}\n              maxWidth={maxNodeNameLen}\n              displayName={namespace}\n              topicName={\"\"}\n              searchText={filterText}\n            />\n          </SLeft>\n          <SRightActions>\n            {topicNodeAvailable && (\n              <SToggles>\n                {availableByColumn.map((available, columnIndex) => (\n                  <VisibilityToggle\n                    available={available}\n                    key={columnIndex}\n                    dataTest={`visibility-toggle~${key}~column${columnIndex}`}\n                    checked={checkedByColumn[columnIndex]}\n                    onAltToggle={() => toggleCheckAllAncestors(key, columnIndex, topicNode.topicName)}\n                    onToggle={() => toggleNamespaceChecked({ topicName: topicNode.topicName, namespace, columnIndex })}\n                    overrideColor={overrideColorByColumn[columnIndex]}\n                    unavailableTooltip={unavailableTooltip}\n                    visibleInScene={!!visibleInSceneByColumn[columnIndex]}\n                  />\n                ))}\n              </SToggles>\n            )}\n            <SDotMenuPlaceholder />\n          </SRightActions>\n        </STreeNodeRow>\n      );\n      return { key, title };\n    });\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React from \"react\";\nimport Highlighter from \"react-highlight-words\";\nimport styled from \"styled-components\";\n\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nconst HIGHLIGHT_CLASSNAME = \"rc-TextHighlight-highlight\";\nconst STextHighlight = styled.span`\n  .${HIGHLIGHT_CLASSNAME} {\n    color: ${colors.BLUE};\n    background: none;\n    padding: 0;\n  }\n`;\n\ntype Props = {|\n  targetStr: string,\n  searchText?: string,\n|};\n\nexport default function TextHighlight({ targetStr = \"\", searchText = \"\" }: Props) {\n  if (!searchText) {\n    return targetStr;\n  }\n\n  return (\n    <STextHighlight>\n      <Highlighter\n        autoEscape\n        highlightClassName={HIGHLIGHT_CLASSNAME}\n        searchWords={[searchText]}\n        textToHighlight={targetStr}\n      />\n    </STextHighlight>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\n\nexport const DEFAULT_END_TEXT_LENGTH = 16;\n\nexport const STextMiddleTruncate = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n`;\n\nconst SStart = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  flex-shrink: 1;\n`;\n\nconst SEnd = styled.div`\n  white-space: nowrap;\n  flex-basis: content;\n  flex-grow: 0;\n  flex-shrink: 0;\n  max-width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\ntype Props = {|\n  tooltips?: React.Node[],\n  text: string,\n  endTextLength?: number,\n  style?: { [attr: string]: string | number },\n  testShowTooltip?: boolean,\n|};\n\nexport default function TextMiddleTruncate({ tooltips, text, endTextLength, style, testShowTooltip }: Props) {\n  const startTextLen = Math.max(0, text.length - (endTextLength || DEFAULT_END_TEXT_LENGTH));\n  const startText = text.substr(0, startTextLen);\n  const endText = text.substr(startTextLen);\n\n  const elem = (\n    <STextMiddleTruncate style={style}>\n      <SStart>{startText}</SStart>\n      <SEnd>{endText}</SEnd>\n    </STextMiddleTruncate>\n  );\n  return tooltips ? (\n    <Tooltip contents={tooltips} placement=\"bottom\" defaultShown={testShowTooltip}>\n      {elem}\n    </Tooltip>\n  ) : (\n    elem\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport LayersIcon from \"@mdi/svg/svg/layers.svg\";\nimport PinIcon from \"@mdi/svg/svg/pin.svg\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport { type Save3DConfig } from \"../index\";\nimport Icon from \"webviz-core/src/components/Icon\";\nimport KeyboardShortcut from \"webviz-core/src/components/KeyboardShortcut\";\nimport Tooltip from \"webviz-core/src/components/Tooltip\";\nimport { colors } from \"webviz-core/src/util/sharedStyleConstants\";\n\nexport const SWITCHER_HEIGHT = 28;\nconst STopicTreeSwitcher = styled.div`\n  width: 56px;\n  display: flex;\n  height: ${SWITCHER_HEIGHT}px;\n  position: relative;\n`;\n\nconst SErrorsBadge = styled.div`\n  position: absolute;\n  top: -4px;\n  left: 24px;\n  width: 10px;\n  height: 10px;\n  border-radius: 5px;\n  background-color: ${colors.RED};\n`;\n\n/* TODO(Audrey): stay consistent with other buttons in the 3D panel, will consolidate later. */\nconst SIconWrapper = styled.div`\n  width: 28px;\n  border-radius: 4px;\n  padding: 4px;\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\ntype Props = {|\n  pinTopics: boolean,\n  renderTopicTree: boolean,\n  saveConfig: Save3DConfig,\n  setShowTopicTree: (boolean) => void,\n  showErrorBadge: boolean,\n  showTopicTree: boolean,\n|};\n\nexport default function TopicTreeSwitcher({\n  pinTopics,\n  renderTopicTree,\n  saveConfig,\n  setShowTopicTree,\n  showErrorBadge,\n  showTopicTree,\n}: Props) {\n  return (\n    <STopicTreeSwitcher>\n      <SIconWrapper\n        style={{\n          backgroundColor: renderTopicTree ? \"transparent\" : \"#2d2c33\",\n          opacity: renderTopicTree ? \"0\" : \"1\",\n          transition: `all 0.1s ease-out`,\n        }}>\n        <Icon\n          tooltipProps={{ placement: \"top\", contents: <KeyboardShortcut keys={[\"T\"]} /> }}\n          dataTest=\"open-topic-picker\"\n          active={renderTopicTree}\n          fade\n          medium\n          onClick={() => setShowTopicTree(!showTopicTree)}>\n          <LayersIcon />\n        </Icon>\n      </SIconWrapper>\n      <SIconWrapper\n        style={{\n          transform: `translate(0px,${renderTopicTree ? 0 : 28}px)`,\n          opacity: renderTopicTree ? \"1\" : \"0\",\n          transition: `all 0.3s ease-in-out`,\n          pointerEvents: renderTopicTree ? \"unset\" : \"none\",\n        }}>\n        <Icon\n          tooltipProps={{ placement: \"top\", contents: \"Pin topic picker\" }}\n          small\n          fade\n          active={pinTopics}\n          onClick={() => {\n            // Keep TopicTree open after unpin.\n            setShowTopicTree(true);\n            saveConfig({ pinTopics: !pinTopics }, { keepLayoutInUrl: true });\n          }}\n          style={{ color: pinTopics ? colors.HIGHLIGHT : colors.LIGHT }}>\n          <PinIcon />\n        </Icon>\n      </SIconWrapper>\n      {showErrorBadge && (\n        <Tooltip contents=\"Errors found in selected topics/namespaces\" placement=\"top\">\n          <SErrorsBadge />\n        </Tooltip>\n      )}\n    </STopicTreeSwitcher>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { mapKeys, difference } from \"lodash\";\nimport { useMemo, useRef } from \"react\";\n\nimport type { UseSceneBuilderAndTransformsDataInput, UseSceneBuilderAndTransformsDataOutput } from \"./types\";\nimport { generateNodeKey } from \"./useTopicTree\";\nimport useDataSourceInfo from \"webviz-core/src/PanelAPI/useDataSourceInfo\";\nimport { useChangeDetector, useDeepMemo } from \"webviz-core/src/util/hooks\";\n\n// Derived namespace and error information for TopicTree from sceneBuilder and transforms.\nexport default function useSceneBuilderAndTransformsData({\n  sceneBuilder,\n  transforms,\n  staticallyAvailableNamespacesByTopic,\n}: UseSceneBuilderAndTransformsDataInput): UseSceneBuilderAndTransformsDataOutput {\n  const { playerId } = useDataSourceInfo();\n  const hasChangedPlayerId = useChangeDetector([playerId], false);\n\n  const newAvailableTfs = transforms\n    .values()\n    .map(({ id }) => id)\n    .filter(Boolean);\n  const availableTfsRef = useRef<string[]>(newAvailableTfs);\n  if (hasChangedPlayerId) {\n    // If we have changed the playerId - meaning that we've added or removed a source - recalculate the available TFs\n    // from scratch.\n    availableTfsRef.current = newAvailableTfs;\n  } else {\n    const tfsNotYetAdded = difference(newAvailableTfs, availableTfsRef.current);\n    // Only add TFs, never remove them. If we've seen them once in the bag, they may re-appear.\n    // NOTE: changing this to instead show the exact TFs available at this point in time is NOT advisable. There is a\n    // subtle bug that will lead to the topic tree \"jumping\" in position as TFs are quickly removed and then re-added\n    // whenever a topic is added.\n    if (tfsNotYetAdded.length) {\n      availableTfsRef.current = [...availableTfsRef.current, ...tfsNotYetAdded];\n    }\n  }\n  const availableTfs = availableTfsRef.current;\n\n  const availableNamespacesByTopic = useMemo(\n    () => {\n      const result = { ...staticallyAvailableNamespacesByTopic };\n      for (const { name, topic } of sceneBuilder.allNamespaces) {\n        result[topic] = result[topic] || [];\n        result[topic].push(name);\n      }\n      if (availableTfs.length) {\n        result[\"/tf\"] = availableTfs;\n      }\n      return result;\n    },\n    [availableTfs, sceneBuilder.allNamespaces, staticallyAvailableNamespacesByTopic]\n  );\n\n  const sceneErrorsByKey = useMemo(\n    () => mapKeys(sceneBuilder.errorsByTopic, (value, topicName) => generateNodeKey({ topicName })),\n    [sceneBuilder.errorsByTopic]\n  );\n\n  const sceneErrorsByKeyMemo = useDeepMemo(sceneErrorsByKey);\n\n  return { availableNamespacesByTopic, sceneErrorsByKey: sceneErrorsByKeyMemo };\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { mat4, quat, vec3 } from \"gl-matrix\";\nimport type { Vec3 } from \"gl-matrix\";\n\nimport Transforms, { Transform } from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport type { Marker, ArrowMarker, Color, MutablePose } from \"webviz-core/src/types/Messages\";\nimport type { MarkerProvider, MarkerCollector } from \"webviz-core/src/types/Scene\";\nimport { MARKER_MSG_TYPES } from \"webviz-core/src/util/globalConstants\";\n\nconst originPosition = { x: 0, y: 0, z: 0 };\nconst originOrientation = { x: 0, y: 0, z: 0, w: 1 };\n\nconst defaultArrowMarker = {\n  id: \"\",\n  header: {\n    frame_id: \"\",\n    stamp: {\n      sec: 0,\n      nsec: 0,\n    },\n  },\n  ns: \"tf-axes\",\n  type: 0,\n  action: 0,\n};\n\nconst defaultArrowScale = { x: 0.2, y: 0.02, z: 0.02 };\n\nconst getOriginPose = (): MutablePose => ({\n  position: { ...originPosition },\n  orientation: { ...originOrientation },\n});\n\nconst unitXVector = vec3.fromValues(1, 0, 0);\n\ntype Axis = ArrowMarker & {\n  id: string,\n  color: Color,\n  unitVector: Vec3,\n};\n\nconst originAxes: Array<Axis> = [\n  {\n    ...defaultArrowMarker,\n    scale: { ...defaultArrowScale },\n    pose: {\n      position: { ...originPosition },\n      orientation: { ...originOrientation },\n    },\n    id: \"X\",\n    color: { r: 1, g: 0, b: 0, a: 1 },\n    unitVector: vec3.fromValues(1, 0, 0),\n  },\n  {\n    ...defaultArrowMarker,\n    scale: { ...defaultArrowScale },\n    pose: {\n      position: { ...originPosition },\n      orientation: { ...originOrientation },\n    },\n    id: \"Y\",\n    color: { r: 0, g: 1, b: 0, a: 1 },\n    unitVector: vec3.fromValues(0, 1, 0),\n  },\n  {\n    ...defaultArrowMarker,\n    scale: { ...defaultArrowScale },\n    pose: {\n      position: { ...originPosition },\n      orientation: { ...originOrientation },\n    },\n    id: \"Z\",\n    color: { r: 0, g: 0, b: 1, a: 1 },\n    unitVector: vec3.fromValues(0, 0, 1),\n  },\n];\n\nconst tempOrientation = [0, 0, 0, 0];\n\nconst getTransformedAxisArrowMarker = (id: string, transform: Transform, axis: Axis, rootTransformID: string) => {\n  const { unitVector, id: axisId } = axis;\n  quat.rotationTo(tempOrientation, unitXVector, unitVector);\n  const pose = {\n    position: { ...originPosition },\n    orientation: { x: tempOrientation[0], y: tempOrientation[1], z: tempOrientation[2], w: tempOrientation[3] },\n  };\n\n  transform.apply(pose, pose, rootTransformID);\n\n  return {\n    ...axis,\n    id: `${id}-${axisId}axis`,\n    name: `${id}-${axisId}axis`,\n    pose,\n  };\n};\n\nconst getAxesArrowMarkers = (id: string, transform: Transform, rootTransformID: string): ArrowMarker[] => {\n  return originAxes.map((axis) => getTransformedAxisArrowMarker(id, transform, axis, rootTransformID));\n};\n\nconst getAxisTextMarker = (id: string, transform: Transform, rootTransformID: string): Marker => {\n  const textPose = getOriginPose();\n  transform.apply(textPose, textPose, rootTransformID);\n  // Lower it a little in world coordinates so it appears slightly below the axis origin (like in rviz).\n  textPose.position.z = textPose.position.z - 0.02;\n  return {\n    header: {\n      frame_id: \"\",\n      stamp: {\n        sec: 0,\n        nsec: 0,\n      },\n    },\n    ns: \"tf-axes\",\n    action: 0,\n    scale: { x: 1, y: 1, z: 1 },\n    color: { r: 1, g: 1, b: 1, a: 1 },\n    id: `${id}-name`,\n    name: `${id}-name`,\n    pose: textPose,\n    type: MARKER_MSG_TYPES.TEXT_VIEW_FACING,\n    text: id,\n  };\n};\n\nconst tempTranslation = [0, 0, 0];\n// So we don't create a lot of effectively unused vectors / quats.\nconst throwawayQuat = { ...originOrientation };\n\nconst getArrowToParentMarkers = (id: string, transform: Transform, rootTransformID: string): ArrowMarker[] => {\n  const { parent } = transform;\n  if (!parent || !parent.valid) {\n    return [];\n  }\n\n  mat4.getTranslation(tempTranslation, transform.matrix);\n  if (vec3.length(tempTranslation) <= 0) {\n    // If the parent's position is on the child, we don't need to draw an arrow between them.\n    return [];\n  }\n\n  const childPose: MutablePose = { position: { ...originPosition }, orientation: throwawayQuat };\n  transform.apply(childPose, childPose, rootTransformID);\n\n  const parentPose = { position: { ...originPosition }, orientation: throwawayQuat };\n  parent.apply(parentPose, parentPose, rootTransformID);\n\n  return [\n    {\n      ...defaultArrowMarker,\n      pose: {\n        position: { ...originPosition },\n        orientation: { ...originOrientation },\n      },\n      id: `${id}-childToParentArrow`,\n      color: { r: 1, g: 1, b: 0, a: 1 },\n      points: [childPose.position, parentPose.position],\n      scale: {\n        // Intentionally different scale from the other arrows, to make the arrow head reasonable.\n        x: 0.02,\n        y: 0.01,\n        z: 0.05,\n      },\n    },\n  ];\n};\n\nexport default class TransformsBuilder implements MarkerProvider {\n  transforms: Transforms;\n  rootTransformID: string;\n  selections: string[] = [];\n\n  setTransforms = (transforms: Transforms, rootTransformID: string) => {\n    this.transforms = transforms;\n    this.rootTransformID = rootTransformID;\n  };\n\n  addMarkersForTransform(add: MarkerCollector, id: string, transform: Transform, rootTransformID: string) {\n    if (!transform.isChildOfTransform(rootTransformID)) {\n      return;\n    }\n    const markersForTransform: Marker[] = [\n      ...getAxesArrowMarkers(id, transform, rootTransformID),\n      ...getArrowToParentMarkers(id, transform, rootTransformID),\n      getAxisTextMarker(id, transform, rootTransformID),\n    ];\n    for (const marker of markersForTransform) {\n      switch (marker.type) {\n        case 0:\n          add.arrow(marker);\n          break;\n        case 9:\n          add.text(marker);\n          break;\n        default:\n          console.warn(\"Marker for transform not supported\", marker);\n      }\n    }\n  }\n\n  setSelectedTransforms(selections: string[]) {\n    this.selections = selections;\n  }\n\n  renderMarkers = (add: MarkerCollector) => {\n    const { selections, transforms } = this;\n    if (!transforms) {\n      return;\n    }\n    for (const key of selections) {\n      const transform = this.transforms.get(key);\n      if (!transform.valid) {\n        // If a marker doesn't exist yet, skip rendering for now, we might get the\n        // transform in a later message, so we still want to keep it in selections.\n        continue;\n      }\n      this.addMarkersForTransform(add, key, transform, this.rootTransformID);\n    }\n  };\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { useMemo, type Node } from \"react\";\nimport {\n  Worldview,\n  Arrows,\n  Cubes,\n  Cylinders,\n  GLText,\n  Lines,\n  Points,\n  Spheres,\n  Triangles,\n  FilledPolygons,\n  type CameraState,\n  type MouseHandler,\n  createInstancedGetChildrenForHitmap,\n} from \"regl-worldview\";\n\nimport { groupLinesIntoInstancedLineLists } from \"./utils/groupingUtils\";\nimport { useExperimentalFeature } from \"webviz-core/src/components/ExperimentalFeatures\";\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport {\n  OccupancyGrids,\n  LaserScans,\n  PointClouds,\n  GPUPointClouds,\n  PoseMarkers,\n  LinedConvexHulls,\n} from \"webviz-core/src/panels/ThreeDimensionalViz/commands\";\nimport { type WorldSearchTextProps, useGLText } from \"webviz-core/src/panels/ThreeDimensionalViz/SearchText\";\nimport inScreenshotTests from \"webviz-core/src/stories/inScreenshotTests\";\nimport type { TextMarker } from \"webviz-core/src/types/Messages\";\nimport type { MarkerCollector, MarkerProvider } from \"webviz-core/src/types/Scene\";\n\ntype Props = {|\n  autoTextBackgroundColor: boolean,\n  cameraState: CameraState,\n  children?: Node,\n  isPlaying: boolean,\n  markerProviders: MarkerProvider[],\n  onCameraStateChange: (CameraState) => void,\n  onClick: MouseHandler,\n  onDoubleClick: MouseHandler,\n  onMouseDown?: MouseHandler,\n  onMouseMove?: MouseHandler,\n  onMouseUp?: MouseHandler,\n  ...WorldSearchTextProps,\n|};\n\nfunction getMarkers(markerProviders: MarkerProvider[]) {\n  const markers = {};\n  const collector = {};\n  getGlobalHooks()\n    .perPanelHooks()\n    .ThreeDimensionalViz.allSupportedMarkers.forEach((field) => {\n      if (!markers[field]) {\n        markers[field] = [];\n      }\n      collector[field] = (o) => markers[field].push(o);\n    });\n\n  markerProviders.forEach((provider) => {\n    if (provider) {\n      provider.renderMarkers(((collector: any): MarkerCollector));\n    }\n  });\n\n  return markers;\n}\n\n// Generate an alphabet for text makers with the most\n// used ASCII characters to prevent recreating the texture\n// atlas too many times for dynamic texts.\nconst ALPHABET = (() => {\n  const start = 32; // SPACE\n  const end = 125; // \"}\"\n  return new Array(end - start + 1).fill().map((_, i) => String.fromCodePoint(start + i));\n})();\n\nexport default function World({\n  onClick,\n  autoTextBackgroundColor,\n  children,\n  onCameraStateChange,\n  cameraState,\n  cameraState: { perspective },\n  isPlaying,\n  markerProviders,\n  onDoubleClick,\n  onMouseDown,\n  onMouseMove,\n  onMouseUp,\n  setSearchTextMatches,\n  searchText,\n  searchTextOpen,\n  selectedMatchIndex,\n  searchTextMatches,\n}: Props) {\n  const getChildrenForHitmap = useMemo(() => createInstancedGetChildrenForHitmap(2), []);\n  const {\n    arrow,\n    cube,\n    cubeList,\n    cylinder,\n    filledPolygon,\n    grid,\n    instancedLineList,\n    laserScan,\n    linedConvexHull,\n    lineList,\n    lineStrip,\n    pointcloud,\n    points,\n    poseMarker,\n    sphere,\n    sphereList,\n    text,\n    triangleList,\n    ...rest\n  } = getMarkers(markerProviders);\n  const additionalMarkers = getGlobalHooks()\n    .perPanelHooks()\n    .ThreeDimensionalViz.renderAdditionalMarkers(rest);\n\n  const textMarkers = useGLText({\n    text: (text: TextMarker[]),\n    setSearchTextMatches,\n    searchText,\n    searchTextOpen,\n    selectedMatchIndex,\n    searchTextMatches,\n  });\n\n  const gpuPointCloudsEnabled = useExperimentalFeature(\"gpuPointCloud\");\n  const PointCloudsComponent = gpuPointCloudsEnabled ? GPUPointClouds : PointClouds;\n\n  // If 'groupLines' is enabled, we group all line strips and line lists\n  // into as few markers as possible. Otherwise, just render them as is.\n  const groupLines = useExperimentalFeature(\"groupLines\");\n  let groupedLines = [];\n  let nonGroupedLines = [...lineList, ...lineStrip];\n  if (groupLines) {\n    groupedLines = groupLinesIntoInstancedLineLists(nonGroupedLines);\n    nonGroupedLines = [];\n  }\n\n  return (\n    <Worldview\n      cameraState={cameraState}\n      enableStackedObjectEvents={!isPlaying}\n      hideDebug={inScreenshotTests()}\n      onCameraStateChange={onCameraStateChange}\n      // Rendering the hitmap is an expensive operation and we want to avoid\n      // doing it when the user is dragging the view with the mouse. By ignoring\n      // these events, the only way to select an object is when receiving an \"onClick\" event.\n      disableHitmapForEvents={[\"onMouseDown\", \"onMouseMove\", \"onMouseUp\"]}\n      onClick={onClick}\n      onDoubleClick={onDoubleClick}\n      onMouseDown={onMouseDown}\n      onMouseMove={onMouseMove}\n      onMouseUp={onMouseUp}>\n      {children}\n      <OccupancyGrids layerIndex={-1}>{grid}</OccupancyGrids>\n      {additionalMarkers}\n      <Lines>{nonGroupedLines}</Lines>\n      <Arrows>{arrow}</Arrows>\n      <Points>{points}</Points>\n      <PointCloudsComponent>{pointcloud}</PointCloudsComponent>\n      <Triangles>{triangleList}</Triangles>\n      <Spheres>{[...sphere, ...sphereList]}</Spheres>\n      <Cylinders>{cylinder}</Cylinders>\n      <Cubes>{[...cube, ...cubeList]}</Cubes>\n      <PoseMarkers>{poseMarker}</PoseMarkers>\n      <LaserScans>{laserScan}</LaserScans>\n      <GLText\n        layerIndex={10}\n        alphabet={ALPHABET}\n        scaleInvariantFontSize={14}\n        autoBackgroundColor={autoTextBackgroundColor}>\n        {textMarkers}\n      </GLText>\n      <FilledPolygons>{filledPolygon}</FilledPolygons>\n      <Lines getChildrenForHitmap={getChildrenForHitmap}>{[...instancedLineList, ...groupedLines]}</Lines>\n      <LinedConvexHulls>{linedConvexHull}</LinedConvexHulls>\n    </Worldview>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { groupBy, toPairs } from \"lodash\";\n\nimport type { InstancedLineListMarker, LineListMarker, LineStripMarker } from \"webviz-core/src/types/Messages\";\nimport { COLORS, MARKER_MSG_TYPES } from \"webviz-core/src/util/globalConstants\";\nimport { emptyPose } from \"webviz-core/src/util/Pose\";\n\n// Group multiple line strip and line list markers into as few as possible.\n// This reduces the amount of draw calls required to render line them and increases performance.\n// For improved performance, make sure inputs are either line strips or lists. Other\n// marker types will be not be grouped together and will be returned as is.\nexport function groupLinesIntoInstancedLineLists(\n  markers: (LineListMarker | LineStripMarker)[]\n): InstancedLineListMarker[] {\n  const resultMarkers = [];\n\n  // Group instances by type, namespace and scale - scale because we can't set it on each instance, and namespace\n  // because it's what's determines marker groupings that can be turned on/off in the topic selector.\n  const groups = groupBy(\n    markers,\n    ({ scale, ns, type }) => `ns:${ns}_type:${type}_scalex:${scale.x}_scaley:${scale.y}_scalez:${scale.z}`\n  );\n\n  for (const [id: string, messageList: any[]] of toPairs(groups)) {\n    const baseMessage = messageList[0];\n    const colors = [];\n    const allPoints = [];\n    const metadataByIndex = [];\n    const poses = [];\n    for (const message of messageList) {\n      const { points } = message;\n      let lineListPoints = [];\n      if (baseMessage.type === MARKER_MSG_TYPES.LINE_STRIP) {\n        // Line strips have points of the form [p1, p2, p3] and create lines between each point.\n        // We want to turn these into line lists, of the form [p1, p2, p2, p3], so that each consecutive pair of\n        // points creates a line.\n        // We can't make an instanced line strip because then we'd have no way to tell where one instance stopped and\n        // the next one started - we'd have lines leading from one instance to the next.\n        lineListPoints = pair(points, !!message.closed);\n      } else {\n        // If the marker is already a line list, just add the points to the list, validating that points\n        // are paired correctly.\n        lineListPoints = validateLineList(points);\n      }\n      extend(allPoints, lineListPoints);\n      fillExtend(colors, message.color || COLORS.WHITE, lineListPoints.length);\n      // We have two points per instance.\n      // Save the whole marker as the instanced object so we can display it\n      // to the user after selection.\n      fillExtend(metadataByIndex, message, lineListPoints.length / 2);\n      fillExtend(poses, message.pose, lineListPoints.length / 2);\n    }\n\n    // Extract common properties from base marker\n    const { header, action, ns, scale } = baseMessage;\n    resultMarkers.push(\n      ({\n        header,\n        action,\n        ns,\n        scale,\n        pose: emptyPose(),\n        colors,\n        points: allPoints,\n        poses,\n        metadataByIndex,\n        id,\n        type: MARKER_MSG_TYPES.INSTANCED_LINE_LIST,\n        primitive: \"lines\",\n      }: InstancedLineListMarker)\n    );\n  }\n\n  return resultMarkers;\n}\n\nfunction extend<T>(arr1: T[], arr2: T[]) {\n  arr2.forEach((v) => arr1.push(v));\n}\n\n// fillExtend and extend are a bit faster than alternatives that use filling or spreading to\n// achieve the same purpose, and groupPredictionMarkersIntoInstancedMarkers is a fairly heavy\n// function.\nfunction fillExtend<T>(arr: T[], value: T, n: number): void {\n  for (let i = 0; i < n; ++i) {\n    arr.push(value);\n  }\n}\n\n// Takes an array, and returns a new array with each group of two paired.\n// shouldClose: should pair the last and first indices.\n// arr: [1], shouldClose: false => []\n// arr: [1, 2, 3], shouldClose: false => [1, 2, 2, 3]\n// arr: [1, 2, 3], shouldClose: true  => [1, 2, 2, 3, 3, 1]\nfunction pair<T>(arr: T[], shouldClose: ?boolean): T[] {\n  if (arr.length < 2) {\n    return [];\n  }\n  const result = [];\n  // If we are closing this pair, we add one last pair: [lastIndex, firstIndex]\n  const numberOfPairs = shouldClose ? arr.length : arr.length - 1;\n  for (let index = 0; index < numberOfPairs; index++) {\n    result.push(arr[index], arr[(index + 1) % arr.length]);\n  }\n  return result;\n}\n\n// For line lists, we need to check if the input array contains an\n// even number of elements. Otherwise, drop the last one since it\n// does not represent a valid line.\nfunction validateLineList<T>(points: T[]): T[] {\n  if (points.length % 2 !== 0) {\n    points.pop();\n  }\n  return points;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nexport { default as PoseMarkers } from \"./PoseMarkers\";\nexport { default as LaserScans } from \"./LaserScans\";\nexport { default as OccupancyGrids } from \"./OccupancyGrids\";\nexport { default as PointClouds } from \"./Pointclouds\";\nexport { default as GPUPointClouds } from \"./GPUPointClouds\";\nexport { default as LinedConvexHulls } from \"./LinedConvexHulls\";\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { vec3 } from \"gl-matrix\";\nimport React, { type Node } from \"react\";\nimport { Arrows, pointToVec3, vec3ToPoint, orientationToVec4, type Arrow } from \"regl-worldview\";\n\nimport CarModel from \"./CarModel\";\nimport { parseColorSetting } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicGroups/TopicSettingsEditor\";\n\ntype Props = {\n  children: Arrow[],\n};\n\n// $FlowFixMe - flow doesn't have a definition for React.memo\nexport default React.memo(function PoseMarkers({ children }: Props): Node[] {\n  const models = [];\n  const markers = [];\n  children.forEach((marker, i) => {\n    if (marker.settings && marker.settings.useCarModel) {\n      const { pose, settings, interactionData } = marker;\n      models.push(<CarModel key={i}>{{ pose, alpha: settings.alpha || 1, interactionData }}</CarModel>);\n    } else {\n      const { settings } = marker;\n      if (settings && settings.color && typeof settings.color === \"string\") {\n        marker = { ...marker, color: parseColorSetting(settings.color) };\n      }\n\n      if (settings && settings.size) {\n        marker = {\n          ...marker,\n          scale: {\n            x: settings.size.shaftWidth || marker.scale.x,\n            y: settings.size.headWidth || marker.scale.y,\n            z: settings.size.headLength || marker.scale.z,\n          },\n        };\n      }\n\n      const pos = pointToVec3(marker.pose.position);\n      const orientation = orientationToVec4(marker.pose.orientation);\n      const dir = vec3.transformQuat([0, 0, 0], [1, 0, 0], orientation);\n      // the total length of the arrow is 4.7, we move the tail backwards by 0.88 (prev implementation)\n      const tipPoint = vec3.scaleAndAdd([0, 0, 0], pos, dir, 3.82);\n      const tailPoint = vec3.scaleAndAdd([0, 0, 0], pos, dir, -0.88);\n      markers.push({ ...marker, points: [vec3ToPoint(tailPoint), vec3ToPoint(tipPoint)] });\n    }\n  });\n\n  return models.concat(<Arrows key=\"arrows\">{markers}</Arrows>);\n});\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport { vec3 } from \"gl-matrix\";\nimport React from \"react\";\nimport { GLTFScene, parseGLB, type Pose, type Scale } from \"regl-worldview\";\n\nimport carModelURL from \"webviz-core/src/panels/ThreeDimensionalViz/commands/CarModel/carModel.glb\";\nimport { type InteractionData } from \"webviz-core/src/panels/ThreeDimensionalViz/Interactions/types\";\n\nasync function loadCarModel() {\n  const response = await fetch(carModelURL);\n  if (!response.ok) {\n    throw new Error(`unable to load car model: ${response.status}`);\n  }\n  const model = await parseGLB(await response.arrayBuffer());\n  const nodes = [...model.json.nodes];\n\n  // overwrite the translation component of the root node so the car's center is its rear axle\n  const translation = [0, 0, 0];\n  vec3.lerp(translation, model.json.accessors[1].min, model.json.accessors[1].max, 0.5);\n  vec3.scale(translation, translation, -nodes[0].scale[0]);\n  translation[1] += 56.075834;\n  translation[2] += 136.19549;\n  nodes[0] = { ...nodes[0], translation };\n\n  return {\n    ...model,\n    json: {\n      ...model.json,\n      nodes,\n\n      // change sampler minFilter to avoid blurry textures\n      samplers: model.json.samplers.map((sampler) => ({\n        ...sampler,\n        minFilter: WebGLRenderingContext.LINEAR,\n      })),\n    },\n  };\n}\n\ntype Props = {|\n  children: {|\n    pose: Pose,\n    scale?: Scale,\n    alpha?: number,\n    interactionData?: InteractionData,\n  |},\n|};\n\n// default scale is 0.01 because the model's units are centimeters\nexport default function CarModel({\n  children: { pose, alpha = 1, scale = { x: 0.01, y: 0.01, z: 0.01 }, interactionData },\n}: Props) {\n  return <GLTFScene model={loadCarModel}>{{ pose, alpha, scale, interactionData }}</GLTFScene>;\n}\n","module.exports = __webpack_public_path__ + \"6a934943c1d8e69a6799d947c1987ac2.glb\";","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { range } from \"lodash\";\nimport * as React from \"react\";\nimport {\n  Command,\n  withPose,\n  type Regl,\n  type CommonCommandProps,\n  nonInstancedGetChildrenForHitmap,\n} from \"regl-worldview\";\n\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport type { LaserScan } from \"webviz-core/src/types/Messages\";\n\nconst laserScan = (regl: Regl) =>\n  withPose({\n    primitive: \"points\",\n    vert: getGlobalHooks().perPanelHooks().ThreeDimensionalViz.LaserScanVert,\n    frag: `\n  precision mediump float;\n  varying vec4 vColor;\n  uniform bool isCircle;\n  void main () {\n    if (isCircle && length(gl_PointCoord * 2.0 - 1.0) > 1.0) {\n      discard;\n    }\n\n    gl_FragColor = vColor;\n  }\n  `,\n\n    uniforms: {\n      pointSize: (context, props) => (props.settings && props.settings.pointSize) || 4,\n      isCircle: (context, props) => (props.settings && props.settings.pointShape === \"circle\") || false,\n      // Color is not included in the LaserScan message - it's only included if the color is added by\n      // getChildrenForHitmap.\n      isHitmap: (context, props) => !!props.color,\n\n      angle_min: regl.prop(\"angle_min\"),\n      angle_increment: regl.prop(\"angle_increment\"),\n      range_min: regl.prop(\"range_min\"),\n      range_max: regl.prop(\"range_max\"),\n    },\n\n    attributes: {\n      index: (context, props) => range(props.ranges.length),\n      range: regl.prop(\"ranges\"),\n      intensity: (context, props) =>\n        props.intensities.length === props.ranges.length\n          ? props.intensities\n          : new Float32Array(props.ranges.length).fill(1),\n      hitmapColor: (context, props) => new Array(props.ranges.length).fill(props.color || [0, 0, 0, 1]),\n    },\n\n    count: regl.prop(\"ranges.length\"),\n  });\n\ntype Props = { ...CommonCommandProps, children: LaserScan[] };\n\nexport default function LaserScans(props: Props) {\n  return <Command getChildrenForHitmap={nonInstancedGetChildrenForHitmap} {...props} reglCommand={laserScan} />;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport { Command, withPose, pointToVec3, defaultBlend, type CommonCommandProps } from \"regl-worldview\";\n\nimport { getGlobalHooks } from \"webviz-core/src/loadWebviz\";\nimport { TextureCache } from \"webviz-core/src/panels/ThreeDimensionalViz/commands/utils\";\nimport type { OccupancyGridMessage } from \"webviz-core/src/types/Messages\";\n\nconst occupancyGrids = (regl: any) => {\n  // make a buffer holding the verticies of a 1x1 plane\n  // it will be resized in the shader\n  const positionBuffer = regl.buffer([0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0]);\n\n  const cache = new TextureCache(regl);\n  const paletteTextures = {};\n\n  return withPose({\n    primitive: \"triangle strip\",\n\n    vert: `\n    precision lowp float;\n\n    uniform mat4 projection, view;\n    uniform vec3 offset;\n    uniform vec4 orientation;\n    uniform float width, height, resolution, alpha;\n\n    attribute vec3 point;\n\n    #WITH_POSE\n\n    varying vec2 uv;\n    varying float vAlpha;\n\n    void main () {\n      // set the texture uv to the unscaled vertext point\n      uv = vec2(point.x, point.y);\n\n      // compute the plane vertex dimensions\n      float planeWidth = width * resolution;\n      float planeHeight = height * resolution;\n\n      // rotate the point by the ogrid orientation & scale the point by the plane vertex dimensions\n      vec3 position = rotate(point, orientation) * vec3(planeWidth, planeHeight, 1.);\n\n      // move the vertex by the marker offset\n      vec3 loc = applyPose(position + offset);\n      vAlpha = alpha;\n      gl_Position = projection * view * vec4(loc, 1);\n    }\n    `,\n    frag: `\n    precision lowp float;\n\n    varying vec2 uv;\n    varying float vAlpha;\n\n    uniform sampler2D palette;\n    uniform sampler2D data;\n\n    void main () {\n      // look up the point in our data texture corresponding to\n      // the current point being shaded\n      vec4 point = texture2D(data, uv);\n\n      // vec2(point.a, 0.5) is similar to textelFetch for webGL 1.0\n      // it looks up a point along our 1 dimentional palette\n      // http://www.lighthouse3d.com/tutorials/glsl-tutorial/texture-coordinates/\n      gl_FragColor = texture2D(palette, vec2(point.a, 0.5));\n      gl_FragColor.a *= vAlpha;\n    }\n    `,\n    blend: defaultBlend,\n\n    depth: { enable: true, mask: false },\n\n    attributes: {\n      point: positionBuffer,\n    },\n\n    uniforms: {\n      width: regl.prop(\"info.width\"),\n      height: regl.prop(\"info.height\"),\n      resolution: regl.prop(\"info.resolution\"),\n      // make alpha a uniform so in the future it can be controlled by topic settings\n      alpha: (context: any, props: OccupancyGridMessage) => {\n        return props.alpha || 0.5;\n      },\n      offset: (context: any, props: OccupancyGridMessage) => {\n        return pointToVec3(props.info.origin.position);\n      },\n      orientation: (context: any, props: OccupancyGridMessage) => {\n        const { x, y, z, w } = props.info.origin.orientation;\n        return [x, y, z, w];\n      },\n      palette: (context: any, props: OccupancyGridMessage) => {\n        const palette = getGlobalHooks()\n          .perPanelHooks()\n          .ThreeDimensionalViz.getMapPalette(props.map);\n        // track which palettes we've uploaded as textures\n        if (paletteTextures[palette]) {\n          return paletteTextures[palette];\n        }\n        // if we haven't already uploaded this palette, upload it to the GPU\n        paletteTextures[palette] = regl.texture({\n          format: \"rgba\",\n          type: \"uint8\",\n          mipmap: false,\n          data: palette,\n          width: 256,\n          height: 1,\n        });\n        return paletteTextures[palette];\n      },\n      data: (context: any, props: any) => {\n        return cache.get(props);\n      },\n    },\n\n    count: 4,\n  });\n};\n\ntype Props = { ...CommonCommandProps, children: OccupancyGridMessage[] };\n\nexport default function OccupancyGrids(props: Props) {\n  // We can click through OccupancyGrids.\n  return <Command getChildrenForHitmap={null} {...props} reglCommand={occupancyGrids} />;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport * as React from \"react\";\nimport {\n  Command,\n  withPose,\n  type Regl,\n  type CommonCommandProps,\n  type AssignNextColorsFn,\n  type MouseEventObject,\n} from \"regl-worldview\";\n\nimport filterMap from \"webviz-core/src/filterMap\";\nimport { memoizedMapMarker } from \"webviz-core/src/panels/ThreeDimensionalViz/commands/Pointclouds/PointCloudBuilder\";\nimport { type PointCloud } from \"webviz-core/src/types/Messages\";\n\nconst pointCloud = (regl: Regl) => {\n  const pointCloudCommand = withPose({\n    primitive: \"points\",\n    vert: `\n      precision mediump float;\n\n      // this comes from the camera\n      uniform mat4 projection, view;\n\n      #WITH_POSE\n\n      attribute vec3 position;\n      attribute vec3 color;\n      uniform float pointSize;\n      varying vec3 fragColor;\n      void main () {\n        gl_PointSize = pointSize;\n        vec3 p = applyPose(position);\n        gl_Position = projection * view * vec4(p, 1);\n        fragColor = color;\n      }\n  `,\n    frag: `\n      precision mediump float;\n      varying vec3 fragColor;\n      uniform bool isCircle;\n      void main () {\n        if (isCircle) {\n          vec3 normal;\n          normal.xy = gl_PointCoord * 2.0 - 1.0;\n          float r2 = dot(normal.xy, normal.xy);\n          if (r2 > 1.0) {\n            discard;\n          }\n        }\n        gl_FragColor = vec4(fragColor.x / 255.0, fragColor.y / 255.0, fragColor.z / 255.0, 1);\n      }\n  `,\n    attributes: {\n      position: regl.prop(\"points\"),\n      color: regl.prop(\"colors\"),\n    },\n\n    uniforms: {\n      pointSize: (context, props) => {\n        return props.settings?.pointSize || 2;\n      },\n      isCircle: (context, props) => {\n        return props.settings?.pointShape ? props.settings?.pointShape === \"circle\" : true;\n      },\n    },\n\n    count: (context, props) => {\n      return props.points.length / 3;\n    },\n  });\n\n  const command = regl(pointCloudCommand);\n\n  return (props: any) => {\n    command(props);\n  };\n};\n\nfunction instancedGetChildrenForHitmap<\n  T: {\n    points: Float32Array,\n    colors: Uint8Array | number[],\n    settings: {\n      pointSize?: number,\n    },\n  }\n>(props: T[], assignNextColors: AssignNextColorsFn, excludedObjects: MouseEventObject[]): T[] {\n  return filterMap(props, (prop) => {\n    // exclude all points if one has been interacted with because iterating through all points in\n    // in pointcloud object is expensive\n    const isInExcludedObjects = excludedObjects.find(({ object }) => object === prop);\n    if (isInExcludedObjects) {\n      return null;\n    }\n    const hitmapProp = { ...prop };\n    const instanceCount = Math.ceil(prop.points.length / 3);\n    if (instanceCount < 1) {\n      return null;\n    }\n    const idColors = assignNextColors(prop, instanceCount);\n    const allColors = [];\n    idColors.forEach((color) => {\n      allColors.push(color[0] * 255);\n      allColors.push(color[1] * 255);\n      allColors.push(color[2] * 255);\n    });\n    hitmapProp.colors = allColors;\n    // expand the interaction area\n    hitmapProp.settings = hitmapProp.settings ? { ...hitmapProp.settings } : {};\n    hitmapProp.settings.pointSize = (hitmapProp.settings.pointSize || 2) * 5;\n    return hitmapProp;\n  });\n}\n\ntype Props = { ...CommonCommandProps, children: PointCloud[] };\n\nexport default function PointClouds({ children, ...rest }: Props) {\n  const decodedMarkers = children.map(memoizedMapMarker);\n  return (\n    <Command getChildrenForHitmap={instancedGetChildrenForHitmap} {...rest} reglCommand={pointCloud}>\n      {decodedMarkers}\n    </Command>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport React, { useRef } from \"react\";\nimport {\n  Command,\n  withPose,\n  type Regl,\n  type CommonCommandProps,\n  type AssignNextColorsFn,\n  type MouseEventObject,\n} from \"regl-worldview\";\n\nimport { FLOAT_SIZE } from \"./buffers\";\nimport { parseHexColor } from \"./decodeMarker\";\nimport { updateMarkerCache } from \"./memoization\";\nimport type { MemoizedMarker, MemoizedVertexBuffer, VertexBuffer } from \"./types\";\nimport VertexBufferCache from \"./VertexBufferCache\";\nimport filterMap from \"webviz-core/src/filterMap\";\nimport { DEFAULT_FLAT_COLOR } from \"webviz-core/src/panels/ThreeDimensionalViz/TopicSettingsEditor/PointCloudSettingsEditor\";\nimport type { PointCloud } from \"webviz-core/src/types/Messages\";\n\nconst COLOR_MODE_FLAT = 0;\nconst COLOR_MODE_RGB = 1;\nconst COLOR_MODE_BGR = -1;\nconst COLOR_MODE_GRADIENT = 2;\nconst COLOR_MODE_RAINBOW = 3;\n\n// Implements a custom caching mechanism for vertex buffers.\n// Any memoized vertex buffer needs to be re-created whenever the Regl context\n// changes. That happens mostly when resizing the canvas or adding/removing new\n// panels on Webviz. Whenever Regl context changes, pointCloud() is called again\n// and creates new instances for both position and color caches, leading to regenerating\n// all buffers again.\n// Memoized buffers are automatically deleted by WebGL whenever its context\n// changes. There's no need to manually delete them.\nconst pointCloud = (regl: Regl) => {\n  // The same vertex buffer can be used for both positions and colors (see comments in color attribute below).\n  // For that reason, we need to keep two independent caches.\n  const positionBufferCache = new VertexBufferCache();\n  const colorBufferCache = new VertexBufferCache();\n\n  const getCachedBuffer = (cache: VertexBufferCache, vertexBuffer: VertexBuffer): MemoizedVertexBuffer => {\n    const { buffer, offset, stride } = vertexBuffer;\n    let memoized = cache.get(vertexBuffer);\n    if (\n      !memoized ||\n      memoized.vertexBuffer.buffer !== buffer ||\n      memoized.offset !== FLOAT_SIZE * offset ||\n      memoized.stride !== FLOAT_SIZE * stride\n    ) {\n      // If this is a new vertex buffer or if its content has changed somehow\n      // (rendering to hitmap or different settings), create a new memoized\n      // GPU buffer with the correct offset and stride and add it to the cache.\n      memoized = {\n        vertexBuffer,\n        buffer: regl.buffer(buffer),\n        offset: FLOAT_SIZE * offset,\n        stride: FLOAT_SIZE * stride,\n        divisor: 0,\n      };\n      cache.set(vertexBuffer, memoized);\n    }\n    return memoized;\n  };\n\n  const pointCloudCommand = withPose({\n    primitive: \"points\",\n    vert: `\n      precision mediump float;\n\n      // this comes from the camera\n      uniform mat4 projection, view;\n\n      #WITH_POSE\n\n      attribute vec3 position;\n      attribute vec3 color; // color values in range [0-255]\n\n      uniform float pointSize;\n      uniform int colorMode;\n      uniform vec4 flatColor;\n      uniform vec4 minGradientColor;\n      uniform vec4 maxGradientColor;\n      uniform float minColorFieldValue;\n      uniform float maxColorFieldValue;\n\n      varying vec3 fragColor;\n\n      float getFieldValue() {\n        return color.x;\n      }\n\n      float getFieldValue_UNORM() {\n        float value = getFieldValue();\n        float colorFieldRange = maxColorFieldValue - minColorFieldValue;\n        if (abs(colorFieldRange) < 0.00001) {\n          return 0.0;\n        }\n        return max(0.0, min((value - minColorFieldValue) / colorFieldRange, 1.0));\n      }\n\n      vec3 gradientColor() {\n        float pct = getFieldValue_UNORM();\n        return mix(minGradientColor, maxGradientColor, pct).rgb;\n      }\n\n      // taken from http://docs.ros.org/jade/api/rviz/html/c++/point__cloud__transformers_8cpp_source.html\n      // line 47\n      vec3 rainbowColor() {\n        float pct = getFieldValue_UNORM();\n        float h = (1.0 - pct) * 5.0 + 1.0;\n        float i = floor(h);\n        float f = fract(h);\n        // if i is even\n        if (mod(i, 2.0) < 1.0) {\n          f = 1.0 - f;\n        }\n        float n = 1.0 - f;\n        vec3 ret = vec3(0);\n        if (i <= 1.0) {\n          ret = vec3(n, 0.0, 1.0);\n        } else if (i == 2.0) {\n          ret = vec3(0.0, n, 1.0);\n        } else if (i == 3.0) {\n          ret = vec3(0.0, 1.0, n);\n        } else if (i == 4.0) {\n          ret = vec3(n, 1.0, 0.0);\n        } else {\n          ret = vec3(1.0, n, 0.0);\n        }\n        return 255.0 * ret;\n      }\n\n      void main () {\n        gl_PointSize = pointSize;\n        vec3 p = applyPose(position);\n        gl_Position = projection * view * vec4(p, 1);\n\n        if (colorMode == ${COLOR_MODE_GRADIENT}) {\n          fragColor = gradientColor();\n        } else if (colorMode == ${COLOR_MODE_RAINBOW}) {\n          fragColor = rainbowColor();\n        } else if (colorMode == ${COLOR_MODE_BGR}) {\n          fragColor = vec3(color.b, color.g, color.r);\n        } else if (colorMode == ${COLOR_MODE_RGB}) {\n          fragColor = color;\n        } else {\n          fragColor = flatColor.rgb;\n        }\n      }\n    `,\n    frag: `\n      precision mediump float;\n      varying vec3 fragColor;\n      uniform bool isCircle;\n      void main () {\n        if (isCircle) {\n          // gl_PointCoord give us the coordinate of this pixel relative to the current point's position\n          // In order to render a circle, we normalize and compute the distance from the current point.\n          // Discard any fragments that are too far away from the center\n          vec3 normal;\n          normal.xy = gl_PointCoord * 2.0 - 1.0;\n          float r2 = dot(normal.xy, normal.xy);\n          if (r2 > 1.0) {\n            discard;\n          }\n        }\n        gl_FragColor = vec4(fragColor / 255.0, 1.0);\n      }\n    `,\n    attributes: {\n      position: (context, props) => {\n        return getCachedBuffer(positionBufferCache, props.positionBuffer);\n      },\n      color: (context, props) => {\n        const { hitmapColors, settings } = props;\n        const { colorMode } = settings;\n        if (hitmapColors) {\n          // If colors are provided, we use those instead what is indicated by colorMode\n          // This is a common scenario when rendering to the hitmap, for example.\n          // Unfortunately, we cannot memoize hitmap colors since new objects can be added\n          // to the scene hierarchy at any time.\n          return hitmapColors;\n        }\n\n        // If we're using \"flat\" color mode, we pass the actual color in a uniform (see uniforms below)\n        // But we still need to provide some color buffer, even if it's not going to be used.\n        // Instead of creating a dummy buffer, we just send the one we have for position.\n        // TODO (Hernan): I tried using the constant option provided by Regl, but it leads to\n        // visual artifacts. I need to check if this is a bug in Regl.\n        const colorBuffer = !colorMode || colorMode.mode === \"flat\" ? props.positionBuffer : props.colorBuffer;\n        return getCachedBuffer(colorBufferCache, colorBuffer);\n      },\n    },\n\n    uniforms: {\n      pointSize: (context, props) => {\n        return props.settings?.pointSize || 2;\n      },\n      isCircle: (context, props) => {\n        return props.settings?.pointShape ? props.settings?.pointShape === \"circle\" : true;\n      },\n      colorMode: (context, props) => {\n        const { settings, is_bigendian, hitmapColors } = props;\n        if (hitmapColors) {\n          // We're providing a colors array in RGB format\n          return COLOR_MODE_RGB;\n        }\n        const { colorMode } = settings;\n        if (colorMode.mode === \"flat\") {\n          return COLOR_MODE_FLAT;\n        } else if (colorMode.mode === \"gradient\") {\n          return COLOR_MODE_GRADIENT;\n        } else if (colorMode.mode === \"rainbow\") {\n          return COLOR_MODE_RAINBOW;\n        }\n        return is_bigendian ? COLOR_MODE_RGB : COLOR_MODE_BGR;\n      },\n      flatColor: (context, props) => {\n        const { colorMode } = props.settings;\n        return parseHexColor(colorMode.flatColor || DEFAULT_FLAT_COLOR);\n      },\n      minGradientColor: (context, props) => {\n        const { colorMode } = props.settings;\n        return parseHexColor(colorMode.minColor || DEFAULT_FLAT_COLOR);\n      },\n      maxGradientColor: (context, props) => {\n        const { colorMode } = props.settings;\n        return parseHexColor(colorMode.maxColor || DEFAULT_FLAT_COLOR);\n      },\n      minColorFieldValue: (context, props) => {\n        return props.minColorValue;\n      },\n      maxColorFieldValue: (context, props) => {\n        return props.maxColorValue;\n      },\n    },\n\n    count: (context, props) => {\n      return props.pointCount;\n    },\n  });\n\n  const command = regl(pointCloudCommand);\n\n  return (props: any) => {\n    // Call 'onPreRender' for both caches before rendering a frame.\n    positionBufferCache.onPreRender();\n    colorBufferCache.onPreRender();\n\n    // Execute command\n    command(props);\n\n    // Call 'onPostRender' for both caches after rendering a frame\n    // This will delete any unused GPU buffer and prevent memory leaks.\n    positionBufferCache.onPostRender();\n    colorBufferCache.onPostRender();\n  };\n};\n\nfunction instancedGetChildrenForHitmap<\n  T: {\n    hitmapColors?: Uint8Array | number[],\n    width?: number,\n    height?: number,\n    settings?: {\n      pointSize?: number,\n    },\n  }\n>(props: T[], assignNextColors: AssignNextColorsFn, excludedObjects: MouseEventObject[]): T[] {\n  return filterMap(props, (prop) => {\n    // exclude all points if one has been interacted with because iterating through all points\n    // in pointcloud object is expensive\n    const isInExcludedObjects = excludedObjects.find(({ object }) => object === prop);\n    if (isInExcludedObjects) {\n      return null;\n    }\n    const hitmapProp = { ...prop };\n    const { width, height } = prop;\n    if (!width || !height) {\n      return null;\n    }\n    const instanceCount = Math.ceil(width * height);\n    if (instanceCount < 1) {\n      return null;\n    }\n    const idColors = assignNextColors(prop, instanceCount);\n    const allColors = [];\n    idColors.forEach((color) => {\n      allColors.push(color[0] * 255);\n      allColors.push(color[1] * 255);\n      allColors.push(color[2] * 255);\n    });\n    hitmapProp.hitmapColors = allColors;\n    // expand the interaction area\n    hitmapProp.settings = hitmapProp.settings ? { ...hitmapProp.settings } : {};\n    hitmapProp.settings.pointSize = (hitmapProp.settings.pointSize || 2) * 5;\n    return hitmapProp;\n  });\n}\n\ntype Props = { ...CommonCommandProps, children: PointCloud[] };\n\nexport default function PointClouds({ children, ...rest }: Props) {\n  const markerCache = useRef(new Map<Uint8Array, MemoizedMarker>());\n  markerCache.current = updateMarkerCache(markerCache.current, children);\n  const decodedMarkers = [...markerCache.current.values()].map((decoded) => decoded.marker);\n  return (\n    <Command getChildrenForHitmap={instancedGetChildrenForHitmap} {...rest} reglCommand={pointCloud}>\n      {decodedMarkers}\n    </Command>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport { isEqual } from \"lodash\";\n\nimport { decodeMarker } from \"./decodeMarker\";\nimport type { MemoizedMarker, PointCloudMarker } from \"./types\";\n\n// Implement manual memoization for markers.\n// When rendering point clouds, we always receive the markers that need to be drawn so there's no\n// need to keep track of instances that are not rendered anymore.\nexport function updateMarkerCache(\n  existing: Map<Uint8Array, MemoizedMarker>,\n  markers: PointCloudMarker[]\n): Map<Uint8Array, MemoizedMarker> {\n  const markerCache = new Map<Uint8Array, MemoizedMarker>();\n  markers.forEach((marker) => {\n    let decoded = existing.get(marker.data);\n    // Check if a decoded marker already exists in cache. If not, decode it and save it for later use\n    // Compare 'settings' by deep-equality since they may be change by user. Also, the instance is different when re-rendering Layout\n    // Compare 'hitmapColors' by reference because the same marker msg may contain different values\n    if (!decoded || !isEqual(marker.settings, decoded.settings) || marker.hitmapColors !== decoded.hitmapColors) {\n      decoded = {\n        marker: decodeMarker(marker),\n        settings: marker.settings,\n        hitmapColors: marker.hitmapColors,\n      };\n    }\n    markerCache.set(marker.data, decoded);\n  });\n  return markerCache;\n}\n\n// Get a memoized marker, if one exists in cache\n// This function is used for testing purposes\nexport function memoizedMarker(cache: Map<Uint8Array, MemoizedMarker>, marker: PointCloudMarker): ?PointCloudMarker {\n  return cache.get(marker.data)?.marker;\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport type { MemoizedVertexBuffer, VertexBuffer } from \"./types\";\n\n// Implements a double buffer caching for vertex buffers.\n// We keep track of both the current and the previous frames to tell\n// which vertex buffer are not used anymore and need to be deleted.\nexport default class VertexBufferCache {\n  _current = new Map<Float32Array, MemoizedVertexBuffer>();\n  _previous = new Map<Float32Array, MemoizedVertexBuffer>();\n\n  // Call this method before rendering to initialize\n  // the cache for the current frame.\n  onPreRender() {\n    this._previous = this._current;\n    this._current = new Map<Float32Array, MemoizedVertexBuffer>();\n  }\n\n  // Get a vertex buffer from the cache.\n  get(key: VertexBuffer): ?MemoizedVertexBuffer {\n    const { buffer } = key;\n    let existing = this._current.get(buffer);\n    if (existing) {\n      // The vertex buffer exists in the current frame\n      return existing;\n    }\n    existing = this._previous.get(buffer);\n    if (existing) {\n      // The vertex buffer was not used in the current frame yet\n      // but there is valid cached instance in the previous frame.\n      // Move the cached value to the current frame to prevent it\n      // from being deleted when executing onPostRender().\n      this.set(key, existing);\n      this._previous.delete(buffer);\n      return existing;\n    }\n    // The vertex buffer has not being cached neither in the current\n    // nor in the previous frame.\n    return null;\n  }\n\n  // Set a cached value for a vertex buffer\n  set(key: VertexBuffer, value: MemoizedVertexBuffer) {\n    const existing = this._current.get(key.buffer);\n    if (existing) {\n      if (existing === value) {\n        // Nothing to do\n        return;\n      }\n      // A vertex buffer should not change in the same frame,\n      // but if it does, we need override the existing cached value\n      // and delete it's buffer.\n      this._deleteBuffer(existing);\n    }\n    this._current.set(key.buffer, value);\n  }\n\n  // Call this function after rendering a frame to delete unused buffers\n  onPostRender() {\n    this._previous.forEach(this._deleteBuffer);\n    this._previous.clear();\n  }\n\n  _deleteBuffer(cached: MemoizedVertexBuffer) {\n    const { buffer } = cached;\n    if (buffer) {\n      // Destroy GPU buffer\n      buffer.destroy();\n    } else {\n      console.warn(\"Cannot destroy buffer\", cached);\n    }\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2019-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport flatMap from \"lodash/flatMap\";\nimport uniqBy from \"lodash/uniqBy\";\nimport qh from \"quickhull3d\";\nimport * as React from \"react\";\nimport {\n  Triangles,\n  Lines,\n  type Line,\n  type TriangleList,\n  type CommonCommandProps,\n  getChildrenForHitmapWithOriginalMarker,\n  nonInstancedGetChildrenForHitmap,\n  shouldConvert,\n  pointToVec3,\n  vec4ToRGBA,\n} from \"regl-worldview\";\n\ntype Props = {\n  children: Line[],\n  ...CommonCommandProps,\n};\n\nfunction getTriangleChildrenForHitmap(props: Line[], assignNextColors, excludedObjects): TriangleList[] {\n  // This getChildrenForHitmap function takes lines and returns triangles.\n  const triangles = props\n    .map((line) => {\n      // Make sure all points are in vec3 format and unique.\n      const points = uniqBy(\n        line.points.map((point) => (shouldConvert(point) ? pointToVec3(point) : point)),\n        ([x, y, z]) => `${x}:${y}:${z}`\n      );\n      // We need a minimum of 4 points to do the convex hull algorithm.\n      if (points.length < 4) {\n        return null;\n      }\n      // Try to run hulling on the face indices. If there is an error, discard the result.\n      let faceIndices;\n      try {\n        faceIndices = qh(points);\n      } catch (error) {\n        console.error(error);\n        return null;\n      }\n\n      // From the point indices of each face, find the points and flatmap to get the points of the triangles.\n      const trianglePoints = flatMap(faceIndices, ([index1, index2, index3]) => {\n        return [points[index1], points[index2], points[index3]];\n      });\n      const convertedColor = typeof line.color.r === \"number\" ? line.color : vec4ToRGBA(line.color);\n      return {\n        pose: line.pose,\n        scale: line.scale,\n        color: convertedColor,\n        points: trianglePoints,\n        originalMarker: line.originalMarker,\n      };\n    })\n    .filter(Boolean);\n\n  return getChildrenForHitmapWithOriginalMarker(triangles, assignNextColors, excludedObjects);\n}\n\nexport default function LinedConvexHulls({ children, ...rest }: Props) {\n  return (\n    <React.Fragment>\n      {/* Render all the lines, even if we can't generate a convex hull from them. */}\n      <Lines getChildrenForHitmap={nonInstancedGetChildrenForHitmap} {...rest}>\n        {children}\n      </Lines>\n      <Triangles getChildrenForHitmap={getTriangleChildrenForHitmap} {...rest}>\n        {/*\n         * These Line objects are not renderable by the Triangle shader. But since we're only rendering them inside the\n         * hitmap, we convert them from lines to triangle objects in the `getTriangleChildrenForHitmap` function above.\n         */}\n        {children.map((line) => ({ ...line, originalMarker: line, onlyRenderInHitmap: true }))}\n      </Triangles>\n    </React.Fragment>\n  );\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport { getGlobalHooks } from \"../../loadWebviz\";\nimport Transforms from \"webviz-core/src/panels/ThreeDimensionalViz/Transforms\";\nimport type { Frame } from \"webviz-core/src/players/types\";\nimport { TRANSFORM_STATIC_TOPIC, TRANSFORM_TOPIC } from \"webviz-core/src/util/globalConstants\";\n\ntype State = {| transforms: Transforms |};\n\nfunction withTransforms<Props: *>(ChildComponent: React.ComponentType<Props>) {\n  class Component extends React.PureComponent<$Shape<{| frame: Frame, cleared: boolean, forwardedRef: any |}>, State> {\n    static displayName = `withTransforms(${ChildComponent.displayName || ChildComponent.name || \"\"})`;\n    static contextTypes = { store: PropTypes.any };\n\n    state: State = { transforms: new Transforms() };\n\n    static getDerivedStateFromProps(nextProps: Props, prevState: State): ?$Shape<State> {\n      const { frame, cleared } = nextProps;\n      let { transforms } = prevState;\n      if (cleared) {\n        transforms = new Transforms();\n      }\n\n      getGlobalHooks()\n        .perPanelHooks()\n        .ThreeDimensionalViz.consumePose(frame, transforms);\n\n      const tfs = frame[TRANSFORM_TOPIC];\n      if (tfs) {\n        for (const msg of tfs) {\n          for (const tf of msg.message.transforms) {\n            if (tf.child_frame_id !== getGlobalHooks().perPanelHooks().ThreeDimensionalViz.skipTranformFrame) {\n              transforms.consume(tf);\n            }\n          }\n        }\n      }\n      const tfs_static = frame[TRANSFORM_STATIC_TOPIC];\n      if (tfs_static) {\n        for (const msg of tfs_static) {\n          for (const tf of msg.message.transforms) {\n            transforms.consume(tf);\n          }\n        }\n      }\n\n      return { transforms };\n    }\n\n    render() {\n      // $FlowFixMe - can't seem to figure out how to properly type this.\n      return <ChildComponent {...this.props} ref={this.props.forwardedRef} transforms={this.state.transforms} />;\n    }\n  }\n  return hoistNonReactStatics(\n    React.forwardRef((props, ref) => {\n      return <Component {...props} forwardedRef={ref} />;\n    }),\n    ChildComponent\n  );\n}\n\nexport default withTransforms;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\nexport default `\n  precision mediump float;\n\n  uniform mat4 projection, view;\n\n  #WITH_POSE\n\n  uniform float pointSize;\n  uniform float angle_min;\n  uniform float angle_increment;\n  uniform float range_min;\n  uniform float range_max;\n  uniform bool isHitmap;\n\n  attribute float index;\n  attribute float range;\n  attribute float intensity;\n  attribute vec4 hitmapColor;\n\n  varying vec4 vColor;\n\n  void main () {\n    float angle = angle_min + index * angle_increment;\n    vec3 p = applyPose(vec3(range * cos(angle), range * sin(angle), 0));\n\n    gl_Position = projection * view * vec4(p, 1);\n    gl_PointSize = pointSize;\n\n    if (range < range_min || range > range_max || intensity == 0.0) {\n      gl_PointSize = 0.;\n    } else if (isHitmap) {\n      vColor = hitmapColor;\n    } else {\n      vColor = vec4(0.5, 0.5, 1, 1);\n    }\n  }\n`;\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\nimport ChartJSChart from \"chart.js\";\n\nimport installMulticolorLineChart from \"webviz-core/src/util/multicolorLineChart\";\n\nexport default function installChartjs(Chart: any = ChartJSChart) {\n  const annotationPlugin = require(\"chartjs-plugin-annotation\");\n  const datalabelPlugin = require(\"chartjs-plugin-datalabels\");\n  Chart.plugins.register(annotationPlugin);\n  Chart.plugins.register(datalabelPlugin);\n  installMulticolorLineChart(Chart);\n\n  // Otherwise we'd get labels everywhere.\n  Chart.defaults.global.plugins.datalabels = {};\n  Chart.defaults.global.plugins.datalabels.display = false;\n\n  if (Chart.plugins.count() !== 5) {\n    throw new Error(\n      \"Incorrect number of Chart.js plugins; one probably has not loaded correctly (make sure we don't have duplicate chart.js instances when running `yarn list`.\"\n    );\n  }\n}\n","// @flow\n//\n//  Copyright (c) 2018-present, Cruise LLC\n//\n//  This source code is licensed under the Apache License, Version 2.0,\n//  found in the LICENSE file in the root directory of this source tree.\n//  You may not use this file except in compliance with the License.\n\n/* eslint-disable no-underscore-dangle */\n// From https://github.com/chartjs/Chart.js/issues/4895#issuecomment-341874938\nexport default function installMulticolorLineChart(Chart: any) {\n  Chart.defaults.multicolorLine = Chart.defaults.scatter;\n  Chart.controllers.multicolorLine = Chart.controllers.scatter.extend({\n    draw(ease) {\n      let startIndex = 0;\n      const meta = this.getMeta();\n      const points = meta.data || [];\n      const colors = this.getDataset().colors;\n      const area = this.chart.chartArea;\n      const { multicolorLineYOffset } = this.chart.options.plugins || {};\n      if (multicolorLineYOffset) {\n        meta.dataset._children.forEach((data) => {\n          if (!data._view.originalY) {\n            data._view.originalY = data._view.y;\n          }\n          data._view.y = data._view.originalY + multicolorLineYOffset;\n        });\n      }\n      const originalDatasets = meta.dataset._children.filter((data) => {\n        return !isNaN(data._view.y);\n      });\n\n      function setColor(newColor, { dataset }) {\n        dataset._view.borderColor = newColor;\n      }\n\n      if (!colors) {\n        Chart.controllers.scatter.prototype.draw.call(this, ease);\n        return;\n      }\n\n      for (let i = 2; i <= colors.length; i++) {\n        if (colors[i - 1] !== colors[i]) {\n          setColor(colors[i - 1], meta);\n          meta.dataset._children = originalDatasets.slice(startIndex, i);\n          meta.dataset.draw();\n          startIndex = i - 1;\n        }\n      }\n\n      meta.dataset._children = originalDatasets.slice(startIndex);\n      meta.dataset.draw();\n      meta.dataset._children = originalDatasets;\n\n      points.forEach((point) => {\n        point.draw(area);\n      });\n    },\n  });\n}\n"],"sourceRoot":""}